function e(a){throw a;}var h=void 0,j=!0,k=null,l=!1;function aa(){return function(){}}function ba(a){return function(b){this[a]=b}}function ca(a){return function(){return this[a]}}function da(a){return function(){return a}}var n,fa=fa||{},ga=this;function ha(a,b){var c=a.split("."),d=ga;!(c[0]in d)&&d.execScript&&d.execScript("var "+c[0]);for(var f;c.length&&(f=c.shift());)!c.length&&ia(b)?d[f]=b:d=d[f]?d[f]:d[f]={}}
function ka(a){for(var a=a.split("."),b=ga,c;c=a.shift();)if(b[c]!=k)b=b[c];else return k;return b}function la(){}function ma(a){a.b=function(){return a.Jh?a.Jh:a.Jh=new a}}
function na(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function ia(a){return a!==h}function oa(a){return"array"==na(a)}function pa(a){var b=na(a);return"array"==b||"object"==b&&"number"==typeof a.length}function p(a){return"string"==typeof a}function qa(a){return"function"==na(a)}function ra(a){var b=typeof a;return"object"==b&&a!=k||"function"==b}function sa(a){return a[ta]||(a[ta]=++ua)}var ta="closure_uid_"+Math.floor(2147483648*Math.random()).toString(36),ua=0;
function va(a,b,c){return a.call.apply(a.bind,arguments)}function wa(a,b,c){a||e(Error());if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function q(a,b,c){q=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?va:wa;return q.apply(k,arguments)}
function xa(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=Array.prototype.slice.call(arguments);b.unshift.apply(b,c);return a.apply(this,b)}}var r=Date.now||function(){return+new Date};function ya(a,b){var c=b||{},d;for(d in c)var f=(""+c[d]).replace(/\$/g,"$$$$"),a=a.replace(RegExp("\\{\\$"+d+"\\}","gi"),f);return a}function s(a,b){function c(){}c.prototype=b.prototype;a.h=b.prototype;a.prototype=new c;a.prototype.constructor=a};function u(){0!=za&&(this.Ll=Error().stack,Aa[sa(this)]=this)}var za=0,Aa={};u.prototype.ae=l;u.prototype.$=function(){if(!this.ae&&(this.ae=j,this.k(),0!=za)){var a=sa(this);delete Aa[a]}};u.prototype.k=function(){this.ij&&Ba.apply(k,this.ij);if(this.gi)for(;this.gi.length;)this.gi.shift()()};function Ca(a){a&&"function"==typeof a.$&&a.$()}function Ba(a){for(var b=0,c=arguments.length;b<c;++b){var d=arguments[b];pa(d)?Ba.apply(k,d):Ca(d)}};function Da(a,b){for(var c=1;c<arguments.length;c++)var d=String(arguments[c]).replace(/\$/g,"$$$$"),a=a.replace(/\%s/,d);return a}function Ea(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")}function Fa(a,b){var c=String(a).toLowerCase(),d=String(b).toLowerCase();return c<d?-1:c==d?0:1}
function Ga(a){if(!Ha.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(Ia,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(Ja,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(Ka,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(La,"&quot;"));return a}var Ia=/&/g,Ja=/</g,Ka=/>/g,La=/\"/g,Ha=/[&<>\"]/;function Ma(a){var a=ia(h)?a.toFixed(h):String(a),b=a.indexOf(".");-1==b&&(b=a.length);b=Math.max(0,2-b);return Array(b+1).join("0")+a}
function Na(a){return String(a).replace(/\-([a-z])/g,function(a,c){return c.toUpperCase()})};var Pa=Array.prototype,Qa=Pa.indexOf?function(a,b,c){return Pa.indexOf.call(a,b,c)}:function(a,b,c){c=c==k?0:0>c?Math.max(0,a.length+c):c;if(p(a))return!p(b)||1!=b.length?-1:a.indexOf(b,c);for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},v=Pa.forEach?function(a,b,c){Pa.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,f=p(a)?a.split(""):a,g=0;g<d;g++)g in f&&b.call(c,f[g],g,a)};function Ra(a,b,c){for(var d=p(a)?a.split(""):a,f=a.length-1;0<=f;--f)f in d&&b.call(c,d[f],f,a)}
var Sa=Pa.filter?function(a,b,c){return Pa.filter.call(a,b,c)}:function(a,b,c){for(var d=a.length,f=[],g=0,i=p(a)?a.split(""):a,m=0;m<d;m++)if(m in i){var t=i[m];b.call(c,t,m,a)&&(f[g++]=t)}return f},Ta=Pa.map?function(a,b,c){return Pa.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,f=Array(d),g=p(a)?a.split(""):a,i=0;i<d;i++)i in g&&(f[i]=b.call(c,g[i],i,a));return f},Ua=Pa.every?function(a,b,c){return Pa.every.call(a,b,c)}:function(a,b,c){for(var d=a.length,f=p(a)?a.split(""):a,g=0;g<d;g++)if(g in
f&&!b.call(c,f[g],g,a))return l;return j};function Va(a,b,c){b=Wa(a,b,c);return 0>b?k:p(a)?a.charAt(b):a[b]}function Wa(a,b,c){for(var d=a.length,f=p(a)?a.split(""):a,g=0;g<d;g++)if(g in f&&b.call(c,f[g],g,a))return g;return-1}function Xa(a,b){return 0<=Qa(a,b)}function Ya(a,b){var c=Qa(a,b);0<=c&&Pa.splice.call(a,c,1)}function Za(a,b,c){b=Wa(a,b,c);return 0<=b?(Pa.splice.call(a,b,1),j):l}function $a(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]}
function ab(a,b){for(var c=1;c<arguments.length;c++){var d=arguments[c],f;if(oa(d)||(f=pa(d))&&d.hasOwnProperty("callee"))a.push.apply(a,d);else if(f)for(var g=a.length,i=d.length,m=0;m<i;m++)a[g+m]=d[m];else a.push(d)}}function bb(a,b,c,d){Pa.splice.apply(a,cb(arguments,1))}function cb(a,b,c){return 2>=arguments.length?Pa.slice.call(a,b):Pa.slice.call(a,b,c)}function db(a,b){return a>b?1:a<b?-1:0};function w(){u.call(this);this.Oa=[];this.Ob={}}s(w,u);n=w.prototype;n.Ph=1;n.Fe=0;n.subscribe=function(a,b,c){var d=this.Ob[a];d||(d=this.Ob[a]=[]);var f=this.Ph;this.Oa[f]=a;this.Oa[f+1]=b;this.Oa[f+2]=c;this.Ph=f+3;d.push(f);return f};n.Vi=function(a){if(0!=this.Fe)return this.wd||(this.wd=[]),this.wd.push(a),l;var b=this.Oa[a];if(b){var c=this.Ob[b];c&&Ya(c,a);delete this.Oa[a];delete this.Oa[a+1];delete this.Oa[a+2]}return!!b};
n.c=function(a,b){var c=this.Ob[a];if(c){this.Fe++;for(var d=cb(arguments,1),f=0,g=c.length;f<g;f++){var i=c[f];this.Oa[i+1].apply(this.Oa[i+2],d)}this.Fe--;if(this.wd&&0==this.Fe)for(;c=this.wd.pop();)this.Vi(c)}};n.clear=function(a){if(a){var b=this.Ob[a];b&&(v(b,this.Vi,this),delete this.Ob[a])}else this.Oa.length=0,this.Ob={}};n.k=function(){w.h.k.call(this);delete this.Oa;delete this.Ob;delete this.wd};function eb(){w.call(this)}s(eb,w);ma(eb);function fb(a){this.id=a.id;this.M=a.picture;this.name=a.name;this.description=a.description;this.link=a.link};function gb(a){w.call(this);this.id=a.id;this.name=a.name;this.host="youtube";this.ld=a.host_id;this.Jj="http://www.youtube.com/watch?v="+a.host_id;this.fm=a.reddit_id;this.duration=a.duration;this.live=!!a.live;this.Tf=[];this.tk=k;this.kh=l;this.description=a.description;this.link=a.link||"xylocast.com/?m="+this.id;this.ma=a.publisher&&new fb(a.publisher);this.kc=a.published&&hb(a.published+"Z");this.ub="http://i.ytimg.com/vi/"+this.ld+"/0.jpg";this.Oi="http://i.ytimg.com/vi/"+this.ld+"/1.jpg";
this.mm="http://i.ytimg.com/vi/"+this.ld+"/2.jpg";this.nm="http://i.ytimg.com/vi/"+this.ld+"/3.jpg";this.lm=new ib(480,360);this.Ni=37;this.Ta=[];this.Ti=[];this.ad=a.comment_count||0;this.jm=a.star_count||0;this.Qj=a.like_count||0;this.Pl=a.dislike_count||0;this.lg=[];this.Nc={};this.gj=a.collection_id;this.subscribe(jb,this.yb,this);this.subscribe(kb,this.zk,this);this.subscribe(lb,this.Ye,this)}s(gb,w);function ob(a){return a.kc.getMonth()+1+"/"+a.kc.getDate()+"/"+a.kc.getYear()}
var jb="add-comment",kb="remove-comment",lb="watching";gb.prototype.Ve=function(a){Va(this.Tf,function(b){return a.id==b.id})||this.Tf.push(a)};gb.prototype.yb=function(a){if(a.C){var b=Va(this.Ta,function(b){return b.id==a.C});b&&b.Cd.push(a)}else this.Ta.push(a);this.ad+=1};
gb.prototype.zk=function(a){y("/_comment",pb(),"POST","delete=true&id="+a.id);if(a.C){var b=Va(this.Ta,function(b){return b.id==a.C});b&&Za(b.Cd,function(b){return b.id==a.id})}else Za(this.Ta,function(b){return b.id==a.id});this.ad-=1};gb.prototype.Ye=function(a,b,c){if(c)qb(this.Nc,a.id);else if(this.Nc[a.id]=a,a.jb=this,a.id!=z.b().d.id&&(!b||b&&C.b().L&&b.id!=C.b().L.id))eb.b().c("flash","is watching "+(b?b.name:""),this.name,a,this.Oi,"#info:"+this.id)};function rb(){w.call(this);this.Mf={}}s(rb,w);ma(rb);function sb(a,b){var c=a.get(b.id);c||(c=new gb(b),a.add(c));return c}rb.prototype.get=function(a){return a in this.Mf?this.Mf[a]:h};rb.prototype.add=function(a){this.Mf[a.id]=a};var tb={ll:["BC","AD"],kl:["Before Christ","Anno Domini"],nl:"JFMAMJJASOND".split(""),vl:"JFMAMJJASOND".split(""),ml:"January February March April May June July August September October November December".split(" "),ul:"January February March April May June July August September October November December".split(" "),rl:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),xl:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),Bl:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),
zl:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),tl:"Sun Mon Tue Wed Thu Fri Sat".split(" "),yl:"Sun Mon Tue Wed Thu Fri Sat".split(" "),ol:"SMTWTFS".split(""),wl:"SMTWTFS".split(""),sl:["Q1","Q2","Q3","Q4"],ql:["1st quarter","2nd quarter","3rd quarter","4th quarter"],il:["AM","PM"],jl:["EEEE, MMMM d, y","MMMM d, y","MMM d, y","M/d/yy"],Al:["h:mm:ss a zzzz","h:mm:ss a z","h:mm:ss a","h:mm a"],$i:6,Cl:[5,6],aj:5};var ub=/^(\d{4})(?:(?:-?(\d{2})(?:-?(\d{2}))?)|(?:-?(\d{3}))|(?:-?W(\d{2})(?:-?([1-7]))?))?$/,vb=/^(\d{2})(?::?(\d{2})(?::?(\d{2})(\.\d+)?)?)?$/,wb=/Z|(?:([-+])(\d{2})(?::?(\d{2}))?)$/;
function hb(a){var b=new xb(2E3),a=Ea(a),a=a.split(-1==a.indexOf("T")?" ":"T"),c;var d=a[0].match(ub);if(d){var f=Number(d[2]),g=Number(d[3]),i=Number(d[4]);c=Number(d[5]);var m=Number(d[6])||1;b.setFullYear(Number(d[1]));i?(b.setDate(1),b.setMonth(0),b.add(new yb(zb,i-1))):c?(b.setMonth(0),b.setDate(1),d=b.getDay()||7,b.add(new yb(zb,(4>=d?1-d:8-d)+(Number(m)+7*(Number(c)-1))-1))):(f&&(b.setDate(1),b.setMonth(f-1)),g&&b.setDate(g));c=j}else c=l;if(c&&!(c=2>a.length))a=a[1],c=a.match(wb),m=0,c&&("Z"!=
c[0]&&(m=60*c[2]+Number(c[3]),m*="-"==c[1]?1:-1),m-=b.getTimezoneOffset(),a=a.substr(0,a.length-c[0].length)),(c=a.match(vb))?(b.setHours(Number(c[1])),b.setMinutes(Number(c[2])||0),b.setSeconds(Number(c[3])||0),b.setMilliseconds(c[4]?1E3*c[4]:0),0!=m&&b.setTime(b.getTime()+6E4*m),c=j):c=l;return c?b:k}
function yb(a,b,c,d,f,g){p(a)?(this.Ra=a==Ab?b:0,this.Ma=a==Bb?b:0,this.Ia=a==zb?b:0,this.ya=a==Cb?b:0,this.Aa=a==Db?b:0,this.Da=a==Eb?b:0):(this.Ra=a||0,this.Ma=b||0,this.Ia=c||0,this.ya=d||0,this.Aa=f||0,this.Da=g||0)}
yb.prototype.Nd=function(a){var b=Math.min(this.Ra,this.Ma,this.Ia,this.ya,this.Aa,this.Da),c=Math.max(this.Ra,this.Ma,this.Ia,this.ya,this.Aa,this.Da);if(0>b&&0<c)return k;if(!a&&0==b&&0==c)return"PT0S";c=[];0>b&&c.push("-");c.push("P");(this.Ra||a)&&c.push(Math.abs(this.Ra)+"Y");(this.Ma||a)&&c.push(Math.abs(this.Ma)+"M");(this.Ia||a)&&c.push(Math.abs(this.Ia)+"D");if(this.ya||this.Aa||this.Da||a)c.push("T"),(this.ya||a)&&c.push(Math.abs(this.ya)+"H"),(this.Aa||a)&&c.push(Math.abs(this.Aa)+"M"),
(this.Da||a)&&c.push(Math.abs(this.Da)+"S");return c.join("")};yb.prototype.clone=function(){return new yb(this.Ra,this.Ma,this.Ia,this.ya,this.Aa,this.Da)};var Ab="y",Bb="m",zb="d",Cb="h",Db="n",Eb="s";yb.prototype.add=function(a){this.Ra+=a.Ra;this.Ma+=a.Ma;this.Ia+=a.Ia;this.ya+=a.ya;this.Aa+=a.Aa;this.Da+=a.Da};
function Fb(a,b,c){"number"==typeof a?(this.m=new Date(a,b||0,c||1),Gb(this,c||1)):ra(a)?(this.m=new Date(a.getFullYear(),a.getMonth(),a.getDate()),Gb(this,a.getDate())):(this.m=new Date(r()),this.m.setHours(0),this.m.setMinutes(0),this.m.setSeconds(0),this.m.setMilliseconds(0))}n=Fb.prototype;n.ce=tb.$i;n.ee=tb.aj;n.clone=function(){var a=new Fb(this.m);a.ce=this.ce;a.ee=this.ee;return a};n.getFullYear=function(){return this.m.getFullYear()};n.getYear=function(){return this.getFullYear()};
n.getMonth=function(){return this.m.getMonth()};n.getDate=function(){return this.m.getDate()};n.getTime=function(){return this.m.getTime()};n.getDay=function(){return this.m.getDay()};n.getUTCHours=function(){return this.m.getUTCHours()};n.getTimezoneOffset=function(){return this.m.getTimezoneOffset()};function Hb(a){a=a.getTimezoneOffset();if(0==a)a="Z";else var b=Math.abs(a)/60,c=Math.floor(b),b=60*(b-c),a=(0<a?"-":"+")+Ma(c)+":"+Ma(b);return a}
n.set=function(a){this.m=new Date(a.getFullYear(),a.getMonth(),a.getDate())};n.setFullYear=function(a){this.m.setFullYear(a)};n.setMonth=function(a){this.m.setMonth(a)};n.setDate=function(a){this.m.setDate(a)};n.setTime=function(a){this.m.setTime(a)};
n.add=function(a){if(a.Ra||a.Ma){var b=this.getMonth()+a.Ma+12*a.Ra,c=this.getYear()+Math.floor(b/12),b=b%12;0>b&&(b+=12);var d;a:{switch(b){case 1:d=0==c%4&&(0!=c%100||0==c%400)?29:28;break a;case 5:case 8:case 10:case 3:d=30;break a}d=31}d=Math.min(d,this.getDate());this.setDate(1);this.setFullYear(c);this.setMonth(b);this.setDate(d)}a.Ia&&(a=new Date((new Date(this.getYear(),this.getMonth(),this.getDate(),12)).getTime()+864E5*a.Ia),this.setDate(1),this.setFullYear(a.getFullYear()),this.setMonth(a.getMonth()),
this.setDate(a.getDate()),Gb(this,a.getDate()))};n.Nd=function(a,b){return[this.getFullYear(),Ma(this.getMonth()+1),Ma(this.getDate())].join(a?"-":"")+(b?Hb(this):"")};n.toString=function(){return this.Nd()};function Gb(a,b){a.getDate()!=b&&a.m.setUTCHours(a.m.getUTCHours()+(a.getDate()<b?1:-1))}n.valueOf=function(){return this.m.valueOf()};function xb(a,b,c,d,f,g,i){this.m="number"==typeof a?new Date(a,b||0,c||1,d||0,f||0,g||0,i||0):new Date(a?a.getTime():r())}s(xb,Fb);n=xb.prototype;
n.getHours=function(){return this.m.getHours()};n.getMinutes=function(){return this.m.getMinutes()};n.getSeconds=function(){return this.m.getSeconds()};n.getUTCHours=function(){return this.m.getUTCHours()};n.setHours=function(a){this.m.setHours(a)};n.setMinutes=function(a){this.m.setMinutes(a)};n.setSeconds=function(a){this.m.setSeconds(a)};n.setMilliseconds=function(a){this.m.setMilliseconds(a)};n.setUTCHours=function(a){this.m.setUTCHours(a)};
n.add=function(a){Fb.prototype.add.call(this,a);a.ya&&this.setHours(this.m.getHours()+a.ya);a.Aa&&this.setMinutes(this.m.getMinutes()+a.Aa);a.Da&&this.setSeconds(this.m.getSeconds()+a.Da)};n.Nd=function(a,b){var c=Fb.prototype.Nd.call(this,a);return a?c+" "+Ma(this.getHours())+":"+Ma(this.getMinutes())+":"+Ma(this.getSeconds())+(b?Hb(this):""):c+"T"+Ma(this.getHours())+Ma(this.getMinutes())+Ma(this.getSeconds())+(b?Hb(this):"")};n.toString=function(){return this.Nd()};
n.clone=function(){var a=new xb(this.m);a.ce=this.ce;a.ee=this.ee;return a};function Ib(a,b){w.call(this);var c=b||k,d=a||k;this.id=d?d.id:c.id;this.media=d?sb(rb.b(),d.media):c;rb.b().add(this.media);this.time=d?hb(d.time+"Z"):new xb;this.async=d?d.async:j;this.seek=d?d.seek:b?0:k;this.ended=l}s(Ib,w);function Jb(a){return new Ib(h,a)};function Kb(a){var b=r(),c=Math.floor((b-a)/6E4),b=l;0>c&&(b=j,c*=-1);if(60>c)return Lb(c,b,0);c=Math.floor(c/60);if(24>c)return Lb(c,b,1);c=new Date(r());c.setHours(0);c.setMinutes(0);c.setSeconds(0);c.setMilliseconds(0);c=Math.ceil((c.getTime()-a)/864E5);b&&(c*=-1);return 14>c?Lb(c,b,2):""}
function Lb(a,b,c){return!b&&0==c?(b=ya("{$num} minute ago",{num:a}),c=ya("{$num} minutes ago",{num:a}),1==a?b:c):b&&0==c?(b=ya("in {$num} minute",{num:a}),c=ya("in {$num} minutes",{num:a}),1==a?b:c):!b&&1==c?(b=ya("{$num} hour ago",{num:a}),c=ya("{$num} hours ago",{num:a}),1==a?b:c):b&&1==c?(b=ya("in {$num} hour",{num:a}),c=ya("in {$num} hours",{num:a}),1==a?b:c):!b&&2==c?(b=ya("{$num} day ago",{num:a}),c=ya("{$num} days ago",{num:a}),1==a?b:c):b&&2==c?(b=ya("in {$num} day",{num:a}),c=ya("in {$num} days",
{num:a}),1==a?b:c):""};function Mb(a,b){w.call(this);var c=a||{};this.P=!b;this.id=c.id||"";this.name=c.name||"";this.url=c.profile_url||"";this.location=c.location||"";this.gl=!!c.welcomed;this.Mc=!!c.online;this.Ol=!!c.demo;this.jb=c.last_seen?sb(rb.b(),c.last_seen):k;this.history=[];this.Ii=[];this.M=this.id?Da("https://graph.facebook.com/%s/picture",this.id):"";for(this.color=Raphael.getColor();"#00bf85"==this.color||"#00bf2f"==this.color;)this.color=Raphael.getColor();this.Fg=c.access_level||0;this.Dl=[];this.q=c.last_login?
hb(c.last_login+"Z"):k;this.gm=c.session_count||0;this.Fl=c.ave_session_time?c.ave_session_time.toFixed(2):k;this.hm=c.show_guide!=h?c.show_guide:j;this.im=c.show_sidebar!=h?c.show_sidebar:j;this.wk=c.post_facebook!=h?c.post_facebook:j;this.si=c.post_twitter!=h?c.post_twitter:j;this.je=!!c.has_twitter;this.yf=l;this.Vk=c.temp;this.subscribe(Nb,function(){this.si=j},this)}s(Mb,w);function Ob(){return z.b().d.Fg==Pb}Mb.prototype.de=function(){var a=this.name.split(" ");return a&&a.length?a[0]:this.name};
function Qb(a,b){return Va(a.Ii,function(a){return a.id==b.id})}var Nb="twitter-auth",Pb=2;function Rb(a,b,c,d,f){this.id=a;this.r=b;this.N=c;this.cl=d;this.wg=f||k;this.$h=[]}Rb.prototype.lg=function(a){this.$h.push(a);this.N&&(this.N.W&&this.N.G)&&(this.N.G.seek=k,this.N.G=k);y("/_seen",pb(),"POST","media_id="+a.id+"&session_id="+this.id+"&async="+(this.N?this.N.W:l))};
Rb.prototype.end=function(a){this.wg=a;a=(this.wg.getTime()-this.cl.getTime())/1E3;if(this.r.id==z.b().d.id&&this.N){Sb.b();var b=this.N,c=this.$h.length;z.b().Ae.length?_gaq.push(["_trackEvent","Users","SessionTimeWithFriends",z.b().d.id,Math.round(a)]):_gaq.push(["_trackEvent","Users","SessionTimeNoFriends",z.b().d.id,Math.round(a)]);_gaq.push(["_trackEvent","Users","SessionMediaCount",z.b().d.id,c]);_gaq.push(["_trackEvent","Users","Active",z.b().d.id,c]);_gaq.push(["_trackEvent","Users",b.id+
"-time",z.b().d.id,a]);_gaq.push(["_trackEvent","Users",b.id+"-medias",z.b().d.id,c]);b.W||(_gaq.push(["_trackEvent","Channel","SessionTime",b.id,a]),_gaq.push(["_trackEvent","Channel","SessionMediaCount",b.id,c]))}};function Tb(a){w.call(this);this.id=a.id;this.name=a.name;this.W=a.my_channel;this.bk=j;this.jb=a.current_media?sb(rb.b(),a.current_media):k;this.Nl=a.current_seek;this.aa=[];this.zd={};this.G=a.current_program&&new Ib(a.current_program);this.Cg=[];this.queue=[];this.ab=0;this.Mc=a.online!=h?a.online:k;this.subscribe(Ub,this.Xe,this);this.subscribe(Vb,this.bj,this);this.subscribe(Wb,this.Ye,this);this.subscribe(Xb,this.el,this);this.G||(this.Wa=0,this.G=this.aa[0])}s(Tb,w);n=Tb.prototype;
n.Xe=function(a){this.aa.push(a);this.zd[a.id]=a;a.async&&(this.Wa=this.aa.length-1,this.G=a);a.time.getTime()+1E3*a.media.duration>this.ab&&(this.ab=a.time.getTime()+1E3*a.media.duration-12E4,Yb(Zb.b(),this.ab,q(this.Kf,this,this.ab)),Yb(Zb.b(),this.ab+6E4,q(this.Kf,this,this.ab+6E4)))};
n.Kf=function(a){this.ab<=a&&(!this.W&&!EMBED)&&y("/_programming/"+this.id,q(function(a){a=D(a.target);a.length||Yb(Zb.b(),r()+1E3,q(this.Kf,this,r()+1E3));v(a,function(a){if(!this.zd[a.id]){var b=this.zd[a.id];b||(b=new Ib(a),this.Xe(b));this.c(Ub,b)}},this)},this))};
n.bj=function(a,b){b?(this.queue.push(a),eb.b().c("flash","Added to queue",a.name,h,a.Oi,"#info:"+a.id),z.b().d.P&&y("/_queue",pb(),"POST","media_id="+a.id)):(Za(this.queue,function(b){return b.id==a.id},this),z.b().d.P&&y("/_queue",pb(),"POST","media_id="+a.id+"&delete=1"))};n.Ye=function(a){this.Cg.push(a)};n.el=function(a){var b=a.id in this.zd?this.zd[a.id]:h;b&&(b.time=hb(a.time+"Z"))};n.Ai=function(a){this.G=a;var b=Wa(this.aa,function(b){return b.id==a.id});this.Wa=-1!=b?b:0};
n.ha=function(a){if(this.G&&this.G.async&&this.G.seek!=k&&!this.G.ended)return this.G;if(!this.aa.length)return k;if(a)return this.aa[this.Wa+a];if(this.bk&&this.G){if(this.G.ended){a=this.Wa;if(this.aa[a+1])a=this.aa[a+1];else if(this.W)if(this.queue.length){a=this.queue[0];this.c(Vb,a,l);var b=Jb(a);$b().c(Ub,b);z.b().d.P&&y("/_addprogram",pb(),"POST","channel_id="+C.b().W.id+"&media_id="+a.id+"&now=true");a=b}else a=k;else a=k;this.G=a;this.G||(v(this.aa,function(a){a.ended=l}),this.Wa=0,this.G=
this.aa[0])}}else this.W||(this.Wa=0,this.G=this.aa[0]);if(this.G&&(!this.aa[this.Wa]||this.aa[this.Wa].id!=this.G.id))a=Wa(this.aa,q(function(a){return a.id==this.G.id},this)),this.Wa=Math.max(a,0);this.G||(this.Wa=0,this.G=this.aa[0]);return this.G};var Ub="add-program",Vb="add-queue",Wb="add-viewer",Xb="update-program";function z(){w.call(this);this.Sd={};this.ph=l;this.uf=[];this.nj={};this.Ae=[];this.subscribe(ac,function(a,b){a.Mc=b},this)}s(z,w);ma(z);function bc(a,b){a.d=b?cc(a,b):new Mb(h,j);a.d.P&&(FB.api("/me/permissions",q(function(a){this.d.yf=a.data[0].publish_stream},a)),FB.api("/me/friends",q(function(a){a&&a.data&&v(a.data,function(a){this.Sd[a.id]||(this.Sd[a.id]=new Mb({id:a.id,name:a.name,temp:j}))},this)},a)))}z.prototype.add=function(a){this.Sd[a.id]=a};z.prototype.get=function(a){return this.Sd[a]};
function cc(a,b){var c=a.get(b.id);if(!c||c.Vk)c=new Mb(b),a.add(c);b.online==l&&c.Mc==j&&(c.q=new xb);c.Mc=b.online||!!Va(a.Ae,function(a){return a.id==c.id},a);c.jb=b.last_seen?sb(rb.b(),b.last_seen):c.jb;return c}z.prototype.search=function(a){var b=Sa(dc(this.Sd),function(b){return b.name&&0==Fa(a,b.name.substr(0,a.length))},this);Sa(dc(this.nj),function(b){return 0==Fa(a,b.substr(0,a.length))},this);return b};var ac="online";var ec,fc,gc,hc,ic;function jc(){return ga.navigator?ga.navigator.userAgent:k}function kc(){return ga.navigator}hc=gc=fc=ec=l;var lc;if(lc=jc()){var mc=kc();ec=0==lc.indexOf("Opera");fc=!ec&&-1!=lc.indexOf("MSIE");gc=!ec&&-1!=lc.indexOf("WebKit");hc=!ec&&!gc&&"Gecko"==mc.product}var nc=ec,E=fc,oc=hc,F=gc,pc=kc();ic=-1!=(pc&&pc.platform||"").indexOf("Mac");var qc=!!kc()&&-1!=(kc().appVersion||"").indexOf("X11"),rc;
a:{var sc="",tc;if(nc&&ga.opera)var uc=ga.opera.version,sc="function"==typeof uc?uc():uc;else if(oc?tc=/rv\:([^\);]+)(\)|;)/:E?tc=/MSIE\s+([^\);]+)(\)|;)/:F&&(tc=/WebKit\/(\S+)/),tc)var vc=tc.exec(jc()),sc=vc?vc[1]:"";if(E){var wc,xc=ga.document;wc=xc?xc.documentMode:h;if(wc>parseFloat(sc)){rc=String(wc);break a}}rc=sc}var yc={};
function G(a){var b;if(!(b=yc[a])){b=0;for(var c=Ea(String(rc)).split("."),d=Ea(String(a)).split("."),f=Math.max(c.length,d.length),g=0;0==b&&g<f;g++){var i=c[g]||"",m=d[g]||"",t=RegExp("(\\d*)(\\D*)","g"),x=RegExp("(\\d*)(\\D*)","g");do{var A=t.exec(i)||["","",""],B=x.exec(m)||["","",""];if(0==A[0].length&&0==B[0].length)break;b=((0==A[1].length?0:parseInt(A[1],10))<(0==B[1].length?0:parseInt(B[1],10))?-1:(0==A[1].length?0:parseInt(A[1],10))>(0==B[1].length?0:parseInt(B[1],10))?1:0)||((0==A[2].length)<
(0==B[2].length)?-1:(0==A[2].length)>(0==B[2].length)?1:0)||(A[2]<B[2]?-1:A[2]>B[2]?1:0)}while(0==b)}b=yc[a]=0<=b}return b}var Ac={};function Bc(a){return Ac[a]||(Ac[a]=E&&!!document.documentMode&&document.documentMode>=a)};var Cc=!E||Bc(9),Dc=!E||Bc(9),Ec=E&&!G("9");!F||G("528");oc&&G("1.9b")||E&&G("8")||nc&&G("9.5")||F&&G("528");oc&&!G("8")||E&&G("9");function Fc(a,b){this.type=a;this.currentTarget=this.target=b}n=Fc.prototype;n.k=aa();n.$=aa();n.jc=l;n.defaultPrevented=l;n.He=j;n.stopPropagation=function(){this.jc=j};n.preventDefault=function(){this.defaultPrevented=j;this.He=l};function Gc(a){a.preventDefault()};function Hc(a){Hc[" "](a);return a}Hc[" "]=la;function Ic(a,b){a&&this.init(a,b)}s(Ic,Fc);var Jc=[1,4,2];n=Ic.prototype;n.target=k;n.relatedTarget=k;n.offsetX=0;n.offsetY=0;n.clientX=0;n.clientY=0;n.screenX=0;n.screenY=0;n.button=0;n.keyCode=0;n.charCode=0;n.ctrlKey=l;n.altKey=l;n.shiftKey=l;n.metaKey=l;n.$f=l;n.ea=k;
n.init=function(a,b){var c=this.type=a.type;Fc.call(this,c);this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;if(d){if(oc){var f;a:{try{Hc(d.nodeName);f=j;break a}catch(g){}f=l}f||(d=k)}}else"mouseover"==c?d=a.fromElement:"mouseout"==c&&(d=a.toElement);this.relatedTarget=d;this.offsetX=F||a.offsetX!==h?a.offsetX:a.layerX;this.offsetY=F||a.offsetY!==h?a.offsetY:a.layerY;this.clientX=a.clientX!==h?a.clientX:a.pageX;this.clientY=a.clientY!==h?a.clientY:a.pageY;this.screenX=
a.screenX||0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||("keypress"==c?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.$f=ic?a.metaKey:a.ctrlKey;this.state=a.state;this.ea=a;a.defaultPrevented&&this.preventDefault();delete this.jc};function Kc(a){return(Cc?0==a.ea.button:"click"==a.type?j:!!(a.ea.button&Jc[0]))&&!(F&&ic&&a.ctrlKey)}
n.stopPropagation=function(){Ic.h.stopPropagation.call(this);this.ea.stopPropagation?this.ea.stopPropagation():this.ea.cancelBubble=j};n.preventDefault=function(){Ic.h.preventDefault.call(this);var a=this.ea;if(a.preventDefault)a.preventDefault();else if(a.returnValue=l,Ec)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};n.uj=ca("ea");n.k=aa();function Lc(){}var Mc=0;n=Lc.prototype;n.key=0;n.lc=l;n.bf=l;n.init=function(a,b,c,d,f,g){qa(a)?this.Lh=j:a&&a.handleEvent&&qa(a.handleEvent)?this.Lh=l:e(Error("Invalid listener argument"));this.Hc=a;this.proxy=b;this.src=c;this.type=d;this.capture=!!f;this.ie=g;this.bf=l;this.key=++Mc;this.lc=l};n.handleEvent=function(a){return this.Lh?this.Hc.call(this.ie||this.src,a):this.Hc.handleEvent.call(this.Hc,a)};function Nc(a,b,c){for(var d in a)b.call(c,a[d],d,a)}function dc(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function Oc(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}function Pc(a){for(var b in a)return l;return j}function qb(a,b){b in a&&delete a[b]}function Qc(a,b,c){b in a&&e(Error('The object already contains the key "'+b+'"'));a[b]=c}var Rc="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");
function Sc(a,b){for(var c,d,f=1;f<arguments.length;f++){d=arguments[f];for(c in d)a[c]=d[c];for(var g=0;g<Rc.length;g++)c=Rc[g],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};var Tc={},Uc={},Vc={},Wc={};
function H(a,b,c,d,f){if(b){if(oa(b)){for(var g=0;g<b.length;g++)H(a,b[g],c,d,f);return k}var d=!!d,i=Uc;b in i||(i[b]={p:0,Ca:0});i=i[b];d in i||(i[d]={p:0,Ca:0},i.p++);var i=i[d],m=sa(a),t;i.Ca++;if(i[m]){t=i[m];for(g=0;g<t.length;g++)if(i=t[g],i.Hc==c&&i.ie==f){if(i.lc)break;return t[g].key}}else t=i[m]=[],i.p++;var x=Xc,A=Dc?function(a){return x.call(A.src,A.key,a)}:function(a){a=x.call(A.src,A.key,a);if(!a)return a},g=A;g.src=a;i=new Lc;i.init(c,g,a,b,d,f);c=i.key;g.key=c;t.push(i);Tc[c]=i;Vc[m]||
(Vc[m]=[]);Vc[m].push(i);a.addEventListener?(a==ga||!a.ah)&&a.addEventListener(b,g,d):a.attachEvent(b in Wc?Wc[b]:Wc[b]="on"+b,g);return c}e(Error("Invalid event type"))}function Yc(a,b,c,d,f){if(oa(b))for(var g=0;g<b.length;g++)Yc(a,b[g],c,d,f);else a=H(a,b,c,d,f),Tc[a].bf=j}function Zc(a,b,c,d,f){if(oa(b))for(var g=0;g<b.length;g++)Zc(a,b[g],c,d,f);else if(d=!!d,a=$c(a,b,d))for(g=0;g<a.length;g++)if(a[g].Hc==c&&a[g].capture==d&&a[g].ie==f){ad(a[g].key);break}}
function ad(a){if(!Tc[a])return l;var b=Tc[a];if(b.lc)return l;var c=b.src,d=b.type,f=b.proxy,g=b.capture;c.removeEventListener?(c==ga||!c.ah)&&c.removeEventListener(d,f,g):c.detachEvent&&c.detachEvent(d in Wc?Wc[d]:Wc[d]="on"+d,f);c=sa(c);Vc[c]&&(f=Vc[c],Ya(f,b),0==f.length&&delete Vc[c]);b.lc=j;if(b=Uc[d][g][c])b.di=j,bd(d,g,c,b);delete Tc[a];return j}
function bd(a,b,c,d){if(!d.se&&d.di){for(var f=0,g=0;f<d.length;f++)d[f].lc?d[f].proxy.src=k:(f!=g&&(d[g]=d[f]),g++);d.length=g;d.di=l;0==g&&(delete Uc[a][b][c],Uc[a][b].p--,0==Uc[a][b].p&&(delete Uc[a][b],Uc[a].p--),0==Uc[a].p&&delete Uc[a])}}function $c(a,b,c){var d=Uc;return b in d&&(d=d[b],c in d&&(d=d[c],a=sa(a),d[a]))?d[a]:k}
function cd(a,b,c,d,f){var g=1,b=sa(b);if(a[b]){a.Ca--;a=a[b];a.se?a.se++:a.se=1;try{for(var i=a.length,m=0;m<i;m++){var t=a[m];t&&!t.lc&&(g&=dd(t,f)!==l)}}finally{a.se--,bd(c,d,b,a)}}return Boolean(g)}function dd(a,b){a.bf&&ad(a.key);return a.handleEvent(b)}
function Xc(a,b){if(!Tc[a])return j;var c=Tc[a],d=c.type,f=Uc;if(!(d in f))return j;var f=f[d],g,i;if(!Dc){g=b||ka("window.event");var m=j in f,t=l in f;if(m){if(0>g.keyCode||g.returnValue!=h)return j;a:{var x=l;if(0==g.keyCode)try{g.keyCode=-1;break a}catch(A){x=j}if(x||g.returnValue==h)g.returnValue=j}}x=new Ic;x.init(g,this);g=j;try{if(m){for(var B=[],Z=x.currentTarget;Z;Z=Z.parentNode)B.push(Z);i=f[j];i.Ca=i.p;for(var W=B.length-1;!x.jc&&0<=W&&i.Ca;W--)x.currentTarget=B[W],g&=cd(i,B[W],d,j,x);
if(t){i=f[l];i.Ca=i.p;for(W=0;!x.jc&&W<B.length&&i.Ca;W++)x.currentTarget=B[W],g&=cd(i,B[W],d,l,x)}}else g=dd(c,x)}finally{B&&(B.length=0)}return g}d=new Ic(b,this);return g=dd(c,d)};function ed(){u.call(this)}s(ed,u);n=ed.prototype;n.ah=j;n.Ce=k;n.mg=ba("Ce");n.addEventListener=function(a,b,c,d){H(this,a,b,c,d)};n.removeEventListener=function(a,b,c,d){Zc(this,a,b,c,d)};
n.dispatchEvent=function(a){var b=a.type||a,c=Uc;if(b in c){if(p(a))a=new Fc(a,this);else if(a instanceof Fc)a.target=a.target||this;else{var d=a,a=new Fc(b,this);Sc(a,d)}var d=1,f,c=c[b],b=j in c,g;if(b){f=[];for(g=this;g;g=g.Ce)f.push(g);g=c[j];g.Ca=g.p;for(var i=f.length-1;!a.jc&&0<=i&&g.Ca;i--)a.currentTarget=f[i],d&=cd(g,f[i],a.type,j,a)&&a.He!=l}if(l in c)if(g=c[l],g.Ca=g.p,b)for(i=0;!a.jc&&i<f.length&&g.Ca;i++)a.currentTarget=f[i],d&=cd(g,f[i],a.type,l,a)&&a.He!=l;else for(f=this;!a.jc&&f&&
g.Ca;f=f.Ce)a.currentTarget=f,d&=cd(g,f,a.type,l,a)&&a.He!=l;a=Boolean(d)}else a=j;return a};n.k=function(){ed.h.k.call(this);var a,b=0,c=a==k;a=!!a;if(this==k)Nc(Vc,function(d){for(var f=d.length-1;0<=f;f--){var g=d[f];if(c||a==g.capture)ad(g.key),b++}});else{var d=sa(this);if(Vc[d])for(var d=Vc[d],f=d.length-1;0<=f;f--){var g=d[f];if(c||a==g.capture)ad(g.key),b++}}this.Ce=k};function fd(a,b){u.call(this);this.ka=a||1;this.Md=b||gd;this.af=q(this.Yk,this);this.If=r()}s(fd,ed);fd.prototype.enabled=l;var gd=ga.window;n=fd.prototype;n.pa=k;n.Yk=function(){if(this.enabled){var a=r()-this.If;0<a&&a<0.8*this.ka?this.pa=this.Md.setTimeout(this.af,this.ka-a):(this.dispatchEvent(hd),this.enabled&&(this.pa=this.Md.setTimeout(this.af,this.ka),this.If=r()))}};n.start=function(){this.enabled=j;this.pa||(this.pa=this.Md.setTimeout(this.af,this.ka),this.If=r())};
n.stop=function(){this.enabled=l;this.pa&&(this.Md.clearTimeout(this.pa),this.pa=k)};n.k=function(){fd.h.k.call(this);this.stop();delete this.Md};var hd="tick";function I(a,b,c){qa(a)?c&&(a=q(a,c)):a&&"function"==typeof a.handleEvent?a=q(a.handleEvent,a):e(Error("Invalid listener argument"));return 2147483647<b?-1:gd.setTimeout(a,b||0)};function id(a){if("function"==typeof a.fe)return a.fe();if(p(a))return a.split("");if(pa(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return dc(a)}function jd(a,b,c){if("function"==typeof a.forEach)a.forEach(b,c);else if(pa(a)||p(a))v(a,b,c);else{var d;if("function"==typeof a.vf)d=a.vf();else if("function"!=typeof a.fe)if(pa(a)||p(a)){d=[];for(var f=a.length,g=0;g<f;g++)d.push(g)}else d=Oc(a);else d=h;for(var f=id(a),g=f.length,i=0;i<g;i++)b.call(c,f[i],d&&d[i],a)}};function kd(a,b){this.Gb={};this.Q=[];var c=arguments.length;if(1<c){c%2&&e(Error("Uneven number of arguments"));for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else if(a){a instanceof kd?(c=a.vf(),d=a.fe()):(c=Oc(a),d=dc(a));for(var f=0;f<c.length;f++)this.set(c[f],d[f])}}n=kd.prototype;n.p=0;n.Wi=0;n.fe=function(){ld(this);for(var a=[],b=0;b<this.Q.length;b++)a.push(this.Gb[this.Q[b]]);return a};n.vf=function(){ld(this);return this.Q.concat()};
n.clear=function(){this.Gb={};this.Wi=this.p=this.Q.length=0};function ld(a){if(a.p!=a.Q.length){for(var b=0,c=0;b<a.Q.length;){var d=a.Q[b];Object.prototype.hasOwnProperty.call(a.Gb,d)&&(a.Q[c++]=d);b++}a.Q.length=c}if(a.p!=a.Q.length){for(var f={},c=b=0;b<a.Q.length;)d=a.Q[b],Object.prototype.hasOwnProperty.call(f,d)||(a.Q[c++]=d,f[d]=1),b++;a.Q.length=c}}n.get=function(a,b){return Object.prototype.hasOwnProperty.call(this.Gb,a)?this.Gb[a]:b};
n.set=function(a,b){Object.prototype.hasOwnProperty.call(this.Gb,a)||(this.p++,this.Q.push(a),this.Wi++);this.Gb[a]=b};n.clone=function(){return new kd(this)};function md(a){return nd(a||arguments.callee.caller,[])}
function nd(a,b){var c=[];if(Xa(b,a))c.push("[...circular reference...]");else if(a&&50>b.length){c.push(od(a)+"(");for(var d=a.arguments,f=0;f<d.length;f++){0<f&&c.push(", ");var g;g=d[f];switch(typeof g){case "object":g=g?"object":"null";break;case "string":break;case "number":g=String(g);break;case "boolean":g=g?"true":"false";break;case "function":g=(g=od(g))?g:"[fn]";break;default:g=typeof g}40<g.length&&(g=g.substr(0,40)+"...");c.push(g)}b.push(a);c.push(")\n");try{c.push(nd(a.caller,b))}catch(i){c.push("[exception trying to get caller]\n")}}else a?
c.push("[...long stack...]"):c.push("[end]");return c.join("")}function od(a){if(pd[a])return pd[a];a=String(a);if(!pd[a]){var b=/function ([^\(]+)/.exec(a);pd[a]=b?b[1]:"[Anonymous]"}return pd[a]}var pd={};function qd(a,b,c,d,f){this.reset(a,b,c,d,f)}qd.prototype.Fk=0;qd.prototype.hh=k;qd.prototype.gh=k;var rd=0;qd.prototype.reset=function(a,b,c,d,f){this.Fk="number"==typeof f?f:rd++;this.om=d||r();this.rd=a;this.Xj=b;this.$l=c;delete this.hh;delete this.gh};qd.prototype.Bi=ba("rd");function sd(a){this.Yj=a}sd.prototype.J=k;sd.prototype.rd=k;sd.prototype.X=k;sd.prototype.Bh=k;function td(a,b){this.name=a;this.value=b}td.prototype.toString=ca("name");var ud=new td("SEVERE",1E3),vd=new td("WARNING",900),wd=new td("INFO",800),xd=new td("CONFIG",700),yd=new td("FINE",500);n=sd.prototype;n.getParent=ca("J");n.rh=function(){this.X||(this.X={});return this.X};n.Bi=ba("rd");function zd(a){return a.rd?a.rd:a.J?zd(a.J):k}
n.log=function(a,b,c){if(a.value>=zd(this).value){a=this.vj(a,b,c);b="log:"+a.Xj;ga.console&&(ga.console.timeStamp?ga.console.timeStamp(b):ga.console.markTimeline&&ga.console.markTimeline(b));ga.msWriteProfilerMark&&ga.msWriteProfilerMark(b);for(b=this;b;){var c=b,d=a;if(c.Bh)for(var f=0,g=h;g=c.Bh[f];f++)g(d);b=b.getParent()}}};
n.vj=function(a,b,c){var d=new qd(a,String(b),this.Yj);if(c){d.hh=c;var f;var g=arguments.callee.caller;try{var i;var m=ka("window.location.href");if(p(c))i={message:c,name:"Unknown error",lineNumber:"Not available",fileName:m,stack:"Not available"};else{var t,x,A=l;try{t=c.lineNumber||c.Zl||"Not available"}catch(B){t="Not available",A=j}try{x=c.fileName||c.filename||c.sourceURL||m}catch(Z){x="Not available",A=j}i=A||!c.lineNumber||!c.fileName||!c.stack?{message:c.message,name:c.name,lineNumber:t,
fileName:x,stack:c.stack||"Not available"}:c}f="Message: "+Ga(i.message)+'\nUrl: <a href="view-source:'+i.fileName+'" target="_new">'+i.fileName+"</a>\nLine: "+i.lineNumber+"\n\nBrowser stack:\n"+Ga(i.stack+"-> ")+"[end]\n\nJS stack traversal:\n"+Ga(md(g)+"-> ")}catch(W){f="Exception trying to expose exception! You win, we lose. "+W}d.gh=f}return d};function Ad(a,b){a.log(ud,b,h)}n.info=function(a,b){this.log(wd,a,b)};function Bd(a,b){a.log(yd,b,h)}var Cd={},Dd=k;
function Ed(a){Dd||(Dd=new sd(""),Cd[""]=Dd,Dd.Bi(xd));var b;if(!(b=Cd[a])){b=new sd(a);var c=a.lastIndexOf("."),d=a.substr(c+1),c=Ed(a.substr(0,c));c.rh()[d]=b;b.J=c;Cd[a]=b}return b};function Fd(a){a=String(a);if(/^\s*$/.test(a)?0:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x10-\x1f\x80-\x9f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,"")))try{return eval("("+a+")")}catch(b){}e(Error("Invalid JSON string: "+a))};function Gd(){}Gd.prototype.Wd=k;var Hd;function Id(){}s(Id,Gd);function Jd(a){return(a=Kd(a))?new ActiveXObject(a):new XMLHttpRequest}function Ld(a){var b={};Kd(a)&&(b[0]=j,b[1]=j);return b}
function Kd(a){if(!a.Fh&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var b=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],c=0;c<b.length;c++){var d=b[c];try{return new ActiveXObject(d),a.Fh=d}catch(f){}}e(Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed"))}return a.Fh}Hd=new Id;var Md=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([\\w\\d\\-\\u0100-\\uffff.%]*)(?::([0-9]+))?)?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");function Nd(a){u.call(this);this.headers=new kd;this.Uc=a||k}s(Nd,ed);Nd.prototype.z=Ed("goog.net.XhrIo");var Od=/^https?$/i,Pd=[];function y(a,b,c,d){var f=new Nd;Pd.push(f);b&&H(f,"complete",b);H(f,"ready",xa(Qd,f));f.send(a,c,d,h)}function Qd(a){a.$();Ya(Pd,a)}n=Nd.prototype;n.xb=l;n.o=k;n.Se=k;n.qd="";n.Th="";n.nd=0;n.od="";n.pf=l;n.le=l;n.Af=l;n.dc=l;n.Le=0;n.qc=k;n.Ge="";n.hl=l;
n.send=function(a,b,c,d){this.o&&e(Error("[goog.net.XhrIo] Object is active with another request"));b=b?b.toUpperCase():"GET";this.qd=a;this.od="";this.nd=0;this.Th=b;this.pf=l;this.xb=j;this.o=this.Uc?Jd(this.Uc):Jd(Hd);this.Se=this.Uc?this.Uc.Wd||(this.Uc.Wd=Ld(this.Uc)):Hd.Wd||(Hd.Wd=Ld(Hd));this.o.onreadystatechange=q(this.ki,this);try{Bd(this.z,Rd(this,"Opening Xhr")),this.Af=j,this.o.open(b,a,j),this.Af=l}catch(f){Bd(this.z,Rd(this,"Error opening Xhr: "+f.message));Sd(this,f);return}var a=c||
"",g=this.headers.clone();d&&jd(d,function(a,b){g.set(b,a)});d=ga.FormData&&a instanceof ga.FormData;if(b="POST"==b)b=!Object.prototype.hasOwnProperty.call(g.Gb,"Content-Type")&&!d;b&&g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");jd(g,function(a,b){this.o.setRequestHeader(b,a)},this);this.Ge&&(this.o.responseType=this.Ge);"withCredentials"in this.o&&(this.o.withCredentials=this.hl);try{this.qc&&(gd.clearTimeout(this.qc),this.qc=k),0<this.Le&&(Bd(this.z,Rd(this,"Will abort after "+
this.Le+"ms if incomplete")),this.qc=gd.setTimeout(q(this.Zk,this),this.Le)),Bd(this.z,Rd(this,"Sending request")),this.le=j,this.o.send(a),this.le=l}catch(i){Bd(this.z,Rd(this,"Send error: "+i.message)),Sd(this,i)}};n.Zk=function(){"undefined"!=typeof fa&&this.o&&(this.od="Timed out after "+this.Le+"ms, aborting",this.nd=8,Bd(this.z,Rd(this,this.od)),this.dispatchEvent("timeout"),this.abort(8))};function Sd(a,b){a.xb=l;a.o&&(a.dc=j,a.o.abort(),a.dc=l);a.od=b;a.nd=5;Td(a);Ud(a)}
function Td(a){a.pf||(a.pf=j,a.dispatchEvent("complete"),a.dispatchEvent("error"))}n.abort=function(a){this.o&&this.xb&&(Bd(this.z,Rd(this,"Aborting")),this.xb=l,this.dc=j,this.o.abort(),this.dc=l,this.nd=a||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Ud(this))};n.k=function(){this.o&&(this.xb&&(this.xb=l,this.dc=j,this.o.abort(),this.dc=l),Ud(this,j));Nd.h.k.call(this)};n.ki=function(){!this.Af&&!this.le&&!this.dc?this.jk():Vd(this)};n.jk=function(){Vd(this)};
function Vd(a){if(a.xb&&"undefined"!=typeof fa)if(a.Se[1]&&4==Wd(a)&&2==Xd(a))Bd(a.z,Rd(a,"Local request error detected and ignored"));else if(a.le&&4==Wd(a))gd.setTimeout(q(a.ki,a),0);else if(a.dispatchEvent("readystatechange"),4==Wd(a)){Bd(a.z,Rd(a,"Request complete"));a.xb=l;try{var b=Xd(a),c,d;a:switch(b){case 200:case 201:case 202:case 204:case 304:case 1223:d=j;break a;default:d=l}if(!(c=d)){var f;if(f=0===b){var g=String(a.qd).match(Md)[1]||k;if(!g&&self.location)var i=self.location.protocol,
g=i.substr(0,i.length-1);f=!Od.test(g?g.toLowerCase():"")}c=f}if(c)a.dispatchEvent("complete"),a.dispatchEvent("success");else{a.nd=6;var m;try{m=2<Wd(a)?a.o.statusText:""}catch(t){Bd(a.z,"Can not get status: "+t.message),m=""}a.od=m+" ["+Xd(a)+"]";Td(a)}}finally{Ud(a)}}}
function Ud(a,b){if(a.o){var c=a.o,d=a.Se[0]?la:k;a.o=k;a.Se=k;a.qc&&(gd.clearTimeout(a.qc),a.qc=k);b||a.dispatchEvent("ready");try{c.onreadystatechange=d}catch(f){Ad(a.z,"Problem encountered resetting onreadystatechange: "+f.message)}}}n.Ab=function(){return!!this.o};function Wd(a){return a.o?a.o.readyState:0}function Xd(a){try{return 2<Wd(a)?a.o.status:-1}catch(b){return a.z.log(vd,"Can not get status: "+b.message,h),-1}}function D(a){if(a.o)return Fd(a.o.responseText)}
function Yd(a){try{if(!a.o)return k;if("response"in a.o)return a.o.response;switch(a.Ge){case "":case "text":return a.o.responseText;case "arraybuffer":if("mozResponseArrayBuffer"in a.o)return a.o.mozResponseArrayBuffer}Ad(a.z,"Response type "+a.Ge+" is not supported on this browser");return k}catch(b){return Bd(a.z,"Can not get response: "+b.message),k}}function Rd(a,b){return b+" ["+a.Th+" "+a.qd+" "+Xd(a)+"]"};function C(){w.call(this);this.Vb=[];this.tc={};this.subscribe(Zd,this.ef,this)}s(C,w);ma(C);C.prototype.get=function(a){return this.tc[a]};C.prototype.Jf=function(a){Nc(a,q(function(a){this.Ve(a)},this))};C.prototype.Ve=function(a){var b=new Tb(a);this.Vb.push(b);this.tc[a.id]=b;b.W&&(this.W=b);this.c($d,b);return b};
C.prototype.ef=function(a,b){if(a&&!this.L||a&&this.L&&this.L.id!=a.id)if(this.pe=this.L,this.L=a,z.b().d.P){var c=a.ha(),d=c&&!Pc(c.media.Nc);y("/_changechannel",pb(),"POST","channel="+a.id+"&friends="+d+"&media_id"+c.media.id+(b?"&forced=true":""));Sb.b().ef(a,this.pe)}};function $b(){var a=C.b();if(!a.W){var b=z.b().d;a.W=new Tb({id:b.id||"temp",name:b.name?b.name.split(" ")[0]+"'s Channel":"My Channel",bm:j})}return a.W}var Zd="change-channel",$d="add-channel";function ae(){w.call(this);this.subscribe(be,function(a){$b().c(Ub,a);z.b().d.P&&(y("/_addprogram",pb(),"POST","channel_id="+C.b().W.id+"&media_id="+a.media.id+"&async=true"),Sb.b(),_gaq.push(["_trackEvent","Media","Play",a.media.id]),_gaq.push(["_trackEvent","Users","Play",z.b().d.id]))},this);this.subscribe(ce,function(a){z.b().d.P&&y("/_started",pb(),"POST","media_id="+a.id)},this)}s(ae,w);ma(ae);n=ae.prototype;n.Ci=ba("ic");n.Ai=ba("hj");n.ha=ca("hj");
n.getCurrentTime=function(){return this.ic&&this.ic.getCurrentTime?this.ic.getCurrentTime():0};n.sh=function(){return this.ic&&this.ic.getCurrentTime?this.ic.getCurrentTime():0};var be="play-async",ce="playing";var de,ee=!E||Bc(9),fe=!oc&&!E||E&&Bc(9)||oc&&G("1.9.1"),ge=E&&!G("9"),he=E||nc||F;function ie(a){a=a.className;return p(a)&&a.match(/\S+/g)||[]}function J(a,b){for(var c=ie(a),d=cb(arguments,1),f=c.length+d.length,g=c,i=0;i<d.length;i++)Xa(g,d[i])||g.push(d[i]);a.className=c.join(" ");return c.length==f}function K(a,b){var c=ie(a),d=cb(arguments,1),f,g=d;f=Sa(c,function(a){return!Xa(g,a)});a.className=f.join(" ");return f.length==c.length-d.length}function L(a,b){return Xa(ie(a),b)}function M(a,b,c){c?J(a,b):K(a,b)}function je(a,b){var c=!L(a,b);M(a,b,c);return c};function ke(a,b){this.x=ia(a)?a:0;this.y=ia(b)?b:0}ke.prototype.clone=function(){return new ke(this.x,this.y)};function le(a,b){return new ke(a.x-b.x,a.y-b.y)};function ib(a,b){this.width=a;this.height=b}ib.prototype.clone=function(){return new ib(this.width,this.height)};ib.prototype.ceil=function(){this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};ib.prototype.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};ib.prototype.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};function me(a){return a?new ne(oe(a)):de||(de=new ne)}function O(a){return p(a)?document.getElementById(a):a}function pe(a,b){var c=b||document;return c.querySelectorAll&&c.querySelector?c.querySelectorAll("."+a):c.getElementsByClassName?c.getElementsByClassName(a):qe("*",a,b)}function P(a,b){var c=b||document,d=k;return(d=c.querySelectorAll&&c.querySelector?c.querySelector("."+a):pe(a,b)[0])||k}
function qe(a,b,c){var d=document,c=c||d,a=a&&"*"!=a?a.toUpperCase():"";if(c.querySelectorAll&&c.querySelector&&(a||b))return c.querySelectorAll(a+(b?"."+b:""));if(b&&c.getElementsByClassName){c=c.getElementsByClassName(b);if(a){for(var d={},f=0,g=0,i;i=c[g];g++)a==i.nodeName&&(d[f++]=i);d.length=f;return d}return c}c=c.getElementsByTagName(a||"*");if(b){d={};for(g=f=0;i=c[g];g++)a=i.className,"function"==typeof a.split&&Xa(a.split(/\s+/),b)&&(d[f++]=i);d.length=f;return d}return c}
var re={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function se(a){a=(a||window).document;a=te(a)?a.documentElement:a.body;return new ib(a.clientWidth,a.clientHeight)}function Q(a,b,c){return ue(document,arguments)}
function ue(a,b){var c=b[0],d=b[1];if(!ee&&d&&(d.name||d.type)){c=["<",c];d.name&&c.push(' name="',Ga(d.name),'"');if(d.type){c.push(' type="',Ga(d.type),'"');var f={};Sc(f,d);delete f.type;d=f}c.push(">");c=c.join("")}var g=a.createElement(c);d&&(p(d)?g.className=d:oa(d)?J.apply(k,[g].concat(d)):Nc(d,function(a,b){"style"==b?g.style.cssText=a:"class"==b?g.className=a:"for"==b?g.htmlFor=a:b in re?g.setAttribute(re[b],a):0==b.lastIndexOf("aria-",0)||0==b.lastIndexOf("data-",0)?g.setAttribute(b,a):
g[b]=a}));if(2<b.length){d=function(b){b&&g.appendChild(p(b)?a.createTextNode(b):b)};for(c=2;c<b.length;c++)if(f=b[c],pa(f)&&!(ra(f)&&0<f.nodeType)){var i=v,m;a:{if((m=f)&&"number"==typeof m.length){if(ra(m)){m="function"==typeof m.item||"string"==typeof m.item;break a}if(qa(m)){m="function"==typeof m.item;break a}}m=l}i(m?$a(f):f,d)}else d(f)}return g}function te(a){return"CSS1Compat"==a.compatMode}function ve(a){for(var b;b=a.firstChild;)a.removeChild(b)}
function we(a,b,c){a.insertBefore(b,a.childNodes[c]||k)}function xe(a){a&&a.parentNode&&a.parentNode.removeChild(a)}function ye(a){return fe&&a.children!=h?a.children:Sa(a.childNodes,function(a){return 1==a.nodeType})}function ze(a){for(;a&&1!=a.nodeType;)a=a.nextSibling;return a}function Ae(a){if(he)return a.parentElement;a=a.parentNode;return ra(a)&&1==a.nodeType?a:k}
function Be(a,b){if(a.contains&&1==b.nodeType)return a==b||a.contains(b);if("undefined"!=typeof a.compareDocumentPosition)return a==b||Boolean(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a}function oe(a){return 9==a.nodeType?a:a.ownerDocument||a.document}
function Ce(a,b){if("textContent"in a)a.textContent=b;else if(a.firstChild&&3==a.firstChild.nodeType){for(;a.lastChild!=a.firstChild;)a.removeChild(a.lastChild);a.firstChild.data=b}else ve(a),a.appendChild(oe(a).createTextNode(b))}var De={SCRIPT:1,STYLE:1,HEAD:1,IFRAME:1,OBJECT:1},Ee={IMG:" ",BR:"\n"};function Fe(a){var b=a.getAttributeNode("tabindex");return b&&b.specified?(a=a.tabIndex,"number"==typeof a&&0<=a&&32768>a):l}
function Ge(a){if(ge&&"innerText"in a)a=a.innerText.replace(/(\r\n|\r|\n)/g,"\n");else{var b=[];He(a,b,j);a=b.join("")}a=a.replace(/ \xAD /g," ").replace(/\xAD/g,"");a=a.replace(/\u200B/g,"");ge||(a=a.replace(/ +/g," "));" "!=a&&(a=a.replace(/^\s*/,""));return a}function Ie(a){var b=[];He(a,b,l);return b.join("")}
function He(a,b,c){if(!(a.nodeName in De))if(3==a.nodeType)c?b.push(String(a.nodeValue).replace(/(\r\n|\r|\n)/g,"")):b.push(a.nodeValue);else if(a.nodeName in Ee)b.push(Ee[a.nodeName]);else for(a=a.firstChild;a;)He(a,b,c),a=a.nextSibling}function Je(a,b,c){if(!b&&!c)return k;b=b?b.toUpperCase():k;a:{for(var d=0;a;){if((!b||a.nodeName==b)&&(!c||L(a,c))){c=a;break a}a=a.parentNode;d++}c=k}return c}function ne(a){this.u=a||ga.document||document}n=ne.prototype;n.La=me;
n.a=function(a){return p(a)?this.u.getElementById(a):a};n.O=function(a,b,c){return ue(this.u,arguments)};n.createElement=function(a){return this.u.createElement(a)};n.createTextNode=function(a){return this.u.createTextNode(a)};function Ke(a){return te(a.u)}function Le(a){var b=a.u,a=!F&&te(b)?b.documentElement:b.body,b=b.parentWindow||b.defaultView;return new ke(b.pageXOffset||a.scrollLeft,b.pageYOffset||a.scrollTop)}n.appendChild=function(a,b){a.appendChild(b)};n.rh=ye;
function Me(a,b){return b.firstElementChild!=h?b.firstElementChild:ze(b.firstChild)}n.contains=Be;E&&G(8);var Ne={};function Oe(a,b,c){a.innerHTML=b(c||Ne,h,h)}function R(a,b){var c;a:if(c=(new ne(h)||me()).createElement("DIV"),c.innerHTML=a(b||Ne,h,h),1==c.childNodes.length){var d=c.firstChild;if(1==d.nodeType){c=d;break a}}return c}function S(a){return"object"===typeof a&&a&&0===a.Kl?a.content:String(a).replace(Pe,Qe)}
var Re={"\x00":"&#0;",'"':"&quot;","&":"&amp;","'":"&#39;","<":"&lt;",">":"&gt;","\t":"&#9;","\n":"&#10;","\x0B":"&#11;","\f":"&#12;","\r":"&#13;"," ":"&#32;","-":"&#45;","/":"&#47;","=":"&#61;","`":"&#96;","\u0085":"&#133;","\u00a0":"&#160;","\u2028":"&#8232;","\u2029":"&#8233;"};function Qe(a){return Re[a]}var Pe=/[\x00\x22\x26\x27\x3c\x3e]/g;function Se(a){u.call(this);this.K=a;this.Q=[]}s(Se,u);var Te=[];function T(a,b,c,d,f){oa(c)||(Te[0]=c,c=Te);for(var g=0;g<c.length;g++){var i=H(b,c[g],d||a,f||l,a.K||a);a.Q.push(i)}return a}function Ue(a,b,c,d,f,g){if(oa(c))for(var i=0;i<c.length;i++)Ue(a,b,c[i],d,f,g);else{a:{d=d||a;g=g||a.K||a;f=!!f;if(b=$c(b,c,f))for(c=0;c<b.length;c++)if(!b[c].lc&&b[c].Hc==d&&b[c].capture==f&&b[c].ie==g){b=b[c];break a}b=k}b&&(b=b.key,ad(b),Ya(a.Q,b))}return a}function Ve(a){v(a.Q,ad);a.Q.length=0}
Se.prototype.k=function(){Se.h.k.call(this);Ve(this)};Se.prototype.handleEvent=function(){e(Error("EventHandler.handleEvent not implemented"))};function We(){u.call(this);this.l=Xe;this.fh=this.startTime=k}s(We,ed);var Xe=0;We.prototype.Sf=function(){this.kb("begin")};We.prototype.ze=function(){this.kb("end")};We.prototype.kb=function(a){this.dispatchEvent(a)};function Ye(a,b,c){u.call(this);this.Fb=a;this.ka=b||0;this.K=c;this.cf=q(this.ed,this)}s(Ye,u);n=Ye.prototype;n.ia=0;n.k=function(){Ye.h.k.call(this);this.stop();delete this.Fb;delete this.K};n.start=function(a){this.stop();this.ia=I(this.cf,ia(a)?a:this.ka)};n.stop=function(){this.Ab()&&gd.clearTimeout(this.ia);this.ia=0};n.mh=function(){this.stop();this.ed()};n.Ab=function(){return 0!=this.ia};n.ed=function(){this.ia=0;this.Fb&&this.Fb.call(this.K)};var pb;pb=da(k);var Ze={},$e=k;function af(a){a=sa(a);delete Ze[a];Pc(Ze)&&$e&&$e.stop()}function bf(){$e||($e=new Ye(function(){var a=r();Nc(Ze,function(c){cf(c,a)});Pc(Ze)||bf()},20));var a=$e;a.Ab()||a.start()};function df(a,b,c,d){We.call(this);(!oa(a)||!oa(b))&&e(Error("Start and end parameters must be arrays"));a.length!=b.length&&e(Error("Start and end points must be the same length"));this.Id=a;this.mj=b;this.duration=c;this.Eg=d;this.coords=[];this.Rd=l}s(df,We);n=df.prototype;n.nh=0;n.Ba=0;n.Gf=k;
n.play=function(a){if(a||this.l==Xe)this.Ba=0,this.coords=this.Id;else if(1==this.l)return l;af(this);this.startTime=a=r();-1==this.l&&(this.startTime-=this.duration*this.Ba);this.fh=this.startTime+this.duration;this.Gf=this.startTime;this.Ba||this.Sf();this.kb("play");-1==this.l&&this.kb("resume");this.l=1;var b=sa(this);b in Ze||(Ze[b]=this);bf();cf(this,a);return j};n.stop=function(a){af(this);this.l=Xe;a&&(this.Ba=1);ef(this,this.Ba);this.kb("stop");this.ze()};n.sh=ca("Ba");
n.k=function(){this.l==Xe||this.stop(l);this.kb("destroy");df.h.k.call(this)};function cf(a,b){a.Ba=(b-a.startTime)/(a.fh-a.startTime);1<=a.Ba&&(a.Ba=1);a.nh=1E3/(b-a.Gf);a.Gf=b;ef(a,a.Ba);1==a.Ba?(a.l=Xe,af(a),a.kb("finish"),a.ze()):1==a.l&&a.Rf()}function ef(a,b){qa(a.Eg)&&(b=a.Eg(b));a.coords=Array(a.Id.length);for(var c=0;c<a.Id.length;c++)a.coords[c]=(a.mj[c]-a.Id[c])*b+a.Id[c]}n.Rf=function(){this.kb("animate")};n.kb=function(a){this.dispatchEvent(new ff(a,this))};
function ff(a,b){Fc.call(this,a);this.coords=b.coords;this.x=b.coords[0];this.y=b.coords[1];this.ym=b.coords[2];this.duration=b.duration;this.Ba=b.sh();this.Xl=b.nh;this.state=b.l;this.El=b}s(ff,Fc);function gf(a,b,c,d){this.top=a;this.right=b;this.bottom=c;this.left=d}gf.prototype.clone=function(){return new gf(this.top,this.right,this.bottom,this.left)};gf.prototype.contains=function(a){return!this||!a?l:a instanceof gf?a.left>=this.left&&a.right<=this.right&&a.top>=this.top&&a.bottom<=this.bottom:a.x>=this.left&&a.x<=this.right&&a.y>=this.top&&a.y<=this.bottom};function hf(a,b,c,d){this.left=a;this.top=b;this.width=c;this.height=d}hf.prototype.clone=function(){return new hf(this.left,this.top,this.width,this.height)};hf.prototype.contains=function(a){return a instanceof hf?this.left<=a.left&&this.left+this.width>=a.left+a.width&&this.top<=a.top&&this.top+this.height>=a.top+a.height:a.x>=this.left&&a.x<=this.left+this.width&&a.y>=this.top&&a.y<=this.top+this.height};function jf(a,b,c){p(b)?kf(a,c,b):Nc(b,xa(kf,a))}function kf(a,b,c){a.style[Na(c)]=b}function lf(a,b){var c=oe(a);return c.defaultView&&c.defaultView.getComputedStyle&&(c=c.defaultView.getComputedStyle(a,k))?c[b]||c.getPropertyValue(b)||"":""}function nf(a,b){return a.currentStyle?a.currentStyle[b]:k}function of(a,b){return lf(a,b)||nf(a,b)||a.style&&a.style[b]}
function pf(a){var b=a.getBoundingClientRect();E&&(a=a.ownerDocument,b.left-=a.documentElement.clientLeft+a.body.clientLeft,b.top-=a.documentElement.clientTop+a.body.clientTop);return b}
function qf(a){if(E&&!Bc(8))return a.offsetParent;for(var b=oe(a),c=of(a,"position"),d="fixed"==c||"absolute"==c,a=a.parentNode;a&&a!=b;a=a.parentNode)if(c=of(a,"position"),d=d&&"static"==c&&a!=b.documentElement&&a!=b.body,!d&&(a.scrollWidth>a.clientWidth||a.scrollHeight>a.clientHeight||"fixed"==c||"absolute"==c||"relative"==c))return a;return k}
function rf(a){for(var b=new gf(0,Infinity,Infinity,0),c=me(a),d=c.u.body,f=c.u.documentElement,g=!F&&te(c.u)?c.u.documentElement:c.u.body;a=qf(a);)if((!E||0!=a.clientWidth)&&(!F||0!=a.clientHeight||a!=d)&&a!=d&&a!=f&&"visible"!=of(a,"overflow")){var i=sf(a),m;m=a;if(oc&&!G("1.9")){var t=parseFloat(lf(m,"borderLeftWidth"));if(tf(m))var x=m.offsetWidth-m.clientWidth-t-parseFloat(lf(m,"borderRightWidth")),t=t+x;m=new ke(t,parseFloat(lf(m,"borderTopWidth")))}else m=new ke(m.clientLeft,m.clientTop);i.x+=
m.x;i.y+=m.y;b.top=Math.max(b.top,i.y);b.right=Math.min(b.right,i.x+a.clientWidth);b.bottom=Math.min(b.bottom,i.y+a.clientHeight);b.left=Math.max(b.left,i.x)}d=g.scrollLeft;g=g.scrollTop;b.left=Math.max(b.left,d);b.top=Math.max(b.top,g);c=se(c.u.parentWindow||c.u.defaultView);b.right=Math.min(b.right,d+c.width);b.bottom=Math.min(b.bottom,g+c.height);return 0<=b.top&&0<=b.left&&b.bottom>b.top&&b.right>b.left?b:k}
function sf(a){var b,c=oe(a),d=of(a,"position"),f=oc&&c.getBoxObjectFor&&!a.getBoundingClientRect&&"absolute"==d&&(b=c.getBoxObjectFor(a))&&(0>b.screenX||0>b.screenY),g=new ke(0,0),i;b=c?oe(c):document;i=E&&!Bc(9)&&!Ke(me(b))?b.body:b.documentElement;if(a==i)return g;if(a.getBoundingClientRect)b=pf(a),a=Le(me(c)),g.x=b.left+a.x,g.y=b.top+a.y;else if(c.getBoxObjectFor&&!f)b=c.getBoxObjectFor(a),a=c.getBoxObjectFor(i),g.x=b.screenX-a.screenX,g.y=b.screenY-a.screenY;else{b=a;do{g.x+=b.offsetLeft;g.y+=
b.offsetTop;b!=a&&(g.x+=b.clientLeft||0,g.y+=b.clientTop||0);if(F&&"fixed"==of(b,"position")){g.x+=c.body.scrollLeft;g.y+=c.body.scrollTop;break}b=b.offsetParent}while(b&&b!=a);if(nc||F&&"absolute"==d)g.y-=c.body.offsetTop;for(b=a;(b=qf(b))&&b!=c.body&&b!=i;)if(g.x-=b.scrollLeft,!nc||"TR"!=b.tagName)g.y-=b.scrollTop}return g}function uf(a,b){"number"==typeof a&&(a=(b?Math.round(a):a)+"px");return a}function vf(a,b){a.style.height=uf(b,j)}
function U(a){if("none"!=of(a,"display"))return wf(a);var b=a.style,c=b.display,d=b.visibility,f=b.position;b.visibility="hidden";b.position="absolute";b.display="inline";a=wf(a);b.display=c;b.position=f;b.visibility=d;return a}function wf(a){var b=a.offsetWidth,c=a.offsetHeight,d=F&&!b&&!c;return(!ia(b)||d)&&a.getBoundingClientRect?(a=pf(a),new ib(a.right-a.left,a.bottom-a.top)):new ib(b,c)}
function xf(a,b){var c=a.style;"opacity"in c?c.opacity=b:"MozOpacity"in c?c.MozOpacity=b:"filter"in c&&(c.filter=""===b?"":"alpha(opacity="+100*b+")")}function V(a,b){a.style.display=b?"":"none"}function tf(a){return"rtl"==of(a,"direction")}var yf=oc?"MozUserSelect":F?"WebkitUserSelect":k;
function zf(a,b){if(/^\d+px?$/.test(b))return parseInt(b,10);var c=a.style.left,d=a.runtimeStyle.left;a.runtimeStyle.left=a.currentStyle.left;a.style.left=b;var f=a.style.pixelLeft;a.style.left=c;a.runtimeStyle.left=d;return f}
function Af(a,b){if(E){var c=zf(a,nf(a,b+"Left")),d=zf(a,nf(a,b+"Right")),f=zf(a,nf(a,b+"Top")),g=zf(a,nf(a,b+"Bottom"));return new gf(f,d,g,c)}c=lf(a,b+"Left");d=lf(a,b+"Right");f=lf(a,b+"Top");g=lf(a,b+"Bottom");return new gf(parseFloat(f),parseFloat(d),parseFloat(g),parseFloat(c))}var Bf={thin:2,medium:4,thick:6};function Cf(a,b){if("none"==nf(a,b+"Style"))return 0;var c=nf(a,b+"Width");return c in Bf?Bf[c]:zf(a,c)}
function Df(a){if(E){var b=Cf(a,"borderLeft"),c=Cf(a,"borderRight"),d=Cf(a,"borderTop"),a=Cf(a,"borderBottom");return new gf(d,c,a,b)}b=lf(a,"borderLeftWidth");c=lf(a,"borderRightWidth");d=lf(a,"borderTopWidth");a=lf(a,"borderBottomWidth");return new gf(parseFloat(d),parseFloat(c),parseFloat(a),parseFloat(b))}var Ef=/matrix\([0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, ([0-9\.\-]+)p?x?, ([0-9\.\-]+)p?x?\)/;function Ff(a,b,c,d,f){df.call(this,b,c,d,f);this.element=a}s(Ff,df);n=Ff.prototype;n.Oe=la;n.Mh=function(){ia(this.Na)||(this.Na=tf(this.element));return this.Na};n.Rf=function(){this.Oe();Ff.h.Rf.call(this)};n.ze=function(){this.Oe();Ff.h.ze.call(this)};n.Sf=function(){this.Oe();Ff.h.Sf.call(this)};function Gf(a,b,c,d,f){(2!=b.length||2!=c.length)&&e(Error("Start and end points must be 2D"));Ff.apply(this,arguments)}s(Gf,Ff);
Gf.prototype.Oe=function(){if(this.Rd){var a=this.element,b=Math.round(this.coords[0]),b=Math.max(b,0);a.scrollLeft=tf(a)?oc?-b:!E||!G("8")?a.scrollWidth-b-a.clientWidth:b:b}else this.element.scrollLeft=Math.round(this.coords[0]);this.element.scrollTop=Math.round(this.coords[1])};function Hf(a){return 1-Math.pow(1-a,3)};/*
 Portions of this code are from MochiKit, received by
 The Closure Authors under the MIT license. All other code is Copyright
 2005-2009 The Closure Authors. All Rights Reserved.
*/
function If(){}ma(If);If.prototype.$j=0;If.b();function X(a){u.call(this);this.Yb=a||me();this.Na=Jf}s(X,ed);X.prototype.Kj=If.b();var Jf=k;function Kf(a,b){switch(a){case 1:return b?"disable":"enable";case 2:return b?"highlight":"unhighlight";case 4:return b?"activate":"deactivate";case 8:return b?"select":"unselect";case 16:return b?"check":"uncheck";case 32:return b?"focus":"blur";case 64:return b?"open":"close"}e(Error("Invalid component state"))}n=X.prototype;n.ia=k;n.V=l;n.e=k;n.Na=k;n.I=k;n.J=k;n.X=k;n.Y=k;n.Zi=l;
function Lf(a){return a.ia||(a.ia=":"+(a.Kj.$j++).toString(36))}n.a=ca("e");n.i=function(){return this.Cc||(this.Cc=new Se(this))};n.Je=function(a){this==a&&e(Error("Unable to set parent component"));a&&(this.J&&this.ia&&this.J.Y&&this.ia&&(this.ia in this.J.Y&&this.J.Y[this.ia])&&this.J!=a)&&e(Error("Unable to set parent component"));this.J=a;X.h.mg.call(this,a)};n.getParent=ca("J");n.mg=function(a){this.J&&this.J!=a&&e(Error("Method not supported"));X.h.mg.call(this,a)};n.La=ca("Yb");
n.O=function(){this.e=this.Yb.createElement("div")};function Mf(a,b){a.V&&e(Error("Component already rendered"));a.e||a.O();b?b.insertBefore(a.e,k):a.Yb.u.body.appendChild(a.e);(!a.J||a.J.V)&&a.A()}n.j=function(a){this.V&&e(Error("Component already rendered"));if(a&&this.Tb(a)){this.Zi=j;if(!this.Yb||this.Yb.u!=oe(a))this.Yb=me(a);this.t(a);this.A()}else e(Error("Invalid element to decorate"))};n.Tb=da(j);n.t=ba("e");n.A=function(){this.V=j;Nf(this,function(a){!a.V&&a.a()&&a.A()})};
n.bc=function(){Nf(this,function(a){a.V&&a.bc()});this.Cc&&Ve(this.Cc);this.V=l};n.k=function(){X.h.k.call(this);this.V&&this.bc();this.Cc&&(this.Cc.$(),delete this.Cc);Nf(this,function(a){a.$()});!this.Zi&&this.e&&xe(this.e);this.J=this.I=this.e=this.Y=this.X=k};
function Of(a,b){var c=a.X?a.X.length:0;b.V&&!a.V&&e(Error("Component already rendered"));(0>c||c>(a.X?a.X.length:0))&&e(Error("Child component index out of bounds"));if(!a.Y||!a.X)a.Y={},a.X=[];if(b.getParent()==a){var d=Lf(b);a.Y[d]=b;Ya(a.X,b)}else Qc(a.Y,Lf(b),b);b.Je(a);bb(a.X,c,0,b);b.V&&a.V&&b.getParent()==a?(d=a.xa(),d.insertBefore(b.a(),d.childNodes[c]||k)):a.V&&(!b.V&&b.e&&b.e.parentNode)&&b.A()}n.xa=ca("e");n.Mh=function(){this.Na==k&&(this.Na=tf(this.V?this.e:this.Yb.u.body));return this.Na};
n.oc=function(a){this.V&&e(Error("Component already rendered"));this.Na=a};function Nf(a,b){a.X&&v(a.X,b,h)}n.removeChild=function(a,b){if(a){var c=p(a)?a:Lf(a),a=this.Y&&c?(c in this.Y?this.Y[c]:h)||k:k;c&&a&&(qb(this.Y,c),Ya(this.X,a),b&&(a.bc(),a.e&&xe(a.e)),a.Je(k))}a||e(Error("Child is not in parent component"));return a};function Pf(a,b,c,d,f){if(!E&&(!F||!G("525")))return j;if(ic&&f)return Qf(a);if(f&&!d||!c&&(17==b||18==b)||E&&d&&b==a)return l;switch(a){case 13:return!(E&&Bc(9));case 27:return!F}return Qf(a)}function Qf(a){if(48<=a&&57>=a||96<=a&&106>=a||65<=a&&90>=a||F&&0==a)return j;switch(a){case 32:case 63:case 107:case 109:case 110:case 111:case 186:case 59:case 189:case 187:case 61:case 188:case 190:case 191:case 192:case 222:case 219:case 220:case 221:return j;default:return l}}
function Rf(a){switch(a){case 61:return 187;case 59:return 186;case 224:return 91;case 0:return 224;default:return a}};function Sf(){}var Tf;ma(Sf);n=Sf.prototype;n.Bc=aa();n.O=function(a){var b=a.La().O("div",Uf(this,a).join(" "),a.Va);Vf(this,a,b);return b};n.xa=function(a){return a};n.fd=function(a,b,c){if(a=a.a?a.a():a)if(E&&!G("7")){var d=Wf(ie(a),b);d.push(b);xa(c?J:K,a).apply(k,d)}else M(a,b,c)};n.Tb=da(j);
n.j=function(a,b){if(b.id){var c=b.id;a.J&&a.J.Y&&(qb(a.J.Y,a.ia),Qc(a.J.Y,c,a));a.ia=c}(c=this.xa(b))&&c.firstChild?(c=c.firstChild.nextSibling?$a(c.childNodes):c.firstChild,a.Va=c):a.Va=k;var d=0,f=this.ga(),g=this.ga(),i=l,m=l,c=l,t=ie(b);v(t,function(a){if(!i&&a==f)i=j,g==f&&(m=j);else if(!m&&a==g)m=j;else{var b=d;if(!this.Li){this.Zd||Xf(this);var c=this.Zd,t={},x;for(x in c)t[c[x]]=x;this.Li=t}a=parseInt(this.Li[a],10);d=b|(isNaN(a)?0:a)}},this);a.l=d;i||(t.push(f),g==f&&(m=j));m||t.push(g);
var x=a.Ja;x&&t.push.apply(t,x);if(E&&!G("7")){var A=Wf(t);0<A.length&&(t.push.apply(t,A),c=j)}if(!i||!m||x||c)b.className=t.join(" ");Vf(this,a,b);return b};n.Hh=function(a){a.Mh()&&this.oc(a.a(),j);a.isEnabled()&&this.Qc(a,a.Za())};function Vf(a,b,c){b.isEnabled()||a.Pa(c,1,j);b.l&8&&a.Pa(c,8,j);b.ca&16&&a.Pa(c,16,Yf(b));b.ca&64&&a.Pa(c,64,!!(b.l&64))}
n.Pc=function(a,b){var c=!b,d=E||nc?a.getElementsByTagName("*"):k;if(yf){if(c=c?"none":"",a.style[yf]=c,d)for(var f=0,g;g=d[f];f++)g.style[yf]=c}else if(E||nc)if(c=c?"on":"",a.setAttribute("unselectable",c),d)for(f=0;g=d[f];f++)g.setAttribute("unselectable",c)};n.oc=function(a,b){this.fd(a,this.ga()+"-rtl",b)};n.Ef=function(a){var b;return a.ca&32&&(b=a.zb())?Fe(b):l};
n.Qc=function(a,b){var c;if(a.ca&32&&(c=a.zb())){if(!b&&a.me()){try{c.blur()}catch(d){}a.me()&&a.uh()}Fe(c)!=b&&(b?c.tabIndex=0:(c.tabIndex=-1,c.removeAttribute("tabIndex")))}};n.oa=function(a,b){V(a,b)};n.na=function(a,b,c){var d=a.a();if(d){var f=Zf(this,b);f&&this.fd(a,f,c);this.Pa(d,b,c)}};n.Pa=function(a,b,c){Tf||(Tf={1:"disabled",8:"selected",16:"checked",64:"expanded"});(b=Tf[b])&&a.setAttribute("aria-"+b,c)};
n.nc=function(a,b){var c=this.xa(a);if(c&&(ve(c),b))if(p(b))Ce(c,b);else{var d=function(a){if(a){var b=oe(c);c.appendChild(p(a)?b.createTextNode(a):a)}};oa(b)?v(b,d):pa(b)&&!("nodeType"in b)?v($a(b),d):d(b)}};n.zb=function(a){return a.a()};n.ga=da("goog-control");function Uf(a,b){var c=a.ga(),d=[c],f=a.ga();f!=c&&d.push(f);c=b.l;for(f=[];c;){var g=c&-c;f.push(Zf(a,g));c&=~g}d.push.apply(d,f);(c=b.Ja)&&d.push.apply(d,c);E&&!G("7")&&d.push.apply(d,Wf(d));return d}
function Wf(a,b){var c=[];b&&(a=a.concat([b]));v([],function(d){Ua(d,xa(Xa,a))&&(!b||Xa(d,b))&&c.push(d.join("_"))});return c}function Zf(a,b){a.Zd||Xf(a);return a.Zd[b]}function Xf(a){var b=a.ga();a.Zd={1:b+"-disabled",2:b+"-hover",4:b+"-active",8:b+"-selected",16:b+"-checked",32:b+"-focused",64:b+"-open"}};function $f(){}s($f,Sf);ma($f);n=$f.prototype;n.Bc=da("button");n.Pa=function(a,b,c){16==b?a.setAttribute("aria-pressed",c):$f.h.Pa.call(this,a,b,c)};n.O=function(a){var b=$f.h.O.call(this,a),c=a.hd();c&&this.og(b,c);(c=a.n())&&this.Ga(b,c);a.ca&16&&this.Pa(b,16,Yf(a));return b};n.j=function(a,b){var b=$f.h.j.call(this,a,b),c=this.n(b);a.Bg=c;a.vg=this.hd(b);a.ca&16&&this.Pa(b,16,Yf(a));return b};n.n=la;n.Ga=la;n.hd=function(a){return a.title};n.og=function(a,b){a&&(a.title=b||"")};n.ga=da("goog-button");function ag(a,b){u.call(this);a&&bg(this,a,b)}s(ag,ed);n=ag.prototype;n.e=k;n.ne=k;n.Ff=k;n.oe=k;n.Db=-1;n.Cb=-1;n.$e=l;
var cg={3:13,12:144,63232:38,63233:40,63234:37,63235:39,63236:112,63237:113,63238:114,63239:115,63240:116,63241:117,63242:118,63243:119,63244:120,63245:121,63246:122,63247:123,63248:44,63272:46,63273:36,63275:35,63276:33,63277:34,63289:144,63302:45},dg={Up:38,Down:40,Left:37,Right:39,Enter:13,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"U+007F":46,Home:36,End:35,PageUp:33,PageDown:34,Insert:45},eg=E||F&&G("525"),fg=ic&&oc;n=ag.prototype;
n.Cj=function(a){if(F&&(17==this.Db&&!a.ctrlKey||18==this.Db&&!a.altKey))this.Cb=this.Db=-1;eg&&!Pf(a.keyCode,this.Db,a.shiftKey,a.ctrlKey,a.altKey)?this.handleEvent(a):(this.Cb=oc?Rf(a.keyCode):a.keyCode,fg&&(this.$e=a.altKey))};n.Ej=function(a){this.Cb=this.Db=-1;this.$e=a.altKey};
n.handleEvent=function(a){var b=a.ea,c,d,f=b.altKey;E&&"keypress"==a.type?(c=this.Cb,d=13!=c&&27!=c?b.keyCode:0):F&&"keypress"==a.type?(c=this.Cb,d=0<=b.charCode&&63232>b.charCode&&Qf(c)?b.charCode:0):nc?(c=this.Cb,d=Qf(c)?b.keyCode:0):(c=b.keyCode||this.Cb,d=b.charCode||0,fg&&(f=this.$e),ic&&(63==d&&224==c)&&(c=191));var g=c,i=b.keyIdentifier;c?63232<=c&&c in cg?g=cg[c]:25==c&&a.shiftKey&&(g=9):i&&i in dg&&(g=dg[i]);a=g==this.Db;this.Db=g;b=new gg(g,d,a,b);b.altKey=f;this.dispatchEvent(b)};n.a=ca("e");
function bg(a,b,c){a.oe&&a.detach();a.e=b;a.ne=H(a.e,"keypress",a,c);a.Ff=H(a.e,"keydown",a.Cj,c,a);a.oe=H(a.e,"keyup",a.Ej,c,a)}n.detach=function(){this.ne&&(ad(this.ne),ad(this.Ff),ad(this.oe),this.oe=this.Ff=this.ne=k);this.e=k;this.Cb=this.Db=-1};n.k=function(){ag.h.k.call(this);this.detach()};function gg(a,b,c,d){d&&this.init(d,h);this.type="key";this.keyCode=a;this.charCode=b;this.repeat=c}s(gg,Ic);function hg(a,b){a||e(Error("Invalid class name "+a));qa(b)||e(Error("Invalid decorator function "+b))}var ig={};function jg(a,b,c){X.call(this,c);if(!b){for(var b=this.constructor,d;b;){d=sa(b);if(d=ig[d])break;b=b.h?b.h.constructor:k}b=d?qa(d.b)?d.b():new d:k}this.F=b;this.Va=a}s(jg,X);n=jg.prototype;n.Va=k;n.l=0;n.ca=39;n.hb=255;n.Sk=0;n.Re=j;n.Ja=k;n.xf=j;n.Ud=l;n.ti=k;function kg(a){a.V&&l!=a.xf&&lg(a,l);a.xf=l}n.zb=function(){return this.F.zb(this)};
n.fd=function(a,b){b?a&&(this.Ja?Xa(this.Ja,a)||this.Ja.push(a):this.Ja=[a],this.F.fd(this,a,j)):a&&this.Ja&&(Ya(this.Ja,a),0==this.Ja.length&&(this.Ja=k),this.F.fd(this,a,l))};n.O=function(){var a=this.F.O(this);this.e=a;var b=this.ti||this.F.Bc();b&&a.setAttribute("role",b);this.Ud||this.F.Pc(a,l);this.Za()||this.F.oa(a,l)};n.xa=function(){return this.F.xa(this.a())};n.Tb=function(a){return this.F.Tb(a)};
n.t=function(a){this.e=a=this.F.j(this,a);var b=this.ti||this.F.Bc();b&&a.setAttribute("role",b);this.Ud||this.F.Pc(a,l);this.Re="none"!=a.style.display};n.A=function(){jg.h.A.call(this);this.F.Hh(this);if(this.ca&-2&&(this.xf&&lg(this,j),this.ca&32)){var a=this.zb();if(a){var b=this.Gc||(this.Gc=new ag);bg(b,a);T(T(T(this.i(),b,"key",this.Dj),a,"focus",this.Aj),a,"blur",this.uh)}}};
function lg(a,b){var c=a.i(),d=a.a();b?(T(T(T(T(c,d,"mouseover",a.zh),d,"mousedown",a.xh),d,"mouseup",a.Ah),d,"mouseout",a.yh),a.he!=la&&T(c,d,"contextmenu",a.he),E&&T(c,d,"dblclick",a.vh)):(Ue(Ue(Ue(Ue(c,d,"mouseover",a.zh),d,"mousedown",a.xh),d,"mouseup",a.Ah),d,"mouseout",a.yh),a.he!=la&&Ue(c,d,"contextmenu",a.he),E&&Ue(c,d,"dblclick",a.vh))}n.bc=function(){jg.h.bc.call(this);this.Gc&&this.Gc.detach();this.Za()&&this.isEnabled()&&this.F.Qc(this,l)};
n.k=function(){jg.h.k.call(this);this.Gc&&(this.Gc.$(),delete this.Gc);delete this.F;this.Ja=this.Va=k};n.nc=function(a){this.F.nc(this.a(),a);this.Va=a};n.qh=function(){var a=this.Va;return!a?"":(p(a)?a:oa(a)?Ta(a,Ie).join(""):Ge(a)).replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")};n.oc=function(a){jg.h.oc.call(this,a);var b=this.a();b&&this.F.oc(b,a)};n.Pc=function(a){this.Ud=a;var b=this.a();b&&this.F.Pc(b,a)};n.Za=ca("Re");
n.oa=function(a,b){if(b||this.Re!=a&&this.dispatchEvent(a?"show":"hide")){var c=this.a();c&&this.F.oa(c,a);this.isEnabled()&&this.F.Qc(this,a);this.Re=a;return j}return l};n.isEnabled=function(){return!(this.l&1)};n.Ea=function(a){var b=this.getParent();if((!b||"function"!=typeof b.isEnabled||b.isEnabled())&&mg(this,1,!a))a||(this.setActive(l),ng(this,l)),this.Za()&&this.F.Qc(this,a),this.na(1,!a)};function ng(a,b){mg(a,2,b)&&a.na(2,b)}n.Ab=function(){return!!(this.l&4)};
n.setActive=function(a){mg(this,4,a)&&this.na(4,a)};function Yf(a){return!!(a.l&16)}function og(a,b){mg(a,16,b)&&a.na(16,b)}n.me=function(){return!!(this.l&32)};n.Fa=function(a){mg(this,32,a)&&this.na(32,a)};n.na=function(a,b){this.ca&a&&b!=!!(this.l&a)&&(this.F.na(this,a,b),this.l=b?this.l|a:this.l&~a)};function pg(a,b,c){a.V&&(a.l&b&&!c)&&e(Error("Component already rendered"));!c&&a.l&b&&a.na(b,l);a.ca=c?a.ca|b:a.ca&~b}function qg(a,b){return!!(a.hb&b)&&!!(a.ca&b)}
function mg(a,b,c){return!!(a.ca&b)&&!!(a.l&b)!=c&&(!(a.Sk&b)||a.dispatchEvent(Kf(b,c)))&&!a.ae}n.zh=function(a){(!a.relatedTarget||!Be(this.a(),a.relatedTarget))&&(this.dispatchEvent("enter")&&this.isEnabled()&&qg(this,2))&&ng(this,j)};n.yh=function(a){if((!a.relatedTarget||!Be(this.a(),a.relatedTarget))&&this.dispatchEvent("leave"))qg(this,4)&&this.setActive(l),qg(this,2)&&ng(this,l)};n.he=la;
n.xh=function(a){this.isEnabled()&&(qg(this,2)&&ng(this,j),Kc(a)&&(qg(this,4)&&this.setActive(j),this.F.Ef(this)&&this.zb().focus()));!this.Ud&&Kc(a)&&a.preventDefault()};n.Ah=function(a){this.isEnabled()&&(qg(this,2)&&ng(this,j),this.Ab()&&(this.xd(a)&&qg(this,4))&&this.setActive(l))};n.vh=function(a){this.isEnabled()&&this.xd(a)};
n.xd=function(a){qg(this,16)&&og(this,!Yf(this));qg(this,8)&&mg(this,8,j)&&this.na(8,j);if(qg(this,64)){var b=!(this.l&64);mg(this,64,b)&&this.na(64,b)}b=new Fc("action",this);a&&(b.altKey=a.altKey,b.ctrlKey=a.ctrlKey,b.metaKey=a.metaKey,b.shiftKey=a.shiftKey,b.$f=a.$f);return this.dispatchEvent(b)};n.Aj=function(){qg(this,32)&&this.Fa(j)};n.uh=function(){qg(this,4)&&this.setActive(l);qg(this,32)&&this.Fa(l)};
n.Dj=function(a){return this.Za()&&this.isEnabled()&&this.wf(a)?(a.preventDefault(),a.stopPropagation(),j):l};n.wf=function(a){return 13==a.keyCode&&this.xd(a)};qa(jg)||e(Error("Invalid component class "+jg));qa(Sf)||e(Error("Invalid renderer class "+Sf));var rg=sa(jg);ig[rg]=Sf;hg("goog-control",function(){return new jg(k)});function sg(){}s(sg,$f);ma(sg);n=sg.prototype;n.Bc=aa();n.O=function(a){kg(a);a.hb&=-256;pg(a,32,l);return a.La().O("button",{"class":Uf(this,a).join(" "),disabled:!a.isEnabled(),title:a.hd()||"",value:a.n()||""},a.qh()||"")};n.Tb=function(a){return"BUTTON"==a.tagName||"INPUT"==a.tagName&&("button"==a.type||"submit"==a.type||"reset"==a.type)};n.j=function(a,b){kg(a);a.hb&=-256;pg(a,32,l);b.disabled&&J(b,Zf(this,1));return sg.h.j.call(this,a,b)};n.Hh=function(a){T(a.i(),a.a(),"click",a.xd)};n.Pc=la;
n.oc=la;n.Ef=function(a){return a.isEnabled()};n.Qc=la;n.na=function(a,b,c){sg.h.na.call(this,a,b,c);if((a=a.a())&&1==b)a.disabled=c};n.n=function(a){return a.value};n.Ga=function(a,b){a&&(a.value=b)};n.Pa=la;function tg(a,b,c){jg.call(this,a,b||sg.b(),c)}s(tg,jg);n=tg.prototype;n.n=ca("Bg");n.Ga=function(a){this.Bg=a;this.F.Ga(this.a(),a)};n.hd=ca("vg");n.og=function(a){this.vg=a;this.F.og(this.a(),a)};n.k=function(){tg.h.k.call(this);delete this.Bg;delete this.vg};n.A=function(){tg.h.A.call(this);if(this.ca&32){var a=this.zb();a&&T(this.i(),a,"keyup",this.wf)}};n.wf=function(a){return 13==a.keyCode&&"key"==a.type||32==a.keyCode&&"keyup"==a.type?this.xd(a):32==a.keyCode};hg("goog-button",function(){return new tg(k)});function ug(){}s(ug,$f);ma(ug);n=ug.prototype;n.O=function(a){var b={"class":"goog-inline-block "+Uf(this,a).join(" "),title:a.hd()||""},b=a.La().O("div",b,vg(this,a.Va,a.La()));Vf(this,a,b);return b};n.Bc=da("button");n.xa=function(a){return a&&a.firstChild.firstChild};function vg(a,b,c){return c.O("div","goog-inline-block "+(a.ga()+"-outer-box"),c.O("div","goog-inline-block "+(a.ga()+"-inner-box"),b))}n.Tb=function(a){return"DIV"==a.tagName};
n.j=function(a,b){wg(b,j);wg(b,l);var c;a:{c=Me(a.La(),b);var d=this.ga()+"-outer-box";if(c&&L(c,d)&&(c=Me(a.La(),c),d=this.ga()+"-inner-box",c&&L(c,d))){c=j;break a}c=l}c||b.appendChild(vg(this,b.childNodes,a.La()));J(b,"goog-inline-block",this.ga());return ug.h.j.call(this,a,b)};n.ga=da("goog-custom-button");
function wg(a,b){if(a)for(var c=b?a.firstChild:a.lastChild,d;c&&c.parentNode==a;){d=b?c.nextSibling:c.previousSibling;if(3==c.nodeType){var f=c.nodeValue;if(""==Ea(f))a.removeChild(c);else{c.nodeValue=b?f.replace(/^[\s\xa0]+/,""):f.replace(/[\s\xa0]+$/,"");break}}else break;c=d}};function xg(a,b,c){tg.call(this,a,b||ug.b(),c)}s(xg,tg);hg("goog-custom-button",function(){return new xg(k)});function yg(a,b){X.call(this,b);this.$a=a||""}s(yg,X);yg.prototype.Ya=k;var zg="placeholder"in document.createElement("input");n=yg.prototype;n.jd=l;n.O=function(){this.e=this.La().O("input",{type:"text"})};n.t=function(a){yg.h.t.call(this,a);this.$a||(this.$a=a.getAttribute("label")||"");var b;a:{var c=oe(a);try{b=c&&c.activeElement;break a}catch(d){}b=k}b==a&&(this.jd=j,K(this.a(),this.Vc));zg?this.a().placeholder=this.$a:this.a().setAttribute("aria-label",this.$a)};
n.A=function(){yg.h.A.call(this);var a=new Se(this);T(a,this.a(),"focus",this.wh);T(a,this.a(),"blur",this.xj);zg?this.B=a:(oc&&T(a,this.a(),["keypress","keydown","keyup"],this.yj),T(a,oe(this.a())?oe(this.a()).parentWindow||oe(this.a()).defaultView:window,"load",this.Gj),this.B=a,Ag(this));Bg(this);this.a().Nj=this};n.bc=function(){yg.h.bc.call(this);this.B&&(this.B.$(),this.B=k);this.a().Nj=k};function Ag(a){!a.tj&&(a.B&&a.a().form)&&(T(a.B,a.a().form,"submit",a.Bj),a.tj=j)}
n.k=function(){yg.h.k.call(this);this.B&&(this.B.$(),this.B=k)};n.Vc="label-input-label";n.wh=function(){this.jd=j;K(this.a(),this.Vc);if(!zg&&!Cg(this)&&!this.Mj){var a=this,b=function(){a.a().value=""};E?I(b,10):b()}};n.xj=function(){zg||(Ue(this.B,this.a(),"click",this.wh),this.Ya=k);this.jd=l;Bg(this)};n.yj=function(a){27==a.keyCode&&("keydown"==a.type?this.Ya=this.a().value:"keypress"==a.type?this.a().value=this.Ya:"keyup"==a.type&&(this.Ya=k),a.preventDefault())};
n.Bj=function(){Cg(this)||(this.a().value="",I(this.wj,10,this))};n.wj=function(){Cg(this)||(this.a().value=this.$a)};n.Gj=function(){Bg(this)};function Cg(a){return!!a.a()&&""!=a.a().value&&a.a().value!=a.$a}n.clear=function(){this.a().value="";this.Ya!=k&&(this.Ya="")};n.reset=function(){Cg(this)&&(this.clear(),Bg(this))};n.Ga=function(a){this.Ya!=k&&(this.Ya=a);this.a().value=a;Bg(this)};n.n=function(){return this.Ya!=k?this.Ya:Cg(this)?this.a().value:""};
function Bg(a){zg?a.a().placeholder!=a.$a&&(a.a().placeholder=a.$a):(Ag(a),a.a().setAttribute("aria-label",a.$a));Cg(a)?K(a.a(),a.Vc):(!a.Mj&&!a.jd&&J(a.a(),a.Vc),zg||I(a.Ck,10,a))}n.Ea=function(a){this.a().disabled=!a;M(this.a(),this.Vc+"-disabled",!a)};n.isEnabled=function(){return!this.a().disabled};n.Ck=function(){this.a()&&(!Cg(this)&&!this.jd)&&(this.a().value=this.$a)};function Dg(a,b,c,d,f,g,i,m,t){var x,A;if(x=c.offsetParent){var B="HTML"==x.tagName||"BODY"==x.tagName;if(!B||"static"!=of(x,"position"))A=sf(x),B||(B=(B=tf(x))&&oc?-x.scrollLeft:B&&(!E||!G("8"))?x.scrollWidth-x.clientWidth-x.scrollLeft:x.scrollLeft,A=le(A,new ke(B,x.scrollTop)))}x=A||new ke;A=sf(a);B=U(a);A=new hf(A.x,A.y,B.width,B.height);if(B=rf(a)){var Z=new hf(B.left,B.top,B.right-B.left,B.bottom-B.top),B=Math.max(A.left,Z.left),W=Math.min(A.left+A.width,Z.left+Z.width);if(B<=W){var mb=Math.max(A.top,
Z.top),Z=Math.min(A.top+A.height,Z.top+Z.height);mb<=Z&&(A.left=B,A.top=mb,A.width=W-B,A.height=Z-mb)}}B=me(a);mb=me(c);if(B.u!=mb.u){var W=B.u.body,mb=mb.u.parentWindow||mb.u.defaultView,Z=new ke(0,0),zc=oe(W)?oe(W).parentWindow||oe(W).defaultView:window,mf=W;do{var ea;if(zc==mb)ea=sf(mf);else{ea=mf;var nb=new ke;if(1==ea.nodeType){if(ea.getBoundingClientRect){var ja=pf(ea);nb.x=ja.left;nb.y=ja.top}else{var ja=Le(me(ea)),Oa=sf(ea);nb.x=Oa.x-ja.x;nb.y=Oa.y-ja.y}oc&&!G(12)&&(ja=h,ja=h,E?ja="-ms-transform":
F?ja="-webkit-transform":nc?ja="-o-transform":oc&&(ja="-moz-transform"),Oa=h,ja&&(Oa=of(ea,ja)),Oa||(Oa=of(ea,"transform")),Oa?(ea=Oa.match(Ef),ja=!ea?new ke(0,0):new ke(parseFloat(ea[1]),parseFloat(ea[2]))):ja=new ke(0,0),nb=new ke(nb.x+ja.x,nb.y+ja.y))}else ja=qa(ea.uj),Oa=ea,ea.targetTouches?Oa=ea.targetTouches[0]:ja&&ea.ea.targetTouches&&(Oa=ea.ea.targetTouches[0]),nb.x=Oa.clientX,nb.y=Oa.clientY;ea=nb}Z.x+=ea.x;Z.y+=ea.y}while(zc&&zc!=mb&&(mf=zc.frameElement)&&(zc=zc.parent));W=le(Z,sf(W));E&&
!Ke(B)&&(W=le(W,Le(B)));A.left+=W.x;A.top+=W.y}a=(b&4&&tf(a)?b^2:b)&-5;b=new ke(a&2?A.left+A.width:A.left,a&1?A.top+A.height:A.top);b=le(b,x);f&&(b.x+=(a&2?-1:1)*f.x,b.y+=(a&1?-1:1)*f.y);var N;if(i)if(t)N=t;else if(N=rf(c))N.top-=x.y,N.right-=x.x,N.bottom-=x.y,N.left-=x.x;a:{t=b.clone();f=0;a=(d&4&&tf(c)?d^2:d)&-5;d=U(c);m=m?m.clone():d.clone();if(g||0!=a)a&2?t.x-=m.width+(g?g.right:0):g&&(t.x+=g.left),a&1?t.y-=m.height+(g?g.bottom:0):g&&(t.y+=g.top);if(i){if(N){g=t;f=0;if(65==(i&65)&&(g.x<N.left||
g.x>=N.right))i&=-2;if(132==(i&132)&&(g.y<N.top||g.y>=N.bottom))i&=-5;g.x<N.left&&i&1&&(g.x=N.left,f|=1);g.x<N.left&&(g.x+m.width>N.right&&i&16)&&(m.width=Math.max(m.width-(g.x+m.width-N.right),0),f|=4);g.x+m.width>N.right&&i&1&&(g.x=Math.max(N.right-m.width,N.left),f|=1);i&2&&(f|=(g.x<N.left?16:0)|(g.x+m.width>N.right?32:0));g.y<N.top&&i&4&&(g.y=N.top,f|=2);g.y>=N.top&&(g.y+m.height>N.bottom&&i&32)&&(m.height=Math.max(m.height-(g.y+m.height-N.bottom),0),f|=8);g.y+m.height>N.bottom&&i&4&&(g.y=Math.max(N.bottom-
m.height,N.top),f|=2);i&8&&(f|=(g.y<N.top?64:0)|(g.y+m.height>N.bottom?128:0));i=f}else i=256;f=i;if(f&496){c=f;break a}}g=oc&&(ic||qc)&&G("1.9");t instanceof ke?(i=t.x,t=t.y):(i=t,t=h);c.style.left=uf(i,g);c.style.top=uf(t,g);if(!(d==m||(!d||!m?0:d.width==m.width&&d.height==m.height)))g=Ke(me(oe(c))),E&&(!g||!G("8"))?(i=c.style,g?(g=Af(c,"padding"),c=Df(c),i.pixelWidth=m.width-c.left-g.left-g.right-c.right,i.pixelHeight=m.height-c.top-g.top-g.bottom-c.bottom):(i.pixelWidth=m.width,i.pixelHeight=
m.height)):(c=c.style,oc?c.MozBoxSizing="border-box":F?c.WebkitBoxSizing="border-box":c.boxSizing="border-box",c.width=Math.max(m.width,0)+"px",c.height=Math.max(m.height,0)+"px");c=f}return c};function Eg(){}Eg.prototype.cb=aa();function Fg(a,b,c){this.element=a;this.kf=b;this.pk=c}s(Fg,Eg);Fg.prototype.cb=function(a,b,c){Dg(this.element,this.kf,a,b,h,c,this.pk)};function Gg(a,b,c,d){Fg.call(this,a,b);this.Pj=c?5:0;this.Xf=d||h}s(Gg,Fg);Gg.prototype.cb=function(a,b,c,d){var f=Dg(this.element,this.kf,a,b,k,c,10,d,this.Xf);if(f&496){var g=Hg(f,this.kf),b=Hg(f,b),f=Dg(this.element,g,a,b,k,c,10,d,this.Xf);f&496&&(g=Hg(f,g),b=Hg(f,b),Dg(this.element,g,a,b,k,c,this.Pj,d,this.Xf))}};function Hg(a,b){a&48&&(b^=2);a&192&&(b^=1);return b};function Ig(a,b){u.call(this);this.K=new Se(this);var c=a||k;Jg(this);this.e=c;b&&this.Ei(b)}s(Ig,ed);n=Ig.prototype;n.e=k;n.Vd=j;n.Og=k;n.Fc=l;n.Hk=l;n.Hf=-1;n.Qh=-1;n.Ij=l;n.lj=j;n.Qb="toggle_display";n.Ei=ba("Qb");n.a=ca("e");function Jg(a){a.Fc&&e(Error("Can not change this state of the popup while showing."))}n.Za=ca("Fc");
n.oa=function(a){this.Gd&&this.Gd.stop();this.kd&&this.kd.stop();if(a){if(!this.Fc&&this.dispatchEvent("beforeshow")){this.e||e(Error("Caller must call setElement before trying to show the popup"));this.cb();a=oe(this.e);this.Ij&&T(this.K,a,"keydown",this.dk,j);if(this.Vd)if(T(this.K,a,"mousedown",this.ii,j),E){var b;try{b=a.activeElement}catch(c){}for(;b&&"IFRAME"==b.nodeName;){try{var d=b.contentDocument||b.contentWindow.document}catch(f){break}a=d;b=a.activeElement}T(this.K,a,"mousedown",this.ii,
j);T(this.K,a,"deactivate",this.hi)}else T(this.K,a,"blur",this.hi);"toggle_display"==this.Qb?(this.e.style.visibility="visible",V(this.e,j)):"move_offscreen"==this.Qb&&this.cb();this.Fc=j;this.Gd?(Yc(this.Gd,"end",this.mi,l,this),this.Gd.play()):this.mi()}}else this.Dc()};n.cb=la;n.Dc=function(a){if(!this.Fc||!this.dispatchEvent({type:"beforehide",target:a}))return l;this.K&&Ve(this.K);this.Fc=l;this.Qh=r();this.kd?(Yc(this.kd,"end",xa(this.Zg,a),l,this),this.kd.play()):this.Zg(a);return j};
n.Zg=function(a){"toggle_display"==this.Qb?this.Hk?I(this.Dh,0,this):this.Dh():"move_offscreen"==this.Qb&&(this.e.style.top="-10000px");this.dispatchEvent({type:"hide",target:a})};n.Dh=function(){this.e.style.visibility="hidden";V(this.e,l)};n.mi=function(){this.Hf=r();this.Qh=-1;this.dispatchEvent("show")};n.ii=function(a){a=a.target;!Be(this.e,a)&&((!this.Og||Be(this.Og,a))&&!(150>r()-this.Hf))&&this.Dc(a)};n.dk=function(a){27==a.keyCode&&this.Dc(a.target)&&(a.preventDefault(),a.stopPropagation())};
n.hi=function(a){if(this.lj){var b=oe(this.e);if(E||nc){if(a=b.activeElement,!a||Be(this.e,a)||"BODY"==a.tagName)return}else if(a.target!=b)return;150>r()-this.Hf||this.Dc()}};n.k=function(){Ig.h.k.call(this);this.K.$();Ca(this.Gd);Ca(this.kd);delete this.e;delete this.K};function Kg(a,b){this.ri=4;this.bg=b||h;Ig.call(this,a)}s(Kg,Ig);function Lg(a,b){a.ri=b;a.Za()&&a.cb()}function Mg(a,b){a.bg=b||h;a.Za()&&a.cb()}function Ng(a,b,c,d,f){a.Uj=b==k||b instanceof gf?b:new gf(b,c,d,f);a.Za()&&a.cb()}Kg.prototype.cb=function(){if(this.bg){var a=!this.Za()&&"move_offscreen"!=this.Qb,b=this.a();a&&(b.style.visibility="hidden",V(b,j));this.bg.cb(b,this.ri,this.Uj);a&&V(b,l)}};function Og(a,b,c){u.call(this);this.Fb=a;this.ka=b;this.K=c;this.cf=q(this.mk,this)}s(Og,u);n=Og.prototype;n.Ke=l;n.pi=0;n.pa=k;n.mh=function(){!this.pa&&!this.pi?this.ed():this.Ke=j};n.stop=function(){this.pa&&(gd.clearTimeout(this.pa),this.pa=k,this.Ke=l)};n.k=function(){Og.h.k.call(this);this.stop()};n.mk=function(){this.pa=k;this.Ke&&!this.pi&&(this.Ke=l,this.ed())};n.ed=function(){this.pa=I(this.cf,this.ka);this.Fb.call(this.K)};function Pg(a,b){u.call(this);this.Fb=a;this.K=b;this.Xa=new Ye(q(this.lk,this),0,this)}s(Pg,u);n=Pg.prototype;n.ka=0;n.ig=0;n.Kh=l;n.k=function(){this.Xa.$();delete this.Fb;delete this.K;Pg.h.k.call(this)};n.start=function(a,b){this.stop();this.Kh=l;var c=b||0;this.ka=Math.max(a||0,0);this.ig=0>c?-1:r()+c;this.Xa.start(0>c?this.ka:Math.min(this.ka,c))};n.stop=function(){this.Xa.stop()};n.Ab=function(){return this.Xa.Ab()};
n.lk=function(){if(this.Fb.call(this.K))this.Kh=j;else if(0>this.ig)this.Xa.start(this.ka);else{var a=this.ig-r();0>=a||this.Xa.start(Math.min(this.ka,a))}};function Qg(a){u.call(this);this.e=a;this.ud=this.e.value;this.B=new Se(this);this.ab=r();F||E||oc&&G("1.9")?T(this.B,a,"paste",this.yc):T(this.B,a,["keydown","blur","focus","mouseover","input"],this.zj);this.Xa=new Pg(q(this.Sg,this))}s(Qg,ed);n=Qg.prototype;n.l="init";n.z=Ed("goog.events.PasteHandler");n.k=function(){Qg.h.k.call(this);this.B.$();this.B=k;this.Xa.$();this.Xa=k};
n.Sg=function(){if(this.ud==this.e.value)return l;this.z.info("detected textchange after paste");this.dispatchEvent("after_paste");return j};n.yc=function(a){a=new Ic(a.ea);a.type="paste";this.dispatchEvent(a);I(function(){this.Sg()||this.Xa.start(50,200)},0,this)};
n.zj=function(a){switch(this.l){case "init":switch(a.type){case "blur":this.l="init";break;case "focus":this.l="focused";break;case "mouseover":this.l="init";this.e.value!=this.ud&&(this.z.info("paste by dragdrop while on init!"),this.yc(a));break;default:Ad(this.z,"unexpected event "+a.type+"during init")}break;case "focused":switch(a.type){case "input":var b=this.ab+400;if(r()>b||"focus"==this.xk)this.z.info("paste by textchange while focused!"),this.yc(a);break;case "blur":this.l="init";break;
case "keydown":this.z.info("key down ... looking for ctrl+v");if(ic&&nc&&0==a.keyCode||ic&&nc&&17==a.keyCode)break;this.l="typing";break;case "mouseover":this.e.value!=this.ud&&(this.z.info("paste by dragdrop while focused!"),this.yc(a));break;default:Ad(this.z,"unexpected event "+a.type+" during focused")}break;case "typing":switch(a.type){case "input":this.l="focused";break;case "blur":this.l="init";break;case "keydown":if(a.ctrlKey&&86==a.keyCode||a.shiftKey&&45==a.keyCode||a.metaKey&&86==a.keyCode)this.z.info("paste by ctrl+v while keypressed!"),
this.yc(a);break;case "mouseover":this.e.value!=this.ud&&(this.z.info("paste by dragdrop while keypressed!"),this.yc(a));break;default:Ad(this.z,"unexpected event "+a.type+" during keypressed")}break;default:Ad(this.z,"invalid "+this.l+" state")}this.ab=r();this.ud=this.e.value;this.z.info(a.type+" -> "+this.l);this.xk=a.type};function Rg(){return'<div class="popup" id="popup" style="visibility: hidden; display: none;"><div class="content"></div><div id="tailarrow"></div></div>'}function Sg(a){return(a.link?'<a href="'+S(a.link)+'">':"")+'<div class="tooltip">'+a.text+"</div>"+(a.link?"</a>":"")}
function Tg(){return'<div class="comment-oob">Click <div class="fb-icon"></div> and <div class="twitter-icon"></div> for instant sharing<div class="on-off"><div class="off">OFF <div class="twitter-icon"></div></div> &#8594; <div class="on">ON <div class="twitter-icon on"></div></div></div></div>'}
function Ug(){return'<div class="create-poll"><div class="label">CREATE A USER POLL</div><input type="text" placeholder="Title" class="poll-title"/><div class="label">OPTIONS</div><input type="text" placeholder="Option 1" class="option-input"/><input type="text" placeholder="Option 2" class="option-input"/><div class="add-option button">ADD OPTION</div><div class="submit-poll button">CREATE</div></div>'}
function Vg(){return'<div class="select-program"><div class="select-header">Suggest a Program</div><div class="select-content"><div class="page"><input type="text" class="program-input" placeholder="paste a youtube link"/><div class="page2"></div></div></div></div>'}function Wg(a){return'<div class="confirm-media"><img src="'+S(a.Wk)+'" /><div class="title">'+S(a.title)+'</div><div class="dark button">Yes</div></div>'};function Xg(){w.call(this)}s(Xg,w);ma(Xg);function Yg(){var a=O("popup");a||(a=R(Rg),document.body.appendChild(a));Kg.call(this,a);H(window,"resize",q(this.oa,this,l));H(this,"hide",this.gk);this.eh=this.Fd=this.ke=l;this.I=Xg.b();this.I.subscribe("tooltip",this.Pk,this);this.I.subscribe("oob",this.Nk,this);this.I.subscribe("create-poll",this.Jk,this);this.I.subscribe("select-program",this.Kk,this);this.I.subscribe("hide",this.Dc,this);H(this.a(),"mouseover",q(function(){this.ke=j},this));H(this.a(),"mouseout",q(function(){this.ke=l;this.Fd&&
this.I.c("hide")},this))}s(Yg,Kg);ma(Yg);function Zg(a,b,c,d){H(b,"mouseover",q(function(){this.$c&&gd.clearTimeout(this.$c);this.Fd=l;this.I.c("tooltip",b,c,d)},a));H(b,"mouseout",q(function(){this.$c=I(q(function(){this.ke?this.Fd=j:this.I.c("hide")},this),100)},a))}n=Yg.prototype;n.show=function(a,b,c,d){this.$c&&gd.clearTimeout(this.$c);this.Fd=l;this.I.c(c,a,b,d);this.$c=I(q(function(){this.ke?this.Fd=j:this.I.c("hide")},this),2E3)};
function $g(a,b,c){"top"==c?(Lg(a,1),c=-1*(U(a.a()).width-U(b).width)/2,Ng(a,0,0,6,c),Mg(a,new Gg(b,4)),a.a().className="popup",J(a.a(),"top")):"left"==c?(Lg(a,0),c=-1*(U(a.a()).height-U(b).height)/2,Ng(a,c,6,0,0),Mg(a,new Gg(b,6)),a.a().className="popup",J(a.a(),"left")):"right"==c&&(Lg(a,0),c=-1*(U(a.a()).height-U(b).height)/2,Ng(a,c,0,0,6),Mg(a,new Gg(b,6)),a.a().className="popup",J(a.a(),"right"))}n.gk=function(){this.eh||(this.Dc(),this.I.c("on-hide"))};n.xa=function(){return P("content",this.a())};
n.Pk=function(a,b,c,d){this.oa(l);$g(this,a,b);Oe(this.xa(),Sg,{text:"function"==typeof c.text?c.text():c.text,link:c.link});d&&(Jg(this),this.Vd=l);this.oa(j)};n.Nk=function(a,b,c){this.oa(l);$g(this,a,b);a=-1*(U(this.a()).width-U(a).width)/2;Ng(this,0,0,36,a);Oe(this.xa(),Tg,{text:c.html,link:c.link});Jg(this);this.Vd=l;this.oa(j);T(this.K,this.a(),"click",q(function(){this.I.c("hide")},this))};
n.Jk=function(a){this.oa(l);Lg(this,2);Mg(this,new Gg(a,7));this.a().className="popup";J(this.a(),"top");a=-1*(U(this.a()).width-U(a).width)/2;Ng(this,0,0,36,a);Oe(this.xa(),Ug,{});Jg(this);this.Vd=l;this.oa(j);this.eh=j};
n.Kk=function(a,b){this.oa(l);Lg(this,0);var c=-1*(U(this.a()).height-U(a).height)/2;Ng(this,c,0,0,5);Mg(this,new Gg(a,6));J(this.a(),"left");Oe(this.xa(),Vg);this.Kd=new yg("paste a YouTube link");this.Kd.j(P("program-input",this.a()));var c=new ag(this.Kd.a()),d=new Qg(this.Kd.a()),f=new Og(q(this.Vf,this,b),1E3);this.oa(j);T(T(T(this.K,d,"after_paste",q(this.Vf,this,b)),c,"key",q(function(){f&&f.mh()},this)),this.Kd.a(),"focus",q(this.Vf,this,b))};
n.Vf=function(a){var b=P("select-content",this.a());try{var c;var d=this.Kd.n(),f=ah.exec(d);f?c=new bh(f[1]||f[2],h,h):e(Error("failed to parse video id from youtube url: "+d));y(Da("https://gdata.youtube.com/feeds/api/videos/%s?v=2&alt=json",c.Xi),q(function(d){var f=Fd(Yd(d.target)).entry,d=f.title.$t,g=f.media$group.media$thumbnail[0].url,f=P("page2",this.a());Oe(f,Wg,{title:d,Wk:g});d=new xg("Yes");d.j(P("button",f));(new Gf(b,[0,0],[260,0],300,Hf)).play();T(this.K,d,"action",q(this.Qf,this,
a,c))},this))}catch(g){}};n.Qf=function(a,b){y("/_addprogram",q(function(b){b=Fd(Yd(b.target));b=new Ib(b);a.c(Ub,b);this.oa(l)},this),"POST","channel="+a.id+"&youtube_id="+b.Xi)};function Y(){w.call(this)}s(Y,w);ma(Y);function ch(a){return'<div class="info"><div class="scrollable ios-scroll"><div class="picture"><img src="'+S(a.media.ub)+'" class="thumb"><div class="ytvideo"></div><div class="publisher" '+(!a.media.ma.name?'style="display:none"':"")+'><img src="'+S(a.media.ma.M)+'"><div class="name">'+S(a.media.ma.name)+'</div></div><div class="links"><div class="local"></div><a target="_blank" href="'+a.media.Jj+'"><div class="host"></div></a></div><div class="link-select" style="display:none"><input onClick="this.select();" class="link-input" type="text" value="'+
a.media.link+'" readonly="readonly"/></div><div class="title"><div class="text">'+S(a.media.name)+'</div></div><div class="reddit"><div class="upvote"></div><div class="reddit-logo"></div><div class="reddit-score"></div><div class="downvote"></div></div><div class="scrollable ios-scroll" '+(!a.description?'style="display:none"':"")+'><div class="desc-link"><a href="#">DESCRIPTION</a><div class="published">'+S(a.kc)+'</div></div><div class="description">'+a.description+'</div></div><div class="button play"><div class="icon"></div><div class="loading-icon"></div></div><div class="options"><div class="button facebook"><div class="icon"></div></div><div class="button twitter"><div class="icon"></div></div><div class="button star"><div class="icon"></div></div><div class="button send"><div class="icon"></div></div></div></div><div class="viewers" style="display: none"><div class="label"><div class="eye-icon"></div></div></div><div class="info-contents"><div class="user-poll" style="display: none"><div class="label"><div class="poll-icon"></div><div class="status">VOTE</div></div><div class="poll-options"></div></div><div class="tweet-holder" style="display:none"><div class="label"><div class="globe-icon"></div><a class="tweets-link">LATEST TWEETS</a></div><div class="tweets"></div><div class="dot-nav"></div></div><div class="comments-holder ios-scroll" style="display:none"><div class="label"><div class="friends-icon"></div><a class="conv-link">CONVERSATION</a>'+
(a.Oj?'<a class="prev-link">&#10218; LAST PROGRAM</a>':"")+'</div><div class="no-comments" style="display:none">Start the conversation</div><div class="comments"></div><div class="top-grad"></div><div class="bottom-grad"></div></div><div class="create-poll-button" style="display:none">+ POLL</div><div class="create-poll popup" style="display:none"><div class="label">CREATE A USER POLL</div><input type="text" placeholder="Title" class="poll-title"/><div class="label" style="margin-top: 5px;">OPTIONS</div><div class="option-inputs"><input type="text" placeholder="Option 1" class="option-input option-input-1"/><input type="text" placeholder="Option 2" class="option-input option-input-2"/></div><div class="add-option button">ADD OPTION</div><div class="submit-poll button">CREATE</div><div class="close"></div></div></div><div class="send-media popup" style="display:none"><div class="label">SEND TO A FRIEND</div><div class="recipients"><textarea placeholder="To"></textarea></div><div class="label">ADD A MESSAGE:</div><div class="send-message"><textarea placeholder="Optional"></textarea><div class="add-comment button">SEND</div></div><div class="close"></div></div><div class="loading loading-activity"><div class="loading-spinner"></div></div><div class="overlay" style="display: none"><div class="leaving"><div>This program is over. Carry on?</div><div class="button dark no">Not yet</div><div class="button dark yes">Let\'s go</div></div></div>'+
(a.Tj?'<div class="login-promo"><div class="title">login to xylo</div><div class="promo promo-1" style="margin-top: 10px;"><div class="promo-pic"><img src="/static/img/promo1.jpg"></div><div class="promo-text">Watch and chat live with friends.</div></div><div class="promo flip promo-2"><div class="promo-pic"><img src="/static/img/promo2.jpg"></div><div class="promo-text">See latest tweets and vote on stories.</div></div><div class="promo promo-3"><div class="promo-pic"><img src="/static/img/promo3.jpg"></div><div class="promo-text">Discuss, share, and save favorites.</div></div><div class="fb-login"><div class="power"><div class="bg"></div></div><div class="login-label">'+
(a.Ac?"Login to discuss":"Login")+'</div><div class="with-fb">with facebook</div><div class="waitlist">You\'re on the waitlist</div><div class="login-loading">Loading</div><div class="error"></div><div class="message">We can\'t post on your behalf!</div></div></div>':"")+"</div></div>"}function dh(a){return'<div class="viewer" name="'+S(a.de)+'"><img src="'+S(a.r.M)+'"></div>'}
function eh(a){return'<div class="tweet" id="'+S(a.prefix)+"-"+S(a.wb.id)+'">'+(a.wb.r?'<a href="#user:'+S(a.wb.r.id)+'"><img src="'+S(a.wb.M)+'"/></a>':'<img src="'+S(a.wb.M)+'"/>')+'<div class="text"><a class="handle" target="_blank" href="http://www.twitter.com/'+S(a.wb.handle)+"/status/"+S(a.wb.id)+'">'+S(a.wb.handle)+"</a> "+a.text+'</div><div class="timestamp">'+S(a.timestamp)+'</div><div class="tweet-options"><div class="reply"></div></div></div>'}
function fh(a){return'<div class="comment'+(a.Z.C?" reply":"")+'" '+(a.Z.id?'id="'+S(a.prefix)+"-"+S(a.Z.id)+'"':"")+">"+(!a.Z.C?'<a href="#user:'+S(a.Z.r.id)+'"><div class="user-picture" style="background:'+S(a.Z.r.color)+'"><img src="'+S(a.Z.r.M)+'"/></div></a>':"")+'<div class="template"><a class="user" href="#user:'+S(a.Z.r.id)+'">'+S(a.Z.r.name)+'</a>  <div class="text">'+a.text+'<div class="comment-options">'+(a.ni?'<div class="remove"></div> ':"")+'<div class="reply"></div></div></div><div class="timestamp">'+
S(a.Z.Jb)+'</div><div class="replies"></div>'+(!a.Z.C?'<div class="reply-input"><textarea class="reply-textarea" rows="1" placeholder="reply..."></textarea></div>':"")+"</div></div>"}
function gh(){return'<div class="comment-input"><div class="textarea-holder"><div class="input-holder"><div class="highlighter"></div><textarea class="comment-textarea" rows="1" placeholder="Add to the conversation..."></textarea><div class="suggestions" style="display:none"></div></div></div><div class="comment-controls"><div class="comment-toggle tweet-toggle"><div class="icon"></div></div><div class="comment-toggle fb-toggle"><div class="icon"></div></div></div><div class="comment-button add-comment">ADD</div><div class="popup top" style="display:none"><div class="comment-oob">Click <div class="fb-icon"></div> and <div class="twitter-icon"></div> for instant sharing<div class="on-off"><div class="off">OFF <div class="twitter-icon"></div></div> &#8594; <div class="on">ON <div class="twitter-icon on"></div></div></div></div></div></div>'}
function hh(a){var b='<div class="activity'+(1<a.D.length?" digest":"")+'">';if(1<a.D.length){for(var b=b+('<div class="template"><span>'+S(a.D.length)+" friends </span>"+(a.Si?"watched":"are watching")+(a.N?' <a href="#channel:'+S(a.N.id)+'">'+S(a.N.name)+"</a>":"")+'<div class="timestamp">'+S(a.time)+'</div></div><div class="users">'),c=a.D,d=c.length,f=0;f<d;f++)var g=c[f],b=b+('<a href="#user:'+S(g.id)+'"><div class="picture" style="background:'+S(g.color)+'"><img src="'+S(g.M)+'"/></div></a>');
b+="</div>"}return b+=(1==a.D.length?'<a href="#user:'+S(a.D[0].id)+'"><div class="picture" style="background:'+S(a.D[0].color)+'"><img src="'+S(a.D[0].M)+'"/></div></a><div class="template"><a class="user" href="#user:'+S(a.D[0].id)+'">'+S(a.D[0].name)+"</a> "+(a.Si?"watched":"is watching")+(a.N?' <a href="#channel:'+S(a.N.id)+'">'+S(a.N.name)+"</a>":"")+'<div class="timestamp">'+S(a.time)+"</div></div>":"")+'<div class="medias"></div></div>'}
function ih(a){for(var b='<div class="comment activity'+(1<a.Ta.length?" digest":"")+'">'+(1<a.Ta.length?'<div class="template">'+(1==a.D.length?'<a class="user" href="#user:'+S(a.D[0].id)+'">'+S(a.D[0].name)+' </a> discussed <a class="title" href="#info:'+S(a.media.id)+'">'+S(a.media.name)+"</a>.":"<span>"+S(a.D.length)+' friends </span> discussed <a class="title" href="#info:'+S(a.media.id)+'"> '+S(a.media.name)+"</a>.")+"</div>":""),a=a.Ta,c=a.length,d=0;d<c;d++)var f=a[d],b=b+('<div class="comment"><a href="#user:'+
S(f.r.id)+'"><div class="picture" style="background:'+S(f.r.color)+'"><img src="'+S(f.r.M)+'"/></div></a><div class="template"><a class="user" href="#user:'+S(f.r.id)+'">'+S(f.r.name)+'</a>  <div class="text">'+f.text+'</div><div class="timestamp">'+S(f.Jb)+"</div></div></div>");return b+'<div class="medias"></div></div>'}
function jh(a){var b='<div class="like activity'+(1<a.D.length?" digest":"")+'">';if(1<a.D.length){for(var b=b+('<div class="template"><span>'+S(a.D.length)+' friends </span>liked<div class="timestamp">'+S(a.time)+'</div></div><div class="users">'),c=a.D,d=c.length,f=0;f<d;f++)var g=c[f],b=b+('<a href="#user:'+S(g.id)+'"><div class="picture" style="background:'+S(g.color)+'"><img src="'+S(g.M)+'"/></div></a>');b+="</div>"}return b+=(1==a.D.length?'<a href="#user:'+S(a.D[0].id)+'"><div class="picture" style="background:'+
S(a.D[0].color)+'"><img src="'+S(a.D[0].M)+'"/></div></a><div class="template" style="top:10px;margin-bottom:30px"><a class="user" href="#user:'+S(a.D[0].id)+'">'+S(a.D[0].name)+"</a> liked "+(1<a.Zh?S(a.Zh)+" stories":"")+'<div class="timestamp">'+S(a.time)+"</div></div>":"")+'<div class="medias"></div></div>'}
function kh(a){return'<div class="list-info"><div class="picture-cell" '+(a.ub?'style="display:table-cell"':"")+">"+(a.link?'<a href="'+S(a.link)+'" target="_blank">':"")+'<div class="picture"><img class="thumb" src="'+S(a.ub)+'"></div>'+(a.link?"</a>":"")+'</div><div class="description" style="display:table-cell">'+a.description+"</div></div>"}function lh(a){return'<li class="'+S(a.className)+' tab"><div class="label">'+S(a.name)+"</div></li>"}
function mh(a){return'<div class="admin"><div class="scrollable ios-scroll"><div class="search"><input type="text" class="input" '+(a.Ih?'placeholder="'+S(a.Ih)+'"':"")+'/></div><div class="results"></div><div class="section" style="display:none"><div class="label">CHANNELS</div><div class="admin-channels"></div></div><div class="section" style="display:none"><div class="label">CURRENT TOPICS</div><div class="topics"></div></div><div class="section" style="display:none"><div class="label">COLLECTIONS</div><div class="collections"></div></div><div class="scroll-area"></div>'}
function nh(){return'<div class="admin-list admin"><div class="search"><input class="input" type="text" placeholder="Paste video or playlist link" /></div><div class="tabbed pending"><ul class="tabs"><li class="tab pending"><div class="label">PENDING</div></li><li class="tab all"><div class="label">ALL</div></li><li class="tab playlists"><div class="label">PLAYLISTS</div></li><li class="tab publishers"><div class="label">PUBLISHERS</div></li><li class="tab categories"><div class="label">CATEGORIES</div></li></ul><div class="pending-content content pending"></div><div class="all-content content all"></div><div class="playlists-content content playlists"></div><div class="publishers-content content publishers"></div><div class="categories-content content categories"><div class="label">GUIDE CATEGORIES</div><div class="categories-list"></div><div class="label">FEED IDS</div><div class="feed-ids"></div><div class="label">FEED CATEGORIES</div><div class="feed-cats"></div></div><div class="spinner" style="display:none"></div></div>'}
function oh(a){return'<div class="playlist"><div class="title">'+S(a.name)+'</div><div class="controls"><div class="remove dark button">x</div></div></div>'}function ph(a){return'<div class="category button">'+S(a.name)+"</div>"}function qh(a){return'<div class="publisher">'+(a.M?'<img src="'+S(a.M)+'"/>':"")+'<div class="title">'+S(a.name)+'</div><div class="controls"><div class="remove dark button">x</div></div></div>'}
function rh(a){return'<div class="channel '+(a.N.Mc?"on":"off")+'"><div class="title">'+S(a.N.name)+'</div><div class="controls"><div class="fetch dark button">FETCH</div><div class="program dark button">PROG.</div><div class="remove dark button">x</div><div class="on dark button">ON</div><div class="off dark button">OFF</div></div>'+(a.N.Zf?'<div class="pending">'+S(a.N.Zf)+"</div>":"")+"</div>"}
function sh(a){return'<div class="collection"><div class="title">'+S(a.ff.name)+'</div><div class="controls">'+(a.ff.Zf?'<div class="pending">'+S(a.ff.Zf)+"</div>":"")+'<div class="fetch dark button">FETCH</div><div class="button dark remove">x</div></div></div>'}
function th(a){return(!a.Ac?'<div class="tabbed '+(a.td?"activity":"messages")+'"><ul class="tabs">'+(!a.td?'<li class="tab messages"><div class="label">MESSAGES</div></li>':"")+'<li class="tab activity"><div class="label">ACTIVITY</div></li>'+(a.td?'<li class="tab starred"><div class="label"><div class="heart"></div>\'d</div></li>':"")+"</ul>":"")+(!a.td&&!a.Ac?'<div class="messages-content content messages"><div class="loading loading-activity"><div class="loading-spinner"></div></div></div>':"")+
'<div class="activity-content content activity"><div class="loading loading-activity"><div class="loading-spinner"></div></div></div>'+(a.td&&!a.Ac?'<div class="starred-content content starred"><div class="loading loading-starred"><div class="loading-spinner"></div></div></div>':"")+'<div class="spinner" style="display:none"></div></div>'}
function uh(){return'<div class="tabbed"><ul class="tabs"><li class="tab comments"><div class="label">CONVERSATION</div></li><li class="tab tweets"><div class="label">TWEETS</div></li></ul><div class="comments-content content comments-holder"><div class="loading loading-activity"><div class="loading-spinner"></div></div></div><div class="tweets-content content tweet-holder"><div class="loading loading-starred"><div class="loading-spinner"></div></div></div></div>'}
function vh(a){return'<div class="list-media show"><div class="media"><div class="preview"><div class="thumb" style="background-image:url('+S(a.media.ub)+"); background-position: 50% "+S(a.media.Ni)+'%"></div><div class="title">'+S(a.media.name)+'</div><div class="stats"><div class="comment-count"><div class="icon"></div>'+S(a.media.ad)+'</div><div class="like-count"><div class="icon"></div>'+S(a.media.Qj)+'</div></div></div></div><div class="publisher">'+(a.media.ma?'<img src="'+S(a.media.ma.M)+
'"><div class="name">'+S(a.media.ma.name)+"</div>":"")+'<div class="list-play"><div class="icon"></div></div><div class="list-plus"><div class="icon"></div></div></div></div>'}
function wh(a){return'<div class="admin-media list-media"><div class="media"><div class="preview"><div class="thumb" style="background-image:url('+S(a.media.ub)+"); background-position: 50% "+S(a.media.Ni)+'%"></div><div class="title">'+S(a.media.name)+'</div><div class="published">'+S(a.kc)+'</div><div class="play"></div><div class="approve"></div><div class="remove"></div><div class="repos"></div></div></div><div class="publisher"><img src="'+S(a.media.ma.M)+'"><div class="name">'+S(a.media.ma.name)+
'</div><div class="duration">'+S(a.media.duration)+' seconds</div></div><div class="description">'+S(a.media.description)+"</div></div>"}function xh(a){return'<div class="option"><div class="percent"></div><div class="name">'+S(a.name)+'</div><div class="percent-number">'+S(a.qk)+"</div></div>"};function yh(a,b,c){u.call(this);this.target=a;this.handle=b||a;this.Uh=c||new hf(NaN,NaN,NaN,NaN);this.u=oe(a);this.B=new Se(this);H(this.handle,["touchstart","mousedown"],this.Hd,l,this)}s(yh,ed);var zh=E||oc&&G("1.9.3");n=yh.prototype;n.clientX=0;n.clientY=0;n.screenX=0;n.screenY=0;n.Ji=0;n.Ki=0;n.vc=0;n.wc=0;n.of=j;n.$b=l;n.Eh=0;n.Vj=0;n.Lj=l;n.Rd=l;n.i=ca("B");n.Di=ba("Ie");n.Ea=ba("of");
n.k=function(){yh.h.k.call(this);Zc(this.handle,["touchstart","mousedown"],this.Hd,l,this);Ve(this.B);zh&&this.u.releaseCapture();this.B=this.handle=this.target=k};function Ah(a){ia(a.Na)||(a.Na=tf(a.target));return a.Na}
n.Hd=function(a){var b="mousedown"==a.type;if(this.of&&!this.$b&&(!b||Kc(a))){Bh(a);if(0==this.Eh)if(this.dispatchEvent(new Ch("start",this,a.clientX,a.clientY,a)))this.$b=j,a.preventDefault();else return;else a.preventDefault();var b=this.u,c=b.documentElement,d=!zh;T(this.B,b,["touchmove","mousemove"],this.Fj,d);T(this.B,b,["touchend","mouseup"],this.ac,d);zh?(c.setCapture(l),T(this.B,c,"losecapture",this.ac)):T(this.B,b?b.parentWindow||b.defaultView:window,"blur",this.ac);E&&this.Lj&&T(this.B,
b,"dragstart",Gc);this.Ie&&T(this.B,this.Ie,"scroll",this.li,d);this.clientX=this.Ji=a.clientX;this.clientY=this.Ki=a.clientY;this.screenX=a.screenX;this.screenY=a.screenY;this.Rd?(a=this.target,b=a.offsetLeft,c=a.offsetParent,!c&&"fixed"==of(a,"position")&&(c=oe(a).documentElement),c?(oc?(d=Df(c),b+=d.left):Bc(8)&&(d=Df(c),b-=d.left),a=tf(c)?c.clientWidth-(b+a.offsetWidth):b):a=b):a=this.target.offsetLeft;this.vc=a;this.wc=this.target.offsetTop;this.Yf=Le(me(this.u));this.Vj=r()}else this.dispatchEvent("earlycancel")};
n.ac=function(a,b){Ve(this.B);zh&&this.u.releaseCapture();if(this.$b){Bh(a);this.$b=l;var c=Dh(this,this.vc),d=Eh(this,this.wc);this.dispatchEvent(new Ch("end",this,a.clientX,a.clientY,a,c,d,b||"touchcancel"==a.type))}else this.dispatchEvent("earlycancel");("touchend"==a.type||"touchcancel"==a.type)&&a.preventDefault()};
function Bh(a){var b=a.type;"touchstart"==b||"touchmove"==b?a.init(a.ea.targetTouches[0],a.currentTarget):("touchend"==b||"touchcancel"==b)&&a.init(a.ea.changedTouches[0],a.currentTarget)}
n.Fj=function(a){if(this.of){Bh(a);var b=(this.Rd&&Ah(this)?-1:1)*(a.clientX-this.clientX),c=a.clientY-this.clientY;this.clientX=a.clientX;this.clientY=a.clientY;this.screenX=a.screenX;this.screenY=a.screenY;if(!this.$b){var d=this.Ji-this.clientX,f=this.Ki-this.clientY;if(d*d+f*f>this.Eh)if(this.dispatchEvent(new Ch("start",this,a.clientX,a.clientY,a)))this.$b=j;else{this.ae||this.ac(a);return}}c=Fh(this,b,c);b=c.x;c=c.y;this.$b&&this.dispatchEvent(new Ch("beforedrag",this,a.clientX,a.clientY,a,
b,c))&&(Gh(this,a,b,c),a.preventDefault())}};function Fh(a,b,c){var d=Le(me(a.u)),b=b+(d.x-a.Yf.x),c=c+(d.y-a.Yf.y);a.Yf=d;a.vc+=b;a.wc+=c;b=Dh(a,a.vc);a=Eh(a,a.wc);return new ke(b,a)}n.li=function(a){var b=Fh(this,0,0);a.clientX=this.clientX;a.clientY=this.clientY;Gh(this,a,b.x,b.y)};function Gh(a,b,c,d){a.bh(c,d);a.dispatchEvent(new Ch("drag",a,b.clientX,b.clientY,b,c,d))}
function Dh(a,b){var c=a.Uh,d=!isNaN(c.left)?c.left:k,c=!isNaN(c.width)?c.width:0;return Math.min(d!=k?d+c:Infinity,Math.max(d!=k?d:-Infinity,b))}function Eh(a,b){var c=a.Uh,d=!isNaN(c.top)?c.top:k,c=!isNaN(c.height)?c.height:0;return Math.min(d!=k?d+c:Infinity,Math.max(d!=k?d:-Infinity,b))}n.bh=function(a,b){this.Rd&&Ah(this)?this.target.style.right=a+"px":this.target.style.left=a+"px";this.target.style.top=b+"px"};
function Ch(a,b,c,d,f,g,i,m){Fc.call(this,a);this.clientX=c;this.clientY=d;this.Hl=f;this.left=ia(g)?g:b.vc;this.top=ia(i)?i:b.wc;this.Sl=b;this.jj=!!m}s(Ch,Fc);function Hh(){u.call(this);this.md=[];this.Uk=[];this.Ed=[]}s(Hh,ed);n=Hh.prototype;n.Nh=l;n.Oh=l;n.Cf=l;n.Di=ba("Ie");n.init=function(){if(!this.Cf){for(var a,b=0;a=this.md[b];b++)Ih(this,a);this.Cf=j}};function Ih(a,b){a.Nh&&(H(b.element,"mousedown",b.bi,l,b),a.qg&&J(b.element,a.qg));a.Oh&&a.tg&&J(b.element,a.tg)}
n.Hd=function(a,b){if(!this.wa)if(this.wa=b,this.dispatchEvent(new Jh("dragstart",this,this.wa))==l)this.wa=k;else{var c=b.uc,d;a:switch(d=c.cloneNode(j),c.tagName.toLowerCase()){case "tr":d=Q("table",k,Q("tbody",k,d));break a;case "td":case "th":d=Q("table",k,Q("tbody",k,Q("tr",k,d)));break a}this.kj&&J(d,this.kj);this.zc=d;d=oe(c);d.body.appendChild(this.zc);var f=this.zc,g=sf(c),c=Af(c,"margin");g.x-=2*(c.left||0);g.y-=2*(c.top||0);f.style.position="absolute";f.style.left=g.x+"px";f.style.top=
g.y+"px";this.lb=new yh(f);this.lb.Di(this.Ie);H(this.lb,"drag",this.ci,l,this);H(this.lb,"end",this.ac,l,this);H(d.body,"selectstart",this.Mi);this.Rc=[];for(d=0;c=this.Uk[d];d++)for(var i,f=0;i=c.md[f];f++)for(var g=c,m=[i.element],t=this.Rc,x=0;x<m.length;x++){var A=m[x],B=sf(A),Z=U(A),B=new gf(B.y,B.x+Z.width,B.y+Z.height,B.x);t.push(new Kh(B,g,i,A));Lh(this,B)}this.tb||(this.tb=new gf(0,0,0,0));for(d=0;c=this.Ed[d];d++)c.hf=[],c.yi=c.e.scrollLeft,c.zi=c.e.scrollTop,f=sf(c.e),g=U(c.e),c.S=new gf(f.y,
f.x+g.width,f.y+g.height,f.x);for(d=0;g=this.Rc[d];d++)for(f=0;c=this.Ed[f];f++)Be(c.e,g.e)&&(c.hf.push(g),g.Dd=c);this.Rb=k;for(d=0;c=this.Ed[d];d++)H(c.e,"scroll",this.Xg,l,this);this.lb.Hd(a);a.preventDefault()}};
n.ac=function(a){var b=a.jj?k:this.Rb;if(b&&b.va){var c=a.clientX,a=a.clientY,d=Le(me(this.zc)),f=c+d.x,d=a+d.y,g;this.Jd&&(g=this.Jd(b.ob,b.S,f,d));this.dispatchEvent(new Jh("drag",this,this.wa,b.va,b.ob,b.e,c,a,f,d));b.va.dispatchEvent(new Jh("drop",this,this.wa,b.va,b.ob,b.e,c,a,f,d,g))}this.dispatchEvent(new Jh("dragend",this,this.wa));Zc(this.lb,"drag",this.ci,l,this);Zc(this.lb,"end",this.ac,l,this);Zc(oe(this.wa.uc).body,"selectstart",this.Mi);for(b=0;c=this.Ed[b];b++)Zc(c.e,"scroll",this.Xg,
l,this),c.hf=[];this.lb.$();xe(this.zc);delete this.wa;delete this.zc;delete this.lb;delete this.Rc;delete this.Rb};
n.ci=function(a){var b,c=Le(me(this.zc));b=new ke(a.clientX+c.x,a.clientY+c.y);var c=b.x,d=b.y,f=this.Rb,g;if(f){this.Jd&&f.va&&(g=this.Jd(f.ob,f.S,c,d));if(f.S.contains(b)&&g==this.Gg)return;f.va&&(this.dispatchEvent(new Jh("dragout",this,this.wa,f.va,f.ob,f.e)),f.va.dispatchEvent(new Jh("dragout",this,this.wa,f.va,f.ob,f.e,h,h,h,h,this.Gg)));this.Gg=g;this.Rb=k}if(this.tb.contains(b)){a:{for(var i=0;f=this.Rc[i];i++)if(f.S.contains(b))if(f.Dd){if(f.Dd.S.contains(b)){b=f;break a}}else{b=f;break a}b=
k}if((f=this.Rb=b)&&f.va)this.Jd&&(g=this.Jd(f.ob,f.S,c,d)),c=new Jh("dragover",this,this.wa,f.va,f.ob,f.e),c.Tk=g,this.dispatchEvent(c),f.va.dispatchEvent(new Jh("dragover",this,this.wa,f.va,f.ob,f.e,a.clientX,a.clientY,h,h,g));else if(!f){this.sa||(this.sa=new Kh(this.tb.clone()));a=this.sa.S;a.top=this.tb.top;a.right=this.tb.right;a.bottom=this.tb.bottom;a.left=this.tb.left;for(g=0;f=this.Rc[g];g++)b=f.S,f.Dd&&(f=f.Dd.S,b=new gf(Math.max(b.top,f.top),Math.min(b.right,f.right),Math.min(b.bottom,
f.bottom),Math.max(b.left,f.left))),f=k,c>=b.right?f=b.right>a.left?b.right:a.left:c<b.left&&(f=b.left<a.right?b.left:a.right),i=k,d>=b.bottom?i=b.bottom>a.top?b.bottom:a.top:d<b.top&&(i=b.top<a.bottom?b.top:a.bottom),f!==k&&i!==k&&(Math.abs(f-c)>Math.abs(i-d)?i=k:f=k),f===k?i!==k&&(i<=d?a.top=i:a.bottom=i):f<=c?a.left=f:a.right=f;this.Rb=10<=(a.right-a.left)*(a.bottom-a.top)?this.sa:k}}};n.Mi=da(l);
n.Xg=function(a){for(var b=0,c;c=this.Ed[b];b++)if(a.target==c.e){var d=c.zi-c.e.scrollTop,f=c.yi-c.e.scrollLeft;c.zi=c.e.scrollTop;c.yi=c.e.scrollLeft;this.sa&&this.Rb==this.sa&&(0<d?this.sa.S.top+=d:this.sa.S.bottom+=d,0<f?this.sa.S.left+=f:this.sa.S.right+=f);for(var g=0,i;i=c.hf[g];g++)i=i.S,i.top+=d,i.left+=f,i.bottom+=d,i.right+=f,Lh(this,i)}this.lb.li(a)};
function Lh(a,b){if(1==a.Rc.length)a.tb=new gf(b.top,b.right,b.bottom,b.left);else{var c=a.tb;c.left=Math.min(b.left,c.left);c.right=Math.max(b.right,c.right);c.top=Math.min(b.top,c.top);c.bottom=Math.max(b.bottom,c.bottom)}}n.k=function(){Hh.h.k.call(this);for(var a,b=0;a=this.md[b];b++)this.Nh&&(Zc(a.element,"mousedown",a.bi,l,a),this.qg&&K(a.element,this.qg)),this.Oh&&this.tg&&K(a.element,this.tg),a.$();this.md.length=0};
function Jh(a,b,c,d,f,g,i,m,t,x,A){Fc.call(this,a);this.Ql=b;this.Rl=c;this.Tl=d;this.Vl=f;this.Ul=g;this.clientX=i;this.clientY=m;this.um=t;this.vm=x;this.Tk=A}s(Jh,Fc);Jh.prototype.k=aa();function Mh(a,b){u.call(this);this.element=O(a);this.data=b;this.J=k;this.element||e(Error("Invalid argument"))}s(Mh,ed);n=Mh.prototype;n.uc=k;
n.bi=function(a){if(Kc(a)){var b=a.target;b&&(H(b,"mousemove",this.Jc,l,this),H(b,"mouseout",this.Jc,l,this),H(b,"mouseup",this.Of,l,this),this.uc=b,this.rg=new ke(a.clientX,a.clientY),a.preventDefault())}};n.Je=ba("J");n.Jc=function(a){var b=this.uc,c="mouseout"==a.type&&a.target==b;if(5<Math.abs(a.clientX-this.rg.x)+Math.abs(a.clientY-this.rg.y)||c)Zc(b,"mousemove",this.Jc,l,this),Zc(b,"mouseout",this.Jc,l,this),Zc(b,"mouseup",this.Of,l,this),this.J.Hd(a,this)};
n.Of=function(){var a=this.uc;Zc(a,"mousemove",this.Jc,l,this);Zc(a,"mouseout",this.Jc,l,this);Zc(a,"mouseup",this.Of,l,this);delete this.rg;this.uc=k};function Kh(a,b,c,d){this.S=a;this.va=b;this.ob=c;this.e=d}Kh.prototype.Dd=k;function Nh(){Hh.call(this)}s(Nh,Hh);function Oh(a,b){b.Je(a);a.md.push(b);a.Cf&&Ih(a,b)};function Ph(a){var b={};"rel"in b||(b.rel="nofollow");"target"in b||(b.target="_blank");var c=[],d;for(d in b)b.hasOwnProperty(d)&&b[d]&&c.push(Ga(d),'="',Ga(b[d]),'" ');var f=c.join("");return a.replace(Qh,function(a,b,c,d,x){a=[Ga(b)];if(!c)return a[0];a.push("<a ",f,'href="');d?(a.push("mailto:"),c=d,d=""):(x||a.push("http://"),(d=c.match(Rh))?(c=d[1],d=d[2]):d="");c=Ga(c);d=Ga(d);a.push(c,'">',c,"</a>",d);return a.join("")})}
var Rh=/^(.*)([:;,\.?\[\]])$/,Qh=RegExp("([\\S\\s]*?)(\\b(?:mailto:)?([\\w.+-]+@[A-Za-z0-9.-]+\\.(?:com|org|net|edu|gov|aero|biz|cat|coop|info|int|jobs|mobi|museum|name|pro|travel|arpa|asia|xxx|[a-z][a-z])\\b)|\\b(?:(https?|ftp)://+|www\\.)\\w[:;,\\.?\\[\\]\\w/~%&=+#-@!]*|$)","g");function Sh(){}s(Sh,Sf);ma(Sh);n=Sh.prototype;n.Bc=aa();n.j=function(a,b){kg(a);a.hb&=-256;pg(a,32,l);Sh.h.j.call(this,a,b);a.nc(b.value);return b};n.O=function(a){kg(a);a.hb&=-256;pg(a,32,l);return a.La().O("textarea",{"class":Uf(this,a).join(" "),disabled:!a.isEnabled()},a.Va||"")};n.Tb=function(a){return"TEXTAREA"==a.tagName};n.oc=la;n.Ef=function(a){return a.isEnabled()};n.Qc=la;n.na=function(a,b,c){Sh.h.na.call(this,a,b,c);if((a=a.a())&&1==b)a.disabled=c};n.Pa=la;
n.nc=function(a,b){a&&(a.value=b)};n.ga=da("goog-textarea");function Th(a,b,c){jg.call(this,a,b||Sh.b(),c);kg(this);this.Pc(j);a||(this.Va="")}s(Th,jg);var Uh=oc||F;n=Th.prototype;n.Ec=l;n.mb=0;n.Wh=0;n.ai=0;n.Ch=l;n.xe=l;n.kg=l;n.jg=l;function Vh(a){return a.vd.top+a.vd.bottom+a.Pg.top+a.Pg.bottom}function Wh(a){var b=a.ai,c=a.a();b&&(c&&a.xe)&&(b-=Vh(a));return b}function Xh(a){var b=a.Wh,c=a.a();b&&(c&&a.xe)&&(b-=Vh(a));return b}n.Ga=function(a){this.nc(String(a))};n.n=function(){return this.a().value};n.nc=function(a){Th.h.nc.call(this,a);this.resize()};
n.Ea=function(a){Th.h.Ea.call(this,a);this.a().disabled=!a};n.resize=function(){this.a()&&this.ge()};n.A=function(){Th.h.A.call(this);var a=this.a();jf(a,{overflowY:"hidden",overflowX:"auto",boxSizing:"border-box",MsBoxSizing:"border-box",WebkitBoxSizing:"border-box",MozBoxSizing:"border-box"});this.vd=Af(a,"padding");this.Pg=Df(a);T(T(T(T(this.i(),a,"scroll",this.ge),a,"focus",this.ge),a,"keyup",this.ge),a,"mouseup",this.Wj);this.resize()};
function Yh(a){if(!a.Ch){var b=a.a().cloneNode(l);jf(b,{position:"absolute",height:"auto",top:"-9999px",margin:"0",padding:"1px",border:"1px solid #000",overflow:"hidden"});a.La().u.body.appendChild(b);var c=b.scrollHeight;b.style.padding="10px";var d=b.scrollHeight;a.kg=d>c;b.style.borderWidth="10px";a.jg=b.scrollHeight>d;b.style.height="100px";100!=b.offsetHeight&&(a.xe=j);xe(b);a.Ch=j}var b=a.a(),c=a.a().scrollHeight,f=a.a(),d=f.offsetHeight-f.clientHeight;if(!a.kg)var g=a.vd,d=d-(g.top+g.bottom);
a.jg||(f=Df(f),d-=f.top+f.bottom);c+=0<d?d:0;a.xe?c-=Vh(a):(a.kg||(d=a.vd,c+=d.top+d.bottom),a.jg||(a=Df(b),c+=a.top+a.bottom));return c}function Zh(a,b){a.mb!=b&&(a.mb=b,a.a().style.height=b+"px")}function $h(a){a=a.a();a.style.height="auto";var b=a.value.match(/\n/g)||[];a.rows=b.length+1}
n.ge=function(){if(!this.Ec){var a=l;this.Ec=j;var b=this.a(),c=this.mb;if(b.scrollHeight){var d=l,f=l,g=Yh(this),i=b.offsetHeight,m=Wh(this),t=Xh(this);m&&g<m?(Zh(this,m),d=j):t&&g>t?(Zh(this,t),b.style.overflowY="",f=j):i!=g?Zh(this,g):this.mb||(this.mb=g);!d&&(!f&&Uh)&&(a=j)}else $h(this);this.Ec=l;a&&(a=this.a(),this.Ec||(this.Ec=j,b=l,a.value||(a.value=" ",b=j),(f=a.scrollHeight)?(g=Yh(this),d=Wh(this),i=Xh(this),!(d&&g<=d)&&!(i&&g>=i)&&(i=this.vd,a.style.paddingBottom=i.bottom+1+"px",Yh(this)==
g&&(a.style.paddingBottom=i.bottom+f+"px",a.scrollTop=0,f=Yh(this)-f,f>=d?Zh(this,f):Zh(this,d)),a.style.paddingBottom=i.bottom+"px")):$h(this),b&&(a.value=""),this.Ec=l));c!=this.mb&&this.dispatchEvent("resize")}};n.Wj=function(){var a=this.a(),b=a.offsetHeight;a.filters&&a.filters.length&&(a=a.filters.item("DXImageTransform.Microsoft.DropShadow"))&&(b-=a.offX);b!=this.mb&&(this.mb=this.ai=b)};function ai(a,b,c,d,f,g,i){X.call(this);this.Bb=Ob();this.Sa=a;this.De=b;this.ag=c;this.eg=d;this.df=f.categories;this.pj=f.feed_categories;this.rj=f.feed_id;this.ug=g||k;this.xc=i||k;this.nf=this.Bb?new Nh:k;this.cc={pending:l,all:l};this.R=["pending","all","playlists","publishers","categories"]}s(ai,X);var bi="top_rated top_favorites most_shared most_recent most_discussed most_responded recently_featured on_the_web most_viewed".split(" "),ci="All Film Autos Music Animals Sports Travel Games Videoblog People Comedy Entertainment News Howto Education Tech Nonprofit Movies Shows Shortmov".split(" ");
n=ai.prototype;
n.t=function(a){ai.h.t.call(this,a);a.innerHTML="";a.scrollTop=0;Oe(a,nh);var b=P("pending-content",a);v(this.De,function(a){di(this,b,a)},this);this.uk=P("playlists-content",a);v(this.ag,this.Kg,this);this.yk=P("publishers-content",a);v(this.eg,this.Lg,this);this.fj=P("categories-list",a);this.ih=P("feed-ids",a);this.qj=P("feed-cats",a);y("/admin/_categories",q(function(a){a=D(a.target);v(a,function(a){ei(this,a,"category",Xa(this.df,a.id)||!this.df.length)},this)},this));v(ci,function(a){ei(this,a,
"feed_category",Xa(this.pj,a))},this);v(bi,function(a){ei(this,a,"feed_id",this.rj==a)},this);this.resize()};
n.A=function(){ai.h.A.call(this);this.ja=P("input",this.a());var a=new ag(this.ja),b=new Qg(this.ja);this.Ha=P("tabs",this.a());this.w="pending";var c=l;T(T(T(T(this.i(),window,"resize",xa(I,q(this.resize,this))),a,"key",q(function(a){"13"==a.keyCode&&fi(this,this.ja.value)},this)),b,"after_paste",q(function(){fi(this,this.ja.value)},this)),this.Ha,"click",q(function(a){a=Je(a.target,"li");this.Hb(a)},this));T(this.i(),this.a(),"scroll",q(function(){if(this.Sa&&!c&&!this.cc[this.w]&&("pending"==this.w||
"all"==this.w)&&this.a().scrollTop+se().height>this.a().scrollHeight-this.a().clientTop){c=j;var a=P("spinner",this.a());V(a,j);var b="pending"==this.w?this.De:this.Ze;y("/admin/_media/collection/"+this.Sa+"?offset="+b.length+("pending"==this.w?"&pending=1":""),q(function(g){c=l;g=Fd(Yd(g.target)).medias;g=Ta(g,function(a){return new gb(a)});ab(b,g);var i=P(this.w+"-content",this.a());v(g,function(a){di(this,i,a)},this);this.cc[this.w]=!g.length;M(a,"finished",!g.length)},this))}},this));this.resize()};
n.resize=function(){vf(this.a(),se().height-40)};
function fi(a,b){var c;c=b.match("(?:(https?|ftp)://+|www\\.)\\w[:;,\\.?\\[\\]\\w/~%&=+#-@!]*");c=c!=k?c[0]:"";a.Sa&&c&&(a.ja.disabled="disabled",y("admin/_add/collection/"+a.Sa,q(function(a){this.ja.value="";this.ja.disabled="";a=D(a.target);if("media"==a.type){var b=sb(rb.b(),a.data);Va(this.De,function(a){return a.id==b.id})||(this.De.push(b),a=P("pending-content",this.a()),di(this,a,b,j),this.Hb(qe("li","pending",h)[0]))}else if("playlist"==a.type){var c=a.data;Va(this.ag,function(a){return a.id==
c.id})||(this.ag.push(c),this.Kg(c),this.Hb(qe("li","playlists",h)[0]))}else if("publisher"==a.type){var i=a.data;i&&!Va(this.eg,function(a){return a.id==i.id})&&(this.eg.push(i),this.Lg(i),this.Hb(qe("li","publishers",h)[0]))}},a),"POST","url="+c))}
n.Hb=function(a){v(this.R,function(b){M(this.Ha.parentElement,b,L(a,b));this.w=L(a,b)?b:this.w},this);this.Sa&&!this.Ze&&y("/admin/_media/collection/"+this.Sa,q(function(a){a=Fd(Yd(a.target)).medias;this.Ze=Ta(a,function(a){return new gb(a)});var c=P("all-content",this.a());v(this.Ze,function(a){di(this,c,a)},this)},this))};
n.Kg=function(a){var b=R(oh,{name:a.name});this.uk.appendChild(b);var c=P("remove",b);T(this.i(),c,"click",function(){y("admin/_remove/collection/"+this.Sa,q(function(){xe(b)},this),"POST","pub_id="+a.id)})};n.Lg=function(a){var b=R(qh,{name:a.name||a.id,M:a.picture});this.yk.appendChild(b);var c=P("remove",b);T(this.i(),c,"click",function(){y("admin/_remove/collection/"+this.Sa,q(function(){xe(b)},this),"POST","pub_id="+a.id)})};
function ei(a,b,c,d){if("category"==c){var f=R(ph,{name:b.name,id:b.id});a.fj.appendChild(f)}else f=R(ph,{name:b,id:b}),("feed_id"==c?a.ih:a.qj).appendChild(f);M(f,"enabled",!!d);var g="category"==c?"cat_id="+b.id:"feed_id"==c?"feed_id="+b:"feed_cat="+b;T(a.i(),f,"click",function(){"feed_id"==c&&v(ye(this.ih),function(a){K(a,"enabled")});var a=je(f,"enabled");y("admin/_edit/collection/"+this.Sa,pb(),"POST",g+"&enabled="+a)})}
function di(a,b,c,d){var f=R(wh,{media:c,kc:ob(c)});d?we(b,f,0):b.appendChild(f);a.Bb&&(b=a.nf,d=new Mh(f,h),Oh(b,d));var b=new yh(P("repos",f)),g=P("thumb",f),d=P("play",f),i=P("approve",f),m=P("remove",f);b.bh=function(a,b){var c=b-24;-50<=c&&50>=c&&jf(g,"background-position-y",50-c+"%")};T(T(T(T(a.i(),b,"end",function(){var a=(g.style[Na("background-position")]||"").split(" ")[1],a=a.substring(0,a.length-1);y("/admin/_posthumb",pb(),"POST","media="+c.id+"&pos="+a)}),d,"click",q(a.rk,a,c)),i,"click",
q(a.Ng,a,c,j,f)),m,"click",q(a.Ng,a,c,l,f));I(xa(J,f,"show"))}n.Qf=function(a,b){y("/admin/_addprogram",q(function(b){b=Fd(Yd(b.target));b=new Ib(b);a.c(Ub,b)},this),"POST","channel="+a.id+"&media="+b.id)};n.Ng=function(a,b,c){var d=a.gj||this.Sa;y("admin/_media/collection",q(function(){J(c,"remove");I(function(){xe(c)},300);gi.b();var b;gi.b();b=Ge(O("toggle-pending"));hi(0,b-1);Y.b().c("approved",a,d)},this),"POST","col="+d+"&media="+a.id+"&approve="+b)};n.rk=function(a){a=Jb(a);ae.b().c(be,a)};function ii(a){X.call(this);this.Ub=a||k;this.Me=this.Rg=this.bl=this.Vg=0}s(ii,X);n=ii.prototype;n.O=function(){this.e=R(mh)};n.t=function(a){ii.h.t.call(this,a);var b=R(mh,{Ih:this.Ub?"Add a collection":"Add a Channel"});a.innerHTML=b.innerHTML};
n.A=function(){ii.h.A.call(this);this.ja=P("input",this.a());var a=new ag(this.ja);this.Ek=P("scrollable",this.a());this.Yd=P("admin-channels",this.a());this.rm=P("topics",this.a());this.$d=P("collections",this.a());this.Ug=O("admin-col-list");this.Mg=O("admin-list");C.b();this.Ub?y("/admin/_collections/"+this.Ub,q(function(a){a=D(a.target);V(this.$d.parentElement,!!a.length);v(a,this.Jg,this);this.Me&&hi(gi.b(),this.Me);this.Vg=U(this.$d.parentElement).height;this.resize()},this)):y("/admin/_channels",
q(function(a){a=D(a.target);V(this.Yd.parentElement,!!a.length);v(a,this.Ig,this);this.Rg=U(this.Yd.parentElement).height;this.resize()},this));T(this.i(),a,"key",q(function(a){"13"==a.keyCode&&this.ja.value&&(a=this.ja.value,this.ja.disabled="disabled",y(this.Ub?"/admin/_collections":"/admin/_channels",q(function(a){a=D(a.target);this.Ub?(V(this.$d.parentElement,!!a),this.Jg(a)):(V(this.Yd.parentElement,!!a),this.Ig(a));this.ja.disabled="";this.ja.value=""},this),"POST","name="+a+(this.Ub?"&cid="+
this.Ub:"")))},this))};
n.Ig=function(a){var b=new Tb(a),c=R(rh,{N:b});this.Yd.appendChild(c);H(c,"click",q(function(a){L(a.target,"on")||L(a.target,"off")?(M(c,"on",L(a.target,"on")),M(c,"off",!L(a.target,"on")),y("/admin/_channel/online/"+b.id,q(function(a){a.target.disabled="";a=D(a.target);M(c,"on",a.online);M(c,"off",!a.online)},this),"POST","online="+L(a.target,"on"))):L(a.target,"program")?y("/admin/_program",pb(),"POST","channel_id="+b.id):L(a.target,"fetch")?y("/admin/_fetch",function(){alert("Fetch began, but give it some time.")},"POST",
"channel_id="+b.id):L(a.target,"remove")&&confirm("Remove "+b.name+"?")?(V(c,l),y("/admin/_channels/"+b.id,function(a){D(a.target).deleted?xe(c):V(c,j)},"DELETE")):((new ii(b.id)).j(this.Ug),Y.b().c("navigate",this.Ug,l,b.name))},this))};
n.Jg=function(a){var b=R(sh,{ff:a});this.Me+=a.pending;this.$d.appendChild(b);H(b,"click",q(function(c){L(c.target,"remove")&&confirm("Remove "+a.name+"?")?(V(b,l),y("/admin/_collections/"+a.id,function(a){D(a.target).deleted?xe(b):V(b,j)},"DELETE")):L(c.target,"fetch")?y("/admin/_fetch",function(){alert("Fetch began, but give it some time.")},"POST","col_id="+a.id):y("/admin/_media/collection/"+a.id+"?pending=1",q(function(b){var b=Fd(Yd(b.target)),c=b.medias,c=Ta(c,function(a){return new gb(a)});
(new ai(a.id,c,b.playlists,b.publishers,b.categories)).j(this.Mg);Y.b().c("navigate",this.Mg,l,a.name)},this))},this));Y.b().subscribe("approved",function(c,d){if(d==a.id){var f=P("pending",b),g=Ge(f)-1;0>=g?(xe(b),Ca(b)):Ce(f,g)}},this)};n.resize=function(){vf(this.Ek,this.Rg+this.bl+this.Vg+110)};function ji(a,b,c,d,f,g){X.call(this);this.pg=!!a;this.rc=!!d;this.Df=!!f;this.Xd=!!b;this.dm=!!g;this.wi=!!c;this.value="";this.g=new Th(this.wi?"reply...":"Add to the conversation.");this.da=new xg("tweet");pg(this.da,16,j);this.fa=new xg("post");pg(this.fa,16,j);a=z.b().d;this.be=a.wk;this.Ne=a.si;this.Sb=new xg("add");this.hg=k;this.vb={};this.ua=[];this.ra=-1;this.pd=0;this.oi=this.al=k}s(ji,X);var ki=/@(\w+\s?\w*)/,li=/(\w+\s?\w*)/;n=ji.prototype;n.O=function(){this.e=R(gh)};
n.t=function(a){ji.h.t.call(this,a);J(a,"decorated");var b=Q("div","suggestions");a.appendChild(b);b=Q("div","highlighter");a.appendChild(b)};
n.A=function(){ji.h.A.call(this);this.g.j(qe("textarea",h,this.a())[0]);var a=this.g;a.Wh=70;a.resize();var a=new ag(this.g.zb()),b=P("popup",this.a());if(!this.wi&&!this.rc&&(Of(this,this.Sb),this.Sb.j(P("add-comment",this.a())),this.Sb.Ea(this.Df),T(this.i(),this.Sb,"action",q(this.bb,this)),this.Wg=P("comment-controls",this.a())))V(this.Wg,this.pg),M(this.a(),"show-controls",this.pg),this.Yl=P("input-holder",this.a()),Of(this,this.da),this.da.j(P("tweet-toggle",this.a())),z.b().d.P&&!z.b().d.je&&
y("/_twitter",q(function(a){a=D(a.target);this.Ne=this.Ne&&a.auth;this.Ui=a.auth_url;og(this.da,this.Ne)},this)),Of(this,this.fa),this.fa.j(P("fb-toggle",this.a())),z.b().d.P&&FB.api("/me/permissions",q(function(a){this.be=this.be&&!!a.data[0].publish_stream;og(this.fa,this.be)},this)),T(T(this.i(),this.fa,"action",q(this.fk,this)),this.da,"action",q(this.ok,this)),DESKTOP&&!IPAD&&(Zg(Yg.b(),this.da.a(),"top",{text:q(function(){return"Share on Twitter: "+(Yf(this.da)?"ON":"OFF")},this)}),Zg(Yg.b(),
this.fa.a(),"top",{text:q(function(){return"Share on Facebook: "+(Yf(this.fa)?"ON":"OFF")},this)})),z.b().d.subscribe(Nb,function(){og(this.da,j);z.b().d.je=j},this);this.eb=P("suggestions",this.a());this.zf=P("highlighter",this.a());b&&z.b().d&&z.b().d.P&&V(b,!z.b().d.yf&&!z.b().d.je&&this.pg);T(T(T(this.i(),this.g.a(),"focus",q(function(){b&&V(b,l);this.dispatchEvent("focus")},this)),a,"key",q(function(a){a.stopPropagation();Xg.b().c("hide");if("13"==a.keyCode||("32"==a.keyCode||"9"==a.keyCode)&&
-1<this.ra){if(this.ua.length&&this.ua.reverse()[this.ra]){a.preventDefault();var b=this.g.n().slice(this.rc?this.pd:0,this.g.a().selectionStart),b=b.split(" "),b=1<b.length?b[b.length-2]+" "+b[b.length-1]:b.pop(),f=this.ua[this.ra];this.vb[f.id]=f;this.rc?mi(this,b.match(li)[0]):mi(this,b.match(ki)[0]);this.g.a().focus();V(this.eb,l);this.ua=[];this.ra=-1;b=this.g.n().length;this.setSelectionRange(b,b)}else"13"==a.keyCode&&(a.preventDefault(),this.Sb.setActive(this.g.n()),this.bb(a));this.Xd&&mi(this)}else"27"==
a.keyCode&&this.ua.length?(V(this.eb,l),this.ua=[],b=this.g.n().length,this.setSelectionRange(b,b),this.ra=-1,this.vb={}):("38"==a.keyCode||"40"==a.keyCode)&&this.ua.length?(a.preventDefault(),b=Array.prototype.slice.call(ye(this.eb)),b.reverse()[this.ra]&&K(b[this.ra],"selected"),this.ra="38"==a.keyCode?Math.min(this.ra+1,this.ua.length-1):Math.max(this.ra-1,-1),-1!=this.ra&&J(b[this.ra],"selected")):I(q(function(){this.Sb.Ea(this.Df||!!this.g.n());var b=this.g.n().slice(this.rc?this.pd:0,this.g.a().selectionStart),
b=b.split(" "),b=1<b.length?b[b.length-2]+" "+b[b.length-1]:b.pop(),d=this.rc&&li.test(b)||this.Xd&&ki.test(b);V(this.eb,d);if("8"==a.keyCode)this.zf.innerHTML.match('<div class="token">.*</div>$');else if(d&&(b=this.rc?b.match(li):b.match(ki),this.ua=z.b().search(b[1]),this.ua.length)){var d=this.ua,f=b[0];this.eb.innerHTML="";V(this.eb,j);v(d.slice(0,5),function(a){var b=Q("div","suggestion",a.name);this.eb.appendChild(b);T(this.i(),b,"click",q(function(){this.vb[a.id]=a;mi(this,f);this.g.a().focus();
var b=this.g.n().length;this.setSelectionRange(b,b);V(this.eb,l);this.ua=[];this.ra=-1},this))},this)}this.g.n()||this.clear();this.Xd&&mi(this)},this))},this)),this.g,"resize",q(function(a){this.dispatchEvent(a)},this));b&&T(this.i(),b,"click",q(function(){V(b,l)},this));Y.b().subscribe("reply-comment",this.gg,this);Y.b().subscribe("reply-tweet",this.Ak,this)};
function mi(a,b){var c=a.g.n(),d=c,f=c,g=Oc(a.vb);v(dc(a.vb),function(a){var m=b&&0==Fa(b,((this.rc?"":"@")+a.name).substr(0,b.length))?b:a.name;d=d.replace(RegExp(m,"g"),'<div class="token">'+a.name+"</div> ");this.zf.innerHTML=d;this.value=f=f.replace(RegExp(m,"g"),"@["+a.id+":"+a.name+"]");var t=RegExp(m,"g").exec(c);t&&(Ya(g,a.id),this.pd=Math.max(t.index+t[0].length,this.pd));c=c.replace(RegExp(m,"g"),a.name)+" ";b&&this.g.Ga(c)},a);v(g,function(a){qb(this.vb,a)},a)}
n.gg=function(a,b){this.oi=a.id?a.id:a.toString();this.hg=b};n.Ak=function(a){this.cm=a.id;this.Ga((this.n()?this.n()+" ":"")+"@"+a.handle+" ");this.Fa(j);this.da.Ea(j);this.Fa(j);a=this.g.n().length;this.setSelectionRange(a,a)};n.setSelectionRange=function(a,b){if(this.g.a().setSelectionRange)this.g.a().focus(),this.g.a().setSelectionRange(a,b);else if(this.g.a().createTextRange){var c=this.g.a().createTextRange();c.collapse(j);c.moveEnd("character",b);c.moveStart("character",a);c.select()}};
n.n=function(){this.Xd&&dc(this.vb).length?mi(this):this.value=this.g.n();return this.value};n.Ga=function(a,b,c){og(this.fa,!!b);og(this.da,!!c);this.g.Ga(a);this.value=a;this.Sb.Ea(!!a)};n.clear=function(){this.g.Ga("");this.vb={};this.ua=[];this.zf.innerHTML="";this.eb.innerHTML="";V(this.eb,l);this.g.resize();this.pd=0};n.me=function(){return L(this.a(),"focused")};n.Fa=function(a){a&&this.g.a().focus();return M(this.a(),"focused",a)};
n.bb=function(){if(this.n()||this.Df)this.dispatchEvent({type:"add",Qg:q(function(a){var b=D(a.target);if(b.comment){var a=new ni(b.comment),c=b.tweet?new oi(b.tweet):k;if(b=sb(rb.b(),b.comment.media))b.c(jb,a),c&&b.c("add-tweet",c)}},this),gd:Yf(this.fa),zg:Yf(this.da),text:this.n(),C:this.oi,Ri:this.hg&&this.hg.id}),this.clear()};
n.fk=function(){Xg.b().c("tooltip",this.fa.a(),"top",{text:q(function(){return"Share on Facebook: "+(Yf(this.fa)?"ON":"OFF")},this)});!z.b().d.yf&&(!this.be&&Yf(this.fa))&&(V(O("overlay"),j),FB.login(q(function(a){V(O("overlay"),l);this.oj=!!a.authResponse;og(this.fa,this.oj)},this),{scope:"publish_stream"}))};
n.ok=function(){Xg.b().c("tooltip",this.da.a(),"top",{text:q(function(){return"Share on Twitter: "+(Yf(this.da)?"ON":"OFF")},this)});if(!z.b().d.je&&!this.Ne&&Yf(this.da))if(og(this.da,l),IPHONE||IPAD){var a=document.createElement("a");a.setAttribute("href",this.Ui);a.setAttribute("target","_blank");var b=document.createEvent("HTMLEvents");b.initEvent("click",j,j);a.dispatchEvent(b)}else a=window.open(this.Ui,"Twitter Login","height=300,width=550"),a.moveTo(screen.width/2-225,screen.height/2-150),
a.focus()};function ni(a){this.id=a.id;this.r=a.user?cc(z.b(),a.user):k;this.text=a.text;this.media=a.media?sb(rb.b(),a.media):k;this.time=a.time?hb(a.time+"Z"):new xb;this.Jb=Kb(this.time.getTime());this.C=a.parent_id;this.Cd=[];this.qb=l;a.replies&&v(a.replies,function(a){a=new ni(a);this.Cd.push(a)},this)}
function pi(a,b,c,d,f,g,i,m){var t=new ni({text:c,parentId:g});t.r=a;t.C=g||k;rb.b().get(b).yb(t);y("/_comment",q(function(a){a=D(a.target);t.id=a.comment.id;m&&m(t)},this),"POST","media_id="+b+"&text="+c+"&tweet="+f+"&facebook="+d+(g?"&parent_id="+g:"")+(i?"&to_user_id="+i:""));return t};function oi(a){this.id=a.id;this.r=a.user&&cc(z.b(),a.user);this.handle=a.handle;this.M=a.picture;this.text=a.text;this.time=hb(a.time+"Z")};function qi(a,b,c,d){X.call(this);this.f=a;this.Ua=b||[];this.cd={};this.Pd=!!c;this.Pb=d||[];this.Od={};this.ba=this.Il=0;this.ec={}}s(qi,X);n=qi.prototype;
n.t=function(a){qi.h.t.call(this,a);a.innerHTML="";a.scrollTop=0;J(this.a(),"ios-scroll");this.s=Q("div","loading",Q("div","loading-spinner"));this.a().appendChild(this.s);V(this.s,l);this.gc=Q("div","no-comments","Start the conversation.");this.a().appendChild(this.gc);this.v=Q("div","comments tweets");this.a().appendChild(this.v);T(T(this.i(),window,"resize",xa(I,q(this.resize,this))),this.v,"click",q(this.gf,this));this.Ua.length?(v(this.Ua,function(a){this.yb(a)},this),this.Ic=U(this.v).height):
this.Pd&&this.Pb.length?(v(this.Pb,function(a){this.sc(a)},this),this.Ic=U(this.v).height):V(this.s,j);this.Pd?(y("/_tweet/"+this.f.id+"?offset="+this.Pb.length,q(function(a){V(this.s,l);a=Fd(Yd(a.target));a=Ta(a,function(a){a=new oi(a);this.sc(a);return a},this);this.Ic=U(this.v).height;this.resize()},this)),this.f.subscribe("add-tweet",function(a){this.sc(a,j)},this)):(y("/_comment/"+this.f.id+"?offset="+this.Ua.length,q(function(a){V(this.s,l);a=Fd(Yd(a.target));a=Ta(a,function(a){a=new ni(a);
this.yb(a);return a},this);this.Ic=U(this.v).height;this.resize()},this)),this.f.subscribe(jb,this.yb,this),this.f.subscribe(kb,this.fg,this));this.resize(41)};
n.sc=function(a,b){this.Od[a.id]=a;V(this.gc,l);var c=Ph(a.text),c=c.replace(/#(\S+)/g,function(a,b){return'<a target="_blank" href="http://twitter.com/search?q=%23'+b+'">'+a+"</a>"}),c=c.replace(/@(\S+)/g,function(a,b){return'<a target="_blank" href="http://twitter.com/'+b+'">'+a+"</a>"}),c=R(eh,{wb:a,text:c,timestamp:Kb(a.time.getTime())});ri(Zb.b(),a.time,P("timestamp",c));b?we(this.v,c,0):this.v.appendChild(c);this.resize();V(Ae(this.v),j)};
n.gf=function(a){a=a.target;if(this.Pd){var b=Je(a,k,"tweet");b&&(b=this.Od[b.id.split("-")[1]],L(a,"reply")&&Y.b().c("reply-tweet",b))}else if(b=Je(a,k,"comment"))b=this.cd[b.id.split("-")[1]],L(a,"reply")?P("reply-textarea",this.ec[b.C?b.C:b.id]).focus():L(a,"remove")&&this.f.c(kb,b)};n.fg=function(a){xe(O("listcomment-"+a.id));Za(this.Ua,function(b){return b.id==a.id})};
n.yb=function(a){this.Ua.push(a);V(this.gc,l);var b=Ph(a.text),b=b.replace(/@\[(\d+):([a-zA-z\s]+)\]/g,function(a,b,f){return'<a href="#user:'+b+'">'+f+"</a>"}),b=R(fh,{prefix:"listcomment",Z:a,text:b,ni:a.r.id==z.b().d.id});ri(Zb.b(),a.time,P("timestamp",b));a.C?P("replies",this.ec[a.C]).appendChild(b):this.v.appendChild(b);a.id&&si(this,a,b);v(a.Cd,function(a){this.yb(a)},this);a.C||(this.v.scrollTop=this.v.scrollHeight);return b};
function si(a,b,c){a.cd[b.id]=b;c.id="listcomment-"+b.id;if(!b.C){a.ec[b.id]=c;var d=P("reply-input",c),c=P("reply-textarea",c);T(a.i(),c,"click",q(function(){if(!L(d,"decorated")){var a=new ji(l,j,j);a.j(d);a.gg(b,b.r);T(this.i(),a,"add",q(function(a){this.bb(a)},this))}},a))}}n.resize=function(a){this.ba=a||this.ba;vf(this.a(),se().height-42-this.ba-(Je(this.a(),k,"tabbed")?30:0))};function ti(a,b,c,d){X.call(this);this.f=this.I=a;this.Ua=b||[];this.Pb=c||[];this.Pd=!!d;this.bd=new qi(a,this.Ua);this.xg=new qi(a,h,j,this.Pb);this.g=new ji(j,j);this.R=["comments","tweets"];this.Ld={}}s(ti,X);n=ti.prototype;n.t=function(a){ti.h.t.call(this,a);J(a,"conversation");J(a,"ios-scroll");Oe(a,uh);J(a.firstChild,this.Pd?"tweets":"comments")};
n.A=function(){this.Ha=P("tabs",this.a());this.bd.j(P("comments-content",this.a()));this.xg.j(P("tweets-content",this.a()));Mf(this.g,this.a());T(T(T(T(T(T(T(this.i(),this.Ha,"click",q(function(a){a=Je(a.target,"li");this.Hb(a)},this)),this.g,"add",q(this.bb,this)),this.g,"resize",q(function(){L(this.a().firstChild,"comments")?this.bd.resize(41):this.xg.resize(41)},this)),window,"click",q(function(a){!Je(a.target,k,"comment-input")&&!this.g.n()&&this.g.Fa(l)},this)),P("no-comments",this.a()),"click",
q(this.ji,this)),pe("no-comments",this.a())[1],"click",q(this.ji,this)),window,"click",q(function(a){!Je(a.target,k,"comment-input")&&!this.g.n()&&this.g.Fa(l)},this));this.bd.resize(41);this.xg.resize(41)};n.ji=function(a){a.preventDefault();a.stopPropagation();this.g.Fa(j)};
n.bb=function(a){var b=pi(z.b().d,this.f.id,a.text,a.gd,a.zg,a.C,a.Ri,q(function(a){var b=this.Ld[a.time.getTime()];b.id="infocomment-"+a.id;si(this.bd,a,b)},this)),c=this.bd.yb(b);this.Ld[b.time.getTime()]=c;a.gd&&!a.C&&(FB.api("/me/feed","POST",{message:a.text,name:this.f.name,link:this.f.link,picture:this.f.ub,caption:"on XYLO",description:this.f.description},aa()),og(this.g.fa,l))};n.Hb=function(a){v(this.R,function(b){M(this.Ha.parentElement,b,L(a,b));this.w=L(a,b)?b:this.w},this)};function ui(a,b,c,d,f,g){X.call(this);v(a.Tf,function(a){var b=a.ha();b&&b.media.id==this.id?(this.tk=a,v(a.Cg,function(a){a.wg||(this.Nc[a.r.id]=a.r)})):this.Nc={}},a);this.f=this.I=a;this.dg=g||k;this.qe=c||k;this.Rh=d||k;this.Hj=l;this.jh=!b;this.ve=EMBED||!!f;this.Yi=[];this.Td={};this.Ua=[];this.cd={};this.ec={};this.Ld={};this.Pb=[];this.Od={};this.g=new ji(j,j,l,l,l,j);this.Lb=new xg("Star");pg(this.Lb,16,j);this.rf=new xg("Facebook");this.Ag=new xg("Twitter");this.yd=new xg("Play");this.mc=
new xg("Send");pg(this.mc,16,j);this.dd=new xg("Create Poll");this.ba=0}s(ui,X);n=ui.prototype;n.O=function(){this.e=R(ch,{media:this.f,Ac:EMBED})};n.t=function(a){ui.h.t.call(this,a);var b=R(ch,{media:this.f,description:this.f.description?Ph(this.f.description):"",kc:ob(this.f),Oj:this.qe?this.qe.id:k,Tj:!z.b().d.P,Ac:EMBED});a.innerHTML=b.innerHTML};
n.A=function(){ui.h.A.call(this);this.Dg=P("viewers",this.a());var a=P("picture",this.a()),b=P("ytvideo",this.a()),c=P("scrollable",this.a()),d=P("scrollable",a),f=P("publisher",this.a()),g=P("title",this.a()),i=P("links",this.a());this.s=P("loading",this.a());var m=a.firstChild;this.Yg=P("info-contents",this.a());this.Qa=P("user-poll",this.a());this.sm=P("tweet-holder",this.a());this.gb=P("tweets",this.a());this.Zb=P("dot-nav",this.a());this.v=P("comments",this.a());this.gc=P("no-comments",this.a());
Mf(this.g,this.a());this.Lb.j(P("star",this.a()));og(this.Lb,Qb(z.b().d,this.f));this.rf.j(P("facebook",this.a()));this.Ag.j(P("twitter",this.a()));this.yd.j(P("play",this.a()));this.mc.j(P("send",this.a()));this.dd.j(P("create-poll-button",this.a()));this.yg=new fd(5E3);this.wm=P("watch-with",this.a());this.ib=P("create-poll",this.a());this.Kb=P("send-media",this.a());this.Ka=P("fb-login",this.a());this.te=P("login-promo",this.a());M(this.a(),"mini",this.ve);V(this.s,z.b().d.P);V(this.dd.a(),z.b().d.Fg==
Pb);!this.jh||this.f.kh?vi(this,l,this.f.description,this.f.Ti,this.f.lg,this.f.Ta,this.f.qi):this.jh&&this.load();if(!z.b().d.P&&(J(this.Ka,"show"),J(this.te,"show"),J(this.a(),"logged-out"),T(this.i(),this.Ka,"click",q(this.login,this)),FB.XFBML.parse(),!CHECKED_LOGIN)){CHECKED_LOGIN=j;J(this.Ka,"spin");var t=this.Ka;FB.getLoginStatus(function(a){"connected"===a.status?y("/_login",q(function(a){200==Xd(a.target)&&(a=D(a.target),bc(z.b(),a.current_user),K(t,"show"),K(t,"spin"),z.b().c("logged-in"))},
this),"POST"):K(t,"spin")})}T(T(T(T(T(T(T(T(T(T(T(T(T(T(T(T(T(T(T(T(T(T(T(this.i(),window,"resize",xa(I,q(this.resize,this))),f,"click",q(function(){Y.b().c("media-list",this.f.ma.name,h,"/admin/_media/publisher/"+this.f.ma.id,this.f.ma.M,this.f.ma.description,this.f.ma.link,"/_publisher/"+this.f.ma.id)},this)),this.Lb,"action",q(function(){rb.b().c("star",this.f,Yf(this.Lb));y("/_star",h,"POST","media_id="+this.f.id+(!Yf(this.Lb)?"&delete=1":""))},this)),this.rf,"action",q(this.ek,this)),this.Ag,
"action",q(this.nk,this)),this.yd,"action",q(this.ik,this)),this.mc,"action",q(this.kk,this)),P("local",this.a()),"click",q(function(){V(P("link-select",this.a()),j);P("link-input",this.a()).select()},this)),this.dd,"action",q(this.Gk,this)),this.g,"add",q(this.bb,this)),this.gc,"click",q(function(a){a.preventDefault();a.stopPropagation();this.g.Fa(j)},this)),this.g,"focus",q(function(){this.resize(0,j)},this)),this.g,"resize",q(function(){this.resize()},this)),this.Zb,"click",q(function(a){L(a.target,
"dot")&&(wi(this,a.target),this.yg.stop())},this)),this.yg,hd,q(function(){var a=this.Wb&&(this.Wb.nextElementSibling!=h?this.Wb.nextElementSibling:ze(this.Wb.nextSibling))||P("dot",this.a());I(q(function(){wi(this,a)},this))},this)),window,"click",q(function(a){!Je(a.target,k,"comment-input")&&!this.g.n()&&(this.g.Fa(l),this.resize(0))},this)),m,"load",function(){V(m,j);I(function(){U(m).height<U(a).height+50&&J(m,"fix-height");U(m).width>2*U(a).width?J(m,"pan-left"):U(m).height>2*U(a).height&&J(m,
"pan-top");m.style.marginTop=-U(m).height/2+"px";m.style.marginLeft=-U(m).width/2+"px";J(m,"show")})}),c,"scroll",q(function(){a.style.top=c.scrollTop/2+"px"},this)),d,"scroll",q(function(){var d=P("ytvideo",this.a()),t=IPHONE&&10<c.scrollTop?0:((this.ve?100:120)-c.scrollTop)/100;xf(f,Math.min(1,Math.max(t,0)));xf(g,Math.min(1,Math.max(t,0)));xf(i,Math.min(1,Math.max(t,0)));xf(m,Math.min(0.5,Math.max(t,0.1)));d&&xf(d,Math.min(0.5,Math.max(t,0.1)));xf(b,Math.min(0.5,Math.max(t,0.1)));M(a,"scrolled",
10<c.scrollTop)},this)),this.v,"scroll",q(this.Dk,this)),this.v,"click",q(this.gf,this)),this.gb,"click",q(this.dl,this)),P("desc-link",this.a()),"click",q(function(){var b=je(a,"scrolled");(new Gf(c,[c.scrollLeft,c.scrollTop],[c.scrollLeft,b?this.ve?70:170:0],300)).play()},this));this.qe&&T(this.i(),P("prev-link",this.a()),"click",q(function(){Y.b().c("media-info",this.qe,j,h,this.g.n())},this));this.Rh&&this.g.Ga(this.Rh);DESKTOP&&!IPAD&&(Zg(Yg.b(),this.mc.a(),"left",{text:"Send"}),Zg(Yg.b(),this.rf.a(),
"left",{text:"Post to Facebook"}),Zg(Yg.b(),this.Ag.a(),"left",{text:"Tweet"}),Zg(Yg.b(),this.Lb.a(),"left",{text:"Save"}),Zg(Yg.b(),P("eye-icon",this.a()),"left",{text:"Seen by"}),Zg(Yg.b(),P("friends-icon",this.a()),"right",{text:"Visible by anybody"}));IPHONE&&new YT.Player(b,{height:"100%",width:"100%",videoId:this.f.ld,playerVars:{controls:0,showinfo:0}});this.f.subscribe(jb,function(a){xi(this,a,j)},this);this.f.subscribe(kb,this.fg,this);this.f.subscribe("add-tweet",function(a){this.sc(a,j)},
this);this.f.subscribe(lb,function(a,b,c){yi(this,a,!c)},this);ae.b().subscribe(ce,function(){K(this.yd.a(),"play-loading")},this);ae.b().subscribe("no-media",function(){K(this.yd.a(),"play-loading")},this);z.b().d.subscribe("set-starred",function(){og(this.Lb,Qb(z.b().d,this.f))},this);z.b().subscribe("logged-in",function(){this.te&&(K(this.te,"show"),I(q(function(){V(this.te,l)},this),600));this.g&&V(this.g.a(),j);this.a()&&K(this.a(),"logged-out");this.load(j)},this);this.resize()};
n.load=function(a){y("/_info/"+this.f.id,q(function(b){var c=Fd(Yd(b.target)),b=c.description,d=c.seen,f=c.tweets,g=c.comments,c=c.poll;a?c&&(this.f.qi=c,P("poll-options",this.Qa).innerHTML="",K(this.Qa,"voted"),zi(this,c)):vi(this,j,b,f,d,g,c)},this))};
function vi(a,b,c,d,f,g,i){V(a.s,l);c?(a.f.description=c,P("description",a.a()).innerHTML=Ph(c),V(P("scrollable",a.a()),j)):(V(P("desc-link",a.a()),l),V(P("scrollable",a.a()),l));f&&(a.Yi=Ta(f,function(a){a=b?cc(z.b(),a):a;a.id!=z.b().d.id&&(V(this.Dg,j),this.Hj=j,yi(this,a,l));return a},a));Nc(a.f.Nc,function(a){yi(this,a,j)},a);d&&(a.Pb=Ta(d,function(a){a=b?new oi(a):a;this.sc(a);this.Wb=this.Zb.firstChild;J(this.Wb,"selected");return a},a),d.length&&a.yg.start());c=[];g&&(a.v&&V(a.v.parentElement,
j),V(a.gc,!g.length),c=Ta(g,function(a){a=b?new ni(a):a;a.C||xi(this,a);return a},a));i&&(zi(a,i),a.f.qi=i);a.resize();b&&(a.f.Ti=a.Pb,a.f.Ta=c,a.f.lg=a.Yi,a.f.kh=j)}
n.Gk=function(){V(this.ib,j);if(!this.vk){var a=new xg("CREATE");a.j(P("submit-poll",this.a()));a.Ea(l);var b=P("poll-title",this.ib),c=P("option-input-1",this.ib),d=P("option-input-2",this.ib),f=P("option-inputs",this.ib);T(T(T(T(T(T(this.i(),a,"action",q(function(){V(this.ib,l);var a;a=f.children;var c=function(a,b){var c=a+(b.value?b.value+"|":"");b.value="";return c},d=this;if(a.reduce)a=d?a.reduce(q(c,d),""):a.reduce(c,"");else{var t="";v(a,function(a){t=c.call(d,t,a)});a=t}b.value&&a&&(y("/_poll",
q(function(a){a=D(a.target);zi(this,a)},this),"POST","media_id="+this.f.id+"&title="+b.value+"&options="+a),b.value="",V(this.dd.a(),l))},this)),new ag(b),"key",q(function(){I(q(function(){a.Ea(b.value&&c.value&&d.value)},this))},this)),new ag(c),"key",q(function(){I(q(function(){a.Ea(b.value&&c.value&&d.value)},this))},this)),new ag(d),"key",q(function(){I(q(function(){a.Ea(b.value&&c.value&&d.value)},this))},this)),P("add-option",this.ib),"click",q(function(){var a=Q("input",{type:"text",placeholder:"Option "+
(f.children.length+1)});f.appendChild(a)},this)),P("close",this.ib),"click",q(function(){V(this.ib,l)},this));this.vk=j}};
n.login=function(){J(this.Ka,"disabled");if(IPAD)return window.location.href="https://m.facebook.com/dialog/oauth?client_id="+FB_APP_ID+"&response_type=code&redirect_uri="+HOST_URL+"&scope=email",l;var a=P("message",this.Ka);FB.login(q(function(b){b.authResponse?(K(a,"show"),J(this.Ka,"disabled"),J(this.Ka,"spin"),y("/_login",q(function(a){200==Xd(a.target)&&(a=D(a.target),bc(z.b(),a.current_user),K(this.Ka,"show"),K(this.Ka,"spin"),z.b().c("logged-in"))},this),"POST")):K(this.Ka,"disabled")},this),
{scope:"email"});var b=Q("a",{href:"https://www.facebook.com/dialog/oauth?client_id="+FB_APP_ID+"&response_type=code&redirect_uri="+HOST_URL+"&scope=email"},"Click here if you have a popup blocker");a.innerHTML="";a.appendChild(b);J(a,"show");T(this.i(),a,"click",function(a){a.stopPropagation();window.onbeforeunload=pb()})};
function zi(a,b){V(a.dd.a(),l);var c=P("status",a.Qa),d=P("poll-options",a.Qa);a.Qa.id=b.id;Ce(c,b.title.toUpperCase()+" ("+b.vote_count+" VOTES)");v(b.options,function(a){var g=R(xh,{name:a.name,qk:Math.round(100*(a.vote_count/b.vote_count))+"%"});d.appendChild(g);a.voted?Ai(this,b,g):T(this.i(),g,"click",q(function(){z.b().d.P&&!L(this.Qa,"voted")&&(a.vote_count+=1,b.vote_count+=1,Ai(this,b,g),Ce(c,b.title.toUpperCase()+" ("+b.vote_count+" VOTES)"),y("/_poll",h,"POST","id="+a.id))},this));T(this.i(),
g,"click",q(function(){z.b().d.P||Yg.b().show(g,"top","tooltip",{text:q(da("You must login to vote"),this)})},this))},a);V(a.Qa,j);z.b().d.P||(J(a.Qa,"voted"),v(ye(d),function(a,c){var d=Math.round(parseInt(100*(b.options[c].vote_count/b.vote_count),10))+"%";Ce(P("percent-number",a),d);P("percent",a).style.width=d},a))}
function Ai(a,b,c){P("status",a.Qa);var d=P("poll-options",a.Qa);J(a.Qa,"voted");Ge(P("name",c));J(c,"selected");v(ye(d),function(a,c){var d=Math.round(parseInt(100*(b.options[c].vote_count/b.vote_count),10))+"%";Ce(P("percent-number",a),d);P("percent",a).style.width=d},a)}n.Ab=function(){return this.g.me()||!!this.g.al||!!this.g.n()};
function wi(a,b){if(b){v(ye(a.Zb),function(a){return K(a,"selected")});a.Wb=b;J(a.Wb,"selected");var c=Wa(ye(a.Zb),function(a){return a==b});(new Gf(a.gb,[a.gb.scrollLeft,a.gb.scrollTop],[320*c,a.gb.scrollTop],200)).play();a.resize()}}
n.bb=function(a){var b=pi(z.b().d,this.f.id,a.text,a.gd,a.zg,a.C,a.Ri,q(function(a){var b=this.Ld[a.time.getTime()];b.id="infocomment-"+a.id;Bi(this,a,b)},this)),c=xi(this,b);this.Ld[b.time.getTime()]=c;a.gd&&!a.C&&FB.api("/me/feed","POST",{message:a.text,name:this.f.name,link:this.f.link,picture:this.f.ub,caption:"on XYLO",description:this.f.description},aa());Sb.b().Z(this.f.id,a.gd,a.zg)};
n.sc=function(a,b){this.Od[a.id]=a;var c=Ph(a.text),c=c.replace(/#(\S+)/g,function(a,b){return'<a target="_blank" href="http://twitter.com/search?q=%23'+b+'">'+a+"</a>"}),c=c.replace(/@(\S+)/g,function(a,b){return'<a target="_blank" href="http://twitter.com/'+b+'">'+a+"</a>"}),c=R(eh,{wb:a,text:c,timestamp:Kb(a.time.getTime()),prefix:"infotweet"}),d=Q("div","dot");ri(Zb.b(),a.time,P("timestamp",c));b?(we(this.gb,c,0),we(this.Zb,d,0),10<ye(this.gb).length&&(xe(this.gb.lastChild),xe(this.Zb.lastChild),
wi(this,d))):(this.gb.appendChild(c),this.Zb.appendChild(d));this.resize();V(Ae(this.gb),j)};
function xi(a,b,c){a.Ua.push(b);V(a.gc,l);var d=Ph(b.text),d=d.replace(/@\[(\d+):([a-zA-z\s]+)\]/g,function(a,b,c){return'<a href="#user:'+b+'">'+c+"</a>"}),d=R(fh,{prefix:"infocomment",Z:b,text:d,ni:b.r.id==z.b().d.id});ri(Zb.b(),b.time,P("timestamp",d));b.C?P("replies",a.ec[b.C]).appendChild(d):a.v.appendChild(d);b.id&&Bi(a,b,d);v(b.Cd,function(a){xi(this,a,c)},a);!b.C&&c&&(a.v.scrollTop=a.v.scrollHeight,a.Yg.firstChild.scrollTop=a.Yg.firstChild.scrollHeight);return d}
function Bi(a,b,c){a.cd[b.id]=b;c.id="infocomment-"+b.id;if(!b.C){a.ec[b.id]=c;var d=P("reply-input",c),c=P("reply-textarea",c);T(a.i(),c,"click",q(function(){if(!L(d,"decorated")){var a=new ji(l,j,j,l,l,j);a.j(d);a.gg(b,b.r);T(this.i(),a,"add",q(function(a){z.b().d.P&&this.bb(a)},this))}z.b().d.P||Yg.b().show(d,"top","tooltip",{text:q(da("You must login to reply"),this)})},a))}}
function yi(a,b,c){if(!c&&a.Td[b.id])K(a.Td[b.id],"online");else if(b.id!=z.b().d.id){if(!a.Td[b.id]){var d=R(dh,{r:b});a.Td[b.id]=d;we(a.Dg,d,1);T(a.i(),d,"click",function(){Y.b().c("profile",b)});DESKTOP&&!IPAD&&Zg(Yg.b(),d,"top",{text:q(function(){return b.de()+(L(d,"online")?" is watching":" saw this")},a)})}V(a.Dg,j);M(a.Td[b.id],"online",c)}}n.dl=function(a){var a=a.target,b=Je(a,k,"tweet");b&&(b=this.Od[b.id.split("-")[1]],L(a,"reply")&&Y.b().c("reply-tweet",b))};
n.gf=function(a){var a=a.target,b=Je(a,k,"comment");b&&(b=this.cd[b.id.split("-")[1]],L(a,"reply")?P("reply-textarea",this.ec[b.C?b.C:b.id]).focus():L(a,"remove")&&this.f.c(kb,b))};n.fg=function(a){xe(O("infocomment-"+a.id));Za(this.Ua,function(b){return b.id==a.id})};
n.Dk=function(){M(this.v.parentElement,"top-grad",!!this.v.scrollTop);var a=this.v.style.maxHeight,b=se().height,a=a.substring(0,a.length-2),c=U(this.v).height;M(this.v.parentElement,"bottom-grad",this.v.scrollTop<this.v.scrollHeight-a-5&&c>=a&&640<b)};
n.resize=function(a,b){this.ba=a!=h?a:this.ba;if(this.a()){var c=se().height+(IPHONE&&SAFARI?61:0)-(EMBED?0:40)-this.ba-(Je(this.a(),k,"tabbed")?30:0)-(this.ve&&L(this.a(),"slide")?40:0);vf(this.a().firstChild,c);b&&I(q(function(){(new Gf(this.a().firstChild,[this.a().firstChild.scrollLeft,this.a().firstChild.scrollTop],[this.a().firstChild.scrollLeft,this.a().firstChild.scrollHeight],400)).play()},this),0)}};
n.ek=function(){V(O("overlay"),j);FB.ui({method:"feed",name:this.f.name,link:this.f.link,M:this.f.ub,caption:"on XYLO",description:this.f.description},function(){V(O("overlay"),l)});Ci(Sb.b(),this.f.id,j,l)};
n.nk=function(){var a="https://twitter.com/share?url="+this.f.link+"&text=I'm watching "+this.f.name+" "+this.f.link;if(IPHONE||IPAD){var b=document.createElement("a");b.setAttribute("href",a);b.setAttribute("target","_blank");a=document.createEvent("HTMLEvents");a.initEvent("click",j,j);b.dispatchEvent(a)}else b=window.open(a,"Tweet","height=320,width=550"),b.moveTo(screen.width/2-225,screen.height/2-150),b.focus(),Ci(Sb.b(),this.f.id,l,j)};
n.ik=function(){J(this.yd.a(),"play-loading");if(this.dg)C.b().L.Ai(this.dg),C.b().c("next-program",this.dg,j);else{var a=Jb(this.I);ae.b().c(be,a)}Y.b().c("navigate",O("info"),j)};
n.kk=function(){if(!L(this.Kb,"decorated")){var a=new ji(l,j,l,j,l,j);a.j(P("recipients",this.Kb));var b=new ji(l,l,l,l,j,j);b.j(P("send-message",this.Kb));T(T(this.i(),b,"add",q(function(c){var d=dc(a.vb);d.length&&(v(d,function(a){var b=new Di({from_user:z.b().d,to_user:a.id,text:c.text||"Sent you a video!",media:this.I});b.time=new xb;b.Jb=Kb(b.time.getTime());z.b().c("new-message",b);y("/_message",c.Qg,"POST","from_id="+z.b().d.id+"&to_id="+a.id+"&text="+b.text+"&media_id="+this.I.id)},this),
a.clear(),b.clear(),og(this.mc,l),V(this.Kb,l))},this)),P("close",this.Kb),"click",q(function(){V(this.Kb,l);og(this.mc,l)},this));J(this.Kb,"decorated")}V(this.Kb,Yf(this.mc))};function Ei(a,b,c,d,f,g){X.call(this);this.Bb=Ob();this.Yh=a||k;this.Qd=b||k;this.Lf={};this.ug=c||k;this.xc=d||k;this.dh=g||k;this.Rj=f||k;this.nf=this.Bb?new Nh:k;this.Ic=this.Gh=0}s(Ei,X);
Ei.prototype.t=function(a){Ei.h.t.call(this,a);a.innerHTML="";a.scrollTop=0;J(this.a(),"ios-scroll");(this.xc||this.ug)&&Fi(this);!this.xc&&this.dh&&y(this.dh,q(function(a){a=D(a.target);a.description&&this.sd?(P("description",this.sd).innerHTML=Ph(a.description),this.Gh=U(this.sd).height,this.resize()):a.description&&Fi(this)},this));this.s=Q("div","loading",Q("div","loading-spinner"));this.a().appendChild(this.s);V(this.s,l);L(this.a(),"starred")&&(this.Kc=Q("div","no-comments","Favorities will appear here."),
this.a().appendChild(this.Kc));this.ue=Q("div","medias");this.a().appendChild(this.ue);T(this.i(),window,"resize",xa(I,q(this.resize,this)));this.Qd?(V(this.s,j),y(this.Qd,q(function(a){V(this.s,l);a=Fd(Yd(a.target));a=Ta(a,function(a){return new gb(a)});v(a,this.We,this);this.Ic=U(this.ue).height;this.resize()},this))):this.Yh&&(v(this.Yh,this.We,this),this.Ic=U(this.ue).height,this.resize())};
Ei.prototype.We=function(a){this.Kc&&V(this.Kc,l);var b=R(vh,{media:a}),c=P("list-play",b),d=P("list-plus",b);this.ue.appendChild(b);if(this.Bb){var f=this.nf,g=new Mh(b,h);Oh(f,g)}T(T(T(this.i(),b,"click",q(function(){Y.b().c("media-info",a)},this)),c,"click",q(function(b){b.preventDefault();b.stopPropagation();b=Jb(a);ae.b().c(be,b)},this)),d,"click",function(b){b.preventDefault();b.stopPropagation();$b().c(Vb,a,j)});this.Lf[a.id]=b};
Ei.prototype.resize=function(){vf(this.a(),se().height+(IPHONE&&SAFARI?61:0)-(DESKTOP?40:0)-(Je(this.a(),k,"tabbed")?30:0))};function Fi(a){a.sd=R(kh,{ub:a.ug,description:a.xc?Ph(a.xc):"",link:a.Rj});a.a().appendChild(a.sd);a.Gh=U(a.sd).height;a.resize()}Ei.prototype.Qf=function(a,b){y("/admin/_addprogram",q(function(b){b=Fd(Yd(b.target));b=new Ib(b);a.c(Ub,b)},this),"POST","channel="+a.id+"&media="+b.id)};function Di(a){this.id=a.id;this.T=cc(z.b(),a.from_user);this.$k=cc(z.b(),a.to_user);this.text=a.text;this.media=a.media?"brkn.model.Media"==na(a.media)?a.media:sb(rb.b(),a.media):k;this.qb=a.read;this.Jb=(this.time=a.time?hb(a.time+"Z"):k)?Kb(this.time.getTime()):k}Di.prototype.ng=function(){y("/_message",pb(),"POST","id="+this.id+"&read=1");this.qb=j;z.b().d.c("read-message",this.T.id)};function Gi(a){return'<div class="message'+(a.sj?" flip":"")+'"><a href="#user:'+S(a.message.T.id)+'"><div class="picture" style="background:'+S(a.message.T.color)+'"><img src="'+S(a.message.T.M)+'"/></div></a><div class="body"><a class="user" href="#user:'+S(a.message.T.id)+'">'+S(a.message.T.name)+'</a>  <div class="texts"><div class="text">'+S(a.message.text)+'<div class="timestamp">'+S(a.message.Jb)+"</div></div></div></div></div>"}
function Hi(a){return'<div class="text">'+S(a.message.text)+'<div class="timestamp">'+S(a.message.Jb)+"</div></div>"};function Ii(a,b){X.call(this);this.qa=a||k;this.la=b||[];this.Nf={};this.g=new ji(l);this.ba=0;this.ta=this.qa.id==z.b().d.id;this.fb=new xg("Notifications");pg(this.fb,16,j);this.p=0}s(Ii,X);
Ii.prototype.t=function(a){Ii.h.t.call(this,a);this.ta?(this.fb.j(P("toggle",this.a())),this.Jl=P("container",this.a()),this.za=P("messages",this.a()),M(this.za,"inbox",this.ta),this.s=Q("div","spinner"),this.za.appendChild(this.s),V(this.s,l),this.Ib=Q("div","no-comments",this.ta?"No Messages":"Start a private conversation."),this.za.appendChild(this.Ib),V(this.Ib,l),T(T(T(this.i(),this.fb.a(),"click",q(function(){M(this.a(),"show",Yf(this.fb))},this)),this.za,"click",q(function(a){a.preventDefault();
a.stopPropagation()},this)),window,"click",q(function(a){Yf(this.fb)&&(Je(a.target,k,"inbox")||I(q(function(){K(this.a(),"show");og(this.fb,l)},this)))},this)),V(this.s,j),y("/_message/"+this.qa.id,q(function(a){V(this.s,l);a=D(a.target);this.p=0;this.la=Ta(a,function(a){a=new Di(a);this.p+=!a.qb?1:0;Ji(this,a);return a},this);V(this.Ib,!this.la.length);Ce(this.fb.a().firstChild,0<this.p?this.p.toString():"")},this))):(a.innerHTML="",a.scrollTop=0,this.za=Q("div","messages"),this.a().appendChild(this.za),
this.s=Q("div","spinner"),this.za.appendChild(this.s),V(this.s,l),this.Ib=Q("div","no-comments",this.ta?"No Messages":"Start a private conversation."),this.za.appendChild(this.Ib));this.pb=Q("div","no-comments","Load previous messages");this.za.appendChild(this.pb);V(this.pb,!this.ta&&10<=this.la.length);V(this.Ib,j);this.ta?(this.la=this.la.reverse(),z.b().d.subscribe("read-message",function(a){if((a=this.Nf[a])&&L(a,"unread"))K(a,"unread"),Ce(this.fb.a().firstChild,0<--this.p?this.p.toString():
"")},this)):(Mf(this.g,this.a()),T(T(T(T(T(this.i(),window,"click",q(function(a){!Je(a.target,k,"comment-input")&&!this.g.n()&&(this.g.Fa(l),this.resize(0))},this)),this.Ib,"click",q(function(a){a.preventDefault();a.stopPropagation();this.g.Fa(j)},this)),this.pb,"click",q(this.Sj,this)),this.g,"add",q(this.bb,this)),window,"resize",xa(I,q(this.resize,this))));Ra(this.la,function(a){Ji(this,a)},this);z.b().subscribe("new-message",function(a){if(a.T.id!=z.b().d.id&&(a.T.id==this.qa.id||a.$k.id==this.qa.id)){if(this.ta){var c=
j,d=this.Nf[a.T.id];d&&(c=!L(d,"unread"),xe(d));c&&Ce(this.fb.a().firstChild,0<++this.p?this.p.toString():"")}Ji(this,a,this.ta);this.resize()}},this);this.resize()};
Ii.prototype.Sj=function(){this.pb&&V(this.pb,l);V(this.s,j);y("/_message/"+this.qa.id+"?offset="+this.la.length,q(function(a){a=D(a.target);if(a.length){this.re=k;var b=Q("div","separator");we(this.za,b,3)}V(this.s,l);this.pb&&V(this.pb,!!a.length);Ra(a,function(a){a=new Di(a);this.la.push(a);Ji(this,a,j);return a},this);a.length&&(this.a().scrollTop=0,this.re=k,this.a().scrollTop=b.offsetHeight)},this))};
function Ji(a,b,c){V(a.Ib,l);a.pb&&V(a.pb,!a.ta&&10<=a.la.length);var d,f;if(!a.ta&&a.re&&a.re.T.id==b.T.id)d=R(Hi,{message:b}),P("texts",a.Sh).appendChild(d),b.media&&(f=R(vh,{media:b.media}),P("texts",a.Sh).appendChild(f)),d=P("timestamp",d);else{var g=R(Gi,{message:b,sj:b.T.id==z.b().d.id});a.re=b;a.Sh=g;c?we(a.za,g,3):a.za.appendChild(g);d=P("timestamp",g);M(g,"unread",!b.qb);if(a.ta){if(a.Nf[b.T.id]=g,T(a.i(),g,"click",q(function(){b.qb||(b.ng(),K(g,"unread"),Ce(this.fb.a().firstChild,0<--this.p?
this.p.toString():""));Y.b().c("profile",b.T)},a)),c){var i=O("mp3-1");i.load();i.play()}}else b.media&&(f=R(vh,{media:b.media}),P("texts",g).appendChild(f))}ri(Zb.b(),b.time,d);c||(a.a().scrollTop=a.a().scrollHeight);!a.ta&&(!b.qb&&b.id&&Y.b().lf==b.T.id)&&b.ng();f&&(c=P("list-play",f),d=P("list-plus",f),T(T(T(a.i(),f,"click",q(function(){Y.b().c("media-info",b.media)},a)),c,"click",q(function(a){a.preventDefault();a.stopPropagation();a=Jb(b.media);ae.b().c(be,a)},a)),d,"click",function(a){a.preventDefault();
a.stopPropagation();$b().c(Vb,b.media,j)}))}Ii.prototype.bb=function(a){var b=new Di({from_user:z.b().d,to_user:cc(z.b(),this.qa),text:a.text});b.time=new xb;b.Jb=Kb(b.time.getTime());Ji(this,b);y("/_message",a.Qg,"POST","from_id="+z.b().d.id+"&to_id="+this.qa.id+"&text="+a.text)};Ii.prototype.resize=function(a){this.ta?this.dispatchEvent("resize"):(this.ba=a||this.ba,vf(this.a(),se().height+(IPHONE&&SAFARI?61:0)-(DESKTOP?40:0)-41-this.ba-(Je(this.a(),k,"tabbed")?30:0)))};function Ki(a){return'<div class="user'+(a.media?" media":"")+'"><div class="name">'+S(a.r.name)+'</div><div class="picture" style="background:'+S(a.r.color)+'"><img src="'+S(a.r.M)+'"/></div>'+(a.timestamp?'<div class="timestamp">'+S(a.timestamp)+"</div>":"")+(a.media?'<div class="media"><div class="watched">LAST WATCHED </div><div class="watching">NOW WATCHING </div><a class="media-link">'+S(a.media.name)+"</a></div>":"")+"</div>"};function Li(a,b){X.call(this);this.Tc=a||k;this.Qe={};this.hc=[];this.Lc=[];this.rb=[];this.sb=!!b;this.ba=0}s(Li,X);
Li.prototype.t=function(a){Li.h.t.call(this,a);a.innerHTML="";a.scrollTop=0;J(a,"friendlist");J(a,"ios-scroll");this.sb||(a=Q("div","label show-all",Q("a",{href:"#friendlist:1"},"ALL FRIENDS >")),this.a().appendChild(a));this.Be=Q("div","label online-friends-label",this.sb?"ONLINE FRIENDS":Q("a",{href:"#friendlist:1"},"ONLINE FRIENDS"));V(this.Be,l);this.a().appendChild(this.Be);this.Wf=Q("div","online-friends");this.a().appendChild(this.Wf);this.Bd=Q("div","label",this.sb?"RECENTLY ONLINE":Q("a",
{href:"#friendlist:1"},"RECENTLY ONLINE"));V(this.Bd,l);this.a().appendChild(this.Bd);this.Ad=Q("div","recent-friends");this.a().appendChild(this.Ad);this.sb&&(this.ye=Q("div","label","OFFLINE FRIENDS"),V(this.ye,l),this.a().appendChild(this.ye),this.Pf=Q("div","offline-friends"),this.a().appendChild(this.Pf),this.sb&&this.resize(),T(this.i(),window,"resize",q(function(){this.sb&&I(q(function(){this.resize()},this))},this)));if(this.Tc)Pa.sort.call(this.Tc,function(a,b){return a.q&&!b.q?1:!a.q&&b.q?
-1:!a.q&&!b.q?0:a.q.getTime()<b.q.getTime()?1:-1}||db),v(this.Tc,function(a){Mi(this,a)},this),V(this.a(),j);else{var a=z.b(),b=q(function(a){this.Tc=a;Pa.sort.call(this.Tc,function(a,b){return a.q&&!b.q?1:!a.q&&b.q?-1:!a.q&&!b.q?0:a.q.getTime()<b.q.getTime()?1:-1}||db);v(this.Tc,function(a){Mi(this,a)},this);V(this.a(),j)},this);a.ph?b&&b(a.uf):y("/_friends",q(function(a){a=D(a.target);this.uf=Ta(a,function(a){return cc(this,a)},this);this.ph=j;b&&b(this.uf)},a))}z.b().subscribe(ac,this.fl,this)};
function Mi(a,b){if(!a.Qe[b.id]){var c=l,d=b.q?Kb(b.q.getTime()):k,f=R(Ki,{r:b,timestamp:d,media:b.jb});b.q&&432E5>r()-b.q.getTime()&&ri(Zb.b(),b.q,P("timestamp",f));b.Mc?(V(a.Be,j),J(f,"online"),v(a.hc,function(a,d){a.de()>b.de()&&(we(this.Wf,f,d),bb(this.hc,d,0,b),c=j)},a),c||(a.Wf.appendChild(f),a.hc.push(b))):d&&(3>a.rb.length||a.sb)?(v(a.rb,function(a,d){a.q&&(b.q&&a.q.getTime()<b.q.getTime())&&(we(this.Ad,f,d),bb(this.rb,d,0,b),c=j)},a),c||(a.Ad.appendChild(f),a.rb.push(b)),V(a.Bd,j),V(a.Ad,
j)):a.sb&&(!Va(a.rb,function(a){return b.id==a.id})&&!Va(a.Lc,function(a){return b.id==a.id}))&&(V(a.ye,j),v(a.Lc,function(a,d){a.q&&(b.q&&a.q.getTime()<b.q.getTime())&&(we(this.Pf,f,d),bb(this.Lc,d,0,b),c=j)},a),c||(a.Pf.appendChild(f),a.Lc.push(b)));a.sb||(V(a.Bd,!a.hc.length&&a.rb.length),V(a.Ad,!a.hc.length&&a.rb.length));a.Qe[b.id]=f;d=P("media-link",f);T(a.i(),f,"click",q(function(){Y.b().c("profile",b)},a));d&&T(a.i(),d,"click",q(function(a){a.stopPropagation();a.preventDefault();Y.b().c("media-info",
b.jb)},a))}}Li.prototype.fl=function(a){var b=this.Qe[a.id];b&&(xe(b),qb(this.Qe,a.id),Za(this.Lc,function(b){return b.id==a.id})&&V(this.ye,!!this.Lc.length),Za(this.hc,function(b){return b.id==a.id})&&V(this.Be,!!this.hc.length),Za(this.rb,function(b){return b.id==a.id})&&V(this.Bd,!!this.rb.length));Mi(this,a)};Li.prototype.resize=function(a){this.ba=a||this.ba;vf(this.a(),se().height+(IPHONE&&SAFARI?61:0)-42-this.ba-(Je(this.a(),k,"tabbed")?30:0))};function Ni(a,b){X.call(this);this.Ue=a;this.Sc=b||k;this.p=0;this.Fi=!b;this.cc=l;this.lh={};this.Zc={};this.fc={};this.Eb={};this.Pe={};this.vi={};this.Hg=[]}s(Ni,X);
Ni.prototype.t=function(a){Ni.h.t.call(this,a);a.innerHTML="";a.scrollTop=0;J(a,"stream");J(a,"ios-scroll");this.Fi&&(this.tf=Q("div","friendlist"),V(this.tf,l),this.a().appendChild(this.tf),a=Q("div","label","ACTIVITY"),this.a().appendChild(a));this.Xc=Q("div","activities");this.a().appendChild(this.Xc);this.s=Q("div","spinner");this.a().appendChild(this.s);V(this.s,l);this.Kc=Q("div","no-comments",this.Sc==z.b().d.id?"Your activity will appear here":"Friends' activity will appear here");this.a().appendChild(this.Kc);
this.Ue&&this.Ue.length&&Oi(this,this.Ue);this.Fi&&(this.sf=new Li(h,l),this.sf.j(this.tf));z.b().subscribe("new-activity",function(a){(this.Sc==a.user.id||!this.Sc&&a.user.id!=z.b().d.id)&&Pi(this,a,h,h,j)},this);T(T(this.i(),this.a(),"scroll",q(function(){!this.cc&&this.a().scrollTop+se().height>this.a().scrollHeight-60&&Qi(this)},this)),window,"resize",xa(I,q(this.resize,this)));this.resize()};
function Qi(a){V(a.s,j);y("/_activity"+(a.Sc?"/"+a.Sc:"")+"?offset="+a.p,q(function(a){this.lh[String(a.target.qd)]||(this.lh[String(a.target.qd)]=j,a=D(a.target).activities,this.cc=!a.length,M(this.s,"finished",this.cc),V(this.s,this.cc),Oi(this,a))},a))}
function Oi(a,b){a.Zc=[];a.fc=[];a.Eb=[];v(b,function(a){this.p++;switch(a.type){case "session":var a=a.session,b=a.channel_id in this.Zc?this.Zc[a.channel_id]:[];b.push(a);this.Zc[a.channel_id]=b;break;case "liked":this.fc[a.media.id]||(b=a.media.id in this.Eb?this.Eb[a.media.id]:[],b.push(a),this.Eb[a.media.id]=b,b=a.user.id in this.Pe?this.Pe[a.user.id]:[],b.push(a),this.Pe[a.user.id]=b);break;case "comment":a=a.comment,b=a.media.id in this.fc?this.fc[a.media.id]:[],b.push(a),this.fc[a.media.id]=
b,this.Eb[a.media.id]&&qb(this.Eb,a.media.id)}},a);Nc(a.Zc,function(a){Pi(this,h,a,"session")},a);Nc(a.fc,function(a){Pi(this,h,a,"comment")},a);Nc(a.Eb,function(a){1<a.length&&Pi(this,h,a,"liked")},a);Nc(a.Pe,function(a){Pi(this,h,a,"liked")},a)}
function Pi(a,b,c,d,f){V(a.Kc,l);var b=b||k,c=c||k,g=b?b.type:d,i=[],m=b?[cc(z.b(),b.user)]:[],t=b?hb(b.time+"Z"):k;c&&v(c,function(a){Va(m,function(b){return b.id==a.user.id})||m.push(cc(z.b(),a.user));var b=hb((a.time||a.tune_in)+"Z");t=t&&t.getTime()>b.getTime()?t:b;"session"==g?v(a.media,function(a){!this.fc[a.id]&&(!this.Eb[a.id]&&!Va(i,function(b){return b.id==a.id}))&&i.push(a)},this):"liked"==g&&!this.vi[a.media.id]&&(i.push(a.media),this.vi[a.media.id]=j)},a);switch(g){case "session":if(!a.Sc&&
2>m.length)return;var d=b?b.session:c[0],x=C.b().get(d.channel_id),i=b?b.session.media:i;3<i.length&&(i=i.slice(0,3));b=R(hh,{D:m,N:x,time:Kb(t.getTime()),Si:!!d.tune_out});break;case "comment":i=b?[b.comment.media]:[sb(rb.b(),c[0].media)];b=Ta(b?[b.comment]:c,function(a){a=new ni(a);a.text=Ph(a.text);a.text=a.text.replace(/@\[(\d+):([a-zA-z\s]+)\]/g,function(a,b,c){return'<a href="#user:'+b+'">'+c+"</a>"});return a});b=R(ih,{Ta:b.reverse().slice(0,3),D:m,media:i[0]});break;case "liked":i=b?[b.media]:
i;b=R(jh,{D:m,Zh:i.length,time:Kb(t.getTime())});break;default:return}if(i.length){ri(Zb.b(),t,P("timestamp",b));d=Wa(a.Hg,function(a){return a.time<t.getTime()});bb(a.Hg,d,0,{time:t,element:b});var A=P("medias",b);v(i,function(a){var b=sb(rb.b(),a),a=R(vh,{media:b}),c=P("list-play",a),d=P("list-plus",a);P("thumb",a);A.appendChild(a);T(T(T(this.i(),a,"click",function(){Y.b().c("media-info",b)}),c,"click",function(a){a.preventDefault();a.stopPropagation();a=Jb(b);ae.b().c(be,a)}),d,"click",function(a){a.preventDefault();
a.stopPropagation();$b().c(Vb,b,j)})},a);f?we(a.Xc,b,0):c?we(a.Xc,b,d):a.Xc.appendChild(b);I(xa(J,b,"show"))}}Ni.prototype.resize=function(){var a=se().height+(IPHONE&&SAFARI?61:0)-40-(Je(this.a(),k,"tabbed")?40:10);vf(this.a(),a);U(this.Xc).height<a&&Qi(this)};function Ri(a){X.call(this);this.qa=this.I=a;this.we=a.id==z.b().d.id;this.R=EMBED?[]:[this.we?"inbox":"messages","activity","starred"]}s(Ri,X);n=Ri.prototype;n.t=function(a){Ri.h.t.call(this,a);J(a,"profile");J(a,"ios-scroll");Oe(a,th,{td:this.we,Ac:EMBED})};
n.A=function(){EMBED||(this.we?y("/_star/"+this.qa.id,q(function(a){var a=D(a.target),a=Ta(a,function(a){return new gb(a)}),b=z.b().d;b.Ii=a;b.c("set-starred");this.pc=new Ei(a);this.pc.j(P("starred-content",this.a()))},this)):y("/_message/"+this.qa.id,q(function(a){var a=D(a.target),b=0,a=Ta(a,function(a){a=new Di(a);b+=!a.qb?1:0;return a},this);this.we&&Y.b().c("new-messages",b);this.la=new Ii(this.qa,a);T(this.i(),this.la,"resize",xa(I,q(this.Bk,this)));this.la.j(P("messages-content",this.a()))},
this)));y("/_activity/"+this.qa.id,q(function(a){a=D(a.target).activities;window.console.log(this.qa.id);this.sg=new Ni(a,this.qa.id);this.sg.j(P("activity-content",this.a()))},this));EMBED||(this.Ha=P("tabs",this.a()),T(this.i(),this.Ha,"click",q(function(a){a=Je(a.target,"li");this.Hb(a)},this)));rb.b().subscribe("star",function(a,b){if(b)this.pc.We(a);else{var c=this.pc,d=c.Lf[a.id];d&&(Ca(d),qb(c.Lf,a.id))}},this);T(this.i(),window,"resize",xa(I,q(this.xi,this)));this.xi()};
n.Hb=function(a){v(this.R,function(b){M(this.Ha.parentElement,b,L(a,b));this.w=L(a,b)?b:this.w},this)};n.xi=function(){var a=se().height+(IPHONE&&SAFARI?61:0)-41-(Je(this.a(),k,"tabbed")?30:0);vf(this.a(),a)};n.Bk=function(){var a=U(this.a()).height-80;this.ak&&vf(this.ak.a(),Math.floor(a/2));this.la&&vf(this.la.a(),Math.ceil(a/2))};function Si(){X.call(this);this.Bb=Ob();this.dj=new ii;this.R={};this.Mb=[];this.Oc=[];this.nb=this.Wc=0}s(Si,X);n=Si.prototype;
n.A=function(){Si.h.A.call(this);this.Yc=P("arrow",this.Nb);this.jf=O("sidebar-content");this.Xh=O("media-list");this.Ee=O("profile");this.oh=O("friendlist");this.$g=O("conversation");this.Nb=O("toolbar");this.Ha=P("tabs",this.a());this.Te=P("activities-count",this.a());this.Bf=P("inbox-count",this.a());var a=new ag(document);v(ye(this.Ha),function(a){var b=ie(a)[0];this.R[b]=a;this.Mb.push(b)},this);z.b().d.P?(Ti(this),this.pc=new Ri(z.b().d),this.pc.j(O("my-profile"))):(this.R.stream&&V(this.R.stream,
l),this.R.profile&&V(this.R.profile,l),this.R.login&&V(this.R.login,j));this.Uf();this.U&&(DESKTOP||!z.b().d.P||C.b().L.W&&C.b().L.ha())?(this.H=O("info"),this.w="info",Ui(this,"info","info")):(this.H=O("stream"),this.w="stream",Ui(this,"info","stream"));var b="left";v(this.Mb,function(a){var d=P(a,this.jf);a==this.w?b="right":J(d,b)},this);this.Oc=[this.H,""];J(this.H,"current");z.b().subscribe("logged-in",function(){if(this.Bb=Ob()){this.dj.j(O("admin"));var a=R(lh,{name:"ADMIN",className:"admin"});
this.Ha.appendChild(a);this.R.admin=a;this.Mb.push("admin")}},this);Vi(this);T(T(T(T(this.i(),P("back-button",this.Nb),"click",q(function(a){var b=this.Oc.shift();this.navigate(b[0],j,b[1]);Vi(this);a.stopPropagation()},this)),this.Ha,"click",q(function(a){var b=this.w,f=Je(a.target,"li"),g=ie(f)[0];"login"==g?this.U&&this.U.login():(Ui(this,this.w,g),J(f,"selected"),Vi(this),b!=this.w&&a.stopPropagation(),"stream"==g&&this.ei(0,j))},this)),this.Nb,"click",q(function(a){((a=Je(a.target,"li"))&&ie(a)[0]==
this.w||!a)&&(new Gf(this.H,[this.H.scrollLeft,this.H.scrollTop],[this.H.scrollLeft,0],300)).play()},this)),a,"key",q(function(a){a.ctrlKey&&"68"==a.keyCode&&je(this.a(),"dark")},this));DESKTOP&&gi.b().subscribe(Wi,function(a){M(this.a(),"toggled",a);I(q(function(){M(this.a(),"collapsed",!a)},this),!a?500:0)},this);Y.b().subscribe("navigate",this.navigate,this);Y.b().subscribe("new-activites",this.ei,this);Y.b().subscribe("new-messages",this.Zj,this);Y.b().subscribe("conversation",this.Ik,this);Y.b().subscribe("media-list",
this.Mk,this);Y.b().subscribe("media-info",this.Gi,this);Y.b().subscribe("friend-list",this.Lk,this);Y.b().subscribe("profile",this.Ok,this);C.b().subscribe("next-program",this.Uf,this);ae.b().subscribe(be,this.Uf,this);C.b().subscribe(Zd,this.ck,this);z.b().subscribe("logged-in",function(){EMBED||(V(this.R.stream,j),V(this.R.profile,j),V(this.R.login,l),Ti(this));this.pc=new Ri(z.b().d);this.pc.j(O("my-profile"));Vi(this)},this);DESKTOP&&gi.b().subscribe(Xi,function(a){M(this.a(),"admin",a);a?(gi.b().c(Wi,
j),Ui(this,this.w,"admin")):"admin"==this.w&&Ui(this,"admin","info")},this)};function Ti(a){y("/_activity",q(function(a){a=D(a.target);this.sg=new Ni(a.activities);this.sg.j(O("stream"));Y.b().c("new-activites",parseInt(a.new_count,10))},a))}n.ei=function(a,b){b&&(this.Wc=0,V(this.Te,l));this.Wc+=a;Ce(this.Te,this.Wc.toString());V(this.Te,!!this.Wc)};
n.Zj=function(a,b){b&&(this.nb=0,V(this.Bf,l));this.nb+=a;this.nb=Math.max(this.nb,0);Ce(this.Bf,this.nb.toString());document.title=0<this.nb?"("+this.nb.toString()+") XYLO":"XYLO";V(this.Bf,!!this.nb)};n.Uf=function(a){if(a=a||C.b().L.ha())if(this.Xb=a.media,!this.U||this.Xb.id!=this.U.I.id){var b=this.U&&this.U.g.n()?this.U.g.n():k,c=this.U?this.U.f:k;Ca(this.U);this.U=new ui(this.Xb,l,c,b,h,a);this.U.j(O("info"))}};
n.ck=function(a){a=a||C.b().L;if((this.Xb=a.ha()&&a.ha().media)&&(!this.U||this.Xb.id!=this.U.I.id))Ca(this.U),this.U=new ui(this.Xb),this.U.j(O("info")),this.Gi(this.Xb)};
function Ui(a,b,c){var d=P(c,a.jf),f=Qa(a.Mb,b),b=Qa(a.Mb,c),g=(f=f<b)?0:a.Mb.length-1,i=f?g<a.Mb.length:0<=g;for(g;i;g+=f?1:-1){var m=P(a.Mb[g],a.jf);if(f&&g>b||!f&&g<b)J(m,"right"),K(m,"left");else if(f&&g<b||!f&&g>b)M(m,"left",f),J(m,"right");else if(g==b){K(m,"right");K(m,"left");break}}a.w=c;bb(a.Oc,0,0,[a.H,""]);K(a.H,"current");a.H=d;J(a.H,"current");Vi(a)}
n.navigate=function(a,b,c){if(a==this.H)c&&Ce(P("back-title",this.Nb),c);else{var d=L(this.H,"screen");b?(K(this.H,"on"),K(this.H,"current"),J(a,"current"),this.H=a):(M(this.H,"on",!d),b=[this.H,Ge(P("back-title",this.Nb))],bb(this.Oc,0,0,b),K(this.H,"current"),this.H=a,J(this.H,"current"));M(this.Nb,"back",L(this.H,"slide"));c&&Ce(P("back-title",this.Nb),c);this.H!=this.Ee&&(Y.b().lf=k)}};n.Ik=function(a,b,c,d){(new ti(a,b,c,d)).j(this.$g);Y.b().c("navigate",this.$g,l,a.name)};
n.Mk=function(a,b,c,d,f,g,i){(new Ei(b,c,d,f,g,i)).j(this.Xh);Y.b().c("navigate",this.Xh,l,a,d,f)};n.Lk=function(){this.sf=new Li(h,j);this.sf.j(this.oh);Y.b().c("navigate",this.oh,l,"Friends")};n.Gi=function(a,b,c,d,f){if(this.U&&a.id==this.U.I.id){K(this.Nb,"back");for(a=this.Oc[0][0];a&&L(a,"slide");)a=this.Oc.shift();Ui(this,this.w,"info")}else{var g=O("media-info");(new ui(a,b,c,d,h,f)).j(g);Y.b().c("navigate",g,l,a.name)}DESKTOP&&gi.b().c(Wi,j)};
n.Ok=function(a){if(!this.cg||!(this.cg.I.id==a.id&&this.H==this.Ee))Y.b().lf=a.id,this.cg=new Ri(a),this.cg.j(this.Ee),Y.b().c("navigate",this.Ee,l,a.name),DESKTOP&&gi.b().c(Wi,j)};
function Vi(a){var b=Math.round(U(a.R[a.w]).width/2+(new ke(a.R[a.w].offsetLeft,a.R[a.w].offsetTop)).x);a.Yc.style.transform="translate3d("+b+"px, 0,0)";a.Yc.style.msTransform="translate3d("+b+"px, 0,0)";a.Yc.style.WebkitTransform="translate3d("+b+"px, 0,0)";a.Yc.style.MozTransform="translate3d("+b+"px, 0,0)";a.Yc.style.pl="translate3d("+b+"px, 0,0)"};function Yi(a){return'<div class="main"><div id="stage" class="stage"><div id="ytplayer"></div><div id="stagecover"><div class="message"><span></span><div class="spinner" style="display:none"></div></div><div class="fullscreen"></div><div class="expand"></div><div class="play" style="display: none"><div></div></div><div class="pause" style="display: none"><div></div></div></div><div id="logo"></div></div><div id="sidebar" class="toggled"><div id="toolbar"><div class="back"><div class="back-button"><div>BACK</div></div><div class="back-title"></div></div><ul class="tabs"><li class="info tab selected"><div class="label">NOW</div></li><li class="stream tab"><div class="label">STREAM<div class="activities-count" style="display:none"></div></div></li><li class="profile tab"><div class="label">HOME<div class="inbox-count" style="display:none"></div></div></li></ul><div class="radial-grad"></div><div class="arrow"></div></div><div id="sidebar-content"><div id="info" class="screen info"><div class="no-info">Pick a channel or play a story.</div></div><div id="stream" class="screen stream"><div class="loading loading-activity"><div class="loading-spinner"></div></div></div><div id="my-profile" class="screen profile"></div><div id="admin" class="screen admin"></div><div id="media-list" class="slide media-list"></div><div id="friendlist" class="slide friendlist"></div><div id="conversation" class="slide"></div>'+
(a.cj?'<div id="admin-col-list" class="slide admin"></div><div id="admin-list" class="slide admin-list"></div>':"")+'<div id="media-info" class="slide info"></div><div id="profile" class="slide profile"></div></div></div><div id="notify" class="notify"></div><div id="welcome" class="welcome" style="display:none"><div class="thanks"></div><div class="guide"></div><div class="friends"></div><div class="sidebar"></div><div class="close"></div></div></div>'};function Sb(){}ma(Sb);_gaq=[];Sb.prototype.init=function(){_gaq.push(["_setAccount","UA-38058655-1"]);_gaq.push(["_trackPageview"]);var a=document.createElement("script");a.type="text/javascript";a.async=j;a.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)};Sb.prototype.login=function(){_gaq.push(["_trackEvent","Users","Login",z.b().d.id])};
Sb.prototype.ef=function(a,b){a.W||(_gaq.push(["_trackEvent","Channel","OptOut",b.id]),_gaq.push(["_trackEvent","Channel","OptIn",a.id]))};Sb.prototype.Z=function(a,b,c){_gaq.push(["_trackEvent","Media","Comment",a.id]);_gaq.push(["_trackEvent","Users","Comment",z.b().d.id]);b&&_gaq.push(["_trackEvent","Facebook","Comment",z.b().d.id]);c&&_gaq.push(["_trackEvent","Twitter","Comment",z.b().d.id])};
function Ci(a,b,c,d){_gaq.push(["_trackEvent","Media","Share",b.id]);_gaq.push(["_trackEvent","Users","Share",z.b().d.id]);c&&_gaq.push(["_trackEvent","Facebook","Share",z.b().d.id]);d&&_gaq.push(["_trackEvent","Twitter","Share",z.b().d.id]);y("/_share",pb(),"POST","facebook="+c+"&twitter="+d)}ha("_gaq",_gaq);function gi(){w.call(this);this.sk=j;var a=O("controller");this.Hi=!a||L(a,"sidebar-toggled");this.th=a&&L(a,"guide-toggled");a=O("guide");this.pm=!!a&&L(a,"timeless");this.subscribe(Wi,ba("Hi"),this);this.subscribe(Zi,ba("th"),this);this.subscribe($i,ba("sk"),this)}s(gi,w);ma(gi);function hi(a,b){var c=O("toggle-pending");Ce(c,b);V(c,!!b)}var $i="play",Zi="toggle-guide",Wi="toggle-sidebar",Xi="toggle-admin";function aj(a){this.id=a.id;this.r=cc(z.b(),a.user);this.type=a.type;this.Z=a.comment?new ni(a.comment):k;this.qb=a.read;this.Jb=(this.time=a.time?hb(a.time+"Z"):k)?Kb(this.time.getTime()):k}aj.prototype.ng=function(){y("/_notification",pb(),"POST","id="+this.id+"&read=1");this.qb=j};function bj(){w.call(this);this.Vh=l}s(bj,w);ma(bj);bj.prototype.init=function(a){this.qm=a;a=(new appengine.Channel(unescape(a))).open();a.onmessage=q(this.hk,this);a.onclose=q(this.fi,this);H(window,"onbeforeunload",q(this.fi,this));return this};
bj.prototype.hk=function(a){var b=Fd(a.data);switch(b.type){case "viewer_change":var c=cc(z.b(),b.user),d=b.time&&hb(b.time+"Z");c.mf&&d&&c.mf.end(d);(a=b.last_channel_id&&C.b().get(b.last_channel_id))&&a.c("remove-viewer",c);c.jb&&c.jb.c(lb,c,a,j);var f=b.channel_id&&C.b().get(b.channel_id),a=b.media&&sb(rb.b(),b.media);f&&(d=d||new xb,d=new Rb(b.session_id,c,f,d),c.mf=d,f.c(Wb,d));a&&a.c(lb,c,f,b.online!=j);z.b().c(ac,c,b.online);break;case "notification":a=new aj(b.notification);z.b().c("new-notification",
a);break;case "new_comment":c=new ni(b.comment);if(c.r.id!=z.b().d.id&&(d=b.tweet?new oi(b.tweet):k,a=sb(rb.b(),b.comment.media)))a.c(jb,c),d&&a.c("add-tweet",d);break;case "new_message":a=new Di(b.message);z.b().c("new-message",a);Y.b().lf!=a.T.id&&eb.b().c("flash","messaged you",a.text,a.T,a.T.M,"#user:"+a.T.id);break;case "new_activity":z.b().c("new-activity",b.activity);b.activity.user.id!=z.b().d.id&&"session"!=b.activity.type&&Y.b().c("new-activites",1);break;case "update_programs":a=b.programs;
f=C.b().get(b.channel_id);v(a,function(a){f.c(Xb,a)},this);break;case "new_programs":b.channel&&(f=C.b().Ve(b.channel));v(b.programs,q(function(a){a=new Ib(a);if(f=f||C.b().get(b.channel_id))f.c(Ub,a),C.b().L&&C.b().L.ha(),!ae.b().ha()&&DESKTOP&&(C.b().c(Zd,f),C.b().c("next-program",a))},this));break;case "twitter_auth":z.b().d.c(Nb)}};
bj.prototype.fi=function(){if(!this.Vh){var a=C.b().L.W&&C.b().L.jb&&Math.floor(ae.b().getCurrentTime());DESKTOP&&y("/_settings",pb(),"POST","show_guide="+gi.b().th+"&show_sidebar="+gi.b().Hi+(a?"&current_seek="+a:""));this.Vh=j}};function Zb(){w.call(this);this.Tg=new fd(1E3);this.Pi=new fd(3E4);this.Qi=[];this.qf=[]}s(Zb,w);ma(Zb);Zb.prototype.init=function(){this.Tg.start();this.Pi.start();H(this.Tg,hd,q(function(){v(this.qf,function(a,b){a.time<r()&&(a.callback(),Pa.splice.call(this.qf,b,1))},this)},this));H(this.Pi,hd,q(function(){v(this.Qi,function(a){Ce(a.element,Kb(a.time.getTime()))},this)},this))};function ri(a,b,c){86400>(r()-b.getTime())/1E3&&a.Qi.push({time:b,element:c})}
function Yb(a,b,c){86400>(r()-b)/1E3&&a.qf.push({time:b,callback:c})};function cj(){w.call(this);this.em=[]}s(cj,w);ma(cj);cj.prototype.Jf=function(a){Nc(a,q(function(a,c){v(a,q(function(a){a=new Ib(a);C.b().tc[c]&&C.b().tc[c].Xe(a)},this))},this))};var dj=l;function ej(a){a.match(/[\d]+/g).length=3}
if(navigator.plugins&&navigator.plugins.length){var fj=navigator.plugins["Shockwave Flash"];fj&&(dj=j,fj.description&&ej(fj.description));navigator.plugins["Shockwave Flash 2.0"]&&(dj=j)}else if(navigator.mimeTypes&&navigator.mimeTypes.length){var gj=navigator.mimeTypes["application/x-shockwave-flash"];(dj=gj&&gj.enabledPlugin)&&ej(gj.enabledPlugin.description)}else try{var hj=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7"),dj=j;ej(hj.GetVariable("$version"))}catch(ij){try{hj=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6"),
dj=j}catch(jj){try{hj=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),dj=j,ej(hj.GetVariable("$version"))}catch(kj){}}};function lj(a,b,c,d,f,g,i,m){this.Qd=a;this.ej=b;this.xc=c;this.Qb=d;this.am=f;this.Wl=g;this.xm=i;this.mb=m;this.Xk=[];this.df=[];this.Ml=[];this.km=[]}lj.prototype.qh=ca("ej");lj.prototype.Ei=function(a){this.Qb=a;return this};lj.prototype.Ci=function(a){this.ic=a;return this};function mj(a){this.Qd=a;this.Rk=k}function nj(a){this.Qd=a;this.Rk=this.tm=k};function bh(a,b,c){lj.call(this,"http://www.youtube.com/watch?v="+encodeURIComponent(String(a)),b,c,"application/x-shockwave-flash");this.Xi=a;this.Xk=[new mj("http://i.ytimg.com/vi/"+a+"/default.jpg")];this.Ci(new nj("http://www.youtube.com/v/"+encodeURIComponent(String(a))+"&hl=en&fs=1&autoplay=1"))}s(bh,lj);
var ah=RegExp("http://(?:[a-zA-Z]{2,3}\\.)?(?:youtube\\.com/watch)(?:\\?(?:[\\w=-]+&(?:amp;)?)*v=([\\w-]+)(?:&(?:amp;)?[\\w=-]+)*)?(?:#[!]?(?:(?:(?:[\\w=-]+&(?:amp;)?)*(?:v=([\\w-]+))(?:&(?:amp;)?[\\w=-]+)*)|(?:[\\w=&-]+)))?[^\\w-]?","i");function oj(){X.call(this);this.Qk=new Si}s(oj,X);oj.prototype.t=function(a){oj.h.t.call(this,a);var b=R(Yi,{cj:Ob()});we(a,b,0)};
oj.prototype.A=function(){oj.h.A.call(this);SAFARI||(document.body.style.height=se().height+"px");this.Qk.j(O("sidebar"));z.b().d.gl||z.b();T(this.i(),document.body,"touchmove",function(a){Je(a.target,"div","ios-scroll")||a.preventDefault()});T(this.i(),window,"click",function(a){var b=Je(a.target,"a");if(b=b?b.href:k)if((b=b.match("#(.*):(.*)"))&&b.length)switch(a.preventDefault(),a.stopPropagation(),b[1]){case "user":a=z.b().get(b[2]);Y.b().c("profile",a);break;case "channel":a=C.b().get(b[2]);
C.b().c(Zd,a);break;case "info":a=rb.b().get(b[2]);Y.b().c("media-info",a);break;case "friendlist":Y.b().c("friend-list")}});y("/_presence",q(function(a){a=D(a.target);this.Gl=bj.b().init(a.token);var b=C.b();v(a.viewer_sessions,q(function(a){var b=cc(z.b(),a.user),f=z.b();Va(f.Ae,function(a){return a.id==b.id})||f.Ae.push(b);var f=this.tc[a.channel_id],g=a.media[0]?sb(rb.b(),a.media[0]):k,i=hb(a.tune_in+"Z"),m=a.tune_out?hb(a.tune_out+"Z"):k,a=new Rb(a.id,b,f,i,m);b.mf=a;if(f){f.Cg.push(a);f.c(Wb,
a);var t=f.ha()}else g&&(t=Jb(g));b.id!=z.b().d.id&&(t&&t.media.c(lb,b,f),z.b().c(ac,b,j))},b))},this))};
function pj(a){var b=O("login"),c=O("static-content"),d=O("pages"),f=L(b,"app");M(b,"expanded",a);O("uvTab")&&M(O("uvTab"),"show",f&&a);a?(f?c.style.bottom=-U(d).height-80+"px":c.style.top=Math.max(10,se().height-280)+"px",a=f?Math.min(se().height-100,c.scrollHeight+80):Math.min(se().height-435,c.scrollHeight+190),!f||f&&!b.scrollTop?(f=new Gf(b,[b.scrollLeft,b.scrollTop],[b.scrollLeft,a],300),J(b,"scrolling"),f.play(),H(f,"end",function(){K(b,"scrolling")})):b.scrollTop=a):(c.style.top="",c.style.height=
"",f?I(function(){K(b,"show")},200):c.className="")}
function qj(){function a(){I(function(){J(d,"hide");I(function(){V(O("homepage"),l);J(d,"app");J(c,"faq")},600)},600)}var b=O("fb-login"),c=O("static-content"),d=O("login");b&&J(b,"disabled");b&&J(b,"spin");y("/_login",q(function(b){if(200==Xd(b.target)){var b=D(b.target),c=b.current_user;bc(z.b(),b.current_user);z.b().c("logged-in");y("/_session"+(YOUTUBE_CHANNEL?"?ytc="+YOUTUBE_CHANNEL:""),function(b){if(200==Xd(b.target))if(b=D(b.target),b.error)Ce(O("error"),b.error),rj("Yikes...");else if(b.message){var d=
O("message");Ce(d,b.message);J(d,"show")}else{if(LOADED)bc(z.b(),b.current_user),z.b().c("logged-in");else{d=b.channels;b=b.programs;Pc(c)||bc(z.b(),c);C.b().Jf(d);cj.b().Jf(b);b=C.b();b.L=b.tc[c.current_channel]||b.Vb[0];if(b.L&&b.L.ha()&&!b.L.ha().ended)d=b.L;else if(b.pe&&b.pe.ha())d=b.pe;else{for(var f=d=k,x=0;!f&&x<b.Vb.length;)f=(d=!b.Vb[x].W?b.Vb[x]:k)&&d.ha(),x++;!d&&b.Vb.length&&(d=b.Vb[0])}b.L=d||b.L;Zb.b().init();(new oj).j(document.body);Sb.b().login()}if(!LOGIN_REQUIRED||z.b().d.P)K(document.body,
"login"),I(a)}else rj("Oops, try reloading")},"POST")}},this),"POST")}function rj(a){var b=O("fb-login"),c=P("power",b);J(c,"error");a&&(c=P("waitlist",b),Ce(c,a));K(b,"spin");J(b,"disabled");V(b,j);J(b,"show");J(b,"waitlist")}
ha("brkn.Mobile.staticInit",function(){var a=O("fb-login"),b=O("homepage"),c=O("login"),d=O("static-content"),f=O("pages"),g=O("footer"),i=l;J(b,"hide");var m=Q("img");m.src="/static/img/homepage.jpg";H(m,"load",function(){K(b,"hide");J(b,"show")});I(function(){V(a,j);I(xa(J,a,"show"),400)},100);H(c,"click",function(a){"static-scrollable"==a.target.id&&(a=L(c,"app"),i=l,a?pj(i):(a=new Gf(c,[c.scrollLeft,c.scrollTop],[c.scrollLeft,0],300),a.play(),H(a,"end",xa(pj,i))))});H(c,"scroll",function(){!L(c,
"scrolling")&&1>c.scrollTop&&(i=l,pj(i))});H(g,"click",function(a){var a=Je(a.target,k,"section"),b=L(c,"app");a&&(i=j,d.className=a.id,d.style.height=U(f).height+(b?80:220)+"px",pj(i))});H(window,"resize",xa(pj,i));Sb.b().init();IPHONE&&(J(document.body,"iphone"),J(document.body,"login"),window.onload=function(){I(function(){window.scrollTo(0,1)},1E3)})});
ha("brkn.Mobile.auth",function(){FB.getLoginStatus(function(a){"connected"===a.status?qj():H(O("fb-login"),"click",function(){window.location.href="https://m.facebook.com/dialog/oauth?client_id="+FB_APP_ID+"&response_type=code&redirect_uri="+HOST_URL+"&scope=email";return l})})});