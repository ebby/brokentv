function f(a){throw a;}var h=void 0,j=!0,k=null,l=!1;function ba(){return function(){}}function ca(a){return function(b){this[a]=b}}function da(a){return function(){return this[a]}}function ea(a){return function(){return a}}var m,fa=fa||{},ha=this;function ia(a,b){var c=a.split("."),d=ha;!(c[0]in d)&&d.execScript&&d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&ja(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}
function la(a){for(var a=a.split("."),b=ha,c;c=a.shift();)if(b[c]!=k)b=b[c];else return k;return b}function ma(){}function na(a){a.b=function(){return a.Nh?a.Nh:a.Nh=new a}}
function oa(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function ja(a){return a!==h}function pa(a){return"array"==oa(a)}function qa(a){var b=oa(a);return"array"==b||"object"==b&&"number"==typeof a.length}function p(a){return"string"==typeof a}function ra(a){return"function"==oa(a)}function sa(a){var b=typeof a;return"object"==b&&a!=k||"function"==b}function ta(a){return a[ua]||(a[ua]=++va)}var ua="closure_uid_"+Math.floor(2147483648*Math.random()).toString(36),va=0;
function wa(a,b,c){return a.call.apply(a.bind,arguments)}function xa(a,b,c){a||f(Error());if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function q(a,b,c){q=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?wa:xa;return q.apply(k,arguments)}
function ya(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=Array.prototype.slice.call(arguments);b.unshift.apply(b,c);return a.apply(this,b)}}var r=Date.now||function(){return+new Date};function za(a,b){var c=b||{},d;for(d in c)var e=(""+c[d]).replace(/\$/g,"$$$$"),a=a.replace(RegExp("\\{\\$"+d+"\\}","gi"),e);return a}function s(a,b){function c(){}c.prototype=b.prototype;a.h=b.prototype;a.prototype=new c;a.prototype.constructor=a};function u(){0!=Aa&&(this.Jl=Error().stack,Ba[ta(this)]=this)}var Aa=0,Ba={};u.prototype.Zd=l;u.prototype.aa=function(){if(!this.Zd&&(this.Zd=j,this.k(),0!=Aa)){var a=ta(this);delete Ba[a]}};u.prototype.k=function(){this.kj&&Ca.apply(k,this.kj);if(this.li)for(;this.li.length;)this.li.shift()()};function Da(a){a&&"function"==typeof a.aa&&a.aa()}function Ca(a){for(var b=0,c=arguments.length;b<c;++b){var d=arguments[b];qa(d)?Ca.apply(k,d):Da(d)}};function Ea(a,b){for(var c=1;c<arguments.length;c++)var d=String(arguments[c]).replace(/\$/g,"$$$$"),a=a.replace(/\%s/,d);return a}function Fa(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")}function Ga(a,b){var c=String(a).toLowerCase(),d=String(b).toLowerCase();return c<d?-1:c==d?0:1}
function Ha(a){if(!Ia.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(Ja,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(Ka,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(La,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(Ma,"&quot;"));return a}var Ja=/&/g,Ka=/</g,La=/>/g,Ma=/\"/g,Ia=/[&<>\"]/;function Na(a){var a=ja(h)?a.toFixed(h):String(a),b=a.indexOf(".");-1==b&&(b=a.length);b=Math.max(0,2-b);return Array(b+1).join("0")+a}
function Oa(a){return String(a).replace(/\-([a-z])/g,function(a,c){return c.toUpperCase()})};var Qa=Array.prototype,Ra=Qa.indexOf?function(a,b,c){return Qa.indexOf.call(a,b,c)}:function(a,b,c){c=c==k?0:0>c?Math.max(0,a.length+c):c;if(p(a))return!p(b)||1!=b.length?-1:a.indexOf(b,c);for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},v=Qa.forEach?function(a,b,c){Qa.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=p(a)?a.split(""):a,g=0;g<d;g++)g in e&&b.call(c,e[g],g,a)};function Sa(a,b,c){for(var d=p(a)?a.split(""):a,e=a.length-1;0<=e;--e)e in d&&b.call(c,d[e],e,a)}
var Ta=Qa.filter?function(a,b,c){return Qa.filter.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=[],g=0,i=p(a)?a.split(""):a,n=0;n<d;n++)if(n in i){var t=i[n];b.call(c,t,n,a)&&(e[g++]=t)}return e},Ua=Qa.map?function(a,b,c){return Qa.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),g=p(a)?a.split(""):a,i=0;i<d;i++)i in g&&(e[i]=b.call(c,g[i],i,a));return e},Va=Qa.every?function(a,b,c){return Qa.every.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=p(a)?a.split(""):a,g=0;g<d;g++)if(g in
e&&!b.call(c,e[g],g,a))return l;return j};function Wa(a,b,c){b=Xa(a,b,c);return 0>b?k:p(a)?a.charAt(b):a[b]}function Xa(a,b,c){for(var d=a.length,e=p(a)?a.split(""):a,g=0;g<d;g++)if(g in e&&b.call(c,e[g],g,a))return g;return-1}function Ya(a,b){return 0<=Ra(a,b)}function Za(a,b){var c=Ra(a,b);0<=c&&Qa.splice.call(a,c,1)}function $a(a,b,c){b=Xa(a,b,c);return 0<=b?(Qa.splice.call(a,b,1),j):l}function ab(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]}
function bb(a,b){for(var c=1;c<arguments.length;c++){var d=arguments[c],e;if(pa(d)||(e=qa(d))&&d.hasOwnProperty("callee"))a.push.apply(a,d);else if(e)for(var g=a.length,i=d.length,n=0;n<i;n++)a[g+n]=d[n];else a.push(d)}}function cb(a,b,c,d){Qa.splice.apply(a,db(arguments,1))}function db(a,b,c){return 2>=arguments.length?Qa.slice.call(a,b):Qa.slice.call(a,b,c)}function eb(a,b){return a>b?1:a<b?-1:0};function w(){u.call(this);this.Oa=[];this.Mb={}}s(w,u);m=w.prototype;m.Th=1;m.Ce=0;m.subscribe=function(a,b,c){var d=this.Mb[a];d||(d=this.Mb[a]=[]);var e=this.Th;this.Oa[e]=a;this.Oa[e+1]=b;this.Oa[e+2]=c;this.Th=e+3;d.push(e);return e};m.Xi=function(a){if(0!=this.Ce)return this.vd||(this.vd=[]),this.vd.push(a),l;var b=this.Oa[a];if(b){var c=this.Mb[b];c&&Za(c,a);delete this.Oa[a];delete this.Oa[a+1];delete this.Oa[a+2]}return!!b};
m.c=function(a,b){var c=this.Mb[a];if(c){this.Ce++;for(var d=db(arguments,1),e=0,g=c.length;e<g;e++){var i=c[e];this.Oa[i+1].apply(this.Oa[i+2],d)}this.Ce--;if(this.vd&&0==this.Ce)for(;c=this.vd.pop();)this.Xi(c)}};m.clear=function(a){if(a){var b=this.Mb[a];b&&(v(b,this.Xi,this),delete this.Mb[a])}else this.Oa.length=0,this.Mb={}};m.k=function(){w.h.k.call(this);delete this.Oa;delete this.Mb;delete this.vd};function fb(){w.call(this)}s(fb,w);na(fb);function gb(a){this.id=a.id;this.K=a.picture;this.name=a.name;this.description=a.description;this.link=a.link};function hb(a){w.call(this);this.id=a.id;this.name=a.name;this.host="youtube";this.kd=a.host_id;this.Lj="http://www.youtube.com/watch?v="+a.host_id;this.fm=a.reddit_id;this.duration=a.duration;this.live=!!a.live;this.Xf=[];this.uk=k;this.oh=l;this.description=a.description;this.link=a.link||"xylocast.com/?m="+this.id;this.qa=a.publisher&&new gb(a.publisher);this.kc=a.published&&ib(a.published+"Z");this.sb="http://i.ytimg.com/vi/"+this.kd+"/0.jpg";this.Qi="http://i.ytimg.com/vi/"+this.kd+"/1.jpg";
this.mm="http://i.ytimg.com/vi/"+this.kd+"/2.jpg";this.nm="http://i.ytimg.com/vi/"+this.kd+"/3.jpg";this.lm=new jb(480,360);this.Pi=37;this.Sa=[];this.Vi=[];this.$c=a.comment_count||0;this.jm=a.star_count||0;this.Sj=a.like_count||0;this.Ol=a.dislike_count||0;this.qg=[];this.Mc={};this.jj=a.collection_id;this.subscribe(kb,this.wb,this);this.subscribe(nb,this.Bk,this);this.subscribe(ob,this.Ye,this)}s(hb,w);function pb(a){return a.kc.getMonth()+1+"/"+a.kc.getDate()+"/"+a.kc.getYear()}
var kb="add-comment",nb="remove-comment",ob="watching";hb.prototype.Ve=function(a){Wa(this.Xf,function(b){return a.id==b.id})||this.Xf.push(a)};hb.prototype.wb=function(a){if(a.B){var b=Wa(this.Sa,function(b){return b.id==a.B});b&&b.Bd.push(a)}else this.Sa.push(a);this.$c+=1};
hb.prototype.Bk=function(a){x("/_comment",qb(),"POST","delete=true&id="+a.id);if(a.B){var b=Wa(this.Sa,function(b){return b.id==a.B});b&&$a(b.Bd,function(b){return b.id==a.id})}else $a(this.Sa,function(b){return b.id==a.id});this.$c-=1};hb.prototype.Ye=function(a,b,c){if(c)rb(this.Mc,a.id);else if(this.Mc[a.id]=a,a.hb=this,a.id!=y.b().d.id&&(!b||b&&C.b().P&&b.id!=C.b().P.id))fb.b().c("flash","is watching "+(b?b.name:""),this.name,a,this.Qi,"#info:"+this.id)};function sb(){w.call(this);this.ec={}}s(sb,w);na(sb);function tb(a,b){var c=a.get(b.id);c||(c=new hb(b),a.add(c));return c}sb.prototype.get=function(a){return a in this.ec?this.ec[a]:h};sb.prototype.add=function(a){this.ec[a.id]=a};var ub={kl:["BC","AD"],jl:["Before Christ","Anno Domini"],ml:"JFMAMJJASOND".split(""),ul:"JFMAMJJASOND".split(""),ll:"January February March April May June July August September October November December".split(" "),tl:"January February March April May June July August September October November December".split(" "),ql:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),wl:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),Al:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),
yl:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),sl:"Sun Mon Tue Wed Thu Fri Sat".split(" "),xl:"Sun Mon Tue Wed Thu Fri Sat".split(" "),nl:"SMTWTFS".split(""),vl:"SMTWTFS".split(""),rl:["Q1","Q2","Q3","Q4"],pl:["1st quarter","2nd quarter","3rd quarter","4th quarter"],hl:["AM","PM"],il:["EEEE, MMMM d, y","MMMM d, y","MMM d, y","M/d/yy"],zl:["h:mm:ss a zzzz","h:mm:ss a z","h:mm:ss a","h:mm a"],bj:6,Bl:[5,6],cj:5};var vb=/^(\d{4})(?:(?:-?(\d{2})(?:-?(\d{2}))?)|(?:-?(\d{3}))|(?:-?W(\d{2})(?:-?([1-7]))?))?$/,wb=/^(\d{2})(?::?(\d{2})(?::?(\d{2})(\.\d+)?)?)?$/,xb=/Z|(?:([-+])(\d{2})(?::?(\d{2}))?)$/;
function ib(a){var b=new yb(2E3),a=Fa(a),a=a.split(-1==a.indexOf("T")?" ":"T"),c;var d=a[0].match(vb);if(d){var e=Number(d[2]),g=Number(d[3]),i=Number(d[4]);c=Number(d[5]);var n=Number(d[6])||1;b.setFullYear(Number(d[1]));i?(b.setDate(1),b.setMonth(0),b.add(new zb(Ab,i-1))):c?(b.setMonth(0),b.setDate(1),d=b.getDay()||7,b.add(new zb(Ab,(4>=d?1-d:8-d)+(Number(n)+7*(Number(c)-1))-1))):(e&&(b.setDate(1),b.setMonth(e-1)),g&&b.setDate(g));c=j}else c=l;if(c&&!(c=2>a.length))a=a[1],c=a.match(xb),n=0,c&&("Z"!=
c[0]&&(n=60*c[2]+Number(c[3]),n*="-"==c[1]?1:-1),n-=b.getTimezoneOffset(),a=a.substr(0,a.length-c[0].length)),(c=a.match(wb))?(b.setHours(Number(c[1])),b.setMinutes(Number(c[2])||0),b.setSeconds(Number(c[3])||0),b.setMilliseconds(c[4]?1E3*c[4]:0),0!=n&&b.setTime(b.getTime()+6E4*n),c=j):c=l;return c?b:k}
function zb(a,b,c,d,e,g){p(a)?(this.Qa=a==Bb?b:0,this.La=a==Cb?b:0,this.Ha=a==Ab?b:0,this.ya=a==Db?b:0,this.Aa=a==Eb?b:0,this.Da=a==Fb?b:0):(this.Qa=a||0,this.La=b||0,this.Ha=c||0,this.ya=d||0,this.Aa=e||0,this.Da=g||0)}
zb.prototype.Ld=function(a){var b=Math.min(this.Qa,this.La,this.Ha,this.ya,this.Aa,this.Da),c=Math.max(this.Qa,this.La,this.Ha,this.ya,this.Aa,this.Da);if(0>b&&0<c)return k;if(!a&&0==b&&0==c)return"PT0S";c=[];0>b&&c.push("-");c.push("P");(this.Qa||a)&&c.push(Math.abs(this.Qa)+"Y");(this.La||a)&&c.push(Math.abs(this.La)+"M");(this.Ha||a)&&c.push(Math.abs(this.Ha)+"D");if(this.ya||this.Aa||this.Da||a)c.push("T"),(this.ya||a)&&c.push(Math.abs(this.ya)+"H"),(this.Aa||a)&&c.push(Math.abs(this.Aa)+"M"),
(this.Da||a)&&c.push(Math.abs(this.Da)+"S");return c.join("")};zb.prototype.clone=function(){return new zb(this.Qa,this.La,this.Ha,this.ya,this.Aa,this.Da)};var Bb="y",Cb="m",Ab="d",Db="h",Eb="n",Fb="s";zb.prototype.add=function(a){this.Qa+=a.Qa;this.La+=a.La;this.Ha+=a.Ha;this.ya+=a.ya;this.Aa+=a.Aa;this.Da+=a.Da};
function Gb(a,b,c){"number"==typeof a?(this.m=new Date(a,b||0,c||1),Hb(this,c||1)):sa(a)?(this.m=new Date(a.getFullYear(),a.getMonth(),a.getDate()),Hb(this,a.getDate())):(this.m=new Date(r()),this.m.setHours(0),this.m.setMinutes(0),this.m.setSeconds(0),this.m.setMilliseconds(0))}m=Gb.prototype;m.ae=ub.bj;m.ce=ub.cj;m.clone=function(){var a=new Gb(this.m);a.ae=this.ae;a.ce=this.ce;return a};m.getFullYear=function(){return this.m.getFullYear()};m.getYear=function(){return this.getFullYear()};
m.getMonth=function(){return this.m.getMonth()};m.getDate=function(){return this.m.getDate()};m.getTime=function(){return this.m.getTime()};m.getDay=function(){return this.m.getDay()};m.getUTCHours=function(){return this.m.getUTCHours()};m.getTimezoneOffset=function(){return this.m.getTimezoneOffset()};function Ib(a){a=a.getTimezoneOffset();if(0==a)a="Z";else var b=Math.abs(a)/60,c=Math.floor(b),b=60*(b-c),a=(0<a?"-":"+")+Na(c)+":"+Na(b);return a}
m.set=function(a){this.m=new Date(a.getFullYear(),a.getMonth(),a.getDate())};m.setFullYear=function(a){this.m.setFullYear(a)};m.setMonth=function(a){this.m.setMonth(a)};m.setDate=function(a){this.m.setDate(a)};m.setTime=function(a){this.m.setTime(a)};
m.add=function(a){if(a.Qa||a.La){var b=this.getMonth()+a.La+12*a.Qa,c=this.getYear()+Math.floor(b/12),b=b%12;0>b&&(b+=12);var d;a:{switch(b){case 1:d=0==c%4&&(0!=c%100||0==c%400)?29:28;break a;case 5:case 8:case 10:case 3:d=30;break a}d=31}d=Math.min(d,this.getDate());this.setDate(1);this.setFullYear(c);this.setMonth(b);this.setDate(d)}a.Ha&&(a=new Date((new Date(this.getYear(),this.getMonth(),this.getDate(),12)).getTime()+864E5*a.Ha),this.setDate(1),this.setFullYear(a.getFullYear()),this.setMonth(a.getMonth()),
this.setDate(a.getDate()),Hb(this,a.getDate()))};m.Ld=function(a,b){return[this.getFullYear(),Na(this.getMonth()+1),Na(this.getDate())].join(a?"-":"")+(b?Ib(this):"")};m.toString=function(){return this.Ld()};function Hb(a,b){a.getDate()!=b&&a.m.setUTCHours(a.m.getUTCHours()+(a.getDate()<b?1:-1))}m.valueOf=function(){return this.m.valueOf()};function yb(a,b,c,d,e,g,i){this.m="number"==typeof a?new Date(a,b||0,c||1,d||0,e||0,g||0,i||0):new Date(a?a.getTime():r())}s(yb,Gb);m=yb.prototype;
m.getHours=function(){return this.m.getHours()};m.getMinutes=function(){return this.m.getMinutes()};m.getSeconds=function(){return this.m.getSeconds()};m.getUTCHours=function(){return this.m.getUTCHours()};m.setHours=function(a){this.m.setHours(a)};m.setMinutes=function(a){this.m.setMinutes(a)};m.setSeconds=function(a){this.m.setSeconds(a)};m.setMilliseconds=function(a){this.m.setMilliseconds(a)};m.setUTCHours=function(a){this.m.setUTCHours(a)};
m.add=function(a){Gb.prototype.add.call(this,a);a.ya&&this.setHours(this.m.getHours()+a.ya);a.Aa&&this.setMinutes(this.m.getMinutes()+a.Aa);a.Da&&this.setSeconds(this.m.getSeconds()+a.Da)};m.Ld=function(a,b){var c=Gb.prototype.Ld.call(this,a);return a?c+" "+Na(this.getHours())+":"+Na(this.getMinutes())+":"+Na(this.getSeconds())+(b?Ib(this):""):c+"T"+Na(this.getHours())+Na(this.getMinutes())+Na(this.getSeconds())+(b?Ib(this):"")};m.toString=function(){return this.Ld()};
m.clone=function(){var a=new yb(this.m);a.ae=this.ae;a.ce=this.ce;return a};function Jb(a,b){w.call(this);var c=b||k,d=a||k;this.id=d?d.id:c.id;this.media=d?tb(sb.b(),d.media):c;sb.b().add(this.media);this.time=d?ib(d.time+"Z"):new yb;this.async=d?d.async:j;this.seek=d?d.seek:b?0:k;this.ended=l}s(Jb,w);function Kb(a){return new Jb(h,a)};function Lb(a){var b=r(),c=Math.floor((b-a)/6E4),b=l;0>c&&(b=j,c*=-1);if(60>c)return Mb(c,b,0);c=Math.floor(c/60);if(24>c)return Mb(c,b,1);c=new Date(r());c.setHours(0);c.setMinutes(0);c.setSeconds(0);c.setMilliseconds(0);c=Math.ceil((c.getTime()-a)/864E5);b&&(c*=-1);return 14>c?Mb(c,b,2):""}
function Mb(a,b,c){return!b&&0==c?(b=za("{$num} minute ago",{num:a}),c=za("{$num} minutes ago",{num:a}),1==a?b:c):b&&0==c?(b=za("in {$num} minute",{num:a}),c=za("in {$num} minutes",{num:a}),1==a?b:c):!b&&1==c?(b=za("{$num} hour ago",{num:a}),c=za("{$num} hours ago",{num:a}),1==a?b:c):b&&1==c?(b=za("in {$num} hour",{num:a}),c=za("in {$num} hours",{num:a}),1==a?b:c):!b&&2==c?(b=za("{$num} day ago",{num:a}),c=za("{$num} days ago",{num:a}),1==a?b:c):b&&2==c?(b=za("in {$num} day",{num:a}),c=za("in {$num} days",
{num:a}),1==a?b:c):""};function Nb(a,b){w.call(this);var c=a||{};this.Z=!b;this.id=c.id||"";this.name=c.name||"";this.url=c.profile_url||"";this.location=c.location||"";this.aj=!!c.welcomed;this.Lc=!!c.online;this.Nl=!!c.demo;this.hb=c.last_seen?tb(sb.b(),c.last_seen):k;this.history=[];this.Ki=[];this.K=this.id?Ea("https://graph.facebook.com/%s/picture",this.id):"";for(this.color=Raphael.getColor();"#00bf85"==this.color||"#00bf2f"==this.color;)this.color=Raphael.getColor();this.dj=c.access_level||0;this.Cl=[];this.r=c.last_login?
ib(c.last_login+"Z"):k;this.gm=c.session_count||0;this.El=c.ave_session_time?c.ave_session_time.toFixed(2):k;this.hm=c.show_guide!=h?c.show_guide:j;this.im=c.show_sidebar!=h?c.show_sidebar:j;this.yk=c.post_facebook!=h?c.post_facebook:j;this.wi=c.post_twitter!=h?c.post_twitter:j;this.he=!!c.has_twitter;this.zf=l;this.Vk=c.temp;this.subscribe(Ob,function(){this.wi=j},this)}s(Nb,w);function Pb(){return y.b().d.dj==Qb}Nb.prototype.be=function(){var a=this.name.split(" ");return a&&a.length?a[0]:this.name};
function Rb(a,b){return Wa(a.Ki,function(a){return a.id==b.id})}var Ob="twitter-auth",Qb=2;function Sb(a,b,c,d,e){this.id=a;this.p=b;this.N=c;this.cl=d;this.Bg=e||k;this.di=[]}Sb.prototype.qg=function(a){this.di.push(a);this.N&&(this.N.V&&this.N.I)&&(this.N.I.seek=k,this.N.I=k);x("/_seen",qb(),"POST","media_id="+a.id+"&session_id="+this.id+"&async="+(this.N?this.N.V:l))};
Sb.prototype.end=function(a){this.Bg=a;a=(this.Bg.getTime()-this.cl.getTime())/1E3;if(this.p.id==y.b().d.id&&this.N){Tb.b();var b=this.N,c=this.di.length;y.b().xe.length?_gaq.push(["_trackEvent","Users","SessionTimeWithFriends",y.b().d.id,Math.round(a)]):_gaq.push(["_trackEvent","Users","SessionTimeNoFriends",y.b().d.id,Math.round(a)]);_gaq.push(["_trackEvent","Users","SessionMediaCount",y.b().d.id,c]);_gaq.push(["_trackEvent","Users","Active",y.b().d.id,c]);_gaq.push(["_trackEvent","Users",b.id+
"-time",y.b().d.id,a]);_gaq.push(["_trackEvent","Users",b.id+"-medias",y.b().d.id,c]);b.V||(_gaq.push(["_trackEvent","Channel","SessionTime",b.id,a]),_gaq.push(["_trackEvent","Channel","SessionMediaCount",b.id,c]))}};function Ub(a){w.call(this);this.id=a.id;this.name=a.name;this.V=a.my_channel;this.ck=j;this.hb=a.current_media?tb(sb.b(),a.current_media):k;this.Ml=a.current_seek;this.ka=[];this.yd={};this.I=a.current_program&&new Jb(a.current_program);this.Hg=[];this.queue=[];this.Za=0;this.Lc=a.online!=h?a.online:k;this.subscribe(Vb,this.Xe,this);this.subscribe(Wb,this.ej,this);this.subscribe(Xb,this.Ye,this);this.subscribe(Yb,this.el,this);this.I||(this.xb=0,this.I=this.ka[0])}s(Ub,w);m=Ub.prototype;
m.Xe=function(a){this.ka.push(a);this.yd[a.id]=a;a.async&&(this.xb=this.ka.length-1,this.I=a);a.time.getTime()+1E3*a.media.duration>this.Za&&(this.Za=a.time.getTime()+1E3*a.media.duration-12E4,Zb($b.b(),this.Za,q(this.Mf,this,this.Za)),Zb($b.b(),this.Za+6E4,q(this.Mf,this,this.Za+6E4)))};
m.Mf=function(a){this.Za<=a&&!this.V&&x("/_programming/"+this.id,q(function(a){a=D(a.target);a.length||Zb($b.b(),r()+1E3,q(this.Mf,this,r()+1E3));v(a,function(a){if(!this.yd[a.id]){var b=this.yd[a.id];b||(b=new Jb(a),this.Xe(b));this.c(Vb,b)}},this)},this))};
m.ej=function(a,b){b?(this.queue.push(a),fb.b().c("flash","Added to queue",a.name,h,a.Qi,"#info:"+a.id),y.b().d.Z&&x("/_queue",qb(),"POST","media_id="+a.id)):($a(this.queue,function(b){return b.id==a.id},this),y.b().d.Z&&x("/_queue",qb(),"POST","media_id="+a.id+"&delete=1"))};m.Ye=function(a){this.Hg.push(a)};m.el=function(a){var b=a.id in this.yd?this.yd[a.id]:h;b&&(b.time=ib(a.time+"Z"))};
m.ga=function(a){if(this.I&&this.I.async&&this.I.seek!=k&&!this.I.ended)return this.I;if(!this.ka.length)return k;if(a)return this.ka[this.xb+a];if(this.ck&&this.I){if(this.I.ended){a=this.xb;if(this.ka[a+1])a=this.ka[a+1];else if(this.V)if(this.queue.length){a=this.queue[0];this.c(Wb,a,l);var b=Kb(a);ac().c(Vb,b);y.b().d.Z&&x("/_addprogram",qb(),"POST","channel_id="+C.b().V.id+"&media_id="+a.id+"&now=true");a=b}else a=k;else a=k;this.I=a}}else if(!this.V){a:if(a=this.I,b=this.xb,a&&r()>=a.time.getTime()&&
r()<a.time.getTime()+1E3*a.media.duration)a=this.I=a;else{if(!a||a.time.getTime()>=r())b=0,a=this.ka[0];for(;b<this.ka.length;b++){var c=this.ka[b];if(r()>=c.time.getTime()&&r()<c.time.getTime()+1E3*c.media.duration){a=c;break a}}}this.I=a}this.I&&(!this.ka[this.xb]||this.ka[this.xb].id!=this.I.id)?(a=Xa(this.ka,q(function(a){return a.id==this.I.id},this)),this.xb=Math.max(a,0)):this.I||(this.xb=this.ka.length);return this.I};var Vb="add-program",Wb="add-queue",Xb="add-viewer",Yb="update-program";function y(){w.call(this);this.Qd={};this.th=l;this.vf=[];this.pj={};this.xe=[];this.subscribe(bc,function(a,b){a.Lc=b},this)}s(y,w);na(y);function cc(a,b){a.d=b?dc(a,b):new Nb(h,j);a.d.Z&&(FB.api("/me/permissions",q(function(a){this.d.zf=a.data[0].publish_stream},a)),FB.api("/me/friends",q(function(a){a&&a.data&&v(a.data,function(a){this.Qd[a.id]||(this.Qd[a.id]=new Nb({id:a.id,name:a.name,temp:j}))},this)},a)))}y.prototype.add=function(a){this.Qd[a.id]=a};y.prototype.get=function(a){return this.Qd[a]};
function dc(a,b){var c=a.get(b.id);if(!c||c.Vk)c=new Nb(b),a.add(c);b.online==l&&c.Lc==j&&(c.r=new yb);c.Lc=b.online||!!Wa(a.xe,function(a){return a.id==c.id},a);c.hb=b.last_seen?tb(sb.b(),b.last_seen):c.hb;return c}y.prototype.search=function(a){var b=Ta(ec(this.Qd),function(b){return b.name&&0==Ga(a,b.name.substr(0,a.length))},this);Ta(ec(this.pj),function(b){return 0==Ga(a,b.substr(0,a.length))},this);return b};var bc="online";var fc,gc,hc,ic,jc;function kc(){return ha.navigator?ha.navigator.userAgent:k}function lc(){return ha.navigator}ic=hc=gc=fc=l;var mc;if(mc=kc()){var nc=lc();fc=0==mc.indexOf("Opera");gc=!fc&&-1!=mc.indexOf("MSIE");hc=!fc&&-1!=mc.indexOf("WebKit");ic=!fc&&!hc&&"Gecko"==nc.product}var oc=fc,E=gc,pc=ic,F=hc,qc=lc();jc=-1!=(qc&&qc.platform||"").indexOf("Mac");var rc=!!lc()&&-1!=(lc().appVersion||"").indexOf("X11"),sc;
a:{var tc="",uc;if(oc&&ha.opera)var vc=ha.opera.version,tc="function"==typeof vc?vc():vc;else if(pc?uc=/rv\:([^\);]+)(\)|;)/:E?uc=/MSIE\s+([^\);]+)(\)|;)/:F&&(uc=/WebKit\/(\S+)/),uc)var wc=uc.exec(kc()),tc=wc?wc[1]:"";if(E){var xc,zc=ha.document;xc=zc?zc.documentMode:h;if(xc>parseFloat(tc)){sc=String(xc);break a}}sc=tc}var Ac={};
function G(a){var b;if(!(b=Ac[a])){b=0;for(var c=Fa(String(sc)).split("."),d=Fa(String(a)).split("."),e=Math.max(c.length,d.length),g=0;0==b&&g<e;g++){var i=c[g]||"",n=d[g]||"",t=RegExp("(\\d*)(\\D*)","g"),z=RegExp("(\\d*)(\\D*)","g");do{var A=t.exec(i)||["","",""],B=z.exec(n)||["","",""];if(0==A[0].length&&0==B[0].length)break;b=((0==A[1].length?0:parseInt(A[1],10))<(0==B[1].length?0:parseInt(B[1],10))?-1:(0==A[1].length?0:parseInt(A[1],10))>(0==B[1].length?0:parseInt(B[1],10))?1:0)||((0==A[2].length)<
(0==B[2].length)?-1:(0==A[2].length)>(0==B[2].length)?1:0)||(A[2]<B[2]?-1:A[2]>B[2]?1:0)}while(0==b)}b=Ac[a]=0<=b}return b}var Bc={};function Cc(a){return Bc[a]||(Bc[a]=E&&!!document.documentMode&&document.documentMode>=a)};var Dc=!E||Cc(9),Ec=!E||Cc(9),Fc=E&&!G("9");!F||G("528");pc&&G("1.9b")||E&&G("8")||oc&&G("9.5")||F&&G("528");pc&&!G("8")||E&&G("9");function Gc(a,b){this.type=a;this.currentTarget=this.target=b}m=Gc.prototype;m.k=ba();m.aa=ba();m.jc=l;m.defaultPrevented=l;m.Fe=j;m.stopPropagation=function(){this.jc=j};m.preventDefault=function(){this.defaultPrevented=j;this.Fe=l};function Hc(a){a.preventDefault()};function Ic(a){Ic[" "](a);return a}Ic[" "]=ma;function Jc(a,b){a&&this.init(a,b)}s(Jc,Gc);var Kc=[1,4,2];m=Jc.prototype;m.target=k;m.relatedTarget=k;m.offsetX=0;m.offsetY=0;m.clientX=0;m.clientY=0;m.screenX=0;m.screenY=0;m.button=0;m.keyCode=0;m.charCode=0;m.ctrlKey=l;m.altKey=l;m.shiftKey=l;m.metaKey=l;m.eg=l;m.da=k;
m.init=function(a,b){var c=this.type=a.type;Gc.call(this,c);this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;if(d){if(pc){var e;a:{try{Ic(d.nodeName);e=j;break a}catch(g){}e=l}e||(d=k)}}else"mouseover"==c?d=a.fromElement:"mouseout"==c&&(d=a.toElement);this.relatedTarget=d;this.offsetX=F||a.offsetX!==h?a.offsetX:a.layerX;this.offsetY=F||a.offsetY!==h?a.offsetY:a.layerY;this.clientX=a.clientX!==h?a.clientX:a.pageX;this.clientY=a.clientY!==h?a.clientY:a.pageY;this.screenX=
a.screenX||0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||("keypress"==c?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.eg=jc?a.metaKey:a.ctrlKey;this.state=a.state;this.da=a;a.defaultPrevented&&this.preventDefault();delete this.jc};function Lc(a){return(Dc?0==a.da.button:"click"==a.type?j:!!(a.da.button&Kc[0]))&&!(F&&jc&&a.ctrlKey)}
m.stopPropagation=function(){Jc.h.stopPropagation.call(this);this.da.stopPropagation?this.da.stopPropagation():this.da.cancelBubble=j};m.preventDefault=function(){Jc.h.preventDefault.call(this);var a=this.da;if(a.preventDefault)a.preventDefault();else if(a.returnValue=l,Fc)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};m.wj=da("da");m.k=ba();function Mc(){}var Nc=0;m=Mc.prototype;m.key=0;m.lc=l;m.bf=l;m.init=function(a,b,c,d,e,g){ra(a)?this.Ph=j:a&&a.handleEvent&&ra(a.handleEvent)?this.Ph=l:f(Error("Invalid listener argument"));this.Fc=a;this.proxy=b;this.src=c;this.type=d;this.capture=!!e;this.ge=g;this.bf=l;this.key=++Nc;this.lc=l};m.handleEvent=function(a){return this.Ph?this.Fc.call(this.ge||this.src,a):this.Fc.handleEvent.call(this.Fc,a)};function Oc(a,b,c){for(var d in a)b.call(c,a[d],d,a)}function ec(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function Pc(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}function Qc(a){for(var b in a)return l;return j}function rb(a,b){b in a&&delete a[b]}function Rc(a,b,c){b in a&&f(Error('The object already contains the key "'+b+'"'));a[b]=c}var Sc="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");
function Tc(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var g=0;g<Sc.length;g++)c=Sc[g],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};var Uc={},Vc={},Wc={},Xc={};
function H(a,b,c,d,e){if(b){if(pa(b)){for(var g=0;g<b.length;g++)H(a,b[g],c,d,e);return k}var d=!!d,i=Vc;b in i||(i[b]={S:0,Ca:0});i=i[b];d in i||(i[d]={S:0,Ca:0},i.S++);var i=i[d],n=ta(a),t;i.Ca++;if(i[n]){t=i[n];for(g=0;g<t.length;g++)if(i=t[g],i.Fc==c&&i.ge==e){if(i.lc)break;return t[g].key}}else t=i[n]=[],i.S++;var z=Yc,A=Ec?function(a){return z.call(A.src,A.key,a)}:function(a){a=z.call(A.src,A.key,a);if(!a)return a},g=A;g.src=a;i=new Mc;i.init(c,g,a,b,d,e);c=i.key;g.key=c;t.push(i);Uc[c]=i;Wc[n]||
(Wc[n]=[]);Wc[n].push(i);a.addEventListener?(a==ha||!a.fh)&&a.addEventListener(b,g,d):a.attachEvent(b in Xc?Xc[b]:Xc[b]="on"+b,g);return c}f(Error("Invalid event type"))}function Zc(a,b,c,d,e){if(pa(b))for(var g=0;g<b.length;g++)Zc(a,b[g],c,d,e);else a=H(a,b,c,d,e),Uc[a].bf=j}function $c(a,b,c,d,e){if(pa(b))for(var g=0;g<b.length;g++)$c(a,b[g],c,d,e);else if(d=!!d,a=ad(a,b,d))for(g=0;g<a.length;g++)if(a[g].Fc==c&&a[g].capture==d&&a[g].ge==e){bd(a[g].key);break}}
function bd(a){if(!Uc[a])return l;var b=Uc[a];if(b.lc)return l;var c=b.src,d=b.type,e=b.proxy,g=b.capture;c.removeEventListener?(c==ha||!c.fh)&&c.removeEventListener(d,e,g):c.detachEvent&&c.detachEvent(d in Xc?Xc[d]:Xc[d]="on"+d,e);c=ta(c);Wc[c]&&(e=Wc[c],Za(e,b),0==e.length&&delete Wc[c]);b.lc=j;if(b=Vc[d][g][c])b.hi=j,cd(d,g,c,b);delete Uc[a];return j}
function cd(a,b,c,d){if(!d.pe&&d.hi){for(var e=0,g=0;e<d.length;e++)d[e].lc?d[e].proxy.src=k:(e!=g&&(d[g]=d[e]),g++);d.length=g;d.hi=l;0==g&&(delete Vc[a][b][c],Vc[a][b].S--,0==Vc[a][b].S&&(delete Vc[a][b],Vc[a].S--),0==Vc[a].S&&delete Vc[a])}}function ad(a,b,c){var d=Vc;return b in d&&(d=d[b],c in d&&(d=d[c],a=ta(a),d[a]))?d[a]:k}
function dd(a,b,c,d,e){var g=1,b=ta(b);if(a[b]){a.Ca--;a=a[b];a.pe?a.pe++:a.pe=1;try{for(var i=a.length,n=0;n<i;n++){var t=a[n];t&&!t.lc&&(g&=ed(t,e)!==l)}}finally{a.pe--,cd(c,d,b,a)}}return Boolean(g)}function ed(a,b){a.bf&&bd(a.key);return a.handleEvent(b)}
function Yc(a,b){if(!Uc[a])return j;var c=Uc[a],d=c.type,e=Vc;if(!(d in e))return j;var e=e[d],g,i;if(!Ec){g=b||la("window.event");var n=j in e,t=l in e;if(n){if(0>g.keyCode||g.returnValue!=h)return j;a:{var z=l;if(0==g.keyCode)try{g.keyCode=-1;break a}catch(A){z=j}if(z||g.returnValue==h)g.returnValue=j}}z=new Jc;z.init(g,this);g=j;try{if(n){for(var B=[],aa=z.currentTarget;aa;aa=aa.parentNode)B.push(aa);i=e[j];i.Ca=i.S;for(var W=B.length-1;!z.jc&&0<=W&&i.Ca;W--)z.currentTarget=B[W],g&=dd(i,B[W],d,
j,z);if(t){i=e[l];i.Ca=i.S;for(W=0;!z.jc&&W<B.length&&i.Ca;W++)z.currentTarget=B[W],g&=dd(i,B[W],d,l,z)}}else g=ed(c,z)}finally{B&&(B.length=0)}return g}d=new Jc(b,this);return g=ed(c,d)};function fd(){u.call(this)}s(fd,u);m=fd.prototype;m.fh=j;m.ze=k;m.rg=ca("ze");m.addEventListener=function(a,b,c,d){H(this,a,b,c,d)};m.removeEventListener=function(a,b,c,d){$c(this,a,b,c,d)};
m.dispatchEvent=function(a){var b=a.type||a,c=Vc;if(b in c){if(p(a))a=new Gc(a,this);else if(a instanceof Gc)a.target=a.target||this;else{var d=a,a=new Gc(b,this);Tc(a,d)}var d=1,e,c=c[b],b=j in c,g;if(b){e=[];for(g=this;g;g=g.ze)e.push(g);g=c[j];g.Ca=g.S;for(var i=e.length-1;!a.jc&&0<=i&&g.Ca;i--)a.currentTarget=e[i],d&=dd(g,e[i],a.type,j,a)&&a.Fe!=l}if(l in c)if(g=c[l],g.Ca=g.S,b)for(i=0;!a.jc&&i<e.length&&g.Ca;i++)a.currentTarget=e[i],d&=dd(g,e[i],a.type,l,a)&&a.Fe!=l;else for(e=this;!a.jc&&e&&
g.Ca;e=e.ze)a.currentTarget=e,d&=dd(g,e,a.type,l,a)&&a.Fe!=l;a=Boolean(d)}else a=j;return a};m.k=function(){fd.h.k.call(this);var a,b=0,c=a==k;a=!!a;if(this==k)Oc(Wc,function(d){for(var e=d.length-1;0<=e;e--){var g=d[e];if(c||a==g.capture)bd(g.key),b++}});else{var d=ta(this);if(Wc[d])for(var d=Wc[d],e=d.length-1;0<=e;e--){var g=d[e];if(c||a==g.capture)bd(g.key),b++}}this.ze=k};function gd(a,b){u.call(this);this.ja=a||1;this.Kd=b||hd;this.af=q(this.Yk,this);this.Kf=r()}s(gd,fd);gd.prototype.enabled=l;var hd=ha.window;m=gd.prototype;m.na=k;m.Yk=function(){if(this.enabled){var a=r()-this.Kf;0<a&&a<0.8*this.ja?this.na=this.Kd.setTimeout(this.af,this.ja-a):(this.dispatchEvent(id),this.enabled&&(this.na=this.Kd.setTimeout(this.af,this.ja),this.Kf=r()))}};m.start=function(){this.enabled=j;this.na||(this.na=this.Kd.setTimeout(this.af,this.ja),this.Kf=r())};
m.stop=function(){this.enabled=l;this.na&&(this.Kd.clearTimeout(this.na),this.na=k)};m.k=function(){gd.h.k.call(this);this.stop();delete this.Kd};var id="tick";function I(a,b,c){ra(a)?c&&(a=q(a,c)):a&&"function"==typeof a.handleEvent?a=q(a.handleEvent,a):f(Error("Invalid listener argument"));return 2147483647<b?-1:hd.setTimeout(a,b||0)};function jd(a){if("function"==typeof a.de)return a.de();if(p(a))return a.split("");if(qa(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return ec(a)}function kd(a,b,c){if("function"==typeof a.forEach)a.forEach(b,c);else if(qa(a)||p(a))v(a,b,c);else{var d;if("function"==typeof a.wf)d=a.wf();else if("function"!=typeof a.de)if(qa(a)||p(a)){d=[];for(var e=a.length,g=0;g<e;g++)d.push(g)}else d=Pc(a);else d=h;for(var e=jd(a),g=e.length,i=0;i<g;i++)b.call(c,e[i],d&&d[i],a)}};function ld(a,b){this.Eb={};this.Q=[];var c=arguments.length;if(1<c){c%2&&f(Error("Uneven number of arguments"));for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else if(a){a instanceof ld?(c=a.wf(),d=a.de()):(c=Pc(a),d=ec(a));for(var e=0;e<c.length;e++)this.set(c[e],d[e])}}m=ld.prototype;m.S=0;m.Yi=0;m.de=function(){md(this);for(var a=[],b=0;b<this.Q.length;b++)a.push(this.Eb[this.Q[b]]);return a};m.wf=function(){md(this);return this.Q.concat()};
m.clear=function(){this.Eb={};this.Yi=this.S=this.Q.length=0};function md(a){if(a.S!=a.Q.length){for(var b=0,c=0;b<a.Q.length;){var d=a.Q[b];Object.prototype.hasOwnProperty.call(a.Eb,d)&&(a.Q[c++]=d);b++}a.Q.length=c}if(a.S!=a.Q.length){for(var e={},c=b=0;b<a.Q.length;)d=a.Q[b],Object.prototype.hasOwnProperty.call(e,d)||(a.Q[c++]=d,e[d]=1),b++;a.Q.length=c}}m.get=function(a,b){return Object.prototype.hasOwnProperty.call(this.Eb,a)?this.Eb[a]:b};
m.set=function(a,b){Object.prototype.hasOwnProperty.call(this.Eb,a)||(this.S++,this.Q.push(a),this.Yi++);this.Eb[a]=b};m.clone=function(){return new ld(this)};function nd(a){return od(a||arguments.callee.caller,[])}
function od(a,b){var c=[];if(Ya(b,a))c.push("[...circular reference...]");else if(a&&50>b.length){c.push(pd(a)+"(");for(var d=a.arguments,e=0;e<d.length;e++){0<e&&c.push(", ");var g;g=d[e];switch(typeof g){case "object":g=g?"object":"null";break;case "string":break;case "number":g=String(g);break;case "boolean":g=g?"true":"false";break;case "function":g=(g=pd(g))?g:"[fn]";break;default:g=typeof g}40<g.length&&(g=g.substr(0,40)+"...");c.push(g)}b.push(a);c.push(")\n");try{c.push(od(a.caller,b))}catch(i){c.push("[exception trying to get caller]\n")}}else a?
c.push("[...long stack...]"):c.push("[end]");return c.join("")}function pd(a){if(qd[a])return qd[a];a=String(a);if(!qd[a]){var b=/function ([^\(]+)/.exec(a);qd[a]=b?b[1]:"[Anonymous]"}return qd[a]}var qd={};function rd(a,b,c,d,e){this.reset(a,b,c,d,e)}rd.prototype.Fk=0;rd.prototype.lh=k;rd.prototype.kh=k;var sd=0;rd.prototype.reset=function(a,b,c,d,e){this.Fk="number"==typeof e?e:sd++;this.om=d||r();this.qd=a;this.Zj=b;this.$l=c;delete this.lh;delete this.kh};rd.prototype.Di=ca("qd");function td(a){this.$j=a}td.prototype.H=k;td.prototype.qd=k;td.prototype.Y=k;td.prototype.Fh=k;function ud(a,b){this.name=a;this.value=b}ud.prototype.toString=da("name");var vd=new ud("SEVERE",1E3),wd=new ud("WARNING",900),xd=new ud("INFO",800),yd=new ud("CONFIG",700),zd=new ud("FINE",500);m=td.prototype;m.getParent=da("H");m.vh=function(){this.Y||(this.Y={});return this.Y};m.Di=ca("qd");function Ad(a){return a.qd?a.qd:a.H?Ad(a.H):k}
m.log=function(a,b,c){if(a.value>=Ad(this).value){a=this.xj(a,b,c);b="log:"+a.Zj;ha.console&&(ha.console.timeStamp?ha.console.timeStamp(b):ha.console.markTimeline&&ha.console.markTimeline(b));ha.msWriteProfilerMark&&ha.msWriteProfilerMark(b);for(b=this;b;){var c=b,d=a;if(c.Fh)for(var e=0,g=h;g=c.Fh[e];e++)g(d);b=b.getParent()}}};
m.xj=function(a,b,c){var d=new rd(a,String(b),this.$j);if(c){d.lh=c;var e;var g=arguments.callee.caller;try{var i;var n=la("window.location.href");if(p(c))i={message:c,name:"Unknown error",lineNumber:"Not available",fileName:n,stack:"Not available"};else{var t,z,A=l;try{t=c.lineNumber||c.Zl||"Not available"}catch(B){t="Not available",A=j}try{z=c.fileName||c.filename||c.sourceURL||n}catch(aa){z="Not available",A=j}i=A||!c.lineNumber||!c.fileName||!c.stack?{message:c.message,name:c.name,lineNumber:t,
fileName:z,stack:c.stack||"Not available"}:c}e="Message: "+Ha(i.message)+'\nUrl: <a href="view-source:'+i.fileName+'" target="_new">'+i.fileName+"</a>\nLine: "+i.lineNumber+"\n\nBrowser stack:\n"+Ha(i.stack+"-> ")+"[end]\n\nJS stack traversal:\n"+Ha(nd(g)+"-> ")}catch(W){e="Exception trying to expose exception! You win, we lose. "+W}d.kh=e}return d};function Bd(a,b){a.log(vd,b,h)}m.info=function(a,b){this.log(xd,a,b)};function Cd(a,b){a.log(zd,b,h)}var Dd={},Ed=k;
function Fd(a){Ed||(Ed=new td(""),Dd[""]=Ed,Ed.Di(yd));var b;if(!(b=Dd[a])){b=new td(a);var c=a.lastIndexOf("."),d=a.substr(c+1),c=Fd(a.substr(0,c));c.vh()[d]=b;b.H=c;Dd[a]=b}return b};function Gd(a){a=String(a);if(/^\s*$/.test(a)?0:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x10-\x1f\x80-\x9f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,"")))try{return eval("("+a+")")}catch(b){}f(Error("Invalid JSON string: "+a))};function Hd(){}Hd.prototype.Ud=k;var Id;function Jd(){}s(Jd,Hd);function Kd(a){return(a=Ld(a))?new ActiveXObject(a):new XMLHttpRequest}function Md(a){var b={};Ld(a)&&(b[0]=j,b[1]=j);return b}
function Ld(a){if(!a.Jh&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var b=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],c=0;c<b.length;c++){var d=b[c];try{return new ActiveXObject(d),a.Jh=d}catch(e){}}f(Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed"))}return a.Jh}Id=new Jd;var Nd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([\\w\\d\\-\\u0100-\\uffff.%]*)(?::([0-9]+))?)?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");function Od(a){u.call(this);this.headers=new ld;this.Tc=a||k}s(Od,fd);Od.prototype.w=Fd("goog.net.XhrIo");var Pd=/^https?$/i,Qd=[];function x(a,b,c,d){var e=new Od;Qd.push(e);b&&H(e,"complete",b);H(e,"ready",ya(Rd,e));e.send(a,c,d,h)}function Rd(a){a.aa();Za(Qd,a)}m=Od.prototype;m.vb=l;m.o=k;m.Se=k;m.pd="";m.Xh="";m.md=0;m.nd="";m.qf=l;m.ie=l;m.Cf=l;m.ac=l;m.Ke=0;m.qc=k;m.Ee="";m.gl=l;
m.send=function(a,b,c,d){this.o&&f(Error("[goog.net.XhrIo] Object is active with another request"));b=b?b.toUpperCase():"GET";this.pd=a;this.nd="";this.md=0;this.Xh=b;this.qf=l;this.vb=j;this.o=this.Tc?Kd(this.Tc):Kd(Id);this.Se=this.Tc?this.Tc.Ud||(this.Tc.Ud=Md(this.Tc)):Id.Ud||(Id.Ud=Md(Id));this.o.onreadystatechange=q(this.pi,this);try{Cd(this.w,Sd(this,"Opening Xhr")),this.Cf=j,this.o.open(b,a,j),this.Cf=l}catch(e){Cd(this.w,Sd(this,"Error opening Xhr: "+e.message));Td(this,e);return}var a=c||
"",g=this.headers.clone();d&&kd(d,function(a,b){g.set(b,a)});d=ha.FormData&&a instanceof ha.FormData;if(b="POST"==b)b=!Object.prototype.hasOwnProperty.call(g.Eb,"Content-Type")&&!d;b&&g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");kd(g,function(a,b){this.o.setRequestHeader(b,a)},this);this.Ee&&(this.o.responseType=this.Ee);"withCredentials"in this.o&&(this.o.withCredentials=this.gl);try{this.qc&&(hd.clearTimeout(this.qc),this.qc=k),0<this.Ke&&(Cd(this.w,Sd(this,"Will abort after "+
this.Ke+"ms if incomplete")),this.qc=hd.setTimeout(q(this.Zk,this),this.Ke)),Cd(this.w,Sd(this,"Sending request")),this.ie=j,this.o.send(a),this.ie=l}catch(i){Cd(this.w,Sd(this,"Send error: "+i.message)),Td(this,i)}};m.Zk=function(){"undefined"!=typeof fa&&this.o&&(this.nd="Timed out after "+this.Ke+"ms, aborting",this.md=8,Cd(this.w,Sd(this,this.nd)),this.dispatchEvent("timeout"),this.abort(8))};function Td(a,b){a.vb=l;a.o&&(a.ac=j,a.o.abort(),a.ac=l);a.nd=b;a.md=5;Ud(a);Vd(a)}
function Ud(a){a.qf||(a.qf=j,a.dispatchEvent("complete"),a.dispatchEvent("error"))}m.abort=function(a){this.o&&this.vb&&(Cd(this.w,Sd(this,"Aborting")),this.vb=l,this.ac=j,this.o.abort(),this.ac=l,this.md=a||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Vd(this))};m.k=function(){this.o&&(this.vb&&(this.vb=l,this.ac=j,this.o.abort(),this.ac=l),Vd(this,j));Od.h.k.call(this)};m.pi=function(){!this.Cf&&!this.ie&&!this.ac?this.kk():Wd(this)};m.kk=function(){Wd(this)};
function Wd(a){if(a.vb&&"undefined"!=typeof fa)if(a.Se[1]&&4==Xd(a)&&2==Yd(a))Cd(a.w,Sd(a,"Local request error detected and ignored"));else if(a.ie&&4==Xd(a))hd.setTimeout(q(a.pi,a),0);else if(a.dispatchEvent("readystatechange"),4==Xd(a)){Cd(a.w,Sd(a,"Request complete"));a.vb=l;try{var b=Yd(a),c,d;a:switch(b){case 200:case 201:case 202:case 204:case 304:case 1223:d=j;break a;default:d=l}if(!(c=d)){var e;if(e=0===b){var g=String(a.pd).match(Nd)[1]||k;if(!g&&self.location)var i=self.location.protocol,
g=i.substr(0,i.length-1);e=!Pd.test(g?g.toLowerCase():"")}c=e}if(c)a.dispatchEvent("complete"),a.dispatchEvent("success");else{a.md=6;var n;try{n=2<Xd(a)?a.o.statusText:""}catch(t){Cd(a.w,"Can not get status: "+t.message),n=""}a.nd=n+" ["+Yd(a)+"]";Ud(a)}}finally{Vd(a)}}}
function Vd(a,b){if(a.o){var c=a.o,d=a.Se[0]?ma:k;a.o=k;a.Se=k;a.qc&&(hd.clearTimeout(a.qc),a.qc=k);b||a.dispatchEvent("ready");try{c.onreadystatechange=d}catch(e){Bd(a.w,"Problem encountered resetting onreadystatechange: "+e.message)}}}m.zb=function(){return!!this.o};function Xd(a){return a.o?a.o.readyState:0}function Yd(a){try{return 2<Xd(a)?a.o.status:-1}catch(b){return a.w.log(wd,"Can not get status: "+b.message,h),-1}}function D(a){if(a.o)return Gd(a.o.responseText)}
function Zd(a){try{if(!a.o)return k;if("response"in a.o)return a.o.response;switch(a.Ee){case "":case "text":return a.o.responseText;case "arraybuffer":if("mozResponseArrayBuffer"in a.o)return a.o.mozResponseArrayBuffer}Bd(a.w,"Response type "+a.Ee+" is not supported on this browser");return k}catch(b){return Cd(a.w,"Can not get response: "+b.message),k}}function Sd(a,b){return b+" ["+a.Xh+" "+a.pd+" "+Yd(a)+"]"};function C(){w.call(this);this.Zc=[];this.sc={};this.subscribe($d,this.ef,this)}s(C,w);na(C);C.prototype.get=function(a){return this.sc[a]};C.prototype.Lf=function(a){Oc(a,q(function(a){this.Ve(a)},this))};C.prototype.Ve=function(a){var b=new Ub(a);this.Zc.push(b);this.sc[a.id]=b;b.V&&(this.V=b);this.c(ae,b);return b};
C.prototype.ef=function(a,b){if(a&&!this.P||a&&this.P&&this.P.id!=a.id)if(this.me=this.P,this.P=a,y.b().d.Z){var c=a.ga(),d=c&&!Qc(c.media.Mc);x("/_changechannel",qb(),"POST","channel="+a.id+"&friends="+d+"&media_id"+c.media.id+(b?"&forced=true":""));Tb.b().ef(a,this.me)}};function ac(){var a=C.b();if(!a.V){var b=y.b().d;a.V=new Ub({id:b.id||"temp",name:b.name?b.name.split(" ")[0]+"'s Channel":"My Channel",bm:j})}return a.V}var $d="change-channel",ae="add-channel";function be(){w.call(this);this.subscribe(ce,function(a){ac().c(Vb,a);y.b().d.Z&&(x("/_addprogram",qb(),"POST","channel_id="+C.b().V.id+"&media_id="+a.media.id+"&async=true"),Tb.b(),_gaq.push(["_trackEvent","Media","Play",a.media.id]),_gaq.push(["_trackEvent","Users","Play",y.b().d.id]))},this);this.subscribe(de,function(a){y.b().d.Z&&x("/_started",qb(),"POST","media_id="+a.id)},this)}s(be,w);na(be);be.prototype.Ei=ca("ic");be.prototype.ga=da("Ll");
be.prototype.getCurrentTime=function(){return this.ic&&this.ic.getCurrentTime?this.ic.getCurrentTime():0};be.prototype.wh=function(){return this.ic&&this.ic.getCurrentTime?this.ic.getCurrentTime():0};var ce="play-async",de="playing";var ee,fe=!E||Cc(9),ge=!pc&&!E||E&&Cc(9)||pc&&G("1.9.1"),he=E&&!G("9"),ie=E||oc||F;function je(a){a=a.className;return p(a)&&a.match(/\S+/g)||[]}function J(a,b){for(var c=je(a),d=db(arguments,1),e=c.length+d.length,g=c,i=0;i<d.length;i++)Ya(g,d[i])||g.push(d[i]);a.className=c.join(" ");return c.length==e}function K(a,b){var c=je(a),d=db(arguments,1),e,g=d;e=Ta(c,function(a){return!Ya(g,a)});a.className=e.join(" ");return e.length==c.length-d.length}function L(a,b){return Ya(je(a),b)}function M(a,b,c){c?J(a,b):K(a,b)}function ke(a,b){var c=!L(a,b);M(a,b,c);return c};function le(a,b){this.x=ja(a)?a:0;this.y=ja(b)?b:0}le.prototype.clone=function(){return new le(this.x,this.y)};function me(a,b){return new le(a.x-b.x,a.y-b.y)};function jb(a,b){this.width=a;this.height=b}jb.prototype.clone=function(){return new jb(this.width,this.height)};jb.prototype.ceil=function(){this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};jb.prototype.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};jb.prototype.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};function ne(a){return a?new oe(pe(a)):ee||(ee=new oe)}function O(a){return p(a)?document.getElementById(a):a}function qe(a,b){var c=b||document;return c.querySelectorAll&&c.querySelector?c.querySelectorAll("."+a):c.getElementsByClassName?c.getElementsByClassName(a):re("*",a,b)}function P(a,b){var c=b||document,d=k;return(d=c.querySelectorAll&&c.querySelector?c.querySelector("."+a):qe(a,b)[0])||k}
function re(a,b,c){var d=document,c=c||d,a=a&&"*"!=a?a.toUpperCase():"";if(c.querySelectorAll&&c.querySelector&&(a||b))return c.querySelectorAll(a+(b?"."+b:""));if(b&&c.getElementsByClassName){c=c.getElementsByClassName(b);if(a){for(var d={},e=0,g=0,i;i=c[g];g++)a==i.nodeName&&(d[e++]=i);d.length=e;return d}return c}c=c.getElementsByTagName(a||"*");if(b){d={};for(g=e=0;i=c[g];g++)a=i.className,"function"==typeof a.split&&Ya(a.split(/\s+/),b)&&(d[e++]=i);d.length=e;return d}return c}
var se={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function te(a){a=(a||window).document;a=ue(a)?a.documentElement:a.body;return new jb(a.clientWidth,a.clientHeight)}function Q(a,b,c){return ve(document,arguments)}
function ve(a,b){var c=b[0],d=b[1];if(!fe&&d&&(d.name||d.type)){c=["<",c];d.name&&c.push(' name="',Ha(d.name),'"');if(d.type){c.push(' type="',Ha(d.type),'"');var e={};Tc(e,d);delete e.type;d=e}c.push(">");c=c.join("")}var g=a.createElement(c);d&&(p(d)?g.className=d:pa(d)?J.apply(k,[g].concat(d)):Oc(d,function(a,b){"style"==b?g.style.cssText=a:"class"==b?g.className=a:"for"==b?g.htmlFor=a:b in se?g.setAttribute(se[b],a):0==b.lastIndexOf("aria-",0)||0==b.lastIndexOf("data-",0)?g.setAttribute(b,a):
g[b]=a}));if(2<b.length){d=function(b){b&&g.appendChild(p(b)?a.createTextNode(b):b)};for(c=2;c<b.length;c++)if(e=b[c],qa(e)&&!(sa(e)&&0<e.nodeType)){var i=v,n;a:{if((n=e)&&"number"==typeof n.length){if(sa(n)){n="function"==typeof n.item||"string"==typeof n.item;break a}if(ra(n)){n="function"==typeof n.item;break a}}n=l}i(n?ab(e):e,d)}else d(e)}return g}function ue(a){return"CSS1Compat"==a.compatMode}function we(a){for(var b;b=a.firstChild;)a.removeChild(b)}
function xe(a,b,c){a.insertBefore(b,a.childNodes[c]||k)}function ye(a){a&&a.parentNode&&a.parentNode.removeChild(a)}function ze(a){return ge&&a.children!=h?a.children:Ta(a.childNodes,function(a){return 1==a.nodeType})}function Ae(a){for(;a&&1!=a.nodeType;)a=a.nextSibling;return a}function Be(a){if(ie)return a.parentElement;a=a.parentNode;return sa(a)&&1==a.nodeType?a:k}
function Ce(a,b){if(a.contains&&1==b.nodeType)return a==b||a.contains(b);if("undefined"!=typeof a.compareDocumentPosition)return a==b||Boolean(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a}function pe(a){return 9==a.nodeType?a:a.ownerDocument||a.document}
function De(a,b){if("textContent"in a)a.textContent=b;else if(a.firstChild&&3==a.firstChild.nodeType){for(;a.lastChild!=a.firstChild;)a.removeChild(a.lastChild);a.firstChild.data=b}else we(a),a.appendChild(pe(a).createTextNode(b))}var Ee={SCRIPT:1,STYLE:1,HEAD:1,IFRAME:1,OBJECT:1},Fe={IMG:" ",BR:"\n"};function Ge(a){var b=a.getAttributeNode("tabindex");return b&&b.specified?(a=a.tabIndex,"number"==typeof a&&0<=a&&32768>a):l}
function He(a){if(he&&"innerText"in a)a=a.innerText.replace(/(\r\n|\r|\n)/g,"\n");else{var b=[];Ie(a,b,j);a=b.join("")}a=a.replace(/ \xAD /g," ").replace(/\xAD/g,"");a=a.replace(/\u200B/g,"");he||(a=a.replace(/ +/g," "));" "!=a&&(a=a.replace(/^\s*/,""));return a}function Je(a){var b=[];Ie(a,b,l);return b.join("")}
function Ie(a,b,c){if(!(a.nodeName in Ee))if(3==a.nodeType)c?b.push(String(a.nodeValue).replace(/(\r\n|\r|\n)/g,"")):b.push(a.nodeValue);else if(a.nodeName in Fe)b.push(Fe[a.nodeName]);else for(a=a.firstChild;a;)Ie(a,b,c),a=a.nextSibling}function Ke(a,b,c){if(!b&&!c)return k;b=b?b.toUpperCase():k;a:{for(var d=0;a;){if((!b||a.nodeName==b)&&(!c||L(a,c))){c=a;break a}a=a.parentNode;d++}c=k}return c}function oe(a){this.t=a||ha.document||document}m=oe.prototype;m.Ja=ne;
m.a=function(a){return p(a)?this.t.getElementById(a):a};m.O=function(a,b,c){return ve(this.t,arguments)};m.createElement=function(a){return this.t.createElement(a)};m.createTextNode=function(a){return this.t.createTextNode(a)};function Le(a){return ue(a.t)}function Me(a){var b=a.t,a=!F&&ue(b)?b.documentElement:b.body,b=b.parentWindow||b.defaultView;return new le(b.pageXOffset||a.scrollLeft,b.pageYOffset||a.scrollTop)}m.appendChild=function(a,b){a.appendChild(b)};m.vh=ze;
function Ne(a,b){return b.firstElementChild!=h?b.firstElementChild:Ae(b.firstChild)}m.contains=Ce;E&&G(8);var Oe={};function Pe(a,b,c){a.innerHTML=b(c||Oe,h,h)}function R(a,b){var c;a:if(c=(new oe(h)||ne()).createElement("DIV"),c.innerHTML=a(b||Oe,h,h),1==c.childNodes.length){var d=c.firstChild;if(1==d.nodeType){c=d;break a}}return c}function S(a){return"object"===typeof a&&a&&0===a.Il?a.content:String(a).replace(Qe,Re)}
var Se={"\x00":"&#0;",'"':"&quot;","&":"&amp;","'":"&#39;","<":"&lt;",">":"&gt;","\t":"&#9;","\n":"&#10;","\x0B":"&#11;","\f":"&#12;","\r":"&#13;"," ":"&#32;","-":"&#45;","/":"&#47;","=":"&#61;","`":"&#96;","\u0085":"&#133;","\u00a0":"&#160;","\u2028":"&#8232;","\u2029":"&#8233;"};function Re(a){return Se[a]}var Qe=/[\x00\x22\x26\x27\x3c\x3e]/g;function Te(a){u.call(this);this.J=a;this.Q=[]}s(Te,u);var Ue=[];function T(a,b,c,d,e){pa(c)||(Ue[0]=c,c=Ue);for(var g=0;g<c.length;g++){var i=H(b,c[g],d||a,e||l,a.J||a);a.Q.push(i)}return a}function Ve(a,b,c,d,e,g){if(pa(c))for(var i=0;i<c.length;i++)Ve(a,b,c[i],d,e,g);else{a:{d=d||a;g=g||a.J||a;e=!!e;if(b=ad(b,c,e))for(c=0;c<b.length;c++)if(!b[c].lc&&b[c].Fc==d&&b[c].capture==e&&b[c].ge==g){b=b[c];break a}b=k}b&&(b=b.key,bd(b),Za(a.Q,b))}return a}function We(a){v(a.Q,bd);a.Q.length=0}
Te.prototype.k=function(){Te.h.k.call(this);We(this)};Te.prototype.handleEvent=function(){f(Error("EventHandler.handleEvent not implemented"))};function Xe(){u.call(this);this.s=Ye;this.jh=this.startTime=k}s(Xe,fd);var Ye=0;Xe.prototype.Wf=function(){this.Va("begin")};Xe.prototype.we=function(){this.Va("end")};Xe.prototype.Va=function(a){this.dispatchEvent(a)};function Ze(a,b,c){u.call(this);this.Db=a;this.ja=b||0;this.J=c;this.cf=q(this.dd,this)}s(Ze,u);m=Ze.prototype;m.ha=0;m.k=function(){Ze.h.k.call(this);this.stop();delete this.Db;delete this.J};m.start=function(a){this.stop();this.ha=I(this.cf,ja(a)?a:this.ja)};m.stop=function(){this.zb()&&hd.clearTimeout(this.ha);this.ha=0};m.qh=function(){this.stop();this.dd()};m.zb=function(){return 0!=this.ha};m.dd=function(){this.ha=0;this.Db&&this.Db.call(this.J)};var qb;qb=ea(k);var $e={},af=k;function bf(a){a=ta(a);delete $e[a];Qc($e)&&af&&af.stop()}function cf(){af||(af=new Ze(function(){var a=r();Oc($e,function(c){df(c,a)});Qc($e)||cf()},20));var a=af;a.zb()||a.start()};function ef(a,b,c,d){Xe.call(this);(!pa(a)||!pa(b))&&f(Error("Start and end parameters must be arrays"));a.length!=b.length&&f(Error("Start and end points must be the same length"));this.Gd=a;this.oj=b;this.duration=c;this.Jg=d;this.coords=[];this.Pd=l}s(ef,Xe);m=ef.prototype;m.rh=0;m.Ba=0;m.If=k;
m.play=function(a){if(a||this.s==Ye)this.Ba=0,this.coords=this.Gd;else if(1==this.s)return l;bf(this);this.startTime=a=r();-1==this.s&&(this.startTime-=this.duration*this.Ba);this.jh=this.startTime+this.duration;this.If=this.startTime;this.Ba||this.Wf();this.Va("play");-1==this.s&&this.Va("resume");this.s=1;var b=ta(this);b in $e||($e[b]=this);cf();df(this,a);return j};m.stop=function(a){bf(this);this.s=Ye;a&&(this.Ba=1);ff(this,this.Ba);this.Va("stop");this.we()};
m.pause=function(){1==this.s&&(bf(this),this.s=-1,this.Va("pause"))};m.wh=da("Ba");m.k=function(){this.s==Ye||this.stop(l);this.Va("destroy");ef.h.k.call(this)};function df(a,b){a.Ba=(b-a.startTime)/(a.jh-a.startTime);1<=a.Ba&&(a.Ba=1);a.rh=1E3/(b-a.If);a.If=b;ff(a,a.Ba);1==a.Ba?(a.s=Ye,bf(a),a.Va("finish"),a.we()):1==a.s&&a.Vf()}function ff(a,b){ra(a.Jg)&&(b=a.Jg(b));a.coords=Array(a.Gd.length);for(var c=0;c<a.Gd.length;c++)a.coords[c]=(a.oj[c]-a.Gd[c])*b+a.Gd[c]}m.Vf=function(){this.Va("animate")};
m.Va=function(a){this.dispatchEvent(new gf(a,this))};function gf(a,b){Gc.call(this,a);this.coords=b.coords;this.x=b.coords[0];this.y=b.coords[1];this.ym=b.coords[2];this.duration=b.duration;this.Ba=b.wh();this.Wl=b.rh;this.state=b.s;this.Dl=b}s(gf,Gc);function hf(a,b,c,d){this.top=a;this.right=b;this.bottom=c;this.left=d}hf.prototype.clone=function(){return new hf(this.top,this.right,this.bottom,this.left)};hf.prototype.contains=function(a){return!this||!a?l:a instanceof hf?a.left>=this.left&&a.right<=this.right&&a.top>=this.top&&a.bottom<=this.bottom:a.x>=this.left&&a.x<=this.right&&a.y>=this.top&&a.y<=this.bottom};function jf(a,b,c,d){this.left=a;this.top=b;this.width=c;this.height=d}jf.prototype.clone=function(){return new jf(this.left,this.top,this.width,this.height)};jf.prototype.contains=function(a){return a instanceof jf?this.left<=a.left&&this.left+this.width>=a.left+a.width&&this.top<=a.top&&this.top+this.height>=a.top+a.height:a.x>=this.left&&a.x<=this.left+this.width&&a.y>=this.top&&a.y<=this.top+this.height};function kf(a,b,c){p(b)?lf(a,c,b):Oc(b,ya(lf,a))}function lf(a,b,c){a.style[Oa(c)]=b}function nf(a,b){var c=pe(a);return c.defaultView&&c.defaultView.getComputedStyle&&(c=c.defaultView.getComputedStyle(a,k))?c[b]||c.getPropertyValue(b)||"":""}function of(a,b){return a.currentStyle?a.currentStyle[b]:k}function pf(a,b){return nf(a,b)||of(a,b)||a.style&&a.style[b]}
function qf(a){var b=a.getBoundingClientRect();E&&(a=a.ownerDocument,b.left-=a.documentElement.clientLeft+a.body.clientLeft,b.top-=a.documentElement.clientTop+a.body.clientTop);return b}
function rf(a){if(E&&!Cc(8))return a.offsetParent;for(var b=pe(a),c=pf(a,"position"),d="fixed"==c||"absolute"==c,a=a.parentNode;a&&a!=b;a=a.parentNode)if(c=pf(a,"position"),d=d&&"static"==c&&a!=b.documentElement&&a!=b.body,!d&&(a.scrollWidth>a.clientWidth||a.scrollHeight>a.clientHeight||"fixed"==c||"absolute"==c||"relative"==c))return a;return k}
function sf(a){for(var b=new hf(0,Infinity,Infinity,0),c=ne(a),d=c.t.body,e=c.t.documentElement,g=!F&&ue(c.t)?c.t.documentElement:c.t.body;a=rf(a);)if((!E||0!=a.clientWidth)&&(!F||0!=a.clientHeight||a!=d)&&a!=d&&a!=e&&"visible"!=pf(a,"overflow")){var i=tf(a),n;n=a;if(pc&&!G("1.9")){var t=parseFloat(nf(n,"borderLeftWidth"));if(uf(n))var z=n.offsetWidth-n.clientWidth-t-parseFloat(nf(n,"borderRightWidth")),t=t+z;n=new le(t,parseFloat(nf(n,"borderTopWidth")))}else n=new le(n.clientLeft,n.clientTop);i.x+=
n.x;i.y+=n.y;b.top=Math.max(b.top,i.y);b.right=Math.min(b.right,i.x+a.clientWidth);b.bottom=Math.min(b.bottom,i.y+a.clientHeight);b.left=Math.max(b.left,i.x)}d=g.scrollLeft;g=g.scrollTop;b.left=Math.max(b.left,d);b.top=Math.max(b.top,g);c=te(c.t.parentWindow||c.t.defaultView);b.right=Math.min(b.right,d+c.width);b.bottom=Math.min(b.bottom,g+c.height);return 0<=b.top&&0<=b.left&&b.bottom>b.top&&b.right>b.left?b:k}
function tf(a){var b,c=pe(a),d=pf(a,"position"),e=pc&&c.getBoxObjectFor&&!a.getBoundingClientRect&&"absolute"==d&&(b=c.getBoxObjectFor(a))&&(0>b.screenX||0>b.screenY),g=new le(0,0),i;b=c?pe(c):document;i=E&&!Cc(9)&&!Le(ne(b))?b.body:b.documentElement;if(a==i)return g;if(a.getBoundingClientRect)b=qf(a),a=Me(ne(c)),g.x=b.left+a.x,g.y=b.top+a.y;else if(c.getBoxObjectFor&&!e)b=c.getBoxObjectFor(a),a=c.getBoxObjectFor(i),g.x=b.screenX-a.screenX,g.y=b.screenY-a.screenY;else{b=a;do{g.x+=b.offsetLeft;g.y+=
b.offsetTop;b!=a&&(g.x+=b.clientLeft||0,g.y+=b.clientTop||0);if(F&&"fixed"==pf(b,"position")){g.x+=c.body.scrollLeft;g.y+=c.body.scrollTop;break}b=b.offsetParent}while(b&&b!=a);if(oc||F&&"absolute"==d)g.y-=c.body.offsetTop;for(b=a;(b=rf(b))&&b!=c.body&&b!=i;)if(g.x-=b.scrollLeft,!oc||"TR"!=b.tagName)g.y-=b.scrollTop}return g}function vf(a,b){"number"==typeof a&&(a=(b?Math.round(a):a)+"px");return a}function wf(a,b){a.style.height=vf(b,j)}
function U(a){if("none"!=pf(a,"display"))return xf(a);var b=a.style,c=b.display,d=b.visibility,e=b.position;b.visibility="hidden";b.position="absolute";b.display="inline";a=xf(a);b.display=c;b.position=e;b.visibility=d;return a}function xf(a){var b=a.offsetWidth,c=a.offsetHeight,d=F&&!b&&!c;return(!ja(b)||d)&&a.getBoundingClientRect?(a=qf(a),new jb(a.right-a.left,a.bottom-a.top)):new jb(b,c)}
function yf(a,b){var c=a.style;"opacity"in c?c.opacity=b:"MozOpacity"in c?c.MozOpacity=b:"filter"in c&&(c.filter=""===b?"":"alpha(opacity="+100*b+")")}function V(a,b){a.style.display=b?"":"none"}function uf(a){return"rtl"==pf(a,"direction")}var zf=pc?"MozUserSelect":F?"WebkitUserSelect":k;
function Af(a,b){if(/^\d+px?$/.test(b))return parseInt(b,10);var c=a.style.left,d=a.runtimeStyle.left;a.runtimeStyle.left=a.currentStyle.left;a.style.left=b;var e=a.style.pixelLeft;a.style.left=c;a.runtimeStyle.left=d;return e}
function Bf(a,b){if(E){var c=Af(a,of(a,b+"Left")),d=Af(a,of(a,b+"Right")),e=Af(a,of(a,b+"Top")),g=Af(a,of(a,b+"Bottom"));return new hf(e,d,g,c)}c=nf(a,b+"Left");d=nf(a,b+"Right");e=nf(a,b+"Top");g=nf(a,b+"Bottom");return new hf(parseFloat(e),parseFloat(d),parseFloat(g),parseFloat(c))}var Cf={thin:2,medium:4,thick:6};function Df(a,b){if("none"==of(a,b+"Style"))return 0;var c=of(a,b+"Width");return c in Cf?Cf[c]:Af(a,c)}
function Ef(a){if(E){var b=Df(a,"borderLeft"),c=Df(a,"borderRight"),d=Df(a,"borderTop"),a=Df(a,"borderBottom");return new hf(d,c,a,b)}b=nf(a,"borderLeftWidth");c=nf(a,"borderRightWidth");d=nf(a,"borderTopWidth");a=nf(a,"borderBottomWidth");return new hf(parseFloat(d),parseFloat(c),parseFloat(a),parseFloat(b))}var Ff=/matrix\([0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, ([0-9\.\-]+)p?x?, ([0-9\.\-]+)p?x?\)/;function Gf(a,b,c,d,e){ef.call(this,b,c,d,e);this.element=a}s(Gf,ef);m=Gf.prototype;m.Ne=ma;m.Qh=function(){ja(this.Na)||(this.Na=uf(this.element));return this.Na};m.Vf=function(){this.Ne();Gf.h.Vf.call(this)};m.we=function(){this.Ne();Gf.h.we.call(this)};m.Wf=function(){this.Ne();Gf.h.Wf.call(this)};function Hf(a,b,c,d,e){(2!=b.length||2!=c.length)&&f(Error("Start and end points must be 2D"));Gf.apply(this,arguments)}s(Hf,Gf);
Hf.prototype.Ne=function(){if(this.Pd){var a=this.element,b=Math.round(this.coords[0]),b=Math.max(b,0);a.scrollLeft=uf(a)?pc?-b:!E||!G("8")?a.scrollWidth-b-a.clientWidth:b:b}else this.element.scrollLeft=Math.round(this.coords[0]);this.element.scrollTop=Math.round(this.coords[1])};function If(a){return 1-Math.pow(1-a,3)};/*
 Portions of this code are from MochiKit, received by
 The Closure Authors under the MIT license. All other code is Copyright
 2005-2009 The Closure Authors. All Rights Reserved.
*/
function Jf(){}na(Jf);Jf.prototype.bk=0;Jf.b();function X(a){u.call(this);this.Vb=a||ne();this.Na=Kf}s(X,fd);X.prototype.Mj=Jf.b();var Kf=k;function Lf(a,b){switch(a){case 1:return b?"disable":"enable";case 2:return b?"highlight":"unhighlight";case 4:return b?"activate":"deactivate";case 8:return b?"select":"unselect";case 16:return b?"check":"uncheck";case 32:return b?"focus":"blur";case 64:return b?"open":"close"}f(Error("Invalid component state"))}m=X.prototype;m.ha=k;m.U=l;m.e=k;m.Na=k;m.M=k;m.H=k;m.Y=k;m.$=k;m.$i=l;
function Mf(a){return a.ha||(a.ha=":"+(a.Mj.bk++).toString(36))}m.a=da("e");m.i=function(){return this.Ac||(this.Ac=new Te(this))};m.He=function(a){this==a&&f(Error("Unable to set parent component"));a&&(this.H&&this.ha&&this.H.$&&this.ha&&(this.ha in this.H.$&&this.H.$[this.ha])&&this.H!=a)&&f(Error("Unable to set parent component"));this.H=a;X.h.rg.call(this,a)};m.getParent=da("H");m.rg=function(a){this.H&&this.H!=a&&f(Error("Method not supported"));X.h.rg.call(this,a)};m.Ja=da("Vb");
m.O=function(){this.e=this.Vb.createElement("div")};function Nf(a,b){a.U&&f(Error("Component already rendered"));a.e||a.O();b?b.insertBefore(a.e,k):a.Vb.t.body.appendChild(a.e);(!a.H||a.H.U)&&a.z()}m.j=function(a){this.U&&f(Error("Component already rendered"));if(a&&this.Rb(a)){this.$i=j;if(!this.Vb||this.Vb.t!=pe(a))this.Vb=ne(a);this.q(a);this.z()}else f(Error("Invalid element to decorate"))};m.Rb=ea(j);m.q=ca("e");m.z=function(){this.U=j;Of(this,function(a){!a.U&&a.a()&&a.z()})};
m.Zb=function(){Of(this,function(a){a.U&&a.Zb()});this.Ac&&We(this.Ac);this.U=l};m.k=function(){X.h.k.call(this);this.U&&this.Zb();this.Ac&&(this.Ac.aa(),delete this.Ac);Of(this,function(a){a.aa()});!this.$i&&this.e&&ye(this.e);this.H=this.M=this.e=this.$=this.Y=k};
function Pf(a,b){var c=a.Y?a.Y.length:0;b.U&&!a.U&&f(Error("Component already rendered"));(0>c||c>(a.Y?a.Y.length:0))&&f(Error("Child component index out of bounds"));if(!a.$||!a.Y)a.$={},a.Y=[];if(b.getParent()==a){var d=Mf(b);a.$[d]=b;Za(a.Y,b)}else Rc(a.$,Mf(b),b);b.He(a);cb(a.Y,c,0,b);b.U&&a.U&&b.getParent()==a?(d=a.xa(),d.insertBefore(b.a(),d.childNodes[c]||k)):a.U&&(!b.U&&b.e&&b.e.parentNode)&&b.z()}m.xa=da("e");m.Qh=function(){this.Na==k&&(this.Na=uf(this.U?this.e:this.Vb.t.body));return this.Na};
m.oc=function(a){this.U&&f(Error("Component already rendered"));this.Na=a};function Of(a,b){a.Y&&v(a.Y,b,h)}m.removeChild=function(a,b){if(a){var c=p(a)?a:Mf(a),a=this.$&&c?(c in this.$?this.$[c]:h)||k:k;c&&a&&(rb(this.$,c),Za(this.Y,a),b&&(a.Zb(),a.e&&ye(a.e)),a.He(k))}a||f(Error("Child is not in parent component"));return a};function Qf(a,b,c,d,e){if(!E&&(!F||!G("525")))return j;if(jc&&e)return Rf(a);if(e&&!d||!c&&(17==b||18==b)||E&&d&&b==a)return l;switch(a){case 13:return!(E&&Cc(9));case 27:return!F}return Rf(a)}function Rf(a){if(48<=a&&57>=a||96<=a&&106>=a||65<=a&&90>=a||F&&0==a)return j;switch(a){case 32:case 63:case 107:case 109:case 110:case 111:case 186:case 59:case 189:case 187:case 61:case 188:case 190:case 191:case 192:case 222:case 219:case 220:case 221:return j;default:return l}}
function Sf(a){switch(a){case 61:return 187;case 59:return 186;case 224:return 91;case 0:return 224;default:return a}};function Tf(){}var Uf;na(Tf);m=Tf.prototype;m.zc=ba();m.O=function(a){var b=a.Ja().O("div",Vf(this,a).join(" "),a.Ta);Wf(this,a,b);return b};m.xa=function(a){return a};m.ed=function(a,b,c){if(a=a.a?a.a():a)if(E&&!G("7")){var d=Xf(je(a),b);d.push(b);ya(c?J:K,a).apply(k,d)}else M(a,b,c)};m.Rb=ea(j);
m.j=function(a,b){if(b.id){var c=b.id;a.H&&a.H.$&&(rb(a.H.$,a.ha),Rc(a.H.$,c,a));a.ha=c}(c=this.xa(b))&&c.firstChild?(c=c.firstChild.nextSibling?ab(c.childNodes):c.firstChild,a.Ta=c):a.Ta=k;var d=0,e=this.fa(),g=this.fa(),i=l,n=l,c=l,t=je(b);v(t,function(a){if(!i&&a==e)i=j,g==e&&(n=j);else if(!n&&a==g)n=j;else{var b=d;if(!this.Ni){this.Xd||Yf(this);var c=this.Xd,t={},z;for(z in c)t[c[z]]=z;this.Ni=t}a=parseInt(this.Ni[a],10);d=b|(isNaN(a)?0:a)}},this);a.s=d;i||(t.push(e),g==e&&(n=j));n||t.push(g);
var z=a.Ia;z&&t.push.apply(t,z);if(E&&!G("7")){var A=Xf(t);0<A.length&&(t.push.apply(t,A),c=j)}if(!i||!n||z||c)b.className=t.join(" ");Wf(this,a,b);return b};m.Lh=function(a){a.Qh()&&this.oc(a.a(),j);a.isEnabled()&&this.Pc(a,a.Xa())};function Wf(a,b,c){b.isEnabled()||a.Pa(c,1,j);Y(b,8)&&a.Pa(c,8,j);b.ba&16&&a.Pa(c,16,Y(b,16));b.ba&64&&a.Pa(c,64,Y(b,64))}
m.Oc=function(a,b){var c=!b,d=E||oc?a.getElementsByTagName("*"):k;if(zf){if(c=c?"none":"",a.style[zf]=c,d)for(var e=0,g;g=d[e];e++)g.style[zf]=c}else if(E||oc)if(c=c?"on":"",a.setAttribute("unselectable",c),d)for(e=0;g=d[e];e++)g.setAttribute("unselectable",c)};m.oc=function(a,b){this.ed(a,this.fa()+"-rtl",b)};m.Gf=function(a){var b;return a.ba&32&&(b=a.yb())?Ge(b):l};
m.Pc=function(a,b){var c;if(a.ba&32&&(c=a.yb())){if(!b&&a.je()){try{c.blur()}catch(d){}a.je()&&a.yh()}Ge(c)!=b&&(b?c.tabIndex=0:(c.tabIndex=-1,c.removeAttribute("tabIndex")))}};m.ma=function(a,b){V(a,b)};m.la=function(a,b,c){var d=a.a();if(d){var e=Zf(this,b);e&&this.ed(a,e,c);this.Pa(d,b,c)}};m.Pa=function(a,b,c){Uf||(Uf={1:"disabled",8:"selected",16:"checked",64:"expanded"});(b=Uf[b])&&a.setAttribute("aria-"+b,c)};
m.nc=function(a,b){var c=this.xa(a);if(c&&(we(c),b))if(p(b))De(c,b);else{var d=function(a){if(a){var b=pe(c);c.appendChild(p(a)?b.createTextNode(a):a)}};pa(b)?v(b,d):qa(b)&&!("nodeType"in b)?v(ab(b),d):d(b)}};m.yb=function(a){return a.a()};m.fa=ea("goog-control");function Vf(a,b){var c=a.fa(),d=[c],e=a.fa();e!=c&&d.push(e);c=b.s;for(e=[];c;){var g=c&-c;e.push(Zf(a,g));c&=~g}d.push.apply(d,e);(c=b.Ia)&&d.push.apply(d,c);E&&!G("7")&&d.push.apply(d,Xf(d));return d}
function Xf(a,b){var c=[];b&&(a=a.concat([b]));v([],function(d){Va(d,ya(Ya,a))&&(!b||Ya(d,b))&&c.push(d.join("_"))});return c}function Zf(a,b){a.Xd||Yf(a);return a.Xd[b]}function Yf(a){var b=a.fa();a.Xd={1:b+"-disabled",2:b+"-hover",4:b+"-active",8:b+"-selected",16:b+"-checked",32:b+"-focused",64:b+"-open"}};function $f(){}s($f,Tf);na($f);m=$f.prototype;m.zc=ea("button");m.Pa=function(a,b,c){16==b?a.setAttribute("aria-pressed",c):$f.h.Pa.call(this,a,b,c)};m.O=function(a){var b=$f.h.O.call(this,a),c=a.gd();c&&this.sg(b,c);(c=a.n())&&this.sa(b,c);a.ba&16&&this.Pa(b,16,Y(a,16));return b};m.j=function(a,b){var b=$f.h.j.call(this,a,b),c=this.n(b);a.Gg=c;a.Ag=this.gd(b);a.ba&16&&this.Pa(b,16,Y(a,16));return b};m.n=ma;m.sa=ma;m.gd=function(a){return a.title};m.sg=function(a,b){a&&(a.title=b||"")};m.fa=ea("goog-button");function ag(a,b){u.call(this);a&&bg(this,a,b)}s(ag,fd);m=ag.prototype;m.e=k;m.ke=k;m.Hf=k;m.le=k;m.Bb=-1;m.Ab=-1;m.$e=l;
var cg={3:13,12:144,63232:38,63233:40,63234:37,63235:39,63236:112,63237:113,63238:114,63239:115,63240:116,63241:117,63242:118,63243:119,63244:120,63245:121,63246:122,63247:123,63248:44,63272:46,63273:36,63275:35,63276:33,63277:34,63289:144,63302:45},dg={Up:38,Down:40,Left:37,Right:39,Enter:13,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"U+007F":46,Home:36,End:35,PageUp:33,PageDown:34,Insert:45},eg=E||F&&G("525"),fg=jc&&pc;m=ag.prototype;
m.Ej=function(a){if(F&&(17==this.Bb&&!a.ctrlKey||18==this.Bb&&!a.altKey))this.Ab=this.Bb=-1;eg&&!Qf(a.keyCode,this.Bb,a.shiftKey,a.ctrlKey,a.altKey)?this.handleEvent(a):(this.Ab=pc?Sf(a.keyCode):a.keyCode,fg&&(this.$e=a.altKey))};m.Gj=function(a){this.Ab=this.Bb=-1;this.$e=a.altKey};
m.handleEvent=function(a){var b=a.da,c,d,e=b.altKey;E&&"keypress"==a.type?(c=this.Ab,d=13!=c&&27!=c?b.keyCode:0):F&&"keypress"==a.type?(c=this.Ab,d=0<=b.charCode&&63232>b.charCode&&Rf(c)?b.charCode:0):oc?(c=this.Ab,d=Rf(c)?b.keyCode:0):(c=b.keyCode||this.Ab,d=b.charCode||0,fg&&(e=this.$e),jc&&(63==d&&224==c)&&(c=191));var g=c,i=b.keyIdentifier;c?63232<=c&&c in cg?g=cg[c]:25==c&&a.shiftKey&&(g=9):i&&i in dg&&(g=dg[i]);a=g==this.Bb;this.Bb=g;b=new gg(g,d,a,b);b.altKey=e;this.dispatchEvent(b)};m.a=da("e");
function bg(a,b,c){a.le&&a.detach();a.e=b;a.ke=H(a.e,"keypress",a,c);a.Hf=H(a.e,"keydown",a.Ej,c,a);a.le=H(a.e,"keyup",a.Gj,c,a)}m.detach=function(){this.ke&&(bd(this.ke),bd(this.Hf),bd(this.le),this.le=this.Hf=this.ke=k);this.e=k;this.Ab=this.Bb=-1};m.k=function(){ag.h.k.call(this);this.detach()};function gg(a,b,c,d){d&&this.init(d,h);this.type="key";this.keyCode=a;this.charCode=b;this.repeat=c}s(gg,Jc);function hg(a,b){a||f(Error("Invalid class name "+a));ra(b)||f(Error("Invalid decorator function "+b))}var ig={};function jg(a,b,c){X.call(this,c);if(!b){for(var b=this.constructor,d;b;){d=ta(b);if(d=ig[d])break;b=b.h?b.h.constructor:k}b=d?ra(d.b)?d.b():new d:k}this.F=b;this.Ta=a}s(jg,X);m=jg.prototype;m.Ta=k;m.s=0;m.ba=39;m.fb=255;m.Sk=0;m.Re=j;m.Ia=k;m.yf=j;m.Sd=l;m.xi=k;function kg(a){a.U&&l!=a.yf&&lg(a,l);a.yf=l}m.yb=function(){return this.F.yb(this)};
m.ed=function(a,b){b?a&&(this.Ia?Ya(this.Ia,a)||this.Ia.push(a):this.Ia=[a],this.F.ed(this,a,j)):a&&this.Ia&&(Za(this.Ia,a),0==this.Ia.length&&(this.Ia=k),this.F.ed(this,a,l))};m.O=function(){var a=this.F.O(this);this.e=a;var b=this.xi||this.F.zc();b&&a.setAttribute("role",b);this.Sd||this.F.Oc(a,l);this.Xa()||this.F.ma(a,l)};m.xa=function(){return this.F.xa(this.a())};m.Rb=function(a){return this.F.Rb(a)};
m.q=function(a){this.e=a=this.F.j(this,a);var b=this.xi||this.F.zc();b&&a.setAttribute("role",b);this.Sd||this.F.Oc(a,l);this.Re="none"!=a.style.display};m.z=function(){jg.h.z.call(this);this.F.Lh(this);if(this.ba&-2&&(this.yf&&lg(this,j),this.ba&32)){var a=this.yb();if(a){var b=this.Ec||(this.Ec=new ag);bg(b,a);T(T(T(this.i(),b,"key",this.Fj),a,"focus",this.Cj),a,"blur",this.yh)}}};
function lg(a,b){var c=a.i(),d=a.a();b?(T(T(T(T(c,d,"mouseover",a.Dh),d,"mousedown",a.Bh),d,"mouseup",a.Eh),d,"mouseout",a.Ch),a.fe!=ma&&T(c,d,"contextmenu",a.fe),E&&T(c,d,"dblclick",a.zh)):(Ve(Ve(Ve(Ve(c,d,"mouseover",a.Dh),d,"mousedown",a.Bh),d,"mouseup",a.Eh),d,"mouseout",a.Ch),a.fe!=ma&&Ve(c,d,"contextmenu",a.fe),E&&Ve(c,d,"dblclick",a.zh))}m.Zb=function(){jg.h.Zb.call(this);this.Ec&&this.Ec.detach();this.Xa()&&this.isEnabled()&&this.F.Pc(this,l)};
m.k=function(){jg.h.k.call(this);this.Ec&&(this.Ec.aa(),delete this.Ec);delete this.F;this.Ia=this.Ta=k};m.nc=function(a){this.F.nc(this.a(),a);this.Ta=a};m.uh=function(){var a=this.Ta;return!a?"":(p(a)?a:pa(a)?Ua(a,Je).join(""):He(a)).replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")};m.oc=function(a){jg.h.oc.call(this,a);var b=this.a();b&&this.F.oc(b,a)};m.Oc=function(a){this.Sd=a;var b=this.a();b&&this.F.Oc(b,a)};m.Xa=da("Re");
m.ma=function(a,b){if(b||this.Re!=a&&this.dispatchEvent(a?"show":"hide")){var c=this.a();c&&this.F.ma(c,a);this.isEnabled()&&this.F.Pc(this,a);this.Re=a;return j}return l};m.isEnabled=function(){return!Y(this,1)};m.Ea=function(a){var b=this.getParent();if((!b||"function"!=typeof b.isEnabled||b.isEnabled())&&mg(this,1,!a))a||(this.setActive(l),ng(this,l)),this.Xa()&&this.F.Pc(this,a),this.la(1,!a)};function ng(a,b){mg(a,2,b)&&a.la(2,b)}m.zb=function(){return Y(this,4)};
m.setActive=function(a){mg(this,4,a)&&this.la(4,a)};function og(a,b){mg(a,16,b)&&a.la(16,b)}m.je=function(){return Y(this,32)};m.ra=function(a){mg(this,32,a)&&this.la(32,a)};function Y(a,b){return!!(a.s&b)}m.la=function(a,b){this.ba&a&&b!=Y(this,a)&&(this.F.la(this,a,b),this.s=b?this.s|a:this.s&~a)};function pg(a,b,c){a.U&&(Y(a,b)&&!c)&&f(Error("Component already rendered"));!c&&Y(a,b)&&a.la(b,l);a.ba=c?a.ba|b:a.ba&~b}function qg(a,b){return!!(a.fb&b)&&!!(a.ba&b)}
function mg(a,b,c){return!!(a.ba&b)&&Y(a,b)!=c&&(!(a.Sk&b)||a.dispatchEvent(Lf(b,c)))&&!a.Zd}m.Dh=function(a){(!a.relatedTarget||!Ce(this.a(),a.relatedTarget))&&(this.dispatchEvent("enter")&&this.isEnabled()&&qg(this,2))&&ng(this,j)};m.Ch=function(a){if((!a.relatedTarget||!Ce(this.a(),a.relatedTarget))&&this.dispatchEvent("leave"))qg(this,4)&&this.setActive(l),qg(this,2)&&ng(this,l)};m.fe=ma;
m.Bh=function(a){this.isEnabled()&&(qg(this,2)&&ng(this,j),Lc(a)&&(qg(this,4)&&this.setActive(j),this.F.Gf(this)&&this.yb().focus()));!this.Sd&&Lc(a)&&a.preventDefault()};m.Eh=function(a){this.isEnabled()&&(qg(this,2)&&ng(this,j),this.zb()&&(this.wd(a)&&qg(this,4))&&this.setActive(l))};m.zh=function(a){this.isEnabled()&&this.wd(a)};
m.wd=function(a){qg(this,16)&&og(this,!Y(this,16));qg(this,8)&&mg(this,8,j)&&this.la(8,j);if(qg(this,64)){var b=!Y(this,64);mg(this,64,b)&&this.la(64,b)}b=new Gc("action",this);a&&(b.altKey=a.altKey,b.ctrlKey=a.ctrlKey,b.metaKey=a.metaKey,b.shiftKey=a.shiftKey,b.eg=a.eg);return this.dispatchEvent(b)};m.Cj=function(){qg(this,32)&&this.ra(j)};m.yh=function(){qg(this,4)&&this.setActive(l);qg(this,32)&&this.ra(l)};
m.Fj=function(a){return this.Xa()&&this.isEnabled()&&this.xf(a)?(a.preventDefault(),a.stopPropagation(),j):l};m.xf=function(a){return 13==a.keyCode&&this.wd(a)};ra(jg)||f(Error("Invalid component class "+jg));ra(Tf)||f(Error("Invalid renderer class "+Tf));var rg=ta(jg);ig[rg]=Tf;hg("goog-control",function(){return new jg(k)});function sg(){}s(sg,$f);na(sg);m=sg.prototype;m.zc=ba();m.O=function(a){kg(a);a.fb&=-256;pg(a,32,l);return a.Ja().O("button",{"class":Vf(this,a).join(" "),disabled:!a.isEnabled(),title:a.gd()||"",value:a.n()||""},a.uh()||"")};m.Rb=function(a){return"BUTTON"==a.tagName||"INPUT"==a.tagName&&("button"==a.type||"submit"==a.type||"reset"==a.type)};m.j=function(a,b){kg(a);a.fb&=-256;pg(a,32,l);b.disabled&&J(b,Zf(this,1));return sg.h.j.call(this,a,b)};m.Lh=function(a){T(a.i(),a.a(),"click",a.wd)};m.Oc=ma;
m.oc=ma;m.Gf=function(a){return a.isEnabled()};m.Pc=ma;m.la=function(a,b,c){sg.h.la.call(this,a,b,c);if((a=a.a())&&1==b)a.disabled=c};m.n=function(a){return a.value};m.sa=function(a,b){a&&(a.value=b)};m.Pa=ma;function tg(a,b,c){jg.call(this,a,b||sg.b(),c)}s(tg,jg);m=tg.prototype;m.n=da("Gg");m.sa=function(a){this.Gg=a;this.F.sa(this.a(),a)};m.gd=da("Ag");m.sg=function(a){this.Ag=a;this.F.sg(this.a(),a)};m.k=function(){tg.h.k.call(this);delete this.Gg;delete this.Ag};m.z=function(){tg.h.z.call(this);if(this.ba&32){var a=this.yb();a&&T(this.i(),a,"keyup",this.xf)}};m.xf=function(a){return 13==a.keyCode&&"key"==a.type||32==a.keyCode&&"keyup"==a.type?this.wd(a):32==a.keyCode};hg("goog-button",function(){return new tg(k)});function ug(){}s(ug,$f);na(ug);m=ug.prototype;m.O=function(a){var b={"class":"goog-inline-block "+Vf(this,a).join(" "),title:a.gd()||""},b=a.Ja().O("div",b,vg(this,a.Ta,a.Ja()));Wf(this,a,b);return b};m.zc=ea("button");m.xa=function(a){return a&&a.firstChild.firstChild};function vg(a,b,c){return c.O("div","goog-inline-block "+(a.fa()+"-outer-box"),c.O("div","goog-inline-block "+(a.fa()+"-inner-box"),b))}m.Rb=function(a){return"DIV"==a.tagName};
m.j=function(a,b){wg(b,j);wg(b,l);var c;a:{c=Ne(a.Ja(),b);var d=this.fa()+"-outer-box";if(c&&L(c,d)&&(c=Ne(a.Ja(),c),d=this.fa()+"-inner-box",c&&L(c,d))){c=j;break a}c=l}c||b.appendChild(vg(this,b.childNodes,a.Ja()));J(b,"goog-inline-block",this.fa());return ug.h.j.call(this,a,b)};m.fa=ea("goog-custom-button");
function wg(a,b){if(a)for(var c=b?a.firstChild:a.lastChild,d;c&&c.parentNode==a;){d=b?c.nextSibling:c.previousSibling;if(3==c.nodeType){var e=c.nodeValue;if(""==Fa(e))a.removeChild(c);else{c.nodeValue=b?e.replace(/^[\s\xa0]+/,""):e.replace(/[\s\xa0]+$/,"");break}}else break;c=d}};function xg(a,b,c){tg.call(this,a,b||ug.b(),c)}s(xg,tg);hg("goog-custom-button",function(){return new xg(k)});function yg(a,b){X.call(this,b);this.Ya=a||""}s(yg,X);yg.prototype.Wa=k;var zg="placeholder"in document.createElement("input");m=yg.prototype;m.hd=l;m.O=function(){this.e=this.Ja().O("input",{type:"text"})};m.q=function(a){yg.h.q.call(this,a);this.Ya||(this.Ya=a.getAttribute("label")||"");var b;a:{var c=pe(a);try{b=c&&c.activeElement;break a}catch(d){}b=k}b==a&&(this.hd=j,K(this.a(),this.Uc));zg?this.a().placeholder=this.Ya:this.a().setAttribute("aria-label",this.Ya)};
m.z=function(){yg.h.z.call(this);var a=new Te(this);T(a,this.a(),"focus",this.Ah);T(a,this.a(),"blur",this.zj);zg?this.A=a:(pc&&T(a,this.a(),["keypress","keydown","keyup"],this.Aj),T(a,pe(this.a())?pe(this.a()).parentWindow||pe(this.a()).defaultView:window,"load",this.Ij),this.A=a,Ag(this));Bg(this);this.a().Pj=this};m.Zb=function(){yg.h.Zb.call(this);this.A&&(this.A.aa(),this.A=k);this.a().Pj=k};function Ag(a){!a.vj&&(a.A&&a.a().form)&&(T(a.A,a.a().form,"submit",a.Dj),a.vj=j)}
m.k=function(){yg.h.k.call(this);this.A&&(this.A.aa(),this.A=k)};m.Uc="label-input-label";m.Ah=function(){this.hd=j;K(this.a(),this.Uc);if(!zg&&!Cg(this)&&!this.Oj){var a=this,b=function(){a.a().value=""};E?I(b,10):b()}};m.zj=function(){zg||(Ve(this.A,this.a(),"click",this.Ah),this.Wa=k);this.hd=l;Bg(this)};m.Aj=function(a){27==a.keyCode&&("keydown"==a.type?this.Wa=this.a().value:"keypress"==a.type?this.a().value=this.Wa:"keyup"==a.type&&(this.Wa=k),a.preventDefault())};
m.Dj=function(){Cg(this)||(this.a().value="",I(this.yj,10,this))};m.yj=function(){Cg(this)||(this.a().value=this.Ya)};m.Ij=function(){Bg(this)};function Cg(a){return!!a.a()&&""!=a.a().value&&a.a().value!=a.Ya}m.clear=function(){this.a().value="";this.Wa!=k&&(this.Wa="")};m.reset=function(){Cg(this)&&(this.clear(),Bg(this))};m.sa=function(a){this.Wa!=k&&(this.Wa=a);this.a().value=a;Bg(this)};m.n=function(){return this.Wa!=k?this.Wa:Cg(this)?this.a().value:""};
function Bg(a){zg?a.a().placeholder!=a.Ya&&(a.a().placeholder=a.Ya):(Ag(a),a.a().setAttribute("aria-label",a.Ya));Cg(a)?K(a.a(),a.Uc):(!a.Oj&&!a.hd&&J(a.a(),a.Uc),zg||I(a.Dk,10,a))}m.Ea=function(a){this.a().disabled=!a;M(this.a(),this.Uc+"-disabled",!a)};m.isEnabled=function(){return!this.a().disabled};m.Dk=function(){this.a()&&(!Cg(this)&&!this.hd)&&(this.a().value=this.Ya)};function Dg(a,b,c,d,e,g,i,n,t){var z,A;if(z=c.offsetParent){var B="HTML"==z.tagName||"BODY"==z.tagName;if(!B||"static"!=pf(z,"position"))A=tf(z),B||(B=(B=uf(z))&&pc?-z.scrollLeft:B&&(!E||!G("8"))?z.scrollWidth-z.clientWidth-z.scrollLeft:z.scrollLeft,A=me(A,new le(B,z.scrollTop)))}z=A||new le;A=tf(a);B=U(a);A=new jf(A.x,A.y,B.width,B.height);if(B=sf(a)){var aa=new jf(B.left,B.top,B.right-B.left,B.bottom-B.top),B=Math.max(A.left,aa.left),W=Math.min(A.left+A.width,aa.left+aa.width);if(B<=W){var lb=Math.max(A.top,
aa.top),aa=Math.min(A.top+A.height,aa.top+aa.height);lb<=aa&&(A.left=B,A.top=lb,A.width=W-B,A.height=aa-lb)}}B=ne(a);lb=ne(c);if(B.t!=lb.t){var W=B.t.body,lb=lb.t.parentWindow||lb.t.defaultView,aa=new le(0,0),yc=pe(W)?pe(W).parentWindow||pe(W).defaultView:window,mf=W;do{var ga;if(yc==lb)ga=tf(mf);else{ga=mf;var mb=new le;if(1==ga.nodeType){if(ga.getBoundingClientRect){var ka=qf(ga);mb.x=ka.left;mb.y=ka.top}else{var ka=Me(ne(ga)),Pa=tf(ga);mb.x=Pa.x-ka.x;mb.y=Pa.y-ka.y}pc&&!G(12)&&(ka=h,ka=h,E?ka=
"-ms-transform":F?ka="-webkit-transform":oc?ka="-o-transform":pc&&(ka="-moz-transform"),Pa=h,ka&&(Pa=pf(ga,ka)),Pa||(Pa=pf(ga,"transform")),Pa?(ga=Pa.match(Ff),ka=!ga?new le(0,0):new le(parseFloat(ga[1]),parseFloat(ga[2]))):ka=new le(0,0),mb=new le(mb.x+ka.x,mb.y+ka.y))}else ka=ra(ga.wj),Pa=ga,ga.targetTouches?Pa=ga.targetTouches[0]:ka&&ga.da.targetTouches&&(Pa=ga.da.targetTouches[0]),mb.x=Pa.clientX,mb.y=Pa.clientY;ga=mb}aa.x+=ga.x;aa.y+=ga.y}while(yc&&yc!=lb&&(mf=yc.frameElement)&&(yc=yc.parent));
W=me(aa,tf(W));E&&!Le(B)&&(W=me(W,Me(B)));A.left+=W.x;A.top+=W.y}a=(b&4&&uf(a)?b^2:b)&-5;b=new le(a&2?A.left+A.width:A.left,a&1?A.top+A.height:A.top);b=me(b,z);e&&(b.x+=(a&2?-1:1)*e.x,b.y+=(a&1?-1:1)*e.y);var N;if(i)if(t)N=t;else if(N=sf(c))N.top-=z.y,N.right-=z.x,N.bottom-=z.y,N.left-=z.x;a:{t=b.clone();e=0;a=(d&4&&uf(c)?d^2:d)&-5;d=U(c);n=n?n.clone():d.clone();if(g||0!=a)a&2?t.x-=n.width+(g?g.right:0):g&&(t.x+=g.left),a&1?t.y-=n.height+(g?g.bottom:0):g&&(t.y+=g.top);if(i){if(N){g=t;e=0;if(65==(i&
65)&&(g.x<N.left||g.x>=N.right))i&=-2;if(132==(i&132)&&(g.y<N.top||g.y>=N.bottom))i&=-5;g.x<N.left&&i&1&&(g.x=N.left,e|=1);g.x<N.left&&(g.x+n.width>N.right&&i&16)&&(n.width=Math.max(n.width-(g.x+n.width-N.right),0),e|=4);g.x+n.width>N.right&&i&1&&(g.x=Math.max(N.right-n.width,N.left),e|=1);i&2&&(e|=(g.x<N.left?16:0)|(g.x+n.width>N.right?32:0));g.y<N.top&&i&4&&(g.y=N.top,e|=2);g.y>=N.top&&(g.y+n.height>N.bottom&&i&32)&&(n.height=Math.max(n.height-(g.y+n.height-N.bottom),0),e|=8);g.y+n.height>N.bottom&&
i&4&&(g.y=Math.max(N.bottom-n.height,N.top),e|=2);i&8&&(e|=(g.y<N.top?64:0)|(g.y+n.height>N.bottom?128:0));i=e}else i=256;e=i;if(e&496){c=e;break a}}g=pc&&(jc||rc)&&G("1.9");t instanceof le?(i=t.x,t=t.y):(i=t,t=h);c.style.left=vf(i,g);c.style.top=vf(t,g);if(!(d==n||(!d||!n?0:d.width==n.width&&d.height==n.height)))g=Le(ne(pe(c))),E&&(!g||!G("8"))?(i=c.style,g?(g=Bf(c,"padding"),c=Ef(c),i.pixelWidth=n.width-c.left-g.left-g.right-c.right,i.pixelHeight=n.height-c.top-g.top-g.bottom-c.bottom):(i.pixelWidth=
n.width,i.pixelHeight=n.height)):(c=c.style,pc?c.MozBoxSizing="border-box":F?c.WebkitBoxSizing="border-box":c.boxSizing="border-box",c.width=Math.max(n.width,0)+"px",c.height=Math.max(n.height,0)+"px");c=e}return c};function Eg(){}Eg.prototype.ab=ba();function Fg(a,b,c){this.element=a;this.lf=b;this.qk=c}s(Fg,Eg);Fg.prototype.ab=function(a,b,c){Dg(this.element,this.lf,a,b,h,c,this.qk)};function Gg(a,b,c,d){Fg.call(this,a,b);this.Rj=c?5:0;this.ag=d||h}s(Gg,Fg);Gg.prototype.ab=function(a,b,c,d){var e=Dg(this.element,this.lf,a,b,k,c,10,d,this.ag);if(e&496){var g=Hg(e,this.lf),b=Hg(e,b),e=Dg(this.element,g,a,b,k,c,10,d,this.ag);e&496&&(g=Hg(e,g),b=Hg(e,b),Dg(this.element,g,a,b,k,c,this.Rj,d,this.ag))}};function Hg(a,b){a&48&&(b^=2);a&192&&(b^=1);return b};function Ig(a,b){u.call(this);this.J=new Te(this);var c=a||k;Jg(this);this.e=c;b&&this.Gi(b)}s(Ig,fd);m=Ig.prototype;m.e=k;m.Td=j;m.Sg=k;m.Dc=l;m.Hk=l;m.Jf=-1;m.Uh=-1;m.Kj=l;m.nj=j;m.Nb="toggle_display";m.Gi=ca("Nb");m.a=da("e");function Jg(a){a.Dc&&f(Error("Can not change this state of the popup while showing."))}m.Xa=da("Dc");
m.ma=function(a){this.Ed&&this.Ed.stop();this.jd&&this.jd.stop();if(a){if(!this.Dc&&this.dispatchEvent("beforeshow")){this.e||f(Error("Caller must call setElement before trying to show the popup"));this.ab();a=pe(this.e);this.Kj&&T(this.J,a,"keydown",this.ek,j);if(this.Td)if(T(this.J,a,"mousedown",this.ni,j),E){var b;try{b=a.activeElement}catch(c){}for(;b&&"IFRAME"==b.nodeName;){try{var d=b.contentDocument||b.contentWindow.document}catch(e){break}a=d;b=a.activeElement}T(this.J,a,"mousedown",this.ni,
j);T(this.J,a,"deactivate",this.mi)}else T(this.J,a,"blur",this.mi);"toggle_display"==this.Nb?(this.e.style.visibility="visible",V(this.e,j)):"move_offscreen"==this.Nb&&this.ab();this.Dc=j;this.Ed?(Zc(this.Ed,"end",this.ri,l,this),this.Ed.play()):this.ri()}}else this.Bc()};m.ab=ma;m.Bc=function(a){if(!this.Dc||!this.dispatchEvent({type:"beforehide",target:a}))return l;this.J&&We(this.J);this.Dc=l;this.Uh=r();this.jd?(Zc(this.jd,"end",ya(this.dh,a),l,this),this.jd.play()):this.dh(a);return j};
m.dh=function(a){"toggle_display"==this.Nb?this.Hk?I(this.Hh,0,this):this.Hh():"move_offscreen"==this.Nb&&(this.e.style.top="-10000px");this.dispatchEvent({type:"hide",target:a})};m.Hh=function(){this.e.style.visibility="hidden";V(this.e,l)};m.ri=function(){this.Jf=r();this.Uh=-1;this.dispatchEvent("show")};m.ni=function(a){a=a.target;!Ce(this.e,a)&&((!this.Sg||Ce(this.Sg,a))&&!(150>r()-this.Jf))&&this.Bc(a)};m.ek=function(a){27==a.keyCode&&this.Bc(a.target)&&(a.preventDefault(),a.stopPropagation())};
m.mi=function(a){if(this.nj){var b=pe(this.e);if(E||oc){if(a=b.activeElement,!a||Ce(this.e,a)||"BODY"==a.tagName)return}else if(a.target!=b)return;150>r()-this.Jf||this.Bc()}};m.k=function(){Ig.h.k.call(this);this.J.aa();Da(this.Ed);Da(this.jd);delete this.e;delete this.J};function Kg(a,b){this.vi=4;this.gg=b||h;Ig.call(this,a)}s(Kg,Ig);function Lg(a,b){a.vi=b;a.Xa()&&a.ab()}function Mg(a,b){a.gg=b||h;a.Xa()&&a.ab()}function Ng(a,b,c,d,e){a.Wj=b==k||b instanceof hf?b:new hf(b,c,d,e);a.Xa()&&a.ab()}Kg.prototype.ab=function(){if(this.gg){var a=!this.Xa()&&"move_offscreen"!=this.Nb,b=this.a();a&&(b.style.visibility="hidden",V(b,j));this.gg.ab(b,this.vi,this.Wj);a&&V(b,l)}};function Og(a,b,c){u.call(this);this.Db=a;this.ja=b;this.J=c;this.cf=q(this.nk,this)}s(Og,u);m=Og.prototype;m.Je=l;m.cg=0;m.na=k;m.qh=function(){!this.na&&!this.cg?this.dd():this.Je=j};m.stop=function(){this.na&&(hd.clearTimeout(this.na),this.na=k,this.Je=l)};m.pause=function(){this.cg++};m.k=function(){Og.h.k.call(this);this.stop()};m.nk=function(){this.na=k;this.Je&&!this.cg&&(this.Je=l,this.dd())};m.dd=function(){this.na=I(this.cf,this.ja);this.Db.call(this.J)};function Pg(a,b){u.call(this);this.Db=a;this.J=b;this.Ua=new Ze(q(this.mk,this),0,this)}s(Pg,u);m=Pg.prototype;m.ja=0;m.mg=0;m.Oh=l;m.k=function(){this.Ua.aa();delete this.Db;delete this.J;Pg.h.k.call(this)};m.start=function(a,b){this.stop();this.Oh=l;var c=b||0;this.ja=Math.max(a||0,0);this.mg=0>c?-1:r()+c;this.Ua.start(0>c?this.ja:Math.min(this.ja,c))};m.stop=function(){this.Ua.stop()};m.zb=function(){return this.Ua.zb()};
m.mk=function(){if(this.Db.call(this.J))this.Oh=j;else if(0>this.mg)this.Ua.start(this.ja);else{var a=this.mg-r();0>=a||this.Ua.start(Math.min(this.ja,a))}};function Qg(a){u.call(this);this.e=a;this.td=this.e.value;this.A=new Te(this);this.Za=r();F||E||pc&&G("1.9")?T(this.A,a,"paste",this.xc):T(this.A,a,["keydown","blur","focus","mouseover","input"],this.Bj);this.Ua=new Pg(q(this.Wg,this))}s(Qg,fd);m=Qg.prototype;m.s="init";m.w=Fd("goog.events.PasteHandler");m.k=function(){Qg.h.k.call(this);this.A.aa();this.A=k;this.Ua.aa();this.Ua=k};
m.Wg=function(){if(this.td==this.e.value)return l;this.w.info("detected textchange after paste");this.dispatchEvent("after_paste");return j};m.xc=function(a){a=new Jc(a.da);a.type="paste";this.dispatchEvent(a);I(function(){this.Wg()||this.Ua.start(50,200)},0,this)};
m.Bj=function(a){switch(this.s){case "init":switch(a.type){case "blur":this.s="init";break;case "focus":this.s="focused";break;case "mouseover":this.s="init";this.e.value!=this.td&&(this.w.info("paste by dragdrop while on init!"),this.xc(a));break;default:Bd(this.w,"unexpected event "+a.type+"during init")}break;case "focused":switch(a.type){case "input":var b=this.Za+400;if(r()>b||"focus"==this.zk)this.w.info("paste by textchange while focused!"),this.xc(a);break;case "blur":this.s="init";break;
case "keydown":this.w.info("key down ... looking for ctrl+v");if(jc&&oc&&0==a.keyCode||jc&&oc&&17==a.keyCode)break;this.s="typing";break;case "mouseover":this.e.value!=this.td&&(this.w.info("paste by dragdrop while focused!"),this.xc(a));break;default:Bd(this.w,"unexpected event "+a.type+" during focused")}break;case "typing":switch(a.type){case "input":this.s="focused";break;case "blur":this.s="init";break;case "keydown":if(a.ctrlKey&&86==a.keyCode||a.shiftKey&&45==a.keyCode||a.metaKey&&86==a.keyCode)this.w.info("paste by ctrl+v while keypressed!"),
this.xc(a);break;case "mouseover":this.e.value!=this.td&&(this.w.info("paste by dragdrop while keypressed!"),this.xc(a));break;default:Bd(this.w,"unexpected event "+a.type+" during keypressed")}break;default:Bd(this.w,"invalid "+this.s+" state")}this.Za=r();this.td=this.e.value;this.w.info(a.type+" -> "+this.s);this.zk=a.type};function Rg(){return'<div class="popup" id="popup" style="visibility: hidden; display: none;"><div class="content"></div><div id="tailarrow"></div></div>'}function Sg(a){return(a.link?'<a href="'+S(a.link)+'">':"")+'<div class="tooltip">'+a.text+"</div>"+(a.link?"</a>":"")}
function Tg(){return'<div class="comment-oob">Click <div class="fb-icon"></div> and <div class="twitter-icon"></div> for instant sharing<div class="on-off"><div class="off">OFF <div class="twitter-icon"></div></div> &#8594; <div class="on">ON <div class="twitter-icon on"></div></div></div></div>'}
function Ug(){return'<div class="create-poll"><div class="label">CREATE A USER POLL</div><input type="text" placeholder="Title" class="poll-title"/><div class="label">OPTIONS</div><input type="text" placeholder="Option 1" class="option-input"/><input type="text" placeholder="Option 2" class="option-input"/><div class="add-option button">ADD OPTION</div><div class="submit-poll button">CREATE</div></div>'}
function Vg(){return'<div class="select-program"><div class="select-header">Suggest a Program</div><div class="select-content"><div class="page"><input type="text" class="program-input" placeholder="paste a youtube link"/><div class="page2"></div></div></div></div>'}function Wg(a){return'<div class="confirm-media"><img src="'+S(a.Wk)+'" /><div class="title">'+S(a.title)+'</div><div class="dark button">Yes</div></div>'};function Xg(){w.call(this)}s(Xg,w);na(Xg);function Yg(){var a=O("popup");a||(a=R(Rg),document.body.appendChild(a));Kg.call(this,a);H(window,"resize",q(this.ma,this,l));H(this,"hide",this.hk);this.ih=this.tg=this.Bf=l;this.M=Xg.b();this.M.subscribe("tooltip",this.Pk,this);this.M.subscribe("oob",this.Nk,this);this.M.subscribe("create-poll",this.Jk,this);this.M.subscribe("select-program",this.Kk,this);this.M.subscribe("hide",this.Bc,this);H(this.a(),"mouseover",q(function(){this.Bf=j},this));H(this.a(),"mouseout",q(function(){this.Bf=l;this.tg&&
this.M.c("hide")},this))}s(Yg,Kg);na(Yg);function Zg(a,b,c,d){H(b,"mouseover",q(function(){this.Yg&&hd.clearTimeout(this.Yg);this.tg=l;this.M.c("tooltip",b,c,d)},a));H(b,"mouseout",q(function(){this.Yg=I(q(function(){this.Bf?this.tg=j:this.M.c("hide")},this),100)},a))}
function $g(a,b,c){"top"==c?(Lg(a,1),c=-1*(U(a.a()).width-U(b).width)/2,Ng(a,0,0,6,c),Mg(a,new Gg(b,4)),a.a().className="popup",J(a.a(),"top")):"left"==c?(Lg(a,0),c=-1*(U(a.a()).height-U(b).height)/2,Ng(a,c,6,0,0),Mg(a,new Gg(b,6)),a.a().className="popup",J(a.a(),"left")):"right"==c&&(Lg(a,0),c=-1*(U(a.a()).height-U(b).height)/2,Ng(a,c,0,0,6),Mg(a,new Gg(b,6)),a.a().className="popup",J(a.a(),"right"))}m=Yg.prototype;m.hk=function(){this.ih||(this.Bc(),this.M.c("on-hide"))};
m.xa=function(){return P("content",this.a())};m.Pk=function(a,b,c,d){this.ma(l);$g(this,a,b);Pe(this.xa(),Sg,{text:"function"==typeof c.text?c.text():c.text,link:c.link});d&&(Jg(this),this.Td=l);this.ma(j)};m.Nk=function(a,b,c){this.ma(l);$g(this,a,b);a=-1*(U(this.a()).width-U(a).width)/2;Ng(this,0,0,36,a);Pe(this.xa(),Tg,{text:c.html,link:c.link});Jg(this);this.Td=l;this.ma(j);T(this.J,this.a(),"click",q(function(){this.M.c("hide")},this))};
m.Jk=function(a){this.ma(l);Lg(this,2);Mg(this,new Gg(a,7));this.a().className="popup";J(this.a(),"top");a=-1*(U(this.a()).width-U(a).width)/2;Ng(this,0,0,36,a);Pe(this.xa(),Ug,{});Jg(this);this.Td=l;this.ma(j);this.ih=j};
m.Kk=function(a,b){this.ma(l);Lg(this,0);var c=-1*(U(this.a()).height-U(a).height)/2;Ng(this,c,0,0,5);Mg(this,new Gg(a,6));J(this.a(),"left");Pe(this.xa(),Vg);this.Id=new yg("paste a YouTube link");this.Id.j(P("program-input",this.a()));var c=new ag(this.Id.a()),d=new Qg(this.Id.a()),e=new Og(q(this.Zf,this,b),1E3);this.ma(j);T(T(T(this.J,d,"after_paste",q(this.Zf,this,b)),c,"key",q(function(){e&&e.qh()},this)),this.Id.a(),"focus",q(this.Zf,this,b))};
m.Zf=function(a){var b=P("select-content",this.a());try{var c;var d=this.Id.n(),e=ah.exec(d);e?c=new bh(e[1]||e[2],h,h):f(Error("failed to parse video id from youtube url: "+d));x(Ea("https://gdata.youtube.com/feeds/api/videos/%s?v=2&alt=json",c.Zi),q(function(d){var e=Gd(Zd(d.target)).entry,d=e.title.$t,g=e.media$group.media$thumbnail[0].url,e=P("page2",this.a());Pe(e,Wg,{title:d,Wk:g});d=new xg("Yes");d.j(P("button",e));(new Hf(b,[0,0],[260,0],300,If)).play();T(this.J,d,"action",q(this.Uf,this,
a,c))},this))}catch(g){}};m.Uf=function(a,b){x("/_addprogram",q(function(b){b=Gd(Zd(b.target));b=new Jb(b);a.c(Vb,b);this.ma(l)},this),"POST","channel="+a.id+"&youtube_id="+b.Zi)};function Z(){w.call(this)}s(Z,w);na(Z);function ch(a){return'<div class="info"><div class="picture"><img src="'+S(a.media.sb)+'" class="thumb"><div class="ytvideo"></div><div class="publisher"><img src="'+S(a.media.qa.K)+'"><div class="name">'+S(a.media.qa.name)+'</div></div><div class="links"><div class="local"></div><a target="_blank" href="'+a.media.Lj+'"><div class="host"></div></a></div><div class="link-select" style="display:none"><input onClick="this.select();" class="link-input" type="text" value="'+a.media.link+'" readonly="readonly"/></div><div class="title"><div class="text">'+
S(a.media.name)+'</div></div><div class="reddit"><div class="upvote"></div><div class="reddit-logo"></div><div class="reddit-score"></div><div class="downvote"></div></div><div class="scrollable ios-scroll" '+(!a.description?'style="display:none"':"")+'><div class="desc-link"><a href="#">DESCRIPTION</a><div class="published">'+S(a.kc)+'</div></div><div class="description">'+a.description+'</div></div><div class="button play"><div class="icon"></div><div class="loading-icon"></div></div><div class="options"><div class="button facebook"><div class="icon"></div></div><div class="button twitter"><div class="icon"></div></div><div class="button star"><div class="icon"></div></div><div class="button send"><div class="icon"></div></div></div></div><div class="viewers" style="display: none"><div class="label"><div class="eye-icon"></div></div></div><div class="info-contents"><div class="scrollable ios-scroll"><div class="user-poll" style="display: none"><div class="label"><div class="poll-icon"></div><div class="status">VOTE</div></div><div class="poll-options"></div></div><div class="tweet-holder" style="display:none"><div class="label"><div class="globe-icon"></div><a class="tweets-link">LATEST TWEETS</a></div><div class="tweets"></div><div class="dot-nav"></div></div><div class="comments-holder ios-scroll" style="display:none"><div class="label"><div class="friends-icon"></div><a class="conv-link">CONVERSATION</a>'+
(a.Qj?'<a class="prev-link">&#10218; LAST PROGRAM</a>':"")+'</div><div class="no-comments" style="display:none">Start the conversation with friends.</div><div class="comments"></div><div class="top-grad"></div><div class="bottom-grad"></div></div><div class="create-poll-button" style="display:none">+ POLL</div><div class="create-poll popup" style="display:none"><div class="label">CREATE A USER POLL</div><input type="text" placeholder="Title" class="poll-title"/><div class="label" style="margin-top: 5px;">OPTIONS</div><div class="option-inputs"><input type="text" placeholder="Option 1" class="option-input option-input-1"/><input type="text" placeholder="Option 2" class="option-input option-input-2"/></div><div class="add-option button">ADD OPTION</div><div class="submit-poll button">CREATE</div><div class="close"></div></div></div></div><div class="send-media popup" style="display:none"><div class="label">SEND TO A FRIEND</div><div class="recipients"><textarea placeholder="To"></textarea></div><div class="label">ADD A MESSAGE:</div><div class="send-message"><textarea placeholder="Optional"></textarea><div class="add-comment button">SEND</div></div><div class="close"></div></div><div class="loading loading-activity"><div class="loading-spinner"></div></div><div class="overlay" style="display: none"><div class="leaving"><div>This program is over. Carry on?</div><div class="button dark no">Not yet</div><div class="button dark yes">Let\'s go</div></div></div>'+
(a.Vj?'<div class="login-promo"><div class="promo promo-1"><div class="promo-pic"><img src="/static/img/promo1.jpg"></div><div class="promo-text">WATCH AND CHAT LIVE WITH FRIENDS</div></div><div class="promo flip promo-2"><div class="promo-pic"><img src="/static/img/promo2.jpg"></div><div class="promo-text">SEE LATEST TWEETS AND VOTE ON STORIES</div></div><div class="promo promo-3"><div class="promo-pic"><img src="/static/img/promo3.jpg"></div><div class="promo-text">DISCUSS, SHARE, AND SAVE FAVORITES</div></div><div class="fb-login"><fb:login-button class="login-faces" show-faces="true" width="260" max-rows="1"></fb:login-button><div class="power"><div class="bg"></div></div><div class="login-label">LOGIN</div><div class="with-fb">with facebook</div><div class="waitlist">You\'re on the waitlist</div><div class="login-loading">LOADING</div><div class="error"></div><div class="message">We can\'t post on your behalf!</div></div></div>':
"")+"</div>"}function dh(a){return'<div class="viewer" name="'+S(a.be)+'"><img src="'+S(a.p.K)+'"></div>'}
function eh(a){return'<div class="tweet" id="'+S(a.prefix)+"-"+S(a.ub.id)+'">'+(a.ub.p?'<a href="#user:'+S(a.ub.p.id)+'"><img src="'+S(a.ub.K)+'"/></a>':'<img src="'+S(a.ub.K)+'"/>')+'<div class="text"><a class="handle" target="_blank" href="http://www.twitter.com/'+S(a.ub.handle)+"/status/"+S(a.ub.id)+'">'+S(a.ub.handle)+"</a> "+a.text+'</div><div class="timestamp">'+S(a.timestamp)+'</div><div class="tweet-options"><div class="reply"></div></div></div>'}
function fh(a){return'<div class="comment'+(a.L.B?" reply":"")+'" '+(a.L.id?'id="'+S(a.prefix)+"-"+S(a.L.id)+'"':"")+">"+(!a.L.B?'<a href="#user:'+S(a.L.p.id)+'"><div class="user-picture" style="background:'+S(a.L.p.color)+'"><img src="'+S(a.L.p.K)+'"/></div></a>':"")+'<div class="template"><a class="user" href="#user:'+S(a.L.p.id)+'">'+S(a.L.p.name)+'</a>  <div class="text">'+a.text+'<div class="comment-options">'+(a.si?'<div class="remove"></div> ':"")+'<div class="reply"></div></div></div><div class="timestamp">'+
S(a.L.pb)+'</div><div class="replies"></div>'+(!a.L.B?'<div class="reply-input"><textarea class="reply-textarea" rows="1" placeholder="reply..."></textarea></div>':"")+"</div></div>"}
function gh(){return'<div class="comment-input"><div class="textarea-holder"><div class="input-holder"><div class="highlighter"></div><textarea class="comment-textarea" rows="1" placeholder="Add to the conversation..."></textarea><div class="suggestions" style="display:none"></div></div></div><div class="comment-controls"><div class="comment-toggle tweet-toggle"><div class="icon"></div></div><div class="comment-toggle fb-toggle"><div class="icon"></div></div></div><div class="comment-button add-comment">ADD</div><div class="popup top" style="display:none"><div class="comment-oob">Click <div class="fb-icon"></div> and <div class="twitter-icon"></div> for instant sharing<div class="on-off"><div class="off">OFF <div class="twitter-icon"></div></div> &#8594; <div class="on">ON <div class="twitter-icon on"></div></div></div></div></div></div>'}
function hh(a){var b='<div class="activity'+(1<a.C.length?" digest":"")+'">';if(1<a.C.length){for(var b=b+('<div class="template"><span>'+S(a.C.length)+" friends </span>"+(a.Ui?"watched":"are watching")+(a.N?' <a href="#channel:'+S(a.N.id)+'">'+S(a.N.name)+"</a>":"")+'<div class="timestamp">'+S(a.time)+'</div></div><div class="users">'),c=a.C,d=c.length,e=0;e<d;e++)var g=c[e],b=b+('<a href="#user:'+S(g.id)+'"><div class="picture" style="background:'+S(g.color)+'"><img src="'+S(g.K)+'"/></div></a>');
b+="</div>"}return b+=(1==a.C.length?'<a href="#user:'+S(a.C[0].id)+'"><div class="picture" style="background:'+S(a.C[0].color)+'"><img src="'+S(a.C[0].K)+'"/></div></a><div class="template"><a class="user" href="#user:'+S(a.C[0].id)+'">'+S(a.C[0].name)+"</a> "+(a.Ui?"watched":"is watching")+(a.N?' <a href="#channel:'+S(a.N.id)+'">'+S(a.N.name)+"</a>":"")+'<div class="timestamp">'+S(a.time)+"</div></div>":"")+'<div class="medias"></div></div>'}
function ih(a){for(var b='<div class="comment activity'+(1<a.Sa.length?" digest":"")+'">'+(1<a.Sa.length?'<div class="template">'+(1==a.C.length?'<a class="user" href="#user:'+S(a.C[0].id)+'">'+S(a.C[0].name)+' </a> discussed <a class="title" href="#info:'+S(a.media.id)+'">'+S(a.media.name)+"</a>.":"<span>"+S(a.C.length)+' friends </span> discussed <a class="title" href="#info:'+S(a.media.id)+'"> '+S(a.media.name)+"</a>.")+"</div>":""),a=a.Sa,c=a.length,d=0;d<c;d++)var e=a[d],b=b+('<div class="comment"><a href="#user:'+
S(e.p.id)+'"><div class="picture" style="background:'+S(e.p.color)+'"><img src="'+S(e.p.K)+'"/></div></a><div class="template"><a class="user" href="#user:'+S(e.p.id)+'">'+S(e.p.name)+'</a>  <div class="text">'+e.text+'</div><div class="timestamp">'+S(e.pb)+"</div></div></div>");return b+'<div class="medias"></div></div>'}
function jh(a){var b='<div class="like activity'+(1<a.C.length?" digest":"")+'">';if(1<a.C.length){for(var b=b+('<div class="template"><span>'+S(a.C.length)+' friends </span>liked<div class="timestamp">'+S(a.time)+'</div></div><div class="users">'),c=a.C,d=c.length,e=0;e<d;e++)var g=c[e],b=b+('<a href="#user:'+S(g.id)+'"><div class="picture" style="background:'+S(g.color)+'"><img src="'+S(g.K)+'"/></div></a>');b+="</div>"}return b+=(1==a.C.length?'<a href="#user:'+S(a.C[0].id)+'"><div class="picture" style="background:'+
S(a.C[0].color)+'"><img src="'+S(a.C[0].K)+'"/></div></a><div class="template" style="top:10px;margin-bottom:30px"><a class="user" href="#user:'+S(a.C[0].id)+'">'+S(a.C[0].name)+"</a> liked "+(1<a.ci?S(a.ci)+" stories":"")+'<div class="timestamp">'+S(a.time)+"</div></div>":"")+'<div class="medias"></div></div>'}
function kh(a){return'<div class="list-info"><div class="picture-cell" '+(a.sb?'style="display:table-cell"':"")+">"+(a.link?'<a href="'+S(a.link)+'" target="_blank">':"")+'<div class="picture"><img class="thumb" src="'+S(a.sb)+'"></div>'+(a.link?"</a>":"")+'</div><div class="description" style="display:table-cell">'+a.description+"</div></div>"}function lh(a){return'<li class="'+S(a.className)+' tab"><div class="label">'+S(a.name)+"</div></li>"}
function mh(a){return'<div class="admin"><div class="scrollable ios-scroll"><div class="search"><input type="text" class="input" '+(a.Mh?'placeholder="'+S(a.Mh)+'"':"")+'/></div><div class="results"></div><div class="section" style="display:none"><div class="label">CHANNELS</div><div class="admin-channels"></div></div><div class="section" style="display:none"><div class="label">CURRENT TOPICS</div><div class="topics"></div></div><div class="section" style="display:none"><div class="label">COLLECTIONS</div><div class="collections"></div></div><div class="scroll-area"></div>'}
function nh(){return'<div class="admin-list admin"><div class="search"><input class="input" type="text" placeholder="Paste video or playlist link" /></div><div class="tabbed pending"><ul class="tabs"><li class="tab pending"><div class="label">PENDING</div></li><li class="tab all"><div class="label">ALL</div></li><li class="tab playlists"><div class="label">PLAYLISTS</div></li><li class="tab publishers"><div class="label">PUBLISHERS</div></li><li class="tab categories"><div class="label">CATEGORIES</div></li></ul><div class="pending-content content pending"></div><div class="all-content content all"></div><div class="playlists-content content playlists"></div><div class="publishers-content content publishers"></div><div class="categories-content content categories"><div class="label">GUIDE CATEGORIES</div><div class="categories-list"></div><div class="label">FEED IDS</div><div class="feed-ids"></div><div class="label">FEED CATEGORIES</div><div class="feed-cats"></div></div><div class="spinner" style="display:none"></div></div>'}
function oh(a){return'<div class="playlist"><div class="title">'+S(a.name)+'</div><div class="controls"><div class="remove dark button">x</div></div></div>'}function ph(a){return'<div class="category button">'+S(a.name)+"</div>"}function qh(a){return'<div class="publisher">'+(a.K?'<img src="'+S(a.K)+'"/>':"")+'<div class="title">'+S(a.name)+'</div><div class="controls"><div class="remove dark button">x</div></div></div>'}
function rh(a){return'<div class="channel '+(a.N.Lc?"on":"off")+'"><div class="title">'+S(a.N.name)+'</div><div class="controls"><div class="fetch dark button">FETCH</div><div class="program dark button">PROG.</div><div class="remove dark button">x</div><div class="on dark button">ON</div><div class="off dark button">OFF</div></div>'+(a.N.dg?'<div class="pending">'+S(a.N.dg)+"</div>":"")+"</div>"}
function sh(a){return'<div class="collection"><div class="title">'+S(a.ff.name)+'</div><div class="controls">'+(a.ff.dg?'<div class="pending">'+S(a.ff.dg)+"</div>":"")+'<div class="fetch dark button">FETCH</div><div class="button dark remove">x</div></div></div>'}
function th(a){return'<div class="tabbed '+(a.Qf?"inbox":"messages")+'"><ul class="tabs">'+(a.Qf?'<li class="tab inbox"><div class="label">INBOX</div></li>':'<li class="tab messages"><div class="label">MESSAGES</div></li>')+'<li class="tab activity"><div class="label">ACTIVITY</div></li><li class="tab starred"><div class="label"><div class="heart"></div>\'d</div></li></ul>'+(a.Qf?'<div class="inbox-content content inbox"><div class="label">NOTIFICATIONS</div><div class="notifications-content content notifications"><div class="loading loading-activity"><div class="loading-spinner"></div></div></div><div class="label messages-label">MESSAGES<div class="label show-all"><a href="#friendlist:1">ALL FRIENDS &gt;</a></div></div><div class="messages-content content messages"><div class="loading loading-activity"><div class="loading-spinner"></div></div></div></div>':
'<div class="messages-content content messages"><div class="loading loading-activity"><div class="loading-spinner"></div></div></div>')+'<div class="activity-content content activity"><div class="loading loading-activity"><div class="loading-spinner"></div></div></div><div class="starred-content content starred"><div class="loading loading-starred"><div class="loading-spinner"></div></div></div><div class="spinner" style="display:none"></div></div>'}
function uh(){return'<div class="tabbed"><ul class="tabs"><li class="tab comments"><div class="label">CONVERSATION</div></li><li class="tab tweets"><div class="label">TWEETS</div></li></ul><div class="comments-content content comments-holder"><div class="loading loading-activity"><div class="loading-spinner"></div></div></div><div class="tweets-content content tweet-holder"><div class="loading loading-starred"><div class="loading-spinner"></div></div></div></div>'}
function vh(a){return'<div class="list-media show"><div class="media"><div class="preview"><div class="thumb" style="background-image:url('+S(a.media.sb)+"); background-position: 50% "+S(a.media.Pi)+'%"></div><div class="title">'+S(a.media.name)+'</div><div class="stats"><div class="comment-count"><div class="icon"></div>'+S(a.media.$c)+'</div><div class="like-count"><div class="icon"></div>'+S(a.media.Sj)+'</div></div></div></div><div class="publisher">'+(a.media.qa?'<img src="'+S(a.media.qa.K)+
'"><div class="name">'+S(a.media.qa.name)+"</div>":"")+'<div class="list-play"><div class="icon"></div></div><div class="list-plus"><div class="icon"></div></div></div></div>'}
function wh(a){return'<div class="admin-media list-media"><div class="media"><div class="preview"><div class="thumb" style="background-image:url('+S(a.media.sb)+"); background-position: 50% "+S(a.media.Pi)+'%"></div><div class="title">'+S(a.media.name)+'</div><div class="published">'+S(a.kc)+'</div><div class="play"></div><div class="approve"></div><div class="remove"></div><div class="repos"></div></div></div><div class="publisher"><img src="'+S(a.media.qa.K)+'"><div class="name">'+S(a.media.qa.name)+
'</div><div class="duration">'+S(a.media.duration)+' seconds</div></div><div class="description">'+S(a.media.description)+"</div></div>"}function xh(a){return'<div class="option"><div class="percent"></div><div class="name">'+S(a.name)+'</div><div class="percent-number">'+S(a.rk)+"</div></div>"};function yh(a,b,c){u.call(this);this.target=a;this.handle=b||a;this.Yh=c||new jf(NaN,NaN,NaN,NaN);this.t=pe(a);this.A=new Te(this);H(this.handle,["touchstart","mousedown"],this.Fd,l,this)}s(yh,fd);var zh=E||pc&&G("1.9.3");m=yh.prototype;m.clientX=0;m.clientY=0;m.screenX=0;m.screenY=0;m.Li=0;m.Mi=0;m.uc=0;m.vc=0;m.pf=j;m.Xb=l;m.Ih=0;m.Xj=0;m.Nj=l;m.Pd=l;m.i=da("A");m.Fi=ca("Ge");m.Ea=ca("pf");
m.k=function(){yh.h.k.call(this);$c(this.handle,["touchstart","mousedown"],this.Fd,l,this);We(this.A);zh&&this.t.releaseCapture();this.A=this.handle=this.target=k};function Ah(a){ja(a.Na)||(a.Na=uf(a.target));return a.Na}
m.Fd=function(a){var b="mousedown"==a.type;if(this.pf&&!this.Xb&&(!b||Lc(a))){Bh(a);if(0==this.Ih)if(this.dispatchEvent(new Ch("start",this,a.clientX,a.clientY,a)))this.Xb=j,a.preventDefault();else return;else a.preventDefault();var b=this.t,c=b.documentElement,d=!zh;T(this.A,b,["touchmove","mousemove"],this.Hj,d);T(this.A,b,["touchend","mouseup"],this.Yb,d);zh?(c.setCapture(l),T(this.A,c,"losecapture",this.Yb)):T(this.A,b?b.parentWindow||b.defaultView:window,"blur",this.Yb);E&&this.Nj&&T(this.A,
b,"dragstart",Hc);this.Ge&&T(this.A,this.Ge,"scroll",this.qi,d);this.clientX=this.Li=a.clientX;this.clientY=this.Mi=a.clientY;this.screenX=a.screenX;this.screenY=a.screenY;this.Pd?(a=this.target,b=a.offsetLeft,c=a.offsetParent,!c&&"fixed"==pf(a,"position")&&(c=pe(a).documentElement),c?(pc?(d=Ef(c),b+=d.left):Cc(8)&&(d=Ef(c),b-=d.left),a=uf(c)?c.clientWidth-(b+a.offsetWidth):b):a=b):a=this.target.offsetLeft;this.uc=a;this.vc=this.target.offsetTop;this.bg=Me(ne(this.t));this.Xj=r()}else this.dispatchEvent("earlycancel")};
m.Yb=function(a,b){We(this.A);zh&&this.t.releaseCapture();if(this.Xb){Bh(a);this.Xb=l;var c=Dh(this,this.uc),d=Eh(this,this.vc);this.dispatchEvent(new Ch("end",this,a.clientX,a.clientY,a,c,d,b||"touchcancel"==a.type))}else this.dispatchEvent("earlycancel");("touchend"==a.type||"touchcancel"==a.type)&&a.preventDefault()};
function Bh(a){var b=a.type;"touchstart"==b||"touchmove"==b?a.init(a.da.targetTouches[0],a.currentTarget):("touchend"==b||"touchcancel"==b)&&a.init(a.da.changedTouches[0],a.currentTarget)}
m.Hj=function(a){if(this.pf){Bh(a);var b=(this.Pd&&Ah(this)?-1:1)*(a.clientX-this.clientX),c=a.clientY-this.clientY;this.clientX=a.clientX;this.clientY=a.clientY;this.screenX=a.screenX;this.screenY=a.screenY;if(!this.Xb){var d=this.Li-this.clientX,e=this.Mi-this.clientY;if(d*d+e*e>this.Ih)if(this.dispatchEvent(new Ch("start",this,a.clientX,a.clientY,a)))this.Xb=j;else{this.Zd||this.Yb(a);return}}c=Fh(this,b,c);b=c.x;c=c.y;this.Xb&&this.dispatchEvent(new Ch("beforedrag",this,a.clientX,a.clientY,a,
b,c))&&(Gh(this,a,b,c),a.preventDefault())}};function Fh(a,b,c){var d=Me(ne(a.t)),b=b+(d.x-a.bg.x),c=c+(d.y-a.bg.y);a.bg=d;a.uc+=b;a.vc+=c;b=Dh(a,a.uc);a=Eh(a,a.vc);return new le(b,a)}m.qi=function(a){var b=Fh(this,0,0);a.clientX=this.clientX;a.clientY=this.clientY;Gh(this,a,b.x,b.y)};function Gh(a,b,c,d){a.gh(c,d);a.dispatchEvent(new Ch("drag",a,b.clientX,b.clientY,b,c,d))}
function Dh(a,b){var c=a.Yh,d=!isNaN(c.left)?c.left:k,c=!isNaN(c.width)?c.width:0;return Math.min(d!=k?d+c:Infinity,Math.max(d!=k?d:-Infinity,b))}function Eh(a,b){var c=a.Yh,d=!isNaN(c.top)?c.top:k,c=!isNaN(c.height)?c.height:0;return Math.min(d!=k?d+c:Infinity,Math.max(d!=k?d:-Infinity,b))}m.gh=function(a,b){this.Pd&&Ah(this)?this.target.style.right=a+"px":this.target.style.left=a+"px";this.target.style.top=b+"px"};
function Ch(a,b,c,d,e,g,i,n){Gc.call(this,a);this.clientX=c;this.clientY=d;this.Gl=e;this.left=ja(g)?g:b.uc;this.top=ja(i)?i:b.vc;this.Rl=b;this.lj=!!n}s(Ch,Gc);function Hh(){u.call(this);this.ld=[];this.Uk=[];this.Dd=[]}s(Hh,fd);m=Hh.prototype;m.Rh=l;m.Sh=l;m.Ef=l;m.Fi=ca("Ge");m.init=function(){if(!this.Ef){for(var a,b=0;a=this.ld[b];b++)Ih(this,a);this.Ef=j}};function Ih(a,b){a.Rh&&(H(b.element,"mousedown",b.fi,l,b),a.vg&&J(b.element,a.vg));a.Sh&&a.yg&&J(b.element,a.yg)}
m.Fd=function(a,b){if(!this.wa)if(this.wa=b,this.dispatchEvent(new Jh("dragstart",this,this.wa))==l)this.wa=k;else{var c=b.tc,d;a:switch(d=c.cloneNode(j),c.tagName.toLowerCase()){case "tr":d=Q("table",k,Q("tbody",k,d));break a;case "td":case "th":d=Q("table",k,Q("tbody",k,Q("tr",k,d)));break a}this.mj&&J(d,this.mj);this.yc=d;d=pe(c);d.body.appendChild(this.yc);var e=this.yc,g=tf(c),c=Bf(c,"margin");g.x-=2*(c.left||0);g.y-=2*(c.top||0);e.style.position="absolute";e.style.left=g.x+"px";e.style.top=
g.y+"px";this.ib=new yh(e);this.ib.Fi(this.Ge);H(this.ib,"drag",this.gi,l,this);H(this.ib,"end",this.Yb,l,this);H(d.body,"selectstart",this.Oi);this.Qc=[];for(d=0;c=this.Uk[d];d++)for(var i,e=0;i=c.ld[e];e++)for(var g=c,n=[i.element],t=this.Qc,z=0;z<n.length;z++){var A=n[z],B=tf(A),aa=U(A),B=new hf(B.y,B.x+aa.width,B.y+aa.height,B.x);t.push(new Kh(B,g,i,A));Lh(this,B)}this.rb||(this.rb=new hf(0,0,0,0));for(d=0;c=this.Dd[d];d++)c.hf=[],c.Bi=c.e.scrollLeft,c.Ci=c.e.scrollTop,e=tf(c.e),g=U(c.e),c.R=
new hf(e.y,e.x+g.width,e.y+g.height,e.x);for(d=0;g=this.Qc[d];d++)for(e=0;c=this.Dd[e];e++)Ce(c.e,g.e)&&(c.hf.push(g),g.Cd=c);this.Pb=k;for(d=0;c=this.Dd[d];d++)H(c.e,"scroll",this.bh,l,this);this.ib.Fd(a);a.preventDefault()}};
m.Yb=function(a){var b=a.lj?k:this.Pb;if(b&&b.ua){var c=a.clientX,a=a.clientY,d=Me(ne(this.yc)),e=c+d.x,d=a+d.y,g;this.Hd&&(g=this.Hd(b.mb,b.R,e,d));this.dispatchEvent(new Jh("drag",this,this.wa,b.ua,b.mb,b.e,c,a,e,d));b.ua.dispatchEvent(new Jh("drop",this,this.wa,b.ua,b.mb,b.e,c,a,e,d,g))}this.dispatchEvent(new Jh("dragend",this,this.wa));$c(this.ib,"drag",this.gi,l,this);$c(this.ib,"end",this.Yb,l,this);$c(pe(this.wa.tc).body,"selectstart",this.Oi);for(b=0;c=this.Dd[b];b++)$c(c.e,"scroll",this.bh,
l,this),c.hf=[];this.ib.aa();ye(this.yc);delete this.wa;delete this.yc;delete this.ib;delete this.Qc;delete this.Pb};
m.gi=function(a){var b,c=Me(ne(this.yc));b=new le(a.clientX+c.x,a.clientY+c.y);var c=b.x,d=b.y,e=this.Pb,g;if(e){this.Hd&&e.ua&&(g=this.Hd(e.mb,e.R,c,d));if(e.R.contains(b)&&g==this.Kg)return;e.ua&&(this.dispatchEvent(new Jh("dragout",this,this.wa,e.ua,e.mb,e.e)),e.ua.dispatchEvent(new Jh("dragout",this,this.wa,e.ua,e.mb,e.e,h,h,h,h,this.Kg)));this.Kg=g;this.Pb=k}if(this.rb.contains(b)){a:{for(var i=0;e=this.Qc[i];i++)if(e.R.contains(b))if(e.Cd){if(e.Cd.R.contains(b)){b=e;break a}}else{b=e;break a}b=
k}if((e=this.Pb=b)&&e.ua)this.Hd&&(g=this.Hd(e.mb,e.R,c,d)),c=new Jh("dragover",this,this.wa,e.ua,e.mb,e.e),c.Tk=g,this.dispatchEvent(c),e.ua.dispatchEvent(new Jh("dragover",this,this.wa,e.ua,e.mb,e.e,a.clientX,a.clientY,h,h,g));else if(!e){this.pa||(this.pa=new Kh(this.rb.clone()));a=this.pa.R;a.top=this.rb.top;a.right=this.rb.right;a.bottom=this.rb.bottom;a.left=this.rb.left;for(g=0;e=this.Qc[g];g++)b=e.R,e.Cd&&(e=e.Cd.R,b=new hf(Math.max(b.top,e.top),Math.min(b.right,e.right),Math.min(b.bottom,
e.bottom),Math.max(b.left,e.left))),e=k,c>=b.right?e=b.right>a.left?b.right:a.left:c<b.left&&(e=b.left<a.right?b.left:a.right),i=k,d>=b.bottom?i=b.bottom>a.top?b.bottom:a.top:d<b.top&&(i=b.top<a.bottom?b.top:a.bottom),e!==k&&i!==k&&(Math.abs(e-c)>Math.abs(i-d)?i=k:e=k),e===k?i!==k&&(i<=d?a.top=i:a.bottom=i):e<=c?a.left=e:a.right=e;this.Pb=10<=(a.right-a.left)*(a.bottom-a.top)?this.pa:k}}};m.Oi=ea(l);
m.bh=function(a){for(var b=0,c;c=this.Dd[b];b++)if(a.target==c.e){var d=c.Ci-c.e.scrollTop,e=c.Bi-c.e.scrollLeft;c.Ci=c.e.scrollTop;c.Bi=c.e.scrollLeft;this.pa&&this.Pb==this.pa&&(0<d?this.pa.R.top+=d:this.pa.R.bottom+=d,0<e?this.pa.R.left+=e:this.pa.R.right+=e);for(var g=0,i;i=c.hf[g];g++)i=i.R,i.top+=d,i.left+=e,i.bottom+=d,i.right+=e,Lh(this,i)}this.ib.qi(a)};
function Lh(a,b){if(1==a.Qc.length)a.rb=new hf(b.top,b.right,b.bottom,b.left);else{var c=a.rb;c.left=Math.min(b.left,c.left);c.right=Math.max(b.right,c.right);c.top=Math.min(b.top,c.top);c.bottom=Math.max(b.bottom,c.bottom)}}m.k=function(){Hh.h.k.call(this);for(var a,b=0;a=this.ld[b];b++)this.Rh&&($c(a.element,"mousedown",a.fi,l,a),this.vg&&K(a.element,this.vg)),this.Sh&&this.yg&&K(a.element,this.yg),a.aa();this.ld.length=0};
function Jh(a,b,c,d,e,g,i,n,t,z,A){Gc.call(this,a);this.Pl=b;this.Ql=c;this.Sl=d;this.Ul=e;this.Tl=g;this.clientX=i;this.clientY=n;this.um=t;this.vm=z;this.Tk=A}s(Jh,Gc);Jh.prototype.k=ba();function Mh(a,b){u.call(this);this.element=O(a);this.data=b;this.H=k;this.element||f(Error("Invalid argument"))}s(Mh,fd);m=Mh.prototype;m.tc=k;
m.fi=function(a){if(Lc(a)){var b=a.target;b&&(H(b,"mousemove",this.Ic,l,this),H(b,"mouseout",this.Ic,l,this),H(b,"mouseup",this.Pf,l,this),this.tc=b,this.wg=new le(a.clientX,a.clientY),a.preventDefault())}};m.He=ca("H");m.Ic=function(a){var b=this.tc,c="mouseout"==a.type&&a.target==b;if(5<Math.abs(a.clientX-this.wg.x)+Math.abs(a.clientY-this.wg.y)||c)$c(b,"mousemove",this.Ic,l,this),$c(b,"mouseout",this.Ic,l,this),$c(b,"mouseup",this.Pf,l,this),this.H.Fd(a,this)};
m.Pf=function(){var a=this.tc;$c(a,"mousemove",this.Ic,l,this);$c(a,"mouseout",this.Ic,l,this);$c(a,"mouseup",this.Pf,l,this);delete this.wg;this.tc=k};function Kh(a,b,c,d){this.R=a;this.ua=b;this.mb=c;this.e=d}Kh.prototype.Cd=k;function Nh(){Hh.call(this)}s(Nh,Hh);function Oh(a,b){b.He(a);a.ld.push(b);a.Ef&&Ih(a,b)};function Ph(a){var b={};"rel"in b||(b.rel="nofollow");"target"in b||(b.target="_blank");var c=[],d;for(d in b)b.hasOwnProperty(d)&&b[d]&&c.push(Ha(d),'="',Ha(b[d]),'" ');var e=c.join("");return a.replace(Qh,function(a,b,c,d,z){a=[Ha(b)];if(!c)return a[0];a.push("<a ",e,'href="');d?(a.push("mailto:"),c=d,d=""):(z||a.push("http://"),(d=c.match(Rh))?(c=d[1],d=d[2]):d="");c=Ha(c);d=Ha(d);a.push(c,'">',c,"</a>",d);return a.join("")})}
var Rh=/^(.*)([:;,\.?\[\]])$/,Qh=RegExp("([\\S\\s]*?)(\\b(?:mailto:)?([\\w.+-]+@[A-Za-z0-9.-]+\\.(?:com|org|net|edu|gov|aero|biz|cat|coop|info|int|jobs|mobi|museum|name|pro|travel|arpa|asia|xxx|[a-z][a-z])\\b)|\\b(?:(https?|ftp)://+|www\\.)\\w[:;,\\.?\\[\\]\\w/~%&=+#-@!]*|$)","g");function Sh(){}s(Sh,Tf);na(Sh);m=Sh.prototype;m.zc=ba();m.j=function(a,b){kg(a);a.fb&=-256;pg(a,32,l);Sh.h.j.call(this,a,b);a.nc(b.value);return b};m.O=function(a){kg(a);a.fb&=-256;pg(a,32,l);return a.Ja().O("textarea",{"class":Vf(this,a).join(" "),disabled:!a.isEnabled()},a.Ta||"")};m.Rb=function(a){return"TEXTAREA"==a.tagName};m.oc=ma;m.Gf=function(a){return a.isEnabled()};m.Pc=ma;m.la=function(a,b,c){Sh.h.la.call(this,a,b,c);if((a=a.a())&&1==b)a.disabled=c};m.Pa=ma;
m.nc=function(a,b){a&&(a.value=b)};m.fa=ea("goog-textarea");function Th(a,b,c){jg.call(this,a,b||Sh.b(),c);kg(this);this.Oc(j);a||(this.Ta="")}s(Th,jg);var Uh=pc||F;m=Th.prototype;m.Cc=l;m.kb=0;m.$h=0;m.ei=0;m.Gh=l;m.te=l;m.pg=l;m.og=l;function Vh(a){return a.ud.top+a.ud.bottom+a.Tg.top+a.Tg.bottom}function Wh(a){var b=a.ei,c=a.a();b&&(c&&a.te)&&(b-=Vh(a));return b}function Xh(a){var b=a.$h,c=a.a();b&&(c&&a.te)&&(b-=Vh(a));return b}m.sa=function(a){this.nc(String(a))};m.n=function(){return this.a().value};m.nc=function(a){Th.h.nc.call(this,a);this.resize()};
m.Ea=function(a){Th.h.Ea.call(this,a);this.a().disabled=!a};m.resize=function(){this.a()&&this.ee()};m.z=function(){Th.h.z.call(this);var a=this.a();kf(a,{overflowY:"hidden",overflowX:"auto",boxSizing:"border-box",MsBoxSizing:"border-box",WebkitBoxSizing:"border-box",MozBoxSizing:"border-box"});this.ud=Bf(a,"padding");this.Tg=Ef(a);T(T(T(T(this.i(),a,"scroll",this.ee),a,"focus",this.ee),a,"keyup",this.ee),a,"mouseup",this.Yj);this.resize()};
function Yh(a){if(!a.Gh){var b=a.a().cloneNode(l);kf(b,{position:"absolute",height:"auto",top:"-9999px",margin:"0",padding:"1px",border:"1px solid #000",overflow:"hidden"});a.Ja().t.body.appendChild(b);var c=b.scrollHeight;b.style.padding="10px";var d=b.scrollHeight;a.pg=d>c;b.style.borderWidth="10px";a.og=b.scrollHeight>d;b.style.height="100px";100!=b.offsetHeight&&(a.te=j);ye(b);a.Gh=j}var b=a.a(),c=a.a().scrollHeight,e=a.a(),d=e.offsetHeight-e.clientHeight;if(!a.pg)var g=a.ud,d=d-(g.top+g.bottom);
a.og||(e=Ef(e),d-=e.top+e.bottom);c+=0<d?d:0;a.te?c-=Vh(a):(a.pg||(d=a.ud,c+=d.top+d.bottom),a.og||(a=Ef(b),c+=a.top+a.bottom));return c}function Zh(a,b){a.kb!=b&&(a.kb=b,a.a().style.height=b+"px")}function $h(a){a=a.a();a.style.height="auto";var b=a.value.match(/\n/g)||[];a.rows=b.length+1}
m.ee=function(){if(!this.Cc){var a=l;this.Cc=j;var b=this.a(),c=this.kb;if(b.scrollHeight){var d=l,e=l,g=Yh(this),i=b.offsetHeight,n=Wh(this),t=Xh(this);n&&g<n?(Zh(this,n),d=j):t&&g>t?(Zh(this,t),b.style.overflowY="",e=j):i!=g?Zh(this,g):this.kb||(this.kb=g);!d&&(!e&&Uh)&&(a=j)}else $h(this);this.Cc=l;a&&(a=this.a(),this.Cc||(this.Cc=j,b=l,a.value||(a.value=" ",b=j),(e=a.scrollHeight)?(g=Yh(this),d=Wh(this),i=Xh(this),!(d&&g<=d)&&!(i&&g>=i)&&(i=this.ud,a.style.paddingBottom=i.bottom+1+"px",Yh(this)==
g&&(a.style.paddingBottom=i.bottom+e+"px",a.scrollTop=0,e=Yh(this)-e,e>=d?Zh(this,e):Zh(this,d)),a.style.paddingBottom=i.bottom+"px")):$h(this),b&&(a.value=""),this.Cc=l));c!=this.kb&&this.dispatchEvent("resize")}};m.Yj=function(){var a=this.a(),b=a.offsetHeight;a.filters&&a.filters.length&&(a=a.filters.item("DXImageTransform.Microsoft.DropShadow"))&&(b-=a.offX);b!=this.kb&&(this.kb=this.ei=b)};function ai(a,b,c,d,e,g,i){X.call(this);this.bc=Pb();this.Ra=a;this.Ae=b;this.fg=c;this.ig=d;this.df=e.categories;this.rj=e.feed_categories;this.tj=e.feed_id;this.zg=g||k;this.wc=i||k;this.of=this.bc?new Nh:k;this.$b={pending:l,all:l};this.X=["pending","all","playlists","publishers","categories"]}s(ai,X);var bi="top_rated top_favorites most_shared most_recent most_discussed most_responded recently_featured on_the_web most_viewed".split(" "),ci="All Film Autos Music Animals Sports Travel Games Videoblog People Comedy Entertainment News Howto Education Tech Nonprofit Movies Shows Shortmov".split(" ");
m=ai.prototype;
m.q=function(a){ai.h.q.call(this,a);a.innerHTML="";a.scrollTop=0;Pe(a,nh);var b=P("pending-content",a);v(this.Ae,function(a){di(this,b,a)},this);this.vk=P("playlists-content",a);v(this.fg,this.Og,this);this.Ak=P("publishers-content",a);v(this.ig,this.Pg,this);this.ij=P("categories-list",a);this.mh=P("feed-ids",a);this.sj=P("feed-cats",a);x("/admin/_categories",q(function(a){a=D(a.target);v(a,function(a){ei(this,a,"category",Ya(this.df,a.id)||!this.df.length)},this)},this));v(ci,function(a){ei(this,a,
"feed_category",Ya(this.rj,a))},this);v(bi,function(a){ei(this,a,"feed_id",this.tj==a)},this);this.resize()};
m.z=function(){ai.h.z.call(this);this.ia=P("input",this.a());var a=new ag(this.ia),b=new Qg(this.ia);this.Fa=P("tabs",this.a());this.v="pending";var c=l;T(T(T(T(this.i(),window,"resize",ya(I,q(this.resize,this))),a,"key",q(function(a){"13"==a.keyCode&&fi(this,this.ia.value)},this)),b,"after_paste",q(function(){fi(this,this.ia.value)},this)),this.Fa,"click",q(function(a){a=Ke(a.target,"li");this.Gb(a)},this));T(this.i(),this.a(),"scroll",q(function(){if(this.Ra&&!c&&!this.$b[this.v]&&("pending"==this.v||
"all"==this.v)&&this.a().scrollTop+te().height>this.a().scrollHeight-this.a().clientTop){c=j;var a=P("spinner",this.a());V(a,j);var b="pending"==this.v?this.Ae:this.Ze;x("/admin/_media/collection/"+this.Ra+"?offset="+b.length+("pending"==this.v?"&pending=1":""),q(function(g){c=l;g=Gd(Zd(g.target)).medias;g=Ua(g,function(a){return new hb(a)});bb(b,g);var i=P(this.v+"-content",this.a());v(g,function(a){di(this,i,a)},this);this.$b[this.v]=!g.length;M(a,"finished",!g.length)},this))}},this));this.resize()};
m.resize=function(){wf(this.a(),te().height-40)};
function fi(a,b){var c;c=b.match("(?:(https?|ftp)://+|www\\.)\\w[:;,\\.?\\[\\]\\w/~%&=+#-@!]*");c=c!=k?c[0]:"";a.Ra&&c&&(a.ia.disabled="disabled",x("admin/_add/collection/"+a.Ra,q(function(a){this.ia.value="";this.ia.disabled="";a=D(a.target);if("media"==a.type){var b=tb(sb.b(),a.data);Wa(this.Ae,function(a){return a.id==b.id})||(this.Ae.push(b),a=P("pending-content",this.a()),di(this,a,b,j),this.Gb(re("li","pending",h)[0]))}else if("playlist"==a.type){var c=a.data;Wa(this.fg,function(a){return a.id==
c.id})||(this.fg.push(c),this.Og(c),this.Gb(re("li","playlists",h)[0]))}else if("publisher"==a.type){var i=a.data;i&&!Wa(this.ig,function(a){return a.id==i.id})&&(this.ig.push(i),this.Pg(i),this.Gb(re("li","publishers",h)[0]))}},a),"POST","url="+c))}
m.Gb=function(a){v(this.X,function(b){M(this.Fa.parentElement,b,L(a,b));this.v=L(a,b)?b:this.v},this);this.Ra&&!this.Ze&&x("/admin/_media/collection/"+this.Ra,q(function(a){a=Gd(Zd(a.target)).medias;this.Ze=Ua(a,function(a){return new hb(a)});var c=P("all-content",this.a());v(this.Ze,function(a){di(this,c,a)},this)},this))};
m.Og=function(a){var b=R(oh,{name:a.name});this.vk.appendChild(b);var c=P("remove",b);T(this.i(),c,"click",function(){x("admin/_remove/collection/"+this.Ra,q(function(){ye(b)},this),"POST","pub_id="+a.id)})};m.Pg=function(a){var b=R(qh,{name:a.name||a.id,K:a.picture});this.Ak.appendChild(b);var c=P("remove",b);T(this.i(),c,"click",function(){x("admin/_remove/collection/"+this.Ra,q(function(){ye(b)},this),"POST","pub_id="+a.id)})};
function ei(a,b,c,d){if("category"==c){var e=R(ph,{name:b.name,id:b.id});a.ij.appendChild(e)}else e=R(ph,{name:b,id:b}),("feed_id"==c?a.mh:a.sj).appendChild(e);M(e,"enabled",!!d);var g="category"==c?"cat_id="+b.id:"feed_id"==c?"feed_id="+b:"feed_cat="+b;T(a.i(),e,"click",function(){"feed_id"==c&&v(ze(this.mh),function(a){K(a,"enabled")});var a=ke(e,"enabled");x("admin/_edit/collection/"+this.Ra,qb(),"POST",g+"&enabled="+a)})}
function di(a,b,c,d){var e=R(wh,{media:c,kc:pb(c)});d?xe(b,e,0):b.appendChild(e);a.bc&&(b=a.of,d=new Mh(e,h),Oh(b,d));var b=new yh(P("repos",e)),g=P("thumb",e),d=P("play",e),i=P("approve",e),n=P("remove",e);b.gh=function(a,b){var c=b-24;-50<=c&&50>=c&&kf(g,"background-position-y",50-c+"%")};T(T(T(T(a.i(),b,"end",function(){var a=(g.style[Oa("background-position")]||"").split(" ")[1],a=a.substring(0,a.length-1);x("/admin/_posthumb",qb(),"POST","media="+c.id+"&pos="+a)}),d,"click",q(a.sk,a,c)),i,"click",
q(a.Rg,a,c,j,e)),n,"click",q(a.Rg,a,c,l,e));I(ya(J,e,"show"))}m.Uf=function(a,b){x("/admin/_addprogram",q(function(b){b=Gd(Zd(b.target));b=new Jb(b);a.c(Vb,b)},this),"POST","channel="+a.id+"&media="+b.id)};m.Rg=function(a,b,c){var d=a.jj||this.Ra;x("admin/_media/collection",q(function(){J(c,"remove");I(function(){ye(c)},300);gi.b();var b;gi.b();b=He(O("toggle-pending"));hi(0,b-1);Z.b().c("approved",a,d)},this),"POST","col="+d+"&media="+a.id+"&approve="+b)};m.sk=function(a){a=Kb(a);be.b().c(ce,a)};function ii(a){X.call(this);this.Sb=a||k;this.Le=this.Vg=this.bl=this.$g=0}s(ii,X);m=ii.prototype;m.O=function(){this.e=R(mh)};m.q=function(a){ii.h.q.call(this,a);var b=R(mh,{Mh:this.Sb?"Add a collection":"Add a Channel"});a.innerHTML=b.innerHTML};
m.z=function(){ii.h.z.call(this);this.ia=P("input",this.a());var a=new ag(this.ia);this.Ek=P("scrollable",this.a());this.Wd=P("admin-channels",this.a());this.rm=P("topics",this.a());this.Yd=P("collections",this.a());this.Zg=O("admin-col-list");this.Qg=O("admin-list");C.b();this.Sb?x("/admin/_collections/"+this.Sb,q(function(a){a=D(a.target);V(this.Yd.parentElement,!!a.length);v(a,this.Ng,this);this.Le&&hi(gi.b(),this.Le);this.$g=U(this.Yd.parentElement).height;this.resize()},this)):x("/admin/_channels",
q(function(a){a=D(a.target);V(this.Wd.parentElement,!!a.length);v(a,this.Mg,this);this.Vg=U(this.Wd.parentElement).height;this.resize()},this));T(this.i(),a,"key",q(function(a){"13"==a.keyCode&&this.ia.value&&(a=this.ia.value,this.ia.disabled="disabled",x(this.Sb?"/admin/_collections":"/admin/_channels",q(function(a){a=D(a.target);this.Sb?(V(this.Yd.parentElement,!!a),this.Ng(a)):(V(this.Wd.parentElement,!!a),this.Mg(a));this.ia.disabled="";this.ia.value=""},this),"POST","name="+a+(this.Sb?"&cid="+
this.Sb:"")))},this))};
m.Mg=function(a){var b=new Ub(a),c=R(rh,{N:b});this.Wd.appendChild(c);H(c,"click",q(function(a){L(a.target,"on")||L(a.target,"off")?(M(c,"on",L(a.target,"on")),M(c,"off",!L(a.target,"on")),x("/admin/_channel/online/"+b.id,q(function(a){a.target.disabled="";a=D(a.target);M(c,"on",a.online);M(c,"off",!a.online)},this),"POST","online="+L(a.target,"on"))):L(a.target,"program")?x("/admin/_program",qb(),"POST","channel_id="+b.id):L(a.target,"fetch")?x("/admin/_fetch",function(){alert("Fetch began, but give it some time.")},"POST",
"channel_id="+b.id):L(a.target,"remove")&&confirm("Remove "+b.name+"?")?(V(c,l),x("/admin/_channels/"+b.id,function(a){D(a.target).deleted?ye(c):V(c,j)},"DELETE")):((new ii(b.id)).j(this.Zg),Z.b().c("navigate",this.Zg,l,b.name))},this))};
m.Ng=function(a){var b=R(sh,{ff:a});this.Le+=a.pending;this.Yd.appendChild(b);H(b,"click",q(function(c){L(c.target,"remove")&&confirm("Remove "+a.name+"?")?(V(b,l),x("/admin/_collections/"+a.id,function(a){D(a.target).deleted?ye(b):V(b,j)},"DELETE")):L(c.target,"fetch")?x("/admin/_fetch",function(){alert("Fetch began, but give it some time.")},"POST","col_id="+a.id):x("/admin/_media/collection/"+a.id+"?pending=1",q(function(b){var b=Gd(Zd(b.target)),c=b.medias,c=Ua(c,function(a){return new hb(a)});
(new ai(a.id,c,b.playlists,b.publishers,b.categories)).j(this.Qg);Z.b().c("navigate",this.Qg,l,a.name)},this))},this));Z.b().subscribe("approved",function(c,d){if(d==a.id){var e=P("pending",b),g=He(e)-1;0>=g?(ye(b),Da(b)):De(e,g)}},this)};m.resize=function(){wf(this.Ek,this.Vg+this.bl+this.$g+110)};function ji(a,b,c,d,e,g){X.call(this);this.ug=!!a;this.Kb=!!d;this.Ff=!!e;this.Vd=!!b;this.dm=!!g;this.zi=!!c;this.value="";this.g=new Th(this.zi?"reply...":"Add to the conversation.");this.ca=new xg("tweet");pg(this.ca,16,j);this.ea=new xg("post");pg(this.ea,16,j);a=y.b().d;this.$d=a.yk;this.Me=a.wi;this.Qb=new xg("add");this.lg=k;this.tb={};this.ta=[];this.oa=-1;this.od=0;this.ti=this.al=k}s(ji,X);var ki=/@(\w+\s?\w*)/,li=/(\w+\s?\w*)/;m=ji.prototype;m.O=function(){this.e=R(gh)};
m.q=function(a){ji.h.q.call(this,a);J(a,"decorated");var b=Q("div","suggestions");a.appendChild(b);b=Q("div","highlighter");a.appendChild(b)};
m.z=function(){ji.h.z.call(this);this.g.j(re("textarea",h,this.a())[0]);var a=this.g;a.$h=70;a.resize();var a=new ag(this.g.yb()),b=P("popup",this.a());if(!this.zi&&!this.Kb&&(Pf(this,this.Qb),this.Qb.j(P("add-comment",this.a())),this.Qb.Ea(this.Ff),T(this.i(),this.Qb,"action",q(this.$a,this)),this.ah=P("comment-controls",this.a())))V(this.ah,this.ug),M(this.a(),"show-controls",this.ug),this.Yl=P("input-holder",this.a()),Pf(this,this.ca),this.ca.j(P("tweet-toggle",this.a())),y.b().d.Z&&!y.b().d.he&&
x("/_twitter",q(function(a){a=D(a.target);this.Me=this.Me&&a.auth;this.Wi=a.auth_url;og(this.ca,this.Me)},this)),Pf(this,this.ea),this.ea.j(P("fb-toggle",this.a())),y.b().d.Z&&FB.api("/me/permissions",q(function(a){this.$d=this.$d&&!!a.data[0].publish_stream;og(this.ea,this.$d)},this)),T(T(this.i(),this.ea,"action",q(this.gk,this)),this.ca,"action",q(this.pk,this)),DESKTOP&&!IPAD&&(Zg(Yg.b(),this.ca.a(),"top",{text:q(function(){return"Share on Twitter: "+(Y(this.ca,16)?"ON":"OFF")},this)}),Zg(Yg.b(),
this.ea.a(),"top",{text:q(function(){return"Share on Facebook: "+(Y(this.ea,16)?"ON":"OFF")},this)})),y.b().d.subscribe(Ob,function(){og(this.ca,j);y.b().d.he=j},this);this.bb=P("suggestions",this.a());this.Af=P("highlighter",this.a());b&&V(b,!y.b().d.zf&&!y.b().d.he&&this.ug);T(T(T(this.i(),this.g.a(),"focus",q(function(){this.pause&&gi.b().c(mi,l);b&&V(b,l);!y.b().d.aj&&!this.Kb&&Xg.b().c("tooltip",this.g.a(),"top",{text:"Mention friends using @"});this.dispatchEvent("focus")},this)),a,"key",q(function(a){a.stopPropagation();
Xg.b().c("hide");if("13"==a.keyCode||("32"==a.keyCode||"9"==a.keyCode)&&-1<this.oa){if(this.ta.length&&this.ta.reverse()[this.oa]){a.preventDefault();var b=this.g.n().slice(this.Kb?this.od:0,this.g.a().selectionStart),b=b.split(" "),b=1<b.length?b[b.length-2]+" "+b[b.length-1]:b.pop(),e=this.ta[this.oa];this.tb[e.id]=e;this.Kb?ni(this,b.match(li)[0]):ni(this,b.match(ki)[0]);this.g.a().focus();V(this.bb,l);this.ta=[];this.oa=-1;b=this.g.n().length;this.setSelectionRange(b,b)}else"13"==a.keyCode&&(a.preventDefault(),
this.Qb.setActive(this.g.n()),this.$a(a));this.Vd&&ni(this)}else"27"==a.keyCode&&this.ta.length?(V(this.bb,l),this.ta=[],b=this.g.n().length,this.setSelectionRange(b,b),this.oa=-1,this.tb={}):("38"==a.keyCode||"40"==a.keyCode)&&this.ta.length?(a.preventDefault(),b=Array.prototype.slice.call(ze(this.bb)),b.reverse()[this.oa]&&K(b[this.oa],"selected"),this.oa="38"==a.keyCode?Math.min(this.oa+1,this.ta.length-1):Math.max(this.oa-1,-1),-1!=this.oa&&J(b[this.oa],"selected")):I(q(function(){this.Qb.Ea(this.Ff||
!!this.g.n());var b=this.g.n().slice(this.Kb?this.od:0,this.g.a().selectionStart),b=b.split(" "),b=1<b.length?b[b.length-2]+" "+b[b.length-1]:b.pop(),d=this.Kb&&li.test(b)||this.Vd&&ki.test(b);V(this.bb,d);if("8"==a.keyCode)this.Af.innerHTML.match('<div class="token">.*</div>$');else if(d&&(b=this.Kb?b.match(li):b.match(ki),this.ta=y.b().search(b[1]),this.ta.length)){var d=this.ta,e=b[0];this.bb.innerHTML="";V(this.bb,j);v(d.slice(0,5),function(a){var b=Q("div","suggestion",a.name);this.bb.appendChild(b);
T(this.i(),b,"click",q(function(){this.tb[a.id]=a;ni(this,e);this.g.a().focus();var b=this.g.n().length;this.setSelectionRange(b,b);V(this.bb,l);this.ta=[];this.oa=-1},this))},this)}this.g.n()||this.clear();this.Vd&&ni(this)},this))},this)),this.g,"resize",q(function(a){this.dispatchEvent(a)},this));b&&T(this.i(),b,"click",q(function(){V(b,l)},this));Z.b().subscribe("reply-comment",this.kg,this);Z.b().subscribe("reply-tweet",this.Ck,this)};
function ni(a,b){var c=a.g.n(),d=c,e=c,g=Pc(a.tb);v(ec(a.tb),function(a){var n=b&&0==Ga(b,((this.Kb?"":"@")+a.name).substr(0,b.length))?b:a.name;d=d.replace(RegExp(n,"g"),'<div class="token">'+a.name+"</div> ");this.Af.innerHTML=d;this.value=e=e.replace(RegExp(n,"g"),"@["+a.id+":"+a.name+"]");var t=RegExp(n,"g").exec(c);t&&(Za(g,a.id),this.od=Math.max(t.index+t[0].length,this.od));c=c.replace(RegExp(n,"g"),a.name)+" ";b&&this.g.sa(c)},a);v(g,function(a){rb(this.tb,a)},a)}
m.kg=function(a,b){this.ti=a.id?a.id:a.toString();this.lg=b};m.Ck=function(a){this.cm=a.id;this.sa((this.n()?this.n()+" ":"")+"@"+a.handle+" ");this.ra(j);this.ca.Ea(j);this.ra(j);a=this.g.n().length;this.setSelectionRange(a,a)};m.setSelectionRange=function(a,b){if(this.g.a().setSelectionRange)this.g.a().focus(),this.g.a().setSelectionRange(a,b);else if(this.g.a().createTextRange){var c=this.g.a().createTextRange();c.collapse(j);c.moveEnd("character",b);c.moveStart("character",a);c.select()}};
m.n=function(){this.Vd&&ec(this.tb).length?ni(this):this.value=this.g.n();return this.value};m.sa=function(a,b,c){og(this.ea,!!b);og(this.ca,!!c);this.g.sa(a);this.value=a;this.Qb.Ea(!!a)};m.clear=function(){this.g.sa("");this.tb={};this.ta=[];this.Af.innerHTML="";this.bb.innerHTML="";V(this.bb,l);this.g.resize();this.od=0};m.je=function(){return L(this.a(),"focused")};m.ra=function(a){a&&this.g.a().focus();return M(this.a(),"focused",a)};
m.$a=function(){if(this.n()||this.Ff)this.dispatchEvent({type:"add",Ug:q(function(a){var b=D(a.target);if(b.comment){var a=new oi(b.comment),c=b.tweet?new pi(b.tweet):k;if(b=tb(sb.b(),b.comment.media))b.c(kb,a),c&&b.c("add-tweet",c)}},this),fd:Y(this.ea,16),Eg:Y(this.ca,16),text:this.n(),B:this.ti,Ti:this.lg&&this.lg.id}),this.clear()};
m.gk=function(){Xg.b().c("tooltip",this.ea.a(),"top",{text:q(function(){return"Share on Facebook: "+(Y(this.ea,16)?"ON":"OFF")},this)});!y.b().d.zf&&(!this.$d&&Y(this.ea,16))&&(V(O("overlay"),j),FB.login(q(function(a){V(O("overlay"),l);this.qj=!!a.authResponse;og(this.ea,this.qj)},this),{scope:"publish_stream"}))};
m.pk=function(){Xg.b().c("tooltip",this.ca.a(),"top",{text:q(function(){return"Share on Twitter: "+(Y(this.ca,16)?"ON":"OFF")},this)});if(!y.b().d.he&&!this.Me&&Y(this.ca,16))if(og(this.ca,l),IPHONE||IPAD){var a=document.createElement("a");a.setAttribute("href",this.Wi);a.setAttribute("target","_blank");var b=document.createEvent("HTMLEvents");b.initEvent("click",j,j);a.dispatchEvent(b)}else a=window.open(this.Wi,"Twitter Login","height=300,width=550"),a.moveTo(screen.width/2-225,screen.height/2-
150),a.focus()};function oi(a){this.id=a.id;this.p=a.user?dc(y.b(),a.user):k;this.text=a.text;this.media=a.media?tb(sb.b(),a.media):k;this.time=a.time?ib(a.time+"Z"):new yb;this.pb=Lb(this.time.getTime());this.B=a.parent_id;this.Bd=[];this.Ma=l;a.replies&&v(a.replies,function(a){a=new oi(a);this.Bd.push(a)},this)}
function qi(a,b,c,d,e,g,i,n){var t=new oi({text:c,parentId:g});t.p=a;t.B=g||k;sb.b().get(b).wb(t);x("/_comment",q(function(a){a=D(a.target);t.id=a.comment.id;n&&n(t)},this),"POST","media_id="+b+"&text="+c+"&tweet="+e+"&facebook="+d+(g?"&parent_id="+g:"")+(i?"&to_user_id="+i:""));return t};function pi(a){this.id=a.id;this.p=a.user&&dc(y.b(),a.user);this.handle=a.handle;this.K=a.picture;this.text=a.text;this.time=ib(a.time+"Z")};function ri(a,b,c,d){X.call(this);this.f=a;this.va=b||[];this.bd={};this.Nd=!!c;this.eb=d||[];this.Md={};this.W=this.Hl=0;this.cc={}}s(ri,X);m=ri.prototype;
m.q=function(a){ri.h.q.call(this,a);a.innerHTML="";a.scrollTop=0;J(this.a(),"ios-scroll");this.u=Q("div","loading",Q("div","loading-spinner"));this.a().appendChild(this.u);V(this.u,l);this.fc=Q("div","no-comments","Start the conversation.");this.a().appendChild(this.fc);this.l=Q("div","comments tweets");this.a().appendChild(this.l);T(T(this.i(),window,"resize",ya(I,q(this.resize,this))),this.l,"click",q(this.gf,this));this.va.length?(v(this.va,function(a){this.wb(a)},this),this.Gc=U(this.l).height):
this.Nd&&this.eb.length?(v(this.eb,function(a){this.rc(a)},this),this.Gc=U(this.l).height):V(this.u,j);this.Nd?(x("/_tweet/"+this.f.id+"?offset="+this.eb.length,q(function(a){V(this.u,l);a=Gd(Zd(a.target));a=Ua(a,function(a){a=new pi(a);this.rc(a);return a},this);this.Gc=U(this.l).height;this.resize()},this)),this.f.subscribe("add-tweet",function(a){this.rc(a,j)},this)):(x("/_comment/"+this.f.id+"?offset="+this.va.length,q(function(a){V(this.u,l);a=Gd(Zd(a.target));a=Ua(a,function(a){a=new oi(a);
this.wb(a);return a},this);this.Gc=U(this.l).height;this.resize()},this)),this.f.subscribe(kb,this.wb,this),this.f.subscribe(nb,this.jg,this));this.resize(41)};
m.rc=function(a,b){this.Md[a.id]=a;V(this.fc,l);var c=Ph(a.text),c=c.replace(/#(\S+)/g,function(a,b){return'<a target="_blank" href="http://twitter.com/search?q=%23'+b+'">'+a+"</a>"}),c=c.replace(/@(\S+)/g,function(a,b){return'<a target="_blank" href="http://twitter.com/'+b+'">'+a+"</a>"}),c=R(eh,{ub:a,text:c,timestamp:Lb(a.time.getTime())});si($b.b(),a.time,P("timestamp",c));b?xe(this.l,c,0):this.l.appendChild(c);this.resize();V(Be(this.l),j)};
m.gf=function(a){a=a.target;if(this.Nd){var b=Ke(a,k,"tweet");b&&(b=this.Md[b.id.split("-")[1]],L(a,"reply")&&Z.b().c("reply-tweet",b))}else if(b=Ke(a,k,"comment"))b=this.bd[b.id.split("-")[1]],L(a,"reply")?P("reply-textarea",this.cc[b.B?b.B:b.id]).focus():L(a,"remove")&&this.f.c(nb,b)};m.jg=function(a){ye(O("listcomment-"+a.id));$a(this.va,function(b){return b.id==a.id})};
m.wb=function(a){this.va.push(a);V(this.fc,l);var b=Ph(a.text),b=b.replace(/@\[(\d+):([a-zA-z\s]+)\]/g,function(a,b,e){return'<a href="#user:'+b+'">'+e+"</a>"}),b=R(fh,{prefix:"listcomment",L:a,text:b,si:a.p.id==y.b().d.id});si($b.b(),a.time,P("timestamp",b));a.B?P("replies",this.cc[a.B]).appendChild(b):this.l.appendChild(b);a.id&&ti(this,a,b);v(a.Bd,function(a){this.wb(a)},this);a.B||(this.l.scrollTop=this.l.scrollHeight);return b};
function ti(a,b,c){a.bd[b.id]=b;c.id="listcomment-"+b.id;if(!b.B){a.cc[b.id]=c;var d=P("reply-input",c),c=P("reply-textarea",c);T(a.i(),c,"click",q(function(){if(!L(d,"decorated")){var a=new ji(l,j,j);a.j(d);a.kg(b,b.p);T(this.i(),a,"add",q(function(a){this.$a(a)},this))}},a))}}m.resize=function(a){this.W=a||this.W;wf(this.a(),te().height-42-this.W-(Ke(this.a(),k,"tabbed")?30:0))};function ui(a,b,c,d){X.call(this);this.f=this.M=a;this.va=b||[];this.eb=c||[];this.Nd=!!d;this.ad=new ri(a,this.va);this.Cg=new ri(a,h,j,this.eb);this.g=new ji(j,j);this.X=["comments","tweets"];this.Jd={}}s(ui,X);m=ui.prototype;m.q=function(a){ui.h.q.call(this,a);J(a,"conversation");J(a,"ios-scroll");Pe(a,uh);J(a.firstChild,this.Nd?"tweets":"comments")};
m.z=function(){this.Fa=P("tabs",this.a());this.ad.j(P("comments-content",this.a()));this.Cg.j(P("tweets-content",this.a()));Nf(this.g,this.a());T(T(T(T(T(T(T(this.i(),this.Fa,"click",q(function(a){a=Ke(a.target,"li");this.Gb(a)},this)),this.g,"add",q(this.$a,this)),this.g,"resize",q(function(){L(this.a().firstChild,"comments")?this.ad.resize(41):this.Cg.resize(41)},this)),window,"click",q(function(a){!Ke(a.target,k,"comment-input")&&!this.g.n()&&this.g.ra(l)},this)),P("no-comments",this.a()),"click",
q(this.oi,this)),qe("no-comments",this.a())[1],"click",q(this.oi,this)),window,"click",q(function(a){!Ke(a.target,k,"comment-input")&&!this.g.n()&&this.g.ra(l)},this));this.ad.resize(41);this.Cg.resize(41)};m.oi=function(a){a.preventDefault();a.stopPropagation();this.g.ra(j)};
m.$a=function(a){var b=qi(y.b().d,this.f.id,a.text,a.fd,a.Eg,a.B,a.Ti,q(function(a){var b=this.Jd[a.time.getTime()];b.id="infocomment-"+a.id;ti(this.ad,a,b)},this)),c=this.ad.wb(b);this.Jd[b.time.getTime()]=c;a.fd&&!a.B&&(FB.api("/me/feed","POST",{message:a.text,name:this.f.name,link:this.f.link,picture:this.f.sb,caption:"on XYLO",description:this.f.description},ba()),og(this.g.ea,l))};m.Gb=function(a){v(this.X,function(b){M(this.Fa.parentElement,b,L(a,b));this.v=L(a,b)?b:this.v},this)};function vi(a,b,c,d,e){X.call(this);v(a.Xf,function(a){var b=a.ga();b&&b.media.id==this.id?(this.uk=a,v(a.Hg,function(a){a.Bg||(this.Mc[a.p.id]=a.p)})):this.Mc={}},a);this.f=this.M=a;this.ne=c||k;this.Vh=d||k;this.Jj=l;this.nh=!b;this.Hc=EMBED||!!e;this.Qe=[];this.Rd={};this.va=[];this.bd={};this.cc={};this.Jd={};this.eb=[];this.Md={};this.g=new ji(j,j,l,l,l,j);this.Ib=new xg("Star");pg(this.Ib,16,j);this.sf=new xg("Facebook");this.Fg=new xg("Twitter");this.xd=new xg("Play");this.mc=new xg("Send");
pg(this.mc,16,j);this.cd=new xg("Create Poll");this.W=0}s(vi,X);m=vi.prototype;m.O=function(){this.e=R(ch,{media:this.f})};m.q=function(a){vi.h.q.call(this,a);var b=R(ch,{media:this.f,description:this.f.description?Ph(this.f.description):"",kc:pb(this.f),Qj:this.ne?this.ne.id:k,Vj:!y.b().d.Z});a.innerHTML=b.innerHTML};
m.z=function(){vi.h.z.call(this);this.Ig=P("viewers",this.a());var a=P("picture",this.a()),b=P("ytvideo",this.a()),c=P("scrollable",this.a()),d=P("publisher",this.a()),e=P("title",this.a()),g=P("links",this.a());this.u=P("loading",this.a());var i=a.firstChild;this.kf=P("info-contents",this.a());this.Ob=P("user-poll",this.a());this.sm=P("tweet-holder",this.a());this.cb=P("tweets",this.a());this.Wb=P("dot-nav",this.a());this.l=P("comments",this.a());this.fc=P("no-comments",this.a());Nf(this.g,this.a());
this.Ib.j(P("star",this.a()));og(this.Ib,Rb(y.b().d,this.f));this.sf.j(P("facebook",this.a()));this.Fg.j(P("twitter",this.a()));this.xd.j(P("play",this.a()));this.mc.j(P("send",this.a()));this.cd.j(P("create-poll-button",this.a()));this.Dg=new gd(5E3);this.wm=P("watch-with",this.a());this.gb=P("create-poll",this.a());this.Hb=P("send-media",this.a());this.jb=P("fb-login",this.a());this.qe=P("login-promo",this.a());M(this.a(),"mini",this.Hc);!this.nh||this.f.oh?wi(this,l,this.f.description,this.f.Vi,
this.f.qg,this.f.Sa,this.f.wk):this.nh&&x("/_info/"+this.f.id,q(function(a){a=Gd(Zd(a.target));wi(this,j,a.description,a.tweets,a.seen,a.comments,a.poll)},this));y.b().d.Z||(V(this.g.a(),l),V(this.l.parentElement,l),J(this.jb,"show"),J(this.qe,"show"),J(this.a(),"logged-out"),T(this.i(),this.jb,"click",q(this.login,this)),FB.XFBML.parse());V(this.u,y.b().d.Z);T(T(T(T(T(T(T(T(T(T(T(T(T(T(T(T(T(T(T(T(T(T(T(T(this.i(),window,"resize",ya(I,q(this.resize,this))),d,"click",q(function(){Z.b().c("media-list",
this.f.qa.name,h,"/admin/_media/publisher/"+this.f.qa.id,this.f.qa.K,this.f.qa.description,this.f.qa.link,"/_publisher/"+this.f.qa.id)},this)),this.Ib,"action",q(function(){sb.b().c("star",this.f,Y(this.Ib,16));x("/_star",h,"POST","media_id="+this.f.id+(!Y(this.Ib,16)?"&delete=1":""))},this)),this.sf,"action",q(this.fk,this)),this.Fg,"action",q(this.ok,this)),this.xd,"action",q(this.jk,this)),this.mc,"action",q(this.lk,this)),P("local",this.a()),"click",q(function(){V(P("link-select",this.a()),j);
P("link-input",this.a()).select()},this)),this.cd,"action",q(this.Gk,this)),this.g,"add",q(this.$a,this)),this.fc,"click",q(function(a){a.preventDefault();a.stopPropagation();this.g.ra(j)},this)),P("conv-link",this.a()),"click",q(function(a){a.preventDefault();a.stopPropagation();Z.b().c("conversation",this.f,this.va,this.eb)},this)),P("tweets-link",this.a()),"click",q(function(a){a.preventDefault();a.stopPropagation();Z.b().c("conversation",this.f,this.va,this.eb,j)},this)),this.g,"focus",q(function(){this.resize(0,
j)},this)),this.g,"resize",q(function(){this.resize()},this)),this.Wb,"click",q(function(a){L(a.target,"dot")&&(xi(this,a.target),this.Dg.stop())},this)),this.Dg,id,q(function(){var a=this.Tb&&(this.Tb.nextElementSibling!=h?this.Tb.nextElementSibling:Ae(this.Tb.nextSibling))||P("dot",this.a());I(q(function(){xi(this,a)},this))},this)),window,"click",q(function(a){!Ke(a.target,k,"comment-input")&&!this.g.n()&&(this.g.ra(l),this.resize(0))},this)),i,"load",function(){V(i,j);I(function(){U(i).height<
U(a).height+50&&J(i,"fix-height");U(i).width>2*U(a).width?J(i,"pan-left"):U(i).height>2*U(a).height&&J(i,"pan-top");i.style.marginTop=-U(i).height/2+"px";i.style.marginLeft=-U(i).width/2+"px";J(i,"show")})}),c,"scroll",q(function(){var n=P("ytvideo",this.a()),t=IPHONE&&10<c.scrollTop?0:((this.Hc?100:120)-c.scrollTop)/100;yf(d,Math.min(1,Math.max(t,0)));yf(e,Math.min(1,Math.max(t,0)));yf(g,Math.min(1,Math.max(t,0)));yf(i,Math.min(0.5,Math.max(t,0.1)));n&&yf(n,Math.min(0.5,Math.max(t,0.1)));yf(b,Math.min(0.5,
Math.max(t,0.1)));M(a,"scrolled",10<c.scrollTop)},this)),this.l,"scroll",q(this.ng,this)),this.l,"click",q(this.gf,this)),this.cb,"click",q(this.dl,this)),P("desc-link",this.a()),"click",q(function(){var b=ke(a,"scrolled");(new Hf(c,[c.scrollLeft,c.scrollTop],[c.scrollLeft,b?this.Hc?70:170:0],300)).play()},this));this.ne&&T(this.i(),P("prev-link",this.a()),"click",q(function(){Z.b().c("media-info",this.ne,j,h,this.g.n())},this));this.Vh&&this.g.sa(this.Vh);DESKTOP&&!IPAD&&(Zg(Yg.b(),this.mc.a(),"left",
{text:"Send"}),Zg(Yg.b(),this.sf.a(),"left",{text:"Post to Facebook"}),Zg(Yg.b(),this.Fg.a(),"left",{text:"Tweet"}),Zg(Yg.b(),this.Ib.a(),"left",{text:"Save"}),Zg(Yg.b(),P("eye-icon",this.a()),"left",{text:"Seen by"}),Zg(Yg.b(),P("friends-icon",this.a()),"right",{text:"Visible by only your Facebook friends"}));IPHONE&&new YT.Player(b,{height:"100%",width:"100%",videoId:this.f.kd,playerVars:{controls:0,showinfo:0}});this.f.subscribe(kb,function(a){yi(this,a,j)},this);this.f.subscribe(nb,this.jg,this);
this.f.subscribe("add-tweet",function(a){this.rc(a,j)},this);this.f.subscribe(ob,function(a,b,c){zi(this,a,!c)},this);be.b().subscribe(de,function(){K(this.xd.a(),"play-loading")},this);be.b().subscribe("no-media",function(){K(this.xd.a(),"play-loading")},this);y.b().d.subscribe("set-starred",function(){og(this.Ib,Rb(y.b().d,this.f))},this);y.b().subscribe("logged-in",function(){K(this.qe,"show");I(q(function(){V(this.qe,l)},this),600);V(this.g.a(),j);V(this.u,j);K(this.a(),"logged-out");x("/_info/"+
this.f.id,q(function(a){a=Gd(Zd(a.target));wi(this,j,a.description,a.tweets,a.seen,a.comments,a.poll)},this))},this);this.resize()};
function wi(a,b,c,d,e,g,i){c?(a.f.description=c,P("description",a.a()).innerHTML=Ph(c),V(P("scrollable",a.a()),j)):(V(P("desc-link",a.a()),l),V(P("scrollable",a.a()),l));e&&(a.Qe=Ua(e,function(a){a=b?dc(y.b(),a):a;a.id!=y.b().d.id&&(V(this.Ig,j),this.Jj=j,zi(this,a,l));return a},a));Oc(a.f.Mc,function(a){zi(this,a,j)},a);d&&(a.eb=Ua(d,function(a){a=b?new pi(a):a;this.rc(a);this.Tb=this.Wb.firstChild;J(this.Tb,"selected");return a},a),d.length&&a.Dg.start());c=[];g&&(a.l&&V(a.l.parentElement,j),V(a.fc,
!g.length),c=Ua(g,function(a){a=b?new oi(a):a;a.B||yi(this,a);return a},a));i?(Ai(a,i),a.f.wk=i):y.b().d.Z&&V(a.cd.a(),j);a.resize();b&&(a.f.Vi=a.eb,a.f.Sa=c,a.f.qg=a.Qe,a.f.oh=j);V(a.u,l)}
m.Gk=function(){V(this.gb,j);if(!this.xk){var a=new xg("CREATE");a.j(P("submit-poll",this.a()));a.Ea(l);var b=P("poll-title",this.gb),c=P("option-input-1",this.gb),d=P("option-input-2",this.gb),e=P("option-inputs",this.gb);T(T(T(T(T(T(this.i(),a,"action",q(function(){V(this.gb,l);var a;a=e.children;var c=function(a,b){var c=a+(b.value?b.value+"|":"");b.value="";return c},d=this;if(a.reduce)a=d?a.reduce(q(c,d),""):a.reduce(c,"");else{var t="";v(a,function(a){t=c.call(d,t,a)});a=t}b.value&&a&&(x("/_poll",
q(function(a){a=D(a.target);Ai(this,a)},this),"POST","media_id="+this.f.id+"&title="+b.value+"&options="+a),b.value="",V(this.cd.a(),l))},this)),new ag(b),"key",q(function(){I(q(function(){a.Ea(b.value&&c.value&&d.value)},this))},this)),new ag(c),"key",q(function(){I(q(function(){a.Ea(b.value&&c.value&&d.value)},this))},this)),new ag(d),"key",q(function(){I(q(function(){a.Ea(b.value&&c.value&&d.value)},this))},this)),P("add-option",this.gb),"click",q(function(){var a=Q("input",{type:"text",placeholder:"Option "+
(e.children.length+1)});e.appendChild(a)},this)),P("close",this.gb),"click",q(function(){V(this.gb,l)},this));this.xk=j}};
m.login=function(){J(this.jb,"disabled");if(IPAD)return window.location.href="https://m.facebook.com/dialog/oauth?client_id="+FB_APP_ID+"&response_type=code&redirect_uri="+HOST_URL+"&scope=email",l;var a=P("message",this.jb);J(P("login-faces",this.a()),"hide");FB.login(q(function(b){b.authResponse?(K(a,"show"),J(this.jb,"disabled"),J(this.jb,"spin"),x("/_login",q(function(a){200==Yd(a.target)&&(a=D(a.target),cc(y.b(),a.current_user),K(this.jb,"show"),K(this.jb,"spin"),y.b().c("logged-in"))},this),
"POST")):K(this.jb,"disabled")},this),{scope:"email"});var b=Q("a",{href:"https://www.facebook.com/dialog/oauth?client_id="+FB_APP_ID+"&response_type=code&redirect_uri="+HOST_URL+"&scope=email"},"Click here if you have a popup blocker");a.innerHTML="";a.appendChild(b);J(a,"show");T(this.i(),a,"click",function(a){a.stopPropagation();window.onbeforeunload=qb()})};
function Ai(a,b){V(a.cd.a(),l);var c=P("status",a.Ob),d=P("poll-options",a.Ob);a.Ob.id=b.id;De(c,b.title.toUpperCase()+" ("+b.vote_count+" VOTES)");v(b.options,function(a){var g=R(xh,{name:a.name,rk:a.percent+"%"});d.appendChild(g);a.voted?Bi(this,b,g):T(this.i(),g,"click",q(function(){L(this.Ob,"voted")||(a.vote_count+=1,b.vote_count+=1,Bi(this,b,g),De(c,b.title.toUpperCase()+" ("+b.vote_count+" VOTES)"),x("/_poll",h,"POST","id="+a.id),this.g.sa("I voted: "+a.name+" (on "+b.title+")",j,j),this.g.ra(j))},
this))},a);V(a.Ob,j)}function Bi(a,b,c){P("status",a.Ob);var d=P("poll-options",a.Ob);J(a.Ob,"voted");He(P("name",c));J(c,"selected");v(ze(d),function(a,c){var d=parseInt(100*(b.options[c].vote_count/b.vote_count),10)+"%";De(P("percent-number",a),d);P("percent",a).style.width=d},a)}m.zb=function(){return this.g.je()||!!this.g.al||!!this.g.n()};
function xi(a,b){if(b){v(ze(a.Wb),function(a){return K(a,"selected")});a.Tb=b;J(a.Tb,"selected");var c=Xa(ze(a.Wb),function(a){return a==b});(new Hf(a.cb,[a.cb.scrollLeft,a.cb.scrollTop],[320*c,a.cb.scrollTop],200)).play();a.resize()}}
m.$a=function(a){var b=qi(y.b().d,this.f.id,a.text,a.fd,a.Eg,a.B,a.Ti,q(function(a){var b=this.Jd[a.time.getTime()];b.id="infocomment-"+a.id;Ci(this,a,b)},this)),c=yi(this,b);this.Jd[b.time.getTime()]=c;a.fd&&!a.B&&FB.api("/me/feed","POST",{message:a.text,name:this.f.name,link:this.f.link,picture:this.f.sb,caption:"on XYLO",description:this.f.description},ba());Tb.b().L(this.f.id,a.fd,a.Eg)};
m.rc=function(a,b){this.Md[a.id]=a;var c=Ph(a.text),c=c.replace(/#(\S+)/g,function(a,b){return'<a target="_blank" href="http://twitter.com/search?q=%23'+b+'">'+a+"</a>"}),c=c.replace(/@(\S+)/g,function(a,b){return'<a target="_blank" href="http://twitter.com/'+b+'">'+a+"</a>"}),c=R(eh,{ub:a,text:c,timestamp:Lb(a.time.getTime()),prefix:"infotweet"}),d=Q("div","dot");si($b.b(),a.time,P("timestamp",c));b?(xe(this.cb,c,0),xe(this.Wb,d,0),10<ze(this.cb).length&&(ye(this.cb.lastChild),ye(this.Wb.lastChild),
xi(this,d))):(this.cb.appendChild(c),this.Wb.appendChild(d));this.resize();V(Be(this.cb),j)};
function yi(a,b,c){a.va.push(b);V(a.fc,l);var d=Ph(b.text),d=d.replace(/@\[(\d+):([a-zA-z\s]+)\]/g,function(a,b,c){return'<a href="#user:'+b+'">'+c+"</a>"}),d=R(fh,{prefix:"infocomment",L:b,text:d,si:b.p.id==y.b().d.id});si($b.b(),b.time,P("timestamp",d));b.B?P("replies",a.cc[b.B]).appendChild(d):a.l.appendChild(d);b.id&&Ci(a,b,d);v(b.Bd,function(a){yi(this,a,c)},a);!b.B&&c&&(a.l.scrollTop=a.l.scrollHeight,a.kf.firstChild.scrollTop=a.kf.firstChild.scrollHeight);return d}
function Ci(a,b,c){a.bd[b.id]=b;c.id="infocomment-"+b.id;if(!b.B){a.cc[b.id]=c;var d=P("reply-input",c),c=P("reply-textarea",c);T(a.i(),c,"click",q(function(){if(!L(d,"decorated")){gi.b().c(mi,l);var a=new ji(l,j,j,l,l,j);a.j(d);a.kg(b,b.p);T(this.i(),a,"add",q(function(a){this.$a(a)},this))}},a))}}
function zi(a,b,c){if(!c&&a.Rd[b.id])K(a.Rd[b.id],"online");else if(b.id!=y.b().d.id){if(!a.Rd[b.id]){var d=R(dh,{p:b});a.Rd[b.id]=d;xe(a.Ig,d,1);T(a.i(),d,"click",function(){Z.b().c("profile",b)});DESKTOP&&!IPAD&&Zg(Yg.b(),d,"top",{text:q(function(){return b.be()+(L(d,"online")?" is watching":" saw this")},a)})}V(a.Ig,j);M(a.Rd[b.id],"online",c)}}m.dl=function(a){var a=a.target,b=Ke(a,k,"tweet");b&&(b=this.Md[b.id.split("-")[1]],L(a,"reply")&&Z.b().c("reply-tweet",b))};
m.gf=function(a){var a=a.target,b=Ke(a,k,"comment");b&&(b=this.bd[b.id.split("-")[1]],L(a,"reply")?P("reply-textarea",this.cc[b.B?b.B:b.id]).focus():L(a,"remove")&&this.f.c(nb,b))};m.jg=function(a){ye(O("infocomment-"+a.id));$a(this.va,function(b){return b.id==a.id})};
m.ng=function(){M(this.l.parentElement,"top-grad",!!this.l.scrollTop);var a=this.l.style.maxHeight,b=te().height,a=a.substring(0,a.length-2),c=U(this.l).height;M(this.l.parentElement,"bottom-grad",this.l.scrollTop<this.l.scrollHeight-a-5&&c>=a&&640<b)};
m.resize=function(a,b){this.W=a!=h?a:this.W;var c=te().height;if(this.a()){var d=te().height+(IPHONE&&SAFARI?61:0)-41-this.W-(Ke(this.a(),k,"tabbed")?30:0);wf(this.a(),d);wf(this.kf,d-(this.Hc?143:243)+(IPHONE?50:0)-(this.Qe.length?38:0));640<c&&this.l&&this.l.parentElement?(kf(this.l,"max-height",c-(new le(this.l.parentElement.offsetLeft,this.l.parentElement.offsetTop)).y-(this.Hc?213:313)-(this.Qe.length?38:0)-this.W+"px"),this.ng()):640>c&&(kf(this.l,"max-height",""),this.ng());y.b().d.Z||(c=d-
(this.Hc?188:288)+(IPHONE?50:0),wf(this.qe,c),V(P("promo-1",this.a()),255<c),V(P("promo-2",this.a()),335<c),V(P("promo-3",this.a()),445<c));b&&I(q(function(){(new Hf(this.l,[this.l.scrollLeft,this.l.scrollTop],[this.l.scrollLeft,this.l.scrollHeight],400)).play()},this),0)}};m.fk=function(){V(O("overlay"),j);FB.ui({method:"feed",name:this.f.name,link:this.f.link,K:this.f.sb,caption:"on XYLO",description:this.f.description},function(){V(O("overlay"),l)});Di(Tb.b(),this.f.id,j,l)};
m.ok=function(){var a="https://twitter.com/share?url="+this.f.link+"&text=I'm watching "+this.f.name+" "+this.f.link;if(IPHONE||IPAD){var b=document.createElement("a");b.setAttribute("href",a);b.setAttribute("target","_blank");a=document.createEvent("HTMLEvents");a.initEvent("click",j,j);b.dispatchEvent(a)}else b=window.open(a,"Tweet","height=320,width=550"),b.moveTo(screen.width/2-225,screen.height/2-150),b.focus(),Di(Tb.b(),this.f.id,l,j)};
m.jk=function(){J(this.xd.a(),"play-loading");var a=Kb(this.M);be.b().c(ce,a)};
m.lk=function(){if(!L(this.Hb,"decorated")){var a=new ji(l,j,l,j,l,j);a.j(P("recipients",this.Hb));var b=new ji(l,l,l,l,j,j);b.j(P("send-message",this.Hb));T(T(this.i(),b,"add",q(function(c){var d=ec(a.tb);d.length&&(v(d,function(a){var b=new Ei({from_user:y.b().d,to_user:a.id,text:c.text||"Sent you a video!",media:this.M});b.time=new yb;b.pb=Lb(b.time.getTime());y.b().c("new-message",b);x("/_message",c.Ug,"POST","from_id="+y.b().d.id+"&to_id="+a.id+"&text="+b.text+"&media_id="+this.M.id)},this),
a.clear(),b.clear(),og(this.mc,l),V(this.Hb,l))},this)),P("close",this.Hb),"click",q(function(){V(this.Hb,l);og(this.mc,l)},this));J(this.Hb,"decorated")}V(this.Hb,Y(this.mc,16))};function Fi(a,b,c,d,e,g){X.call(this);this.bc=Pb();this.bi=a||k;this.Od=b||k;this.Nf={};this.zg=c||k;this.wc=d||k;this.hh=g||k;this.Tj=e||k;this.of=this.bc?new Nh:k;this.Gc=this.Kh=0}s(Fi,X);
Fi.prototype.q=function(a){Fi.h.q.call(this,a);a.innerHTML="";a.scrollTop=0;J(this.a(),"ios-scroll");(this.wc||this.zg)&&Gi(this);!this.wc&&this.hh&&x(this.hh,q(function(a){a=D(a.target);a.description&&this.rd?(P("description",this.rd).innerHTML=Ph(a.description),this.Kh=U(this.rd).height,this.resize()):a.description&&Gi(this)},this));this.u=Q("div","loading",Q("div","loading-spinner"));this.a().appendChild(this.u);V(this.u,l);L(this.a(),"starred")&&(this.Jc=Q("div","no-comments","Favorities will appear here."),
this.a().appendChild(this.Jc));this.re=Q("div","medias");this.a().appendChild(this.re);T(this.i(),window,"resize",ya(I,q(this.resize,this)));this.Od?(V(this.u,j),x(this.Od,q(function(a){V(this.u,l);a=Gd(Zd(a.target));a=Ua(a,function(a){return new hb(a)});v(a,this.We,this);this.Gc=U(this.re).height;this.resize()},this))):this.bi&&(v(this.bi,this.We,this),this.Gc=U(this.re).height,this.resize())};
Fi.prototype.We=function(a){this.Jc&&V(this.Jc,l);var b=R(vh,{media:a}),c=P("list-play",b),d=P("list-plus",b);this.re.appendChild(b);if(this.bc){var e=this.of,g=new Mh(b,h);Oh(e,g)}T(T(T(this.i(),b,"click",q(function(){Z.b().c("media-info",a)},this)),c,"click",q(function(b){b.preventDefault();b.stopPropagation();b=Kb(a);be.b().c(ce,b)},this)),d,"click",function(b){b.preventDefault();b.stopPropagation();ac().c(Wb,a,j)});this.Nf[a.id]=b};
Fi.prototype.resize=function(){wf(this.a(),te().height+(IPHONE&&SAFARI?61:0)-(DESKTOP?40:0)-(Ke(this.a(),k,"tabbed")?30:0))};function Gi(a){a.rd=R(kh,{sb:a.zg,description:a.wc?Ph(a.wc):"",link:a.Tj});a.a().appendChild(a.rd);a.Kh=U(a.rd).height;a.resize()}Fi.prototype.Uf=function(a,b){x("/admin/_addprogram",q(function(b){b=Gd(Zd(b.target));b=new Jb(b);a.c(Vb,b)},this),"POST","channel="+a.id+"&media="+b.id)};function Ei(a){this.id=a.id;this.D=dc(y.b(),a.from_user);this.$k=dc(y.b(),a.to_user);this.text=a.text;this.media=a.media?"brkn.model.Media"==oa(a.media)?a.media:tb(sb.b(),a.media):k;this.Ma=a.read;this.pb=(this.time=a.time?ib(a.time+"Z"):k)?Lb(this.time.getTime()):k}Ei.prototype.Ie=function(){x("/_message",qb(),"POST","id="+this.id+"&read=1");this.Ma=j;y.b().d.c("read-message",this.D.id)};function Hi(a){return'<div class="message'+(a.uj?" flip":"")+'"><a href="#user:'+S(a.message.D.id)+'"><div class="picture" style="background:'+S(a.message.D.color)+'"><img src="'+S(a.message.D.K)+'"/></div></a><div class="body"><a class="user" href="#user:'+S(a.message.D.id)+'">'+S(a.message.D.name)+'</a>  <div class="texts"><div class="text">'+S(a.message.text)+'<div class="timestamp">'+S(a.message.pb)+"</div></div></div></div></div>"}
function Ii(a){return'<div class="text">'+S(a.message.text)+'<div class="timestamp">'+S(a.message.pb)+"</div></div>"};function Ji(a,b){X.call(this);this.Ga=a||k;this.za=b||k;this.Of={};this.g=new ji(l);this.W=0;this.Ka=this.Ga.id==y.b().d.id}s(Ji,X);
Ji.prototype.q=function(a){Ji.h.q.call(this,a);a.innerHTML="";a.scrollTop=0;this.Fb=Q("div","messages");this.a().appendChild(this.Fb);M(this.Fb,"inbox",this.Ka);this.u=Q("div","spinner");this.Fb.appendChild(this.u);V(this.u,l);this.ue=Q("div","no-comments",this.Ka?"No Messages":"Start a private conversation.");this.Fb.appendChild(this.ue);this.nb=Q("div","no-comments","Load previous messages");this.Fb.appendChild(this.nb);V(this.nb,!this.Ka&&10<=this.za.length);V(this.ue,j);this.Ka?(this.za=this.za.reverse(),
y.b().d.subscribe("read-message",function(a){if((a=this.Of[a])&&L(a,"unread"))K(a,"unread"),Z.b().c("new-messages",-1)},this)):(Nf(this.g,this.a()),T(T(T(T(T(this.i(),window,"click",q(function(a){!Ke(a.target,k,"comment-input")&&!this.g.n()&&(this.g.ra(l),this.resize(0))},this)),this.ue,"click",q(function(a){a.preventDefault();a.stopPropagation();this.g.ra(j)},this)),this.nb,"click",q(this.Uj,this)),this.g,"add",q(this.$a,this)),window,"resize",ya(I,q(this.resize,this))));Sa(this.za,function(a){Ki(this,
a)},this);y.b().subscribe("new-message",function(a){if(a.D.id!=y.b().d.id&&(a.D.id==this.Ga.id||a.$k.id==this.Ga.id)){if(this.Ka){var c=j,d=this.Of[a.D.id];d&&(c=!L(d,"unread"),ye(d));c&&Z.b().c("new-messages",1)}Ki(this,a,this.Ka);this.resize()}},this);this.resize()};
Ji.prototype.Uj=function(){this.nb&&V(this.nb,l);V(this.u,j);x("/_message/"+this.Ga.id+"?offset="+this.za.length,q(function(a){a=D(a.target);if(a.length){this.oe=k;var b=Q("div","separator");xe(this.Fb,b,3)}V(this.u,l);this.nb&&V(this.nb,!!a.length);Sa(a,function(a){a=new Ei(a);this.za.push(a);Ki(this,a,j);return a},this);a.length&&(this.a().scrollTop=0,this.oe=k,this.a().scrollTop=b.offsetHeight)},this))};
function Ki(a,b,c){V(a.ue,l);a.nb&&V(a.nb,!a.Ka&&10<=a.za.length);var d,e;if(!a.Ka&&a.oe&&a.oe.D.id==b.D.id)d=R(Ii,{message:b}),P("texts",a.Wh).appendChild(d),b.media&&(e=R(vh,{media:b.media}),P("texts",a.Wh).appendChild(e)),d=P("timestamp",d);else{var g=R(Hi,{message:b,uj:b.D.id==y.b().d.id});a.oe=b;a.Wh=g;c?xe(a.Fb,g,3):a.Fb.appendChild(g);d=P("timestamp",g);M(g,"unread",!b.Ma);if(a.Ka){if(a.Of[b.D.id]=g,T(a.i(),g,"click",q(function(){b.Ma||(b.Ie(),K(g,"unread"),Z.b().c("new-messages",-1));Z.b().c("profile",
b.D)},a)),c){var i=O("mp3-1");i.load();i.play()}}else b.media&&(e=R(vh,{media:b.media}),P("texts",g).appendChild(e))}si($b.b(),b.time,d);c||(a.a().scrollTop=a.a().scrollHeight);!a.Ka&&(!b.Ma&&b.id&&Z.b().mf==b.D.id)&&b.Ie();e&&(c=P("list-play",e),d=P("list-plus",e),T(T(T(a.i(),e,"click",q(function(){Z.b().c("media-info",b.media)},a)),c,"click",q(function(a){a.preventDefault();a.stopPropagation();a=Kb(b.media);be.b().c(ce,a)},a)),d,"click",function(a){a.preventDefault();a.stopPropagation();ac().c(Wb,
b.media,j)}))}Ji.prototype.$a=function(a){var b=new Ei({from_user:y.b().d,to_user:dc(y.b(),this.Ga),text:a.text});b.time=new yb;b.pb=Lb(b.time.getTime());Ki(this,b);x("/_message",a.Ug,"POST","from_id="+y.b().d.id+"&to_id="+this.Ga.id+"&text="+a.text)};Ji.prototype.resize=function(a){this.Ka?this.dispatchEvent("resize"):(this.W=a||this.W,wf(this.a(),te().height+(IPHONE&&SAFARI?61:0)-(DESKTOP?40:0)-42-this.W-(Ke(this.a(),k,"tabbed")?30:0)))};function Li(a){this.id=a.id;this.p=dc(y.b(),a.user);this.type=a.type;this.L=a.comment?new oi(a.comment):k;this.Ma=a.read;this.pb=(this.time=a.time?ib(a.time+"Z"):k)?Lb(this.time.getTime()):k}Li.prototype.Ie=function(){x("/_notification",qb(),"POST","id="+this.id+"&read=1");this.Ma=j};function Mi(a){return'<div class="notification"><a href="#user:'+S(a.D.id)+'"><div class="picture" style="background:'+S(a.D.color)+'"><img src="'+S(a.D.K)+'"/></div></a><div class="body"><div class="type"><a class="user" href="#user:'+S(a.D.id)+'">'+S(a.D.name)+"</a> "+("reply"==a.Sf.type?"replied to your comment":"")+("mention"==a.Sf.type?"mentioned you in a comment":"")+'</div><div class="texts"><div class="text">'+S(a.text)+'<div class="timestamp">'+S(a.Sf.pb)+"</div></div></div></div></div>"}
;function Ni(a){X.call(this);this.gc=a;this.ji={};this.ec={};this.W=0}s(Ni,X);
Ni.prototype.q=function(a){Ni.h.q.call(this,a);a.innerHTML="";a.scrollTop=0;this.sd=Q("div","notifications");this.a().appendChild(this.sd);this.u=Q("div","spinner");this.sd.appendChild(this.u);V(this.u,l);this.Rf=Q("div","no-comments","No Notifications");this.sd.appendChild(this.Rf);V(this.Rf,!this.gc.length);v(this.gc,function(a){Oi(this,a)},this);this.dispatchEvent("resize");y.b().subscribe("new-notification",function(a){Oi(this,a,j);Z.b().c("new-messages",1);this.dispatchEvent("resize")},this)};
function Oi(a,b,c){if(b.L){V(a.Rf,l);var d,e=b.L.text.replace(/@\[(\d+):([a-zA-z\s]+)\]/g,function(a,b,c){return c}),e=R(Mi,{Sf:b,text:e,D:b.L.p});c?xe(a.sd,e,2):a.sd.appendChild(e);a.ji[b.id]=e;d=a.ec[b.L.media.id]||[];d.push(b);a.ec[b.L.media.id]=d;d=P("timestamp",e);M(e,"unread",!b.Ma);T(a.i(),e,"click",q(function(){b.Ma||v(this.ec[b.L.media.id]||[],function(a){a.Ie();Z.b().c("new-messages",-1);(a=this.ji[a.id])&&K(a,"unread")},this);Z.b().c("media-info",b.L.media)},a));si($b.b(),b.time,d);c?(a=
O("mp3-4"),a.load(),a.play()):a.a().scrollTop=a.a().scrollHeight}};function Pi(a){return'<div class="user'+(a.media?" media":"")+'"><div class="name">'+S(a.p.name)+'</div><div class="picture" style="background:'+S(a.p.color)+'"><img src="'+S(a.p.K)+'"/></div>'+(a.timestamp?'<div class="timestamp">'+S(a.timestamp)+"</div>":"")+(a.media?'<div class="media"><div class="watched">LAST WATCHED </div><div class="watching">NOW WATCHING </div><a class="media-link">'+S(a.media.name)+"</a></div>":"")+"</div>"};function Qi(a,b){X.call(this);this.Sc=a||k;this.Pe={};this.hc=[];this.Kc=[];this.ob=[];this.qb=!!b;this.W=0}s(Qi,X);
Qi.prototype.q=function(a){Qi.h.q.call(this,a);a.innerHTML="";a.scrollTop=0;J(a,"friendlist");J(a,"ios-scroll");this.qb||(a=Q("div","label show-all",Q("a",{href:"#friendlist:1"},"ALL FRIENDS >")),this.a().appendChild(a));this.ye=Q("div","label online-friends-label",this.qb?"ONLINE FRIENDS":Q("a",{href:"#friendlist:1"},"ONLINE FRIENDS"));V(this.ye,l);this.a().appendChild(this.ye);this.$f=Q("div","online-friends");this.a().appendChild(this.$f);this.Ad=Q("div","label",this.qb?"RECENTLY ONLINE":Q("a",
{href:"#friendlist:1"},"RECENTLY ONLINE"));V(this.Ad,l);this.a().appendChild(this.Ad);this.zd=Q("div","recent-friends");this.a().appendChild(this.zd);this.qb&&(this.ve=Q("div","label","OFFLINE FRIENDS"),V(this.ve,l),this.a().appendChild(this.ve),this.Tf=Q("div","offline-friends"),this.a().appendChild(this.Tf),this.qb&&this.resize(),T(this.i(),window,"resize",q(function(){this.qb&&I(q(function(){this.resize()},this))},this)));if(this.Sc)Qa.sort.call(this.Sc,function(a,b){return a.r&&!b.r?1:!a.r&&b.r?
-1:!a.r&&!b.r?0:a.r.getTime()<b.r.getTime()?1:-1}||eb),v(this.Sc,function(a){Ri(this,a)},this),V(this.a(),j);else{var a=y.b(),b=q(function(a){this.Sc=a;Qa.sort.call(this.Sc,function(a,b){return a.r&&!b.r?1:!a.r&&b.r?-1:!a.r&&!b.r?0:a.r.getTime()<b.r.getTime()?1:-1}||eb);v(this.Sc,function(a){Ri(this,a)},this);V(this.a(),j)},this);a.th?b&&b(a.vf):x("/_friends",q(function(a){a=D(a.target);this.vf=Ua(a,function(a){return dc(this,a)},this);this.th=j;b&&b(this.vf)},a))}y.b().subscribe(bc,this.fl,this)};
function Ri(a,b){if(!a.Pe[b.id]){var c=l,d=b.r?Lb(b.r.getTime()):k,e=R(Pi,{p:b,timestamp:d,media:b.hb});b.r&&432E5>r()-b.r.getTime()&&si($b.b(),b.r,P("timestamp",e));b.Lc?(V(a.ye,j),J(e,"online"),v(a.hc,function(a,d){a.be()>b.be()&&(xe(this.$f,e,d),cb(this.hc,d,0,b),c=j)},a),c||(a.$f.appendChild(e),a.hc.push(b))):d&&(3>a.ob.length||a.qb)?(v(a.ob,function(a,d){a.r&&(b.r&&a.r.getTime()<b.r.getTime())&&(xe(this.zd,e,d),cb(this.ob,d,0,b),c=j)},a),c||(a.zd.appendChild(e),a.ob.push(b)),V(a.Ad,j),V(a.zd,
j)):a.qb&&(!Wa(a.ob,function(a){return b.id==a.id})&&!Wa(a.Kc,function(a){return b.id==a.id}))&&(V(a.ve,j),v(a.Kc,function(a,d){a.r&&(b.r&&a.r.getTime()<b.r.getTime())&&(xe(this.Tf,e,d),cb(this.Kc,d,0,b),c=j)},a),c||(a.Tf.appendChild(e),a.Kc.push(b)));a.qb||(V(a.Ad,!a.hc.length&&a.ob.length),V(a.zd,!a.hc.length&&a.ob.length));a.Pe[b.id]=e;d=P("media-link",e);T(a.i(),e,"click",q(function(){Z.b().c("profile",b)},a));d&&T(a.i(),d,"click",q(function(a){a.stopPropagation();a.preventDefault();Z.b().c("media-info",
b.hb)},a))}}Qi.prototype.fl=function(a){var b=this.Pe[a.id];b&&(ye(b),rb(this.Pe,a.id),$a(this.Kc,function(b){return b.id==a.id})&&V(this.ve,!!this.Kc.length),$a(this.hc,function(b){return b.id==a.id})&&V(this.ye,!!this.hc.length),$a(this.ob,function(b){return b.id==a.id})&&V(this.Ad,!!this.ob.length));Ri(this,a)};Qi.prototype.resize=function(a){this.W=a||this.W;wf(this.a(),te().height+(IPHONE&&SAFARI?61:0)-42-this.W-(Ke(this.a(),k,"tabbed")?30:0))};function Si(a,b){X.call(this);this.Ue=a;this.Rc=b||k;this.S=0;this.Hi=!b;this.$b=l;this.ph={};this.Yc={};this.dc={};this.Cb={};this.Oe={};this.yi={};this.Lg=[]}s(Si,X);
Si.prototype.q=function(a){Si.h.q.call(this,a);a.innerHTML="";a.scrollTop=0;J(a,"stream");J(a,"ios-scroll");this.Hi&&(this.uf=Q("div","friendlist"),V(this.uf,l),this.a().appendChild(this.uf),a=Q("div","label","ACTIVITY"),this.a().appendChild(a));this.Wc=Q("div","activities");this.a().appendChild(this.Wc);this.u=Q("div","spinner");this.a().appendChild(this.u);V(this.u,l);this.Jc=Q("div","no-comments",this.Rc==y.b().d.id?"Your activity will appear here.":"Friends' activity will appear here.");this.a().appendChild(this.Jc);
this.Ue&&this.Ue.length&&Ti(this,this.Ue);this.Hi&&(this.tf=new Qi(h,l),this.tf.j(this.uf));y.b().subscribe("new-activity",function(a){(this.Rc==a.user.id||!this.Rc&&a.user.id!=y.b().d.id)&&Ui(this,a,h,h,j)},this);T(T(this.i(),this.a(),"scroll",q(function(){!this.$b&&this.a().scrollTop+te().height>this.a().scrollHeight-60&&Vi(this)},this)),window,"resize",ya(I,q(this.resize,this)));this.resize()};
function Vi(a){V(a.u,j);x("/_activity"+(a.Rc?"/"+a.Rc:"")+"?offset="+a.S,q(function(a){this.ph[String(a.target.pd)]||(this.ph[String(a.target.pd)]=j,a=D(a.target).activities,this.$b=!a.length,M(this.u,"finished",this.$b),V(this.u,this.$b),Ti(this,a))},a))}
function Ti(a,b){a.Yc=[];a.dc=[];a.Cb=[];v(b,function(a){this.S++;switch(a.type){case "session":var a=a.session,b=a.channel_id in this.Yc?this.Yc[a.channel_id]:[];b.push(a);this.Yc[a.channel_id]=b;break;case "liked":this.dc[a.media.id]||(b=a.media.id in this.Cb?this.Cb[a.media.id]:[],b.push(a),this.Cb[a.media.id]=b,b=a.user.id in this.Oe?this.Oe[a.user.id]:[],b.push(a),this.Oe[a.user.id]=b);break;case "comment":a=a.comment,b=a.media.id in this.dc?this.dc[a.media.id]:[],b.push(a),this.dc[a.media.id]=
b,this.Cb[a.media.id]&&rb(this.Cb,a.media.id)}},a);Oc(a.Yc,function(a){Ui(this,h,a,"session")},a);Oc(a.dc,function(a){Ui(this,h,a,"comment")},a);Oc(a.Cb,function(a){1<a.length&&Ui(this,h,a,"liked")},a);Oc(a.Oe,function(a){Ui(this,h,a,"liked")},a)}
function Ui(a,b,c,d,e){V(a.Jc,l);var b=b||k,c=c||k,g=b?b.type:d,i=[],n=b?[dc(y.b(),b.user)]:[],t=b?ib(b.time+"Z"):k;c&&v(c,function(a){Wa(n,function(b){return b.id==a.user.id})||n.push(dc(y.b(),a.user));var b=ib((a.time||a.tune_in)+"Z");t=t&&t.getTime()>b.getTime()?t:b;"session"==g?v(a.media,function(a){!this.dc[a.id]&&(!this.Cb[a.id]&&!Wa(i,function(b){return b.id==a.id}))&&i.push(a)},this):"liked"==g&&!this.yi[a.media.id]&&(i.push(a.media),this.yi[a.media.id]=j)},a);switch(g){case "session":if(!a.Rc&&
2>n.length)return;var d=b?b.session:c[0],z=C.b().get(d.channel_id),i=b?b.session.media:i;3<i.length&&(i=i.slice(0,3));b=R(hh,{C:n,N:z,time:Lb(t.getTime()),Ui:!!d.tune_out});break;case "comment":i=b?[b.comment.media]:[tb(sb.b(),c[0].media)];b=Ua(b?[b.comment]:c,function(a){a=new oi(a);a.text=Ph(a.text);a.text=a.text.replace(/@\[(\d+):([a-zA-z\s]+)\]/g,function(a,b,c){return'<a href="#user:'+b+'">'+c+"</a>"});return a});b=R(ih,{Sa:b.reverse().slice(0,3),C:n,media:i[0]});break;case "liked":i=b?[b.media]:
i;b=R(jh,{C:n,ci:i.length,time:Lb(t.getTime())});break;default:return}if(i.length){si($b.b(),t,P("timestamp",b));d=Xa(a.Lg,function(a){return a.time<t.getTime()});cb(a.Lg,d,0,{time:t,element:b});var A=P("medias",b);v(i,function(a){var b=tb(sb.b(),a),a=R(vh,{media:b}),c=P("list-play",a),d=P("list-plus",a);P("thumb",a);A.appendChild(a);T(T(T(this.i(),a,"click",function(){Z.b().c("media-info",b)}),c,"click",function(a){a.preventDefault();a.stopPropagation();a=Kb(b);be.b().c(ce,a)}),d,"click",function(a){a.preventDefault();
a.stopPropagation();ac().c(Wb,b,j)})},a);e?xe(a.Wc,b,0):c?xe(a.Wc,b,d):a.Wc.appendChild(b);I(ya(J,b,"show"))}}Si.prototype.resize=function(){var a=te().height+(IPHONE&&SAFARI?61:0)-40-(Ke(this.a(),k,"tabbed")?40:10);wf(this.a(),a);U(this.Wc).height<a&&Vi(this)};function Wi(a){X.call(this);this.Ga=this.M=a;this.se=a.id==y.b().d.id;this.X=[this.se?"inbox":"messages","activity","starred"]}s(Wi,X);m=Wi.prototype;m.q=function(a){Wi.h.q.call(this,a);J(a,"profile");J(a,"ios-scroll");Pe(a,th,{Qf:this.se})};
m.z=function(){this.Fa=P("tabs",this.a());this.se&&(x("/_notification",q(function(a){var a=D(a.target),a=Ta(a,function(a){return!!a}),b=0,a=Ua(a,function(a){a=new Li(a);b+=!a.Ma?1:0;return a},this);Z.b().c("new-messages",b);this.gc=new Ni(a);T(this.i(),this.gc,"resize",ya(I,q(this.De,this)));this.gc.j(P("notifications-content",this.a()))},this)),this.Xl=P("inbox-content",this.a()),T(this.i(),window,"resize",ya(I,q(this.De,this))));x("/_message/"+this.Ga.id,q(function(a){var a=D(a.target),b=0,a=Ua(a,
function(a){a=new Ei(a);b+=!a.Ma?1:0;return a},this);this.se&&Z.b().c("new-messages",b);this.za=new Ji(this.Ga,a);T(this.i(),this.za,"resize",ya(I,q(this.De,this)));this.za.j(P("messages-content",this.a()))},this));x("/_star/"+this.Ga.id,q(function(a){var a=D(a.target),a=Ua(a,function(a){return new hb(a)}),b=y.b().d;b.Ki=a;b.c("set-starred");this.pc=new Fi(a);this.pc.j(P("starred-content",this.a()))},this));x("/_activity/"+this.Ga.id,q(function(a){a=D(a.target).activities;this.xg=new Si(a,this.Ga.id);
this.xg.j(P("activity-content",this.a()))},this));T(this.i(),this.Fa,"click",q(function(a){a=Ke(a.target,"li");this.Gb(a)},this));sb.b().subscribe("star",function(a,b){if(b)this.pc.We(a);else{var c=this.pc,d=c.Nf[a.id];d&&(Da(d),rb(c.Nf,a.id))}},this);T(this.i(),window,"resize",ya(I,q(this.Ai,this)));this.Ai()};m.Gb=function(a){v(this.X,function(b){M(this.Fa.parentElement,b,L(a,b));this.v=L(a,b)?b:this.v},this)};
m.Ai=function(){var a=te().height+(IPHONE&&SAFARI?61:0)-41-(Ke(this.a(),k,"tabbed")?30:0);wf(this.a(),a);this.De()};m.De=function(){var a=U(this.a()).height-80;this.gc&&wf(this.gc.a(),Math.floor(a/2));this.za&&wf(this.za.a(),Math.ceil(a/2))};function Xi(){X.call(this);this.bc=Pb();this.gj=new ii;this.X={};this.Jb=[];this.Nc=[];this.lb=this.Vc=0}s(Xi,X);m=Xi.prototype;
m.z=function(){Xi.h.z.call(this);this.Xc=P("arrow",this.Lb);this.jf=O("sidebar-content");this.ai=O("media-list");this.Be=O("profile");this.sh=O("friendlist");this.eh=O("conversation");this.Lb=O("toolbar");this.Fa=P("tabs",this.a());this.Te=P("activities-count",this.a());this.Df=P("inbox-count",this.a());var a=new ag(document);v(ze(this.Fa),function(a){var b=je(a)[0];this.X[b]=a;this.Jb.push(b)},this);y.b().d.Z?(Yi(this),this.pc=new Wi(y.b().d),this.pc.j(O("my-profile"))):(V(this.X.stream,l),V(this.X.profile,
l),V(this.X.login,j));this.Yf();this.T&&(DESKTOP||!y.b().d.Z||C.b().P.V&&C.b().P.ga())?(this.G=O("info"),this.v="info",Zi(this,"info","info")):(this.G=O("stream"),this.v="stream",Zi(this,"info","stream"));var b="left";v(this.Jb,function(a){var c=P(a,this.jf);a==this.v?b="right":J(c,b)},this);this.Nc=[this.G,""];J(this.G,"current");if(this.bc){this.gj.j(O("admin"));var c=R(lh,{name:"ADMIN",className:"admin"});this.Fa.appendChild(c);this.X.admin=c;this.Jb.push("admin")}$i(this);T(T(T(T(this.i(),P("back-button",
this.Lb),"click",q(function(a){var b=this.Nc.shift();this.navigate(b[0],j,b[1]);$i(this);a.stopPropagation()},this)),this.Fa,"click",q(function(a){var b=this.v,c=Ke(a.target,"li"),i=je(c)[0];"login"==i?this.T&&this.T.login():(Zi(this,this.v,i),J(c,"selected"),$i(this),b!=this.v&&a.stopPropagation(),"stream"==i&&this.ii(0,j))},this)),this.Lb,"click",q(function(a){((a=Ke(a.target,"li"))&&je(a)[0]==this.v||!a)&&(new Hf(this.G,[this.G.scrollLeft,this.G.scrollTop],[this.G.scrollLeft,0],300)).play()},this)),
a,"key",q(function(a){a.ctrlKey&&"68"==a.keyCode&&ke(this.a(),"dark")},this));DESKTOP&&gi.b().subscribe(aj,function(a){M(this.a(),"toggled",a);I(q(function(){M(this.a(),"collapsed",!a)},this),!a?500:0)},this);Z.b().subscribe("navigate",this.navigate,this);Z.b().subscribe("new-activites",this.ii,this);Z.b().subscribe("new-messages",this.ak,this);Z.b().subscribe("conversation",this.Ik,this);Z.b().subscribe("media-list",this.Mk,this);Z.b().subscribe("media-info",this.Ii,this);Z.b().subscribe("friend-list",
this.Lk,this);Z.b().subscribe("profile",this.Ok,this);C.b().subscribe("next-program",this.Yf,this);be.b().subscribe(ce,this.Yf,this);C.b().subscribe($d,this.dk,this);y.b().subscribe("logged-in",function(){V(this.X.stream,j);V(this.X.profile,j);V(this.X.login,l);Yi(this);this.pc=new Wi(y.b().d);this.pc.j(O("my-profile"));$i(this)},this);DESKTOP&&gi.b().subscribe(bj,function(a){M(this.a(),"admin",a);a?(gi.b().c(aj,j),Zi(this,this.v,"admin")):"admin"==this.v&&Zi(this,"admin","info")},this)};
function Yi(a){x("/_activity",q(function(a){a=D(a.target);this.xg=new Si(a.activities);this.xg.j(O("stream"));Z.b().c("new-activites",parseInt(a.new_count,10))},a))}m.ii=function(a,b){b&&(this.Vc=0,V(this.Te,l));this.Vc+=a;De(this.Te,this.Vc.toString());V(this.Te,!!this.Vc)};m.ak=function(a,b){b&&(this.lb=0,V(this.Df,l));this.lb+=a;this.lb=Math.max(this.lb,0);De(this.Df,this.lb.toString());document.title=0<this.lb?"("+this.lb.toString()+") XYLO":"XYLO";V(this.Df,!!this.lb)};
m.Yf=function(a){if(a=a||C.b().P.ga())if(this.Ub=a.media,!this.T||this.Ub.id!=this.T.M.id){var a=this.T&&this.T.g.n()?this.T.g.n():k,b=this.T?this.T.f:k;Da(this.T);this.T=new vi(this.Ub,l,b,a);this.T.j(O("info"))}};m.dk=function(a){a=a||C.b().P;if((this.Ub=a.ga()&&a.ga().media)&&(!this.T||this.Ub.id!=this.T.M.id))Da(this.T),this.T=new vi(this.Ub),this.T.j(O("info")),this.Ii(this.Ub)};
function Zi(a,b,c){var d=P(c,a.jf),e=Ra(a.Jb,b),b=Ra(a.Jb,c),g=(e=e<b)?0:a.Jb.length-1,i=e?g<a.Jb.length:0<=g;for(g;i;g+=e?1:-1){var n=P(a.Jb[g],a.jf);if(e&&g>b||!e&&g<b)J(n,"right"),K(n,"left");else if(e&&g<b||!e&&g>b)M(n,"left",e),J(n,"right");else if(g==b){K(n,"right");K(n,"left");break}}a.v=c;cb(a.Nc,0,0,[a.G,""]);K(a.G,"current");a.G=d;J(a.G,"current");$i(a)}
m.navigate=function(a,b,c){if(a==this.G)c&&De(P("back-title",this.Lb),c);else{var d=L(this.G,"screen");b?(K(this.G,"on"),K(this.G,"current"),J(a,"current"),this.G=a):(M(this.G,"on",!d),b=[this.G,He(P("back-title",this.Lb))],cb(this.Nc,0,0,b),K(this.G,"current"),this.G=a,J(this.G,"current"));M(this.Lb,"back",L(this.G,"slide"));c&&De(P("back-title",this.Lb),c);this.G!=this.Be&&(Z.b().mf=k)}};m.Ik=function(a,b,c,d){(new ui(a,b,c,d)).j(this.eh);Z.b().c("navigate",this.eh,l,a.name)};
m.Mk=function(a,b,c,d,e,g,i){(new Fi(b,c,d,e,g,i)).j(this.ai);Z.b().c("navigate",this.ai,l,a,d,e)};m.Lk=function(){this.tf=new Qi(h,j);this.tf.j(this.sh);Z.b().c("navigate",this.sh,l,"Friends")};m.Ii=function(a,b,c,d){if(this.T&&a.id==this.T.M.id){K(this.Lb,"back");for(a=this.Nc[0][0];a&&L(a,"slide");)a=this.Nc.shift();Zi(this,this.v,"info")}else{var e=O("media-info");(new vi(a,b,c,d)).j(e);Z.b().c("navigate",e,l,a.name)}DESKTOP&&gi.b().c(aj,j)};
m.Ok=function(a){if(!this.hg||!(this.hg.M.id==a.id&&this.G==this.Be))Z.b().mf=a.id,this.hg=new Wi(a),this.hg.j(this.Be),Z.b().c("navigate",this.Be,l,a.name),DESKTOP&&gi.b().c(aj,j)};
function $i(a){var b=Math.round(U(a.X[a.v]).width/2+(new le(a.X[a.v].offsetLeft,a.X[a.v].offsetTop)).x);a.Xc.style.transform="translate3d("+b+"px, 0,0)";a.Xc.style.msTransform="translate3d("+b+"px, 0,0)";a.Xc.style.WebkitTransform="translate3d("+b+"px, 0,0)";a.Xc.style.MozTransform="translate3d("+b+"px, 0,0)";a.Xc.style.ol="translate3d("+b+"px, 0,0)"};function cj(a){return'<div class="main"><div id="stage" class="stage"><div id="ytplayer"></div><div id="stagecover"><div class="message"><span></span><div class="spinner" style="display:none"></div></div><div class="fullscreen"></div><div class="expand"></div><div class="play" style="display: none"><div></div></div><div class="pause" style="display: none"><div></div></div></div><div id="logo"></div></div><div id="sidebar" class="toggled"><div id="toolbar"><div class="back"><div class="back-button"><div>BACK</div></div><div class="back-title"></div></div><ul class="tabs"><li class="info tab selected"><div class="label">NOW</div></li><li class="stream tab"><div class="label">STREAM<div class="activities-count" style="display:none"></div></div></li><li class="profile tab"><div class="label">HOME<div class="inbox-count" style="display:none"></div></div></li></ul><div class="radial-grad"></div><div class="arrow"></div></div><div id="sidebar-content"><div id="info" class="screen info"><div class="no-info">Pick a channel or play a story.</div></div><div id="stream" class="screen stream"><div class="loading loading-activity"><div class="loading-spinner"></div></div></div><div id="my-profile" class="screen profile"></div><div id="admin" class="screen admin"></div><div id="media-list" class="slide media-list"></div><div id="friendlist" class="slide friendlist"></div><div id="conversation" class="slide"></div>'+
(a.fj?'<div id="admin-col-list" class="slide admin"></div><div id="admin-list" class="slide admin-list"></div>':"")+'<div id="media-info" class="slide info"></div><div id="profile" class="slide profile"></div></div></div><div id="notify" class="notify"></div><div id="welcome" class="welcome" style="display:none"><div class="thanks"></div><div class="guide"></div><div class="friends"></div><div class="sidebar"></div><div class="close"></div></div></div>'};function Tb(){}na(Tb);_gaq=[];Tb.prototype.init=function(){_gaq.push(["_setAccount","UA-38058655-1"]);_gaq.push(["_trackPageview"]);var a=document.createElement("script");a.type="text/javascript";a.async=j;a.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)};Tb.prototype.login=function(){_gaq.push(["_trackEvent","Users","Login",y.b().d.id])};
Tb.prototype.ef=function(a,b){a.V||(_gaq.push(["_trackEvent","Channel","OptOut",b.id]),_gaq.push(["_trackEvent","Channel","OptIn",a.id]))};Tb.prototype.L=function(a,b,c){_gaq.push(["_trackEvent","Media","Comment",a.id]);_gaq.push(["_trackEvent","Users","Comment",y.b().d.id]);b&&_gaq.push(["_trackEvent","Facebook","Comment",y.b().d.id]);c&&_gaq.push(["_trackEvent","Twitter","Comment",y.b().d.id])};
function Di(a,b,c,d){_gaq.push(["_trackEvent","Media","Share",b.id]);_gaq.push(["_trackEvent","Users","Share",y.b().d.id]);c&&_gaq.push(["_trackEvent","Facebook","Share",y.b().d.id]);d&&_gaq.push(["_trackEvent","Twitter","Share",y.b().d.id]);x("/_share",qb(),"POST","facebook="+c+"&twitter="+d)}ia("_gaq",_gaq);function gi(){w.call(this);this.tk=j;var a=O("controller");this.Ji=!a||L(a,"sidebar-toggled");this.xh=a&&L(a,"guide-toggled");a=O("guide");this.pm=!!a&&L(a,"timeless");this.subscribe(aj,ca("Ji"),this);this.subscribe(dj,ca("xh"),this);this.subscribe(mi,ca("tk"),this)}s(gi,w);na(gi);function hi(a,b){var c=O("toggle-pending");De(c,b);V(c,!!b)}var mi="play",dj="toggle-guide",aj="toggle-sidebar",bj="toggle-admin";function ej(){w.call(this);this.Zh=l}s(ej,w);na(ej);ej.prototype.init=function(a){this.qm=a;a=(new appengine.Channel(unescape(a))).open();a.onmessage=q(this.ik,this);a.onclose=q(this.ki,this);H(window,"onbeforeunload",q(this.ki,this));return this};
ej.prototype.ik=function(a){var b=Gd(a.data);switch(b.type){case "viewer_change":var c=dc(y.b(),b.user),d=b.time&&ib(b.time+"Z");c.nf&&d&&c.nf.end(d);(a=b.last_channel_id&&C.b().get(b.last_channel_id))&&a.c("remove-viewer",c);c.hb&&c.hb.c(ob,c,a,j);var e=b.channel_id&&C.b().get(b.channel_id),a=b.media&&tb(sb.b(),b.media);e&&(d=d||new yb,d=new Sb(b.session_id,c,e,d),c.nf=d,e.c(Xb,d));a&&a.c(ob,c,e,b.online!=j);y.b().c(bc,c,b.online);break;case "notification":a=new Li(b.notification);y.b().c("new-notification",
a);break;case "new_comment":c=new oi(b.comment);if(c.p.id!=y.b().d.id&&(d=b.tweet?new pi(b.tweet):k,a=tb(sb.b(),b.comment.media)))a.c(kb,c),d&&a.c("add-tweet",d);break;case "new_message":a=new Ei(b.message);y.b().c("new-message",a);Z.b().mf!=a.D.id&&fb.b().c("flash","messaged you",a.text,a.D,a.D.K,"#user:"+a.D.id);break;case "new_activity":y.b().c("new-activity",b.activity);b.activity.user.id!=y.b().d.id&&"session"!=b.activity.type&&Z.b().c("new-activites",1);break;case "update_programs":a=b.programs;
e=C.b().get(b.channel_id);v(a,function(a){e.c(Yb,a)},this);break;case "new_programs":b.channel&&(e=C.b().Ve(b.channel));v(b.programs,q(function(a){a=new Jb(a);if(e=e||C.b().get(b.channel_id))e.c(Vb,a),C.b().P&&C.b().P.ga(),be.b().ga()||(C.b().c($d,e),C.b().c("next-program",a))},this));break;case "twitter_auth":y.b().d.c(Ob)}};
ej.prototype.ki=function(){if(!this.Zh){var a=C.b().P.V&&C.b().P.hb&&Math.floor(be.b().getCurrentTime());DESKTOP&&x("/_settings",qb(),"POST","show_guide="+gi.b().xh+"&show_sidebar="+gi.b().Ji+(a?"&current_seek="+a:""));this.Zh=j}};function $b(){w.call(this);this.Xg=new gd(1E3);this.Ri=new gd(3E4);this.Si=[];this.rf=[]}s($b,w);na($b);$b.prototype.init=function(){this.Xg.start();this.Ri.start();H(this.Xg,id,q(function(){v(this.rf,function(a,b){a.time<r()&&(a.callback(),Qa.splice.call(this.rf,b,1))},this)},this));H(this.Ri,id,q(function(){v(this.Si,function(a){De(a.element,Lb(a.time.getTime()))},this)},this))};function si(a,b,c){86400>(r()-b.getTime())/1E3&&a.Si.push({time:b,element:c})}
function Zb(a,b,c){86400>(r()-b)/1E3&&a.rf.push({time:b,callback:c})};function fj(){w.call(this);this.em=[]}s(fj,w);na(fj);fj.prototype.Lf=function(a){Oc(a,q(function(a,c){v(a,q(function(a){a=new Jb(a);C.b().sc[c]&&C.b().sc[c].Xe(a)},this))},this))};var gj=l;function hj(a){a.match(/[\d]+/g).length=3}
if(navigator.plugins&&navigator.plugins.length){var ij=navigator.plugins["Shockwave Flash"];ij&&(gj=j,ij.description&&hj(ij.description));navigator.plugins["Shockwave Flash 2.0"]&&(gj=j)}else if(navigator.mimeTypes&&navigator.mimeTypes.length){var jj=navigator.mimeTypes["application/x-shockwave-flash"];(gj=jj&&jj.enabledPlugin)&&hj(jj.enabledPlugin.description)}else try{var kj=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7"),gj=j;hj(kj.GetVariable("$version"))}catch(lj){try{kj=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6"),
gj=j}catch(mj){try{kj=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),gj=j,hj(kj.GetVariable("$version"))}catch(nj){}}};function oj(a,b,c,d,e,g,i,n){this.Od=a;this.hj=b;this.wc=c;this.Nb=d;this.am=e;this.Vl=g;this.xm=i;this.kb=n;this.Xk=[];this.df=[];this.Kl=[];this.km=[]}oj.prototype.uh=da("hj");oj.prototype.Gi=function(a){this.Nb=a;return this};oj.prototype.Ei=function(a){this.ic=a;return this};function pj(a){this.Od=a;this.Rk=k}function qj(a){this.Od=a;this.Rk=this.tm=k};function bh(a,b,c){oj.call(this,"http://www.youtube.com/watch?v="+encodeURIComponent(String(a)),b,c,"application/x-shockwave-flash");this.Zi=a;this.Xk=[new pj("http://i.ytimg.com/vi/"+a+"/default.jpg")];this.Ei(new qj("http://www.youtube.com/v/"+encodeURIComponent(String(a))+"&hl=en&fs=1&autoplay=1"))}s(bh,oj);
var ah=RegExp("http://(?:[a-zA-Z]{2,3}\\.)?(?:youtube\\.com/watch)(?:\\?(?:[\\w=-]+&(?:amp;)?)*v=([\\w-]+)(?:&(?:amp;)?[\\w=-]+)*)?(?:#[!]?(?:(?:(?:[\\w=-]+&(?:amp;)?)*(?:v=([\\w-]+))(?:&(?:amp;)?[\\w=-]+)*)|(?:[\\w=&-]+)))?[^\\w-]?","i");function rj(){X.call(this);this.Qk=new Xi}s(rj,X);rj.prototype.q=function(a){rj.h.q.call(this,a);var b=R(cj,{fj:Pb()});xe(a,b,0)};
rj.prototype.z=function(){rj.h.z.call(this);SAFARI||(document.body.style.height=te().height+"px");this.Qk.j(O("sidebar"));y.b().d.aj||y.b();T(this.i(),document.body,"touchmove",function(a){Ke(a.target,"div","ios-scroll")||a.preventDefault()});T(this.i(),window,"click",function(a){var b=Ke(a.target,"a");if(b=b?b.href:k)if((b=b.match("#(.*):(.*)"))&&b.length)switch(a.preventDefault(),a.stopPropagation(),b[1]){case "user":a=y.b().get(b[2]);Z.b().c("profile",a);break;case "channel":a=C.b().get(b[2]);
C.b().c($d,a);break;case "info":a=sb.b().get(b[2]);Z.b().c("media-info",a);break;case "friendlist":Z.b().c("friend-list")}});x("/_presence",q(function(a){a=D(a.target);this.Fl=ej.b().init(a.token);var b=C.b();v(a.viewer_sessions,q(function(a){var b=dc(y.b(),a.user),e=y.b();Wa(e.xe,function(a){return a.id==b.id})||e.xe.push(b);var e=this.sc[a.channel_id],g=a.media[0]?tb(sb.b(),a.media[0]):k,i=ib(a.tune_in+"Z"),n=a.tune_out?ib(a.tune_out+"Z"):k,a=new Sb(a.id,b,e,i,n);b.nf=a;if(e){e.Hg.push(a);e.c(Xb,
a);var t=e.ga()}else g&&(t=Kb(g));b.id!=y.b().d.id&&(t&&t.media.c(ob,b,e),y.b().c(bc,b,j))},b))},this))};
function sj(a){var b=O("login"),c=O("static-content"),d=O("pages"),e=L(b,"app");M(b,"expanded",a);O("uvTab")&&M(O("uvTab"),"show",e&&a);a?(e?c.style.bottom=-U(d).height-80+"px":c.style.top=Math.max(10,te().height-280)+"px",a=e?Math.min(te().height-100,c.scrollHeight+80):Math.min(te().height-435,c.scrollHeight+190),!e||e&&!b.scrollTop?(e=new Hf(b,[b.scrollLeft,b.scrollTop],[b.scrollLeft,a],300),J(b,"scrolling"),e.play(),H(e,"end",function(){K(b,"scrolling")})):b.scrollTop=a):(c.style.top="",c.style.height=
"",e?I(function(){K(b,"show")},200):c.className="")}function tj(a,b){var c=O("fb-login");if(a){var d=P("power",c);J(d,a)}b&&(d=P("waitlist",c),De(d,b));K(c,"spin");J(c,"disabled");V(c,j);J(c,"show");J(c,"waitlist")}
ia("brkn.Mobile.staticInit",function(){var a=O("fb-login"),b=O("homepage"),c=O("login"),d=O("static-content"),e=O("pages"),g=O("footer"),i=l;J(b,"hide");var n=Q("img");n.src="/static/img/homepage.jpg";H(n,"load",function(){K(b,"hide");J(b,"show")});I(function(){V(a,j);I(ya(J,a,"show"),400)},100);H(c,"click",function(a){"static-scrollable"==a.target.id&&(a=L(c,"app"),i=l,a?sj(i):(a=new Hf(c,[c.scrollLeft,c.scrollTop],[c.scrollLeft,0],300),a.play(),H(a,"end",ya(sj,i))))});H(c,"scroll",function(){!L(c,
"scrolling")&&1>c.scrollTop&&(i=l,sj(i))});H(g,"click",function(a){var a=Ke(a.target,k,"section"),b=L(c,"app");a&&(i=j,d.className=a.id,d.style.height=U(e).height+(b?80:220)+"px",sj(i))});H(window,"resize",ya(sj,i));Tb.b().init();IPHONE&&(J(document.body,"iphone"),J(document.body,"login"),window.onload=function(){I(function(){window.scrollTo(0,1)},1E3)})});
ia("brkn.Mobile.auth",function(){FB.getLoginStatus(function(a){if("connected"===a.status){var a=O("fb-login"),b=O("static-content"),c=O("login");J(a,"disabled");J(a,"spin");x("/_session",function(a){if(200==Yd(a.target)){var e=D(a.target);if(e.error)De(O("error"),e.error),tj("error","Yikes...");else if(e.message)De(O("message"),e.message);else{K(document.body,"login");var a=e.channels,g=e.programs,e=e.current_user;Qc(e)||cc(y.b(),e);C.b().Lf(a);fj.b().Lf(g);a=C.b();a.P=a.sc[e.current_channel]||a.Zc[0];
if(a.P&&a.P.ga()&&!a.P.ga().ended)g=a.P;else if(a.me&&a.me.ga())g=a.me;else for(var e=g=k,i=0;!e&&i<a.Zc.length;)e=(g=!a.Zc[i].V?a.Zc[i]:k)&&g.ga(),i++;a.P=g||a.P;$b.b().init();(new rj).j(document.body);Tb.b().login();I(function(){I(function(){J(c,"hide");I(function(){V(O("homepage"),l);J(c,"app");J(b,"faq")},600)},600)})}}else 500==Yd(a.target)?tj("error","Oops, check back later"):tj("wait")},"POST")}else H(O("fb-login"),"click",function(){window.location.href="https://m.facebook.com/dialog/oauth?client_id="+
FB_APP_ID+"&response_type=code&redirect_uri="+HOST_URL+"&scope=email";return l})})});