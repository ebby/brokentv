function f(a){throw a;}var i=void 0,j=!0,k=null,l=!1;function aa(){return function(){}}function ba(a){return function(b){this[a]=b}}function ca(a){return function(){return this[a]}}function da(a){return function(){return a}}var m,ea=ea||{},n=this;function fa(a,b){var c=a.split("."),d=n;!(c[0]in d)&&d.execScript&&d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&ga(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}
function ha(a){for(var a=a.split("."),b=n,c;c=a.shift();)if(b[c]!=k)b=b[c];else return k;return b}function ia(){}function ja(a){a.a=function(){return a.Hg?a.Hg:a.Hg=new a}}
function ka(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function ga(a){return a!==i}function la(a){return"array"==ka(a)}function ma(a){var b=ka(a);return"array"==b||"object"==b&&"number"==typeof a.length}function p(a){return"string"==typeof a}function na(a){return"number"==typeof a}function oa(a){return"function"==ka(a)}function pa(a){var b=typeof a;return"object"==b&&a!=k||"function"==b}function qa(a){return a[ra]||(a[ra]=++sa)}
var ra="closure_uid_"+Math.floor(2147483648*Math.random()).toString(36),sa=0;function ta(a,b,c){return a.call.apply(a.bind,arguments)}function ua(a,b,c){a||f(Error());if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}
function r(a,b,c){r=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ta:ua;return r.apply(k,arguments)}function va(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=Array.prototype.slice.call(arguments);b.unshift.apply(b,c);return a.apply(this,b)}}var s=Date.now||function(){return+new Date};function wa(a,b){var c=b||{},d;for(d in c)var e=(""+c[d]).replace(/\$/g,"$$$$"),a=a.replace(RegExp("\\{\\$"+d+"\\}","gi"),e);return a}
function t(a,b){function c(){}c.prototype=b.prototype;a.e=b.prototype;a.prototype=new c;a.prototype.constructor=a};function xa(a,b){for(var c=1;c<arguments.length;c++)var d=String(arguments[c]).replace(/\$/g,"$$$$"),a=a.replace(/\%s/,d);return a}function ya(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")}function za(a){if(!Aa.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(Ba,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(Ca,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(Da,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(Ea,"&quot;"));return a}var Ba=/&/g,Ca=/</g,Da=/>/g,Ea=/\"/g,Aa=/[&<>\"]/;
function Fa(a){var a=ga(i)?a.toFixed(i):String(a),b=a.indexOf(".");-1==b&&(b=a.length);b=Math.max(0,2-b);return Array(b+1).join("0")+a}function Ga(a){return String(a).replace(/\-([a-z])/g,function(a,c){return c.toUpperCase()})};var Ha=Array.prototype,Ja=Ha.indexOf?function(a,b,c){return Ha.indexOf.call(a,b,c)}:function(a,b,c){c=c==k?0:0>c?Math.max(0,a.length+c):c;if(p(a))return!p(b)||1!=b.length?-1:a.indexOf(b,c);for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},v=Ha.forEach?function(a,b,c){Ha.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=p(a)?a.split(""):a,g=0;g<d;g++)g in e&&b.call(c,e[g],g,a)};function Ka(a,b,c){for(var d=p(a)?a.split(""):a,e=a.length-1;0<=e;--e)e in d&&b.call(c,d[e],e,a)}
var La=Ha.filter?function(a,b,c){return Ha.filter.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=[],g=0,h=p(a)?a.split(""):a,q=0;q<d;q++)if(q in h){var u=h[q];b.call(c,u,q,a)&&(e[g++]=u)}return e},Ma=Ha.map?function(a,b,c){return Ha.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),g=p(a)?a.split(""):a,h=0;h<d;h++)h in g&&(e[h]=b.call(c,g[h],h,a));return e},Na=Ha.every?function(a,b,c){return Ha.every.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=p(a)?a.split(""):a,g=0;g<d;g++)if(g in
e&&!b.call(c,e[g],g,a))return l;return j};function Oa(a,b){var c=Pa(a,b,i);return 0>c?k:p(a)?a.charAt(c):a[c]}function Pa(a,b,c){for(var d=a.length,e=p(a)?a.split(""):a,g=0;g<d;g++)if(g in e&&b.call(c,e[g],g,a))return g;return-1}function Qa(a,b){return 0<=Ja(a,b)}function Ra(a,b){var c=Ja(a,b);0<=c&&Ha.splice.call(a,c,1)}function Sa(a,b,c){b=Pa(a,b,c);return 0<=b?(Ha.splice.call(a,b,1),j):l}function Ta(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]}
function Ua(a,b){for(var c=1;c<arguments.length;c++){var d=arguments[c],e;if(la(d)||(e=ma(d))&&d.hasOwnProperty("callee"))a.push.apply(a,d);else if(e)for(var g=a.length,h=d.length,q=0;q<h;q++)a[g+q]=d[q];else a.push(d)}}function Va(a,b,c,d){Ha.splice.apply(a,Wa(arguments,1))}function Wa(a,b,c){return 2>=arguments.length?Ha.slice.call(a,b):Ha.slice.call(a,b,c)};var Xa,Ya,Za,$a;function ab(){return n.navigator?n.navigator.userAgent:k}$a=Za=Ya=Xa=l;var bb;if(bb=ab()){var cb=n.navigator;Xa=0==bb.indexOf("Opera");Ya=!Xa&&-1!=bb.indexOf("MSIE");Za=!Xa&&-1!=bb.indexOf("WebKit");$a=!Xa&&!Za&&"Gecko"==cb.product}var db=Xa,w=Ya,eb=$a,fb=Za,gb=n.navigator,hb=-1!=(gb&&gb.platform||"").indexOf("Mac"),ib;
a:{var jb="",kb;if(db&&n.opera)var lb=n.opera.version,jb="function"==typeof lb?lb():lb;else if(eb?kb=/rv\:([^\);]+)(\)|;)/:w?kb=/MSIE\s+([^\);]+)(\)|;)/:fb&&(kb=/WebKit\/(\S+)/),kb)var nb=kb.exec(ab()),jb=nb?nb[1]:"";if(w){var ob,pb=n.document;ob=pb?pb.documentMode:i;if(ob>parseFloat(jb)){ib=String(ob);break a}}ib=jb}var qb={};
function rb(a){var b;if(!(b=qb[a])){b=0;for(var c=ya(String(ib)).split("."),d=ya(String(a)).split("."),e=Math.max(c.length,d.length),g=0;0==b&&g<e;g++){var h=c[g]||"",q=d[g]||"",u=RegExp("(\\d*)(\\D*)","g"),B=RegExp("(\\d*)(\\D*)","g");do{var I=u.exec(h)||["","",""],P=B.exec(q)||["","",""];if(0==I[0].length&&0==P[0].length)break;b=((0==I[1].length?0:parseInt(I[1],10))<(0==P[1].length?0:parseInt(P[1],10))?-1:(0==I[1].length?0:parseInt(I[1],10))>(0==P[1].length?0:parseInt(P[1],10))?1:0)||((0==I[2].length)<
(0==P[2].length)?-1:(0==I[2].length)>(0==P[2].length)?1:0)||(I[2]<P[2]?-1:I[2]>P[2]?1:0)}while(0==b)}b=qb[a]=0<=b}return b}var sb={};function tb(a){return sb[a]||(sb[a]=w&&!!document.documentMode&&document.documentMode>=a)};var ub,vb=!w||tb(9),wb=!eb&&!w||w&&tb(9)||eb&&rb("1.9.1"),xb=w&&!rb("9"),yb=w||db||fb;function zb(a){a=a.className;return p(a)&&a.match(/\S+/g)||[]}function x(a,b){for(var c=zb(a),d=Wa(arguments,1),e=c.length+d.length,g=c,h=0;h<d.length;h++)Qa(g,d[h])||g.push(d[h]);a.className=c.join(" ");return c.length==e}function y(a,b){var c=zb(a),d=Wa(arguments,1),e,g=d;e=La(c,function(a){return!Qa(g,a)});a.className=e.join(" ");return e.length==c.length-d.length}function z(a,b){return Qa(zb(a),b)}function A(a,b,c){c?x(a,b):y(a,b)}function Ab(a,b){var c=!z(a,b);A(a,b,c);return c};function Bb(a,b){this.x=ga(a)?a:0;this.y=ga(b)?b:0}Bb.prototype.clone=function(){return new Bb(this.x,this.y)};function Cb(a,b){this.width=a;this.height=b}Cb.prototype.clone=function(){return new Cb(this.width,this.height)};Cb.prototype.ceil=function(){this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};Cb.prototype.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};Cb.prototype.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};function Db(a,b,c){for(var d in a)b.call(c,a[d],d,a)}function Eb(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function Fb(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}function Gb(a){for(var b in a)return l;return j}function Hb(a,b){b in a&&delete a[b]}function Ib(a,b,c){b in a&&f(Error('The object already contains the key "'+b+'"'));a[b]=c}var Jb="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");
function Kb(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var g=0;g<Jb.length;g++)c=Jb[g],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};function Lb(a){return a?new Mb(Nb(a)):ub||(ub=new Mb)}function C(a){return p(a)?document.getElementById(a):a}function Ob(a,b){var c=b||document;return c.querySelectorAll&&c.querySelector?c.querySelectorAll("."+a):c.getElementsByClassName?c.getElementsByClassName(a):Pb("*",a,b)}function D(a,b){var c=b||document,d=k;return(d=c.querySelectorAll&&c.querySelector?c.querySelector("."+a):Ob(a,b)[0])||k}
function Pb(a,b,c){var d=document,c=c||d,a=a&&"*"!=a?a.toUpperCase():"";if(c.querySelectorAll&&c.querySelector&&(a||b))return c.querySelectorAll(a+(b?"."+b:""));if(b&&c.getElementsByClassName){c=c.getElementsByClassName(b);if(a){for(var d={},e=0,g=0,h;h=c[g];g++)a==h.nodeName&&(d[e++]=h);d.length=e;return d}return c}c=c.getElementsByTagName(a||"*");if(b){d={};for(g=e=0;h=c[g];g++)a=h.className,"function"==typeof a.split&&Qa(a.split(/\s+/),b)&&(d[e++]=h);d.length=e;return d}return c}
var Qb={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function Rb(){var a=window.document,a="CSS1Compat"==a.compatMode?a.documentElement:a.body;return new Cb(a.clientWidth,a.clientHeight)}function E(a,b,c){return Sb(document,arguments)}
function Sb(a,b){var c=b[0],d=b[1];if(!vb&&d&&(d.name||d.type)){c=["<",c];d.name&&c.push(' name="',za(d.name),'"');if(d.type){c.push(' type="',za(d.type),'"');var e={};Kb(e,d);delete e.type;d=e}c.push(">");c=c.join("")}var g=a.createElement(c);d&&(p(d)?g.className=d:la(d)?x.apply(k,[g].concat(d)):Db(d,function(a,b){"style"==b?g.style.cssText=a:"class"==b?g.className=a:"for"==b?g.htmlFor=a:b in Qb?g.setAttribute(Qb[b],a):0==b.lastIndexOf("aria-",0)||0==b.lastIndexOf("data-",0)?g.setAttribute(b,a):
g[b]=a}));if(2<b.length){d=function(b){b&&g.appendChild(p(b)?a.createTextNode(b):b)};for(c=2;c<b.length;c++)if(e=b[c],ma(e)&&!(pa(e)&&0<e.nodeType)){var h=v,q;a:{if((q=e)&&"number"==typeof q.length){if(pa(q)){q="function"==typeof q.item||"string"==typeof q.item;break a}if(oa(q)){q="function"==typeof q.item;break a}}q=l}h(q?Ta(e):e,d)}else d(e)}return g}function Tb(a){for(var b;b=a.firstChild;)a.removeChild(b)}function Ub(a,b,c){a.insertBefore(b,a.childNodes[c]||k)}
function F(a){a&&a.parentNode&&a.parentNode.removeChild(a)}function Vb(a){return wb&&a.children!=i?a.children:La(a.childNodes,function(a){return 1==a.nodeType})}function Wb(a){for(;a&&1!=a.nodeType;)a=a.nextSibling;return a}function Xb(a){if(yb)return a.parentElement;a=a.parentNode;return pa(a)&&1==a.nodeType?a:k}
function Yb(a,b){if(a.contains&&1==b.nodeType)return a==b||a.contains(b);if("undefined"!=typeof a.compareDocumentPosition)return a==b||Boolean(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a}function Nb(a){return 9==a.nodeType?a:a.ownerDocument||a.document}
function Zb(a,b){if("textContent"in a)a.textContent=b;else if(a.firstChild&&3==a.firstChild.nodeType){for(;a.lastChild!=a.firstChild;)a.removeChild(a.lastChild);a.firstChild.data=b}else Tb(a),a.appendChild(Nb(a).createTextNode(b))}var $b={SCRIPT:1,STYLE:1,HEAD:1,IFRAME:1,OBJECT:1},ac={IMG:" ",BR:"\n"};function bc(a){var b=a.getAttributeNode("tabindex");return b&&b.specified?(a=a.tabIndex,na(a)&&0<=a&&32768>a):l}
function cc(a){if(xb&&"innerText"in a)a=a.innerText.replace(/(\r\n|\r|\n)/g,"\n");else{var b=[];dc(a,b,j);a=b.join("")}a=a.replace(/ \xAD /g," ").replace(/\xAD/g,"");a=a.replace(/\u200B/g,"");xb||(a=a.replace(/ +/g," "));" "!=a&&(a=a.replace(/^\s*/,""));return a}function ec(a){var b=[];dc(a,b,l);return b.join("")}
function dc(a,b,c){if(!(a.nodeName in $b))if(3==a.nodeType)c?b.push(String(a.nodeValue).replace(/(\r\n|\r|\n)/g,"")):b.push(a.nodeValue);else if(a.nodeName in ac)b.push(ac[a.nodeName]);else for(a=a.firstChild;a;)dc(a,b,c),a=a.nextSibling}function G(a,b,c){if(!b&&!c)return k;b=b?b.toUpperCase():k;a:{for(var d=0;a;){if((!b||a.nodeName==b)&&(!c||z(a,c))){c=a;break a}a=a.parentNode;d++}c=k}return c}function Mb(a){this.T=a||n.document||document}m=Mb.prototype;m.Fa=Lb;
m.b=function(a){return p(a)?this.T.getElementById(a):a};m.J=function(a,b,c){return Sb(this.T,arguments)};m.createElement=function(a){return this.T.createElement(a)};m.createTextNode=function(a){return this.T.createTextNode(a)};function fc(a){var b=a.T,a=!fb&&"CSS1Compat"==b.compatMode?b.documentElement:b.body,b=b.parentWindow||b.defaultView;return new Bb(b.pageXOffset||a.scrollLeft,b.pageYOffset||a.scrollTop)}m.appendChild=function(a,b){a.appendChild(b)};m.rg=Vb;
function gc(a,b){return b.firstElementChild!=i?b.firstElementChild:Wb(b.firstChild)}m.contains=Yb;w&&rb(8);var hc={};function ic(a,b){a.innerHTML=b(hc,i,i)}function H(a,b){var c;a:if(c=(new Mb(i)||Lb()).createElement("DIV"),c.innerHTML=a(b||hc,i,i),1==c.childNodes.length){var d=c.firstChild;if(1==d.nodeType){c=d;break a}}return c}function J(a){return"object"===typeof a&&a&&0===a.ik?a.content:String(a).replace(jc,kc)}
var lc={"\x00":"&#0;",'"':"&quot;","&":"&amp;","'":"&#39;","<":"&lt;",">":"&gt;","\t":"&#9;","\n":"&#10;","\x0B":"&#11;","\f":"&#12;","\r":"&#13;"," ":"&#32;","-":"&#45;","/":"&#47;","=":"&#61;","`":"&#96;","\u0085":"&#133;","\u00a0":"&#160;","\u2028":"&#8232;","\u2029":"&#8233;"};function kc(a){return lc[a]}var jc=/[\x00\x22\x26\x27\x3c\x3e]/g;function mc(a){return(a.link?'<a href="'+J(a.link)+'">':"")+'<div class="note'+(a.Pe?" pic":"")+'">'+(a.Pe?'<div class="picture"><img class="image" src='+J(a.Pe)+' style="display: none"/></div>':"")+'<div class="action">'+(a.k?J(a.k.name)+" ":"")+J(a.action)+'</div><div class="content">'+J(a.content)+'</div><div class="close"></div></div>'+(a.link?"</a>":"")};function K(){0!=nc&&(this.jk=Error().stack,oc[qa(this)]=this)}var nc=0,oc={};K.prototype.Hd=l;K.prototype.ea=function(){if(!this.Hd&&(this.Hd=j,this.o(),0!=nc)){var a=qa(this);delete oc[a]}};K.prototype.o=function(){this.di&&pc.apply(k,this.di);if(this.gh)for(;this.gh.length;)this.gh.shift()()};function qc(a){a&&"function"==typeof a.ea&&a.ea()}function pc(a){for(var b=0,c=arguments.length;b<c;++b){var d=arguments[b];ma(d)?pc.apply(k,d):qc(d)}};var rc=!w||tb(9),sc=!w||tb(9),tc=w&&!rb("9");!fb||rb("528");eb&&rb("1.9b")||w&&rb("8")||db&&rb("9.5")||fb&&rb("528");eb&&!rb("8")||w&&rb("9");function uc(a,b){this.type=a;this.currentTarget=this.target=b}m=uc.prototype;m.o=aa();m.ea=aa();m.Qb=l;m.defaultPrevented=l;m.he=j;m.stopPropagation=function(){this.Qb=j};m.preventDefault=function(){this.defaultPrevented=j;this.he=l};function vc(a){a.preventDefault()};function wc(a){wc[" "](a);return a}wc[" "]=ia;function xc(a,b){a&&this.init(a,b)}t(xc,uc);var yc=[1,4,2];m=xc.prototype;m.target=k;m.relatedTarget=k;m.offsetX=0;m.offsetY=0;m.clientX=0;m.clientY=0;m.screenX=0;m.screenY=0;m.button=0;m.keyCode=0;m.charCode=0;m.ctrlKey=l;m.altKey=l;m.shiftKey=l;m.metaKey=l;m.jf=l;m.va=k;
m.init=function(a,b){var c=this.type=a.type;uc.call(this,c);this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;if(d){if(eb){var e;a:{try{wc(d.nodeName);e=j;break a}catch(g){}e=l}e||(d=k)}}else"mouseover"==c?d=a.fromElement:"mouseout"==c&&(d=a.toElement);this.relatedTarget=d;this.offsetX=fb||a.offsetX!==i?a.offsetX:a.layerX;this.offsetY=fb||a.offsetY!==i?a.offsetY:a.layerY;this.clientX=a.clientX!==i?a.clientX:a.pageX;this.clientY=a.clientY!==i?a.clientY:a.pageY;this.screenX=
a.screenX||0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||("keypress"==c?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.jf=hb?a.metaKey:a.ctrlKey;this.state=a.state;this.va=a;a.defaultPrevented&&this.preventDefault();delete this.Qb};function zc(a){return(rc?0==a.va.button:"click"==a.type?j:!!(a.va.button&yc[0]))&&!(fb&&hb&&a.ctrlKey)}
m.stopPropagation=function(){xc.e.stopPropagation.call(this);this.va.stopPropagation?this.va.stopPropagation():this.va.cancelBubble=j};m.preventDefault=function(){xc.e.preventDefault.call(this);var a=this.va;if(a.preventDefault)a.preventDefault();else if(a.returnValue=l,tc)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};m.o=aa();function Ac(){}var Bc=0;m=Ac.prototype;m.key=0;m.Sb=l;m.Vf=l;m.init=function(a,b,c,d,e,g){oa(a)?this.Jg=j:a&&a.handleEvent&&oa(a.handleEvent)?this.Jg=l:f(Error("Invalid listener argument"));this.mc=a;this.proxy=b;this.src=c;this.type=d;this.capture=!!e;this.Od=g;this.Vf=l;this.key=++Bc;this.Sb=l};m.handleEvent=function(a){return this.Jg?this.mc.call(this.Od||this.src,a):this.mc.handleEvent.call(this.mc,a)};var Cc={},Dc={},Ec={},Fc={};
function L(a,b,c,d,e){if(b){if(la(b)){for(var g=0;g<b.length;g++)L(a,b[g],c,d,e);return k}var d=!!d,h=Dc;b in h||(h[b]={M:0,oa:0});h=h[b];d in h||(h[d]={M:0,oa:0},h.M++);var h=h[d],q=qa(a),u;h.oa++;if(h[q]){u=h[q];for(g=0;g<u.length;g++)if(h=u[g],h.mc==c&&h.Od==e){if(h.Sb)break;return u[g].key}}else u=h[q]=[],h.M++;var B=Gc,I=sc?function(a){return B.call(I.src,I.key,a)}:function(a){a=B.call(I.src,I.key,a);if(!a)return a},g=I;g.src=a;h=new Ac;h.init(c,g,a,b,d,e);c=h.key;g.key=c;u.push(h);Cc[c]=h;Ec[q]||
(Ec[q]=[]);Ec[q].push(h);a.addEventListener?(a==n||!a.dg)&&a.addEventListener(b,g,d):a.attachEvent(b in Fc?Fc[b]:Fc[b]="on"+b,g);return c}f(Error("Invalid event type"))}function Hc(a,b,c,d,e){if(la(b))for(var g=0;g<b.length;g++)Hc(a,b[g],c,d,e);else if(d=!!d,a=Ic(a,b,d))for(g=0;g<a.length;g++)if(a[g].mc==c&&a[g].capture==d&&a[g].Od==e){Jc(a[g].key);break}}
function Jc(a){if(!Cc[a])return l;var b=Cc[a];if(b.Sb)return l;var c=b.src,d=b.type,e=b.proxy,g=b.capture;c.removeEventListener?(c==n||!c.dg)&&c.removeEventListener(d,e,g):c.detachEvent&&c.detachEvent(d in Fc?Fc[d]:Fc[d]="on"+d,e);c=qa(c);Ec[c]&&(e=Ec[c],Ra(e,b),0==e.length&&delete Ec[c]);b.Sb=j;if(b=Dc[d][g][c])b.bh=j,Kc(d,g,c,b);delete Cc[a];return j}
function Kc(a,b,c,d){if(!d.Wd&&d.bh){for(var e=0,g=0;e<d.length;e++)d[e].Sb?d[e].proxy.src=k:(e!=g&&(d[g]=d[e]),g++);d.length=g;d.bh=l;0==g&&(delete Dc[a][b][c],Dc[a][b].M--,0==Dc[a][b].M&&(delete Dc[a][b],Dc[a].M--),0==Dc[a].M&&delete Dc[a])}}function Ic(a,b,c){var d=Dc;return b in d&&(d=d[b],c in d&&(d=d[c],a=qa(a),d[a]))?d[a]:k}
function Lc(a,b,c,d,e){var g=1,b=qa(b);if(a[b]){a.oa--;a=a[b];a.Wd?a.Wd++:a.Wd=1;try{for(var h=a.length,q=0;q<h;q++){var u=a[q];u&&!u.Sb&&(g&=Mc(u,e)!==l)}}finally{a.Wd--,Kc(c,d,b,a)}}return Boolean(g)}function Mc(a,b){a.Vf&&Jc(a.key);return a.handleEvent(b)}
function Gc(a,b){if(!Cc[a])return j;var c=Cc[a],d=c.type,e=Dc;if(!(d in e))return j;var e=e[d],g,h;if(!sc){g=b||ha("window.event");var q=j in e,u=l in e;if(q){if(0>g.keyCode||g.returnValue!=i)return j;a:{var B=l;if(0==g.keyCode)try{g.keyCode=-1;break a}catch(I){B=j}if(B||g.returnValue==i)g.returnValue=j}}B=new xc;B.init(g,this);g=j;try{if(q){for(var P=[],mb=B.currentTarget;mb;mb=mb.parentNode)P.push(mb);h=e[j];h.oa=h.M;for(var Ia=P.length-1;!B.Qb&&0<=Ia&&h.oa;Ia--)B.currentTarget=P[Ia],g&=Lc(h,P[Ia],
d,j,B);if(u){h=e[l];h.oa=h.M;for(Ia=0;!B.Qb&&Ia<P.length&&h.oa;Ia++)B.currentTarget=P[Ia],g&=Lc(h,P[Ia],d,l,B)}}else g=Mc(c,B)}finally{P&&(P.length=0)}return g}d=new xc(b,this);return g=Mc(c,d)};function Nc(a){K.call(this);this.gb=a;this.L=[]}t(Nc,K);var Oc=[];function M(a,b,c,d,e){la(c)||(Oc[0]=c,c=Oc);for(var g=0;g<c.length;g++){var h=L(b,c[g],d||a,e||l,a.gb||a);a.L.push(h)}return a}function Pc(a,b,c,d,e,g){if(la(c))for(var h=0;h<c.length;h++)Pc(a,b,c[h],d,e,g);else{a:{d=d||a;g=g||a.gb||a;e=!!e;if(b=Ic(b,c,e))for(c=0;c<b.length;c++)if(!b[c].Sb&&b[c].mc==d&&b[c].capture==e&&b[c].Od==g){b=b[c];break a}b=k}b&&(b=b.key,Jc(b),Ra(a.L,b))}return a}function Qc(a){v(a.L,Jc);a.L.length=0}
Nc.prototype.o=function(){Nc.e.o.call(this);Qc(this)};Nc.prototype.handleEvent=function(){f(Error("EventHandler.handleEvent not implemented"))};function Rc(){K.call(this)}t(Rc,K);m=Rc.prototype;m.dg=j;m.be=k;m.uf=ba("be");m.addEventListener=function(a,b,c,d){L(this,a,b,c,d)};m.removeEventListener=function(a,b,c,d){Hc(this,a,b,c,d)};
m.dispatchEvent=function(a){var b=a.type||a,c=Dc;if(b in c){if(p(a))a=new uc(a,this);else if(a instanceof uc)a.target=a.target||this;else{var d=a,a=new uc(b,this);Kb(a,d)}var d=1,e,c=c[b],b=j in c,g;if(b){e=[];for(g=this;g;g=g.be)e.push(g);g=c[j];g.oa=g.M;for(var h=e.length-1;!a.Qb&&0<=h&&g.oa;h--)a.currentTarget=e[h],d&=Lc(g,e[h],a.type,j,a)&&a.he!=l}if(l in c)if(g=c[l],g.oa=g.M,b)for(h=0;!a.Qb&&h<e.length&&g.oa;h++)a.currentTarget=e[h],d&=Lc(g,e[h],a.type,l,a)&&a.he!=l;else for(e=this;!a.Qb&&e&&
g.oa;e=e.be)a.currentTarget=e,d&=Lc(g,e,a.type,l,a)&&a.he!=l;a=Boolean(d)}else a=j;return a};m.o=function(){Rc.e.o.call(this);var a,b=0,c=a==k;a=!!a;if(this==k)Db(Ec,function(d){for(var e=d.length-1;0<=e;e--){var g=d[e];if(c||a==g.capture)Jc(g.key),b++}});else{var d=qa(this);if(Ec[d])for(var d=Ec[d],e=d.length-1;0<=e;e--){var g=d[e];if(c||a==g.capture)Jc(g.key),b++}}this.be=k};function Sc(a,b,c,d){this.top=a;this.right=b;this.bottom=c;this.left=d}Sc.prototype.clone=function(){return new Sc(this.top,this.right,this.bottom,this.left)};Sc.prototype.contains=function(a){return!this||!a?l:a instanceof Sc?a.left>=this.left&&a.right<=this.right&&a.top>=this.top&&a.bottom<=this.bottom:a.x>=this.left&&a.x<=this.right&&a.y>=this.top&&a.y<=this.bottom};function Tc(a,b,c,d){this.left=a;this.top=b;this.width=c;this.height=d}Tc.prototype.clone=function(){return new Tc(this.left,this.top,this.width,this.height)};Tc.prototype.contains=function(a){return a instanceof Tc?this.left<=a.left&&this.left+this.width>=a.left+a.width&&this.top<=a.top&&this.top+this.height>=a.top+a.height:a.x>=this.left&&a.x<=this.left+this.width&&a.y>=this.top&&a.y<=this.top+this.height};function Uc(a,b,c){p(b)?Vc(a,c,b):Db(b,va(Vc,a))}function Vc(a,b,c){a.style[Ga(c)]=b}function Wc(a,b){var c=Nb(a);return c.defaultView&&c.defaultView.getComputedStyle&&(c=c.defaultView.getComputedStyle(a,k))?c[b]||c.getPropertyValue(b)||"":""}function Xc(a,b){return a.currentStyle?a.currentStyle[b]:k}function Yc(a,b){return Wc(a,b)||Xc(a,b)||a.style&&a.style[b]}function Zc(a){return new Bb(a.offsetLeft,a.offsetTop)}
function $c(a){var b=a.getBoundingClientRect();w&&(a=a.ownerDocument,b.left-=a.documentElement.clientLeft+a.body.clientLeft,b.top-=a.documentElement.clientTop+a.body.clientTop);return b}
function ad(a){if(w&&!tb(8))return a.offsetParent;for(var b=Nb(a),c=Yc(a,"position"),d="fixed"==c||"absolute"==c,a=a.parentNode;a&&a!=b;a=a.parentNode)if(c=Yc(a,"position"),d=d&&"static"==c&&a!=b.documentElement&&a!=b.body,!d&&(a.scrollWidth>a.clientWidth||a.scrollHeight>a.clientHeight||"fixed"==c||"absolute"==c||"relative"==c))return a;return k}
function bd(a){var b,c=Nb(a),d=Yc(a,"position"),e=eb&&c.getBoxObjectFor&&!a.getBoundingClientRect&&"absolute"==d&&(b=c.getBoxObjectFor(a))&&(0>b.screenX||0>b.screenY),g=new Bb(0,0),h;b=c?Nb(c):document;if(h=w)if(h=!tb(9))h="CSS1Compat"!=Lb(b).T.compatMode;h=h?b.body:b.documentElement;if(a==h)return g;if(a.getBoundingClientRect)b=$c(a),a=fc(Lb(c)),g.x=b.left+a.x,g.y=b.top+a.y;else if(c.getBoxObjectFor&&!e)b=c.getBoxObjectFor(a),a=c.getBoxObjectFor(h),g.x=b.screenX-a.screenX,g.y=b.screenY-a.screenY;
else{e=a;do{g.x+=e.offsetLeft;g.y+=e.offsetTop;e!=a&&(g.x+=e.clientLeft||0,g.y+=e.clientTop||0);if(fb&&"fixed"==Yc(e,"position")){g.x+=c.body.scrollLeft;g.y+=c.body.scrollTop;break}e=e.offsetParent}while(e&&e!=a);if(db||fb&&"absolute"==d)g.y-=c.body.offsetTop;for(e=a;(e=ad(e))&&e!=c.body&&e!=h;)if(g.x-=e.scrollLeft,!db||"TR"!=e.tagName)g.y-=e.scrollTop}return g}function cd(a){"number"==typeof a&&(a=Math.round(a)+"px");return a}function dd(a,b){a.style.height=cd(b)}
function N(a){if("none"!=Yc(a,"display"))return ed(a);var b=a.style,c=b.display,d=b.visibility,e=b.position;b.visibility="hidden";b.position="absolute";b.display="inline";a=ed(a);b.display=c;b.position=e;b.visibility=d;return a}function ed(a){var b=a.offsetWidth,c=a.offsetHeight,d=fb&&!b&&!c;return(!ga(b)||d)&&a.getBoundingClientRect?(a=$c(a),new Cb(a.right-a.left,a.bottom-a.top)):new Cb(b,c)}
function fd(a,b){var c=a.style;"opacity"in c?c.opacity=b:"MozOpacity"in c?c.MozOpacity=b:"filter"in c&&(c.filter=""===b?"":"alpha(opacity="+100*b+")")}function O(a,b){a.style.display=b?"":"none"}function gd(a){return"rtl"==Yc(a,"direction")}var hd=eb?"MozUserSelect":fb?"WebkitUserSelect":k;
function id(a,b){if(/^\d+px?$/.test(b))return parseInt(b,10);var c=a.style.left,d=a.runtimeStyle.left;a.runtimeStyle.left=a.currentStyle.left;a.style.left=b;var e=a.style.pixelLeft;a.style.left=c;a.runtimeStyle.left=d;return e}
function jd(a,b){if(w){var c=id(a,Xc(a,b+"Left")),d=id(a,Xc(a,b+"Right")),e=id(a,Xc(a,b+"Top")),g=id(a,Xc(a,b+"Bottom"));return new Sc(e,d,g,c)}c=Wc(a,b+"Left");d=Wc(a,b+"Right");e=Wc(a,b+"Top");g=Wc(a,b+"Bottom");return new Sc(parseFloat(e),parseFloat(d),parseFloat(g),parseFloat(c))}var kd={thin:2,medium:4,thick:6};function ld(a,b){if("none"==Xc(a,b+"Style"))return 0;var c=Xc(a,b+"Width");return c in kd?kd[c]:id(a,c)}
function md(a){if(w){var b=ld(a,"borderLeft"),c=ld(a,"borderRight"),d=ld(a,"borderTop"),a=ld(a,"borderBottom");return new Sc(d,c,a,b)}b=Wc(a,"borderLeftWidth");c=Wc(a,"borderRightWidth");d=Wc(a,"borderTopWidth");a=Wc(a,"borderBottomWidth");return new Sc(parseFloat(d),parseFloat(c),parseFloat(a),parseFloat(b))};function nd(){}ja(nd);nd.prototype.Ji=0;nd.a();function Q(a){K.call(this);this.Ab=a||Lb();this.za=od}t(Q,Rc);Q.prototype.wi=nd.a();var od=k;function pd(a,b){switch(a){case 1:return b?"disable":"enable";case 2:return b?"highlight":"unhighlight";case 4:return b?"activate":"deactivate";case 8:return b?"select":"unselect";case 16:return b?"check":"uncheck";case 32:return b?"focus":"blur";case 64:return b?"open":"close"}f(Error("Invalid component state"))}m=Q.prototype;m.aa=k;m.O=l;m.g=k;m.za=k;m.Ha=k;m.C=k;m.S=k;m.U=k;m.Qh=l;
function qd(a){return a.aa||(a.aa=":"+(a.wi.Ji++).toString(36))}m.b=ca("g");m.j=function(){return this.ic||(this.ic=new Nc(this))};m.ke=function(a){this==a&&f(Error("Unable to set parent component"));a&&(this.C&&this.aa&&this.C.U&&this.aa&&(this.aa in this.C.U&&this.C.U[this.aa])&&this.C!=a)&&f(Error("Unable to set parent component"));this.C=a;Q.e.uf.call(this,a)};m.getParent=ca("C");m.uf=function(a){this.C&&this.C!=a&&f(Error("Method not supported"));Q.e.uf.call(this,a)};m.Fa=ca("Ab");
m.J=function(){this.g=this.Ab.createElement("div")};function rd(a,b){a.O&&f(Error("Component already rendered"));a.g||a.J();b?b.insertBefore(a.g,k):a.Ab.T.body.appendChild(a.g);(!a.C||a.C.O)&&a.w()}m.i=function(a){this.O&&f(Error("Component already rendered"));if(a&&this.wb(a)){this.Qh=j;if(!this.Ab||this.Ab.T!=Nb(a))this.Ab=Lb(a);this.v(a);this.w()}else f(Error("Invalid element to decorate"))};m.wb=da(j);m.v=ba("g");m.w=function(){this.O=j;sd(this,function(a){!a.O&&a.b()&&a.w()})};
m.Rc=function(){sd(this,function(a){a.O&&a.Rc()});this.ic&&Qc(this.ic);this.O=l};m.o=function(){Q.e.o.call(this);this.O&&this.Rc();this.ic&&(this.ic.ea(),delete this.ic);sd(this,function(a){a.ea()});!this.Qh&&this.g&&F(this.g);this.C=this.Ha=this.g=this.U=this.S=k};
function td(a,b){var c=a.S?a.S.length:0;b.O&&!a.O&&f(Error("Component already rendered"));(0>c||c>(a.S?a.S.length:0))&&f(Error("Child component index out of bounds"));if(!a.U||!a.S)a.U={},a.S=[];if(b.getParent()==a){var d=qd(b);a.U[d]=b;Ra(a.S,b)}else Ib(a.U,qd(b),b);b.ke(a);Va(a.S,c,0,b);b.O&&a.O&&b.getParent()==a?(d=a.Gb(),d.insertBefore(b.b(),d.childNodes[c]||k)):a.O&&(!b.O&&b.g&&b.g.parentNode)&&b.w()}m.Gb=ca("g");m.Kg=function(){this.za==k&&(this.za=gd(this.O?this.g:this.Ab.T.body));return this.za};
m.Ub=function(a){this.O&&f(Error("Component already rendered"));this.za=a};function sd(a,b){a.S&&v(a.S,b,i)}m.removeChild=function(a,b){if(a){var c=p(a)?a:qd(a),a=this.U&&c?(c in this.U?this.U[c]:i)||k:k;c&&a&&(Hb(this.U,c),Ra(this.S,a),b&&(a.Rc(),a.g&&F(a.g)),a.ke(k))}a||f(Error("Child is not in parent component"));return a};function ud(){Q.call(this)}t(ud,Q);ud.prototype.J=function(){this.g=E("div",{id:"notify"})};ud.prototype.v=function(a){ud.e.v.call(this,a);vd.a().subscribe(wd,function(a,c,d,e,g){this.yh(j,a,c,d,e,g)},this);vd.a().subscribe(xd,function(a,c,d,e,g){this.yh(l,a,c,d,e,g)},this)};
ud.prototype.yh=function(a,b,c,d,e,g){var h=H(mc,{action:b,content:c,k:d,Pe:e,link:g}),q=D("image",h);D("close",h);M(M(M(this.j(),D("close",h),"click",function(a){a.preventDefault();a.stopPropagation();F(h)}),h,"click",function(a){a.preventDefault();a.stopPropagation();F(h)}),q,"load",function(){O(q,j);R(function(){q.style.marginLeft=-1*q.clientWidth/2+"px";q.style.marginTop=-1*q.clientHeight/2+"px"})});this.b().appendChild(h);var u=D("note",h);R(function(){u&&(x(u,"show"),a?R(function(){y(u,"show");
x(u,"fade-out");R(function(){F(h)},5100)},3E3):R(function(){x(u,"dim")},3E3))})};function S(){K.call(this);this.Ja=[];this.td={}}t(S,K);m=S.prototype;m.Ng=1;m.de=0;m.subscribe=function(a,b,c){var d=this.td[a];d||(d=this.td[a]=[]);var e=this.Ng;this.Ja[e]=a;this.Ja[e+1]=b;this.Ja[e+2]=c;this.Ng=e+3;d.push(e);return e};m.Bj=function(a){if(0!=this.de)this.bd||(this.bd=[]),this.bd.push(a);else{var b=this.Ja[a];b&&((b=this.td[b])&&Ra(b,a),delete this.Ja[a],delete this.Ja[a+1],delete this.Ja[a+2])}};
m.c=function(a,b){var c=this.td[a];if(c){this.de++;for(var d=Wa(arguments,1),e=0,g=c.length;e<g;e++){var h=c[e];this.Ja[h+1].apply(this.Ja[h+2],d)}this.de--;if(this.bd&&0==this.de)for(;c=this.bd.pop();)this.Bj(c)}};m.o=function(){S.e.o.call(this);delete this.Ja;delete this.td;delete this.bd};function vd(){S.call(this)}t(vd,S);ja(vd);var wd="flash",xd="show";function yd(a){this.id=a.id;this.G=a.picture;this.name=a.name;this.description=a.description;this.link=a.link};function zd(a){S.call(this);this.id=a.id;this.name=a.name;this.host="youtube";this.jc=a.host_id;this.vi="http://www.youtube.com/watch?v="+a.host_id;this.duration=a.duration;this.live=!!a.live;this.cf=[];this.aj=k;this.lg=l;this.description=a.description;this.link=a.link||"xylocast.com/?m="+this.id;this.ga=a.publisher&&new yd(a.publisher);this.Rb=a.published&&Ad(a.published+"Z");this.Za="http://i.ytimg.com/vi/"+this.jc+"/0.jpg";this.Cf="http://i.ytimg.com/vi/"+this.jc+"/1.jpg";this.Ek="http://i.ytimg.com/vi/"+
this.jc+"/2.jpg";this.Fk="http://i.ytimg.com/vi/"+this.jc+"/3.jpg";this.Dk=new Cb(480,360);this.Fh=37;this.eb=[];this.Lh=[];this.Lc=a.comment_count||0;this.Ck=a.star_count||0;this.Ci=a.like_count||0;this.mk=a.dislike_count||0;this.je=[];this.qb={};this.bi=a.collection_id;this.subscribe(Bd,this.bb,this);this.subscribe(Cd,this.fj,this);this.subscribe(Dd,this.ve,this)}t(zd,S);function Ed(a){return a.Rb.getMonth()+1+"/"+a.Rb.getDate()+"/"+a.Rb.getYear()}var Bd="add-comment",Cd="remove-comment",Dd="watching";
zd.prototype.se=function(a){Oa(this.cf,function(b){return a.id==b.id})||this.cf.push(a)};zd.prototype.bb=function(a){this.eb.push(a);this.Lc+=1;a.k.id!=T.a().h.id&&vd.a().c(xd,"commented on "+this.name,a.text,a.k,a.k.G,"#info:"+this.id)};zd.prototype.fj=function(a){U("/_comment",Fd(),"POST","delete=true&id="+a);Sa(this.eb,function(b){return b.id==a});this.Lc-=1};
zd.prototype.ve=function(a,b,c){c?(Hb(this.qb,a.id),a.Qa=k):(this.qb[a.id]=a,a.Qa=this,a.id!=T.a().h.id&&vd.a().c(wd,"is watching "+(b?b.name:""),this.name,a,this.Cf,"#info:"+this.id))};function Gd(){S.call(this);this.Ze={}}t(Gd,S);ja(Gd);function Hd(a,b){var c=a.get(b.id);c||(c=new zd(b),a.add(c));return c}Gd.prototype.get=function(a){return a in this.Ze?this.Ze[a]:i};Gd.prototype.add=function(a){this.Ze[a.id]=a};var Id={Lj:["BC","AD"],Kj:["Before Christ","Anno Domini"],Nj:"JFMAMJJASOND".split(""),Vj:"JFMAMJJASOND".split(""),Mj:"January February March April May June July August September October November December".split(" "),Uj:"January February March April May June July August September October November December".split(" "),Rj:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),Xj:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),ak:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),
Zj:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),Tj:"Sun Mon Tue Wed Thu Fri Sat".split(" "),Yj:"Sun Mon Tue Wed Thu Fri Sat".split(" "),Oj:"SMTWTFS".split(""),Wj:"SMTWTFS".split(""),Sj:["Q1","Q2","Q3","Q4"],Qj:["1st quarter","2nd quarter","3rd quarter","4th quarter"],Ij:["AM","PM"],Jj:["EEEE, MMMM d, y","MMMM d, y","MMM d, y","M/d/yy"],$j:["h:mm:ss a zzzz","h:mm:ss a z","h:mm:ss a","h:mm a"],Rh:6,bk:[5,6],Sh:5};var Jd=/^(\d{4})(?:(?:-?(\d{2})(?:-?(\d{2}))?)|(?:-?(\d{3}))|(?:-?W(\d{2})(?:-?([1-7]))?))?$/,Kd=/^(\d{2})(?::?(\d{2})(?::?(\d{2})(\.\d+)?)?)?$/,Ld=/Z|(?:([-+])(\d{2})(?::?(\d{2}))?)$/;
function Ad(a){var b=new Md(2E3),a=ya(a),a=a.split(-1==a.indexOf("T")?" ":"T"),c;var d=a[0].match(Jd);if(d){var e=Number(d[2]),g=Number(d[3]),h=Number(d[4]);c=Number(d[5]);var q=Number(d[6])||1;b.setFullYear(Number(d[1]));h?(b.setDate(1),b.setMonth(0),b.add(new Nd(Od,h-1))):c?(b.setMonth(0),b.setDate(1),d=b.getDay()||7,b.add(new Nd(Od,(4>=d?1-d:8-d)+(Number(q)+7*(Number(c)-1))-1))):(e&&(b.setDate(1),b.setMonth(e-1)),g&&b.setDate(g));c=j}else c=l;if(c&&!(c=2>a.length))a=a[1],c=a.match(Ld),q=0,c&&("Z"!=
c[0]&&(q=60*c[2]+Number(c[3]),q*="-"==c[1]?1:-1),q-=b.getTimezoneOffset(),a=a.substr(0,a.length-c[0].length)),(c=a.match(Kd))?(b.setHours(Number(c[1])),b.setMinutes(Number(c[2])||0),b.setSeconds(Number(c[3])||0),b.setMilliseconds(c[4]?1E3*c[4]:0),0!=q&&b.setTime(b.getTime()+6E4*q),c=j):c=l;return c?b:k}
function Nd(a,b,c,d,e,g){p(a)?(this.Ba=a==Pd?b:0,this.ya=a==Qd?b:0,this.ua=a==Od?b:0,this.ka=a==Rd?b:0,this.ma=a==Sd?b:0,this.pa=a==Td?b:0):(this.Ba=a||0,this.ya=b||0,this.ua=c||0,this.ka=d||0,this.ma=e||0,this.pa=g||0)}
Nd.prototype.sd=function(a){var b=Math.min(this.Ba,this.ya,this.ua,this.ka,this.ma,this.pa),c=Math.max(this.Ba,this.ya,this.ua,this.ka,this.ma,this.pa);if(0>b&&0<c)return k;if(!a&&0==b&&0==c)return"PT0S";c=[];0>b&&c.push("-");c.push("P");(this.Ba||a)&&c.push(Math.abs(this.Ba)+"Y");(this.ya||a)&&c.push(Math.abs(this.ya)+"M");(this.ua||a)&&c.push(Math.abs(this.ua)+"D");if(this.ka||this.ma||this.pa||a)c.push("T"),(this.ka||a)&&c.push(Math.abs(this.ka)+"H"),(this.ma||a)&&c.push(Math.abs(this.ma)+"M"),
(this.pa||a)&&c.push(Math.abs(this.pa)+"S");return c.join("")};Nd.prototype.clone=function(){return new Nd(this.Ba,this.ya,this.ua,this.ka,this.ma,this.pa)};var Pd="y",Qd="m",Od="d",Rd="h",Sd="n",Td="s";Nd.prototype.add=function(a){this.Ba+=a.Ba;this.ya+=a.ya;this.ua+=a.ua;this.ka+=a.ka;this.ma+=a.ma;this.pa+=a.pa};
function Ud(a,b,c){na(a)?(this.n=new Date(a,b||0,c||1),Vd(this,c||1)):pa(a)?(this.n=new Date(a.getFullYear(),a.getMonth(),a.getDate()),Vd(this,a.getDate())):(this.n=new Date(s()),this.n.setHours(0),this.n.setMinutes(0),this.n.setSeconds(0),this.n.setMilliseconds(0))}m=Ud.prototype;m.Jd=Id.Rh;m.Kd=Id.Sh;m.clone=function(){var a=new Ud(this.n);a.Jd=this.Jd;a.Kd=this.Kd;return a};m.getFullYear=function(){return this.n.getFullYear()};m.getYear=function(){return this.getFullYear()};m.getMonth=function(){return this.n.getMonth()};
m.getDate=function(){return this.n.getDate()};m.getTime=function(){return this.n.getTime()};m.getDay=function(){return this.n.getDay()};m.getUTCHours=function(){return this.n.getUTCHours()};m.getTimezoneOffset=function(){return this.n.getTimezoneOffset()};function Wd(a){a=a.getTimezoneOffset();if(0==a)a="Z";else var b=Math.abs(a)/60,c=Math.floor(b),b=60*(b-c),a=(0<a?"-":"+")+Fa(c)+":"+Fa(b);return a}m.set=function(a){this.n=new Date(a.getFullYear(),a.getMonth(),a.getDate())};m.setFullYear=function(a){this.n.setFullYear(a)};
m.setMonth=function(a){this.n.setMonth(a)};m.setDate=function(a){this.n.setDate(a)};m.setTime=function(a){this.n.setTime(a)};
m.add=function(a){if(a.Ba||a.ya){var b=this.getMonth()+a.ya+12*a.Ba,c=this.getYear()+Math.floor(b/12),b=b%12;0>b&&(b+=12);var d;a:{switch(b){case 1:d=0==c%4&&(0!=c%100||0==c%400)?29:28;break a;case 5:case 8:case 10:case 3:d=30;break a}d=31}d=Math.min(d,this.getDate());this.setDate(1);this.setFullYear(c);this.setMonth(b);this.setDate(d)}a.ua&&(a=new Date((new Date(this.getYear(),this.getMonth(),this.getDate(),12)).getTime()+864E5*a.ua),this.setDate(1),this.setFullYear(a.getFullYear()),this.setMonth(a.getMonth()),
this.setDate(a.getDate()),Vd(this,a.getDate()))};m.sd=function(a,b){return[this.getFullYear(),Fa(this.getMonth()+1),Fa(this.getDate())].join(a?"-":"")+(b?Wd(this):"")};m.toString=function(){return this.sd()};function Vd(a,b){a.getDate()!=b&&a.n.setUTCHours(a.n.getUTCHours()+(a.getDate()<b?1:-1))}m.valueOf=function(){return this.n.valueOf()};function Md(a,b,c,d,e,g,h){this.n=na(a)?new Date(a,b||0,c||1,d||0,e||0,g||0,h||0):new Date(a?a.getTime():s())}t(Md,Ud);m=Md.prototype;m.getHours=function(){return this.n.getHours()};
m.getMinutes=function(){return this.n.getMinutes()};m.getSeconds=function(){return this.n.getSeconds()};m.getUTCHours=function(){return this.n.getUTCHours()};m.setHours=function(a){this.n.setHours(a)};m.setMinutes=function(a){this.n.setMinutes(a)};m.setSeconds=function(a){this.n.setSeconds(a)};m.setMilliseconds=function(a){this.n.setMilliseconds(a)};m.setUTCHours=function(a){this.n.setUTCHours(a)};
m.add=function(a){Ud.prototype.add.call(this,a);a.ka&&this.setHours(this.n.getHours()+a.ka);a.ma&&this.setMinutes(this.n.getMinutes()+a.ma);a.pa&&this.setSeconds(this.n.getSeconds()+a.pa)};m.sd=function(a,b){var c=Ud.prototype.sd.call(this,a);return a?c+" "+Fa(this.getHours())+":"+Fa(this.getMinutes())+":"+Fa(this.getSeconds())+(b?Wd(this):""):c+"T"+Fa(this.getHours())+Fa(this.getMinutes())+Fa(this.getSeconds())+(b?Wd(this):"")};m.toString=function(){return this.sd()};
m.clone=function(){var a=new Md(this.n);a.Jd=this.Jd;a.Kd=this.Kd;return a};function Xd(a,b){S.call(this);var c=b||k,d=a||k;this.id=d?d.id:c.id;this.media=d?Hd(Gd.a(),d.media):c;Gd.a().add(this.media);this.time=d?Ad(d.time+"Z"):new Md;this.async=d?d.async:j;this.seek=d?d.seek:k}t(Xd,S);function Yd(a){return new Xd(i,a)};function Zd(a){S.call(this);this.id=a.id;this.name=a.name;this.url=a.profile_url;this.location=a.location||"";this.Fj=a.welcomed;this.sc=a.online;this.lk=a.demo;this.Qa=a.last_seen?Hd(zd.a(),a.last_seen):k;this.history=[];this.zh=[];this.G=xa("https://graph.facebook.com/%s/picture",this.id);for(this.color=Raphael.getColor();"#00bf85"==this.color||"#00bf2f"==this.color;)this.color=Raphael.getColor();this.Th=a.access_level;this.ck=[];this.Va=a.last_login?Ad(a.last_login+"Z"):k;this.zk=a.session_count;
this.ek=a.ave_session?a.ave_session.toFixed(2):k;this.Ak=a.show_guide!=i?a.show_guide:j;this.Bk=a.show_sidebar!=i?a.show_sidebar:j;this.cj=a.post_facebook!=i?a.post_facebook:j;this.nh=a.post_twitter!=i?a.post_twitter:j;this.subscribe($d,function(){this.nh=j},this)}t(Zd,S);function ae(){return T.a().h.Th==be}Zd.prototype.Ta=function(){var a=this.name.split(" ");return a&&a.length?a[0]:this.name};function ce(a,b){return Oa(a.zh,function(a){return a.id==b.id})}var $d="twitter-auth",be=2;function de(a,b,c,d,e){this.id=a;this.k=b;this.I=c;this.yj=d;this.me=e||k;this.Wg=[]}de.prototype.je=function(a){this.Wg.push(a);this.I&&(this.I.P&&this.I.N)&&(this.I.N.seek=k,this.I.N=k);U("/_seen",Fd(),"POST","media_id="+a.id+"&session_id="+this.id+"&async="+(this.I?this.I.P:l))};
de.prototype.end=function(a){this.me=a;a=(this.me.getTime()-this.yj.getTime())/1E3;if(this.k.id==T.a().h.id&&this.I){ee.a();var b=this.I,c=this.Wg.length;T.a().ff.length?_gaq.push(["_trackEvent","Users","SessionTimeWithFriends",T.a().h.id,Math.round(a)]):_gaq.push(["_trackEvent","Users","SessionTimeNoFriends",T.a().h.id,Math.round(a)]);_gaq.push(["_trackEvent","Users","SessionMediaCount",T.a().h.id,c]);_gaq.push(["_trackEvent","Users","Active",T.a().h.id,c]);_gaq.push(["_trackEvent","Users",b.id+
"-time",T.a().h.id,a]);_gaq.push(["_trackEvent","Users",b.id+"-medias",T.a().h.id,c]);b.P||(_gaq.push(["_trackEvent","Channel","SessionTime",b.id,a]),_gaq.push(["_trackEvent","Channel","SessionMediaCount",b.id,c]))}};function fe(a){S.call(this);this.id=a.id;this.name=a.name;this.P=a.my_channel;this.Qa=a.current_media?Hd(Gd.a(),a.current_media):k;this.kk=a.current_seek;this.rb=[];this.fd={};this.N=a.current_program&&new Xd(a.current_program);this.zd=[];this.queue=[];this.Ga=0;this.sc=a.online!=i?a.online:k;this.subscribe(ge,this.ue,this);this.subscribe(he,this.Vh,this);this.subscribe(ie,this.ve,this);this.subscribe(je,this.Cj,this)}t(fe,S);m=fe.prototype;
m.ue=function(a){this.rb.push(a);this.fd[a.id]=a;a.time.getTime()+1E3*a.media.duration>this.Ga&&(this.Ga=a.time.getTime()+1E3*a.media.duration-12E4,ke(le.a(),this.Ga,r(this.Xe,this,this.Ga)),ke(le.a(),this.Ga+6E4,r(this.Xe,this,this.Ga+6E4)))};m.Xe=function(a){this.Ga<=a&&!this.P&&U("/_programming/"+this.id,r(function(a){a=V(a.target);a.length||ke(le.a(),s()+1E3,r(this.Xe,this,s()+1E3));v(a,function(a){if(!this.fd[a.id]){var b=this.fd[a.id];b||(b=new Xd(a),this.ue(b));this.c(ge,b)}},this)},this))};
m.Vh=function(a,b){b?(this.queue.push(a),vd.a().c(wd,"Added to queue",a.name,i,a.Cf,"#info:"+a.id),me(ee.a(),a),U("/_queue",Fd(),"POST","media_id="+a.id)):(Sa(this.queue,function(b){return b.id==a.id},this),U("/_queue",Fd(),"POST","media_id="+a.id+"&delete=1"))};m.ve=function(a){this.zd.push(a)};m.Cj=function(a){var b=a.id in this.fd?this.fd[a.id]:i;b&&(b.time=Ad(a.time+"Z"))};
m.Q=function(a){if(this.N&&this.N.async&&this.N.seek)return this.N;if(!this.rb.length)return k;var b=this.N;b||(b=this.rb[0],this.cc=0);if(a)return this.rb[this.cc+a];if(!this.P&&s()>=b.time.getTime()&&s()<b.time.getTime()+1E3*b.media.duration)return this.N=b;for(;s()>b.time.getTime()&&s()>=b.time.getTime()+1E3*b.media.duration;){this.N||(this.N=this.rb[0],this.cc=0);this.rb.length>=this.cc+1?(this.cc++,a=this.rb[this.cc],a=this.N=this.P?a&&a.seek?a:k:this.rb[this.cc]):a=k;if(this.P){if(a&&a.async&&
a.seek)return this.N=a;if(!a)if(this.queue.length){a=this.queue[0];this.c(he,a,l);var c=Yd(a);ne().c(ge,c);U("/_addprogram",Fd(),"POST","channel_id="+W.a().P.id+"&media_id="+a.id+"&now=true");a=c}else a=k}if(!a)break;b=a}return s()>=b.time.getTime()&&s()<b.time.getTime()+1E3*b.media.duration?this.N=b:k};var ge="add-program",he="add-queue",ie="add-viewer",je="update-program";function T(){S.call(this);this.Oh={};this.qg=l;this.Ke=[];this.ff=[];this.subscribe(oe,function(a,b){a.sc=b},this)}t(T,S);ja(T);T.prototype.add=function(a){this.Oh[a.id]=a};T.prototype.get=function(a){return this.Oh[a]};function pe(a,b){var c=a.get(b.id);c||(c=new Zd(b),a.add(c));c.sc=b.online;c.Qa=c.Qa||b.last_seen;return c}var oe="online";function qe(a,b){K.call(this);this.la=a||1;this.rd=b||re;this.ye=r(this.tj,this);this.Ve=s()}t(qe,Rc);qe.prototype.enabled=l;var re=n.window;m=qe.prototype;m.Xb=k;m.tj=function(){if(this.enabled){var a=s()-this.Ve;0<a&&a<0.8*this.la?this.Xb=this.rd.setTimeout(this.ye,this.la-a):(this.dispatchEvent(se),this.enabled&&(this.Xb=this.rd.setTimeout(this.ye,this.la),this.Ve=s()))}};m.start=function(){this.enabled=j;this.Xb||(this.Xb=this.rd.setTimeout(this.ye,this.la),this.Ve=s())};
m.stop=function(){this.enabled=l;this.Xb&&(this.rd.clearTimeout(this.Xb),this.Xb=k)};m.o=function(){qe.e.o.call(this);this.stop();delete this.rd};var se="tick";function R(a,b,c){oa(a)?c&&(a=r(a,c)):a&&"function"==typeof a.handleEvent?a=r(a.handleEvent,a):f(Error("Invalid listener argument"));return 2147483647<b?-1:re.setTimeout(a,b||0)};function te(a){if("function"==typeof a.Ld)return a.Ld();if(p(a))return a.split("");if(ma(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return Eb(a)}function ue(a,b,c){if("function"==typeof a.forEach)a.forEach(b,c);else if(ma(a)||p(a))v(a,b,c);else{var d;if("function"==typeof a.Le)d=a.Le();else if("function"!=typeof a.Ld)if(ma(a)||p(a)){d=[];for(var e=a.length,g=0;g<e;g++)d.push(g)}else d=Fb(a);else d=i;for(var e=te(a),g=e.length,h=0;h<g;h++)b.call(c,e[h],d&&d[h],a)}};function ve(a,b){this.Mb={};this.L=[];var c=arguments.length;if(1<c){c%2&&f(Error("Uneven number of arguments"));for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else if(a){a instanceof ve?(c=a.Le(),d=a.Ld()):(c=Fb(a),d=Eb(a));for(var e=0;e<c.length;e++)this.set(c[e],d[e])}}m=ve.prototype;m.M=0;m.Ej=0;m.Ld=function(){we(this);for(var a=[],b=0;b<this.L.length;b++)a.push(this.Mb[this.L[b]]);return a};m.Le=function(){we(this);return this.L.concat()};
function we(a){if(a.M!=a.L.length){for(var b=0,c=0;b<a.L.length;){var d=a.L[b];Object.prototype.hasOwnProperty.call(a.Mb,d)&&(a.L[c++]=d);b++}a.L.length=c}if(a.M!=a.L.length){for(var e={},c=b=0;b<a.L.length;)d=a.L[b],Object.prototype.hasOwnProperty.call(e,d)||(a.L[c++]=d,e[d]=1),b++;a.L.length=c}}m.get=function(a,b){return Object.prototype.hasOwnProperty.call(this.Mb,a)?this.Mb[a]:b};
m.set=function(a,b){Object.prototype.hasOwnProperty.call(this.Mb,a)||(this.M++,this.L.push(a),this.Ej++);this.Mb[a]=b};m.clone=function(){return new ve(this)};function xe(a){return ye(a||arguments.callee.caller,[])}
function ye(a,b){var c=[];if(Qa(b,a))c.push("[...circular reference...]");else if(a&&50>b.length){c.push(ze(a)+"(");for(var d=a.arguments,e=0;e<d.length;e++){0<e&&c.push(", ");var g;g=d[e];switch(typeof g){case "object":g=g?"object":"null";break;case "string":break;case "number":g=String(g);break;case "boolean":g=g?"true":"false";break;case "function":g=(g=ze(g))?g:"[fn]";break;default:g=typeof g}40<g.length&&(g=g.substr(0,40)+"...");c.push(g)}b.push(a);c.push(")\n");try{c.push(ye(a.caller,b))}catch(h){c.push("[exception trying to get caller]\n")}}else a?
c.push("[...long stack...]"):c.push("[end]");return c.join("")}function ze(a){if(Ae[a])return Ae[a];a=String(a);if(!Ae[a]){var b=/function ([^\(]+)/.exec(a);Ae[a]=b?b[1]:"[Anonymous]"}return Ae[a]}var Ae={};function Be(a,b,c,d,e){this.reset(a,b,c,d,e)}Be.prototype.kj=0;Be.prototype.hg=k;Be.prototype.gg=k;var Ce=0;Be.prototype.reset=function(a,b,c,d,e){this.kj="number"==typeof e?e:Ce++;this.Gk=d||s();this.Yc=a;this.Hi=b;this.vk=c;delete this.hg;delete this.gg};Be.prototype.th=ba("Yc");function De(a){this.Ii=a}De.prototype.C=k;De.prototype.Yc=k;De.prototype.S=k;De.prototype.zg=k;function Ee(a,b){this.name=a;this.value=b}Ee.prototype.toString=ca("name");var Fe=new Ee("SEVERE",1E3),Ge=new Ee("WARNING",900),He=new Ee("INFO",800),Ie=new Ee("CONFIG",700),Je=new Ee("FINE",500);m=De.prototype;m.getParent=ca("C");m.rg=function(){this.S||(this.S={});return this.S};m.th=ba("Yc");function Ke(a){return a.Yc?a.Yc:a.C?Ke(a.C):k}
m.log=function(a,b,c){if(a.value>=Ke(this).value){a=this.ni(a,b,c);b="log:"+a.Hi;n.console&&(n.console.timeStamp?n.console.timeStamp(b):n.console.markTimeline&&n.console.markTimeline(b));n.msWriteProfilerMark&&n.msWriteProfilerMark(b);for(b=this;b;){var c=b,d=a;if(c.zg)for(var e=0,g=i;g=c.zg[e];e++)g(d);b=b.getParent()}}};
m.ni=function(a,b,c){var d=new Be(a,String(b),this.Ii);if(c){d.hg=c;var e;var g=arguments.callee.caller;try{var h;var q=ha("window.location.href");if(p(c))h={message:c,name:"Unknown error",lineNumber:"Not available",fileName:q,stack:"Not available"};else{var u,B,I=l;try{u=c.lineNumber||c.uk||"Not available"}catch(P){u="Not available",I=j}try{B=c.fileName||c.filename||c.sourceURL||q}catch(mb){B="Not available",I=j}h=I||!c.lineNumber||!c.fileName||!c.stack?{message:c.message,name:c.name,lineNumber:u,
fileName:B,stack:c.stack||"Not available"}:c}e="Message: "+za(h.message)+'\nUrl: <a href="view-source:'+h.fileName+'" target="_new">'+h.fileName+"</a>\nLine: "+h.lineNumber+"\n\nBrowser stack:\n"+za(h.stack+"-> ")+"[end]\n\nJS stack traversal:\n"+za(xe(g)+"-> ")}catch(Ia){e="Exception trying to expose exception! You win, we lose. "+Ia}d.gg=e}return d};function Le(a,b){a.log(Fe,b,i)}m.info=function(a,b){this.log(He,a,b)};function Me(a,b){a.log(Je,b,i)}var Ne={},Oe=k;
function Pe(a){Oe||(Oe=new De(""),Ne[""]=Oe,Oe.th(Ie));var b;if(!(b=Ne[a])){b=new De(a);var c=a.lastIndexOf("."),d=a.substr(c+1),c=Pe(a.substr(0,c));c.rg()[d]=b;b.C=c;Ne[a]=b}return b};function Qe(a){a=String(a);if(/^\s*$/.test(a)?0:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x10-\x1f\x80-\x9f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,"")))try{return eval("("+a+")")}catch(b){}f(Error("Invalid JSON string: "+a))};function Re(){}Re.prototype.Cd=k;var Se;function Te(){}t(Te,Re);function Ue(a){return(a=Ve(a))?new ActiveXObject(a):new XMLHttpRequest}function We(a){var b={};Ve(a)&&(b[0]=j,b[1]=j);return b}
function Ve(a){if(!a.Dg&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var b=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],c=0;c<b.length;c++){var d=b[c];try{return new ActiveXObject(d),a.Dg=d}catch(e){}}f(Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed"))}return a.Dg}Se=new Te;var Xe=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([\\w\\d\\-\\u0100-\\uffff.%]*)(?::([0-9]+))?)?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");function Ye(a){K.call(this);this.headers=new ve;this.Ec=a||k}t(Ye,Rc);Ye.prototype.t=Pe("goog.net.XhrIo");var Ze=/^https?$/i,$e=[];function U(a,b,c,d){var e=new Ye;$e.push(e);b&&L(e,"complete",b);L(e,"ready",va(af,e));e.send(a,c,d,i)}function af(a){a.ea();Ra($e,a)}m=Ye.prototype;m.ab=l;m.q=k;m.qe=k;m.Xc="";m.Pg="";m.Vc=0;m.Wc="";m.He=l;m.Pd=l;m.Qe=l;m.Hb=l;m.le=0;m.Wb=k;m.ge="";m.Hj=l;
m.send=function(a,b,c,d){this.q&&f(Error("[goog.net.XhrIo] Object is active with another request"));b=b?b.toUpperCase():"GET";this.Xc=a;this.Wc="";this.Vc=0;this.Pg=b;this.He=l;this.ab=j;this.q=this.Ec?Ue(this.Ec):Ue(Se);this.qe=this.Ec?this.Ec.Cd||(this.Ec.Cd=We(this.Ec)):Se.Cd||(Se.Cd=We(Se));this.q.onreadystatechange=r(this.jh,this);try{Me(this.t,bf(this,"Opening Xhr")),this.Qe=j,this.q.open(b,a,j),this.Qe=l}catch(e){Me(this.t,bf(this,"Error opening Xhr: "+e.message));cf(this,e);return}var a=c||
"",g=this.headers.clone();d&&ue(d,function(a,b){g.set(b,a)});d=n.FormData&&a instanceof n.FormData;if(b="POST"==b)b=!Object.prototype.hasOwnProperty.call(g.Mb,"Content-Type")&&!d;b&&g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");ue(g,function(a,b){this.q.setRequestHeader(b,a)},this);this.ge&&(this.q.responseType=this.ge);"withCredentials"in this.q&&(this.q.withCredentials=this.Hj);try{this.Wb&&(re.clearTimeout(this.Wb),this.Wb=k),0<this.le&&(Me(this.t,bf(this,"Will abort after "+
this.le+"ms if incomplete")),this.Wb=re.setTimeout(r(this.uj,this),this.le)),Me(this.t,bf(this,"Sending request")),this.Pd=j,this.q.send(a),this.Pd=l}catch(h){Me(this.t,bf(this,"Send error: "+h.message)),cf(this,h)}};m.uj=function(){"undefined"!=typeof ea&&this.q&&(this.Wc="Timed out after "+this.le+"ms, aborting",this.Vc=8,Me(this.t,bf(this,this.Wc)),this.dispatchEvent("timeout"),this.abort(8))};function cf(a,b){a.ab=l;a.q&&(a.Hb=j,a.q.abort(),a.Hb=l);a.Wc=b;a.Vc=5;df(a);ef(a)}
function df(a){a.He||(a.He=j,a.dispatchEvent("complete"),a.dispatchEvent("error"))}m.abort=function(a){this.q&&this.ab&&(Me(this.t,bf(this,"Aborting")),this.ab=l,this.Hb=j,this.q.abort(),this.Hb=l,this.Vc=a||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),ef(this))};m.o=function(){this.q&&(this.ab&&(this.ab=l,this.Hb=j,this.q.abort(),this.Hb=l),ef(this,j));Ye.e.o.call(this)};m.jh=function(){!this.Qe&&!this.Pd&&!this.Hb?this.Ti():ff(this)};m.Ti=function(){ff(this)};
function ff(a){if(a.ab&&"undefined"!=typeof ea)if(a.qe[1]&&4==gf(a)&&2==hf(a))Me(a.t,bf(a,"Local request error detected and ignored"));else if(a.Pd&&4==gf(a))re.setTimeout(r(a.jh,a),0);else if(a.dispatchEvent("readystatechange"),4==gf(a)){Me(a.t,bf(a,"Request complete"));a.ab=l;try{var b=hf(a),c,d;a:switch(b){case 200:case 201:case 202:case 204:case 304:case 1223:d=j;break a;default:d=l}if(!(c=d)){var e;if(e=0===b){var g=String(a.Xc).match(Xe)[1]||k;if(!g&&self.location)var h=self.location.protocol,
g=h.substr(0,h.length-1);e=!Ze.test(g?g.toLowerCase():"")}c=e}if(c)a.dispatchEvent("complete"),a.dispatchEvent("success");else{a.Vc=6;var q;try{q=2<gf(a)?a.q.statusText:""}catch(u){Me(a.t,"Can not get status: "+u.message),q=""}a.Wc=q+" ["+hf(a)+"]";df(a)}}finally{ef(a)}}}
function ef(a,b){if(a.q){var c=a.q,d=a.qe[0]?ia:k;a.q=k;a.qe=k;a.Wb&&(re.clearTimeout(a.Wb),a.Wb=k);b||a.dispatchEvent("ready");try{c.onreadystatechange=d}catch(e){Le(a.t,"Problem encountered resetting onreadystatechange: "+e.message)}}}m.hb=function(){return!!this.q};function gf(a){return a.q?a.q.readyState:0}function hf(a){try{return 2<gf(a)?a.q.status:-1}catch(b){return a.t.log(Ge,"Can not get status: "+b.message,i),-1}}function V(a){if(a.q)return Qe(a.q.responseText)}
function jf(a){try{if(!a.q)return k;if("response"in a.q)return a.q.response;switch(a.ge){case "":case "text":return a.q.responseText;case "arraybuffer":if("mozResponseArrayBuffer"in a.q)return a.q.mozResponseArrayBuffer}Le(a.t,"Response type "+a.ge+" is not supported on this browser");return k}catch(b){return Me(a.t,"Can not get response: "+b.message),k}}function bf(a,b){return b+" ["+a.Pg+" "+a.Xc+" "+hf(a)+"]"};function W(){S.call(this);this.Kc=[];this.ac={};this.subscribe(kf,this.Ic,this);this.subscribe(lf,this.Jf,this)}t(W,S);ja(W);m=W.prototype;m.get=function(a){return this.ac[a]};function mf(a){if(a.D&&a.D.Q())return a.D;if(a.Td&&a.Td.Q())return a.Td;for(var b=k,c=k,d=0;!c&&d<a.Kc.length;)c=(b=!a.Kc[d].P?a.Kc[d]:k)&&b.Q(),d++;return b}m.We=function(a){Db(a,r(function(a){this.se(a)},this))};m.se=function(a){var b=new fe(a);this.Kc.push(b);this.ac[a.id]=b;b.P&&(this.P=b);this.c(nf,b);return b};
m.Ic=function(a,b){if(a&&!this.D||a&&this.D&&this.D.id!=a.id){this.Td=this.D;this.D=a;this.Jf(a.Q());var c=a.Q(),c=c&&!Gb(c.media.qb);U("/_changechannel",Fd(),"POST","channel="+a.id+"&friends="+c+(b?"&forced=true":""));ee.a().Ic(a,this.Td)}};m.Jf=function(a){this.D&&(this.r&&v(this.D.zd,function(a){Hb(this.r.media.qb,a.k.id)},this),a&&(this.r=a,v(this.D.zd,function(b){b.me||(a.media.qb[b.k.id]=b.k)})))};
function ne(){var a=W.a();if(!a.P){var b=T.a().h;a.P=new fe({id:b.id,name:b.name.split(" ")[0]+"'s Channel"})}return a.P}var kf="change-channel",lf="next-program",nf="add-channel";function X(){S.call(this);this.subscribe(of,function(a){ne().c(ge,a);U("/_addprogram",Fd(),"POST","channel_id="+W.a().P.id+"&media_id="+a.media.id+"&async=true");me(ee.a(),a.media)},this);this.subscribe(pf,function(a){U("/_started",Fd(),"POST","media_id="+a.id)},this)}t(X,S);ja(X);X.prototype.Q=ca("r");X.prototype.getCurrentTime=function(){return this.p&&this.p.getCurrentTime?this.p.getCurrentTime():0};X.prototype.sg=function(){return this.p&&this.p.getCurrentTime?this.p.getCurrentTime():0};
var of="play-async",pf="playing";function qf(){K.call(this);this.l=rf;this.Qc=this.startTime=k}t(qf,Rc);var rf=0;qf.prototype.ob=function(){this.da("begin")};qf.prototype.pb=function(){this.da("end")};qf.prototype.da=function(a){this.dispatchEvent(a)};function sf(){qf.call(this);this.queue=[]}t(sf,qf);sf.prototype.add=function(a){Qa(this.queue,a)||(this.queue.push(a),L(a,"finish",this.Ki,l,this))};sf.prototype.o=function(){v(this.queue,function(a){a.ea()});this.queue.length=0;sf.e.o.call(this)};function tf(){sf.call(this);this.ta=0}t(tf,sf);
tf.prototype.play=function(a){if(0==this.queue.length)return l;if(a||this.l==rf)this.ta<this.queue.length&&this.queue[this.ta].l!=rf&&this.queue[this.ta].stop(l),this.ta=0,this.ob();else if(1==this.l)return l;this.da("play");-1==this.l&&this.da("resume");this.startTime=s();this.Qc=k;this.l=1;this.queue[this.ta].play(a);return j};
tf.prototype.stop=function(a){this.l=rf;this.Qc=s();if(a)for(a=this.ta;a<this.queue.length;++a){var b=this.queue[a];b.l==rf&&b.play();b.l==rf||b.stop(j)}else this.ta<this.queue.length&&this.queue[this.ta].stop(l);this.da("stop");this.pb()};tf.prototype.Ki=function(){1==this.l&&(this.ta++,this.ta<this.queue.length?this.queue[this.ta].play():(this.Qc=s(),this.l=rf,this.da("finish"),this.pb()))};function uf(a,b,c){K.call(this);this.nc=a;this.la=b||0;this.gb=c;this.Zh=r(this.ei,this)}t(uf,K);m=uf.prototype;m.aa=0;m.o=function(){uf.e.o.call(this);this.stop();delete this.nc;delete this.gb};m.start=function(a){this.stop();this.aa=R(this.Zh,ga(a)?a:this.la)};m.stop=function(){this.hb()&&re.clearTimeout(this.aa);this.aa=0};m.hb=function(){return 0!=this.aa};m.ei=function(){this.aa=0;this.nc&&this.nc.call(this.gb)};var Fd;Fd=da(k);var vf={},wf=k;function xf(a){a=qa(a);delete vf[a];Gb(vf)&&wf&&wf.stop()}function yf(){wf||(wf=new uf(function(){var a=s();Db(vf,function(c){zf(c,a)});Gb(vf)||yf()},20));var a=wf;a.hb()||a.start()};function Af(a,b,c,d){qf.call(this);(!la(a)||!la(b))&&f(Error("Start and end parameters must be arrays"));a.length!=b.length&&f(Error("Start and end points must be the same length"));this.od=a;this.hi=b;this.duration=c;this.Mf=d;this.coords=[];this.yd=l}t(Af,qf);m=Af.prototype;m.ng=0;m.na=0;m.Ue=k;
m.play=function(a){if(a||this.l==rf)this.na=0,this.coords=this.od;else if(1==this.l)return l;xf(this);this.startTime=a=s();-1==this.l&&(this.startTime-=this.duration*this.na);this.Qc=this.startTime+this.duration;this.Ue=this.startTime;this.na||this.ob();this.da("play");-1==this.l&&this.da("resume");this.l=1;var b=qa(this);b in vf||(vf[b]=this);yf();zf(this,a);return j};m.stop=function(a){xf(this);this.l=rf;a&&(this.na=1);Bf(this,this.na);this.da("stop");this.pb()};m.sg=ca("na");
m.o=function(){this.l==rf||this.stop(l);this.da("destroy");Af.e.o.call(this)};function zf(a,b){a.na=(b-a.startTime)/(a.Qc-a.startTime);1<=a.na&&(a.na=1);a.ng=1E3/(b-a.Ue);a.Ue=b;Bf(a,a.na);1==a.na?(a.l=rf,xf(a),a.da("finish"),a.pb()):1==a.l&&a.bf()}function Bf(a,b){oa(a.Mf)&&(b=a.Mf(b));a.coords=Array(a.od.length);for(var c=0;c<a.od.length;c++)a.coords[c]=(a.hi[c]-a.od[c])*b+a.od[c]}m.bf=function(){this.da("animate")};m.da=function(a){this.dispatchEvent(new Cf(a,this))};
function Cf(a,b){uc.call(this,a);this.coords=b.coords;this.x=b.coords[0];this.y=b.coords[1];this.Lk=b.coords[2];this.duration=b.duration;this.na=b.sg();this.tk=b.ng;this.state=b.l;this.dk=b}t(Cf,uc);function Df(a,b,c,d,e){Af.call(this,b,c,d,e);this.element=a}t(Df,Af);m=Df.prototype;m.xd=ia;m.Kg=function(){ga(this.za)||(this.za=gd(this.element));return this.za};m.bf=function(){this.xd();Df.e.bf.call(this)};m.pb=function(){this.xd();Df.e.pb.call(this)};m.ob=function(){this.xd();Df.e.ob.call(this)};function Ef(a,b,c,d,e){(2!=b.length||2!=c.length)&&f(Error("Start and end points must be 2D"));Df.apply(this,arguments)}t(Ef,Df);
Ef.prototype.xd=function(){if(this.yd){var a=this.element,b=Math.round(this.coords[0]),b=Math.max(b,0);a.scrollLeft=gd(a)?eb?-b:!w||!rb("8")?a.scrollWidth-b-a.clientWidth:b:b}else this.element.scrollLeft=Math.round(this.coords[0]);this.element.scrollTop=Math.round(this.coords[1])};function Ff(a,b,c,d,e){na(b)&&(b=[b]);na(c)&&(c=[c]);Df.call(this,a,b,c,d,e);(1!=b.length||1!=c.length)&&f(Error("Start and end points must be 1D"))}t(Ff,Df);Ff.prototype.xd=function(){fd(this.element,this.coords[0])};
Ff.prototype.show=function(){this.element.style.display=""};Ff.prototype.hide=function(){this.element.style.display="none"};function Gf(a,b,c){Ff.call(this,a,1,0,b,c)}t(Gf,Ff);Gf.prototype.ob=function(){this.show();Gf.e.ob.call(this)};Gf.prototype.pb=function(){this.hide();Gf.e.pb.call(this)};function Hf(a,b,c){Ff.call(this,a,0,1,b,c)}t(Hf,Ff);Hf.prototype.ob=function(){this.show();Hf.e.ob.call(this)};function If(a){return a*a*a}function Jf(a){return 1-Math.pow(1-a,3)};function Kf(a,b,c,d,e){if(!w&&(!fb||!rb("525")))return j;if(hb&&e)return Lf(a);if(e&&!d||!c&&(17==b||18==b)||w&&d&&b==a)return l;switch(a){case 13:return!(w&&tb(9));case 27:return!fb}return Lf(a)}function Lf(a){if(48<=a&&57>=a||96<=a&&106>=a||65<=a&&90>=a||fb&&0==a)return j;switch(a){case 32:case 63:case 107:case 109:case 110:case 111:case 186:case 59:case 189:case 187:case 61:case 188:case 190:case 191:case 192:case 222:case 219:case 220:case 221:return j;default:return l}}
function Mf(a){switch(a){case 61:return 187;case 59:return 186;case 224:return 91;case 0:return 224;default:return a}};function Nf(){}var Of;ja(Nf);m=Nf.prototype;m.hc=aa();m.J=function(a){var b=a.Fa().J("div",Pf(this,a).join(" "),a.Da);Qf(this,a,b);return b};m.Gb=function(a){return a};m.Pc=function(a,b,c){if(a=a.b?a.b():a)if(w&&!rb("7")){var d=Rf(zb(a),b);d.push(b);va(c?x:y,a).apply(k,d)}else A(a,b,c)};m.wb=da(j);
m.i=function(a,b){if(b.id){var c=b.id;a.C&&a.C.U&&(Hb(a.C.U,a.aa),Ib(a.C.U,c,a));a.aa=c}(c=this.Gb(b))&&c.firstChild?(c=c.firstChild.nextSibling?Ta(c.childNodes):c.firstChild,a.Da=c):a.Da=k;var d=0,e=this.$(),g=this.$(),h=l,q=l,c=l,u=zb(b);v(u,function(a){if(!h&&a==e)h=j,g==e&&(q=j);else if(!q&&a==g)q=j;else{var b=d;if(!this.Ch){this.Ed||Sf(this);var c=this.Ed,u={},B;for(B in c)u[c[B]]=B;this.Ch=u}a=parseInt(this.Ch[a],10);d=b|(isNaN(a)?0:a)}},this);a.l=d;h||(u.push(e),g==e&&(q=j));q||u.push(g);var B=
a.wa;B&&u.push.apply(u,B);if(w&&!rb("7")){var I=Rf(u);0<I.length&&(u.push.apply(u,I),c=j)}if(!h||!q||B||c)b.className=u.join(" ");Qf(this,a,b);return b};m.Fg=function(a){a.Kg()&&this.Ub(a.b(),j);a.isEnabled()&&this.zc(a,a.ub)};function Qf(a,b,c){b.isEnabled()||a.Aa(c,1,j);Tf(b,8)&&a.Aa(c,8,j);b.Y&16&&a.Aa(c,16,Tf(b,16));b.Y&64&&a.Aa(c,64,Tf(b,64))}
m.xc=function(a,b){var c=!b,d=w||db?a.getElementsByTagName("*"):k;if(hd){if(c=c?"none":"",a.style[hd]=c,d)for(var e=0,g;g=d[e];e++)g.style[hd]=c}else if(w||db)if(c=c?"on":"",a.setAttribute("unselectable",c),d)for(e=0;g=d[e];e++)g.setAttribute("unselectable",c)};m.Ub=function(a,b){this.Pc(a,this.$()+"-rtl",b)};m.Se=function(a){var b;return a.Y&32&&(b=a.fb())?bc(b):l};
m.zc=function(a,b){var c;if(a.Y&32&&(c=a.fb())){if(!b&&a.Qd()){try{c.blur()}catch(d){}a.Qd()&&a.tg()}bc(c)!=b&&(b?c.tabIndex=0:(c.tabIndex=-1,c.removeAttribute("tabIndex")))}};m.wf=function(a,b){O(a,b)};m.ca=function(a,b,c){var d=a.b();if(d){var e=Uf(this,b);e&&this.Pc(a,e,c);this.Aa(d,b,c)}};m.Aa=function(a,b,c){Of||(Of={1:"disabled",8:"selected",16:"checked",64:"expanded"});(b=Of[b])&&a.setAttribute("aria-"+b,c)};
m.Tb=function(a,b){var c=this.Gb(a);if(c&&(Tb(c),b))if(p(b))Zb(c,b);else{var d=function(a){if(a){var b=Nb(c);c.appendChild(p(a)?b.createTextNode(a):a)}};la(b)?v(b,d):ma(b)&&!("nodeType"in b)?v(Ta(b),d):d(b)}};m.fb=function(a){return a.b()};m.$=da("goog-control");function Pf(a,b){var c=a.$(),d=[c],e=a.$();e!=c&&d.push(e);c=b.l;for(e=[];c;){var g=c&-c;e.push(Uf(a,g));c&=~g}d.push.apply(d,e);(c=b.wa)&&d.push.apply(d,c);w&&!rb("7")&&d.push.apply(d,Rf(d));return d}
function Rf(a,b){var c=[];b&&(a=a.concat([b]));v([],function(d){Na(d,va(Qa,a))&&(!b||Qa(d,b))&&c.push(d.join("_"))});return c}function Uf(a,b){a.Ed||Sf(a);return a.Ed[b]}function Sf(a){var b=a.$();a.Ed={1:b+"-disabled",2:b+"-hover",4:b+"-active",8:b+"-selected",16:b+"-checked",32:b+"-focused",64:b+"-open"}};function Vf(){}t(Vf,Nf);ja(Vf);m=Vf.prototype;m.hc=da("button");m.Aa=function(a,b,c){16==b?a.setAttribute("aria-pressed",c):Vf.e.Aa.call(this,a,b,c)};m.J=function(a){var b=Vf.e.J.call(this,a),c=a.Tc();c&&this.vf(b,c);(c=a.B())&&this.Ia(b,c);a.Y&16&&this.Aa(b,16,Tf(a,16));return b};m.i=function(a,b){var b=Vf.e.i.call(this,a,b),c=this.B(b);a.Kf=c;a.Ef=this.Tc(b);a.Y&16&&this.Aa(b,16,Tf(a,16));return b};m.B=ia;m.Ia=ia;m.Tc=function(a){return a.title};m.vf=function(a,b){a&&(a.title=b||"")};m.$=da("goog-button");function Wf(a,b){K.call(this);a&&Xf(this,a,b)}t(Wf,Rc);m=Wf.prototype;m.g=k;m.Rd=k;m.Te=k;m.Sd=k;m.jb=-1;m.ib=-1;m.xe=l;
var Yf={3:13,12:144,63232:38,63233:40,63234:37,63235:39,63236:112,63237:113,63238:114,63239:115,63240:116,63241:117,63242:118,63243:119,63244:120,63245:121,63246:122,63247:123,63248:44,63272:46,63273:36,63275:35,63276:33,63277:34,63289:144,63302:45},Zf={Up:38,Down:40,Left:37,Right:39,Enter:13,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"U+007F":46,Home:36,End:35,PageUp:33,PageDown:34,Insert:45},$f=w||fb&&rb("525"),ag=hb&&eb;m=Wf.prototype;
m.qi=function(a){if(fb&&(17==this.jb&&!a.ctrlKey||18==this.jb&&!a.altKey))this.ib=this.jb=-1;$f&&!Kf(a.keyCode,this.jb,a.shiftKey,a.ctrlKey,a.altKey)?this.handleEvent(a):(this.ib=eb?Mf(a.keyCode):a.keyCode,ag&&(this.xe=a.altKey))};m.si=function(a){this.ib=this.jb=-1;this.xe=a.altKey};
m.handleEvent=function(a){var b=a.va,c,d,e=b.altKey;w&&"keypress"==a.type?(c=this.ib,d=13!=c&&27!=c?b.keyCode:0):fb&&"keypress"==a.type?(c=this.ib,d=0<=b.charCode&&63232>b.charCode&&Lf(c)?b.charCode:0):db?(c=this.ib,d=Lf(c)?b.keyCode:0):(c=b.keyCode||this.ib,d=b.charCode||0,ag&&(e=this.xe),hb&&(63==d&&224==c)&&(c=191));var g=c,h=b.keyIdentifier;c?63232<=c&&c in Yf?g=Yf[c]:25==c&&a.shiftKey&&(g=9):h&&h in Zf&&(g=Zf[h]);a=g==this.jb;this.jb=g;b=new bg(g,d,a,b);b.altKey=e;this.dispatchEvent(b)};
m.b=ca("g");function Xf(a,b,c){a.Sd&&a.detach();a.g=b;a.Rd=L(a.g,"keypress",a,c);a.Te=L(a.g,"keydown",a.qi,c,a);a.Sd=L(a.g,"keyup",a.si,c,a)}m.detach=function(){this.Rd&&(Jc(this.Rd),Jc(this.Te),Jc(this.Sd),this.Sd=this.Te=this.Rd=k);this.g=k;this.ib=this.jb=-1};m.o=function(){Wf.e.o.call(this);this.detach()};function bg(a,b,c,d){d&&this.init(d,i);this.type="key";this.keyCode=a;this.charCode=b;this.repeat=c}t(bg,xc);function cg(a,b){a||f(Error("Invalid class name "+a));oa(b)||f(Error("Invalid decorator function "+b))}var dg={};function eg(a,b,c){Q.call(this,c);if(!b){for(var b=this.constructor,d;b;){d=qa(b);if(d=dg[d])break;b=b.e?b.e.constructor:k}b=d?oa(d.a)?d.a():new d:k}this.A=b;this.Da=a}t(eg,Q);m=eg.prototype;m.Da=k;m.l=0;m.Y=39;m.Pa=255;m.qj=0;m.ub=j;m.wa=k;m.Oe=j;m.Bd=l;m.oh=k;function fg(a){a.O&&l!=a.Oe&&gg(a,l);a.Oe=l}m.fb=function(){return this.A.fb(this)};
m.Pc=function(a,b){b?a&&(this.wa?Qa(this.wa,a)||this.wa.push(a):this.wa=[a],this.A.Pc(this,a,j)):a&&this.wa&&(Ra(this.wa,a),0==this.wa.length&&(this.wa=k),this.A.Pc(this,a,l))};m.J=function(){var a=this.A.J(this);this.g=a;var b=this.oh||this.A.hc();b&&a.setAttribute("role",b);this.Bd||this.A.xc(a,l);this.ub||this.A.wf(a,l)};m.Gb=function(){return this.A.Gb(this.b())};m.wb=function(a){return this.A.wb(a)};
m.v=function(a){this.g=a=this.A.i(this,a);var b=this.oh||this.A.hc();b&&a.setAttribute("role",b);this.Bd||this.A.xc(a,l);this.ub="none"!=a.style.display};m.w=function(){eg.e.w.call(this);this.A.Fg(this);if(this.Y&-2&&(this.Oe&&gg(this,j),this.Y&32)){var a=this.fb();if(a){var b=this.lc||(this.lc=new Wf);Xf(b,a);M(M(M(this.j(),b,"key",this.ri),a,"focus",this.pi),a,"blur",this.tg)}}};
function gg(a,b){var c=a.j(),d=a.b();b?(M(M(M(M(c,d,"mouseover",a.xg),d,"mousedown",a.vg),d,"mouseup",a.yg),d,"mouseout",a.wg),a.Nd!=ia&&M(c,d,"contextmenu",a.Nd),w&&M(c,d,"dblclick",a.ug)):(Pc(Pc(Pc(Pc(c,d,"mouseover",a.xg),d,"mousedown",a.vg),d,"mouseup",a.yg),d,"mouseout",a.wg),a.Nd!=ia&&Pc(c,d,"contextmenu",a.Nd),w&&Pc(c,d,"dblclick",a.ug))}m.Rc=function(){eg.e.Rc.call(this);this.lc&&this.lc.detach();this.ub&&this.isEnabled()&&this.A.zc(this,l)};
m.o=function(){eg.e.o.call(this);this.lc&&(this.lc.ea(),delete this.lc);delete this.A;this.wa=this.Da=k};m.Tb=function(a){this.A.Tb(this.b(),a);this.Da=a};function hg(a){a=a.Da;return!a?"":(p(a)?a:la(a)?Ma(a,ec).join(""):cc(a)).replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")}m.Ub=function(a){eg.e.Ub.call(this,a);var b=this.b();b&&this.A.Ub(b,a)};m.xc=function(a){this.Bd=a;var b=this.b();b&&this.A.xc(b,a)};
m.wf=function(a,b){if(b||this.ub!=a&&this.dispatchEvent(a?"show":"hide")){var c=this.b();c&&this.A.wf(c,a);this.isEnabled()&&this.A.zc(this,a);this.ub=a;return j}return l};m.isEnabled=function(){return!Tf(this,1)};m.yc=function(a){var b=this.getParent();if((!b||"function"!=typeof b.isEnabled||b.isEnabled())&&ig(this,1,!a))a||(this.setActive(l),jg(this,l)),this.ub&&this.A.zc(this,a),this.ca(1,!a)};function jg(a,b){ig(a,2,b)&&a.ca(2,b)}m.hb=function(){return Tf(this,4)};
m.setActive=function(a){ig(this,4,a)&&this.ca(4,a)};function kg(a,b){ig(a,16,b)&&a.ca(16,b)}m.Qd=function(){return Tf(this,32)};m.ha=function(a){ig(this,32,a)&&this.ca(32,a)};function Tf(a,b){return!!(a.l&b)}m.ca=function(a,b){this.Y&a&&b!=Tf(this,a)&&(this.A.ca(this,a,b),this.l=b?this.l|a:this.l&~a)};function lg(a,b,c){a.O&&(Tf(a,b)&&!c)&&f(Error("Component already rendered"));!c&&Tf(a,b)&&a.ca(b,l);a.Y=c?a.Y|b:a.Y&~b}function mg(a,b){return!!(a.Pa&b)&&!!(a.Y&b)}
function ig(a,b,c){return!!(a.Y&b)&&Tf(a,b)!=c&&(!(a.qj&b)||a.dispatchEvent(pd(b,c)))&&!a.Hd}m.xg=function(a){(!a.relatedTarget||!Yb(this.b(),a.relatedTarget))&&(this.dispatchEvent("enter")&&this.isEnabled()&&mg(this,2))&&jg(this,j)};m.wg=function(a){if((!a.relatedTarget||!Yb(this.b(),a.relatedTarget))&&this.dispatchEvent("leave"))mg(this,4)&&this.setActive(l),mg(this,2)&&jg(this,l)};m.Nd=ia;
m.vg=function(a){this.isEnabled()&&(mg(this,2)&&jg(this,j),zc(a)&&(mg(this,4)&&this.setActive(j),this.A.Se(this)&&this.fb().focus()));!this.Bd&&zc(a)&&a.preventDefault()};m.yg=function(a){this.isEnabled()&&(mg(this,2)&&jg(this,j),this.hb()&&(this.cd(a)&&mg(this,4))&&this.setActive(l))};m.ug=function(a){this.isEnabled()&&this.cd(a)};
m.cd=function(a){mg(this,16)&&kg(this,!Tf(this,16));mg(this,8)&&ig(this,8,j)&&this.ca(8,j);if(mg(this,64)){var b=!Tf(this,64);ig(this,64,b)&&this.ca(64,b)}b=new uc("action",this);a&&(b.altKey=a.altKey,b.ctrlKey=a.ctrlKey,b.metaKey=a.metaKey,b.shiftKey=a.shiftKey,b.jf=a.jf);return this.dispatchEvent(b)};m.pi=function(){mg(this,32)&&this.ha(j)};m.tg=function(){mg(this,4)&&this.setActive(l);mg(this,32)&&this.ha(l)};
m.ri=function(a){return this.ub&&this.isEnabled()&&this.Ne(a)?(a.preventDefault(),a.stopPropagation(),j):l};m.Ne=function(a){return 13==a.keyCode&&this.cd(a)};oa(eg)||f(Error("Invalid component class "+eg));oa(Nf)||f(Error("Invalid renderer class "+Nf));var ng=qa(eg);dg[ng]=Nf;cg("goog-control",function(){return new eg(k)});function og(){}t(og,Vf);ja(og);m=og.prototype;m.hc=aa();m.J=function(a){fg(a);a.Pa&=-256;lg(a,32,l);return a.Fa().J("button",{"class":Pf(this,a).join(" "),disabled:!a.isEnabled(),title:a.Tc()||"",value:a.B()||""},hg(a)||"")};m.wb=function(a){return"BUTTON"==a.tagName||"INPUT"==a.tagName&&("button"==a.type||"submit"==a.type||"reset"==a.type)};m.i=function(a,b){fg(a);a.Pa&=-256;lg(a,32,l);b.disabled&&x(b,Uf(this,1));return og.e.i.call(this,a,b)};m.Fg=function(a){M(a.j(),a.b(),"click",a.cd)};m.xc=ia;
m.Ub=ia;m.Se=function(a){return a.isEnabled()};m.zc=ia;m.ca=function(a,b,c){og.e.ca.call(this,a,b,c);if((a=a.b())&&1==b)a.disabled=c};m.B=function(a){return a.value};m.Ia=function(a,b){a&&(a.value=b)};m.Aa=ia;function pg(a,b,c){eg.call(this,a,b||og.a(),c)}t(pg,eg);m=pg.prototype;m.B=ca("Kf");m.Ia=function(a){this.Kf=a;this.A.Ia(this.b(),a)};m.Tc=ca("Ef");m.vf=function(a){this.Ef=a;this.A.vf(this.b(),a)};m.o=function(){pg.e.o.call(this);delete this.Kf;delete this.Ef};m.w=function(){pg.e.w.call(this);if(this.Y&32){var a=this.fb();a&&M(this.j(),a,"keyup",this.Ne)}};m.Ne=function(a){return 13==a.keyCode&&"key"==a.type||32==a.keyCode&&"keyup"==a.type?this.cd(a):32==a.keyCode};cg("goog-button",function(){return new pg(k)});function qg(){}t(qg,Vf);ja(qg);m=qg.prototype;m.J=function(a){var b={"class":"goog-inline-block "+Pf(this,a).join(" "),title:a.Tc()||""},b=a.Fa().J("div",b,rg(this,a.Da,a.Fa()));Qf(this,a,b);return b};m.hc=da("button");m.Gb=function(a){return a&&a.firstChild.firstChild};function rg(a,b,c){return c.J("div","goog-inline-block "+(a.$()+"-outer-box"),c.J("div","goog-inline-block "+(a.$()+"-inner-box"),b))}m.wb=function(a){return"DIV"==a.tagName};
m.i=function(a,b){sg(b,j);sg(b,l);var c;a:{c=gc(a.Fa(),b);var d=this.$()+"-outer-box";if(c&&z(c,d)&&(c=gc(a.Fa(),c),d=this.$()+"-inner-box",c&&z(c,d))){c=j;break a}c=l}c||b.appendChild(rg(this,b.childNodes,a.Fa()));x(b,"goog-inline-block",this.$());return qg.e.i.call(this,a,b)};m.$=da("goog-custom-button");
function sg(a,b){if(a)for(var c=b?a.firstChild:a.lastChild,d;c&&c.parentNode==a;){d=b?c.nextSibling:c.previousSibling;if(3==c.nodeType){var e=c.nodeValue;if(""==ya(e))a.removeChild(c);else{c.nodeValue=b?e.replace(/^[\s\xa0]+/,""):e.replace(/[\s\xa0]+$/,"");break}}else break;c=d}};function tg(a,b,c){pg.call(this,a,b||qg.a(),c)}t(tg,pg);cg("goog-custom-button",function(){return new tg(k)});function ug(){Q.call(this)}t(ug,Q);m=ug.prototype;
m.w=function(){ug.e.w.call(this);(this.r=(this.Ee=W.a().D)&&this.Ee.Q())&&s();this.Fb=D("fullscreen",this.b());var a=D("expand",this.b());O(this.Fb,this.Dh());this.ld=C("stagecover");this.Yg=D("message",this.ld);this.s=D("spinner",this.ld);this.hd=D("restart",this.ld);this.Lf=D("vote",this.b());this.Lb=D("like",this.b());this.zb=D("dislike",this.b());var b=new Wf(document);vg(this);this.r?(DESKTOP||this.Ee.P)&&wg(this,this.r):X.a().c("no-media");M(M(M(M(M(M(M(M(M(this.j(),window,"resize",r(this.resize,
this)),document,"webkitfullscreenchange",r(function(){Ab(this.Fb,"full")},this)),document,"mozfullscreenchange",r(function(){Ab(this.Fb,"full")},this)),document,"fullscreenchange",r(function(){Ab(this.Fb,"full")},this)),this.Fb,"click",r(function(a){if(z(this.Fb,"full"))document.$h&&document.$h(),document.webkitCancelFullScreen&&document.webkitCancelFullScreen(),document.mozCancelFullScreen&&document.mozCancelFullScreen();else{var b=D("main");b.qh&&b.qh();b.webkitRequestFullScreen&&b.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT);
b.mozRequestFullScreen&&b.mozRequestFullScreen()}a.stopPropagation();a.preventDefault()},this)),a,"click",r(this.wj,this)),this.b(),"mousemove",r(function(a){var b=a.offsetX/this.xa,a=a.offsetY/this.Gj;if(0.7<b&&1>b&&0.7<a&&1>a&&(this.dd==YT.PlayerState.PLAYING||this.dd==YT.PlayerState.PAUSED))x(this.ld,"click-through"),R(r(function(){y(this.ld,"click-through")},this),500)},this)),b,"key",r(function(a){"32"==a.keyCode&&xg(this)},this)),this.b(),"click",r(function(a){!z(C("queue"),"show")&&(!z(C("search"),
"show")&&!G(a.target,k,"queue")&&!G(a.target,k,"search"))&&xg(this)},this));W.a().subscribe(kf,this.Ic,this);W.a().subscribe(lf,function(a){this.r=a;wg(this,a);vg(this)},this);X.a().subscribe(of,this.Xi,this);X.a().subscribe("seek",this.jj,this);X.a().subscribe("before-end",function(){vg(this,j)},this);DESKTOP&&(M(M(M(this.j(),this.hd,"click",r(function(a){a.preventDefault();a.stopPropagation();this.r&&wg(this,this.r)},this)),this.Lb,"click",r(this.hh,this,this.Lb,j)),this.zb,"click",r(this.hh,this,
this.zb,l)),Y.a().subscribe(yg,function(a){this.resize(a)},this),Y.a().subscribe(zg,function(){R(r(this.resize,this))},this),Y.a().subscribe(Ag,function(a){a?this.p.playVideo():this.p.pauseVideo();var a=D(a?"play":"pause",this.b()),b=new tf;b.add(new Hf(a,250,Jf));b.add(new Gf(a,250,If));b.play()},this),Y.a().subscribe(Bg,function(a){this.p&&(a?this.p.mute():this.p.unMute())},this),Y.a().subscribe(Cg,function(){this.p.seekTo(0)},this));this.resize()};
function xg(a){if(a.p&&a.p.getPlayerState&&DESKTOP)switch(a.p.getPlayerState()){case YT.PlayerState.PLAYING:Y.a().c(Ag,l);break;case YT.PlayerState.PAUSED:Y.a().c(Ag,j)}}m.Dh=function(){var a=D("main");return!(!a.qh&&!a.webkitRequestFullScreen&&!a.mozRequestFullScreen)};m.wj=function(a){a.preventDefault();a.stopPropagation();Z.a();a=!z(C("sidebar"),"toggled");DESKTOP&&(Y.a().c(yg,a),Y.a().c(zg,a))};
function wg(a,b){X.a().r=b;a.Bi!=b.id&&(vd.a().c(wd,"Now playing",b.media.name,i,b.media.Cf,"#info:"+b.media.id),a.Bi=b.id);a.play(b.media);U("/_like/"+b.media.id,r(function(a){a=V(a.target);A(this.Lb,"checked",a.liked||z(this.Lb,"checked"));A(this.zb,"checked",a.disliked||z(this.zb,"checked"))},a))}
m.play=function(a,b){!this.p||!this.p.loadVideoById?(this.p=new YT.Player("ytplayer",{height:Rb().height-40,width:Rb().width,videoId:a.jc,playerVars:{controls:0,showinfo:0,iv_load_policy:3,modestbranding:1,wmode:"opaque",origin:HOST_URL,enablejsapi:1},events:{onStateChange:r(this.Zi,this),onReady:r(this.Ri,this),onError:r(this.Qi,this)}}),X.a().p=this.p):(this.p.cueVideoById(a.jc),R(r(function(){var c=b||0;!this.p.getPlayerState()&&4>c?this.play(a,++c):4<=c&&vg(this,i,j)},this),1E3))};
m.resize=function(){if(!IPHONE){var a=C("stagecover"),b=D("message",a),c=C("guide").style.height,c=c.substring(0,c.length-2),c=Y.a().Me?c:40,d=Y.a().xf?320:0;this.Gj=Rb().height-c;this.xa=Rb().width-d;dd(this.b(),Rb().height-c);this.b().style.width=cd(Rb().width-d);dd(a,Rb().height-c);a.style.width=cd(Rb().width-d);a=N(b);Uc(b,{"margin-left":-a.width/2+"px","margin-top":-a.height/2+"px"});A(this.Fb,"full",this.Dh&&(document.fullScreen||document.webkitIsFullScreen||document.wk))}};
m.Ic=function(a){if(a=a.Q())this.r=a,wg(this,a);vg(this)};m.hh=function(a,b,c){c.preventDefault();c.stopPropagation();this.r&&(a=Ab(a,"checked"),(c=b&&z(this.zb,"checked")||!b&&z(this.Lb,"checked"))&&y(b?this.zb:this.Lb,"checked"),U(b?"/_like":"/_dislike",i,"POST","media_id="+this.r.media.id+(!a?"&delete=1":"")+(c?"&flip=1":"")))};m.Xi=function(a){this.r=a;wg(this,a);vg(this);U("/_optin",Fd(),"POST","media_id="+this.r.media.id)};m.jj=function(a){this.p.seekTo&&this.p.seekTo(a,j)};
m.Zi=function(a){this.dd=a.data;vg(this);switch(a.data){case YT.PlayerState.CUED:a=this.r.async?this.r.seek:(s()-this.r.time.getTime())/1E3;this.p.seekTo(a);this.p.playVideo();Y.a().c(Ag,j);break;case YT.PlayerState.PLAYING:X.a().c(pf,this.r.media);break;case YT.PlayerState.ENDED:T.a().h.Gd.je(this.r.media),A(this.Lb,"checked",l),A(this.zb,"checked",l),(a=W.a().D.Q())?W.a().c(lf,a):(X.a().r=k,W.a().c(kf,mf(W.a()),j))}};
m.Ri=function(){R(r(function(){if(this.p&&(!this.p.getPlayerState||!this.p.getPlayerState()))wg(this,this.r);else if(this.p.getPlayerState()){var a=this.r.async?this.r.seek:(s()-this.r.time.getTime())/1E3;this.p.seekTo(a);this.p.playVideo();DESKTOP&&Y.a().c(Bg,this.p.isMuted())}},this),1E3)};m.Qi=function(){X.a().c("no-media");vg(this,i,j)};
function vg(a,b,c){if(!IPHONE){var d=C("stagecover"),e=a.r?X.a().getCurrentTime():0;c?(O(a.s,l),O(a.hd,j),x(d,"covered")):(!a.r||a.r&&e>a.r.media.duration?(X.a().c("no-media"),Zb(a.Yg.firstChild,Dg),O(a.s,l),O(a.hd,l),O(a.Lf,l),x(d,"covered")):a.dd!=YT.PlayerState.PLAYING&&a.dd!=YT.PlayerState.PAUSED||b?(Zb(a.Yg.firstChild,Eg),O(a.s,j),O(a.hd,l),O(a.Lf,l),x(d,"covered")):(O(a.s,l),O(a.hd,l),y(d,"covered"),O(a.Lf,j)),fd(d,a.dd==YT.PlayerState.BUFFERING?0.9:1),a.resize())}}
var Dg="THIS CHANNEL IS CURRENTLY OFFLINE",Eg="LOADING STORY";document.createElement("input");function Fg(a,b){K.call(this);this.nc=a;this.gb=b;this.Ea=new uf(r(this.Ui,this),0,this)}t(Fg,K);m=Fg.prototype;m.la=0;m.qf=0;m.Ig=l;m.o=function(){this.Ea.ea();delete this.nc;delete this.gb;Fg.e.o.call(this)};m.start=function(a,b){this.stop();this.Ig=l;var c=b||0;this.la=Math.max(a||0,0);this.qf=0>c?-1:s()+c;this.Ea.start(0>c?this.la:Math.min(this.la,c))};m.stop=function(){this.Ea.stop()};m.hb=function(){return this.Ea.hb()};
m.Ui=function(){if(this.nc.call(this.gb))this.Ig=j;else if(0>this.qf)this.Ea.start(this.la);else{var a=this.qf-s();0>=a||this.Ea.start(Math.min(this.la,a))}};function Gg(a){K.call(this);this.g=a;this.$c=this.g.value;this.V=new Nc(this);this.Ga=s();fb||w||eb&&rb("1.9")?M(this.V,a,"paste",this.fc):M(this.V,a,["keydown","blur","focus","mouseover","input"],this.oi);this.Ea=new Fg(r(this.Yf,this))}t(Gg,Rc);m=Gg.prototype;m.l="init";m.t=Pe("goog.events.PasteHandler");m.o=function(){Gg.e.o.call(this);this.V.ea();this.V=k;this.Ea.ea();this.Ea=k};
m.Yf=function(){if(this.$c==this.g.value)return l;this.t.info("detected textchange after paste");this.dispatchEvent("after_paste");return j};m.fc=function(a){a=new xc(a.va);a.type="paste";this.dispatchEvent(a);R(function(){this.Yf()||this.Ea.start(50,200)},0,this)};
m.oi=function(a){switch(this.l){case "init":switch(a.type){case "blur":this.l="init";break;case "focus":this.l="focused";break;case "mouseover":this.l="init";this.g.value!=this.$c&&(this.t.info("paste by dragdrop while on init!"),this.fc(a));break;default:Le(this.t,"unexpected event "+a.type+"during init")}break;case "focused":switch(a.type){case "input":var b=this.Ga+400;if(s()>b||"focus"==this.dj)this.t.info("paste by textchange while focused!"),this.fc(a);break;case "blur":this.l="init";break;
case "keydown":this.t.info("key down ... looking for ctrl+v");if(hb&&db&&0==a.keyCode||hb&&db&&17==a.keyCode)break;this.l="typing";break;case "mouseover":this.g.value!=this.$c&&(this.t.info("paste by dragdrop while focused!"),this.fc(a));break;default:Le(this.t,"unexpected event "+a.type+" during focused")}break;case "typing":switch(a.type){case "input":this.l="focused";break;case "blur":this.l="init";break;case "keydown":if(a.ctrlKey&&86==a.keyCode||a.shiftKey&&45==a.keyCode||a.metaKey&&86==a.keyCode)this.t.info("paste by ctrl+v while keypressed!"),
this.fc(a);break;case "mouseover":this.g.value!=this.$c&&(this.t.info("paste by dragdrop while keypressed!"),this.fc(a));break;default:Le(this.t,"unexpected event "+a.type+" during keypressed")}break;default:Le(this.t,"invalid "+this.l+" state")}this.Ga=s();this.$c=this.g.value;this.t.info(a.type+" -> "+this.l);this.dj=a.type};function Z(){S.call(this)}t(Z,S);ja(Z);function Hg(a){return'<div class="info"><div class="picture"><img src="'+J(a.media.Za)+'" class="thumb"><div class="publisher"><img src="'+J(a.media.ga.G)+'"><div class="name">'+J(a.media.ga.name)+'</div></div><div class="links"><div class="local"></div><a target="_blank" href="'+a.media.vi+'"><div class="host"></div></a></div><div class="link-select" style="display:none"><input onClick="this.select();" class="link-input" type="text" value="'+a.media.link+'" readonly="readonly"/></div><div class="title"><div class="text">'+
J(a.media.name)+'</div></div><div class="scrollable ios-scroll" '+(!a.description?'style="display:none"':"")+'><div class="desc-link"><a href="#">DESCRIPTION</a><div class="published">'+J(a.Rb)+'</div></div><div class="description">'+a.description+'</div></div><div class="button play"><div class="icon"></div></div><div class="options"><div class="button star"><div class="icon"></div></div><div class="button facebook"><div class="icon"></div></div><div class="button twitter"><div class="icon"></div></div><div class="button plus"><div class="icon"></div></div></div></div><div class="info-contents"><div class="scrollable ios-scroll"><div class="tweet-holder" style="display:none"><div class="label"><div class="globe-icon"></div><a class="tweets-link">LATEST TWEETS</a></div><div class="tweets"></div><div class="dot-nav"></div></div><div class="viewers" style="display: none"><div class="label"><div class="friends-icon"></div><div class="status">SEEN</div></div></div><div class="comments-holder ios-scroll" style="display:none"><div class="label"><div class="friends-icon"></div><a class="conv-link">CONVERSATION</a>'+
(a.zi?'<a class="prev-link">&#10218; LAST PROGRAM</a>':"")+'</div><div class="no-comments" style="display:none">Start the conversation with friends.</div><div class="comments"></div><div class="top-grad"></div><div class="bottom-grad"></div></div></div></div><div class="loading loading-activity"><div class="loading-spinner"></div></div><div class="overlay" style="display: none"><div class="leaving"><div>This program is over. Carry on?</div><div class="button dark no">Not yet</div><div class="button dark yes">Let\'s go</div></div></div></div>'}
function Ig(a){return'<div class="viewer" name="'+J(a.Ta)+'"><img src="'+J(a.k.G)+'"></div>'}
function Jg(a){return'<div class="tweet" id="'+J(a.prefix)+"-"+J(a.$a.id)+'">'+(a.$a.k?'<a href="#user:'+J(a.$a.k.id)+'"><img src="'+J(a.$a.G)+'"/></a>':'<img src="'+J(a.$a.G)+'"/>')+'<div class="text"><a class="handle" target="_blank" href="http://www.twitter.com/'+J(a.$a.handle)+"/status/"+J(a.$a.id)+'">'+J(a.$a.handle)+"</a> "+a.text+'</div><div class="timestamp">'+J(a.timestamp)+'</div><div class="tweet-options"><div class="reply"></div></div></div>'}
function Kg(a){return'<div class="comment'+(a.Z.H?" reply":"")+'" '+(a.Z.id?'id="'+J(a.prefix)+"-"+J(a.Z.id)+'"':"")+">"+(!a.Z.H?'<a href="#user:'+J(a.Z.k.id)+'"><div class="user-picture" style="background:'+J(a.Z.k.color)+'"><img src="'+J(a.Z.k.G)+'"/></div></a>':"")+'<div class="template"><a class="user" href="#user:'+J(a.Z.k.id)+'">'+J(a.Z.k.name)+'</a>  <div class="text">'+a.text+'<div class="comment-options">'+(a.lh?'<div class="remove"></div> ':"")+'<div class="reply"></div></div></div><div class="timestamp">'+
J(a.Z.vc)+'</div><div class="replies"></div>'+(!a.Z.H?'<div class="reply-input"><textarea class="reply-textarea" rows="1" placeholder="reply..."></textarea></div>':"")+"</div></div>"}
function Lg(){return'<div class="comment-input"><div class="input-holder"><textarea class="comment-textarea" rows="1" placeholder="Add to the conversation..."></textarea></div><div class="comment-controls"><div class="comment-toggle tweet-toggle"><div class="icon"></div></div><div class="comment-toggle fb-toggle"><div class="icon"></div></div></div><div class="comment-button add-comment">POST</div></div>'}
function Mg(a){var b='<div class="activity'+(1<a.z.length?" digest":"")+'">';if(1<a.z.length){for(var b=b+('<div class="template"><span>'+J(a.z.length)+" friends </span>"+(a.Kh?"watched":"are watching")+(a.I?' <a href="#channel:'+J(a.I.id)+'">'+J(a.I.name)+"</a>":"")+'<div class="timestamp">'+J(a.time)+'</div></div><div class="users">'),c=a.z,d=c.length,e=0;e<d;e++)var g=c[e],b=b+('<a href="#user:'+J(g.id)+'"><div class="picture" style="background:'+J(g.color)+'"><img src="'+J(g.G)+'"/></div></a>');
b+="</div>"}return b+=(1==a.z.length?'<a href="#user:'+J(a.z[0].id)+'"><div class="picture" style="background:'+J(a.z[0].color)+'"><img src="'+J(a.z[0].G)+'"/></div></a><div class="template"><a class="user" href="#user:'+J(a.z[0].id)+'">'+J(a.z[0].name)+"</a> "+(a.Kh?"watched":"is watching")+(a.I?' <a href="#channel:'+J(a.I.id)+'">'+J(a.I.name)+"</a>":"")+'<div class="timestamp">'+J(a.time)+"</div></div>":"")+'<div class="medias"></div></div>'}
function Ng(a){for(var b='<div class="comment activity'+(1<a.eb.length?" digest":"")+'">'+(1<a.eb.length?'<div class="template">'+(1==a.z.length?'<a class="user" href="#user:'+J(a.z[0].id)+'">'+J(a.z[0].name)+' </a> discussed <a class="title" href="#info:'+J(a.media.id)+'">'+J(a.media.name)+"</a>.":"<span>"+J(a.z.length)+' friends </span> discussed <a class="title" href="#info:'+J(a.media.id)+'"> '+J(a.media.name)+"</a>.")+"</div>":""),a=a.eb,c=a.length,d=0;d<c;d++)var e=a[d],b=b+('<div class="comment"><a href="#user:'+
J(e.k.id)+'"><div class="picture" style="background:'+J(e.k.color)+'"><img src="'+J(e.k.G)+'"/></div></a><div class="template"><a class="user" href="#user:'+J(e.k.id)+'">'+J(e.k.name)+'</a>  <div class="text">'+J(e.text)+'</div><div class="timestamp">'+J(e.vc)+"</div></div></div>");return b+'<div class="medias"></div></div>'}
function Og(a){var b='<div class="like activity'+(1<a.z.length?" digest":"")+'">';if(1<a.z.length){for(var b=b+('<div class="template"><span>'+J(a.z.length)+' friends </span>liked<div class="timestamp">'+J(a.time)+'</div></div><div class="users">'),c=a.z,d=c.length,e=0;e<d;e++)var g=c[e],b=b+('<a href="#user:'+J(g.id)+'"><div class="picture" style="background:'+J(g.color)+'"><img src="'+J(g.G)+'"/></div></a>');b+="</div>"}return b+=(1==a.z.length?'<a href="#user:'+J(a.z[0].id)+'"><div class="picture" style="background:'+
J(a.z[0].color)+'"><img src="'+J(a.z[0].G)+'"/></div></a><div class="template" style="top:10px;margin-bottom:30px"><a class="user" href="#user:'+J(a.z[0].id)+'">'+J(a.z[0].name)+"</a> liked "+(1<a.Vg?J(a.Vg)+" stories":"")+'<div class="timestamp">'+J(a.time)+"</div></div>":"")+'<div class="medias"></div></div>'}
function Pg(a){return'<div class="list-info"><div class="picture-cell" '+(a.Za?'style="display:table-cell"':"")+">"+(a.link?'<a href="'+J(a.link)+'" target="_blank">':"")+'<div class="picture"><img class="thumb" src="'+J(a.Za)+'"></div>'+(a.link?"</a>":"")+'</div><div class="description" style="display:table-cell">'+a.description+"</div></div>"}function Qg(a){return'<li class="'+J(a.className)+' tab"><div class="label">'+J(a.name)+"</div></li>"}
function Rg(a){return'<div class="admin"><div class="scrollable ios-scroll"><div class="search"><input type="text" class="input" '+(a.Gg?'placeholder="'+J(a.Gg)+'"':"")+'/></div><div class="results"></div><div class="section" style="display:none"><div class="label">CHANNELS</div><div class="admin-channels"></div></div><div class="section" style="display:none"><div class="label">CURRENT TOPICS</div><div class="topics"></div></div><div class="section" style="display:none"><div class="label">COLLECTIONS</div><div class="collections"></div></div><div class="scroll-area"></div>'}
function Sg(){return'<div class="admin-list admin"><div class="search"><input class="input" type="text" placeholder="Paste video or playlist link" /></div><div class="tabbed pending"><ul class="tabs"><li class="tab pending"><div class="label">PENDING</div></li><li class="tab all"><div class="label">ALL</div></li><li class="tab playlists"><div class="label">PLAYLISTS</div></li><li class="tab publishers"><div class="label">PUBLISHERS</div></li><li class="tab categories"><div class="label">CATEGORIES</div></li></ul><div class="pending-content content pending"></div><div class="all-content content all"></div><div class="playlists-content content playlists"></div><div class="publishers-content content publishers"></div><div class="categories-content content categories"><div class="label">GUIDE CATEGORIES</div><div class="categories-list"></div><div class="label">FEED IDS</div><div class="feed-ids"></div><div class="label">FEED CATEGORIES</div><div class="feed-cats"></div></div><div class="spinner" style="display:none"></div></div>'}
function Tg(a){return'<div class="playlist"><div class="title">'+J(a.name)+'</div><div class="controls"><div class="remove dark button">x</div></div></div>'}function Ug(a){return'<div class="category button">'+J(a.name)+"</div>"}function Vg(a){return'<div class="publisher">'+(a.G?'<img src="'+J(a.G)+'"/>':"")+'<div class="title">'+J(a.name)+'</div><div class="controls"><div class="remove dark button">x</div></div></div>'}
function Wg(a){return'<div class="channel '+(a.I.sc?"on":"off")+'"><div class="title">'+J(a.I.name)+'</div><div class="controls"><div class="fetch dark button">FETCH</div><div class="program dark button">PROG.</div><div class="remove dark button">x</div><div class="on dark button">ON</div><div class="off dark button">OFF</div></div>'+(a.I.tc?'<div class="pending">'+J(a.I.tc)+"</div>":"")+"</div>"}
function Xg(a){return'<div class="collection"><div class="title">'+J(a.ze.name)+'</div><div class="controls">'+(a.ze.tc?'<div class="pending">'+J(a.ze.tc)+"</div>":"")+'<div class="fetch dark button">FETCH</div><div class="button dark remove">x</div></div></div>'}function Yg(a){return'<div class="topic"><div class="title">'+J(a.xj)+'</div><div class="controls">'+(a.tc?'<div class="pending">'+J(a.tc)+"</div>":"")+"</div></div>"}
function Zg(){return'<div class="tabbed messages"><ul class="tabs"><li class="tab messages"><div class="label">MESSAGES</div></li><li class="tab activity"><div class="label">ACTIVITY</div></li><li class="tab starred"><div class="label"><div class="heart"></div>\'d</div></li></ul><div class="messages-content content messages"><div class="loading loading-activity"><div class="loading-spinner"></div></div></div><div class="activity-content content activity"><div class="loading loading-activity"><div class="loading-spinner"></div></div></div><div class="starred-content content starred"><div class="loading loading-starred"><div class="loading-spinner"></div></div></div><div class="spinner" style="display:none"></div></div>'}
function $g(){return'<div class="tabbed"><ul class="tabs"><li class="tab comments"><div class="label">CONVERSATION</div></li><li class="tab tweets"><div class="label">TWEETS</div></li></ul><div class="comments-content content comments-holder"><div class="loading loading-activity"><div class="loading-spinner"></div></div></div><div class="tweets-content content tweet-holder"><div class="loading loading-starred"><div class="loading-spinner"></div></div></div></div>'}
function ah(a){return'<div class="list-media show"><div class="media"><div class="preview"><div class="thumb" style="background-image:url('+J(a.media.Za)+"); background-position: 50% "+J(a.media.Fh)+'%"></div><div class="title">'+J(a.media.name)+'</div><div class="stats"><div class="comment-count"><div class="icon"></div>'+J(a.media.Lc)+'</div><div class="like-count"><div class="icon"></div>'+J(a.media.Ci)+'</div></div></div></div><div class="publisher">'+(a.media.ga?'<img src="'+J(a.media.ga.G)+
'"><div class="name">'+J(a.media.ga.name)+"</div>":"")+'<div class="list-play"><div class="icon"></div></div><div class="list-plus"><div class="icon"></div></div></div></div>'}
function bh(a){return'<div class="admin-media list-media"><div class="media"><div class="preview"><div class="thumb" style="background-image:url('+J(a.media.Za)+"); background-position: 50% "+J(a.media.Fh)+'%"></div><div class="title">'+J(a.media.name)+'</div><div class="published">'+J(a.Rb)+'</div><div class="play"></div><div class="approve"></div><div class="remove"></div><div class="repos"></div></div></div><div class="publisher"><img src="'+J(a.media.ga.G)+'"><div class="name">'+J(a.media.ga.name)+
'</div><div class="duration">'+J(a.media.duration)+' seconds</div></div><div class="description">'+J(a.media.description)+"</div></div>"};function ch(a,b,c){K.call(this);this.target=a;this.handle=b||a;this.Qg=c||new Tc(NaN,NaN,NaN,NaN);this.T=Nb(a);this.V=new Nc(this);L(this.handle,["touchstart","mousedown"],this.nd,l,this)}t(ch,Rc);var dh=w||eb&&rb("1.9.3");m=ch.prototype;m.clientX=0;m.clientY=0;m.screenX=0;m.screenY=0;m.Ah=0;m.Bh=0;m.dc=0;m.ec=0;m.Ge=j;m.Cb=l;m.Cg=0;m.Fi=0;m.xi=l;m.yd=l;m.j=ca("V");m.uh=ba("ie");m.yc=ba("Ge");
m.o=function(){ch.e.o.call(this);Hc(this.handle,["touchstart","mousedown"],this.nd,l,this);Qc(this.V);dh&&this.T.releaseCapture();this.V=this.handle=this.target=k};function eh(a){ga(a.za)||(a.za=gd(a.target));return a.za}
m.nd=function(a){var b="mousedown"==a.type;if(this.Ge&&!this.Cb&&(!b||zc(a))){fh(a);if(0==this.Cg)if(this.dispatchEvent(new gh("start",this,a.clientX,a.clientY,a)))this.Cb=j,a.preventDefault();else return;else a.preventDefault();var b=this.T,c=b.documentElement,d=!dh;M(this.V,b,["touchmove","mousemove"],this.ti,d);M(this.V,b,["touchend","mouseup"],this.Db,d);dh?(c.setCapture(l),M(this.V,c,"losecapture",this.Db)):M(this.V,b?b.parentWindow||b.defaultView:window,"blur",this.Db);w&&this.xi&&M(this.V,
b,"dragstart",vc);this.ie&&M(this.V,this.ie,"scroll",this.kh,d);this.clientX=this.Ah=a.clientX;this.clientY=this.Bh=a.clientY;this.screenX=a.screenX;this.screenY=a.screenY;this.yd?(a=this.target,b=a.offsetLeft,c=a.offsetParent,!c&&"fixed"==Yc(a,"position")&&(c=Nb(a).documentElement),c?(eb?(d=md(c),b+=d.left):tb(8)&&(d=md(c),b-=d.left),a=gd(c)?c.clientWidth-(b+a.offsetWidth):b):a=b):a=this.target.offsetLeft;this.dc=a;this.ec=this.target.offsetTop;this.gf=fc(Lb(this.T));this.Fi=s()}else this.dispatchEvent("earlycancel")};
m.Db=function(a,b){Qc(this.V);dh&&this.T.releaseCapture();if(this.Cb){fh(a);this.Cb=l;var c=hh(this,this.dc),d=ih(this,this.ec);this.dispatchEvent(new gh("end",this,a.clientX,a.clientY,a,c,d,b||"touchcancel"==a.type))}else this.dispatchEvent("earlycancel");("touchend"==a.type||"touchcancel"==a.type)&&a.preventDefault()};
function fh(a){var b=a.type;"touchstart"==b||"touchmove"==b?a.init(a.va.targetTouches[0],a.currentTarget):("touchend"==b||"touchcancel"==b)&&a.init(a.va.changedTouches[0],a.currentTarget)}
m.ti=function(a){if(this.Ge){fh(a);var b=(this.yd&&eh(this)?-1:1)*(a.clientX-this.clientX),c=a.clientY-this.clientY;this.clientX=a.clientX;this.clientY=a.clientY;this.screenX=a.screenX;this.screenY=a.screenY;if(!this.Cb){var d=this.Ah-this.clientX,e=this.Bh-this.clientY;if(d*d+e*e>this.Cg)if(this.dispatchEvent(new gh("start",this,a.clientX,a.clientY,a)))this.Cb=j;else{this.Hd||this.Db(a);return}}c=jh(this,b,c);b=c.x;c=c.y;this.Cb&&this.dispatchEvent(new gh("beforedrag",this,a.clientX,a.clientY,a,
b,c))&&(kh(this,a,b,c),a.preventDefault())}};function jh(a,b,c){var d=fc(Lb(a.T)),b=b+(d.x-a.gf.x),c=c+(d.y-a.gf.y);a.gf=d;a.dc+=b;a.ec+=c;b=hh(a,a.dc);a=ih(a,a.ec);return new Bb(b,a)}m.kh=function(a){var b=jh(this,0,0);a.clientX=this.clientX;a.clientY=this.clientY;kh(this,a,b.x,b.y)};function kh(a,b,c,d){a.eg(c,d);a.dispatchEvent(new gh("drag",a,b.clientX,b.clientY,b,c,d))}
function hh(a,b){var c=a.Qg,d=!isNaN(c.left)?c.left:k,c=!isNaN(c.width)?c.width:0;return Math.min(d!=k?d+c:Infinity,Math.max(d!=k?d:-Infinity,b))}function ih(a,b){var c=a.Qg,d=!isNaN(c.top)?c.top:k,c=!isNaN(c.height)?c.height:0;return Math.min(d!=k?d+c:Infinity,Math.max(d!=k?d:-Infinity,b))}m.eg=function(a,b){this.yd&&eh(this)?this.target.style.right=a+"px":this.target.style.left=a+"px";this.target.style.top=b+"px"};
function gh(a,b,c,d,e,g,h,q){uc.call(this,a);this.clientX=c;this.clientY=d;this.gk=e;this.left=ga(g)?g:b.dc;this.top=ga(h)?h:b.ec;this.pk=b;this.fi=!!q}t(gh,uc);function lh(){K.call(this);this.Uc=[];this.sj=[];this.kd=[]}t(lh,Rc);m=lh.prototype;m.Lg=l;m.Mg=l;m.Re=l;m.uh=ba("ie");m.init=function(){if(!this.Re){for(var a,b=0;a=this.Uc[b];b++)mh(this,a);this.Re=j}};function mh(a,b){a.Lg&&(L(b.element,"mousedown",b.$g,l,b),a.yf&&x(b.element,a.yf));a.Mg&&a.Bf&&x(b.element,a.Bf)}
m.nd=function(a,b){if(!this.ja)if(this.ja=b,this.dispatchEvent(new nh("dragstart",this,this.ja))==l)this.ja=k;else{var c=b.bc,d;a:switch(d=c.cloneNode(j),c.tagName.toLowerCase()){case "tr":d=E("table",k,E("tbody",k,d));break a;case "td":case "th":d=E("table",k,E("tbody",k,E("tr",k,d)));break a}this.gi&&x(d,this.gi);this.gc=d;d=Nb(c);d.body.appendChild(this.gc);var e=this.gc,g=bd(c),c=jd(c,"margin");g.x-=2*(c.left||0);g.y-=2*(c.top||0);e.style.position="absolute";e.style.left=g.x+"px";e.style.top=
g.y+"px";this.Ra=new ch(e);this.Ra.uh(this.ie);L(this.Ra,"drag",this.ah,l,this);L(this.Ra,"end",this.Db,l,this);L(d.body,"selectstart",this.Eh);this.Ac=[];for(d=0;c=this.sj[d];d++)for(var h,e=0;h=c.Uc[e];e++)for(var g=c,q=[h.element],u=this.Ac,B=0;B<q.length;B++){var I=q[B],P=bd(I),mb=N(I),P=new Sc(P.y,P.x+mb.width,P.y+mb.height,P.x);u.push(new oh(P,g,h,I));ph(this,P)}this.Ya||(this.Ya=new Sc(0,0,0,0));for(d=0;c=this.kd[d];d++)c.Be=[],c.rh=c.g.scrollLeft,c.sh=c.g.scrollTop,e=bd(c.g),g=N(c.g),c.K=
new Sc(e.y,e.x+g.width,e.y+g.height,e.x);for(d=0;g=this.Ac[d];d++)for(e=0;c=this.kd[e];e++)Yb(c.g,g.g)&&(c.Be.push(g),g.jd=c);this.vb=k;for(d=0;c=this.kd[d];d++)L(c.g,"scroll",this.bg,l,this);this.Ra.nd(a);a.preventDefault()}};
m.Db=function(a){var b=a.fi?k:this.vb;if(b&&b.ia){var c=a.clientX,a=a.clientY,d=fc(Lb(this.gc)),e=c+d.x,d=a+d.y,g;this.pd&&(g=this.pd(b.Ua,b.K,e,d));this.dispatchEvent(new nh("drag",this,this.ja,b.ia,b.Ua,b.g,c,a,e,d));b.ia.dispatchEvent(new nh("drop",this,this.ja,b.ia,b.Ua,b.g,c,a,e,d,g))}this.dispatchEvent(new nh("dragend",this,this.ja));Hc(this.Ra,"drag",this.ah,l,this);Hc(this.Ra,"end",this.Db,l,this);Hc(Nb(this.ja.bc).body,"selectstart",this.Eh);for(b=0;c=this.kd[b];b++)Hc(c.g,"scroll",this.bg,
l,this),c.Be=[];this.Ra.ea();F(this.gc);delete this.ja;delete this.gc;delete this.Ra;delete this.Ac;delete this.vb};
m.ah=function(a){var b,c=fc(Lb(this.gc));b=new Bb(a.clientX+c.x,a.clientY+c.y);var c=b.x,d=b.y,e=this.vb,g;if(e){this.pd&&e.ia&&(g=this.pd(e.Ua,e.K,c,d));if(e.K.contains(b)&&g==this.Nf)return;e.ia&&(this.dispatchEvent(new nh("dragout",this,this.ja,e.ia,e.Ua,e.g)),e.ia.dispatchEvent(new nh("dragout",this,this.ja,e.ia,e.Ua,e.g,i,i,i,i,this.Nf)));this.Nf=g;this.vb=k}if(this.Ya.contains(b)){a:{for(var h=0;e=this.Ac[h];h++)if(e.K.contains(b))if(e.jd){if(e.jd.K.contains(b)){b=e;break a}}else{b=e;break a}b=
k}if((e=this.vb=b)&&e.ia)this.pd&&(g=this.pd(e.Ua,e.K,c,d)),c=new nh("dragover",this,this.ja,e.ia,e.Ua,e.g),c.rj=g,this.dispatchEvent(c),e.ia.dispatchEvent(new nh("dragover",this,this.ja,e.ia,e.Ua,e.g,a.clientX,a.clientY,i,i,g));else if(!e){this.fa||(this.fa=new oh(this.Ya.clone()));a=this.fa.K;a.top=this.Ya.top;a.right=this.Ya.right;a.bottom=this.Ya.bottom;a.left=this.Ya.left;for(g=0;e=this.Ac[g];g++)b=e.K,e.jd&&(e=e.jd.K,b=new Sc(Math.max(b.top,e.top),Math.min(b.right,e.right),Math.min(b.bottom,
e.bottom),Math.max(b.left,e.left))),e=k,c>=b.right?e=b.right>a.left?b.right:a.left:c<b.left&&(e=b.left<a.right?b.left:a.right),h=k,d>=b.bottom?h=b.bottom>a.top?b.bottom:a.top:d<b.top&&(h=b.top<a.bottom?b.top:a.bottom),e!==k&&h!==k&&(Math.abs(e-c)>Math.abs(h-d)?h=k:e=k),e===k?h!==k&&(h<=d?a.top=h:a.bottom=h):e<=c?a.left=e:a.right=e;this.vb=10<=(a.right-a.left)*(a.bottom-a.top)?this.fa:k}}};m.Eh=da(l);
m.bg=function(a){for(var b=0,c;c=this.kd[b];b++)if(a.target==c.g){var d=c.sh-c.g.scrollTop,e=c.rh-c.g.scrollLeft;c.sh=c.g.scrollTop;c.rh=c.g.scrollLeft;this.fa&&this.vb==this.fa&&(0<d?this.fa.K.top+=d:this.fa.K.bottom+=d,0<e?this.fa.K.left+=e:this.fa.K.right+=e);for(var g=0,h;h=c.Be[g];g++)h=h.K,h.top+=d,h.left+=e,h.bottom+=d,h.right+=e,ph(this,h)}this.Ra.kh(a)};
function ph(a,b){if(1==a.Ac.length)a.Ya=new Sc(b.top,b.right,b.bottom,b.left);else{var c=a.Ya;c.left=Math.min(b.left,c.left);c.right=Math.max(b.right,c.right);c.top=Math.min(b.top,c.top);c.bottom=Math.max(b.bottom,c.bottom)}}m.o=function(){lh.e.o.call(this);for(var a,b=0;a=this.Uc[b];b++)this.Lg&&(Hc(a.element,"mousedown",a.$g,l,a),this.yf&&y(a.element,this.yf)),this.Mg&&this.Bf&&y(a.element,this.Bf),a.ea();this.Uc.length=0};
function nh(a,b,c,d,e,g,h,q,u,B,I){uc.call(this,a);this.nk=b;this.ok=c;this.qk=d;this.sk=e;this.rk=g;this.clientX=h;this.clientY=q;this.Ik=u;this.Jk=B;this.rj=I}t(nh,uc);nh.prototype.o=aa();function qh(a,b){K.call(this);this.element=C(a);this.data=b;this.C=k;this.element||f(Error("Invalid argument"))}t(qh,Rc);m=qh.prototype;m.bc=k;
m.$g=function(a){if(zc(a)){var b=a.target;b&&(L(b,"mousemove",this.pc,l,this),L(b,"mouseout",this.pc,l,this),L(b,"mouseup",this.$e,l,this),this.bc=b,this.zf=new Bb(a.clientX,a.clientY),a.preventDefault())}};m.ke=ba("C");m.pc=function(a){var b=this.bc,c="mouseout"==a.type&&a.target==b;if(5<Math.abs(a.clientX-this.zf.x)+Math.abs(a.clientY-this.zf.y)||c)Hc(b,"mousemove",this.pc,l,this),Hc(b,"mouseout",this.pc,l,this),Hc(b,"mouseup",this.$e,l,this),this.C.nd(a,this)};
m.$e=function(){var a=this.bc;Hc(a,"mousemove",this.pc,l,this);Hc(a,"mouseout",this.pc,l,this);Hc(a,"mouseup",this.$e,l,this);delete this.zf;this.bc=k};function oh(a,b,c,d){this.K=a;this.ia=b;this.Ua=c;this.g=d}oh.prototype.jd=k;function rh(){lh.call(this)}t(rh,lh);function sh(a,b){b.ke(a);a.Uc.push(b);a.Re&&mh(a,b)};function th(a){var b={};"rel"in b||(b.rel="nofollow");"target"in b||(b.target="_blank");var c=[],d;for(d in b)b.hasOwnProperty(d)&&b[d]&&c.push(za(d),'="',za(b[d]),'" ');var e=c.join("");return a.replace(uh,function(a,b,c,d,B){a=[za(b)];if(!c)return a[0];a.push("<a ",e,'href="');d?(a.push("mailto:"),c=d,d=""):(B||a.push("http://"),(d=c.match(vh))?(c=d[1],d=d[2]):d="");c=za(c);d=za(d);a.push(c,'">',c,"</a>",d);return a.join("")})}
var vh=/^(.*)([:;,\.?\[\]])$/,uh=RegExp("([\\S\\s]*?)(\\b(?:mailto:)?([\\w.+-]+@[A-Za-z0-9.-]+\\.(?:com|org|net|edu|gov|aero|biz|cat|coop|info|int|jobs|mobi|museum|name|pro|travel|arpa|asia|xxx|[a-z][a-z])\\b)|\\b(?:(https?|ftp)://+|www\\.)\\w[:;,\\.?\\[\\]\\w/~%&=+#-@!]*|$)","g");function wh(){}t(wh,Nf);ja(wh);m=wh.prototype;m.hc=aa();m.i=function(a,b){fg(a);a.Pa&=-256;lg(a,32,l);wh.e.i.call(this,a,b);a.Tb(b.value);return b};m.J=function(a){fg(a);a.Pa&=-256;lg(a,32,l);return a.Fa().J("textarea",{"class":Pf(this,a).join(" "),disabled:!a.isEnabled()},a.Da||"")};m.wb=function(a){return"TEXTAREA"==a.tagName};m.Ub=ia;m.Se=function(a){return a.isEnabled()};m.zc=ia;m.ca=function(a,b,c){wh.e.ca.call(this,a,b,c);if((a=a.b())&&1==b)a.disabled=c};m.Aa=ia;
m.Tb=function(a,b){a&&(a.value=b)};m.$=da("goog-textarea");function xh(a,b,c){eg.call(this,a,b||wh.a(),c);fg(this);this.xc(j);a||(this.Da="")}t(xh,eg);var yh=eb||fb;m=xh.prototype;m.kc=l;m.xa=0;m.Sg=0;m.Zg=0;m.Ag=l;m.Yd=l;m.tf=l;m.sf=l;function zh(a){return a.ad.top+a.ad.bottom+a.Uf.top+a.Uf.bottom}function Ah(a){var b=a.Zg,c=a.b();b&&(c&&a.Yd)&&(b-=zh(a));return b}function Bh(a){var b=a.Sg,c=a.b();b&&(c&&a.Yd)&&(b-=zh(a));return b}m.Ia=function(a){this.Tb(String(a))};m.B=function(){return this.b().value};m.Tb=function(a){xh.e.Tb.call(this,a);this.resize()};
m.yc=function(a){xh.e.yc.call(this,a);this.b().disabled=!a};m.resize=function(){this.b()&&this.Md()};m.w=function(){xh.e.w.call(this);var a=this.b();Uc(a,{overflowY:"hidden",overflowX:"auto",boxSizing:"border-box",MsBoxSizing:"border-box",WebkitBoxSizing:"border-box",MozBoxSizing:"border-box"});this.ad=jd(a,"padding");this.Uf=md(a);M(M(M(M(this.j(),a,"scroll",this.Md),a,"focus",this.Md),a,"keyup",this.Md),a,"mouseup",this.Gi);this.resize()};
function Ch(a){if(!a.Ag){var b=a.b().cloneNode(l);Uc(b,{position:"absolute",height:"auto",top:"-9999px",margin:"0",padding:"1px",border:"1px solid #000",overflow:"hidden"});a.Fa().T.body.appendChild(b);var c=b.scrollHeight;b.style.padding="10px";var d=b.scrollHeight;a.tf=d>c;b.style.borderWidth="10px";a.sf=b.scrollHeight>d;b.style.height="100px";100!=b.offsetHeight&&(a.Yd=j);F(b);a.Ag=j}var b=a.b(),c=a.b().scrollHeight,e=a.b(),d=e.offsetHeight-e.clientHeight;if(!a.tf)var g=a.ad,d=d-(g.top+g.bottom);
a.sf||(e=md(e),d-=e.top+e.bottom);c+=0<d?d:0;a.Yd?c-=zh(a):(a.tf||(d=a.ad,c+=d.top+d.bottom),a.sf||(a=md(b),c+=a.top+a.bottom));return c}function Dh(a,b){a.xa!=b&&(a.xa=b,a.b().style.height=b+"px")}function Eh(a){a=a.b();a.style.height="auto";var b=a.value.match(/\n/g)||[];a.rows=b.length+1}
m.Md=function(){if(!this.kc){var a=l;this.kc=j;var b=this.b(),c=this.xa;if(b.scrollHeight){var d=l,e=l,g=Ch(this),h=b.offsetHeight,q=Ah(this),u=Bh(this);q&&g<q?(Dh(this,q),d=j):u&&g>u?(Dh(this,u),b.style.overflowY="",e=j):h!=g?Dh(this,g):this.xa||(this.xa=g);!d&&(!e&&yh)&&(a=j)}else Eh(this);this.kc=l;a&&(a=this.b(),this.kc||(this.kc=j,b=l,a.value||(a.value=" ",b=j),(e=a.scrollHeight)?(g=Ch(this),d=Ah(this),h=Bh(this),!(d&&g<=d)&&!(h&&g>=h)&&(h=this.ad,a.style.paddingBottom=h.bottom+1+"px",Ch(this)==
g&&(a.style.paddingBottom=h.bottom+e+"px",a.scrollTop=0,e=Ch(this)-e,e>=d?Dh(this,e):Dh(this,d)),a.style.paddingBottom=h.bottom+"px")):Eh(this),b&&(a.value=""),this.kc=l));c!=this.xa&&this.dispatchEvent("resize")}};m.Gi=function(){var a=this.b(),b=a.offsetHeight;a.filters&&a.filters.length&&(a=a.filters.item("DXImageTransform.Microsoft.DropShadow"))&&(b-=a.offX);b!=this.xa&&(this.xa=this.Zg=b)};function Fh(a,b,c,d,e,g,h){Q.call(this);this.Jb=ae();this.Ca=a;this.ce=b;this.kf=c;this.nf=d;this.Wf=e.categories;this.ji=e.feed_categories;this.li=e.feed_id;this.Df=g||k;this.Oc=h||k;this.Fe=this.Jb?new rh:k;this.Eb={pending:l,all:l};this.Ka=["pending","all","playlists","publishers","categories"]}t(Fh,Q);var Gh="top_rated top_favorites most_shared most_recent most_discussed most_responded recently_featured on_the_web most_viewed".split(" "),Hh="All Film Autos Music Animals Sports Travel Games Videoblog People Comedy Entertainment News Howto Education Tech Nonprofit Movies Shows Shortmov".split(" ");
m=Fh.prototype;
m.v=function(a){Fh.e.v.call(this,a);a.innerHTML="";a.scrollTop=0;ic(a,Sg);var b=D("pending-content",a);v(this.ce,function(a){Ih(this,b,a)},this);this.bj=D("playlists-content",a);v(this.kf,this.Rf,this);this.ej=D("publishers-content",a);v(this.nf,this.Sf,this);this.ai=D("categories-list",a);this.jg=D("feed-ids",a);this.ki=D("feed-cats",a);U("/admin/_categories",r(function(a){a=V(a.target);v(a,function(a){Jh(this,a,"category",Qa(this.Wf,a.id)||!this.Wf.length)},this)},this));v(Hh,function(a){Jh(this,a,
"feed_category",Qa(this.ji,a))},this);v(Gh,function(a){Jh(this,a,"feed_id",this.li==a)},this);this.resize()};
m.w=function(){Fh.e.w.call(this);this.ba=D("input",this.b());var a=new Wf(this.ba),b=new Gg(this.ba);this.qa=D("tabs",this.b());this.u="pending";var c=l;M(M(M(M(this.j(),window,"resize",va(R,r(this.resize,this))),a,"key",r(function(a){"13"==a.keyCode&&Kh(this,this.ba.value)},this)),b,"after_paste",r(function(){Kh(this,this.ba.value)},this)),this.qa,"click",r(function(a){a=G(a.target,"li");this.mb(a)},this));M(this.j(),this.b(),"scroll",r(function(){if(this.Ca&&!c&&!this.Eb[this.u]&&("pending"==this.u||
"all"==this.u)&&this.b().scrollTop+Rb().height>this.b().scrollHeight-this.b().clientTop){c=j;var a=D("spinner",this.b());O(a,j);var b="pending"==this.u?this.ce:this.we;U("/admin/_media/collection/"+this.Ca+"?offset="+b.length+("pending"==this.u?"&pending=1":""),r(function(g){c=l;g=Qe(jf(g.target)).medias;g=Ma(g,function(a){return new zd(a)});Ua(b,g);var h=D(this.u+"-content",this.b());v(g,function(a){Ih(this,h,a)},this);this.Eb[this.u]=!g.length;A(a,"finished",!g.length)},this))}},this));this.resize()};
m.resize=function(){dd(this.b(),Rb().height-40)};
function Kh(a,b){var c;c=b.match("(?:(https?|ftp)://+|www\\.)\\w[:;,\\.?\\[\\]\\w/~%&=+#-@!]*");c=c!=k?c[0]:"";a.Ca&&c&&(a.ba.disabled="disabled",U("admin/_add/collection/"+a.Ca,r(function(a){this.ba.value="";this.ba.disabled="";a=V(a.target);if("media"==a.type){var b=Hd(Gd.a(),a.data);Oa(this.ce,function(a){return a.id==b.id})||(this.ce.push(b),a=D("pending-content",this.b()),Ih(this,a,b,j),this.mb(Pb("li","pending",i)[0]))}else if("playlist"==a.type){var c=a.data;Oa(this.kf,function(a){return a.id==
c.id})||(this.kf.push(c),this.Rf(c),this.mb(Pb("li","playlists",i)[0]))}else if("publisher"==a.type){var h=a.data;h&&!Oa(this.nf,function(a){return a.id==h.id})&&(this.nf.push(h),this.Sf(h),this.mb(Pb("li","publishers",i)[0]))}},a),"POST","url="+c))}
m.mb=function(a){v(this.Ka,function(b){A(this.qa.parentElement,b,z(a,b));this.u=z(a,b)?b:this.u},this);this.Ca&&!this.we&&U("/admin/_media/collection/"+this.Ca,r(function(a){a=Qe(jf(a.target)).medias;this.we=Ma(a,function(a){return new zd(a)});var c=D("all-content",this.b());v(this.we,function(a){Ih(this,c,a)},this)},this))};
m.Rf=function(a){var b=H(Tg,{name:a.name});this.bj.appendChild(b);var c=D("remove",b);M(this.j(),c,"click",function(){U("admin/_remove/collection/"+this.Ca,r(function(){F(b)},this),"POST","pub_id="+a.id)})};m.Sf=function(a){var b=H(Vg,{name:a.name||a.id,G:a.picture});this.ej.appendChild(b);var c=D("remove",b);M(this.j(),c,"click",function(){U("admin/_remove/collection/"+this.Ca,r(function(){F(b)},this),"POST","pub_id="+a.id)})};
function Jh(a,b,c,d){if("category"==c){var e=H(Ug,{name:b.name,id:b.id});a.ai.appendChild(e)}else e=H(Ug,{name:b,id:b}),("feed_id"==c?a.jg:a.ki).appendChild(e);A(e,"enabled",!!d);var g="category"==c?"cat_id="+b.id:"feed_id"==c?"feed_id="+b:"feed_cat="+b;M(a.j(),e,"click",function(){"feed_id"==c&&v(Vb(this.jg),function(a){y(a,"enabled")});var a=Ab(e,"enabled");U("admin/_edit/collection/"+this.Ca,Fd(),"POST",g+"&enabled="+a)})}
function Ih(a,b,c,d){var e=H(bh,{media:c,Rb:Ed(c)});d?Ub(b,e,0):b.appendChild(e);a.Jb&&(b=a.Fe,d=new qh(e,i),sh(b,d));var b=new ch(D("repos",e)),g=D("thumb",e),d=D("play",e),h=D("approve",e),q=D("remove",e);b.eg=function(a,b){var c=b-24;-50<=c&&50>=c&&Uc(g,"background-position-y",50-c+"%")};M(M(M(M(a.j(),b,"end",function(){var a=(g.style[Ga("background-position")]||"").split(" ")[1],a=a.substring(0,a.length-1);U("/admin/_posthumb",Fd(),"POST","media="+c.id+"&pos="+a)}),d,"click",r(a.Yi,a,c)),h,"click",
r(a.Tf,a,c,j,e)),q,"click",r(a.Tf,a,c,l,e));R(va(x,e,"show"))}m.Tf=function(a,b,c){var d=a.bi||this.Ca;U("admin/_media/collection",r(function(){x(c,"remove");R(function(){F(c)},300);Y.a();var b;Y.a();b=cc(C("toggle-pending"));Lh(0,b-1);Z.a().c("approved",a,d)},this),"POST","col="+d+"&media="+a.id+"&approve="+b)};m.Yi=function(a){a=Yd(a);X.a().c(of,a)};function Mh(a){Q.call(this);this.cb=a||k;this.Bc=this.Xf=this.Jh=this.ag=0}t(Mh,Q);m=Mh.prototype;m.J=function(){this.g=H(Rg)};m.v=function(a){Mh.e.v.call(this,a);var b=H(Rg,{Gg:this.cb?"Add a collection":"Add a Channel"});a.innerHTML=b.innerHTML};
m.w=function(){Mh.e.w.call(this);this.ba=D("input",this.b());var a=new Wf(this.ba);this.ij=D("scrollable",this.b());this.Dd=D("admin-channels",this.b());this.Ff=D("topics",this.b());this.Fd=D("collections",this.b());this.$f=C("admin-col-list");this.Ad=C("admin-list");W.a();this.cb?(U("/admin/_topicmedias/"+this.cb,r(function(a){a=V(a.target);Db(a,function(a,b){O(this.Ff.parentElement,j);if(a&&a.length){var e=H(Yg,{xj:b,tc:a.length});this.Ff.appendChild(e);L(e,"click",r(function(){a=Ma(a,function(a){return new zd(a)});
(new Fh("",a,[],[],[])).i(this.Ad);Z.a().c("navigate",this.Ad,l,b)},this));Z.a().subscribe("approved",function(b){if(Oa(a,function(a){return a.id==b.id})){var d=D("pending",e),q=cc(d)-1;0>=q?(F(e),qc(e)):Zb(d,q)}},this)}},this);this.Bc&&Lh(Y.a(),this.Bc);this.Jh=N(this.Ff.parentElement).height;this.resize()},this)),U("/admin/_collections/"+this.cb,r(function(a){a=V(a.target);O(this.Fd.parentElement,!!a.length);v(a,this.Qf,this);this.Bc&&Lh(Y.a(),this.Bc);this.ag=N(this.Fd.parentElement).height;this.resize()},
this))):U("/admin/_channels",r(function(a){a=V(a.target);O(this.Dd.parentElement,!!a.length);v(a,this.Pf,this);this.Xf=N(this.Dd.parentElement).height;this.resize()},this));M(this.j(),a,"key",r(function(a){"13"==a.keyCode&&this.ba.value&&(a=this.ba.value,this.ba.disabled="disabled",U(this.cb?"/admin/_collections":"/admin/_channels",r(function(a){a=V(a.target);this.cb?(O(this.Fd.parentElement,!!a),this.Qf(a)):(O(this.Dd.parentElement,!!a),this.Pf(a));this.ba.disabled="";this.ba.value=""},this),"POST",
"name="+a+(this.cb?"&cid="+this.cb:"")))},this))};
m.Pf=function(a){var b=new fe(a),c=H(Wg,{I:b});this.Dd.appendChild(c);L(c,"click",r(function(a){z(a.target,"on")||z(a.target,"off")?(A(c,"on",z(a.target,"on")),A(c,"off",!z(a.target,"on")),U("/admin/_channel/online/"+b.id,r(function(a){a.target.disabled="";a=V(a.target);A(c,"on",a.online);A(c,"off",!a.online)},this),"POST","online="+z(a.target,"on"))):z(a.target,"program")?U("/admin/_program",Fd(),"POST","channel_id="+b.id):z(a.target,"fetch")?U("/admin/_fetch",function(){alert("Fetch began, but give it some time.")},
"POST","channel_id="+b.id):z(a.target,"remove")&&confirm("Remove "+b.name+"?")?(O(c,l),U("/admin/_channels/"+b.id,function(a){V(a.target).deleted?F(c):O(c,j)},"DELETE")):((new Mh(b.id)).i(this.$f),Z.a().c("navigate",this.$f,l,b.name))},this))};
m.Qf=function(a){var b=H(Xg,{ze:a});this.Bc+=a.pending;this.Fd.appendChild(b);L(b,"click",r(function(c){z(c.target,"remove")&&confirm("Remove "+a.name+"?")?(O(b,l),U("/admin/_collections/"+a.id,function(a){V(a.target).deleted?F(b):O(b,j)},"DELETE")):z(c.target,"fetch")?U("/admin/_fetch",function(){alert("Fetch began, but give it some time.")},"POST","col_id="+a.id):U("/admin/_media/collection/"+a.id+"?pending=1",r(function(b){var b=Qe(jf(b.target)),c=b.medias,c=Ma(c,function(a){return new zd(a)});
(new Fh(a.id,c,b.playlists,b.publishers,b.categories)).i(this.Ad);Z.a().c("navigate",this.Ad,l,a.name)},this))},this));Z.a().subscribe("approved",function(c,d){if(d==a.id){var e=D("pending",b),g=cc(e)-1;0>=g?(F(b),qc(b)):Zb(e,g)}},this)};m.resize=function(){dd(this.ij,this.Xf+this.Jh+this.ag+110)};function Nh(a){Q.call(this);this.vh=!!a;this.f=new xh("Add to the conversation.");this.Ma=new tg("tweet");lg(this.Ma,16,j);this.Sa=new tg("post");lg(this.Sa,16,j);a=T.a().h;this.Id=a.cj;this.ne=a.nh;this.Zb=new tg("add");this.hf=this.La=this.fe=k}t(Nh,Q);m=Nh.prototype;m.J=function(){this.g=H(Lg)};
m.w=function(){Nh.e.w.call(this);this.f.i(D("comment-textarea",this.b()));var a=this.f;a.Sg=70;a.resize();a=new Wf(this.f.fb());this.ci=D("comment-controls",this.b());O(this.ci,this.vh);A(this.b(),"show-controls",this.vh);this.yi=D("input-holder",this.b());td(this,this.Ma);this.Ma.i(D("tweet-toggle",this.b()));U("/_twitter",r(function(a){a=V(a.target);this.ne=this.ne&&a.auth;this.Aj=a.auth_url;kg(this.Ma,this.ne)},this));td(this,this.Sa);this.Sa.i(D("fb-toggle",this.b()));FB.api("/me/permissions",
r(function(a){this.Id=this.Id&&!!a.data[0].publish_stream;kg(this.Sa,this.Id)},this));td(this,this.Zb);this.Zb.i(D("add-comment",this.b()));this.Zb.yc(l);M(M(M(M(M(M(this.j(),this.f.b(),"focus",r(function(){this.dispatchEvent("focus")},this)),a,"key",r(function(a){a.stopPropagation();this.Zb.yc(this.f.B());"13"==a.keyCode?(a.preventDefault(),a.stopPropagation(),this.Zb.setActive(this.f.B()),this.nb(a)):"8"==a.keyCode&&(!this.B()&&this.La)&&Oh(this)},this)),this.f,"resize",r(function(a){this.dispatchEvent(a)},
this)),this.Sa,"action",r(this.Ni,this)),this.Ma,"action",r(this.Wi,this)),this.Zb,"action",r(this.nb,this));Z.a().subscribe("reply-comment",this.gj,this);Z.a().subscribe("reply-tweet",this.hj,this);T.a().h.subscribe($d,function(){kg(this.Ma,j)},this)};m.gj=function(a,b){this.La&&Oh(this);this.fe=b;this.hf=a.id?a.id:a.toString();this.La=E("div","token","@"+b.Ta());this.yi.appendChild(this.La);this.ha(j);this.f.b().style.paddingLeft=N(this.La).width+5+"px"};
m.hj=function(a){this.La&&Oh(this);this.xk=a.id;this.Ia((this.B()?this.B()+" ":"")+"@"+a.handle+" ");this.ha(j);this.Ma.yc(j);this.ha(j);a=this.B().length;this.setSelectionRange(a,a)};function Oh(a){a.fe=k;a.hf=k;F(a.La);a.La=k;a.f.b().style.paddingLeft=""}
m.setSelectionRange=function(a,b){if(this.f.b().setSelectionRange)this.f.b().focus(),this.f.b().setSelectionRange(a,b);else if(this.f.b().createTextRange){var c=this.f.b().createTextRange();c.collapse(j);c.moveEnd("character",b);c.moveStart("character",a);c.select()}};m.B=function(){return this.f.B()};m.Ia=function(a){return this.f.Ia(a)};m.collapse=aa();m.Qd=function(){return z(this.b(),"focused")};m.ha=function(a){a&&this.f.b().focus();return A(this.b(),"focused",a)};
m.nb=function(){this.f.B()&&(this.dispatchEvent({type:"add",Yh:r(function(a){var b=V(a.target);if(b.comment){var a=new Ph(b.comment),c=b.tweet?new Qh(b.tweet):k;if(b=Hd(Gd.a(),b.comment.media))b.c(Bd,a),c&&b.c("add-tweet",c)}},this),Sc:Tf(this.Sa,16),If:Tf(this.Ma,16),text:this.f.B(),H:this.hf,Ih:this.fe&&this.fe.id}),this.f.Ia(""),Oh(this))};m.Ni=function(){!this.Id&&Tf(this.Sa,16)&&(O(C("overlay"),j),FB.login(r(function(a){O(C("overlay"),l);this.ii=!!a.authResponse;kg(this.Sa,this.ii)},this),{scope:"publish_stream"}))};
m.Wi=function(){if(!this.ne&&Tf(this.Ma,16)){kg(this.Ma,l);var a=window.open(this.Aj,"Twitter Login","height=300,width=550");a.moveTo(screen.width/2-225,screen.height/2-150);a.focus()}};function Ph(a){this.id=a.id;this.k=a.user?pe(T.a(),a.user):k;this.text=a.text;this.time=a.time?Ad(a.time+"Z"):new Md;this.vc=Rh(this.time.getTime());this.H=a.parent_id;this.pf=[];a.replies&&v(a.replies,function(a){a=new Ph(a);this.pf.push(a)},this)}
function Sh(a,b,c,d,e,g,h,q){var u=new Ph({text:c,parentId:g});u.k=a;u.H=g||k;U("/_comment",r(function(a){a=V(a.target);u.id=a.comment.id;q&&q(u)},this),"POST","media_id="+b+"&text="+c+"&tweet="+e+"&facebook="+d+(g?"&parent_id="+g:"")+(h?"&to_user_id="+h:""));return u};function Qh(a){this.id=a.id;this.k=a.user&&pe(T.a(),a.user);this.handle=a.handle;this.G=a.picture;this.text=a.text;this.time=Ad(a.time+"Z")};function Th(a,b,c,d){Q.call(this);this.d=a;this.sa=b||[];this.Nc={};this.vd=!!c;this.Oa=d||[];this.ud={};this.X=this.hk=0;this.Kb={}}t(Th,Q);m=Th.prototype;
m.v=function(a){Th.e.v.call(this,a);a.innerHTML="";a.scrollTop=0;x(this.b(),"ios-scroll");this.s=E("div","loading",E("div","loading-spinner"));this.b().appendChild(this.s);O(this.s,l);this.Ob=E("div","no-comments","Start the conversation.");this.b().appendChild(this.Ob);this.m=E("div","comments tweets");this.b().appendChild(this.m);M(M(this.j(),window,"resize",va(R,r(this.resize,this))),this.m,"click",r(this.Ae,this));this.sa.length?(v(this.sa,function(a){this.bb(a)},this),this.oc=N(this.m).height):
this.vd&&this.Oa.length?(v(this.Oa,function(a){this.$b(a)},this),this.oc=N(this.m).height):O(this.s,j);this.vd?(U("/_tweet/"+this.d.id+"?offset="+this.Oa.length,r(function(a){O(this.s,l);a=Qe(jf(a.target));a=Ma(a,function(a){a=new Qh(a);this.$b(a);return a},this);this.oc=N(this.m).height;this.resize()},this)),this.d.subscribe("add-tweet",function(a){this.$b(a,j)},this)):(U("/_comment/"+this.d.id+"?offset="+this.sa.length,r(function(a){O(this.s,l);a=Qe(jf(a.target));a=Ma(a,function(a){a=new Ph(a);
this.bb(a);return a},this);this.oc=N(this.m).height;this.resize()},this)),this.d.subscribe(Bd,this.bb,this),this.d.subscribe(Cd,this.of,this));this.resize(41)};
m.$b=function(a,b){this.ud[a.id]=a;O(this.Ob,l);var c=th(a.text),c=c.replace(/#(\S+)/g,function(a,b){return'<a target="_blank" href="http://twitter.com/search?q=%23'+b+'">'+a+"</a>"}),c=c.replace(/@(\S+)/g,function(a,b){return'<a target="_blank" href="http://twitter.com/'+b+'">'+a+"</a>"}),c=H(Jg,{$a:a,text:c,timestamp:Rh(a.time.getTime())});Uh(le.a(),a.time,D("timestamp",c));b?Ub(this.m,c,0):this.m.appendChild(c);this.resize();O(Xb(this.m),j)};
m.Ae=function(a){a=a.target;if(this.vd){var b=G(a,k,"tweet");b&&(b=this.ud[b.id.split("-")[1]],z(a,"reply")&&Z.a().c("reply-tweet",b))}else if(b=G(a,k,"comment")){var b=b.id.split("-")[1],c=this.Nc[b];z(a,"reply")?D("reply-textarea",this.Kb[c.H?c.H:c.id]).focus():z(a,"remove")&&this.d.c(Cd,b)}};m.of=function(a){var a=C("listcomment-"+a),b=a.nextSibling;for(F(a);b&&z(b,"reply");)b=b.nextSibling,F(b)};
m.bb=function(a){this.sa.push(a);O(this.Ob,l);var b=H(Kg,{prefix:"listcomment",Z:a,text:th(a.text),lh:a.k.id==T.a().h.id});Uh(le.a(),a.time,D("timestamp",b));a.H?D("replies",this.Kb[a.H]).appendChild(b):this.m.appendChild(b);v(a.pf,function(a){this.bb(a)},this);a.H||(this.m.scrollTop=this.m.scrollHeight);a.id&&Vh(this,a,b);return b};
function Vh(a,b,c){a.Nc[b.id]=b;if(!b.H){a.Kb[b.id]=c;var d=D("reply-textarea",c),c=new Wf(d);M(a.j(),c,"key",r(function(a){a.stopPropagation();"13"==a.keyCode&&d.value&&(a.preventDefault(),a=Sh(T.a().h,this.d.id,d.value,l,l,b.id,b.k.id),this.bb(a),d.value="")},a))}}m.resize=function(a){this.X=a||this.X;dd(this.b(),Rb().height-42-this.X-(G(this.b(),k,"tabbed")?30:0))};function Wh(a,b,c,d){Q.call(this);this.d=this.Ha=a;this.sa=b||[];this.Oa=c||[];this.vd=!!d;this.Mc=new Th(a,this.sa);this.Gf=new Th(a,i,j,this.Oa);this.f=new Nh(j);this.Ka=["comments","tweets"];this.qd={}}t(Wh,Q);m=Wh.prototype;m.v=function(a){Wh.e.v.call(this,a);x(a,"conversation");x(a,"ios-scroll");ic(a,$g);x(a.firstChild,this.vd?"tweets":"comments")};
m.w=function(){this.qa=D("tabs",this.b());this.Mc.i(D("comments-content",this.b()));this.Gf.i(D("tweets-content",this.b()));rd(this.f,this.b());M(M(M(M(M(M(M(this.j(),this.qa,"click",r(function(a){a=G(a.target,"li");this.mb(a)},this)),this.f,"add",r(this.nb,this)),this.f,"resize",r(function(){z(this.b().firstChild,"comments")?this.Mc.resize(41):this.Gf.resize(41)},this)),window,"click",r(function(a){!G(a.target,k,"comment-input")&&!this.f.B()&&(this.f.ha(l),this.f.collapse())},this)),D("no-comments",
this.b()),"click",r(this.ih,this)),Ob("no-comments",this.b())[1],"click",r(this.ih,this)),window,"click",r(function(a){!G(a.target,k,"comment-input")&&!this.f.B()&&(this.f.ha(l),this.f.collapse())},this));this.Mc.resize(41);this.Gf.resize(41)};m.ih=function(a){a.preventDefault();a.stopPropagation();this.f.ha(j)};
m.nb=function(a){var b=Sh(T.a().h,this.d.id,a.text,a.Sc,a.If,a.H,a.Ih,r(function(a){var b=this.qd[a.time.getTime()];b.id="infocomment-"+a.id;Vh(this.Mc,a,b)},this)),c=this.Mc.bb(b);this.qd[b.time.getTime()]=c;a.Sc&&!a.H&&(FB.api("/me/feed","POST",{message:a.text,name:this.d.name,link:this.d.link,picture:this.d.Za,caption:"on XYLO",description:this.d.description},aa()),kg(this.f.Sa,l))};m.mb=function(a){v(this.Ka,function(b){A(this.qa.parentElement,b,z(a,b));this.u=z(a,b)?b:this.u},this)};function Rh(a){var b=s(),c=Math.floor((b-a)/6E4),b=l;0>c&&(b=j,c*=-1);if(60>c)return Xh(c,b,0);c=Math.floor(c/60);if(24>c)return Xh(c,b,1);c=new Date(s());c.setHours(0);c.setMinutes(0);c.setSeconds(0);c.setMilliseconds(0);c=Math.ceil((c.getTime()-a)/864E5);b&&(c*=-1);return 14>c?Xh(c,b,2):""}
function Xh(a,b,c){return!b&&0==c?(b=wa("{$num} minute ago",{num:a}),c=wa("{$num} minutes ago",{num:a}),1==a?b:c):b&&0==c?(b=wa("in {$num} minute",{num:a}),c=wa("in {$num} minutes",{num:a}),1==a?b:c):!b&&1==c?(b=wa("{$num} hour ago",{num:a}),c=wa("{$num} hours ago",{num:a}),1==a?b:c):b&&1==c?(b=wa("in {$num} hour",{num:a}),c=wa("in {$num} hours",{num:a}),1==a?b:c):!b&&2==c?(b=wa("{$num} day ago",{num:a}),c=wa("{$num} days ago",{num:a}),1==a?b:c):b&&2==c?(b=wa("in {$num} day",{num:a}),c=wa("in {$num} days",
{num:a}),1==a?b:c):""};function Yh(a,b,c,d){Q.call(this);v(a.cf,function(a){var b=a.Q();b&&b.media.id==this.id?(this.aj=a,v(a.zd,function(a){a.me||(this.qb[a.k.id]=a.k)})):this.qb={}},a);this.d=this.Ha=a;this.Ud=c||k;this.Og=d||k;this.Bg=l;this.kg=!b;this.Cc={};this.sa=[];this.Nc={};this.Kb={};this.qd={};this.Oa=[];this.ud={};this.f=new Nh(j);this.Vb=new tg("Star");lg(this.Vb,16,j);this.ig=new tg("Facebook");this.Mh=new tg("Twitter");this.mh=new tg("Play");this.ed=new tg("Plus");lg(this.ed,16,j);this.X=0}t(Yh,Q);m=Yh.prototype;
m.J=function(){this.g=H(Hg,{media:this.d})};m.v=function(a){Yh.e.v.call(this,a);var b=H(Hg,{media:this.d,description:this.d.description?th(this.d.description):"",Rb:Ed(this.d),zi:this.Ud?this.Ud.id:k});a.innerHTML=b.innerHTML};
m.w=function(){Yh.e.w.call(this);this.Dc=D("viewers",this.b());var a=D("picture",this.b()),b=D("scrollable",this.b()),c=D("publisher",this.b()),d=D("title",this.b()),e=D("links",this.b());this.s=D("loading",this.b());var g=a.firstChild;this.De=D("info-contents",this.b());this.Hk=D("tweet-holder",this.b());this.Na=D("tweets",this.b());this.Bb=D("dot-nav",this.b());this.m=D("comments",this.b());this.Ob=D("no-comments",this.b());rd(this.f,this.b());this.Vb.i(D("star",this.b()));kg(this.Vb,ce(T.a().h,
this.d));this.ig.i(D("facebook",this.b()));this.Mh.i(D("twitter",this.b()));this.mh.i(D("play",this.b()));this.ed.i(D("plus",this.b()));this.Hf=new qe(5E3);this.Kk=D("watch-with",this.b());!this.kg||this.d.lg?Zh(this,l,this.d.description,this.d.je,this.d.Lh,this.d.eb):this.kg&&U("/_info/"+this.d.id,r(function(a){a=Qe(jf(a.target));Zh(this,j,a.description,a.seen,a.tweets,a.comments)},this));M(M(M(M(M(M(M(M(M(M(M(M(M(M(M(M(M(M(M(M(M(M(M(this.j(),window,"resize",va(R,r(this.resize,this))),c,"click",
r(function(){Z.a().c("media-list",this.d.ga.name,i,"/admin/_media/publisher/"+this.d.ga.id,this.d.ga.G,this.d.ga.description,this.d.ga.link,"/_publisher/"+this.d.ga.id)},this)),this.Vb,"action",r(function(){Gd.a().c("star",this.d,Tf(this.Vb,16));U("/_star",i,"POST","media_id="+this.d.id+(!Tf(this.Vb,16)?"&delete=1":""))},this)),this.ig,"action",r(this.Mi,this)),this.Mh,"action",r(this.Vi,this)),this.mh,"action",r(this.Pi,this)),this.ed,"action",r(this.Si,this)),D("local",this.b()),"click",r(function(){O(D("link-select",
this.b()),j);D("link-input",this.b()).select()},this)),this.f,"add",r(this.nb,this)),this.Ob,"click",r(function(a){a.preventDefault();a.stopPropagation();this.f.ha(j)},this)),D("conv-link",this.b()),"click",r(function(a){a.preventDefault();a.stopPropagation();Z.a().c("conversation",this.d,this.sa,this.Oa)},this)),D("tweets-link",this.b()),"click",r(function(a){a.preventDefault();a.stopPropagation();Z.a().c("conversation",this.d,this.sa,this.Oa,j)},this)),this.f,"focus",r(function(){this.resize(0,
j)},this)),this.f,"resize",r(function(a){this.resize(a.target.xa-41)},this)),this.Bb,"click",r(function(a){z(a.target,"dot")&&($h(this,a.target),this.Hf.stop())},this)),this.Hf,se,r(function(){var a=this.xb&&(this.xb.nextElementSibling!=i?this.xb.nextElementSibling:Wb(this.xb.nextSibling))||D("dot",this.b());R(r(function(){$h(this,a)},this))},this)),window,"click",r(function(a){!G(a.target,k,"comment-input")&&!this.f.B()&&(this.f.ha(l),this.f.collapse()&&this.resize(0))},this)),g,"load",function(){O(g,
j);R(function(){N(g).height<N(a).height+50&&x(g,"fix-height");N(g).width>2*N(a).width?x(g,"pan-left"):N(g).height>2*N(a).height&&x(g,"pan-top");g.style.marginTop=-N(g).height/2+"px";g.style.marginLeft=-N(g).width/2+"px";x(g,"show")})}),b,"scroll",r(function(){var h=(120-b.scrollTop)/100;fd(c,Math.min(1,Math.max(h,0)));fd(d,Math.min(1,Math.max(h,0)));fd(e,Math.min(1,Math.max(h,0)));fd(g,Math.min(0.5,Math.max(h,0.1)));A(a,"scrolled",10<b.scrollTop)},this)),this.m,"scroll",r(this.rf,this)),this.m,"click",
r(this.Ae,this)),this.Na,"click",r(this.zj,this)),D("desc-link",this.b()),"click",r(function(){var c=Ab(a,"scrolled");(new Ef(b,[b.scrollLeft,b.scrollTop],[b.scrollLeft,c?170:0],300)).play()},this));this.Ud&&M(this.j(),D("prev-link",this.b()),"click",r(function(){Z.a().c("media-info",this.Ud,j,i,this.f.B())},this));this.Og&&this.f.Ia(this.Og);this.d.subscribe(Bd,function(a){ai(this,a,j)},this);this.d.subscribe(Cd,this.of,this);this.d.subscribe("add-tweet",function(a){this.$b(a,j)},this);this.d.subscribe(Dd,
function(a,b,c){bi(this,a,c)},this);T.a().h.subscribe("set-starred",function(){kg(this.Vb,ce(T.a().h,this.d))},this);ne().subscribe(he,function(a,b){kg(this.ed,b)},this)};
function Zh(a,b,c,d,e,g){c?(a.d.description=c,D("description",a.b()).innerHTML=th(c),O(D("scrollable",a.b()),j)):(O(D("desc-link",a.b()),l),O(D("scrollable",a.b()),l));c=Ma(d,function(a){var c=b?pe(T.a(),a):a;if(c.id!=T.a().h.id){O(this.Dc,j);this.Bg=j;var d=H(Ig,{k:c,Ta:c.Ta});this.Dc.appendChild(d);this.Cc[a.id]=d;M(this.j(),d,"click",function(){Z.a().c("profile",a)})}return c},a);Db(a.d.qb,function(a){bi(this,a)},a);a.Oa=Ma(e,function(a){a=b?new Qh(a):a;this.$b(a);this.xb=this.Bb.firstChild;x(this.xb,
"selected");return a},a);e.length&&a.Hf.start();a.m&&O(a.m.parentElement,j);O(a.Ob,!g.length);g=Ma(g,function(a,c){var d=b?new Ph(a):a;d.H||ai(this,d,c==g.length-1);return d},a);O(a.s,l);a.resize();b&&(a.d.Lh=a.Oa,a.d.eb=g,a.d.je=c,a.d.lg=j)}m.hb=function(){return this.f.Qd()||!!this.f.La||!!this.f.B()};
function $h(a,b){if(b){v(Vb(a.Bb),function(a){return y(a,"selected")});a.xb=b;x(a.xb,"selected");var c=Pa(Vb(a.Bb),function(a){return a==b});(new Ef(a.Na,[a.Na.scrollLeft,a.Na.scrollTop],[320*c,a.Na.scrollTop],200)).play();a.resize()}}
m.nb=function(a){var b=Sh(T.a().h,this.d.id,a.text,a.Sc,a.If,a.H,a.Ih,r(function(a){var b=this.qd[a.time.getTime()];b.id="infocomment-"+a.id;ci(this,a,b)},this)),c=ai(this,b);this.qd[b.time.getTime()]=c;a.Sc&&!a.H&&FB.api("/me/feed","POST",{message:a.text,name:this.d.name,link:this.d.link,picture:this.d.Za,caption:"on XYLO",description:this.d.description},aa());ee.a().Z(this.d.id,a.Sc,a.If)};
m.$b=function(a,b){this.ud[a.id]=a;var c=th(a.text),c=c.replace(/#(\S+)/g,function(a,b){return'<a target="_blank" href="http://twitter.com/search?q=%23'+b+'">'+a+"</a>"}),c=c.replace(/@(\S+)/g,function(a,b){return'<a target="_blank" href="http://twitter.com/'+b+'">'+a+"</a>"}),c=H(Jg,{$a:a,text:c,timestamp:Rh(a.time.getTime()),prefix:"infotweet"}),d=E("div","dot");Uh(le.a(),a.time,D("timestamp",c));b?(Ub(this.Na,c,0),Ub(this.Bb,d,0),10<Vb(this.Na).length&&(F(this.Na.lastChild),F(this.Bb.lastChild),
$h(this,d))):(this.Na.appendChild(c),this.Bb.appendChild(d));this.resize();O(Xb(this.Na),j)};function ai(a,b,c){a.sa.push(b);O(a.Ob,l);var d=H(Kg,{prefix:"infocomment",Z:b,text:th(b.text),lh:b.k.id==T.a().h.id});Uh(le.a(),b.time,D("timestamp",d));b.H?D("replies",a.Kb[b.H]).appendChild(d):a.m.appendChild(d);v(b.pf,function(a){ai(this,a,c)},a);b.H||(a.m.scrollTop=a.m.scrollHeight,a.De.firstChild.scrollTop=a.De.firstChild.scrollHeight);b.id&&ci(a,b,d);return d}
function ci(a,b,c){a.Nc[b.id]=b;if(!b.H){a.Kb[b.id]=c;var d=D("reply-textarea",c),c=new Wf(d);M(a.j(),c,"key",r(function(a){a.stopPropagation();"13"==a.keyCode&&d.value&&(a.preventDefault(),a=Sh(T.a().h,this.d.id,d.value,l,l,b.id,b.k.id),ai(this,a),d.value="")},a))}}
function bi(a,b,c){if(c&&a.Cc[b.id])y(a.Cc[b.id],"online");else if(b.id!=T.a().h.id){if(!a.Cc[b.id]){var d=H(Ig,{k:b});a.Cc[b.id]=d;Ub(a.Dc,d,1);M(M(M(a.j(),d,"click",function(){Z.a().c("profile",b)}),d,"mouseover",function(){var a=Zc(d),c=Zc(this.Dc),h=C("hovercard");Zb(h,b.Ta()+(z(d,"online")?" is watching":" saw this"));var q=N(h);h.style.right=320-c.x-a.x-q.width/2-12+"px";h.style.top=c.y+a.y+210+"px";O(h,j)}),d,"mouseout",function(){O(C("hovercard"),l)})}O(a.Dc,j);Zb(D("status",a.Dc),"WATCHING"+
(a.Bg?" + SEEN":""));x(a.Cc[b.id],"online")}}m.zj=function(a){var a=a.target,b=G(a,k,"tweet");b&&(b=this.ud[b.id.split("-")[1]],z(a,"reply")&&Z.a().c("reply-tweet",b))};m.Ae=function(a){var a=a.target,b=G(a,k,"comment");if(b){var b=b.id.split("-")[1],c=this.Nc[b];z(a,"reply")?D("reply-textarea",this.Kb[c.H?c.H:c.id]).focus():z(a,"remove")&&this.d.c(Cd,b)}};m.of=function(a){var b=C("infocomment-"+a),c=b.nextSibling;F(b);for(Sa(this.sa,function(b){return b.id==a});c&&z(c,"reply");)c=c.nextSibling,F(c)};
m.rf=function(){A(this.m.parentElement,"top-grad",!!this.m.scrollTop);var a=this.m.style.maxHeight,b=Rb().height,a=a.substring(0,a.length-2),c=N(this.m).height;A(this.m.parentElement,"bottom-grad",this.m.scrollTop<this.m.scrollHeight-a-5&&c>=a&&640<b)};
m.resize=function(a,b){this.X=a!=i?a:this.X;var c=Rb().height;dd(this.De,c-283);640<c&&this.m&&this.m.parentElement?(Uc(this.m,"max-height",c-Zc(this.m.parentElement).y-313-this.X+"px"),this.rf()):640>c&&(Uc(this.m,"max-height",""),this.rf());b&&R(r(function(){(new Ef(this.m,[this.m.scrollLeft,this.m.scrollTop],[this.m.scrollLeft,this.m.scrollHeight],400)).play()},this),0)};
m.Mi=function(){O(C("overlay"),j);FB.ui({method:"feed",name:this.d.name,link:this.d.link,G:this.d.Za,caption:"on XYLO",description:this.d.description},function(){O(C("overlay"),l)});di(ee.a(),this.d.id,j,l)};m.Vi=function(){var a=window.open("https://twitter.com/share?url="+this.d.link+"&text=I'm watching "+this.d.name+" "+this.d.link,"Tweet","height=320,width=550");a.moveTo(screen.width/2-225,screen.height/2-150);a.focus();di(ee.a(),this.d.id,l,j)};m.Pi=function(){var a=Yd(this.Ha);X.a().c(of,a)};
m.Si=function(){ne().c(he,this.Ha,Tf(this.ed,16))};function ei(a,b,c,d,e,g){Q.call(this);this.Jb=ae();this.Ug=a||k;this.Nh=b||k;this.Ye={};this.Df=c||k;this.Oc=d||k;this.fg=g||k;this.Di=e||k;this.Fe=this.Jb?new rh:k;this.oc=this.Eg=0}t(ei,Q);
ei.prototype.v=function(a){ei.e.v.call(this,a);a.innerHTML="";a.scrollTop=0;x(this.b(),"ios-scroll");(this.Oc||this.Df)&&fi(this);!this.Oc&&this.fg&&U(this.fg,r(function(a){a=V(a.target);a.description&&this.Zc?(D("description",this.Zc).innerHTML=th(a.description),this.Eg=N(this.Zc).height,this.resize()):a.description&&fi(this)},this));this.s=E("div","loading",E("div","loading-spinner"));this.b().appendChild(this.s);O(this.s,l);z(this.b(),"starred")&&(this.qc=E("div","no-comments","Favorities will appear here."),
this.b().appendChild(this.qc));this.Xd=E("div","medias");this.b().appendChild(this.Xd);M(this.j(),window,"resize",va(R,r(this.resize,this)));this.Nh?(O(this.s,j),U(this.Nh,r(function(a){O(this.s,l);a=Qe(jf(a.target));a=Ma(a,function(a){return new zd(a)});v(a,this.te,this);this.oc=N(this.Xd).height;this.resize()},this))):this.Ug&&(v(this.Ug,this.te,this),this.oc=N(this.Xd).height,this.resize())};
ei.prototype.te=function(a){this.qc&&O(this.qc,l);var b=H(ah,{media:a}),c=D("list-play",b),d=D("list-plus",b);this.Xd.appendChild(b);if(this.Jb){var e=this.Fe,g=new qh(b,i);sh(e,g)}M(M(M(this.j(),b,"click",r(function(){Z.a().c("media-info",a)},this)),c,"click",r(function(b){b.preventDefault();b.stopPropagation();b=Yd(a);X.a().c(of,b)},this)),d,"click",function(b){b.preventDefault();b.stopPropagation();ne().c(he,a,j)});this.Ye[a.id]=b};
ei.prototype.resize=function(){dd(this.b(),Rb().height-40-(G(this.b(),k,"tabbed")?30:0))};function fi(a){a.Zc=H(Pg,{Za:a.Df,description:a.Oc?th(a.Oc):"",link:a.Di});a.b().appendChild(a.Zc);a.Eg=N(a.Zc).height;a.resize()};function gi(a){this.id=a.id;this.W=pe(T.a(),a.from_user);this.vj=pe(T.a(),a.to_user);this.text=a.text;this.vc=(this.time=a.time?Ad(a.time+"Z"):k)?Rh(this.time.getTime()):k};function hi(a){return'<div class="message'+(a.mi?" flip":"")+'"><a href="#user:'+J(a.message.W.id)+'"><div class="picture" style="background:'+J(a.message.W.color)+'"><img src="'+J(a.message.W.G)+'"/></div></a><div class="body"><a class="user" href="#user:'+J(a.message.W.id)+'">'+J(a.message.W.name)+'</a>  <div class="texts"><div class="text">'+J(a.message.text)+'<div class="timestamp">'+J(a.message.vc)+"</div></div></div></div></div>"}
function ii(a){return'<div class="text">'+J(a.message.text)+'<div class="timestamp">'+J(a.message.vc)+"</div></div>"};function ji(a,b){Q.call(this);this.ra=a||k;this.Wa=b||k;this.Xg={};this.f=new Nh(l);this.X=0;this.Ib=this.ra.id==T.a().h.id}t(ji,Q);
ji.prototype.v=function(a){ji.e.v.call(this,a);a.innerHTML="";a.scrollTop=0;this.lb=E("div","messages");this.b().appendChild(this.lb);A(this.lb,"inbox",this.Ib);this.s=E("div","spinner");this.lb.appendChild(this.s);O(this.s,l);this.Zd=E("div","no-comments","Start a private conversation.");this.lb.appendChild(this.Zd);this.Xa=E("div","no-comments","Load previous messages");this.lb.appendChild(this.Xa);O(this.Xa,!this.Ib&&10<=this.Wa.length);O(this.Zd,l);this.Ib?this.Wa=this.Wa.reverse():(rd(this.f,
this.b()),M(M(M(this.j(),window,"click",r(function(a){!G(a.target,k,"comment-input")&&!this.f.B()&&(this.f.ha(l),this.f.collapse()&&this.resize(0))},this)),this.Zd,"click",r(function(a){a.preventDefault();a.stopPropagation();this.f.ha(j)},this)),this.Xa,"click",r(this.Ei,this)));M(M(this.j(),this.f,"add",r(this.nb,this)),window,"resize",va(R,r(this.resize,this)));Ka(this.Wa,function(a){ki(this,a)},this);T.a().subscribe("new-message",function(a){if(a.W.id==this.ra.id||a.vj.id==this.ra.id){if(this.Ib){var c=
this.Xg[a.W.id];c&&F(c)}ki(this,a,this.Ib);this.resize()}},this);this.resize()};ji.prototype.Ei=function(){this.Xa&&O(this.Xa,l);O(this.s,j);U("/_message/"+this.ra.id+"?offset="+this.Wa.length,r(function(a){a=V(a.target);if(a.length){this.Vd=k;var b=E("div","separator");Ub(this.lb,b,3)}O(this.s,l);this.Xa&&O(this.Xa,!!a.length);Ka(a,function(a){a=new gi(a);this.Wa.push(a);ki(this,a,j);return a},this);a.length&&(this.b().scrollTop=0,this.Vd=k,this.b().scrollTop=b.offsetHeight)},this))};
function ki(a,b,c){O(a.Zd,l);a.Xa&&O(a.Xa,!a.Ib&&10<=a.Wa.length);var d;if(a.Vd&&a.Vd.W.id==b.W.id)d=H(ii,{message:b}),D("texts",a.Ai).appendChild(d),d=D("timestamp",d);else{var e=H(hi,{message:b,mi:b.W.id==T.a().h.id});a.Vd=b;a.Ai=e;c?Ub(a.lb,e,3):a.lb.appendChild(e);d=D("timestamp",e);a.Ib&&(a.Xg[b.W.id]=e,M(a.j(),e,"click",r(function(){Z.a().c("profile",b.W)},a)))}Uh(le.a(),b.time,d);c||(a.b().scrollTop=a.b().scrollHeight)}
ji.prototype.nb=function(a){var b=new gi({from_user:T.a().h,to_user:pe(T.a(),this.ra),text:a.text});b.time=new Md;b.vc=Rh(b.time.getTime());ki(this,b);U("/_message",a.Yh,"POST","from_id="+T.a().h.id+"&to_id="+this.ra.id+"&text="+a.text)};ji.prototype.resize=function(a){this.X=a||this.X;dd(this.b(),Rb().height-82-this.X-(G(this.b(),k,"tabbed")?30:0))};function li(a){return'<div class="user'+(a.media?" media":"")+'"><div class="name">'+J(a.k.name)+'</div><div class="picture" style="background:'+J(a.k.color)+'"><img src="'+J(a.k.G)+'"/></div>'+(a.timestamp?'<div class="timestamp">'+J(a.timestamp)+"</div>":"")+(a.media?'<div class="media"><div class="watched">LAST WATCHED </div><div class="watching">NOW WATCHING </div><a class="media-link" href="#info:'+J(a.media.id)+'">'+J(a.media.name)+"</a></div>":"")+"</div>"};function mi(a,b){Q.call(this);this.pe=a||k;this.Ph={};this.Pb=[];this.rc=[];this.uc=[];this.sb=!!b;this.X=0}t(mi,Q);
mi.prototype.v=function(a){mi.e.v.call(this,a);a.innerHTML="";a.scrollTop=0;x(a,"friendlist");x(a,"ios-scroll");this.sb||(a=E("div","label show-all",E("a",{href:"#friendlist:1"},"ALL FRIENDS >")),this.b().appendChild(a));this.ae=E("div","label online-friends-label",this.sb?"ONLINE FRIENDS":E("a",{href:"#friendlist:1"},"ONLINE FRIENDS"));O(this.ae,l);this.b().appendChild(this.ae);this.ef=E("div","online-friends");this.b().appendChild(this.ef);this.gd=E("div","label",this.sb?"RECENTLY ONLINE":E("a",
{href:"#friendlist:1"},"RECENTLY ONLINE"));O(this.gd,l);this.b().appendChild(this.gd);this.ee=E("div","recent-friends");this.b().appendChild(this.ee);this.sb&&(this.$d=E("div","label","OFFLINE FRIENDS"),O(this.$d,l),this.b().appendChild(this.$d),this.af=E("div","offline-friends"),this.b().appendChild(this.af),U("/_friends?offline=1",r(function(a){a=V(a.target);this.rc=Ma(a,function(a){a=pe(T.a(),a);ni(this,a,j);return a})},this)),this.sb&&this.resize(),M(this.j(),window,"resize",r(function(){this.sb&&
R(r(function(){this.resize()},this))},this)));if(this.pe)v(this.pe,function(a){ni(this,a)},this);else{var a=T.a(),b=r(function(a){this.pe=a;v(this.pe,function(a){ni(this,a)},this)},this);a.qg?b&&b(a.Ke):U("/_friends",r(function(a){a=V(a.target);this.Ke=Ma(a,function(a){return pe(this,a)},this);this.qg=j;b&&b(this.Ke)},a))}T.a().subscribe(oe,this.Dj,this)};
function ni(a,b,c){var d=l,e=H(li,{k:b,timestamp:b.Va?Rh(b.Va.getTime()):k,media:b.Qa});b.Va&&Uh(le.a(),b.Va,D("timestamp",e));b.sc&&!c?(O(a.ae,j),x(e,"online"),v(a.Pb,function(a,c){a.Ta()>b.Ta()&&(Ub(this.ef,e,c),Va(this.Pb,c,0,b),d=j)},a),d||(a.ef.appendChild(e),a.Pb.push(b))):b.Va&&!c&&5>a.uc.length?(O(a.gd,j),v(a.uc,function(a,c){a.Va&&(b.Va&&a.Va.getTime()<b.Va.getTime())&&(Ub(this.ee,e,c),Va(this.uc,c,0,b),d=j)},a),d||(a.ee.appendChild(e),a.uc.push(b))):a.sb&&(O(a.$d,j),v(a.rc,function(a,c){a.Ta()>
b.Ta()&&(Ub(this.af,e,c),Va(this.rc,c,0,b),d=j)},a),d||(a.af.appendChild(e),a.rc.push(b)));a.sb||(O(a.gd,!a.Pb.length),O(a.ee,!a.Pb.length));a.Ph[b.id]=e;c=D("media-link",e);M(a.j(),e,"click",r(function(){Z.a().c("profile",b)},a));c&&M(a.j(),c,"click",r(function(a){a.preventDefault();a.stopPropagation()},a))}
mi.prototype.Dj=function(a){var b=this.Ph[a.id];b&&(F(b),Sa(this.rc,function(b){return b.id==a.id})&&O(this.$d,!!this.rc.length),Sa(this.Pb,function(b){return b.id==a.id})&&O(this.ae,!!this.Pb.length),Sa(this.uc,function(b){return b.id==a.id})&&O(this.gd,!!this.uc.length));ni(this,a)};mi.prototype.resize=function(a){this.X=a||this.X;dd(this.b(),Rb().height-42-this.X-(G(this.b(),k,"tabbed")?30:0))};function oi(a,b){Q.call(this);this.Uh=a;this.wd=b||k;this.M=0;this.wh=!b;this.Eb=l;this.mg={};this.Jc={};this.Nb={};this.kb={};this.oe={};this.ph={};this.Of=[]}t(oi,Q);
oi.prototype.v=function(a){oi.e.v.call(this,a);a.innerHTML="";a.scrollTop=0;x(a,"stream");x(a,"ios-scroll");this.wh&&(this.pg=E("div","friendlist"),this.b().appendChild(this.pg),a=E("div","label","ACTIVITY"),this.b().appendChild(a));this.Gc=E("div","activities");this.b().appendChild(this.Gc);this.s=E("div","spinner");this.b().appendChild(this.s);O(this.s,l);this.qc=E("div","no-comments",this.wd?"Your activity will appear here.":"Friends' activity will appear here.");this.b().appendChild(this.qc);
pi(this,this.Uh);this.wh&&(this.Je=new mi(i,l),this.Je.i(this.pg));T.a().subscribe("new-activity",function(a){(this.wd==a.user.id||!this.wd&&a.user.id!=T.a().h.id)&&qi(this,a,i,i,j)},this);M(M(this.j(),this.b(),"scroll",r(function(){!this.Eb&&this.b().scrollTop+Rb().height>this.b().scrollHeight-60&&ri(this)},this)),window,"resize",va(R,r(this.resize,this)));this.resize()};
function ri(a){O(a.s,j);U("/_activity"+(a.wd?"/"+a.wd:"")+"?offset="+a.M,r(function(a){this.mg[String(a.target.Xc)]||(this.mg[String(a.target.Xc)]=j,a=V(a.target).activities,this.Eb=!a.length,A(this.s,"finished",this.Eb),O(this.s,this.Eb),pi(this,a))},a))}
function pi(a,b){a.Jc=[];a.Nb=[];a.kb=[];v(b,function(a){this.M++;switch(a.type){case "session":var a=a.session,b=a.channel_id in this.Jc?this.Jc[a.channel_id]:[];b.push(a);this.Jc[a.channel_id]=b;break;case "liked":this.Nb[a.media.id]||(b=a.media.id in this.kb?this.kb[a.media.id]:[],b.push(a),this.kb[a.media.id]=b,b=a.user.id in this.oe?this.oe[a.user.id]:[],b.push(a),this.oe[a.user.id]=b);break;case "comment":a=a.comment,b=a.media.id in this.Nb?this.Nb[a.media.id]:[],b.push(a),this.Nb[a.media.id]=
b,this.kb[a.media.id]&&Hb(this.kb,a.media.id)}},a);Db(a.Jc,function(a){qi(this,i,a,"session")},a);Db(a.Nb,function(a){qi(this,i,a,"comment")},a);Db(a.kb,function(a){1<a.length&&qi(this,i,a,"liked")},a);Db(a.oe,function(a){qi(this,i,a,"liked")},a)}
function qi(a,b,c,d,e){O(a.qc,l);var b=b||k,c=c||k,g=b?b.type:d,h=[],q=b?[pe(T.a(),b.user)]:[],u=b?Ad(b.time+"Z"):k;c&&v(c,function(a){Oa(q,function(b){return b.id==a.user.id})||q.push(pe(T.a(),a.user));var b=Ad((a.time||a.tune_in)+"Z");u=u&&u.getTime()>b.getTime()?u:b;"session"==g?v(a.media,function(a){!this.Nb[a.id]&&(!this.kb[a.id]&&!Oa(h,function(b){return b.id==a.id}))&&h.push(a)},this):"liked"==g&&!this.ph[a.media.id]&&(h.push(a.media),this.ph[a.media.id]=j)},a);switch(g){case "session":if(2>
q.length)return;var d=b?b.session:c[0],B=W.a().get(d.channel_id),h=b?b.session.media:h;5<h.length&&(h=h.slice(0,5));b=H(Mg,{z:q,I:B,time:Rh(u.getTime()),Kh:!!d.tune_out});break;case "comment":var h=b?[b.comment.media]:[Hd(Gd.a(),c[0].media)],I=b?[new Ph(b.comment)]:[];c&&v(c,function(a){I.push(new Ph(a))});b=H(Ng,{eb:I.reverse().slice(0,3),z:q,media:h[0]});break;case "liked":h=b?[b.media]:h;b=H(Og,{z:q,Vg:h.length,time:Rh(u.getTime())});break;default:return}if(h.length){Uh(le.a(),u,D("timestamp",
b));d=Pa(a.Of,function(a){return a.time<u.getTime()});Va(a.Of,d,0,{time:u,element:b});var P=D("medias",b);v(h,function(a){var b=Hd(Gd.a(),a),a=H(ah,{media:b}),c=D("list-play",a),d=D("list-plus",a);D("thumb",a);P.appendChild(a);M(M(M(this.j(),a,"click",function(){Z.a().c("media-info",b)}),c,"click",function(a){a.preventDefault();a.stopPropagation();a=Yd(b);X.a().c(of,a)}),d,"click",function(a){a.preventDefault();a.stopPropagation();ne().c(he,b,j)})},a);e?Ub(a.Gc,b,0):c?Ub(a.Gc,b,d):a.Gc.appendChild(b);
R(va(x,b,"show"))}}oi.prototype.resize=function(){var a=Rb().height-40-(G(this.b(),k,"tabbed")?40:10);dd(this.b(),a);N(this.Gc).height<a&&ri(this)};function si(a){Q.call(this);this.ra=this.Ha=a;this.Ka=["messages","activity","starred"]}t(si,Q);si.prototype.v=function(a){si.e.v.call(this,a);x(a,"profile");x(a,"ios-scroll");ic(a,Zg)};
si.prototype.w=function(){this.qa=D("tabs",this.b());U("/_message/"+this.ra.id,r(function(a){a=V(a.target);a=Ma(a,function(a){return new gi(a)},this);this.Wa=new ji(this.ra,a);this.Wa.i(D("messages-content",this.b()))},this));U("/_star/"+this.ra.id,r(function(a){var a=V(a.target),a=Ma(a,function(a){return new zd(a)}),b=T.a().h;b.zh=a;b.c("set-starred");this.md=new ei(a);this.md.i(D("starred-content",this.b()))},this));U("/_activity/"+this.ra.id,r(function(a){a=V(a.target).activities;this.Af=new oi(a,
this.ra.id);this.Af.i(D("activity-content",this.b()))},this));M(this.j(),this.qa,"click",r(function(a){a=G(a.target,"li");this.mb(a)},this));Gd.a().subscribe("star",function(a,b){if(b)this.md.te(a);else{var c=this.md,d=c.Ye[a.id];d&&(qc(d),Hb(c.Ye,a.id))}},this)};si.prototype.mb=function(a){v(this.Ka,function(b){A(this.qa.parentElement,b,z(a,b));this.u=z(a,b)?b:this.u},this)};function ti(){Q.call(this);this.Jb=ae();this.Xh=new Mh;this.Ka={};this.tb=[];this.wc=[];this.Fc=0}t(ti,Q);m=ti.prototype;
m.w=function(){ti.e.w.call(this);this.Hc=D("arrow",this.Yb);this.Ce=C("sidebar-content");this.Tg=C("media-list");this.lf=C("profile");this.og=C("friendlist");this.cg=C("conversation");this.Yb=C("toolbar");this.qa=D("tabs",this.b());this.re=D("activities-count",this.b());var a=new Wf(document);v(Vb(this.qa),function(a){var b=zb(a)[0];this.Ka[b]=a;this.tb.push(b)},this);this.df();U("/_activity",r(function(a){a=V(a.target);this.Af=new oi(a.activities);this.Af.i(C("stream"));Z.a().c("new-activites",parseInt(a.new_count,
10))},this));this.md=new si(T.a().h);this.md.i(C("my-profile"));this.R&&DESKTOP?(this.F=C("info"),this.u="info",ui(this,"info","info")):(this.F=C("stream"),this.u="stream",ui(this,"info","stream"));var b="left";v(this.tb,function(a){var c=D(a,this.Ce);a==this.u?b="right":x(c,b)},this);this.wc=[this.F,""];x(this.F,"current");if(this.Jb){this.Xh.i(C("admin"));var c=H(Qg,{name:"ADMIN",className:"admin"});this.qa.appendChild(c);this.Ka.admin=c;this.tb.push("admin")}vi(this);M(M(M(M(this.j(),D("back-button",
this.Yb),"click",r(function(a){var b=this.wc.shift();this.navigate(b[0],j,b[1]);vi(this);a.stopPropagation()},this)),this.qa,"click",r(function(a){var b=this.u,c=G(a.target,"li"),h=zb(c)[0];ui(this,this.u,h);x(c,"selected");vi(this);b!=this.u&&a.stopPropagation();"stream"==h&&this.dh(0,j)},this)),this.Yb,"click",r(function(a){((a=G(a.target,"li"))&&zb(a)[0]==this.u||!a)&&(new Ef(this.F,[this.F.scrollLeft,this.F.scrollTop],[this.F.scrollLeft,0],300)).play()},this)),a,"key",r(function(a){a.ctrlKey&&
"68"==a.keyCode&&Ab(this.b(),"dark")},this));DESKTOP&&Y.a().subscribe(yg,function(a){A(this.b(),"toggled",a);R(r(function(){A(this.b(),"collapsed",!a)},this),!a?500:0)},this);Z.a().subscribe("navigate",this.navigate,this);Z.a().subscribe("new-activites",this.dh,this);Z.a().subscribe("conversation",this.lj,this);Z.a().subscribe("media-list",this.nj,this);Z.a().subscribe("media-info",this.xh,this);Z.a().subscribe("friend-list",this.mj,this);Z.a().subscribe("profile",this.oj,this);W.a().subscribe(lf,
this.df,this);X.a().subscribe(of,this.df,this);W.a().subscribe(kf,this.Li,this);DESKTOP&&Y.a().subscribe(wi,function(a){A(this.b(),"admin",a);a?(Y.a().c(yg,j),ui(this,this.u,"admin")):"admin"==this.u&&ui(this,"admin","info")},this)};m.dh=function(a,b){b&&(this.Fc=0,O(this.re,l));this.Fc+=a;Zb(this.re,this.Fc.toString());O(this.re,!!this.Fc)};
m.df=function(a){if(a=a||W.a().D.Q())if(this.yb=a.media,!this.R||this.yb.id!=this.R.Ha.id){var a=this.R&&this.R.f.B()?this.R.f.B():k,b=this.R?this.R.d:k;qc(this.R);this.R=new Yh(this.yb,l,b,a);this.R.i(C("info"))}};m.Li=function(a){a=a||W.a().D;if((this.yb=a.Q()&&a.Q().media)&&(!this.R||this.yb.id!=this.R.Ha.id))qc(this.R),this.R=new Yh(this.yb),this.R.i(C("info")),this.xh(this.yb)};
function ui(a,b,c){var d=D(c,a.Ce),e=Ja(a.tb,b),b=Ja(a.tb,c),g=(e=e<b)?0:a.tb.length-1,h=e?g<a.tb.length:0<=g;for(g;h;g+=e?1:-1){var q=D(a.tb[g],a.Ce);if(e&&g>b||!e&&g<b)x(q,"right"),y(q,"left");else if(e&&g<b||!e&&g>b)A(q,"left",e),x(q,"right");else if(g==b){y(q,"right");y(q,"left");break}}a.u=c;Va(a.wc,0,0,[a.F,""]);y(a.F,"current");a.F=d;x(a.F,"current");vi(a)}
m.navigate=function(a,b,c){if(a!=this.F){var d=z(this.F,"screen");b?(y(this.F,"on"),y(this.F,"current"),x(a,"current"),this.F=a):(A(this.F,"on",!d),b=[this.F,cc(D("back-title",this.Yb))],Va(this.wc,0,0,b),y(this.F,"current"),this.F=a,x(this.F,"current"));A(this.Yb,"back",z(this.F,"slide"))}c&&Zb(D("back-title",this.Yb),c)};m.lj=function(a,b,c,d){(new Wh(a,b,c,d)).i(this.cg);Z.a().c("navigate",this.cg,l,a.name)};
m.nj=function(a,b,c,d,e,g,h){(new ei(b,c,d,e,g,h)).i(this.Tg);Z.a().c("navigate",this.Tg,l,a,d,e)};m.mj=function(){this.Je=new mi(i,j);this.Je.i(this.og);Z.a().c("navigate",this.og,l,"Friends")};m.xh=function(a,b,c,d){if(this.R&&a.id==this.R.Ha.id){y(this.Yb,"back");for(a=this.wc[0][0];a&&z(a,"slide");)a=this.wc.shift();ui(this,this.u,"info")}else{var e=C("media-info");(new Yh(a,b,c,d)).i(e);Z.a().c("navigate",e,l,a.name)}DESKTOP&&Y.a().c(yg,j)};
m.oj=function(a){if(!this.mf||!(this.mf.Ha.id==a.id&&this.F==this.lf))this.mf=new si(a),this.mf.i(this.lf),Z.a().c("navigate",this.lf,l,a.name),DESKTOP&&Y.a().c(yg,j)};function vi(a){var b=Math.round(N(a.Ka[a.u]).width/2+Zc(a.Ka[a.u]).x);a.Hc.style.transform="translate3d("+b+"px, 0,0)";a.Hc.style.msTransform="translate3d("+b+"px, 0,0)";a.Hc.style.WebkitTransform="translate3d("+b+"px, 0,0)";a.Hc.style.MozTransform="translate3d("+b+"px, 0,0)";a.Hc.style.Pj="translate3d("+b+"px, 0,0)"};function xi(a){return'<div class="main"><div id="stage" class="stage"><div id="ytplayer"></div><div id="stagecover"><div class="message"><span></span><div class="spinner" style="display:none"></div></div><div class="fullscreen"></div><div class="expand"></div><div class="play" style="display: none"><div></div></div><div class="pause" style="display: none"><div></div></div></div><div id="logo"></div></div><div id="sidebar" class="toggled"><div id="toolbar"><div class="back"><div class="back-button"><div>BACK</div></div><div class="back-title"></div></div><ul class="tabs"><li class="info tab selected"><div class="label">NOW</div></li><li class="stream tab"><div class="label">STREAM</div></li><li class="profile tab"><div class="label">ME</div></li></ul><div class="radial-grad"></div><div class="arrow"></div></div><div id="sidebar-content"><div id="info" class="screen info"><div class="no-info">Pick a channel or play a story.</div></div><div id="stream" class="screen stream"><div class="loading loading-activity"><div class="loading-spinner"></div></div></div><div id="my-profile" class="screen profile"></div><div id="admin" class="screen admin"></div><div id="media-list" class="slide media-list"></div><div id="conversation" class="slide"></div>'+
(a.Wh?'<div id="admin-col-list" class="slide admin"></div><div id="admin-list" class="slide admin-list"></div>':"")+'<div id="media-info" class="slide info"></div><div id="profile" class="slide profile"></div></div></div><div id="notify" class="notify"></div><div id="welcome" class="welcome" style="display:none"><div class="thanks"></div><div class="guide"></div><div class="friends"></div><div class="sidebar"></div><div class="close"></div></div></div>'};function ee(){}ja(ee);_gaq=[];ee.prototype.init=function(){_gaq.push(["_setAccount","UA-38058655-1"]);_gaq.push(["_trackPageview"]);var a=document.createElement("script");a.type="text/javascript";a.async=j;a.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)};ee.prototype.login=function(){_gaq.push(["_trackEvent","Users","Login",T.a().h.id])};
function me(a,b){_gaq.push(["_trackEvent","Media","Play",b.id]);_gaq.push(["_trackEvent","Users","Play",T.a().h.id])}ee.prototype.Ic=function(a,b){a.P||(_gaq.push(["_trackEvent","Channel","OptOut",b.id]),_gaq.push(["_trackEvent","Channel","OptIn",a.id]))};
ee.prototype.Z=function(a,b,c){_gaq.push(["_trackEvent","Media","Comment",a.id]);_gaq.push(["_trackEvent","Users","Comment",T.a().h.id]);b&&_gaq.push(["_trackEvent","Facebook","Comment",T.a().h.id]);c&&_gaq.push(["_trackEvent","Twitter","Comment",T.a().h.id])};
function di(a,b,c,d){_gaq.push(["_trackEvent","Media","Share",b.id]);_gaq.push(["_trackEvent","Users","Share",T.a().h.id]);c&&_gaq.push(["_trackEvent","Facebook","Share",T.a().h.id]);d&&_gaq.push(["_trackEvent","Twitter","Share",T.a().h.id]);U("/_share",Fd(),"POST","facebook="+c+"&twitter="+d)}fa("_gaq",_gaq);function Y(){S.call(this);this.$i=j;var a=C("controller");this.xf=!a||z(a,"sidebar-toggled");this.Me=a&&z(a,"guide-toggled");this.subscribe(yg,ba("xf"),this);this.subscribe(zg,ba("Me"),this);this.subscribe(Ag,ba("$i"),this)}t(Y,S);ja(Y);function Lh(a,b){var c=C("toggle-pending");Zb(c,b);O(c,!!b)}var Ag="play",Bg="mute",Cg="restart",zg="toggle-guide",yg="toggle-sidebar",wi="toggle-admin";function yi(){S.call(this);this.Rg=l}t(yi,S);ja(yi);yi.prototype.init=function(a){this.La=a;a=(new appengine.Channel(unescape(a))).open();a.onmessage=r(this.Oi,this);a.onclose=r(this.fh,this);L(window,"onbeforeunload",r(this.fh,this));return this};
yi.prototype.Oi=function(a){var b=Qe(a.data);switch(b.type){case "viewer_change":var c=pe(T.a(),b.user);c.sc!=b.online&&T.a().c(oe,c,b.online);var d=b.time&&Ad(b.time+"Z");c.Gd&&d&&c.Gd.end(d);if(a=b.last_channel_id&&W.a().get(b.last_channel_id))a.c("remove-viewer",c),c.Qa&&c.Qa.c(Dd,c,a,j);var e=b.channel_id&&W.a().get(b.channel_id),a=b.media&&Hd(Gd.a(),b.media);e&&(d=d||new Md,d=new de(b.session_id,c,e,d),c.Gd=d,e.c(ie,d),a=(d=e.Q())?d.media:a);a&&a.c(Dd,c,e);break;case "new_comment":c=new Ph(b.comment);
if(c.k.id!=T.a().h.id&&(d=b.tweet?new Qh(b.tweet):k,a=Hd(Gd.a(),b.comment.media)))a.c(Bd,c),d&&a.c("add-tweet",d);break;case "new_message":a=new gi(b.message);T.a().c("new-message",a);vd.a().c(xd,"messaged you",a.text,a.W,a.W.G,"#profile:"+a.W.id);break;case "new_activity":T.a().c("new-activity",b.activity);b.activity.user.id!=T.a().h.id&&Z.a().c("new-activites",1);break;case "update_programs":a=b.programs;e=W.a().get(b.channel_id);v(a,function(a){e.c(je,a)},this);break;case "new_programs":b.channel&&
(e=W.a().se(b.channel));v(b.programs,r(function(a){a=new Xd(a);if(e=e||W.a().get(b.channel_id))if(e.c(ge,a),!W.a().D||!W.a().D.Q())W.a().c(kf,e),W.a().c(lf,a)},this));break;case "twitter_auth":T.a().h.c($d)}};yi.prototype.fh=function(){if(!this.Rg){var a=W.a().D.P&&W.a().D.Qa&&Math.floor(X.a().getCurrentTime());DESKTOP&&U("/_settings",Fd(),"POST","show_guide="+Y.a().Me+"&show_sidebar="+Y.a().xf+(a?"&current_seek="+a:""));this.Rg=j}};function le(){S.call(this);this.Zf=new qe(1E3);this.Gh=new qe(3E4);this.Hh=[];this.Ie=[]}t(le,S);ja(le);le.prototype.init=function(){this.Zf.start();this.Gh.start();L(this.Zf,se,r(function(){v(this.Ie,function(a,b){a.time<s()&&(a.callback(),Ha.splice.call(this.Ie,b,1))},this)},this));L(this.Gh,se,r(function(){v(this.Hh,function(a){Zb(a.element,Rh(a.time.getTime()))},this)},this))};function Uh(a,b,c){86400>(s()-b.getTime())/1E3&&a.Hh.push({time:b,element:c})}
function ke(a,b,c){86400>(s()-b)/1E3&&a.Ie.push({time:b,callback:c})};function zi(){S.call(this);this.yk=[]}t(zi,S);ja(zi);zi.prototype.We=function(a){Db(a,r(function(a,c){v(a,r(function(a){a=new Xd(a);W.a().ac[c]&&W.a().ac[c].ue(a)},this))},this))};var Ai=l;function Bi(a){a.match(/[\d]+/g).length=3}
if(navigator.plugins&&navigator.plugins.length){var Ci=navigator.plugins["Shockwave Flash"];Ci&&(Ai=j,Ci.description&&Bi(Ci.description));navigator.plugins["Shockwave Flash 2.0"]&&(Ai=j)}else if(navigator.mimeTypes&&navigator.mimeTypes.length){var Di=navigator.mimeTypes["application/x-shockwave-flash"];(Ai=Di&&Di.enabledPlugin)&&Bi(Di.enabledPlugin.description)}else try{var Ei=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7"),Ai=j;Bi(Ei.GetVariable("$version"))}catch(Fi){try{Ei=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6"),
Ai=j}catch(Gi){try{Ei=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),Ai=j,Bi(Ei.GetVariable("$version"))}catch(Hi){}}};function Ii(){Q.call(this);this.pj=new ti;this.p=new ug;this.eh=new ud}t(Ii,Q);Ii.prototype.v=function(a){Ii.e.v.call(this,a);var b=H(xi,{Wh:ae()});Ub(a,b,0)};
Ii.prototype.w=function(){Ii.e.w.call(this);this.pj.i(C("sidebar"));this.p.i(C("stage"));this.eh.i(C("notify"));O(this.eh.b(),l);T.a().h.Fj||T.a();M(this.j(),document.body,"touchmove",function(a){G(a.target,"div","ios-scroll")||a.preventDefault()});M(this.j(),window,"click",function(a){var b=G(a.target,"a");if(b=b?b.href:k)if((b=b.match("#(.*):(.*)"))&&b.length)switch(a.preventDefault(),a.stopPropagation(),b[1]){case "user":a=T.a().get(b[2]);Z.a().c("profile",a);break;case "channel":a=W.a().get(b[2]);
W.a().c(kf,a);break;case "info":a=Gd.a().get(b[2]),Z.a().c("media-info",a)}});U("/_presence",r(function(a){a=V(a.target);this.fk=yi.a().init(a.token);var b=W.a();v(a.viewer_sessions,r(function(a){var b=pe(T.a(),a.user),e=T.a();Oa(e.ff,function(a){return a.id==b.id})||e.ff.push(b);var e=this.ac[a.channel_id],g=Ad(a.tune_in+"Z"),h=a.tune_out?Ad(a.tune_out+"Z"):k,a=new de(a.id,b,e,g,h);b.Gd=a;e&&(e.zd.push(a),e.c(ie,a),(a=e.Q())&&a.media.c(Dd,b,e))},b))},this))};
function Ji(a){var b=C("login"),c=C("static-content"),d=C("pages"),e=z(b,"app");A(b,"expanded",a);C("uvTab")&&A(C("uvTab"),"show",e&&a);a?(e?c.style.bottom=-N(d).height-80+"px":c.style.top=Math.max(10,Rb().height-280)+"px",a=e?Math.min(Rb().height-100,c.scrollHeight+80):Math.min(Rb().height-435,c.scrollHeight+190),!e||e&&!b.scrollTop?(e=new Ef(b,[b.scrollLeft,b.scrollTop],[b.scrollLeft,a],300),x(b,"scrolling"),e.play(),L(e,"end",function(){y(b,"scrolling")})):b.scrollTop=a):(c.style.top="",c.style.height=
"",e?R(function(){y(b,"show")},200):c.className="")}
function Ki(){var a=C("fb-login"),b=C("static-content"),c=C("login");x(a,"disabled");x(a,"spin");U("/_session",function(a){if(200==hf(a.target)){var e=V(a.target);if(e.error)Zb(C("error"),e.error),Li("error","Yikes...");else if(e.message)Zb(C("message"),e.message);else{y(document.body,"login");var a=e.channels,g=e.programs,e=e.current_user;if(!Gb(e)){var h=T.a();h.h=pe(h,e)}W.a().We(a);zi.a().We(g);a=W.a();a.D=a.ac[e.current_channel]||a.Kc[0];a.D=mf(a)||a.D;a.D&&a.Jf(a.D.Q());le.a().init();(new Ii).i(document.body);
ee.a().login();R(function(){R(function(){x(c,"hide");R(function(){O(C("homepage"),l);x(c,"app");x(b,"faq")},600)},600)})}}else 500==hf(a.target)?Li("error","Opps, check back later"):Li("wait")},"POST")}function Li(a,b){var c=C("fb-login");if(a){var d=D("power",c);x(d,a)}b&&(d=D("waitlist",c),Zb(d,b));y(c,"spin");x(c,"disabled");O(c,j);x(c,"show");x(c,"waitlist")}
fa("brkn.Mobile.staticInit",function(){var a=C("fb-login"),b=C("homepage"),c=C("login"),d=C("static-content"),e=C("pages"),g=C("footer"),h=l;x(b,"hide");var q=E("img");q.src="/static/img/homepage.jpg";L(q,"load",function(){y(b,"hide");x(b,"show")});R(function(){O(a,j);R(va(x,a,"show"),400)},100);L(c,"click",function(a){"static-scrollable"==a.target.id&&(a=z(c,"app"),h=l,a?Ji(h):(a=new Ef(c,[c.scrollLeft,c.scrollTop],[c.scrollLeft,0],300),a.play(),L(a,"end",va(Ji,h))))});L(c,"scroll",function(){!z(c,
"scrolling")&&1>c.scrollTop&&(h=l,Ji(h))});L(g,"click",function(a){var a=G(a.target,k,"section"),b=z(c,"app");a&&(h=j,d.className=a.id,d.style.height=N(e).height+(b?80:220)+"px",Ji(h))});L(window,"resize",va(Ji,h));ee.a().init();IPHONE&&(x(document.body,"iphone"),x(document.body,"login"),window.onload=function(){R(function(){window.scrollTo(0,1)},1E3)})});
fa("brkn.Mobile.auth",function(){FB.getLoginStatus(function(a){if("connected"===a.status)Ki();else{var b=C("fb-login");L(b,"click",function(){x(b,"disabled");FB.login(function(a){a.authResponse?Ki():y(b,"disabled")},{scope:"email"})})}})});