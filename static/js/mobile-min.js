function f(a){throw a;}var i=void 0,j=!0,k=null,l=!1;function ba(){return function(){}}function ca(a){return function(b){this[a]=b}}function da(a){return function(){return this[a]}}function ea(a){return function(){return a}}var n,fa=fa||{},ha=this;function ia(a,b){var c=a.split("."),d=ha;!(c[0]in d)&&d.execScript&&d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&ja(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}
function la(a){for(var a=a.split("."),b=ha,c;c=a.shift();)if(b[c]!=k)b=b[c];else return k;return b}function ma(){}function na(a){a.b=function(){return a.Jh?a.Jh:a.Jh=new a}}
function oa(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function ja(a){return a!==i}function pa(a){return"array"==oa(a)}function qa(a){var b=oa(a);return"array"==b||"object"==b&&"number"==typeof a.length}function p(a){return"string"==typeof a}function ra(a){return"function"==oa(a)}function sa(a){var b=typeof a;return"object"==b&&a!=k||"function"==b}function ta(a){return a[ua]||(a[ua]=++va)}var ua="closure_uid_"+Math.floor(2147483648*Math.random()).toString(36),va=0;
function wa(a,b,c){return a.call.apply(a.bind,arguments)}function xa(a,b,c){a||f(Error());if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function q(a,b,c){q=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?wa:xa;return q.apply(k,arguments)}
function ya(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=Array.prototype.slice.call(arguments);b.unshift.apply(b,c);return a.apply(this,b)}}var s=Date.now||function(){return+new Date};function za(a,b){var c=b||{},d;for(d in c)var e=(""+c[d]).replace(/\$/g,"$$$$"),a=a.replace(RegExp("\\{\\$"+d+"\\}","gi"),e);return a}function t(a,b){function c(){}c.prototype=b.prototype;a.g=b.prototype;a.prototype=new c;a.prototype.constructor=a};function u(){0!=Aa&&(this.Gl=Error().stack,Ba[ta(this)]=this)}var Aa=0,Ba={};u.prototype.Xd=l;u.prototype.$=function(){if(!this.Xd&&(this.Xd=j,this.k(),0!=Aa)){var a=ta(this);delete Ba[a]}};u.prototype.k=function(){this.ij&&Ca.apply(k,this.ij);if(this.hi)for(;this.hi.length;)this.hi.shift()()};function Da(a){a&&"function"==typeof a.$&&a.$()}function Ca(a){for(var b=0,c=arguments.length;b<c;++b){var d=arguments[b];qa(d)?Ca.apply(k,d):Da(d)}};function Ea(a,b){for(var c=1;c<arguments.length;c++)var d=String(arguments[c]).replace(/\$/g,"$$$$"),a=a.replace(/\%s/,d);return a}function Fa(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")}function Ga(a,b){var c=String(a).toLowerCase(),d=String(b).toLowerCase();return c<d?-1:c==d?0:1}
function Ha(a){if(!Ia.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(Ja,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(Ka,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(La,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(Ma,"&quot;"));return a}var Ja=/&/g,Ka=/</g,La=/>/g,Ma=/\"/g,Ia=/[&<>\"]/;function Oa(a){var a=ja(i)?a.toFixed(i):String(a),b=a.indexOf(".");-1==b&&(b=a.length);b=Math.max(0,2-b);return Array(b+1).join("0")+a}
function Pa(a){return String(a).replace(/\-([a-z])/g,function(a,c){return c.toUpperCase()})};var Qa=Array.prototype,Ra=Qa.indexOf?function(a,b,c){return Qa.indexOf.call(a,b,c)}:function(a,b,c){c=c==k?0:0>c?Math.max(0,a.length+c):c;if(p(a))return!p(b)||1!=b.length?-1:a.indexOf(b,c);for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},v=Qa.forEach?function(a,b,c){Qa.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=p(a)?a.split(""):a,g=0;g<d;g++)g in e&&b.call(c,e[g],g,a)};function Sa(a,b,c){for(var d=p(a)?a.split(""):a,e=a.length-1;0<=e;--e)e in d&&b.call(c,d[e],e,a)}
var Ta=Qa.filter?function(a,b,c){return Qa.filter.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=[],g=0,h=p(a)?a.split(""):a,m=0;m<d;m++)if(m in h){var r=h[m];b.call(c,r,m,a)&&(e[g++]=r)}return e},Ua=Qa.map?function(a,b,c){return Qa.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),g=p(a)?a.split(""):a,h=0;h<d;h++)h in g&&(e[h]=b.call(c,g[h],h,a));return e},Va=Qa.every?function(a,b,c){return Qa.every.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=p(a)?a.split(""):a,g=0;g<d;g++)if(g in
e&&!b.call(c,e[g],g,a))return l;return j};function Wa(a,b,c){b=Xa(a,b,c);return 0>b?k:p(a)?a.charAt(b):a[b]}function Xa(a,b,c){for(var d=a.length,e=p(a)?a.split(""):a,g=0;g<d;g++)if(g in e&&b.call(c,e[g],g,a))return g;return-1}function Ya(a,b){return 0<=Ra(a,b)}function Za(a,b){var c=Ra(a,b);0<=c&&Qa.splice.call(a,c,1)}function $a(a,b,c){b=Xa(a,b,c);return 0<=b?(Qa.splice.call(a,b,1),j):l}function ab(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]}
function bb(a,b){for(var c=1;c<arguments.length;c++){var d=arguments[c],e;if(pa(d)||(e=qa(d))&&d.hasOwnProperty("callee"))a.push.apply(a,d);else if(e)for(var g=a.length,h=d.length,m=0;m<h;m++)a[g+m]=d[m];else a.push(d)}}function cb(a,b,c,d){Qa.splice.apply(a,db(arguments,1))}function db(a,b,c){return 2>=arguments.length?Qa.slice.call(a,b):Qa.slice.call(a,b,c)}function eb(a,b){return a>b?1:a<b?-1:0};function w(){u.call(this);this.Ma=[];this.Kb={}}t(w,u);n=w.prototype;n.Ph=1;n.ze=0;n.subscribe=function(a,b,c){var d=this.Kb[a];d||(d=this.Kb[a]=[]);var e=this.Ph;this.Ma[e]=a;this.Ma[e+1]=b;this.Ma[e+2]=c;this.Ph=e+3;d.push(e);return e};n.Vi=function(a){if(0!=this.ze)return this.sd||(this.sd=[]),this.sd.push(a),l;var b=this.Ma[a];if(b){var c=this.Kb[b];c&&Za(c,a);delete this.Ma[a];delete this.Ma[a+1];delete this.Ma[a+2]}return!!b};
n.c=function(a,b){var c=this.Kb[a];if(c){this.ze++;for(var d=db(arguments,1),e=0,g=c.length;e<g;e++){var h=c[e];this.Ma[h+1].apply(this.Ma[h+2],d)}this.ze--;if(this.sd&&0==this.ze)for(;c=this.sd.pop();)this.Vi(c)}};n.clear=function(a){if(a){var b=this.Kb[a];b&&(v(b,this.Vi,this),delete this.Kb[a])}else this.Ma.length=0,this.Kb={}};n.k=function(){w.g.k.call(this);delete this.Ma;delete this.Kb;delete this.sd};function fb(){w.call(this)}t(fb,w);na(fb);function gb(a){this.id=a.id;this.L=a.picture;this.name=a.name;this.description=a.description;this.link=a.link};function hb(a){w.call(this);this.id=a.id;this.name=a.name;this.host="youtube";this.fd=a.host_id;this.Jj="http://www.youtube.com/watch?v="+a.host_id;this.duration=a.duration;this.live=!!a.live;this.Uf=[];this.rk=k;this.kh=l;this.description=a.description;this.link=a.link||"xylocast.com/?m="+this.id;this.oa=a.publisher&&new gb(a.publisher);this.ic=a.published&&ib(a.published+"Z");this.qb="http://i.ytimg.com/vi/"+this.fd+"/0.jpg";this.Ni="http://i.ytimg.com/vi/"+this.fd+"/1.jpg";this.gm="http://i.ytimg.com/vi/"+
this.fd+"/2.jpg";this.hm="http://i.ytimg.com/vi/"+this.fd+"/3.jpg";this.fm=new jb(480,360);this.Mi=37;this.Ra=[];this.Ti=[];this.Wc=a.comment_count||0;this.dm=a.star_count||0;this.Qj=a.like_count||0;this.Ll=a.dislike_count||0;this.mg=[];this.Ic={};this.hj=a.collection_id;this.subscribe(kb,this.ub,this);this.subscribe(nb,this.yk,this);this.subscribe(ob,this.Ve,this)}t(hb,w);function pb(a){return a.ic.getMonth()+1+"/"+a.ic.getDate()+"/"+a.ic.getYear()}var kb="add-comment",nb="remove-comment",ob="watching";
hb.prototype.Se=function(a){Wa(this.Uf,function(b){return a.id==b.id})||this.Uf.push(a)};hb.prototype.ub=function(a){if(a.A){var b=Wa(this.Ra,function(b){return b.id==a.A});b&&b.yd.push(a)}else this.Ra.push(a);this.Wc+=1};hb.prototype.yk=function(a){x("/_comment",qb(),"POST","delete=true&id="+a.id);if(a.A){var b=Wa(this.Ra,function(b){return b.id==a.A});b&&$a(b.yd,function(b){return b.id==a.id})}else $a(this.Ra,function(b){return b.id==a.id});this.Wc-=1};
hb.prototype.Ve=function(a,b,c){if(c)rb(this.Ic,a.id);else if(this.Ic[a.id]=a,a.fb=this,a.id!=A.b().h.id&&(!b||b&&C.b().I&&b.id!=C.b().I.id))fb.b().c("flash","is watching "+(b?b.name:""),this.name,a,this.Ni,"#info:"+this.id)};function sb(){w.call(this);this.cc={}}t(sb,w);na(sb);function tb(a,b){var c=a.get(b.id);c||(c=new hb(b),a.add(c));return c}sb.prototype.get=function(a){return a in this.cc?this.cc[a]:i};sb.prototype.add=function(a){this.cc[a.id]=a};var ub={hl:["BC","AD"],gl:["Before Christ","Anno Domini"],jl:"JFMAMJJASOND".split(""),rl:"JFMAMJJASOND".split(""),il:"January February March April May June July August September October November December".split(" "),ql:"January February March April May June July August September October November December".split(" "),nl:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),tl:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),xl:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),
vl:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),pl:"Sun Mon Tue Wed Thu Fri Sat".split(" "),ul:"Sun Mon Tue Wed Thu Fri Sat".split(" "),kl:"SMTWTFS".split(""),sl:"SMTWTFS".split(""),ol:["Q1","Q2","Q3","Q4"],ml:["1st quarter","2nd quarter","3rd quarter","4th quarter"],el:["AM","PM"],fl:["EEEE, MMMM d, y","MMMM d, y","MMM d, y","M/d/yy"],wl:["h:mm:ss a zzzz","h:mm:ss a z","h:mm:ss a","h:mm a"],$i:6,yl:[5,6],aj:5};var vb=/^(\d{4})(?:(?:-?(\d{2})(?:-?(\d{2}))?)|(?:-?(\d{3}))|(?:-?W(\d{2})(?:-?([1-7]))?))?$/,wb=/^(\d{2})(?::?(\d{2})(?::?(\d{2})(\.\d+)?)?)?$/,xb=/Z|(?:([-+])(\d{2})(?::?(\d{2}))?)$/;
function ib(a){var b=new yb(2E3),a=Fa(a),a=a.split(-1==a.indexOf("T")?" ":"T"),c;var d=a[0].match(vb);if(d){var e=Number(d[2]),g=Number(d[3]),h=Number(d[4]);c=Number(d[5]);var m=Number(d[6])||1;b.setFullYear(Number(d[1]));h?(b.setDate(1),b.setMonth(0),b.add(new zb(Ab,h-1))):c?(b.setMonth(0),b.setDate(1),d=b.getDay()||7,b.add(new zb(Ab,(4>=d?1-d:8-d)+(Number(m)+7*(Number(c)-1))-1))):(e&&(b.setDate(1),b.setMonth(e-1)),g&&b.setDate(g));c=j}else c=l;if(c&&!(c=2>a.length))a=a[1],c=a.match(xb),m=0,c&&("Z"!=
c[0]&&(m=60*c[2]+Number(c[3]),m*="-"==c[1]?1:-1),m-=b.getTimezoneOffset(),a=a.substr(0,a.length-c[0].length)),(c=a.match(wb))?(b.setHours(Number(c[1])),b.setMinutes(Number(c[2])||0),b.setSeconds(Number(c[3])||0),b.setMilliseconds(c[4]?1E3*c[4]:0),0!=m&&b.setTime(b.getTime()+6E4*m),c=j):c=l;return c?b:k}
function zb(a,b,c,d,e,g){p(a)?(this.Pa=a==Bb?b:0,this.Ja=a==Cb?b:0,this.Fa=a==Ab?b:0,this.wa=a==Db?b:0,this.ya=a==Eb?b:0,this.Ba=a==Fb?b:0):(this.Pa=a||0,this.Ja=b||0,this.Fa=c||0,this.wa=d||0,this.ya=e||0,this.Ba=g||0)}
zb.prototype.Jd=function(a){var b=Math.min(this.Pa,this.Ja,this.Fa,this.wa,this.ya,this.Ba),c=Math.max(this.Pa,this.Ja,this.Fa,this.wa,this.ya,this.Ba);if(0>b&&0<c)return k;if(!a&&0==b&&0==c)return"PT0S";c=[];0>b&&c.push("-");c.push("P");(this.Pa||a)&&c.push(Math.abs(this.Pa)+"Y");(this.Ja||a)&&c.push(Math.abs(this.Ja)+"M");(this.Fa||a)&&c.push(Math.abs(this.Fa)+"D");if(this.wa||this.ya||this.Ba||a)c.push("T"),(this.wa||a)&&c.push(Math.abs(this.wa)+"H"),(this.ya||a)&&c.push(Math.abs(this.ya)+"M"),
(this.Ba||a)&&c.push(Math.abs(this.Ba)+"S");return c.join("")};zb.prototype.clone=function(){return new zb(this.Pa,this.Ja,this.Fa,this.wa,this.ya,this.Ba)};var Bb="y",Cb="m",Ab="d",Db="h",Eb="n",Fb="s";zb.prototype.add=function(a){this.Pa+=a.Pa;this.Ja+=a.Ja;this.Fa+=a.Fa;this.wa+=a.wa;this.ya+=a.ya;this.Ba+=a.Ba};
function Gb(a,b,c){"number"==typeof a?(this.m=new Date(a,b||0,c||1),Hb(this,c||1)):sa(a)?(this.m=new Date(a.getFullYear(),a.getMonth(),a.getDate()),Hb(this,a.getDate())):(this.m=new Date(s()),this.m.setHours(0),this.m.setMinutes(0),this.m.setSeconds(0),this.m.setMilliseconds(0))}n=Gb.prototype;n.Zd=ub.$i;n.ae=ub.aj;n.clone=function(){var a=new Gb(this.m);a.Zd=this.Zd;a.ae=this.ae;return a};n.getFullYear=function(){return this.m.getFullYear()};n.getYear=function(){return this.getFullYear()};
n.getMonth=function(){return this.m.getMonth()};n.getDate=function(){return this.m.getDate()};n.getTime=function(){return this.m.getTime()};n.getDay=function(){return this.m.getDay()};n.getUTCHours=function(){return this.m.getUTCHours()};n.getTimezoneOffset=function(){return this.m.getTimezoneOffset()};function Ib(a){a=a.getTimezoneOffset();if(0==a)a="Z";else var b=Math.abs(a)/60,c=Math.floor(b),b=60*(b-c),a=(0<a?"-":"+")+Oa(c)+":"+Oa(b);return a}
n.set=function(a){this.m=new Date(a.getFullYear(),a.getMonth(),a.getDate())};n.setFullYear=function(a){this.m.setFullYear(a)};n.setMonth=function(a){this.m.setMonth(a)};n.setDate=function(a){this.m.setDate(a)};n.setTime=function(a){this.m.setTime(a)};
n.add=function(a){if(a.Pa||a.Ja){var b=this.getMonth()+a.Ja+12*a.Pa,c=this.getYear()+Math.floor(b/12),b=b%12;0>b&&(b+=12);var d;a:{switch(b){case 1:d=0==c%4&&(0!=c%100||0==c%400)?29:28;break a;case 5:case 8:case 10:case 3:d=30;break a}d=31}d=Math.min(d,this.getDate());this.setDate(1);this.setFullYear(c);this.setMonth(b);this.setDate(d)}a.Fa&&(a=new Date((new Date(this.getYear(),this.getMonth(),this.getDate(),12)).getTime()+864E5*a.Fa),this.setDate(1),this.setFullYear(a.getFullYear()),this.setMonth(a.getMonth()),
this.setDate(a.getDate()),Hb(this,a.getDate()))};n.Jd=function(a,b){return[this.getFullYear(),Oa(this.getMonth()+1),Oa(this.getDate())].join(a?"-":"")+(b?Ib(this):"")};n.toString=function(){return this.Jd()};function Hb(a,b){a.getDate()!=b&&a.m.setUTCHours(a.m.getUTCHours()+(a.getDate()<b?1:-1))}n.valueOf=function(){return this.m.valueOf()};function yb(a,b,c,d,e,g,h){this.m="number"==typeof a?new Date(a,b||0,c||1,d||0,e||0,g||0,h||0):new Date(a?a.getTime():s())}t(yb,Gb);n=yb.prototype;
n.getHours=function(){return this.m.getHours()};n.getMinutes=function(){return this.m.getMinutes()};n.getSeconds=function(){return this.m.getSeconds()};n.getUTCHours=function(){return this.m.getUTCHours()};n.setHours=function(a){this.m.setHours(a)};n.setMinutes=function(a){this.m.setMinutes(a)};n.setSeconds=function(a){this.m.setSeconds(a)};n.setMilliseconds=function(a){this.m.setMilliseconds(a)};n.setUTCHours=function(a){this.m.setUTCHours(a)};
n.add=function(a){Gb.prototype.add.call(this,a);a.wa&&this.setHours(this.m.getHours()+a.wa);a.ya&&this.setMinutes(this.m.getMinutes()+a.ya);a.Ba&&this.setSeconds(this.m.getSeconds()+a.Ba)};n.Jd=function(a,b){var c=Gb.prototype.Jd.call(this,a);return a?c+" "+Oa(this.getHours())+":"+Oa(this.getMinutes())+":"+Oa(this.getSeconds())+(b?Ib(this):""):c+"T"+Oa(this.getHours())+Oa(this.getMinutes())+Oa(this.getSeconds())+(b?Ib(this):"")};n.toString=function(){return this.Jd()};
n.clone=function(){var a=new yb(this.m);a.Zd=this.Zd;a.ae=this.ae;return a};function Jb(a,b){w.call(this);var c=b||k,d=a||k;this.id=d?d.id:c.id;this.media=d?tb(sb.b(),d.media):c;sb.b().add(this.media);this.time=d?ib(d.time+"Z"):new yb;this.async=d?d.async:j;this.seek=d?d.seek:b?0:k;this.ended=l}t(Jb,w);function Kb(a){return new Jb(i,a)};function Lb(a){var b=s(),c=Math.floor((b-a)/6E4),b=l;0>c&&(b=j,c*=-1);if(60>c)return Mb(c,b,0);c=Math.floor(c/60);if(24>c)return Mb(c,b,1);c=new Date(s());c.setHours(0);c.setMinutes(0);c.setSeconds(0);c.setMilliseconds(0);c=Math.ceil((c.getTime()-a)/864E5);b&&(c*=-1);return 14>c?Mb(c,b,2):""}
function Mb(a,b,c){return!b&&0==c?(b=za("{$num} minute ago",{num:a}),c=za("{$num} minutes ago",{num:a}),1==a?b:c):b&&0==c?(b=za("in {$num} minute",{num:a}),c=za("in {$num} minutes",{num:a}),1==a?b:c):!b&&1==c?(b=za("{$num} hour ago",{num:a}),c=za("{$num} hours ago",{num:a}),1==a?b:c):b&&1==c?(b=za("in {$num} hour",{num:a}),c=za("in {$num} hours",{num:a}),1==a?b:c):!b&&2==c?(b=za("{$num} day ago",{num:a}),c=za("{$num} days ago",{num:a}),1==a?b:c):b&&2==c?(b=za("in {$num} day",{num:a}),c=za("in {$num} days",
{num:a}),1==a?b:c):""};function Nb(a){w.call(this);this.id=a.id;this.name=a.name;this.url=a.profile_url;this.location=a.location||"";this.Zi=a.welcomed;this.Hc=a.online;this.Kl=a.demo;this.fb=a.last_seen?tb(sb.b(),a.last_seen):k;this.history=[];this.Hi=[];this.L=Ea("https://graph.facebook.com/%s/picture",this.id);for(this.color=Raphael.getColor();"#00bf85"==this.color||"#00bf2f"==this.color;)this.color=Raphael.getColor();this.bj=a.access_level;this.zl=[];this.r=a.last_login?ib(a.last_login+"Z"):k;this.am=a.session_count;
this.Bl=a.ave_session_time?a.ave_session_time.toFixed(2):k;this.bm=a.show_guide!=i?a.show_guide:j;this.cm=a.show_sidebar!=i?a.show_sidebar:j;this.vk=a.post_facebook!=i?a.post_facebook:j;this.si=a.post_twitter!=i?a.post_twitter:j;this.fe=a.has_twitter;this.wf=l;this.Sk=a.temp;this.subscribe(Ob,function(){this.si=j},this)}t(Nb,w);function Pb(){return A.b().h.bj==Qb}Nb.prototype.$d=function(){var a=this.name.split(" ");return a&&a.length?a[0]:this.name};
function Rb(a,b){return Wa(a.Hi,function(a){return a.id==b.id})}var Ob="twitter-auth",Qb=2;function Sb(a,b,c,d,e){this.id=a;this.p=b;this.O=c;this.Zk=d;this.xg=e||k;this.$h=[]}Sb.prototype.mg=function(a){this.$h.push(a);this.O&&(this.O.U&&this.O.J)&&(this.O.J.seek=k,this.O.J=k);x("/_seen",qb(),"POST","media_id="+a.id+"&session_id="+this.id+"&async="+(this.O?this.O.U:l))};
Sb.prototype.end=function(a){this.xg=a;a=(this.xg.getTime()-this.Zk.getTime())/1E3;if(this.p.id==A.b().h.id&&this.O){Tb.b();var b=this.O,c=this.$h.length;A.b().ue.length?_gaq.push(["_trackEvent","Users","SessionTimeWithFriends",A.b().h.id,Math.round(a)]):_gaq.push(["_trackEvent","Users","SessionTimeNoFriends",A.b().h.id,Math.round(a)]);_gaq.push(["_trackEvent","Users","SessionMediaCount",A.b().h.id,c]);_gaq.push(["_trackEvent","Users","Active",A.b().h.id,c]);_gaq.push(["_trackEvent","Users",b.id+
"-time",A.b().h.id,a]);_gaq.push(["_trackEvent","Users",b.id+"-medias",A.b().h.id,c]);b.U||(_gaq.push(["_trackEvent","Channel","SessionTime",b.id,a]),_gaq.push(["_trackEvent","Channel","SessionMediaCount",b.id,c]))}};function Ub(a){w.call(this);this.id=a.id;this.name=a.name;this.U=a.my_channel;this.$j=j;this.fb=a.current_media?tb(sb.b(),a.current_media):k;this.Jl=a.current_seek;this.ia=[];this.vd={};this.J=a.current_program&&new Jb(a.current_program);this.Dg=[];this.queue=[];this.Xa=0;this.Hc=a.online!=i?a.online:k;this.subscribe(Vb,this.Ue,this);this.subscribe(Wb,this.cj,this);this.subscribe(Xb,this.Ve,this);this.subscribe(Yb,this.bl,this);this.J||(this.vb=0,this.J=this.ia[0])}t(Ub,w);n=Ub.prototype;
n.Ue=function(a){this.ia.push(a);this.vd[a.id]=a;a.async&&(this.vb=this.ia.length-1,this.J=a);a.time.getTime()+1E3*a.media.duration>this.Xa&&(this.Xa=a.time.getTime()+1E3*a.media.duration-12E4,Zb($b.b(),this.Xa,q(this.Jf,this,this.Xa)),Zb($b.b(),this.Xa+6E4,q(this.Jf,this,this.Xa+6E4)))};
n.Jf=function(a){this.Xa<=a&&!this.U&&x("/_programming/"+this.id,q(function(a){a=D(a.target);a.length||Zb($b.b(),s()+1E3,q(this.Jf,this,s()+1E3));v(a,function(a){if(!this.vd[a.id]){var b=this.vd[a.id];b||(b=new Jb(a),this.Ue(b));this.c(Vb,b)}},this)},this))};
n.cj=function(a,b){b?(this.queue.push(a),fb.b().c("flash","Added to queue",a.name,i,a.Ni,"#info:"+a.id),ac(Tb.b(),a),x("/_queue",qb(),"POST","media_id="+a.id)):($a(this.queue,function(b){return b.id==a.id},this),x("/_queue",qb(),"POST","media_id="+a.id+"&delete=1"))};n.Ve=function(a){this.Dg.push(a)};n.bl=function(a){var b=a.id in this.vd?this.vd[a.id]:i;b&&(b.time=ib(a.time+"Z"))};
n.Y=function(a){if(this.J&&this.J.async&&this.J.seek!=k&&!this.J.ended)return this.J;if(!this.ia.length)return k;if(a)return this.ia[this.vb+a];if(this.$j&&this.J){if(this.J.ended){a=this.vb;if(this.ia[a+1])a=this.ia[a+1];else if(this.U)if(this.queue.length){a=this.queue[0];this.c(Wb,a,l);var b=Kb(a);bc().c(Vb,b);x("/_addprogram",qb(),"POST","channel_id="+C.b().U.id+"&media_id="+a.id+"&now=true");a=b}else a=k;else a=k;this.J=a}}else if(!this.U){a:if(a=this.J,b=this.vb,a&&s()>=a.time.getTime()&&s()<
a.time.getTime()+1E3*a.media.duration)a=this.J=a;else{if(!a||a.time.getTime()>=s())b=0,a=this.ia[0];for(;b<this.ia.length;b++){var c=this.ia[b];if(s()>=c.time.getTime()&&s()<c.time.getTime()+1E3*c.media.duration){a=c;break a}}}this.J=a}this.J&&(!this.ia[this.vb]||this.ia[this.vb].id!=this.J.id)?(a=Xa(this.ia,q(function(a){return a.id==this.J.id},this)),this.vb=Math.max(a,0)):this.J||(this.vb=this.ia.length);return this.J};var Vb="add-program",Wb="add-queue",Xb="add-viewer",Yb="update-program";function A(){w.call(this);this.Od={};this.ph=l;this.sf=[];this.nj={};this.ue=[];this.subscribe(cc,function(a,b){a.Hc=b},this)}t(A,w);na(A);A.prototype.add=function(a){this.Od[a.id]=a};A.prototype.get=function(a){return this.Od[a]};function dc(a,b){var c=a.get(b.id);if(!c||c.Sk)c=new Nb(b),a.add(c);b.online==l&&c.Hc==j&&(c.r=new yb);c.Hc=b.online||!!Wa(a.ue,function(a){return a.id==c.id},a);c.fb=b.last_seen?tb(sb.b(),b.last_seen):c.fb;return c}
A.prototype.search=function(a){var b=Ta(ec(this.Od),function(b){return b.name&&0==Ga(a,b.name.substr(0,a.length))},this);Ta(ec(this.nj),function(b){return 0==Ga(a,b.substr(0,a.length))},this);return b};var cc="online";var fc,gc,hc,ic,jc;function kc(){return ha.navigator?ha.navigator.userAgent:k}function lc(){return ha.navigator}ic=hc=gc=fc=l;var mc;if(mc=kc()){var nc=lc();fc=0==mc.indexOf("Opera");gc=!fc&&-1!=mc.indexOf("MSIE");hc=!fc&&-1!=mc.indexOf("WebKit");ic=!fc&&!hc&&"Gecko"==nc.product}var oc=fc,E=gc,pc=ic,F=hc,qc=lc();jc=-1!=(qc&&qc.platform||"").indexOf("Mac");var rc=!!lc()&&-1!=(lc().appVersion||"").indexOf("X11"),sc;
a:{var tc="",uc;if(oc&&ha.opera)var vc=ha.opera.version,tc="function"==typeof vc?vc():vc;else if(pc?uc=/rv\:([^\);]+)(\)|;)/:E?uc=/MSIE\s+([^\);]+)(\)|;)/:F&&(uc=/WebKit\/(\S+)/),uc)var wc=uc.exec(kc()),tc=wc?wc[1]:"";if(E){var xc,zc=ha.document;xc=zc?zc.documentMode:i;if(xc>parseFloat(tc)){sc=String(xc);break a}}sc=tc}var Ac={};
function G(a){var b;if(!(b=Ac[a])){b=0;for(var c=Fa(String(sc)).split("."),d=Fa(String(a)).split("."),e=Math.max(c.length,d.length),g=0;0==b&&g<e;g++){var h=c[g]||"",m=d[g]||"",r=RegExp("(\\d*)(\\D*)","g"),y=RegExp("(\\d*)(\\D*)","g");do{var z=r.exec(h)||["","",""],B=y.exec(m)||["","",""];if(0==z[0].length&&0==B[0].length)break;b=((0==z[1].length?0:parseInt(z[1],10))<(0==B[1].length?0:parseInt(B[1],10))?-1:(0==z[1].length?0:parseInt(z[1],10))>(0==B[1].length?0:parseInt(B[1],10))?1:0)||((0==z[2].length)<
(0==B[2].length)?-1:(0==z[2].length)>(0==B[2].length)?1:0)||(z[2]<B[2]?-1:z[2]>B[2]?1:0)}while(0==b)}b=Ac[a]=0<=b}return b}var Bc={};function Cc(a){return Bc[a]||(Bc[a]=E&&!!document.documentMode&&document.documentMode>=a)};var Dc=!E||Cc(9),Ec=!E||Cc(9),Fc=E&&!G("9");!F||G("528");pc&&G("1.9b")||E&&G("8")||oc&&G("9.5")||F&&G("528");pc&&!G("8")||E&&G("9");function Gc(a,b){this.type=a;this.currentTarget=this.target=b}n=Gc.prototype;n.k=ba();n.$=ba();n.hc=l;n.defaultPrevented=l;n.Ce=j;n.stopPropagation=function(){this.hc=j};n.preventDefault=function(){this.defaultPrevented=j;this.Ce=l};function Hc(a){a.preventDefault()};function Ic(a){Ic[" "](a);return a}Ic[" "]=ma;function Jc(a,b){a&&this.init(a,b)}t(Jc,Gc);var Kc=[1,4,2];n=Jc.prototype;n.target=k;n.relatedTarget=k;n.offsetX=0;n.offsetY=0;n.clientX=0;n.clientY=0;n.screenX=0;n.screenY=0;n.button=0;n.keyCode=0;n.charCode=0;n.ctrlKey=l;n.altKey=l;n.shiftKey=l;n.metaKey=l;n.ag=l;n.ca=k;
n.init=function(a,b){var c=this.type=a.type;Gc.call(this,c);this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;if(d){if(pc){var e;a:{try{Ic(d.nodeName);e=j;break a}catch(g){}e=l}e||(d=k)}}else"mouseover"==c?d=a.fromElement:"mouseout"==c&&(d=a.toElement);this.relatedTarget=d;this.offsetX=F||a.offsetX!==i?a.offsetX:a.layerX;this.offsetY=F||a.offsetY!==i?a.offsetY:a.layerY;this.clientX=a.clientX!==i?a.clientX:a.pageX;this.clientY=a.clientY!==i?a.clientY:a.pageY;this.screenX=
a.screenX||0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||("keypress"==c?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.ag=jc?a.metaKey:a.ctrlKey;this.state=a.state;this.ca=a;a.defaultPrevented&&this.preventDefault();delete this.hc};function Lc(a){return(Dc?0==a.ca.button:"click"==a.type?j:!!(a.ca.button&Kc[0]))&&!(F&&jc&&a.ctrlKey)}
n.stopPropagation=function(){Jc.g.stopPropagation.call(this);this.ca.stopPropagation?this.ca.stopPropagation():this.ca.cancelBubble=j};n.preventDefault=function(){Jc.g.preventDefault.call(this);var a=this.ca;if(a.preventDefault)a.preventDefault();else if(a.returnValue=l,Fc)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};n.uj=da("ca");n.k=ba();function Mc(){}var Nc=0;n=Mc.prototype;n.key=0;n.jc=l;n.Ze=l;n.init=function(a,b,c,d,e,g){ra(a)?this.Lh=j:a&&a.handleEvent&&ra(a.handleEvent)?this.Lh=l:f(Error("Invalid listener argument"));this.Cc=a;this.proxy=b;this.src=c;this.type=d;this.capture=!!e;this.ee=g;this.Ze=l;this.key=++Nc;this.jc=l};n.handleEvent=function(a){return this.Lh?this.Cc.call(this.ee||this.src,a):this.Cc.handleEvent.call(this.Cc,a)};function Oc(a,b,c){for(var d in a)b.call(c,a[d],d,a)}function ec(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function Pc(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}function Qc(a){for(var b in a)return l;return j}function rb(a,b){b in a&&delete a[b]}function Rc(a,b,c){b in a&&f(Error('The object already contains the key "'+b+'"'));a[b]=c}var Sc="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");
function Tc(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var g=0;g<Sc.length;g++)c=Sc[g],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};var Uc={},Vc={},Wc={},Xc={};
function H(a,b,c,d,e){if(b){if(pa(b)){for(var g=0;g<b.length;g++)H(a,b[g],c,d,e);return k}var d=!!d,h=Vc;b in h||(h[b]={S:0,Aa:0});h=h[b];d in h||(h[d]={S:0,Aa:0},h.S++);var h=h[d],m=ta(a),r;h.Aa++;if(h[m]){r=h[m];for(g=0;g<r.length;g++)if(h=r[g],h.Cc==c&&h.ee==e){if(h.jc)break;return r[g].key}}else r=h[m]=[],h.S++;var y=Yc,z=Ec?function(a){return y.call(z.src,z.key,a)}:function(a){a=y.call(z.src,z.key,a);if(!a)return a},g=z;g.src=a;h=new Mc;h.init(c,g,a,b,d,e);c=h.key;g.key=c;r.push(h);Uc[c]=h;Wc[m]||
(Wc[m]=[]);Wc[m].push(h);a.addEventListener?(a==ha||!a.ah)&&a.addEventListener(b,g,d):a.attachEvent(b in Xc?Xc[b]:Xc[b]="on"+b,g);return c}f(Error("Invalid event type"))}function Zc(a,b,c,d,e){if(pa(b))for(var g=0;g<b.length;g++)Zc(a,b[g],c,d,e);else a=H(a,b,c,d,e),Uc[a].Ze=j}function $c(a,b,c,d,e){if(pa(b))for(var g=0;g<b.length;g++)$c(a,b[g],c,d,e);else if(d=!!d,a=ad(a,b,d))for(g=0;g<a.length;g++)if(a[g].Cc==c&&a[g].capture==d&&a[g].ee==e){bd(a[g].key);break}}
function bd(a){if(!Uc[a])return l;var b=Uc[a];if(b.jc)return l;var c=b.src,d=b.type,e=b.proxy,g=b.capture;c.removeEventListener?(c==ha||!c.ah)&&c.removeEventListener(d,e,g):c.detachEvent&&c.detachEvent(d in Xc?Xc[d]:Xc[d]="on"+d,e);c=ta(c);Wc[c]&&(e=Wc[c],Za(e,b),0==e.length&&delete Wc[c]);b.jc=j;if(b=Vc[d][g][c])b.di=j,cd(d,g,c,b);delete Uc[a];return j}
function cd(a,b,c,d){if(!d.ne&&d.di){for(var e=0,g=0;e<d.length;e++)d[e].jc?d[e].proxy.src=k:(e!=g&&(d[g]=d[e]),g++);d.length=g;d.di=l;0==g&&(delete Vc[a][b][c],Vc[a][b].S--,0==Vc[a][b].S&&(delete Vc[a][b],Vc[a].S--),0==Vc[a].S&&delete Vc[a])}}function ad(a,b,c){var d=Vc;return b in d&&(d=d[b],c in d&&(d=d[c],a=ta(a),d[a]))?d[a]:k}
function dd(a,b,c,d,e){var g=1,b=ta(b);if(a[b]){a.Aa--;a=a[b];a.ne?a.ne++:a.ne=1;try{for(var h=a.length,m=0;m<h;m++){var r=a[m];r&&!r.jc&&(g&=ed(r,e)!==l)}}finally{a.ne--,cd(c,d,b,a)}}return Boolean(g)}function ed(a,b){a.Ze&&bd(a.key);return a.handleEvent(b)}
function Yc(a,b){if(!Uc[a])return j;var c=Uc[a],d=c.type,e=Vc;if(!(d in e))return j;var e=e[d],g,h;if(!Ec){g=b||la("window.event");var m=j in e,r=l in e;if(m){if(0>g.keyCode||g.returnValue!=i)return j;a:{var y=l;if(0==g.keyCode)try{g.keyCode=-1;break a}catch(z){y=j}if(y||g.returnValue==i)g.returnValue=j}}y=new Jc;y.init(g,this);g=j;try{if(m){for(var B=[],aa=y.currentTarget;aa;aa=aa.parentNode)B.push(aa);h=e[j];h.Aa=h.S;for(var V=B.length-1;!y.hc&&0<=V&&h.Aa;V--)y.currentTarget=B[V],g&=dd(h,B[V],d,
j,y);if(r){h=e[l];h.Aa=h.S;for(V=0;!y.hc&&V<B.length&&h.Aa;V++)y.currentTarget=B[V],g&=dd(h,B[V],d,l,y)}}else g=ed(c,y)}finally{B&&(B.length=0)}return g}d=new Jc(b,this);return g=ed(c,d)};function fd(){u.call(this)}t(fd,u);n=fd.prototype;n.ah=j;n.we=k;n.ng=ca("we");n.addEventListener=function(a,b,c,d){H(this,a,b,c,d)};n.removeEventListener=function(a,b,c,d){$c(this,a,b,c,d)};
n.dispatchEvent=function(a){var b=a.type||a,c=Vc;if(b in c){if(p(a))a=new Gc(a,this);else if(a instanceof Gc)a.target=a.target||this;else{var d=a,a=new Gc(b,this);Tc(a,d)}var d=1,e,c=c[b],b=j in c,g;if(b){e=[];for(g=this;g;g=g.we)e.push(g);g=c[j];g.Aa=g.S;for(var h=e.length-1;!a.hc&&0<=h&&g.Aa;h--)a.currentTarget=e[h],d&=dd(g,e[h],a.type,j,a)&&a.Ce!=l}if(l in c)if(g=c[l],g.Aa=g.S,b)for(h=0;!a.hc&&h<e.length&&g.Aa;h++)a.currentTarget=e[h],d&=dd(g,e[h],a.type,l,a)&&a.Ce!=l;else for(e=this;!a.hc&&e&&
g.Aa;e=e.we)a.currentTarget=e,d&=dd(g,e,a.type,l,a)&&a.Ce!=l;a=Boolean(d)}else a=j;return a};n.k=function(){fd.g.k.call(this);var a,b=0,c=a==k;a=!!a;if(this==k)Oc(Wc,function(d){for(var e=d.length-1;0<=e;e--){var g=d[e];if(c||a==g.capture)bd(g.key),b++}});else{var d=ta(this);if(Wc[d])for(var d=Wc[d],e=d.length-1;0<=e;e--){var g=d[e];if(c||a==g.capture)bd(g.key),b++}}this.we=k};function gd(a,b){u.call(this);this.ha=a||1;this.Id=b||hd;this.Ye=q(this.Vk,this);this.Hf=s()}t(gd,fd);gd.prototype.enabled=l;var hd=ha.window;n=gd.prototype;n.la=k;n.Vk=function(){if(this.enabled){var a=s()-this.Hf;0<a&&a<0.8*this.ha?this.la=this.Id.setTimeout(this.Ye,this.ha-a):(this.dispatchEvent(id),this.enabled&&(this.la=this.Id.setTimeout(this.Ye,this.ha),this.Hf=s()))}};n.start=function(){this.enabled=j;this.la||(this.la=this.Id.setTimeout(this.Ye,this.ha),this.Hf=s())};
n.stop=function(){this.enabled=l;this.la&&(this.Id.clearTimeout(this.la),this.la=k)};n.k=function(){gd.g.k.call(this);this.stop();delete this.Id};var id="tick";function I(a,b,c){ra(a)?c&&(a=q(a,c)):a&&"function"==typeof a.handleEvent?a=q(a.handleEvent,a):f(Error("Invalid listener argument"));return 2147483647<b?-1:hd.setTimeout(a,b||0)};function jd(a){if("function"==typeof a.be)return a.be();if(p(a))return a.split("");if(qa(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return ec(a)}function kd(a,b,c){if("function"==typeof a.forEach)a.forEach(b,c);else if(qa(a)||p(a))v(a,b,c);else{var d;if("function"==typeof a.tf)d=a.tf();else if("function"!=typeof a.be)if(qa(a)||p(a)){d=[];for(var e=a.length,g=0;g<e;g++)d.push(g)}else d=Pc(a);else d=i;for(var e=jd(a),g=e.length,h=0;h<g;h++)b.call(c,e[h],d&&d[h],a)}};function ld(a,b){this.Cb={};this.Q=[];var c=arguments.length;if(1<c){c%2&&f(Error("Uneven number of arguments"));for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else if(a){a instanceof ld?(c=a.tf(),d=a.be()):(c=Pc(a),d=ec(a));for(var e=0;e<c.length;e++)this.set(c[e],d[e])}}n=ld.prototype;n.S=0;n.Wi=0;n.be=function(){md(this);for(var a=[],b=0;b<this.Q.length;b++)a.push(this.Cb[this.Q[b]]);return a};n.tf=function(){md(this);return this.Q.concat()};
n.clear=function(){this.Cb={};this.Wi=this.S=this.Q.length=0};function md(a){if(a.S!=a.Q.length){for(var b=0,c=0;b<a.Q.length;){var d=a.Q[b];Object.prototype.hasOwnProperty.call(a.Cb,d)&&(a.Q[c++]=d);b++}a.Q.length=c}if(a.S!=a.Q.length){for(var e={},c=b=0;b<a.Q.length;)d=a.Q[b],Object.prototype.hasOwnProperty.call(e,d)||(a.Q[c++]=d,e[d]=1),b++;a.Q.length=c}}n.get=function(a,b){return Object.prototype.hasOwnProperty.call(this.Cb,a)?this.Cb[a]:b};
n.set=function(a,b){Object.prototype.hasOwnProperty.call(this.Cb,a)||(this.S++,this.Q.push(a),this.Wi++);this.Cb[a]=b};n.clone=function(){return new ld(this)};function nd(a){return od(a||arguments.callee.caller,[])}
function od(a,b){var c=[];if(Ya(b,a))c.push("[...circular reference...]");else if(a&&50>b.length){c.push(pd(a)+"(");for(var d=a.arguments,e=0;e<d.length;e++){0<e&&c.push(", ");var g;g=d[e];switch(typeof g){case "object":g=g?"object":"null";break;case "string":break;case "number":g=String(g);break;case "boolean":g=g?"true":"false";break;case "function":g=(g=pd(g))?g:"[fn]";break;default:g=typeof g}40<g.length&&(g=g.substr(0,40)+"...");c.push(g)}b.push(a);c.push(")\n");try{c.push(od(a.caller,b))}catch(h){c.push("[exception trying to get caller]\n")}}else a?
c.push("[...long stack...]"):c.push("[end]");return c.join("")}function pd(a){if(qd[a])return qd[a];a=String(a);if(!qd[a]){var b=/function ([^\(]+)/.exec(a);qd[a]=b?b[1]:"[Anonymous]"}return qd[a]}var qd={};function rd(a,b,c,d,e){this.reset(a,b,c,d,e)}rd.prototype.Ck=0;rd.prototype.hh=k;rd.prototype.gh=k;var sd=0;rd.prototype.reset=function(a,b,c,d,e){this.Ck="number"==typeof e?e:sd++;this.im=d||s();this.md=a;this.Wj=b;this.Xl=c;delete this.hh;delete this.gh};rd.prototype.Ai=ca("md");function td(a){this.Xj=a}td.prototype.H=k;td.prototype.md=k;td.prototype.X=k;td.prototype.Bh=k;function ud(a,b){this.name=a;this.value=b}ud.prototype.toString=da("name");var vd=new ud("SEVERE",1E3),wd=new ud("WARNING",900),xd=new ud("INFO",800),yd=new ud("CONFIG",700),zd=new ud("FINE",500);n=td.prototype;n.getParent=da("H");n.rh=function(){this.X||(this.X={});return this.X};n.Ai=ca("md");function Ad(a){return a.md?a.md:a.H?Ad(a.H):k}
n.log=function(a,b,c){if(a.value>=Ad(this).value){a=this.vj(a,b,c);b="log:"+a.Wj;ha.console&&(ha.console.timeStamp?ha.console.timeStamp(b):ha.console.markTimeline&&ha.console.markTimeline(b));ha.msWriteProfilerMark&&ha.msWriteProfilerMark(b);for(b=this;b;){var c=b,d=a;if(c.Bh)for(var e=0,g=i;g=c.Bh[e];e++)g(d);b=b.getParent()}}};
n.vj=function(a,b,c){var d=new rd(a,String(b),this.Xj);if(c){d.hh=c;var e;var g=arguments.callee.caller;try{var h;var m=la("window.location.href");if(p(c))h={message:c,name:"Unknown error",lineNumber:"Not available",fileName:m,stack:"Not available"};else{var r,y,z=l;try{r=c.lineNumber||c.Wl||"Not available"}catch(B){r="Not available",z=j}try{y=c.fileName||c.filename||c.sourceURL||m}catch(aa){y="Not available",z=j}h=z||!c.lineNumber||!c.fileName||!c.stack?{message:c.message,name:c.name,lineNumber:r,
fileName:y,stack:c.stack||"Not available"}:c}e="Message: "+Ha(h.message)+'\nUrl: <a href="view-source:'+h.fileName+'" target="_new">'+h.fileName+"</a>\nLine: "+h.lineNumber+"\n\nBrowser stack:\n"+Ha(h.stack+"-> ")+"[end]\n\nJS stack traversal:\n"+Ha(nd(g)+"-> ")}catch(V){e="Exception trying to expose exception! You win, we lose. "+V}d.gh=e}return d};function Bd(a,b){a.log(vd,b,i)}n.info=function(a,b){this.log(xd,a,b)};function Cd(a,b){a.log(zd,b,i)}var Dd={},Ed=k;
function Fd(a){Ed||(Ed=new td(""),Dd[""]=Ed,Ed.Ai(yd));var b;if(!(b=Dd[a])){b=new td(a);var c=a.lastIndexOf("."),d=a.substr(c+1),c=Fd(a.substr(0,c));c.rh()[d]=b;b.H=c;Dd[a]=b}return b};function Gd(a){a=String(a);if(/^\s*$/.test(a)?0:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x10-\x1f\x80-\x9f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,"")))try{return eval("("+a+")")}catch(b){}f(Error("Invalid JSON string: "+a))};function Hd(){}Hd.prototype.Sd=k;var Id;function Jd(){}t(Jd,Hd);function Kd(a){return(a=Ld(a))?new ActiveXObject(a):new XMLHttpRequest}function Md(a){var b={};Ld(a)&&(b[0]=j,b[1]=j);return b}
function Ld(a){if(!a.Fh&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var b=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],c=0;c<b.length;c++){var d=b[c];try{return new ActiveXObject(d),a.Fh=d}catch(e){}}f(Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed"))}return a.Fh}Id=new Jd;var Nd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([\\w\\d\\-\\u0100-\\uffff.%]*)(?::([0-9]+))?)?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");function Od(a){u.call(this);this.headers=new ld;this.Pc=a||k}t(Od,fd);Od.prototype.v=Fd("goog.net.XhrIo");var Pd=/^https?$/i,Qd=[];function x(a,b,c,d){var e=new Od;Qd.push(e);b&&H(e,"complete",b);H(e,"ready",ya(Rd,e));e.send(a,c,d,i)}function Rd(a){a.$();Za(Qd,a)}n=Od.prototype;n.tb=l;n.o=k;n.Pe=k;n.ld="";n.Th="";n.hd=0;n.jd="";n.nf=l;n.ge=l;n.zf=l;n.Zb=l;n.He=0;n.nc=k;n.Be="";n.dl=l;
n.send=function(a,b,c,d){this.o&&f(Error("[goog.net.XhrIo] Object is active with another request"));b=b?b.toUpperCase():"GET";this.ld=a;this.jd="";this.hd=0;this.Th=b;this.nf=l;this.tb=j;this.o=this.Pc?Kd(this.Pc):Kd(Id);this.Pe=this.Pc?this.Pc.Sd||(this.Pc.Sd=Md(this.Pc)):Id.Sd||(Id.Sd=Md(Id));this.o.onreadystatechange=q(this.li,this);try{Cd(this.v,Sd(this,"Opening Xhr")),this.zf=j,this.o.open(b,a,j),this.zf=l}catch(e){Cd(this.v,Sd(this,"Error opening Xhr: "+e.message));Td(this,e);return}var a=c||
"",g=this.headers.clone();d&&kd(d,function(a,b){g.set(b,a)});d=ha.FormData&&a instanceof ha.FormData;if(b="POST"==b)b=!Object.prototype.hasOwnProperty.call(g.Cb,"Content-Type")&&!d;b&&g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");kd(g,function(a,b){this.o.setRequestHeader(b,a)},this);this.Be&&(this.o.responseType=this.Be);"withCredentials"in this.o&&(this.o.withCredentials=this.dl);try{this.nc&&(hd.clearTimeout(this.nc),this.nc=k),0<this.He&&(Cd(this.v,Sd(this,"Will abort after "+
this.He+"ms if incomplete")),this.nc=hd.setTimeout(q(this.Wk,this),this.He)),Cd(this.v,Sd(this,"Sending request")),this.ge=j,this.o.send(a),this.ge=l}catch(h){Cd(this.v,Sd(this,"Send error: "+h.message)),Td(this,h)}};n.Wk=function(){"undefined"!=typeof fa&&this.o&&(this.jd="Timed out after "+this.He+"ms, aborting",this.hd=8,Cd(this.v,Sd(this,this.jd)),this.dispatchEvent("timeout"),this.abort(8))};function Td(a,b){a.tb=l;a.o&&(a.Zb=j,a.o.abort(),a.Zb=l);a.jd=b;a.hd=5;Ud(a);Vd(a)}
function Ud(a){a.nf||(a.nf=j,a.dispatchEvent("complete"),a.dispatchEvent("error"))}n.abort=function(a){this.o&&this.tb&&(Cd(this.v,Sd(this,"Aborting")),this.tb=l,this.Zb=j,this.o.abort(),this.Zb=l,this.hd=a||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Vd(this))};n.k=function(){this.o&&(this.tb&&(this.tb=l,this.Zb=j,this.o.abort(),this.Zb=l),Vd(this,j));Od.g.k.call(this)};n.li=function(){!this.zf&&!this.ge&&!this.Zb?this.hk():Wd(this)};n.hk=function(){Wd(this)};
function Wd(a){if(a.tb&&"undefined"!=typeof fa)if(a.Pe[1]&&4==Xd(a)&&2==Yd(a))Cd(a.v,Sd(a,"Local request error detected and ignored"));else if(a.ge&&4==Xd(a))hd.setTimeout(q(a.li,a),0);else if(a.dispatchEvent("readystatechange"),4==Xd(a)){Cd(a.v,Sd(a,"Request complete"));a.tb=l;try{var b=Yd(a),c,d;a:switch(b){case 200:case 201:case 202:case 204:case 304:case 1223:d=j;break a;default:d=l}if(!(c=d)){var e;if(e=0===b){var g=String(a.ld).match(Nd)[1]||k;if(!g&&self.location)var h=self.location.protocol,
g=h.substr(0,h.length-1);e=!Pd.test(g?g.toLowerCase():"")}c=e}if(c)a.dispatchEvent("complete"),a.dispatchEvent("success");else{a.hd=6;var m;try{m=2<Xd(a)?a.o.statusText:""}catch(r){Cd(a.v,"Can not get status: "+r.message),m=""}a.jd=m+" ["+Yd(a)+"]";Ud(a)}}finally{Vd(a)}}}
function Vd(a,b){if(a.o){var c=a.o,d=a.Pe[0]?ma:k;a.o=k;a.Pe=k;a.nc&&(hd.clearTimeout(a.nc),a.nc=k);b||a.dispatchEvent("ready");try{c.onreadystatechange=d}catch(e){Bd(a.v,"Problem encountered resetting onreadystatechange: "+e.message)}}}n.xb=function(){return!!this.o};function Xd(a){return a.o?a.o.readyState:0}function Yd(a){try{return 2<Xd(a)?a.o.status:-1}catch(b){return a.v.log(wd,"Can not get status: "+b.message,i),-1}}function D(a){if(a.o)return Gd(a.o.responseText)}
function Zd(a){try{if(!a.o)return k;if("response"in a.o)return a.o.response;switch(a.Be){case "":case "text":return a.o.responseText;case "arraybuffer":if("mozResponseArrayBuffer"in a.o)return a.o.mozResponseArrayBuffer}Bd(a.v,"Response type "+a.Be+" is not supported on this browser");return k}catch(b){return Cd(a.v,"Can not get response: "+b.message),k}}function Sd(a,b){return b+" ["+a.Th+" "+a.ld+" "+Yd(a)+"]"};function C(){w.call(this);this.Vc=[];this.pc={};this.subscribe($d,this.bf,this);this.subscribe(ae,this.al,this)}t(C,w);na(C);n=C.prototype;n.get=function(a){return this.pc[a]};n.If=function(a){Oc(a,q(function(a){this.Se(a)},this))};n.Se=function(a){var b=new Ub(a);this.Vc.push(b);this.pc[a.id]=b;b.U&&(this.U=b);this.c(be,b);return b};
n.bf=function(a,b){if(a&&!this.I||a&&this.I&&this.I.id!=a.id){this.ke=this.I;this.I=a;a.Y();var c=a.Y(),d=c&&!Qc(c.media.Ic);x("/_changechannel",qb(),"POST","channel="+a.id+"&friends="+d+"&media_id"+c.media.id+(b?"&forced=true":""));Tb.b().bf(a,this.ke)}};n.al=ba();function bc(){var a=C.b();if(!a.U){var b=A.b().h;a.U=new Ub({id:b.id,name:b.name.split(" ")[0]+"'s Channel",U:j})}return a.U}var $d="change-channel",ae="next-program",be="add-channel";function ce(){w.call(this);this.subscribe(de,function(a){bc().c(Vb,a);x("/_addprogram",qb(),"POST","channel_id="+C.b().U.id+"&media_id="+a.media.id+"&async=true");ac(Tb.b(),a.media)},this);this.subscribe(ee,function(a){x("/_started",qb(),"POST","media_id="+a.id)},this)}t(ce,w);na(ce);ce.prototype.Bi=ca("gc");ce.prototype.Y=da("Il");ce.prototype.getCurrentTime=function(){return this.gc&&this.gc.getCurrentTime?this.gc.getCurrentTime():0};
ce.prototype.sh=function(){return this.gc&&this.gc.getCurrentTime?this.gc.getCurrentTime():0};var de="play-async",ee="playing";function fe(a){u.call(this);this.K=a;this.Q=[]}t(fe,u);var ge=[];function J(a,b,c,d,e){pa(c)||(ge[0]=c,c=ge);for(var g=0;g<c.length;g++){var h=H(b,c[g],d||a,e||l,a.K||a);a.Q.push(h)}return a}function he(a,b,c,d,e,g){if(pa(c))for(var h=0;h<c.length;h++)he(a,b,c[h],d,e,g);else{a:{d=d||a;g=g||a.K||a;e=!!e;if(b=ad(b,c,e))for(c=0;c<b.length;c++)if(!b[c].jc&&b[c].Cc==d&&b[c].capture==e&&b[c].ee==g){b=b[c];break a}b=k}b&&(b=b.key,bd(b),Za(a.Q,b))}return a}function ie(a){v(a.Q,bd);a.Q.length=0}
fe.prototype.k=function(){fe.g.k.call(this);ie(this)};fe.prototype.handleEvent=function(){f(Error("EventHandler.handleEvent not implemented"))};function je(){u.call(this);this.t=ke;this.fh=this.startTime=k}t(je,fd);var ke=0;je.prototype.Tf=function(){this.gb("begin")};je.prototype.te=function(){this.gb("end")};je.prototype.gb=function(a){this.dispatchEvent(a)};function le(a,b,c){u.call(this);this.Bb=a;this.ha=b||0;this.K=c;this.$e=q(this.$c,this)}t(le,u);n=le.prototype;n.fa=0;n.k=function(){le.g.k.call(this);this.stop();delete this.Bb;delete this.K};n.start=function(a){this.stop();this.fa=I(this.$e,ja(a)?a:this.ha)};n.stop=function(){this.xb()&&hd.clearTimeout(this.fa);this.fa=0};n.mh=function(){this.stop();this.$c()};n.xb=function(){return 0!=this.fa};n.$c=function(){this.fa=0;this.Bb&&this.Bb.call(this.K)};var qb;qb=ea(k);var me={},ne=k;function oe(a){a=ta(a);delete me[a];Qc(me)&&ne&&ne.stop()}function pe(){ne||(ne=new le(function(){var a=s();Oc(me,function(c){qe(c,a)});Qc(me)||pe()},20));var a=ne;a.xb()||a.start()};function re(a,b,c,d){je.call(this);(!pa(a)||!pa(b))&&f(Error("Start and end parameters must be arrays"));a.length!=b.length&&f(Error("Start and end points must be the same length"));this.Ed=a;this.mj=b;this.duration=c;this.Fg=d;this.coords=[];this.Nd=l}t(re,je);n=re.prototype;n.nh=0;n.za=0;n.Ff=k;
n.play=function(a){if(a||this.t==ke)this.za=0,this.coords=this.Ed;else if(1==this.t)return l;oe(this);this.startTime=a=s();-1==this.t&&(this.startTime-=this.duration*this.za);this.fh=this.startTime+this.duration;this.Ff=this.startTime;this.za||this.Tf();this.gb("play");-1==this.t&&this.gb("resume");this.t=1;var b=ta(this);b in me||(me[b]=this);pe();qe(this,a);return j};n.stop=function(a){oe(this);this.t=ke;a&&(this.za=1);se(this,this.za);this.gb("stop");this.te()};n.sh=da("za");
n.k=function(){this.t==ke||this.stop(l);this.gb("destroy");re.g.k.call(this)};function qe(a,b){a.za=(b-a.startTime)/(a.fh-a.startTime);1<=a.za&&(a.za=1);a.nh=1E3/(b-a.Ff);a.Ff=b;se(a,a.za);1==a.za?(a.t=ke,oe(a),a.gb("finish"),a.te()):1==a.t&&a.Sf()}function se(a,b){ra(a.Fg)&&(b=a.Fg(b));a.coords=Array(a.Ed.length);for(var c=0;c<a.Ed.length;c++)a.coords[c]=(a.mj[c]-a.Ed[c])*b+a.Ed[c]}n.Sf=function(){this.gb("animate")};n.gb=function(a){this.dispatchEvent(new te(a,this))};
function te(a,b){Gc.call(this,a);this.coords=b.coords;this.x=b.coords[0];this.y=b.coords[1];this.rm=b.coords[2];this.duration=b.duration;this.za=b.sh();this.Tl=b.nh;this.state=b.t;this.Al=b}t(te,Gc);var ue,ve=!E||Cc(9),we=!pc&&!E||E&&Cc(9)||pc&&G("1.9.1"),xe=E&&!G("9"),ye=E||oc||F;function ze(a){a=a.className;return p(a)&&a.match(/\S+/g)||[]}function K(a,b){for(var c=ze(a),d=db(arguments,1),e=c.length+d.length,g=c,h=0;h<d.length;h++)Ya(g,d[h])||g.push(d[h]);a.className=c.join(" ");return c.length==e}function M(a,b){var c=ze(a),d=db(arguments,1),e,g=d;e=Ta(c,function(a){return!Ya(g,a)});a.className=e.join(" ");return e.length==c.length-d.length}function N(a,b){return Ya(ze(a),b)}function O(a,b,c){c?K(a,b):M(a,b)}function Ae(a,b){var c=!N(a,b);O(a,b,c);return c};function Be(a,b){this.x=ja(a)?a:0;this.y=ja(b)?b:0}Be.prototype.clone=function(){return new Be(this.x,this.y)};function Ce(a,b){return new Be(a.x-b.x,a.y-b.y)};function jb(a,b){this.width=a;this.height=b}jb.prototype.clone=function(){return new jb(this.width,this.height)};jb.prototype.ceil=function(){this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};jb.prototype.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};jb.prototype.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};function De(a){return a?new Ee(Fe(a)):ue||(ue=new Ee)}function P(a){return p(a)?document.getElementById(a):a}function Ge(a,b){var c=b||document;return c.querySelectorAll&&c.querySelector?c.querySelectorAll("."+a):c.getElementsByClassName?c.getElementsByClassName(a):He("*",a,b)}function Q(a,b){var c=b||document,d=k;return(d=c.querySelectorAll&&c.querySelector?c.querySelector("."+a):Ge(a,b)[0])||k}
function He(a,b,c){var d=document,c=c||d,a=a&&"*"!=a?a.toUpperCase():"";if(c.querySelectorAll&&c.querySelector&&(a||b))return c.querySelectorAll(a+(b?"."+b:""));if(b&&c.getElementsByClassName){c=c.getElementsByClassName(b);if(a){for(var d={},e=0,g=0,h;h=c[g];g++)a==h.nodeName&&(d[e++]=h);d.length=e;return d}return c}c=c.getElementsByTagName(a||"*");if(b){d={};for(g=e=0;h=c[g];g++)a=h.className,"function"==typeof a.split&&Ya(a.split(/\s+/),b)&&(d[e++]=h);d.length=e;return d}return c}
var Ie={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function Je(a){a=(a||window).document;a=Ke(a)?a.documentElement:a.body;return new jb(a.clientWidth,a.clientHeight)}function R(a,b,c){return Le(document,arguments)}
function Le(a,b){var c=b[0],d=b[1];if(!ve&&d&&(d.name||d.type)){c=["<",c];d.name&&c.push(' name="',Ha(d.name),'"');if(d.type){c.push(' type="',Ha(d.type),'"');var e={};Tc(e,d);delete e.type;d=e}c.push(">");c=c.join("")}var g=a.createElement(c);d&&(p(d)?g.className=d:pa(d)?K.apply(k,[g].concat(d)):Oc(d,function(a,b){"style"==b?g.style.cssText=a:"class"==b?g.className=a:"for"==b?g.htmlFor=a:b in Ie?g.setAttribute(Ie[b],a):0==b.lastIndexOf("aria-",0)||0==b.lastIndexOf("data-",0)?g.setAttribute(b,a):
g[b]=a}));if(2<b.length){d=function(b){b&&g.appendChild(p(b)?a.createTextNode(b):b)};for(c=2;c<b.length;c++)if(e=b[c],qa(e)&&!(sa(e)&&0<e.nodeType)){var h=v,m;a:{if((m=e)&&"number"==typeof m.length){if(sa(m)){m="function"==typeof m.item||"string"==typeof m.item;break a}if(ra(m)){m="function"==typeof m.item;break a}}m=l}h(m?ab(e):e,d)}else d(e)}return g}function Ke(a){return"CSS1Compat"==a.compatMode}function Me(a){for(var b;b=a.firstChild;)a.removeChild(b)}
function Ne(a,b,c){a.insertBefore(b,a.childNodes[c]||k)}function Oe(a){a&&a.parentNode&&a.parentNode.removeChild(a)}function Pe(a){return we&&a.children!=i?a.children:Ta(a.childNodes,function(a){return 1==a.nodeType})}function Qe(a){for(;a&&1!=a.nodeType;)a=a.nextSibling;return a}function Re(a){if(ye)return a.parentElement;a=a.parentNode;return sa(a)&&1==a.nodeType?a:k}
function Se(a,b){if(a.contains&&1==b.nodeType)return a==b||a.contains(b);if("undefined"!=typeof a.compareDocumentPosition)return a==b||Boolean(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a}function Fe(a){return 9==a.nodeType?a:a.ownerDocument||a.document}
function Te(a,b){if("textContent"in a)a.textContent=b;else if(a.firstChild&&3==a.firstChild.nodeType){for(;a.lastChild!=a.firstChild;)a.removeChild(a.lastChild);a.firstChild.data=b}else Me(a),a.appendChild(Fe(a).createTextNode(b))}var Ue={SCRIPT:1,STYLE:1,HEAD:1,IFRAME:1,OBJECT:1},Ve={IMG:" ",BR:"\n"};function We(a){var b=a.getAttributeNode("tabindex");return b&&b.specified?(a=a.tabIndex,"number"==typeof a&&0<=a&&32768>a):l}
function Xe(a){if(xe&&"innerText"in a)a=a.innerText.replace(/(\r\n|\r|\n)/g,"\n");else{var b=[];Ye(a,b,j);a=b.join("")}a=a.replace(/ \xAD /g," ").replace(/\xAD/g,"");a=a.replace(/\u200B/g,"");xe||(a=a.replace(/ +/g," "));" "!=a&&(a=a.replace(/^\s*/,""));return a}function Ze(a){var b=[];Ye(a,b,l);return b.join("")}
function Ye(a,b,c){if(!(a.nodeName in Ue))if(3==a.nodeType)c?b.push(String(a.nodeValue).replace(/(\r\n|\r|\n)/g,"")):b.push(a.nodeValue);else if(a.nodeName in Ve)b.push(Ve[a.nodeName]);else for(a=a.firstChild;a;)Ye(a,b,c),a=a.nextSibling}function $e(a,b,c){if(!b&&!c)return k;b=b?b.toUpperCase():k;a:{for(var d=0;a;){if((!b||a.nodeName==b)&&(!c||N(a,c))){c=a;break a}a=a.parentNode;d++}c=k}return c}function Ee(a){this.s=a||ha.document||document}n=Ee.prototype;n.Ha=De;
n.a=function(a){return p(a)?this.s.getElementById(a):a};n.P=function(a,b,c){return Le(this.s,arguments)};n.createElement=function(a){return this.s.createElement(a)};n.createTextNode=function(a){return this.s.createTextNode(a)};function af(a){return Ke(a.s)}function bf(a){var b=a.s,a=!F&&Ke(b)?b.documentElement:b.body,b=b.parentWindow||b.defaultView;return new Be(b.pageXOffset||a.scrollLeft,b.pageYOffset||a.scrollTop)}n.appendChild=function(a,b){a.appendChild(b)};n.rh=Pe;
function cf(a,b){return b.firstElementChild!=i?b.firstElementChild:Qe(b.firstChild)}n.contains=Se;function df(a,b,c,d){this.top=a;this.right=b;this.bottom=c;this.left=d}df.prototype.clone=function(){return new df(this.top,this.right,this.bottom,this.left)};df.prototype.contains=function(a){return!this||!a?l:a instanceof df?a.left>=this.left&&a.right<=this.right&&a.top>=this.top&&a.bottom<=this.bottom:a.x>=this.left&&a.x<=this.right&&a.y>=this.top&&a.y<=this.bottom};function ef(a,b,c,d){this.left=a;this.top=b;this.width=c;this.height=d}ef.prototype.clone=function(){return new ef(this.left,this.top,this.width,this.height)};ef.prototype.contains=function(a){return a instanceof ef?this.left<=a.left&&this.left+this.width>=a.left+a.width&&this.top<=a.top&&this.top+this.height>=a.top+a.height:a.x>=this.left&&a.x<=this.left+this.width&&a.y>=this.top&&a.y<=this.top+this.height};function ff(a,b,c){p(b)?gf(a,c,b):Oc(b,ya(gf,a))}function gf(a,b,c){a.style[Pa(c)]=b}function hf(a,b){var c=Fe(a);return c.defaultView&&c.defaultView.getComputedStyle&&(c=c.defaultView.getComputedStyle(a,k))?c[b]||c.getPropertyValue(b)||"":""}function jf(a,b){return a.currentStyle?a.currentStyle[b]:k}function kf(a,b){return hf(a,b)||jf(a,b)||a.style&&a.style[b]}
function lf(a){var b=a.getBoundingClientRect();E&&(a=a.ownerDocument,b.left-=a.documentElement.clientLeft+a.body.clientLeft,b.top-=a.documentElement.clientTop+a.body.clientTop);return b}
function mf(a){if(E&&!Cc(8))return a.offsetParent;for(var b=Fe(a),c=kf(a,"position"),d="fixed"==c||"absolute"==c,a=a.parentNode;a&&a!=b;a=a.parentNode)if(c=kf(a,"position"),d=d&&"static"==c&&a!=b.documentElement&&a!=b.body,!d&&(a.scrollWidth>a.clientWidth||a.scrollHeight>a.clientHeight||"fixed"==c||"absolute"==c||"relative"==c))return a;return k}
function of(a){for(var b=new df(0,Infinity,Infinity,0),c=De(a),d=c.s.body,e=c.s.documentElement,g=!F&&Ke(c.s)?c.s.documentElement:c.s.body;a=mf(a);)if((!E||0!=a.clientWidth)&&(!F||0!=a.clientHeight||a!=d)&&a!=d&&a!=e&&"visible"!=kf(a,"overflow")){var h=pf(a),m;m=a;if(pc&&!G("1.9")){var r=parseFloat(hf(m,"borderLeftWidth"));if(qf(m))var y=m.offsetWidth-m.clientWidth-r-parseFloat(hf(m,"borderRightWidth")),r=r+y;m=new Be(r,parseFloat(hf(m,"borderTopWidth")))}else m=new Be(m.clientLeft,m.clientTop);h.x+=
m.x;h.y+=m.y;b.top=Math.max(b.top,h.y);b.right=Math.min(b.right,h.x+a.clientWidth);b.bottom=Math.min(b.bottom,h.y+a.clientHeight);b.left=Math.max(b.left,h.x)}d=g.scrollLeft;g=g.scrollTop;b.left=Math.max(b.left,d);b.top=Math.max(b.top,g);c=Je(c.s.parentWindow||c.s.defaultView);b.right=Math.min(b.right,d+c.width);b.bottom=Math.min(b.bottom,g+c.height);return 0<=b.top&&0<=b.left&&b.bottom>b.top&&b.right>b.left?b:k}
function pf(a){var b,c=Fe(a),d=kf(a,"position"),e=pc&&c.getBoxObjectFor&&!a.getBoundingClientRect&&"absolute"==d&&(b=c.getBoxObjectFor(a))&&(0>b.screenX||0>b.screenY),g=new Be(0,0),h;b=c?Fe(c):document;h=E&&!Cc(9)&&!af(De(b))?b.body:b.documentElement;if(a==h)return g;if(a.getBoundingClientRect)b=lf(a),a=bf(De(c)),g.x=b.left+a.x,g.y=b.top+a.y;else if(c.getBoxObjectFor&&!e)b=c.getBoxObjectFor(a),a=c.getBoxObjectFor(h),g.x=b.screenX-a.screenX,g.y=b.screenY-a.screenY;else{b=a;do{g.x+=b.offsetLeft;g.y+=
b.offsetTop;b!=a&&(g.x+=b.clientLeft||0,g.y+=b.clientTop||0);if(F&&"fixed"==kf(b,"position")){g.x+=c.body.scrollLeft;g.y+=c.body.scrollTop;break}b=b.offsetParent}while(b&&b!=a);if(oc||F&&"absolute"==d)g.y-=c.body.offsetTop;for(b=a;(b=mf(b))&&b!=c.body&&b!=h;)if(g.x-=b.scrollLeft,!oc||"TR"!=b.tagName)g.y-=b.scrollTop}return g}function rf(a,b){"number"==typeof a&&(a=(b?Math.round(a):a)+"px");return a}function sf(a,b){a.style.height=rf(b,j)}
function S(a){if("none"!=kf(a,"display"))return tf(a);var b=a.style,c=b.display,d=b.visibility,e=b.position;b.visibility="hidden";b.position="absolute";b.display="inline";a=tf(a);b.display=c;b.position=e;b.visibility=d;return a}function tf(a){var b=a.offsetWidth,c=a.offsetHeight,d=F&&!b&&!c;return(!ja(b)||d)&&a.getBoundingClientRect?(a=lf(a),new jb(a.right-a.left,a.bottom-a.top)):new jb(b,c)}
function uf(a,b){var c=a.style;"opacity"in c?c.opacity=b:"MozOpacity"in c?c.MozOpacity=b:"filter"in c&&(c.filter=""===b?"":"alpha(opacity="+100*b+")")}function T(a,b){a.style.display=b?"":"none"}function qf(a){return"rtl"==kf(a,"direction")}var vf=pc?"MozUserSelect":F?"WebkitUserSelect":k;
function wf(a,b){if(/^\d+px?$/.test(b))return parseInt(b,10);var c=a.style.left,d=a.runtimeStyle.left;a.runtimeStyle.left=a.currentStyle.left;a.style.left=b;var e=a.style.pixelLeft;a.style.left=c;a.runtimeStyle.left=d;return e}
function xf(a,b){if(E){var c=wf(a,jf(a,b+"Left")),d=wf(a,jf(a,b+"Right")),e=wf(a,jf(a,b+"Top")),g=wf(a,jf(a,b+"Bottom"));return new df(e,d,g,c)}c=hf(a,b+"Left");d=hf(a,b+"Right");e=hf(a,b+"Top");g=hf(a,b+"Bottom");return new df(parseFloat(e),parseFloat(d),parseFloat(g),parseFloat(c))}var yf={thin:2,medium:4,thick:6};function zf(a,b){if("none"==jf(a,b+"Style"))return 0;var c=jf(a,b+"Width");return c in yf?yf[c]:wf(a,c)}
function Af(a){if(E){var b=zf(a,"borderLeft"),c=zf(a,"borderRight"),d=zf(a,"borderTop"),a=zf(a,"borderBottom");return new df(d,c,a,b)}b=hf(a,"borderLeftWidth");c=hf(a,"borderRightWidth");d=hf(a,"borderTopWidth");a=hf(a,"borderBottomWidth");return new df(parseFloat(d),parseFloat(c),parseFloat(a),parseFloat(b))}var Bf=/matrix\([0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, ([0-9\.\-]+)p?x?, ([0-9\.\-]+)p?x?\)/;function Cf(a,b,c,d,e){re.call(this,b,c,d,e);this.element=a}t(Cf,re);n=Cf.prototype;n.Ke=ma;n.Mh=function(){ja(this.La)||(this.La=qf(this.element));return this.La};n.Sf=function(){this.Ke();Cf.g.Sf.call(this)};n.te=function(){this.Ke();Cf.g.te.call(this)};n.Tf=function(){this.Ke();Cf.g.Tf.call(this)};function Df(a,b,c,d,e){(2!=b.length||2!=c.length)&&f(Error("Start and end points must be 2D"));Cf.apply(this,arguments)}t(Df,Cf);
Df.prototype.Ke=function(){if(this.Nd){var a=this.element,b=Math.round(this.coords[0]),b=Math.max(b,0);a.scrollLeft=qf(a)?pc?-b:!E||!G("8")?a.scrollWidth-b-a.clientWidth:b:b}else this.element.scrollLeft=Math.round(this.coords[0]);this.element.scrollTop=Math.round(this.coords[1])};function Ef(a){return 1-Math.pow(1-a,3)};function Ff(){}na(Ff);Ff.prototype.Zj=0;Ff.b();function U(a){u.call(this);this.Tb=a||De();this.La=Gf}t(U,fd);U.prototype.Kj=Ff.b();var Gf=k;function Hf(a,b){switch(a){case 1:return b?"disable":"enable";case 2:return b?"highlight":"unhighlight";case 4:return b?"activate":"deactivate";case 8:return b?"select":"unselect";case 16:return b?"check":"uncheck";case 32:return b?"focus":"blur";case 64:return b?"open":"close"}f(Error("Invalid component state"))}n=U.prototype;n.fa=k;n.T=l;n.d=k;n.La=k;n.N=k;n.H=k;n.X=k;n.Z=k;n.Yi=l;
function If(a){return a.fa||(a.fa=":"+(a.Kj.Zj++).toString(36))}n.a=da("d");n.i=function(){return this.xc||(this.xc=new fe(this))};n.Ee=function(a){this==a&&f(Error("Unable to set parent component"));a&&(this.H&&this.fa&&this.H.Z&&this.fa&&(this.fa in this.H.Z&&this.H.Z[this.fa])&&this.H!=a)&&f(Error("Unable to set parent component"));this.H=a;U.g.ng.call(this,a)};n.getParent=da("H");n.ng=function(a){this.H&&this.H!=a&&f(Error("Method not supported"));U.g.ng.call(this,a)};n.Ha=da("Tb");
n.P=function(){this.d=this.Tb.createElement("div")};function Jf(a,b){a.T&&f(Error("Component already rendered"));a.d||a.P();b?b.insertBefore(a.d,k):a.Tb.s.body.appendChild(a.d);(!a.H||a.H.T)&&a.w()}n.j=function(a){this.T&&f(Error("Component already rendered"));if(a&&this.Pb(a)){this.Yi=j;if(!this.Tb||this.Tb.s!=Fe(a))this.Tb=De(a);this.q(a);this.w()}else f(Error("Invalid element to decorate"))};n.Pb=ea(j);n.q=ca("d");n.w=function(){this.T=j;Kf(this,function(a){!a.T&&a.a()&&a.w()})};
n.Xb=function(){Kf(this,function(a){a.T&&a.Xb()});this.xc&&ie(this.xc);this.T=l};n.k=function(){U.g.k.call(this);this.T&&this.Xb();this.xc&&(this.xc.$(),delete this.xc);Kf(this,function(a){a.$()});!this.Yi&&this.d&&Oe(this.d);this.H=this.N=this.d=this.Z=this.X=k};
function Lf(a,b){var c=a.X?a.X.length:0;b.T&&!a.T&&f(Error("Component already rendered"));(0>c||c>(a.X?a.X.length:0))&&f(Error("Child component index out of bounds"));if(!a.Z||!a.X)a.Z={},a.X=[];if(b.getParent()==a){var d=If(b);a.Z[d]=b;Za(a.X,b)}else Rc(a.Z,If(b),b);b.Ee(a);cb(a.X,c,0,b);b.T&&a.T&&b.getParent()==a?(d=a.va(),d.insertBefore(b.a(),d.childNodes[c]||k)):a.T&&(!b.T&&b.d&&b.d.parentNode)&&b.w()}n.va=da("d");n.Mh=function(){this.La==k&&(this.La=qf(this.T?this.d:this.Tb.s.body));return this.La};
n.mc=function(a){this.T&&f(Error("Component already rendered"));this.La=a};function Kf(a,b){a.X&&v(a.X,b,i)}n.removeChild=function(a,b){if(a){var c=p(a)?a:If(a),a=this.Z&&c?(c in this.Z?this.Z[c]:i)||k:k;c&&a&&(rb(this.Z,c),Za(this.X,a),b&&(a.Xb(),a.d&&Oe(a.d)),a.Ee(k))}a||f(Error("Child is not in parent component"));return a};function Mf(a,b,c,d,e){if(!E&&(!F||!G("525")))return j;if(jc&&e)return Nf(a);if(e&&!d||!c&&(17==b||18==b)||E&&d&&b==a)return l;switch(a){case 13:return!(E&&Cc(9));case 27:return!F}return Nf(a)}function Nf(a){if(48<=a&&57>=a||96<=a&&106>=a||65<=a&&90>=a||F&&0==a)return j;switch(a){case 32:case 63:case 107:case 109:case 110:case 111:case 186:case 59:case 189:case 187:case 61:case 188:case 190:case 191:case 192:case 222:case 219:case 220:case 221:return j;default:return l}}
function Of(a){switch(a){case 61:return 187;case 59:return 186;case 224:return 91;case 0:return 224;default:return a}};function Pf(){}var Qf;na(Pf);n=Pf.prototype;n.wc=ba();n.P=function(a){var b=a.Ha().P("div",Rf(this,a).join(" "),a.Sa);Sf(this,a,b);return b};n.va=function(a){return a};n.ad=function(a,b,c){if(a=a.a?a.a():a)if(E&&!G("7")){var d=Tf(ze(a),b);d.push(b);ya(c?K:M,a).apply(k,d)}else O(a,b,c)};n.Pb=ea(j);
n.j=function(a,b){if(b.id){var c=b.id;a.H&&a.H.Z&&(rb(a.H.Z,a.fa),Rc(a.H.Z,c,a));a.fa=c}(c=this.va(b))&&c.firstChild?(c=c.firstChild.nextSibling?ab(c.childNodes):c.firstChild,a.Sa=c):a.Sa=k;var d=0,e=this.ea(),g=this.ea(),h=l,m=l,c=l,r=ze(b);v(r,function(a){if(!h&&a==e)h=j,g==e&&(m=j);else if(!m&&a==g)m=j;else{var b=d;if(!this.Ki){this.Vd||Uf(this);var c=this.Vd,r={},y;for(y in c)r[c[y]]=y;this.Ki=r}a=parseInt(this.Ki[a],10);d=b|(isNaN(a)?0:a)}},this);a.t=d;h||(r.push(e),g==e&&(m=j));m||r.push(g);
var y=a.Ga;y&&r.push.apply(r,y);if(E&&!G("7")){var z=Tf(r);0<z.length&&(r.push.apply(r,z),c=j)}if(!h||!m||y||c)b.className=r.join(" ");Sf(this,a,b);return b};n.Hh=function(a){a.Mh()&&this.mc(a.a(),j);a.isEnabled()&&this.Lc(a,a.Va())};function Sf(a,b,c){b.isEnabled()||a.Oa(c,1,j);W(b,8)&&a.Oa(c,8,j);b.aa&16&&a.Oa(c,16,W(b,16));b.aa&64&&a.Oa(c,64,W(b,64))}
n.Kc=function(a,b){var c=!b,d=E||oc?a.getElementsByTagName("*"):k;if(vf){if(c=c?"none":"",a.style[vf]=c,d)for(var e=0,g;g=d[e];e++)g.style[vf]=c}else if(E||oc)if(c=c?"on":"",a.setAttribute("unselectable",c),d)for(e=0;g=d[e];e++)g.setAttribute("unselectable",c)};n.mc=function(a,b){this.ad(a,this.ea()+"-rtl",b)};n.Df=function(a){var b;return a.aa&32&&(b=a.wb())?We(b):l};
n.Lc=function(a,b){var c;if(a.aa&32&&(c=a.wb())){if(!b&&a.he()){try{c.blur()}catch(d){}a.he()&&a.uh()}We(c)!=b&&(b?c.tabIndex=0:(c.tabIndex=-1,c.removeAttribute("tabIndex")))}};n.ka=function(a,b){T(a,b)};n.ja=function(a,b,c){var d=a.a();if(d){var e=Vf(this,b);e&&this.ad(a,e,c);this.Oa(d,b,c)}};n.Oa=function(a,b,c){Qf||(Qf={1:"disabled",8:"selected",16:"checked",64:"expanded"});(b=Qf[b])&&a.setAttribute("aria-"+b,c)};
n.lc=function(a,b){var c=this.va(a);if(c&&(Me(c),b))if(p(b))Te(c,b);else{var d=function(a){if(a){var b=Fe(c);c.appendChild(p(a)?b.createTextNode(a):a)}};pa(b)?v(b,d):qa(b)&&!("nodeType"in b)?v(ab(b),d):d(b)}};n.wb=function(a){return a.a()};n.ea=ea("goog-control");function Rf(a,b){var c=a.ea(),d=[c],e=a.ea();e!=c&&d.push(e);c=b.t;for(e=[];c;){var g=c&-c;e.push(Vf(a,g));c&=~g}d.push.apply(d,e);(c=b.Ga)&&d.push.apply(d,c);E&&!G("7")&&d.push.apply(d,Tf(d));return d}
function Tf(a,b){var c=[];b&&(a=a.concat([b]));v([],function(d){Va(d,ya(Ya,a))&&(!b||Ya(d,b))&&c.push(d.join("_"))});return c}function Vf(a,b){a.Vd||Uf(a);return a.Vd[b]}function Uf(a){var b=a.ea();a.Vd={1:b+"-disabled",2:b+"-hover",4:b+"-active",8:b+"-selected",16:b+"-checked",32:b+"-focused",64:b+"-open"}};function Wf(){}t(Wf,Pf);na(Wf);n=Wf.prototype;n.wc=ea("button");n.Oa=function(a,b,c){16==b?a.setAttribute("aria-pressed",c):Wf.g.Oa.call(this,a,b,c)};n.P=function(a){var b=Wf.g.P.call(this,a),c=a.cd();c&&this.og(b,c);(c=a.n())&&this.qa(b,c);a.aa&16&&this.Oa(b,16,W(a,16));return b};n.j=function(a,b){var b=Wf.g.j.call(this,a,b),c=this.n(b);a.Cg=c;a.wg=this.cd(b);a.aa&16&&this.Oa(b,16,W(a,16));return b};n.n=ma;n.qa=ma;n.cd=function(a){return a.title};n.og=function(a,b){a&&(a.title=b||"")};n.ea=ea("goog-button");function Xf(a,b){u.call(this);a&&Yf(this,a,b)}t(Xf,fd);n=Xf.prototype;n.d=k;n.ie=k;n.Ef=k;n.je=k;n.zb=-1;n.yb=-1;n.Xe=l;
var Zf={3:13,12:144,63232:38,63233:40,63234:37,63235:39,63236:112,63237:113,63238:114,63239:115,63240:116,63241:117,63242:118,63243:119,63244:120,63245:121,63246:122,63247:123,63248:44,63272:46,63273:36,63275:35,63276:33,63277:34,63289:144,63302:45},$f={Up:38,Down:40,Left:37,Right:39,Enter:13,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"U+007F":46,Home:36,End:35,PageUp:33,PageDown:34,Insert:45},ag=E||F&&G("525"),bg=jc&&pc;n=Xf.prototype;
n.Cj=function(a){if(F&&(17==this.zb&&!a.ctrlKey||18==this.zb&&!a.altKey))this.yb=this.zb=-1;ag&&!Mf(a.keyCode,this.zb,a.shiftKey,a.ctrlKey,a.altKey)?this.handleEvent(a):(this.yb=pc?Of(a.keyCode):a.keyCode,bg&&(this.Xe=a.altKey))};n.Ej=function(a){this.yb=this.zb=-1;this.Xe=a.altKey};
n.handleEvent=function(a){var b=a.ca,c,d,e=b.altKey;E&&"keypress"==a.type?(c=this.yb,d=13!=c&&27!=c?b.keyCode:0):F&&"keypress"==a.type?(c=this.yb,d=0<=b.charCode&&63232>b.charCode&&Nf(c)?b.charCode:0):oc?(c=this.yb,d=Nf(c)?b.keyCode:0):(c=b.keyCode||this.yb,d=b.charCode||0,bg&&(e=this.Xe),jc&&(63==d&&224==c)&&(c=191));var g=c,h=b.keyIdentifier;c?63232<=c&&c in Zf?g=Zf[c]:25==c&&a.shiftKey&&(g=9):h&&h in $f&&(g=$f[h]);a=g==this.zb;this.zb=g;b=new cg(g,d,a,b);b.altKey=e;this.dispatchEvent(b)};n.a=da("d");
function Yf(a,b,c){a.je&&a.detach();a.d=b;a.ie=H(a.d,"keypress",a,c);a.Ef=H(a.d,"keydown",a.Cj,c,a);a.je=H(a.d,"keyup",a.Ej,c,a)}n.detach=function(){this.ie&&(bd(this.ie),bd(this.Ef),bd(this.je),this.je=this.Ef=this.ie=k);this.d=k;this.yb=this.zb=-1};n.k=function(){Xf.g.k.call(this);this.detach()};function cg(a,b,c,d){d&&this.init(d,i);this.type="key";this.keyCode=a;this.charCode=b;this.repeat=c}t(cg,Jc);function dg(a,b){a||f(Error("Invalid class name "+a));ra(b)||f(Error("Invalid decorator function "+b))}var eg={};function fg(a,b,c){U.call(this,c);if(!b){for(var b=this.constructor,d;b;){d=ta(b);if(d=eg[d])break;b=b.g?b.g.constructor:k}b=d?ra(d.b)?d.b():new d:k}this.F=b;this.Sa=a}t(fg,U);n=fg.prototype;n.Sa=k;n.t=0;n.aa=39;n.cb=255;n.Pk=0;n.Oe=j;n.Ga=k;n.vf=j;n.Qd=l;n.ti=k;function gg(a){a.T&&l!=a.vf&&hg(a,l);a.vf=l}n.wb=function(){return this.F.wb(this)};
n.ad=function(a,b){b?a&&(this.Ga?Ya(this.Ga,a)||this.Ga.push(a):this.Ga=[a],this.F.ad(this,a,j)):a&&this.Ga&&(Za(this.Ga,a),0==this.Ga.length&&(this.Ga=k),this.F.ad(this,a,l))};n.P=function(){var a=this.F.P(this);this.d=a;var b=this.ti||this.F.wc();b&&a.setAttribute("role",b);this.Qd||this.F.Kc(a,l);this.Va()||this.F.ka(a,l)};n.va=function(){return this.F.va(this.a())};n.Pb=function(a){return this.F.Pb(a)};
n.q=function(a){this.d=a=this.F.j(this,a);var b=this.ti||this.F.wc();b&&a.setAttribute("role",b);this.Qd||this.F.Kc(a,l);this.Oe="none"!=a.style.display};n.w=function(){fg.g.w.call(this);this.F.Hh(this);if(this.aa&-2&&(this.vf&&hg(this,j),this.aa&32)){var a=this.wb();if(a){var b=this.Bc||(this.Bc=new Xf);Yf(b,a);J(J(J(this.i(),b,"key",this.Dj),a,"focus",this.Aj),a,"blur",this.uh)}}};
function hg(a,b){var c=a.i(),d=a.a();b?(J(J(J(J(c,d,"mouseover",a.zh),d,"mousedown",a.xh),d,"mouseup",a.Ah),d,"mouseout",a.yh),a.de!=ma&&J(c,d,"contextmenu",a.de),E&&J(c,d,"dblclick",a.vh)):(he(he(he(he(c,d,"mouseover",a.zh),d,"mousedown",a.xh),d,"mouseup",a.Ah),d,"mouseout",a.yh),a.de!=ma&&he(c,d,"contextmenu",a.de),E&&he(c,d,"dblclick",a.vh))}n.Xb=function(){fg.g.Xb.call(this);this.Bc&&this.Bc.detach();this.Va()&&this.isEnabled()&&this.F.Lc(this,l)};
n.k=function(){fg.g.k.call(this);this.Bc&&(this.Bc.$(),delete this.Bc);delete this.F;this.Ga=this.Sa=k};n.lc=function(a){this.F.lc(this.a(),a);this.Sa=a};n.qh=function(){var a=this.Sa;return!a?"":(p(a)?a:pa(a)?Ua(a,Ze).join(""):Xe(a)).replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")};n.mc=function(a){fg.g.mc.call(this,a);var b=this.a();b&&this.F.mc(b,a)};n.Kc=function(a){this.Qd=a;var b=this.a();b&&this.F.Kc(b,a)};n.Va=da("Oe");
n.ka=function(a,b){if(b||this.Oe!=a&&this.dispatchEvent(a?"show":"hide")){var c=this.a();c&&this.F.ka(c,a);this.isEnabled()&&this.F.Lc(this,a);this.Oe=a;return j}return l};n.isEnabled=function(){return!W(this,1)};n.Ca=function(a){var b=this.getParent();if((!b||"function"!=typeof b.isEnabled||b.isEnabled())&&ig(this,1,!a))a||(this.setActive(l),jg(this,l)),this.Va()&&this.F.Lc(this,a),this.ja(1,!a)};function jg(a,b){ig(a,2,b)&&a.ja(2,b)}n.xb=function(){return W(this,4)};
n.setActive=function(a){ig(this,4,a)&&this.ja(4,a)};function kg(a,b){ig(a,16,b)&&a.ja(16,b)}n.he=function(){return W(this,32)};n.pa=function(a){ig(this,32,a)&&this.ja(32,a)};function W(a,b){return!!(a.t&b)}n.ja=function(a,b){this.aa&a&&b!=W(this,a)&&(this.F.ja(this,a,b),this.t=b?this.t|a:this.t&~a)};function lg(a,b,c){a.T&&(W(a,b)&&!c)&&f(Error("Component already rendered"));!c&&W(a,b)&&a.ja(b,l);a.aa=c?a.aa|b:a.aa&~b}function mg(a,b){return!!(a.cb&b)&&!!(a.aa&b)}
function ig(a,b,c){return!!(a.aa&b)&&W(a,b)!=c&&(!(a.Pk&b)||a.dispatchEvent(Hf(b,c)))&&!a.Xd}n.zh=function(a){(!a.relatedTarget||!Se(this.a(),a.relatedTarget))&&(this.dispatchEvent("enter")&&this.isEnabled()&&mg(this,2))&&jg(this,j)};n.yh=function(a){if((!a.relatedTarget||!Se(this.a(),a.relatedTarget))&&this.dispatchEvent("leave"))mg(this,4)&&this.setActive(l),mg(this,2)&&jg(this,l)};n.de=ma;
n.xh=function(a){this.isEnabled()&&(mg(this,2)&&jg(this,j),Lc(a)&&(mg(this,4)&&this.setActive(j),this.F.Df(this)&&this.wb().focus()));!this.Qd&&Lc(a)&&a.preventDefault()};n.Ah=function(a){this.isEnabled()&&(mg(this,2)&&jg(this,j),this.xb()&&(this.td(a)&&mg(this,4))&&this.setActive(l))};n.vh=function(a){this.isEnabled()&&this.td(a)};
n.td=function(a){mg(this,16)&&kg(this,!W(this,16));mg(this,8)&&ig(this,8,j)&&this.ja(8,j);if(mg(this,64)){var b=!W(this,64);ig(this,64,b)&&this.ja(64,b)}b=new Gc("action",this);a&&(b.altKey=a.altKey,b.ctrlKey=a.ctrlKey,b.metaKey=a.metaKey,b.shiftKey=a.shiftKey,b.ag=a.ag);return this.dispatchEvent(b)};n.Aj=function(){mg(this,32)&&this.pa(j)};n.uh=function(){mg(this,4)&&this.setActive(l);mg(this,32)&&this.pa(l)};
n.Dj=function(a){return this.Va()&&this.isEnabled()&&this.uf(a)?(a.preventDefault(),a.stopPropagation(),j):l};n.uf=function(a){return 13==a.keyCode&&this.td(a)};ra(fg)||f(Error("Invalid component class "+fg));ra(Pf)||f(Error("Invalid renderer class "+Pf));var ng=ta(fg);eg[ng]=Pf;dg("goog-control",function(){return new fg(k)});function og(){}t(og,Wf);na(og);n=og.prototype;n.wc=ba();n.P=function(a){gg(a);a.cb&=-256;lg(a,32,l);return a.Ha().P("button",{"class":Rf(this,a).join(" "),disabled:!a.isEnabled(),title:a.cd()||"",value:a.n()||""},a.qh()||"")};n.Pb=function(a){return"BUTTON"==a.tagName||"INPUT"==a.tagName&&("button"==a.type||"submit"==a.type||"reset"==a.type)};n.j=function(a,b){gg(a);a.cb&=-256;lg(a,32,l);b.disabled&&K(b,Vf(this,1));return og.g.j.call(this,a,b)};n.Hh=function(a){J(a.i(),a.a(),"click",a.td)};n.Kc=ma;
n.mc=ma;n.Df=function(a){return a.isEnabled()};n.Lc=ma;n.ja=function(a,b,c){og.g.ja.call(this,a,b,c);if((a=a.a())&&1==b)a.disabled=c};n.n=function(a){return a.value};n.qa=function(a,b){a&&(a.value=b)};n.Oa=ma;function pg(a,b,c){fg.call(this,a,b||og.b(),c)}t(pg,fg);n=pg.prototype;n.n=da("Cg");n.qa=function(a){this.Cg=a;this.F.qa(this.a(),a)};n.cd=da("wg");n.og=function(a){this.wg=a;this.F.og(this.a(),a)};n.k=function(){pg.g.k.call(this);delete this.Cg;delete this.wg};n.w=function(){pg.g.w.call(this);if(this.aa&32){var a=this.wb();a&&J(this.i(),a,"keyup",this.uf)}};n.uf=function(a){return 13==a.keyCode&&"key"==a.type||32==a.keyCode&&"keyup"==a.type?this.td(a):32==a.keyCode};dg("goog-button",function(){return new pg(k)});function qg(){}t(qg,Wf);na(qg);n=qg.prototype;n.P=function(a){var b={"class":"goog-inline-block "+Rf(this,a).join(" "),title:a.cd()||""},b=a.Ha().P("div",b,rg(this,a.Sa,a.Ha()));Sf(this,a,b);return b};n.wc=ea("button");n.va=function(a){return a&&a.firstChild.firstChild};function rg(a,b,c){return c.P("div","goog-inline-block "+(a.ea()+"-outer-box"),c.P("div","goog-inline-block "+(a.ea()+"-inner-box"),b))}n.Pb=function(a){return"DIV"==a.tagName};
n.j=function(a,b){sg(b,j);sg(b,l);var c;a:{c=cf(a.Ha(),b);var d=this.ea()+"-outer-box";if(c&&N(c,d)&&(c=cf(a.Ha(),c),d=this.ea()+"-inner-box",c&&N(c,d))){c=j;break a}c=l}c||b.appendChild(rg(this,b.childNodes,a.Ha()));K(b,"goog-inline-block",this.ea());return qg.g.j.call(this,a,b)};n.ea=ea("goog-custom-button");
function sg(a,b){if(a)for(var c=b?a.firstChild:a.lastChild,d;c&&c.parentNode==a;){d=b?c.nextSibling:c.previousSibling;if(3==c.nodeType){var e=c.nodeValue;if(""==Fa(e))a.removeChild(c);else{c.nodeValue=b?e.replace(/^[\s\xa0]+/,""):e.replace(/[\s\xa0]+$/,"");break}}else break;c=d}};function tg(a,b,c){pg.call(this,a,b||qg.b(),c)}t(tg,pg);dg("goog-custom-button",function(){return new tg(k)});function ug(a,b){U.call(this,b);this.Wa=a||""}t(ug,U);ug.prototype.Ua=k;var vg="placeholder"in document.createElement("input");n=ug.prototype;n.dd=l;n.P=function(){this.d=this.Ha().P("input",{type:"text"})};n.q=function(a){ug.g.q.call(this,a);this.Wa||(this.Wa=a.getAttribute("label")||"");var b;a:{var c=Fe(a);try{b=c&&c.activeElement;break a}catch(d){}b=k}b==a&&(this.dd=j,M(this.a(),this.Qc));vg?this.a().placeholder=this.Wa:this.a().setAttribute("aria-label",this.Wa)};
n.w=function(){ug.g.w.call(this);var a=new fe(this);J(a,this.a(),"focus",this.wh);J(a,this.a(),"blur",this.xj);vg?this.z=a:(pc&&J(a,this.a(),["keypress","keydown","keyup"],this.yj),J(a,Fe(this.a())?Fe(this.a()).parentWindow||Fe(this.a()).defaultView:window,"load",this.Gj),this.z=a,wg(this));xg(this);this.a().Nj=this};n.Xb=function(){ug.g.Xb.call(this);this.z&&(this.z.$(),this.z=k);this.a().Nj=k};function wg(a){!a.tj&&(a.z&&a.a().form)&&(J(a.z,a.a().form,"submit",a.Bj),a.tj=j)}
n.k=function(){ug.g.k.call(this);this.z&&(this.z.$(),this.z=k)};n.Qc="label-input-label";n.wh=function(){this.dd=j;M(this.a(),this.Qc);if(!vg&&!yg(this)&&!this.Mj){var a=this,b=function(){a.a().value=""};E?I(b,10):b()}};n.xj=function(){vg||(he(this.z,this.a(),"click",this.wh),this.Ua=k);this.dd=l;xg(this)};n.yj=function(a){27==a.keyCode&&("keydown"==a.type?this.Ua=this.a().value:"keypress"==a.type?this.a().value=this.Ua:"keyup"==a.type&&(this.Ua=k),a.preventDefault())};
n.Bj=function(){yg(this)||(this.a().value="",I(this.wj,10,this))};n.wj=function(){yg(this)||(this.a().value=this.Wa)};n.Gj=function(){xg(this)};function yg(a){return!!a.a()&&""!=a.a().value&&a.a().value!=a.Wa}n.clear=function(){this.a().value="";this.Ua!=k&&(this.Ua="")};n.reset=function(){yg(this)&&(this.clear(),xg(this))};n.qa=function(a){this.Ua!=k&&(this.Ua=a);this.a().value=a;xg(this)};n.n=function(){return this.Ua!=k?this.Ua:yg(this)?this.a().value:""};
function xg(a){vg?a.a().placeholder!=a.Wa&&(a.a().placeholder=a.Wa):(wg(a),a.a().setAttribute("aria-label",a.Wa));yg(a)?M(a.a(),a.Qc):(!a.Mj&&!a.dd&&K(a.a(),a.Qc),vg||I(a.Ak,10,a))}n.Ca=function(a){this.a().disabled=!a;O(this.a(),this.Qc+"-disabled",!a)};n.isEnabled=function(){return!this.a().disabled};n.Ak=function(){this.a()&&(!yg(this)&&!this.dd)&&(this.a().value=this.Wa)};function zg(a,b,c,d,e,g,h,m,r){var y,z;if(y=c.offsetParent){var B="HTML"==y.tagName||"BODY"==y.tagName;if(!B||"static"!=kf(y,"position"))z=pf(y),B||(B=(B=qf(y))&&pc?-y.scrollLeft:B&&(!E||!G("8"))?y.scrollWidth-y.clientWidth-y.scrollLeft:y.scrollLeft,z=Ce(z,new Be(B,y.scrollTop)))}y=z||new Be;z=pf(a);B=S(a);z=new ef(z.x,z.y,B.width,B.height);if(B=of(a)){var aa=new ef(B.left,B.top,B.right-B.left,B.bottom-B.top),B=Math.max(z.left,aa.left),V=Math.min(z.left+z.width,aa.left+aa.width);if(B<=V){var lb=Math.max(z.top,
aa.top),aa=Math.min(z.top+z.height,aa.top+aa.height);lb<=aa&&(z.left=B,z.top=lb,z.width=V-B,z.height=aa-lb)}}B=De(a);lb=De(c);if(B.s!=lb.s){var V=B.s.body,lb=lb.s.parentWindow||lb.s.defaultView,aa=new Be(0,0),yc=Fe(V)?Fe(V).parentWindow||Fe(V).defaultView:window,nf=V;do{var ga;if(yc==lb)ga=pf(nf);else{ga=nf;var mb=new Be;if(1==ga.nodeType){if(ga.getBoundingClientRect){var ka=lf(ga);mb.x=ka.left;mb.y=ka.top}else{var ka=bf(De(ga)),Na=pf(ga);mb.x=Na.x-ka.x;mb.y=Na.y-ka.y}pc&&!G(12)&&(ka=i,ka=i,E?ka=
"-ms-transform":F?ka="-webkit-transform":oc?ka="-o-transform":pc&&(ka="-moz-transform"),Na=i,ka&&(Na=kf(ga,ka)),Na||(Na=kf(ga,"transform")),Na?(ga=Na.match(Bf),ka=!ga?new Be(0,0):new Be(parseFloat(ga[1]),parseFloat(ga[2]))):ka=new Be(0,0),mb=new Be(mb.x+ka.x,mb.y+ka.y))}else ka=ra(ga.uj),Na=ga,ga.targetTouches?Na=ga.targetTouches[0]:ka&&ga.ca.targetTouches&&(Na=ga.ca.targetTouches[0]),mb.x=Na.clientX,mb.y=Na.clientY;ga=mb}aa.x+=ga.x;aa.y+=ga.y}while(yc&&yc!=lb&&(nf=yc.frameElement)&&(yc=yc.parent));
V=Ce(aa,pf(V));E&&!af(B)&&(V=Ce(V,bf(B)));z.left+=V.x;z.top+=V.y}a=(b&4&&qf(a)?b^2:b)&-5;b=new Be(a&2?z.left+z.width:z.left,a&1?z.top+z.height:z.top);b=Ce(b,y);e&&(b.x+=(a&2?-1:1)*e.x,b.y+=(a&1?-1:1)*e.y);var L;if(h)if(r)L=r;else if(L=of(c))L.top-=y.y,L.right-=y.x,L.bottom-=y.y,L.left-=y.x;a:{r=b.clone();e=0;a=(d&4&&qf(c)?d^2:d)&-5;d=S(c);m=m?m.clone():d.clone();if(g||0!=a)a&2?r.x-=m.width+(g?g.right:0):g&&(r.x+=g.left),a&1?r.y-=m.height+(g?g.bottom:0):g&&(r.y+=g.top);if(h){if(L){g=r;e=0;if(65==(h&
65)&&(g.x<L.left||g.x>=L.right))h&=-2;if(132==(h&132)&&(g.y<L.top||g.y>=L.bottom))h&=-5;g.x<L.left&&h&1&&(g.x=L.left,e|=1);g.x<L.left&&(g.x+m.width>L.right&&h&16)&&(m.width=Math.max(m.width-(g.x+m.width-L.right),0),e|=4);g.x+m.width>L.right&&h&1&&(g.x=Math.max(L.right-m.width,L.left),e|=1);h&2&&(e|=(g.x<L.left?16:0)|(g.x+m.width>L.right?32:0));g.y<L.top&&h&4&&(g.y=L.top,e|=2);g.y>=L.top&&(g.y+m.height>L.bottom&&h&32)&&(m.height=Math.max(m.height-(g.y+m.height-L.bottom),0),e|=8);g.y+m.height>L.bottom&&
h&4&&(g.y=Math.max(L.bottom-m.height,L.top),e|=2);h&8&&(e|=(g.y<L.top?64:0)|(g.y+m.height>L.bottom?128:0));h=e}else h=256;e=h;if(e&496){c=e;break a}}g=pc&&(jc||rc)&&G("1.9");r instanceof Be?(h=r.x,r=r.y):(h=r,r=i);c.style.left=rf(h,g);c.style.top=rf(r,g);if(!(d==m||(!d||!m?0:d.width==m.width&&d.height==m.height)))g=af(De(Fe(c))),E&&(!g||!G("8"))?(h=c.style,g?(g=xf(c,"padding"),c=Af(c),h.pixelWidth=m.width-c.left-g.left-g.right-c.right,h.pixelHeight=m.height-c.top-g.top-g.bottom-c.bottom):(h.pixelWidth=
m.width,h.pixelHeight=m.height)):(c=c.style,pc?c.MozBoxSizing="border-box":F?c.WebkitBoxSizing="border-box":c.boxSizing="border-box",c.width=Math.max(m.width,0)+"px",c.height=Math.max(m.height,0)+"px");c=e}return c};function Ag(){}Ag.prototype.Za=ba();function Bg(a,b,c){this.element=a;this.hf=b;this.nk=c}t(Bg,Ag);Bg.prototype.Za=function(a,b,c){zg(this.element,this.hf,a,b,i,c,this.nk)};function Cg(a,b,c,d){Bg.call(this,a,b);this.Pj=c?5:0;this.Yf=d||i}t(Cg,Bg);Cg.prototype.Za=function(a,b,c,d){var e=zg(this.element,this.hf,a,b,k,c,10,d,this.Yf);if(e&496){var g=Dg(e,this.hf),b=Dg(e,b),e=zg(this.element,g,a,b,k,c,10,d,this.Yf);e&496&&(g=Dg(e,g),b=Dg(e,b),zg(this.element,g,a,b,k,c,this.Pj,d,this.Yf))}};function Dg(a,b){a&48&&(b^=2);a&192&&(b^=1);return b};function Eg(a,b){u.call(this);this.K=new fe(this);var c=a||k;Fg(this);this.d=c;b&&this.Di(b)}t(Eg,fd);n=Eg.prototype;n.d=k;n.Rd=j;n.Og=k;n.Ac=l;n.Ek=l;n.Gf=-1;n.Qh=-1;n.Ij=l;n.lj=j;n.Lb="toggle_display";n.Di=ca("Lb");n.a=da("d");function Fg(a){a.Ac&&f(Error("Can not change this state of the popup while showing."))}n.Va=da("Ac");
n.ka=function(a){this.Bd&&this.Bd.stop();this.ed&&this.ed.stop();if(a){if(!this.Ac&&this.dispatchEvent("beforeshow")){this.d||f(Error("Caller must call setElement before trying to show the popup"));this.Za();a=Fe(this.d);this.Ij&&J(this.K,a,"keydown",this.bk,j);if(this.Rd)if(J(this.K,a,"mousedown",this.ji,j),E){var b;try{b=a.activeElement}catch(c){}for(;b&&"IFRAME"==b.nodeName;){try{var d=b.contentDocument||b.contentWindow.document}catch(e){break}a=d;b=a.activeElement}J(this.K,a,"mousedown",this.ji,
j);J(this.K,a,"deactivate",this.ii)}else J(this.K,a,"blur",this.ii);"toggle_display"==this.Lb?(this.d.style.visibility="visible",T(this.d,j)):"move_offscreen"==this.Lb&&this.Za();this.Ac=j;this.Bd?(Zc(this.Bd,"end",this.ni,l,this),this.Bd.play()):this.ni()}}else this.yc()};n.Za=ma;n.yc=function(a){if(!this.Ac||!this.dispatchEvent({type:"beforehide",target:a}))return l;this.K&&ie(this.K);this.Ac=l;this.Qh=s();this.ed?(Zc(this.ed,"end",ya(this.Zg,a),l,this),this.ed.play()):this.Zg(a);return j};
n.Zg=function(a){"toggle_display"==this.Lb?this.Ek?I(this.Dh,0,this):this.Dh():"move_offscreen"==this.Lb&&(this.d.style.top="-10000px");this.dispatchEvent({type:"hide",target:a})};n.Dh=function(){this.d.style.visibility="hidden";T(this.d,l)};n.ni=function(){this.Gf=s();this.Qh=-1;this.dispatchEvent("show")};n.ji=function(a){a=a.target;!Se(this.d,a)&&((!this.Og||Se(this.Og,a))&&!(150>s()-this.Gf))&&this.yc(a)};n.bk=function(a){27==a.keyCode&&this.yc(a.target)&&(a.preventDefault(),a.stopPropagation())};
n.ii=function(a){if(this.lj){var b=Fe(this.d);if(E||oc){if(a=b.activeElement,!a||Se(this.d,a)||"BODY"==a.tagName)return}else if(a.target!=b)return;150>s()-this.Gf||this.yc()}};n.k=function(){Eg.g.k.call(this);this.K.$();Da(this.Bd);Da(this.ed);delete this.d;delete this.K};function Gg(a,b){this.ri=4;this.cg=b||i;Eg.call(this,a)}t(Gg,Eg);function Hg(a,b){a.ri=b;a.Va()&&a.Za()}function Ig(a,b){a.cg=b||i;a.Va()&&a.Za()}function Jg(a,b,c,d,e){a.Tj=b==k||b instanceof df?b:new df(b,c,d,e);a.Va()&&a.Za()}Gg.prototype.Za=function(){if(this.cg){var a=!this.Va()&&"move_offscreen"!=this.Lb,b=this.a();a&&(b.style.visibility="hidden",T(b,j));this.cg.Za(b,this.ri,this.Tj);a&&T(b,l)}};function Kg(a,b,c){u.call(this);this.Bb=a;this.ha=b;this.K=c;this.$e=q(this.kk,this)}t(Kg,u);n=Kg.prototype;n.Ge=l;n.qi=0;n.la=k;n.mh=function(){!this.la&&!this.qi?this.$c():this.Ge=j};n.stop=function(){this.la&&(hd.clearTimeout(this.la),this.la=k,this.Ge=l)};n.k=function(){Kg.g.k.call(this);this.stop()};n.kk=function(){this.la=k;this.Ge&&!this.qi&&(this.Ge=l,this.$c())};n.$c=function(){this.la=I(this.$e,this.ha);this.Bb.call(this.K)};function Lg(a,b){u.call(this);this.Bb=a;this.K=b;this.Ta=new le(q(this.jk,this),0,this)}t(Lg,u);n=Lg.prototype;n.ha=0;n.ig=0;n.Kh=l;n.k=function(){this.Ta.$();delete this.Bb;delete this.K;Lg.g.k.call(this)};n.start=function(a,b){this.stop();this.Kh=l;var c=b||0;this.ha=Math.max(a||0,0);this.ig=0>c?-1:s()+c;this.Ta.start(0>c?this.ha:Math.min(this.ha,c))};n.stop=function(){this.Ta.stop()};n.xb=function(){return this.Ta.xb()};
n.jk=function(){if(this.Bb.call(this.K))this.Kh=j;else if(0>this.ig)this.Ta.start(this.ha);else{var a=this.ig-s();0>=a||this.Ta.start(Math.min(this.ha,a))}};function Mg(a){u.call(this);this.d=a;this.qd=this.d.value;this.z=new fe(this);this.Xa=s();F||E||pc&&G("1.9")?J(this.z,a,"paste",this.uc):J(this.z,a,["keydown","blur","focus","mouseover","input"],this.zj);this.Ta=new Lg(q(this.Sg,this))}t(Mg,fd);n=Mg.prototype;n.t="init";n.v=Fd("goog.events.PasteHandler");n.k=function(){Mg.g.k.call(this);this.z.$();this.z=k;this.Ta.$();this.Ta=k};
n.Sg=function(){if(this.qd==this.d.value)return l;this.v.info("detected textchange after paste");this.dispatchEvent("after_paste");return j};n.uc=function(a){a=new Jc(a.ca);a.type="paste";this.dispatchEvent(a);I(function(){this.Sg()||this.Ta.start(50,200)},0,this)};
n.zj=function(a){switch(this.t){case "init":switch(a.type){case "blur":this.t="init";break;case "focus":this.t="focused";break;case "mouseover":this.t="init";this.d.value!=this.qd&&(this.v.info("paste by dragdrop while on init!"),this.uc(a));break;default:Bd(this.v,"unexpected event "+a.type+"during init")}break;case "focused":switch(a.type){case "input":var b=this.Xa+400;if(s()>b||"focus"==this.wk)this.v.info("paste by textchange while focused!"),this.uc(a);break;case "blur":this.t="init";break;
case "keydown":this.v.info("key down ... looking for ctrl+v");if(jc&&oc&&0==a.keyCode||jc&&oc&&17==a.keyCode)break;this.t="typing";break;case "mouseover":this.d.value!=this.qd&&(this.v.info("paste by dragdrop while focused!"),this.uc(a));break;default:Bd(this.v,"unexpected event "+a.type+" during focused")}break;case "typing":switch(a.type){case "input":this.t="focused";break;case "blur":this.t="init";break;case "keydown":if(a.ctrlKey&&86==a.keyCode||a.shiftKey&&45==a.keyCode||a.metaKey&&86==a.keyCode)this.v.info("paste by ctrl+v while keypressed!"),
this.uc(a);break;case "mouseover":this.d.value!=this.qd&&(this.v.info("paste by dragdrop while keypressed!"),this.uc(a));break;default:Bd(this.v,"unexpected event "+a.type+" during keypressed")}break;default:Bd(this.v,"invalid "+this.t+" state")}this.Xa=s();this.qd=this.d.value;this.v.info(a.type+" -> "+this.t);this.wk=a.type};E&&G(8);var Ng={};function Og(a,b,c){a.innerHTML=b(c||Ng,i,i)}function X(a,b){var c;a:if(c=(new Ee(i)||De()).createElement("DIV"),c.innerHTML=a(b||Ng,i,i),1==c.childNodes.length){var d=c.firstChild;if(1==d.nodeType){c=d;break a}}return c}function Y(a){return"object"===typeof a&&a&&0===a.Fl?a.content:String(a).replace(Pg,Qg)}
var Rg={"\x00":"&#0;",'"':"&quot;","&":"&amp;","'":"&#39;","<":"&lt;",">":"&gt;","\t":"&#9;","\n":"&#10;","\x0B":"&#11;","\f":"&#12;","\r":"&#13;"," ":"&#32;","-":"&#45;","/":"&#47;","=":"&#61;","`":"&#96;","\u0085":"&#133;","\u00a0":"&#160;","\u2028":"&#8232;","\u2029":"&#8233;"};function Qg(a){return Rg[a]}var Pg=/[\x00\x22\x26\x27\x3c\x3e]/g;function Sg(){return'<div class="popup" id="popup" style="visibility: hidden; display: none;"><div class="content"></div><div id="tailarrow"></div></div>'}function Tg(a){return(a.link?'<a href="'+Y(a.link)+'">':"")+'<div class="tooltip">'+a.text+"</div>"+(a.link?"</a>":"")}
function Ug(){return'<div class="comment-oob">Click <div class="fb-icon"></div> and <div class="twitter-icon"></div> for instant sharing<div class="on-off"><div class="off">OFF <div class="twitter-icon"></div></div> &#8594; <div class="on">ON <div class="twitter-icon on"></div></div></div></div>'}
function Vg(){return'<div class="create-poll"><div class="label">CREATE A USER POLL</div><input type="text" placeholder="Title" class="poll-title"/><div class="label">OPTIONS</div><input type="text" placeholder="Option 1" class="option-input"/><input type="text" placeholder="Option 2" class="option-input"/><div class="add-option button">ADD OPTION</div><div class="submit-poll button">CREATE</div></div>'}
function Wg(){return'<div class="select-program"><div class="select-header">Suggest a Program</div><div class="select-content"><div class="page"><input type="text" class="program-input" placeholder="paste a youtube link"/><div class="page2"></div></div></div></div>'}function Xg(a){return'<div class="confirm-media"><img src="'+Y(a.Tk)+'" /><div class="title">'+Y(a.title)+'</div><div class="dark button">Yes</div></div>'};function Yg(){w.call(this)}t(Yg,w);na(Yg);function Zg(){var a=P("popup");a||(a=X(Sg),document.body.appendChild(a));Gg.call(this,a);H(window,"resize",q(this.ka,this,l));H(this,"hide",this.ek);this.eh=this.pg=this.yf=l;this.N=Yg.b();this.N.subscribe("tooltip",this.Mk,this);this.N.subscribe("oob",this.Kk,this);this.N.subscribe("create-poll",this.Gk,this);this.N.subscribe("select-program",this.Hk,this);this.N.subscribe("hide",this.yc,this);H(this.a(),"mouseover",q(function(){this.yf=j},this));H(this.a(),"mouseout",q(function(){this.yf=l;this.pg&&
this.N.c("hide")},this))}t(Zg,Gg);na(Zg);function $g(a,b,c,d){H(b,"mouseover",q(function(){this.Ug&&hd.clearTimeout(this.Ug);this.pg=l;this.N.c("tooltip",b,c,d)},a));H(b,"mouseout",q(function(){this.Ug=I(q(function(){this.yf?this.pg=j:this.N.c("hide")},this),100)},a))}
function ah(a,b,c){"top"==c?(Hg(a,1),c=-1*(S(a.a()).width-S(b).width)/2,Jg(a,0,0,6,c),Ig(a,new Cg(b,4)),a.a().className="popup",K(a.a(),"top")):"left"==c?(Hg(a,0),c=-1*(S(a.a()).height-S(b).height)/2,Jg(a,c,6,0,0),Ig(a,new Cg(b,6)),a.a().className="popup",K(a.a(),"left")):"right"==c&&(Hg(a,0),c=-1*(S(a.a()).height-S(b).height)/2,Jg(a,c,0,0,6),Ig(a,new Cg(b,6)),a.a().className="popup",K(a.a(),"right"))}n=Zg.prototype;n.ek=function(){this.eh||(this.yc(),this.N.c("on-hide"))};
n.va=function(){return Q("content",this.a())};n.Mk=function(a,b,c,d){this.ka(l);ah(this,a,b);Og(this.va(),Tg,{text:"function"==typeof c.text?c.text():c.text,link:c.link});d&&(Fg(this),this.Rd=l);this.ka(j)};n.Kk=function(a,b,c){this.ka(l);ah(this,a,b);a=-1*(S(this.a()).width-S(a).width)/2;Jg(this,0,0,36,a);Og(this.va(),Ug,{text:c.html,link:c.link});Fg(this);this.Rd=l;this.ka(j);J(this.K,this.a(),"click",q(function(){this.N.c("hide")},this))};
n.Gk=function(a){this.ka(l);Hg(this,2);Ig(this,new Cg(a,7));this.a().className="popup";K(this.a(),"top");a=-1*(S(this.a()).width-S(a).width)/2;Jg(this,0,0,36,a);Og(this.va(),Vg,{});Fg(this);this.Rd=l;this.ka(j);this.eh=j};
n.Hk=function(a,b){this.ka(l);Hg(this,0);var c=-1*(S(this.a()).height-S(a).height)/2;Jg(this,c,0,0,5);Ig(this,new Cg(a,6));K(this.a(),"left");Og(this.va(),Wg);this.Gd=new ug("paste a YouTube link");this.Gd.j(Q("program-input",this.a()));var c=new Xf(this.Gd.a()),d=new Mg(this.Gd.a()),e=new Kg(q(this.Wf,this,b),1E3);this.ka(j);J(J(J(this.K,d,"after_paste",q(this.Wf,this,b)),c,"key",q(function(){e&&e.mh()},this)),this.Gd.a(),"focus",q(this.Wf,this,b))};
n.Wf=function(a){var b=Q("select-content",this.a());try{var c;var d=this.Gd.n(),e=bh.exec(d);e?c=new ch(e[1]||e[2],i,i):f(Error("failed to parse video id from youtube url: "+d));x(Ea("https://gdata.youtube.com/feeds/api/videos/%s?v=2&alt=json",c.Xi),q(function(d){var e=Gd(Zd(d.target)).entry,d=e.title.$t,g=e.media$group.media$thumbnail[0].url,e=Q("page2",this.a());Og(e,Xg,{title:d,Tk:g});d=new tg("Yes");d.j(Q("button",e));(new Df(b,[0,0],[260,0],300,Ef)).play();J(this.K,d,"action",q(this.Rf,this,
a,c))},this))}catch(g){}};n.Rf=function(a,b){x("/_addprogram",q(function(b){b=Gd(Zd(b.target));b=new Jb(b);a.c(Vb,b);this.ka(l)},this),"POST","channel="+a.id+"&youtube_id="+b.Xi)};function Z(){w.call(this)}t(Z,w);na(Z);function dh(a){return'<div class="info"><div class="picture"><img src="'+Y(a.media.qb)+'" class="thumb"><div class="ytvideo"></div><div class="publisher"><img src="'+Y(a.media.oa.L)+'"><div class="name">'+Y(a.media.oa.name)+'</div></div><div class="links"><div class="local"></div><a target="_blank" href="'+a.media.Jj+'"><div class="host"></div></a></div><div class="link-select" style="display:none"><input onClick="this.select();" class="link-input" type="text" value="'+a.media.link+'" readonly="readonly"/></div><div class="title"><div class="text">'+
Y(a.media.name)+'</div></div><div class="scrollable ios-scroll" '+(!a.description?'style="display:none"':"")+'><div class="desc-link"><a href="#">DESCRIPTION</a><div class="published">'+Y(a.ic)+'</div></div><div class="description">'+a.description+'</div></div><div class="button play"><div class="icon"></div><div class="loading-icon"></div></div><div class="options"><div class="button star"><div class="icon"></div></div><div class="button facebook"><div class="icon"></div></div><div class="button twitter"><div class="icon"></div></div><div class="button send"><div class="icon"></div></div></div></div><div class="viewers" style="display: none"><div class="label"><div class="eye-icon"></div></div></div><div class="info-contents"><div class="scrollable ios-scroll"><div class="user-poll" style="display: none"><div class="label"><div class="poll-icon"></div><div class="status">VOTE</div></div><div class="poll-options"></div></div><div class="tweet-holder" style="display:none"><div class="label"><div class="globe-icon"></div><a class="tweets-link">LATEST TWEETS</a></div><div class="tweets"></div><div class="dot-nav"></div></div><div class="comments-holder ios-scroll" style="display:none"><div class="label"><div class="friends-icon"></div><a class="conv-link">CONVERSATION</a>'+
(a.Oj?'<a class="prev-link">&#10218; LAST PROGRAM</a>':"")+'</div><div class="no-comments" style="display:none">Start the conversation with friends.</div><div class="comments"></div><div class="top-grad"></div><div class="bottom-grad"></div></div><div class="create-poll-button" style="display:none">+ POLL</div><div class="create-poll popup" style="display:none"><div class="label">CREATE A USER POLL</div><input type="text" placeholder="Title" class="poll-title"/><div class="label" style="margin-top: 5px;">OPTIONS</div><div class="option-inputs"><input type="text" placeholder="Option 1" class="option-input option-input-1"/><input type="text" placeholder="Option 2" class="option-input option-input-2"/></div><div class="add-option button">ADD OPTION</div><div class="submit-poll button">CREATE</div><div class="close"></div></div></div></div><div class="send-media popup" style="display:none"><div class="label">SEND TO A FRIEND</div><div class="recipients"><textarea placeholder="To"></textarea></div><div class="label">ADD A MESSAGE:</div><div class="send-message"><textarea placeholder="Optional"></textarea><div class="add-comment button">SEND</div></div><div class="close"></div></div><div class="loading loading-activity"><div class="loading-spinner"></div></div><div class="overlay" style="display: none"><div class="leaving"><div>This program is over. Carry on?</div><div class="button dark no">Not yet</div><div class="button dark yes">Let\'s go</div></div></div></div>'}
function eh(a){return'<div class="viewer" name="'+Y(a.$d)+'"><img src="'+Y(a.p.L)+'"></div>'}
function fh(a){return'<div class="tweet" id="'+Y(a.prefix)+"-"+Y(a.sb.id)+'">'+(a.sb.p?'<a href="#user:'+Y(a.sb.p.id)+'"><img src="'+Y(a.sb.L)+'"/></a>':'<img src="'+Y(a.sb.L)+'"/>')+'<div class="text"><a class="handle" target="_blank" href="http://www.twitter.com/'+Y(a.sb.handle)+"/status/"+Y(a.sb.id)+'">'+Y(a.sb.handle)+"</a> "+a.text+'</div><div class="timestamp">'+Y(a.timestamp)+'</div><div class="tweet-options"><div class="reply"></div></div></div>'}
function gh(a){return'<div class="comment'+(a.M.A?" reply":"")+'" '+(a.M.id?'id="'+Y(a.prefix)+"-"+Y(a.M.id)+'"':"")+">"+(!a.M.A?'<a href="#user:'+Y(a.M.p.id)+'"><div class="user-picture" style="background:'+Y(a.M.p.color)+'"><img src="'+Y(a.M.p.L)+'"/></div></a>':"")+'<div class="template"><a class="user" href="#user:'+Y(a.M.p.id)+'">'+Y(a.M.p.name)+'</a>  <div class="text">'+a.text+'<div class="comment-options">'+(a.oi?'<div class="remove"></div> ':"")+'<div class="reply"></div></div></div><div class="timestamp">'+
Y(a.M.nb)+'</div><div class="replies"></div>'+(!a.M.A?'<div class="reply-input"><textarea class="reply-textarea" rows="1" placeholder="reply..."></textarea></div>':"")+"</div></div>"}
function hh(){return'<div class="comment-input"><div class="textarea-holder"><div class="input-holder"><div class="highlighter"></div><textarea class="comment-textarea" rows="1" placeholder="Add to the conversation..."></textarea><div class="suggestions" style="display:none"></div></div></div><div class="comment-controls"><div class="comment-toggle tweet-toggle"><div class="icon"></div></div><div class="comment-toggle fb-toggle"><div class="icon"></div></div></div><div class="comment-button add-comment">ADD</div><div class="popup top" style="display:none"><div class="comment-oob">Click <div class="fb-icon"></div> and <div class="twitter-icon"></div> for instant sharing<div class="on-off"><div class="off">OFF <div class="twitter-icon"></div></div> &#8594; <div class="on">ON <div class="twitter-icon on"></div></div></div></div></div></div>'}
function ih(a){var b='<div class="activity'+(1<a.C.length?" digest":"")+'">';if(1<a.C.length){for(var b=b+('<div class="template"><span>'+Y(a.C.length)+" friends </span>"+(a.Si?"watched":"are watching")+(a.O?' <a href="#channel:'+Y(a.O.id)+'">'+Y(a.O.name)+"</a>":"")+'<div class="timestamp">'+Y(a.time)+'</div></div><div class="users">'),c=a.C,d=c.length,e=0;e<d;e++)var g=c[e],b=b+('<a href="#user:'+Y(g.id)+'"><div class="picture" style="background:'+Y(g.color)+'"><img src="'+Y(g.L)+'"/></div></a>');
b+="</div>"}return b+=(1==a.C.length?'<a href="#user:'+Y(a.C[0].id)+'"><div class="picture" style="background:'+Y(a.C[0].color)+'"><img src="'+Y(a.C[0].L)+'"/></div></a><div class="template"><a class="user" href="#user:'+Y(a.C[0].id)+'">'+Y(a.C[0].name)+"</a> "+(a.Si?"watched":"is watching")+(a.O?' <a href="#channel:'+Y(a.O.id)+'">'+Y(a.O.name)+"</a>":"")+'<div class="timestamp">'+Y(a.time)+"</div></div>":"")+'<div class="medias"></div></div>'}
function jh(a){for(var b='<div class="comment activity'+(1<a.Ra.length?" digest":"")+'">'+(1<a.Ra.length?'<div class="template">'+(1==a.C.length?'<a class="user" href="#user:'+Y(a.C[0].id)+'">'+Y(a.C[0].name)+' </a> discussed <a class="title" href="#info:'+Y(a.media.id)+'">'+Y(a.media.name)+"</a>.":"<span>"+Y(a.C.length)+' friends </span> discussed <a class="title" href="#info:'+Y(a.media.id)+'"> '+Y(a.media.name)+"</a>.")+"</div>":""),a=a.Ra,c=a.length,d=0;d<c;d++)var e=a[d],b=b+('<div class="comment"><a href="#user:'+
Y(e.p.id)+'"><div class="picture" style="background:'+Y(e.p.color)+'"><img src="'+Y(e.p.L)+'"/></div></a><div class="template"><a class="user" href="#user:'+Y(e.p.id)+'">'+Y(e.p.name)+'</a>  <div class="text">'+e.text+'</div><div class="timestamp">'+Y(e.nb)+"</div></div></div>");return b+'<div class="medias"></div></div>'}
function kh(a){var b='<div class="like activity'+(1<a.C.length?" digest":"")+'">';if(1<a.C.length){for(var b=b+('<div class="template"><span>'+Y(a.C.length)+' friends </span>liked<div class="timestamp">'+Y(a.time)+'</div></div><div class="users">'),c=a.C,d=c.length,e=0;e<d;e++)var g=c[e],b=b+('<a href="#user:'+Y(g.id)+'"><div class="picture" style="background:'+Y(g.color)+'"><img src="'+Y(g.L)+'"/></div></a>');b+="</div>"}return b+=(1==a.C.length?'<a href="#user:'+Y(a.C[0].id)+'"><div class="picture" style="background:'+
Y(a.C[0].color)+'"><img src="'+Y(a.C[0].L)+'"/></div></a><div class="template" style="top:10px;margin-bottom:30px"><a class="user" href="#user:'+Y(a.C[0].id)+'">'+Y(a.C[0].name)+"</a> liked "+(1<a.Zh?Y(a.Zh)+" stories":"")+'<div class="timestamp">'+Y(a.time)+"</div></div>":"")+'<div class="medias"></div></div>'}
function lh(a){return'<div class="list-info"><div class="picture-cell" '+(a.qb?'style="display:table-cell"':"")+">"+(a.link?'<a href="'+Y(a.link)+'" target="_blank">':"")+'<div class="picture"><img class="thumb" src="'+Y(a.qb)+'"></div>'+(a.link?"</a>":"")+'</div><div class="description" style="display:table-cell">'+a.description+"</div></div>"}function mh(a){return'<li class="'+Y(a.className)+' tab"><div class="label">'+Y(a.name)+"</div></li>"}
function nh(a){return'<div class="admin"><div class="scrollable ios-scroll"><div class="search"><input type="text" class="input" '+(a.Ih?'placeholder="'+Y(a.Ih)+'"':"")+'/></div><div class="results"></div><div class="section" style="display:none"><div class="label">CHANNELS</div><div class="admin-channels"></div></div><div class="section" style="display:none"><div class="label">CURRENT TOPICS</div><div class="topics"></div></div><div class="section" style="display:none"><div class="label">COLLECTIONS</div><div class="collections"></div></div><div class="scroll-area"></div>'}
function oh(){return'<div class="admin-list admin"><div class="search"><input class="input" type="text" placeholder="Paste video or playlist link" /></div><div class="tabbed pending"><ul class="tabs"><li class="tab pending"><div class="label">PENDING</div></li><li class="tab all"><div class="label">ALL</div></li><li class="tab playlists"><div class="label">PLAYLISTS</div></li><li class="tab publishers"><div class="label">PUBLISHERS</div></li><li class="tab categories"><div class="label">CATEGORIES</div></li></ul><div class="pending-content content pending"></div><div class="all-content content all"></div><div class="playlists-content content playlists"></div><div class="publishers-content content publishers"></div><div class="categories-content content categories"><div class="label">GUIDE CATEGORIES</div><div class="categories-list"></div><div class="label">FEED IDS</div><div class="feed-ids"></div><div class="label">FEED CATEGORIES</div><div class="feed-cats"></div></div><div class="spinner" style="display:none"></div></div>'}
function ph(a){return'<div class="playlist"><div class="title">'+Y(a.name)+'</div><div class="controls"><div class="remove dark button">x</div></div></div>'}function qh(a){return'<div class="category button">'+Y(a.name)+"</div>"}function rh(a){return'<div class="publisher">'+(a.L?'<img src="'+Y(a.L)+'"/>':"")+'<div class="title">'+Y(a.name)+'</div><div class="controls"><div class="remove dark button">x</div></div></div>'}
function sh(a){return'<div class="channel '+(a.O.Hc?"on":"off")+'"><div class="title">'+Y(a.O.name)+'</div><div class="controls"><div class="fetch dark button">FETCH</div><div class="program dark button">PROG.</div><div class="remove dark button">x</div><div class="on dark button">ON</div><div class="off dark button">OFF</div></div>'+(a.O.$f?'<div class="pending">'+Y(a.O.$f)+"</div>":"")+"</div>"}
function th(a){return'<div class="collection"><div class="title">'+Y(a.cf.name)+'</div><div class="controls">'+(a.cf.$f?'<div class="pending">'+Y(a.cf.$f)+"</div>":"")+'<div class="fetch dark button">FETCH</div><div class="button dark remove">x</div></div></div>'}
function uh(a){return'<div class="tabbed '+(a.Nf?"inbox":"messages")+'"><ul class="tabs">'+(a.Nf?'<li class="tab inbox"><div class="label">INBOX</div></li>':'<li class="tab messages"><div class="label">MESSAGES</div></li>')+'<li class="tab activity"><div class="label">ACTIVITY</div></li><li class="tab starred"><div class="label"><div class="heart"></div>\'d</div></li></ul>'+(a.Nf?'<div class="inbox-content content inbox"><div class="label">NOTIFICATIONS</div><div class="notifications-content content notifications"><div class="loading loading-activity"><div class="loading-spinner"></div></div></div><div class="label messages-label">MESSAGES<div class="label show-all"><a href="#friendlist:1">ALL FRIENDS &gt;</a></div></div><div class="messages-content content messages"><div class="loading loading-activity"><div class="loading-spinner"></div></div></div></div>':
'<div class="messages-content content messages"><div class="loading loading-activity"><div class="loading-spinner"></div></div></div>')+'<div class="activity-content content activity"><div class="loading loading-activity"><div class="loading-spinner"></div></div></div><div class="starred-content content starred"><div class="loading loading-starred"><div class="loading-spinner"></div></div></div><div class="spinner" style="display:none"></div></div>'}
function vh(){return'<div class="tabbed"><ul class="tabs"><li class="tab comments"><div class="label">CONVERSATION</div></li><li class="tab tweets"><div class="label">TWEETS</div></li></ul><div class="comments-content content comments-holder"><div class="loading loading-activity"><div class="loading-spinner"></div></div></div><div class="tweets-content content tweet-holder"><div class="loading loading-starred"><div class="loading-spinner"></div></div></div></div>'}
function wh(a){return'<div class="list-media show"><div class="media"><div class="preview"><div class="thumb" style="background-image:url('+Y(a.media.qb)+"); background-position: 50% "+Y(a.media.Mi)+'%"></div><div class="title">'+Y(a.media.name)+'</div><div class="stats"><div class="comment-count"><div class="icon"></div>'+Y(a.media.Wc)+'</div><div class="like-count"><div class="icon"></div>'+Y(a.media.Qj)+'</div></div></div></div><div class="publisher">'+(a.media.oa?'<img src="'+Y(a.media.oa.L)+
'"><div class="name">'+Y(a.media.oa.name)+"</div>":"")+'<div class="list-play"><div class="icon"></div></div><div class="list-plus"><div class="icon"></div></div></div></div>'}
function xh(a){return'<div class="admin-media list-media"><div class="media"><div class="preview"><div class="thumb" style="background-image:url('+Y(a.media.qb)+"); background-position: 50% "+Y(a.media.Mi)+'%"></div><div class="title">'+Y(a.media.name)+'</div><div class="published">'+Y(a.ic)+'</div><div class="play"></div><div class="approve"></div><div class="remove"></div><div class="repos"></div></div></div><div class="publisher"><img src="'+Y(a.media.oa.L)+'"><div class="name">'+Y(a.media.oa.name)+
'</div><div class="duration">'+Y(a.media.duration)+' seconds</div></div><div class="description">'+Y(a.media.description)+"</div></div>"}function yh(a){return'<div class="option"><div class="percent"></div><div class="name">'+Y(a.name)+'</div><div class="percent-number">'+Y(a.ok)+"</div></div>"};function zh(a,b,c){u.call(this);this.target=a;this.handle=b||a;this.Uh=c||new ef(NaN,NaN,NaN,NaN);this.s=Fe(a);this.z=new fe(this);H(this.handle,["touchstart","mousedown"],this.Dd,l,this)}t(zh,fd);var Ah=E||pc&&G("1.9.3");n=zh.prototype;n.clientX=0;n.clientY=0;n.screenX=0;n.screenY=0;n.Ii=0;n.Ji=0;n.rc=0;n.sc=0;n.mf=j;n.Vb=l;n.Eh=0;n.Uj=0;n.Lj=l;n.Nd=l;n.i=da("z");n.Ci=ca("De");n.Ca=ca("mf");
n.k=function(){zh.g.k.call(this);$c(this.handle,["touchstart","mousedown"],this.Dd,l,this);ie(this.z);Ah&&this.s.releaseCapture();this.z=this.handle=this.target=k};function Bh(a){ja(a.La)||(a.La=qf(a.target));return a.La}
n.Dd=function(a){var b="mousedown"==a.type;if(this.mf&&!this.Vb&&(!b||Lc(a))){Ch(a);if(0==this.Eh)if(this.dispatchEvent(new Dh("start",this,a.clientX,a.clientY,a)))this.Vb=j,a.preventDefault();else return;else a.preventDefault();var b=this.s,c=b.documentElement,d=!Ah;J(this.z,b,["touchmove","mousemove"],this.Fj,d);J(this.z,b,["touchend","mouseup"],this.Wb,d);Ah?(c.setCapture(l),J(this.z,c,"losecapture",this.Wb)):J(this.z,b?b.parentWindow||b.defaultView:window,"blur",this.Wb);E&&this.Lj&&J(this.z,
b,"dragstart",Hc);this.De&&J(this.z,this.De,"scroll",this.mi,d);this.clientX=this.Ii=a.clientX;this.clientY=this.Ji=a.clientY;this.screenX=a.screenX;this.screenY=a.screenY;this.Nd?(a=this.target,b=a.offsetLeft,c=a.offsetParent,!c&&"fixed"==kf(a,"position")&&(c=Fe(a).documentElement),c?(pc?(d=Af(c),b+=d.left):Cc(8)&&(d=Af(c),b-=d.left),a=qf(c)?c.clientWidth-(b+a.offsetWidth):b):a=b):a=this.target.offsetLeft;this.rc=a;this.sc=this.target.offsetTop;this.Zf=bf(De(this.s));this.Uj=s()}else this.dispatchEvent("earlycancel")};
n.Wb=function(a,b){ie(this.z);Ah&&this.s.releaseCapture();if(this.Vb){Ch(a);this.Vb=l;var c=Eh(this,this.rc),d=Fh(this,this.sc);this.dispatchEvent(new Dh("end",this,a.clientX,a.clientY,a,c,d,b||"touchcancel"==a.type))}else this.dispatchEvent("earlycancel");("touchend"==a.type||"touchcancel"==a.type)&&a.preventDefault()};
function Ch(a){var b=a.type;"touchstart"==b||"touchmove"==b?a.init(a.ca.targetTouches[0],a.currentTarget):("touchend"==b||"touchcancel"==b)&&a.init(a.ca.changedTouches[0],a.currentTarget)}
n.Fj=function(a){if(this.mf){Ch(a);var b=(this.Nd&&Bh(this)?-1:1)*(a.clientX-this.clientX),c=a.clientY-this.clientY;this.clientX=a.clientX;this.clientY=a.clientY;this.screenX=a.screenX;this.screenY=a.screenY;if(!this.Vb){var d=this.Ii-this.clientX,e=this.Ji-this.clientY;if(d*d+e*e>this.Eh)if(this.dispatchEvent(new Dh("start",this,a.clientX,a.clientY,a)))this.Vb=j;else{this.Xd||this.Wb(a);return}}c=Gh(this,b,c);b=c.x;c=c.y;this.Vb&&this.dispatchEvent(new Dh("beforedrag",this,a.clientX,a.clientY,a,
b,c))&&(Hh(this,a,b,c),a.preventDefault())}};function Gh(a,b,c){var d=bf(De(a.s)),b=b+(d.x-a.Zf.x),c=c+(d.y-a.Zf.y);a.Zf=d;a.rc+=b;a.sc+=c;b=Eh(a,a.rc);a=Fh(a,a.sc);return new Be(b,a)}n.mi=function(a){var b=Gh(this,0,0);a.clientX=this.clientX;a.clientY=this.clientY;Hh(this,a,b.x,b.y)};function Hh(a,b,c,d){a.bh(c,d);a.dispatchEvent(new Dh("drag",a,b.clientX,b.clientY,b,c,d))}
function Eh(a,b){var c=a.Uh,d=!isNaN(c.left)?c.left:k,c=!isNaN(c.width)?c.width:0;return Math.min(d!=k?d+c:Infinity,Math.max(d!=k?d:-Infinity,b))}function Fh(a,b){var c=a.Uh,d=!isNaN(c.top)?c.top:k,c=!isNaN(c.height)?c.height:0;return Math.min(d!=k?d+c:Infinity,Math.max(d!=k?d:-Infinity,b))}n.bh=function(a,b){this.Nd&&Bh(this)?this.target.style.right=a+"px":this.target.style.left=a+"px";this.target.style.top=b+"px"};
function Dh(a,b,c,d,e,g,h,m){Gc.call(this,a);this.clientX=c;this.clientY=d;this.Dl=e;this.left=ja(g)?g:b.rc;this.top=ja(h)?h:b.sc;this.Ol=b;this.jj=!!m}t(Dh,Gc);function Ih(){u.call(this);this.gd=[];this.Rk=[];this.Ad=[]}t(Ih,fd);n=Ih.prototype;n.Nh=l;n.Oh=l;n.Bf=l;n.Ci=ca("De");n.init=function(){if(!this.Bf){for(var a,b=0;a=this.gd[b];b++)Jh(this,a);this.Bf=j}};function Jh(a,b){a.Nh&&(H(b.element,"mousedown",b.bi,l,b),a.rg&&K(b.element,a.rg));a.Oh&&a.ug&&K(b.element,a.ug)}
n.Dd=function(a,b){if(!this.ua)if(this.ua=b,this.dispatchEvent(new Kh("dragstart",this,this.ua))==l)this.ua=k;else{var c=b.qc,d;a:switch(d=c.cloneNode(j),c.tagName.toLowerCase()){case "tr":d=R("table",k,R("tbody",k,d));break a;case "td":case "th":d=R("table",k,R("tbody",k,R("tr",k,d)));break a}this.kj&&K(d,this.kj);this.vc=d;d=Fe(c);d.body.appendChild(this.vc);var e=this.vc,g=pf(c),c=xf(c,"margin");g.x-=2*(c.left||0);g.y-=2*(c.top||0);e.style.position="absolute";e.style.left=g.x+"px";e.style.top=
g.y+"px";this.hb=new zh(e);this.hb.Ci(this.De);H(this.hb,"drag",this.ci,l,this);H(this.hb,"end",this.Wb,l,this);H(d.body,"selectstart",this.Li);this.Mc=[];for(d=0;c=this.Rk[d];d++)for(var h,e=0;h=c.gd[e];e++)for(var g=c,m=[h.element],r=this.Mc,y=0;y<m.length;y++){var z=m[y],B=pf(z),aa=S(z),B=new df(B.y,B.x+aa.width,B.y+aa.height,B.x);r.push(new Lh(B,g,h,z));Mh(this,B)}this.pb||(this.pb=new df(0,0,0,0));for(d=0;c=this.Ad[d];d++)c.ef=[],c.yi=c.d.scrollLeft,c.zi=c.d.scrollTop,e=pf(c.d),g=S(c.d),c.R=
new df(e.y,e.x+g.width,e.y+g.height,e.x);for(d=0;g=this.Mc[d];d++)for(e=0;c=this.Ad[e];e++)Se(c.d,g.d)&&(c.ef.push(g),g.zd=c);this.Nb=k;for(d=0;c=this.Ad[d];d++)H(c.d,"scroll",this.Yg,l,this);this.hb.Dd(a);a.preventDefault()}};
n.Wb=function(a){var b=a.jj?k:this.Nb;if(b&&b.sa){var c=a.clientX,a=a.clientY,d=bf(De(this.vc)),e=c+d.x,d=a+d.y,g;this.Fd&&(g=this.Fd(b.kb,b.R,e,d));this.dispatchEvent(new Kh("drag",this,this.ua,b.sa,b.kb,b.d,c,a,e,d));b.sa.dispatchEvent(new Kh("drop",this,this.ua,b.sa,b.kb,b.d,c,a,e,d,g))}this.dispatchEvent(new Kh("dragend",this,this.ua));$c(this.hb,"drag",this.ci,l,this);$c(this.hb,"end",this.Wb,l,this);$c(Fe(this.ua.qc).body,"selectstart",this.Li);for(b=0;c=this.Ad[b];b++)$c(c.d,"scroll",this.Yg,
l,this),c.ef=[];this.hb.$();Oe(this.vc);delete this.ua;delete this.vc;delete this.hb;delete this.Mc;delete this.Nb};
n.ci=function(a){var b,c=bf(De(this.vc));b=new Be(a.clientX+c.x,a.clientY+c.y);var c=b.x,d=b.y,e=this.Nb,g;if(e){this.Fd&&e.sa&&(g=this.Fd(e.kb,e.R,c,d));if(e.R.contains(b)&&g==this.Gg)return;e.sa&&(this.dispatchEvent(new Kh("dragout",this,this.ua,e.sa,e.kb,e.d)),e.sa.dispatchEvent(new Kh("dragout",this,this.ua,e.sa,e.kb,e.d,i,i,i,i,this.Gg)));this.Gg=g;this.Nb=k}if(this.pb.contains(b)){a:{for(var h=0;e=this.Mc[h];h++)if(e.R.contains(b))if(e.zd){if(e.zd.R.contains(b)){b=e;break a}}else{b=e;break a}b=
k}if((e=this.Nb=b)&&e.sa)this.Fd&&(g=this.Fd(e.kb,e.R,c,d)),c=new Kh("dragover",this,this.ua,e.sa,e.kb,e.d),c.Qk=g,this.dispatchEvent(c),e.sa.dispatchEvent(new Kh("dragover",this,this.ua,e.sa,e.kb,e.d,a.clientX,a.clientY,i,i,g));else if(!e){this.na||(this.na=new Lh(this.pb.clone()));a=this.na.R;a.top=this.pb.top;a.right=this.pb.right;a.bottom=this.pb.bottom;a.left=this.pb.left;for(g=0;e=this.Mc[g];g++)b=e.R,e.zd&&(e=e.zd.R,b=new df(Math.max(b.top,e.top),Math.min(b.right,e.right),Math.min(b.bottom,
e.bottom),Math.max(b.left,e.left))),e=k,c>=b.right?e=b.right>a.left?b.right:a.left:c<b.left&&(e=b.left<a.right?b.left:a.right),h=k,d>=b.bottom?h=b.bottom>a.top?b.bottom:a.top:d<b.top&&(h=b.top<a.bottom?b.top:a.bottom),e!==k&&h!==k&&(Math.abs(e-c)>Math.abs(h-d)?h=k:e=k),e===k?h!==k&&(h<=d?a.top=h:a.bottom=h):e<=c?a.left=e:a.right=e;this.Nb=10<=(a.right-a.left)*(a.bottom-a.top)?this.na:k}}};n.Li=ea(l);
n.Yg=function(a){for(var b=0,c;c=this.Ad[b];b++)if(a.target==c.d){var d=c.zi-c.d.scrollTop,e=c.yi-c.d.scrollLeft;c.zi=c.d.scrollTop;c.yi=c.d.scrollLeft;this.na&&this.Nb==this.na&&(0<d?this.na.R.top+=d:this.na.R.bottom+=d,0<e?this.na.R.left+=e:this.na.R.right+=e);for(var g=0,h;h=c.ef[g];g++)h=h.R,h.top+=d,h.left+=e,h.bottom+=d,h.right+=e,Mh(this,h)}this.hb.mi(a)};
function Mh(a,b){if(1==a.Mc.length)a.pb=new df(b.top,b.right,b.bottom,b.left);else{var c=a.pb;c.left=Math.min(b.left,c.left);c.right=Math.max(b.right,c.right);c.top=Math.min(b.top,c.top);c.bottom=Math.max(b.bottom,c.bottom)}}n.k=function(){Ih.g.k.call(this);for(var a,b=0;a=this.gd[b];b++)this.Nh&&($c(a.element,"mousedown",a.bi,l,a),this.rg&&M(a.element,this.rg)),this.Oh&&this.ug&&M(a.element,this.ug),a.$();this.gd.length=0};
function Kh(a,b,c,d,e,g,h,m,r,y,z){Gc.call(this,a);this.Ml=b;this.Nl=c;this.Pl=d;this.Rl=e;this.Ql=g;this.clientX=h;this.clientY=m;this.nm=r;this.om=y;this.Qk=z}t(Kh,Gc);Kh.prototype.k=ba();function Nh(a,b){u.call(this);this.element=P(a);this.data=b;this.H=k;this.element||f(Error("Invalid argument"))}t(Nh,fd);n=Nh.prototype;n.qc=k;
n.bi=function(a){if(Lc(a)){var b=a.target;b&&(H(b,"mousemove",this.Ec,l,this),H(b,"mouseout",this.Ec,l,this),H(b,"mouseup",this.Mf,l,this),this.qc=b,this.sg=new Be(a.clientX,a.clientY),a.preventDefault())}};n.Ee=ca("H");n.Ec=function(a){var b=this.qc,c="mouseout"==a.type&&a.target==b;if(5<Math.abs(a.clientX-this.sg.x)+Math.abs(a.clientY-this.sg.y)||c)$c(b,"mousemove",this.Ec,l,this),$c(b,"mouseout",this.Ec,l,this),$c(b,"mouseup",this.Mf,l,this),this.H.Dd(a,this)};
n.Mf=function(){var a=this.qc;$c(a,"mousemove",this.Ec,l,this);$c(a,"mouseout",this.Ec,l,this);$c(a,"mouseup",this.Mf,l,this);delete this.sg;this.qc=k};function Lh(a,b,c,d){this.R=a;this.sa=b;this.kb=c;this.d=d}Lh.prototype.zd=k;function Oh(){Ih.call(this)}t(Oh,Ih);function Ph(a,b){b.Ee(a);a.gd.push(b);a.Bf&&Jh(a,b)};function Qh(a){var b={};"rel"in b||(b.rel="nofollow");"target"in b||(b.target="_blank");var c=[],d;for(d in b)b.hasOwnProperty(d)&&b[d]&&c.push(Ha(d),'="',Ha(b[d]),'" ');var e=c.join("");return a.replace(Rh,function(a,b,c,d,y){a=[Ha(b)];if(!c)return a[0];a.push("<a ",e,'href="');d?(a.push("mailto:"),c=d,d=""):(y||a.push("http://"),(d=c.match(Sh))?(c=d[1],d=d[2]):d="");c=Ha(c);d=Ha(d);a.push(c,'">',c,"</a>",d);return a.join("")})}
var Sh=/^(.*)([:;,\.?\[\]])$/,Rh=RegExp("([\\S\\s]*?)(\\b(?:mailto:)?([\\w.+-]+@[A-Za-z0-9.-]+\\.(?:com|org|net|edu|gov|aero|biz|cat|coop|info|int|jobs|mobi|museum|name|pro|travel|arpa|asia|xxx|[a-z][a-z])\\b)|\\b(?:(https?|ftp)://+|www\\.)\\w[:;,\\.?\\[\\]\\w/~%&=+#-@!]*|$)","g");function Th(){}t(Th,Pf);na(Th);n=Th.prototype;n.wc=ba();n.j=function(a,b){gg(a);a.cb&=-256;lg(a,32,l);Th.g.j.call(this,a,b);a.lc(b.value);return b};n.P=function(a){gg(a);a.cb&=-256;lg(a,32,l);return a.Ha().P("textarea",{"class":Rf(this,a).join(" "),disabled:!a.isEnabled()},a.Sa||"")};n.Pb=function(a){return"TEXTAREA"==a.tagName};n.mc=ma;n.Df=function(a){return a.isEnabled()};n.Lc=ma;n.ja=function(a,b,c){Th.g.ja.call(this,a,b,c);if((a=a.a())&&1==b)a.disabled=c};n.Oa=ma;
n.lc=function(a,b){a&&(a.value=b)};n.ea=ea("goog-textarea");function Uh(a,b,c){fg.call(this,a,b||Th.b(),c);gg(this);this.Kc(j);a||(this.Sa="")}t(Uh,fg);var Vh=pc||F;n=Uh.prototype;n.zc=l;n.ib=0;n.Wh=0;n.ai=0;n.Ch=l;n.qe=l;n.lg=l;n.kg=l;function Wh(a){return a.rd.top+a.rd.bottom+a.Pg.top+a.Pg.bottom}function Xh(a){var b=a.ai,c=a.a();b&&(c&&a.qe)&&(b-=Wh(a));return b}function Yh(a){var b=a.Wh,c=a.a();b&&(c&&a.qe)&&(b-=Wh(a));return b}n.qa=function(a){this.lc(String(a))};n.n=function(){return this.a().value};n.lc=function(a){Uh.g.lc.call(this,a);this.resize()};
n.Ca=function(a){Uh.g.Ca.call(this,a);this.a().disabled=!a};n.resize=function(){this.a()&&this.ce()};n.w=function(){Uh.g.w.call(this);var a=this.a();ff(a,{overflowY:"hidden",overflowX:"auto",boxSizing:"border-box",MsBoxSizing:"border-box",WebkitBoxSizing:"border-box",MozBoxSizing:"border-box"});this.rd=xf(a,"padding");this.Pg=Af(a);J(J(J(J(this.i(),a,"scroll",this.ce),a,"focus",this.ce),a,"keyup",this.ce),a,"mouseup",this.Vj);this.resize()};
function Zh(a){if(!a.Ch){var b=a.a().cloneNode(l);ff(b,{position:"absolute",height:"auto",top:"-9999px",margin:"0",padding:"1px",border:"1px solid #000",overflow:"hidden"});a.Ha().s.body.appendChild(b);var c=b.scrollHeight;b.style.padding="10px";var d=b.scrollHeight;a.lg=d>c;b.style.borderWidth="10px";a.kg=b.scrollHeight>d;b.style.height="100px";100!=b.offsetHeight&&(a.qe=j);Oe(b);a.Ch=j}var b=a.a(),c=a.a().scrollHeight,e=a.a(),d=e.offsetHeight-e.clientHeight;if(!a.lg)var g=a.rd,d=d-(g.top+g.bottom);
a.kg||(e=Af(e),d-=e.top+e.bottom);c+=0<d?d:0;a.qe?c-=Wh(a):(a.lg||(d=a.rd,c+=d.top+d.bottom),a.kg||(a=Af(b),c+=a.top+a.bottom));return c}function $h(a,b){a.ib!=b&&(a.ib=b,a.a().style.height=b+"px")}function ai(a){a=a.a();a.style.height="auto";var b=a.value.match(/\n/g)||[];a.rows=b.length+1}
n.ce=function(){if(!this.zc){var a=l;this.zc=j;var b=this.a(),c=this.ib;if(b.scrollHeight){var d=l,e=l,g=Zh(this),h=b.offsetHeight,m=Xh(this),r=Yh(this);m&&g<m?($h(this,m),d=j):r&&g>r?($h(this,r),b.style.overflowY="",e=j):h!=g?$h(this,g):this.ib||(this.ib=g);!d&&(!e&&Vh)&&(a=j)}else ai(this);this.zc=l;a&&(a=this.a(),this.zc||(this.zc=j,b=l,a.value||(a.value=" ",b=j),(e=a.scrollHeight)?(g=Zh(this),d=Xh(this),h=Yh(this),!(d&&g<=d)&&!(h&&g>=h)&&(h=this.rd,a.style.paddingBottom=h.bottom+1+"px",Zh(this)==
g&&(a.style.paddingBottom=h.bottom+e+"px",a.scrollTop=0,e=Zh(this)-e,e>=d?$h(this,e):$h(this,d)),a.style.paddingBottom=h.bottom+"px")):ai(this),b&&(a.value=""),this.zc=l));c!=this.ib&&this.dispatchEvent("resize")}};n.Vj=function(){var a=this.a(),b=a.offsetHeight;a.filters&&a.filters.length&&(a=a.filters.item("DXImageTransform.Microsoft.DropShadow"))&&(b-=a.offX);b!=this.ib&&(this.ib=this.ai=b)};function bi(a,b,c,d,e,g,h){U.call(this);this.$b=Pb();this.Qa=a;this.xe=b;this.bg=c;this.eg=d;this.af=e.categories;this.pj=e.feed_categories;this.rj=e.feed_id;this.vg=g||k;this.tc=h||k;this.lf=this.$b?new Oh:k;this.Yb={pending:l,all:l};this.Na=["pending","all","playlists","publishers","categories"]}t(bi,U);var ci="top_rated top_favorites most_shared most_recent most_discussed most_responded recently_featured on_the_web most_viewed".split(" "),di="All Film Autos Music Animals Sports Travel Games Videoblog People Comedy Entertainment News Howto Education Tech Nonprofit Movies Shows Shortmov".split(" ");
n=bi.prototype;
n.q=function(a){bi.g.q.call(this,a);a.innerHTML="";a.scrollTop=0;Og(a,oh);var b=Q("pending-content",a);v(this.xe,function(a){ei(this,b,a)},this);this.sk=Q("playlists-content",a);v(this.bg,this.Kg,this);this.xk=Q("publishers-content",a);v(this.eg,this.Lg,this);this.gj=Q("categories-list",a);this.ih=Q("feed-ids",a);this.qj=Q("feed-cats",a);x("/admin/_categories",q(function(a){a=D(a.target);v(a,function(a){fi(this,a,"category",Ya(this.af,a.id)||!this.af.length)},this)},this));v(di,function(a){fi(this,a,
"feed_category",Ya(this.pj,a))},this);v(ci,function(a){fi(this,a,"feed_id",this.rj==a)},this);this.resize()};
n.w=function(){bi.g.w.call(this);this.ga=Q("input",this.a());var a=new Xf(this.ga),b=new Mg(this.ga);this.Da=Q("tabs",this.a());this.u="pending";var c=l;J(J(J(J(this.i(),window,"resize",ya(I,q(this.resize,this))),a,"key",q(function(a){"13"==a.keyCode&&gi(this,this.ga.value)},this)),b,"after_paste",q(function(){gi(this,this.ga.value)},this)),this.Da,"click",q(function(a){a=$e(a.target,"li");this.Eb(a)},this));J(this.i(),this.a(),"scroll",q(function(){if(this.Qa&&!c&&!this.Yb[this.u]&&("pending"==this.u||
"all"==this.u)&&this.a().scrollTop+Je().height>this.a().scrollHeight-this.a().clientTop){c=j;var a=Q("spinner",this.a());T(a,j);var b="pending"==this.u?this.xe:this.We;x("/admin/_media/collection/"+this.Qa+"?offset="+b.length+("pending"==this.u?"&pending=1":""),q(function(g){c=l;g=Gd(Zd(g.target)).medias;g=Ua(g,function(a){return new hb(a)});bb(b,g);var h=Q(this.u+"-content",this.a());v(g,function(a){ei(this,h,a)},this);this.Yb[this.u]=!g.length;O(a,"finished",!g.length)},this))}},this));this.resize()};
n.resize=function(){sf(this.a(),Je().height-40)};
function gi(a,b){var c;c=b.match("(?:(https?|ftp)://+|www\\.)\\w[:;,\\.?\\[\\]\\w/~%&=+#-@!]*");c=c!=k?c[0]:"";a.Qa&&c&&(a.ga.disabled="disabled",x("admin/_add/collection/"+a.Qa,q(function(a){this.ga.value="";this.ga.disabled="";a=D(a.target);if("media"==a.type){var b=tb(sb.b(),a.data);Wa(this.xe,function(a){return a.id==b.id})||(this.xe.push(b),a=Q("pending-content",this.a()),ei(this,a,b,j),this.Eb(He("li","pending",i)[0]))}else if("playlist"==a.type){var c=a.data;Wa(this.bg,function(a){return a.id==
c.id})||(this.bg.push(c),this.Kg(c),this.Eb(He("li","playlists",i)[0]))}else if("publisher"==a.type){var h=a.data;h&&!Wa(this.eg,function(a){return a.id==h.id})&&(this.eg.push(h),this.Lg(h),this.Eb(He("li","publishers",i)[0]))}},a),"POST","url="+c))}
n.Eb=function(a){v(this.Na,function(b){O(this.Da.parentElement,b,N(a,b));this.u=N(a,b)?b:this.u},this);this.Qa&&!this.We&&x("/admin/_media/collection/"+this.Qa,q(function(a){a=Gd(Zd(a.target)).medias;this.We=Ua(a,function(a){return new hb(a)});var c=Q("all-content",this.a());v(this.We,function(a){ei(this,c,a)},this)},this))};
n.Kg=function(a){var b=X(ph,{name:a.name});this.sk.appendChild(b);var c=Q("remove",b);J(this.i(),c,"click",function(){x("admin/_remove/collection/"+this.Qa,q(function(){Oe(b)},this),"POST","pub_id="+a.id)})};n.Lg=function(a){var b=X(rh,{name:a.name||a.id,L:a.picture});this.xk.appendChild(b);var c=Q("remove",b);J(this.i(),c,"click",function(){x("admin/_remove/collection/"+this.Qa,q(function(){Oe(b)},this),"POST","pub_id="+a.id)})};
function fi(a,b,c,d){if("category"==c){var e=X(qh,{name:b.name,id:b.id});a.gj.appendChild(e)}else e=X(qh,{name:b,id:b}),("feed_id"==c?a.ih:a.qj).appendChild(e);O(e,"enabled",!!d);var g="category"==c?"cat_id="+b.id:"feed_id"==c?"feed_id="+b:"feed_cat="+b;J(a.i(),e,"click",function(){"feed_id"==c&&v(Pe(this.ih),function(a){M(a,"enabled")});var a=Ae(e,"enabled");x("admin/_edit/collection/"+this.Qa,qb(),"POST",g+"&enabled="+a)})}
function ei(a,b,c,d){var e=X(xh,{media:c,ic:pb(c)});d?Ne(b,e,0):b.appendChild(e);a.$b&&(b=a.lf,d=new Nh(e,i),Ph(b,d));var b=new zh(Q("repos",e)),g=Q("thumb",e),d=Q("play",e),h=Q("approve",e),m=Q("remove",e);b.bh=function(a,b){var c=b-24;-50<=c&&50>=c&&ff(g,"background-position-y",50-c+"%")};J(J(J(J(a.i(),b,"end",function(){var a=(g.style[Pa("background-position")]||"").split(" ")[1],a=a.substring(0,a.length-1);x("/admin/_posthumb",qb(),"POST","media="+c.id+"&pos="+a)}),d,"click",q(a.pk,a,c)),h,"click",
q(a.Ng,a,c,j,e)),m,"click",q(a.Ng,a,c,l,e));I(ya(K,e,"show"))}n.Rf=function(a,b){x("/admin/_addprogram",q(function(b){b=Gd(Zd(b.target));b=new Jb(b);a.c(Vb,b)},this),"POST","channel="+a.id+"&media="+b.id)};n.Ng=function(a,b,c){var d=a.hj||this.Qa;x("admin/_media/collection",q(function(){K(c,"remove");I(function(){Oe(c)},300);hi.b();var b;hi.b();b=Xe(P("toggle-pending"));ii(0,b-1);Z.b().c("approved",a,d)},this),"POST","col="+d+"&media="+a.id+"&approve="+b)};n.pk=function(a){a=Kb(a);ce.b().c(de,a)};function ji(a){U.call(this);this.Qb=a||k;this.Ie=this.Rg=this.Yk=this.Wg=0}t(ji,U);n=ji.prototype;n.P=function(){this.d=X(nh)};n.q=function(a){ji.g.q.call(this,a);var b=X(nh,{Ih:this.Qb?"Add a collection":"Add a Channel"});a.innerHTML=b.innerHTML};
n.w=function(){ji.g.w.call(this);this.ga=Q("input",this.a());var a=new Xf(this.ga);this.Bk=Q("scrollable",this.a());this.Ud=Q("admin-channels",this.a());this.km=Q("topics",this.a());this.Wd=Q("collections",this.a());this.Vg=P("admin-col-list");this.Mg=P("admin-list");C.b();this.Qb?x("/admin/_collections/"+this.Qb,q(function(a){a=D(a.target);T(this.Wd.parentElement,!!a.length);v(a,this.Jg,this);this.Ie&&ii(hi.b(),this.Ie);this.Wg=S(this.Wd.parentElement).height;this.resize()},this)):x("/admin/_channels",
q(function(a){a=D(a.target);T(this.Ud.parentElement,!!a.length);v(a,this.Ig,this);this.Rg=S(this.Ud.parentElement).height;this.resize()},this));J(this.i(),a,"key",q(function(a){"13"==a.keyCode&&this.ga.value&&(a=this.ga.value,this.ga.disabled="disabled",x(this.Qb?"/admin/_collections":"/admin/_channels",q(function(a){a=D(a.target);this.Qb?(T(this.Wd.parentElement,!!a),this.Jg(a)):(T(this.Ud.parentElement,!!a),this.Ig(a));this.ga.disabled="";this.ga.value=""},this),"POST","name="+a+(this.Qb?"&cid="+
this.Qb:"")))},this))};
n.Ig=function(a){var b=new Ub(a),c=X(sh,{O:b});this.Ud.appendChild(c);H(c,"click",q(function(a){N(a.target,"on")||N(a.target,"off")?(O(c,"on",N(a.target,"on")),O(c,"off",!N(a.target,"on")),x("/admin/_channel/online/"+b.id,q(function(a){a.target.disabled="";a=D(a.target);O(c,"on",a.online);O(c,"off",!a.online)},this),"POST","online="+N(a.target,"on"))):N(a.target,"program")?x("/admin/_program",qb(),"POST","channel_id="+b.id):N(a.target,"fetch")?x("/admin/_fetch",function(){alert("Fetch began, but give it some time.")},"POST",
"channel_id="+b.id):N(a.target,"remove")&&confirm("Remove "+b.name+"?")?(T(c,l),x("/admin/_channels/"+b.id,function(a){D(a.target).deleted?Oe(c):T(c,j)},"DELETE")):((new ji(b.id)).j(this.Vg),Z.b().c("navigate",this.Vg,l,b.name))},this))};
n.Jg=function(a){var b=X(th,{cf:a});this.Ie+=a.pending;this.Wd.appendChild(b);H(b,"click",q(function(c){N(c.target,"remove")&&confirm("Remove "+a.name+"?")?(T(b,l),x("/admin/_collections/"+a.id,function(a){D(a.target).deleted?Oe(b):T(b,j)},"DELETE")):N(c.target,"fetch")?x("/admin/_fetch",function(){alert("Fetch began, but give it some time.")},"POST","col_id="+a.id):x("/admin/_media/collection/"+a.id+"?pending=1",q(function(b){var b=Gd(Zd(b.target)),c=b.medias,c=Ua(c,function(a){return new hb(a)});
(new bi(a.id,c,b.playlists,b.publishers,b.categories)).j(this.Mg);Z.b().c("navigate",this.Mg,l,a.name)},this))},this));Z.b().subscribe("approved",function(c,d){if(d==a.id){var e=Q("pending",b),g=Xe(e)-1;0>=g?(Oe(b),Da(b)):Te(e,g)}},this)};n.resize=function(){sf(this.Bk,this.Rg+this.Yk+this.Wg+110)};function ki(a,b,c,d,e){U.call(this);this.qg=!!a;this.Ib=!!d;this.Cf=!!e;this.Td=!!b;this.wi=!!c;this.value="";this.f=new Uh(this.wi?"reply...":"Add to the conversation.");this.ba=new tg("tweet");lg(this.ba,16,j);this.da=new tg("post");lg(this.da,16,j);a=A.b().h;this.Yd=a.vk;this.Je=a.si;this.Ob=new tg("add");this.hg=k;this.rb={};this.ra=[];this.ma=-1;this.kd=0;this.pi=this.Ri=k}t(ki,U);var li=/@(\w+\s?\w*)/,mi=/(\w+\s?\w*)/;n=ki.prototype;n.P=function(){this.d=X(hh)};
n.q=function(a){ki.g.q.call(this,a);K(a,"decorated");var b=R("div","suggestions");a.appendChild(b);b=R("div","highlighter");a.appendChild(b)};
n.w=function(){ki.g.w.call(this);this.f.j(He("textarea",i,this.a())[0]);var a=this.f;a.Wh=70;a.resize();var a=new Xf(this.f.wb()),b=Q("popup",this.a());if(!this.wi&&!this.Ib&&(Lf(this,this.Ob),this.Ob.j(Q("add-comment",this.a())),this.Ob.Ca(this.Cf),J(this.i(),this.Ob,"action",q(this.Ya,this)),this.Xg=Q("comment-controls",this.a())))T(this.Xg,this.qg),O(this.a(),"show-controls",this.qg),this.Vl=Q("input-holder",this.a()),Lf(this,this.ba),this.ba.j(Q("tweet-toggle",this.a())),A.b().h.fe||x("/_twitter",
q(function(a){a=D(a.target);this.Je=this.Je&&a.auth;this.Ui=a.auth_url;kg(this.ba,this.Je)},this)),Lf(this,this.da),this.da.j(Q("fb-toggle",this.a())),FB.api("/me/permissions",q(function(a){this.Yd=this.Yd&&!!a.data[0].publish_stream;kg(this.da,this.Yd)},this)),J(J(this.i(),this.da,"action",q(this.dk,this)),this.ba,"action",q(this.mk,this)),DESKTOP&&!IPAD&&($g(Zg.b(),this.ba.a(),"top",{text:q(function(){return"Share on Twitter: "+(W(this.ba,16)?"ON":"OFF")},this)}),$g(Zg.b(),this.da.a(),"top",{text:q(function(){return"Share on Facebook: "+
(W(this.da,16)?"ON":"OFF")},this)})),A.b().h.subscribe(Ob,function(){kg(this.ba,j);A.b().h.fe=j},this);this.$a=Q("suggestions",this.a());this.xf=Q("highlighter",this.a());b&&T(b,!A.b().h.wf&&!A.b().h.fe&&this.qg);J(J(J(this.i(),this.f.a(),"focus",q(function(){b&&T(b,l);!A.b().h.Zi&&!this.Ib&&Yg.b().c("tooltip",this.f.a(),"top",{text:"Mention friends using @"});this.dispatchEvent("focus")},this)),a,"key",q(function(a){a.stopPropagation();Yg.b().c("hide");if("13"==a.keyCode||("32"==a.keyCode||"9"==
a.keyCode)&&-1<this.ma){if(this.ra.length&&this.ra.reverse()[this.ma]){a.preventDefault();var b=this.f.n().slice(this.Ib?this.kd:0,this.f.a().selectionStart),b=b.split(" "),b=1<b.length?b[b.length-2]+" "+b[b.length-1]:b.pop(),e=this.ra[this.ma];this.rb[e.id]=e;this.Ib?ni(this,b.match(mi)[0]):ni(this,b.match(li)[0]);this.f.a().focus();T(this.$a,l);this.ra=[];this.ma=-1;b=this.f.n().length;this.setSelectionRange(b,b)}else"13"==a.keyCode&&(a.preventDefault(),this.Ob.setActive(this.f.n()),this.Ya(a));
this.Td&&ni(this)}else"27"==a.keyCode&&this.ra.length?(T(this.$a,l),this.ra=[],b=this.f.n().length,this.setSelectionRange(b,b),this.ma=-1,this.rb={}):("38"==a.keyCode||"40"==a.keyCode)&&this.ra.length?(a.preventDefault(),b=Array.prototype.slice.call(Pe(this.$a)),b.reverse()[this.ma]&&M(b[this.ma],"selected"),this.ma="38"==a.keyCode?Math.min(this.ma+1,this.ra.length-1):Math.max(this.ma-1,-1),-1!=this.ma&&K(b[this.ma],"selected")):I(q(function(){this.Ob.Ca(this.Cf||!!this.f.n());var b=this.f.n().slice(this.Ib?
this.kd:0,this.f.a().selectionStart),b=b.split(" "),b=1<b.length?b[b.length-2]+" "+b[b.length-1]:b.pop(),d=this.Ib&&mi.test(b)||this.Td&&li.test(b);T(this.$a,d);if("8"==a.keyCode)this.xf.innerHTML.match('<div class="token">.*</div>$');else if(d&&(b=this.Ib?b.match(mi):b.match(li),this.ra=A.b().search(b[1]),this.ra.length)){var d=this.ra,e=b[0];this.$a.innerHTML="";T(this.$a,j);v(d.slice(0,5),function(a){var b=R("div","suggestion",a.name);this.$a.appendChild(b);J(this.i(),b,"click",q(function(){this.rb[a.id]=
a;ni(this,e);this.f.a().focus();var b=this.f.n().length;this.setSelectionRange(b,b);T(this.$a,l);this.ra=[];this.ma=-1},this))},this)}this.f.n()||this.clear();this.Td&&ni(this)},this))},this)),this.f,"resize",q(function(a){this.dispatchEvent(a)},this));b&&J(this.i(),b,"click",q(function(){T(b,l)},this));Z.b().subscribe("reply-comment",this.gg,this);Z.b().subscribe("reply-tweet",this.zk,this)};
function ni(a,b){var c=a.f.n(),d=c,e=c,g=Pc(a.rb);v(ec(a.rb),function(a){var m=b&&0==Ga(b,((this.Ib?"":"@")+a.name).substr(0,b.length))?b:a.name;d=d.replace(RegExp(m,"g"),'<div class="token">'+a.name+"</div> ");this.xf.innerHTML=d;this.value=e=e.replace(RegExp(m,"g"),"@["+a.id+":"+a.name+"]");var r=RegExp(m,"g").exec(c);r&&(Za(g,a.id),this.kd=Math.max(r.index+r[0].length,this.kd));c=c.replace(RegExp(m,"g"),a.name)+" ";b&&this.f.qa(c)},a);v(g,function(a){rb(this.rb,a)},a)}
n.gg=function(a,b){this.pi=a.id?a.id:a.toString();this.hg=b};n.zk=function(a){this.Zl=a.id;this.qa((this.n()?this.n()+" ":"")+"@"+a.handle+" ");this.pa(j);this.ba.Ca(j);this.pa(j);a=this.f.n().length;this.setSelectionRange(a,a)};n.setSelectionRange=function(a,b){if(this.f.a().setSelectionRange)this.f.a().focus(),this.f.a().setSelectionRange(a,b);else if(this.f.a().createTextRange){var c=this.f.a().createTextRange();c.collapse(j);c.moveEnd("character",b);c.moveStart("character",a);c.select()}};
n.n=function(){this.Td&&ec(this.rb).length?ni(this):this.value=this.f.n();return this.value};n.qa=function(a,b,c){kg(this.da,!!b);kg(this.ba,!!c);this.f.qa(a);this.value=a;this.Ob.Ca(!!a)};n.clear=function(){this.f.qa("");this.rb={};this.ra=[];this.xf.innerHTML="";this.$a.innerHTML="";T(this.$a,l);this.f.resize();this.kd=0};n.he=function(){return N(this.a(),"focused")};n.pa=function(a){a&&this.f.a().focus();return O(this.a(),"focused",a)};
n.Ya=function(){if(this.n()||this.Cf)this.dispatchEvent({type:"add",Qg:q(function(a){var b=D(a.target);if(b.comment){var a=new oi(b.comment),c=b.tweet?new pi(b.tweet):k;if(b=tb(sb.b(),b.comment.media))b.c(kb,a),c&&b.c("add-tweet",c)}},this),bd:W(this.da,16),Ag:W(this.ba,16),text:this.n(),A:this.pi,Qi:this.hg&&this.hg.id}),this.clear()};
n.dk=function(){Yg.b().c("tooltip",this.da.a(),"top",{text:q(function(){return"Share on Facebook: "+(W(this.da,16)?"ON":"OFF")},this)});!A.b().h.wf&&(!this.Yd&&W(this.da,16))&&(T(P("overlay"),j),FB.login(q(function(a){T(P("overlay"),l);this.oj=!!a.authResponse;kg(this.da,this.oj)},this),{scope:"publish_stream"}))};
n.mk=function(){Yg.b().c("tooltip",this.ba.a(),"top",{text:q(function(){return"Share on Twitter: "+(W(this.ba,16)?"ON":"OFF")},this)});if(!A.b().h.fe&&!this.Je&&W(this.ba,16))if(kg(this.ba,l),IPHONE||IPAD){var a=document.createElement("a");a.setAttribute("href",this.Ui);a.setAttribute("target","_blank");var b=document.createEvent("HTMLEvents");b.initEvent("click",j,j);a.dispatchEvent(b)}else a=window.open(this.Ui,"Twitter Login","height=300,width=550"),a.moveTo(screen.width/2-225,screen.height/2-
150),a.focus()};function oi(a){this.id=a.id;this.p=a.user?dc(A.b(),a.user):k;this.text=a.text;this.media=a.media?tb(sb.b(),a.media):k;this.time=a.time?ib(a.time+"Z"):new yb;this.nb=Lb(this.time.getTime());this.A=a.parent_id;this.yd=[];this.Ka=l;a.replies&&v(a.replies,function(a){a=new oi(a);this.yd.push(a)},this)}
function qi(a,b,c,d,e,g,h,m){var r=new oi({text:c,parentId:g});r.p=a;r.A=g||k;sb.b().get(b).ub(r);x("/_comment",q(function(a){a=D(a.target);r.id=a.comment.id;m&&m(r)},this),"POST","media_id="+b+"&text="+c+"&tweet="+e+"&facebook="+d+(g?"&parent_id="+g:"")+(h?"&to_user_id="+h:""));return r};function pi(a){this.id=a.id;this.p=a.user&&dc(A.b(),a.user);this.handle=a.handle;this.L=a.picture;this.text=a.text;this.time=ib(a.time+"Z")};function ri(a,b,c,d){U.call(this);this.e=a;this.ta=b||[];this.Yc={};this.Ld=!!c;this.bb=d||[];this.Kd={};this.W=this.El=0;this.ac={}}t(ri,U);n=ri.prototype;
n.q=function(a){ri.g.q.call(this,a);a.innerHTML="";a.scrollTop=0;K(this.a(),"ios-scroll");this.B=R("div","loading",R("div","loading-spinner"));this.a().appendChild(this.B);T(this.B,l);this.dc=R("div","no-comments","Start the conversation.");this.a().appendChild(this.dc);this.l=R("div","comments tweets");this.a().appendChild(this.l);J(J(this.i(),window,"resize",ya(I,q(this.resize,this))),this.l,"click",q(this.df,this));this.ta.length?(v(this.ta,function(a){this.ub(a)},this),this.Dc=S(this.l).height):
this.Ld&&this.bb.length?(v(this.bb,function(a){this.oc(a)},this),this.Dc=S(this.l).height):T(this.B,j);this.Ld?(x("/_tweet/"+this.e.id+"?offset="+this.bb.length,q(function(a){T(this.B,l);a=Gd(Zd(a.target));a=Ua(a,function(a){a=new pi(a);this.oc(a);return a},this);this.Dc=S(this.l).height;this.resize()},this)),this.e.subscribe("add-tweet",function(a){this.oc(a,j)},this)):(x("/_comment/"+this.e.id+"?offset="+this.ta.length,q(function(a){T(this.B,l);a=Gd(Zd(a.target));a=Ua(a,function(a){a=new oi(a);
this.ub(a);return a},this);this.Dc=S(this.l).height;this.resize()},this)),this.e.subscribe(kb,this.ub,this),this.e.subscribe(nb,this.fg,this));this.resize(41)};
n.oc=function(a,b){this.Kd[a.id]=a;T(this.dc,l);var c=Qh(a.text),c=c.replace(/#(\S+)/g,function(a,b){return'<a target="_blank" href="http://twitter.com/search?q=%23'+b+'">'+a+"</a>"}),c=c.replace(/@(\S+)/g,function(a,b){return'<a target="_blank" href="http://twitter.com/'+b+'">'+a+"</a>"}),c=X(fh,{sb:a,text:c,timestamp:Lb(a.time.getTime())});si($b.b(),a.time,Q("timestamp",c));b?Ne(this.l,c,0):this.l.appendChild(c);this.resize();T(Re(this.l),j)};
n.df=function(a){a=a.target;if(this.Ld){var b=$e(a,k,"tweet");b&&(b=this.Kd[b.id.split("-")[1]],N(a,"reply")&&Z.b().c("reply-tweet",b))}else if(b=$e(a,k,"comment"))b=this.Yc[b.id.split("-")[1]],N(a,"reply")?Q("reply-textarea",this.ac[b.A?b.A:b.id]).focus():N(a,"remove")&&this.e.c(nb,b)};n.fg=function(a){Oe(P("listcomment-"+a.id));$a(this.ta,function(b){return b.id==a.id})};
n.ub=function(a){this.ta.push(a);T(this.dc,l);var b=Qh(a.text),b=b.replace(/@\[(\d+):([a-zA-z\s]+)\]/g,function(a,b,e){return'<a href="#user:'+b+'">'+e+"</a>"}),b=X(gh,{prefix:"listcomment",M:a,text:b,oi:a.p.id==A.b().h.id});si($b.b(),a.time,Q("timestamp",b));a.A?Q("replies",this.ac[a.A]).appendChild(b):this.l.appendChild(b);a.id&&ti(this,a,b);v(a.yd,function(a){this.ub(a)},this);a.A||(this.l.scrollTop=this.l.scrollHeight);return b};
function ti(a,b,c){a.Yc[b.id]=b;c.id="listcomment-"+b.id;if(!b.A){a.ac[b.id]=c;var d=Q("reply-input",c),c=Q("reply-textarea",c);J(a.i(),c,"click",q(function(){if(!N(d,"decorated")){var a=new ki(l,j,j);a.j(d);a.gg(b,b.p);J(this.i(),a,"add",q(function(a){this.Ya(a)},this))}},a))}}n.resize=function(a){this.W=a||this.W;sf(this.a(),Je().height-42-this.W-($e(this.a(),k,"tabbed")?30:0))};function ui(a,b,c,d){U.call(this);this.e=this.N=a;this.ta=b||[];this.bb=c||[];this.Ld=!!d;this.Xc=new ri(a,this.ta);this.yg=new ri(a,i,j,this.bb);this.f=new ki(j,j);this.Na=["comments","tweets"];this.Hd={}}t(ui,U);n=ui.prototype;n.q=function(a){ui.g.q.call(this,a);K(a,"conversation");K(a,"ios-scroll");Og(a,vh);K(a.firstChild,this.Ld?"tweets":"comments")};
n.w=function(){this.Da=Q("tabs",this.a());this.Xc.j(Q("comments-content",this.a()));this.yg.j(Q("tweets-content",this.a()));Jf(this.f,this.a());J(J(J(J(J(J(J(this.i(),this.Da,"click",q(function(a){a=$e(a.target,"li");this.Eb(a)},this)),this.f,"add",q(this.Ya,this)),this.f,"resize",q(function(){N(this.a().firstChild,"comments")?this.Xc.resize(41):this.yg.resize(41)},this)),window,"click",q(function(a){!$e(a.target,k,"comment-input")&&!this.f.n()&&this.f.pa(l)},this)),Q("no-comments",this.a()),"click",
q(this.ki,this)),Ge("no-comments",this.a())[1],"click",q(this.ki,this)),window,"click",q(function(a){!$e(a.target,k,"comment-input")&&!this.f.n()&&this.f.pa(l)},this));this.Xc.resize(41);this.yg.resize(41)};n.ki=function(a){a.preventDefault();a.stopPropagation();this.f.pa(j)};
n.Ya=function(a){var b=qi(A.b().h,this.e.id,a.text,a.bd,a.Ag,a.A,a.Qi,q(function(a){var b=this.Hd[a.time.getTime()];b.id="infocomment-"+a.id;ti(this.Xc,a,b)},this)),c=this.Xc.ub(b);this.Hd[b.time.getTime()]=c;a.bd&&!a.A&&(FB.api("/me/feed","POST",{message:a.text,name:this.e.name,link:this.e.link,picture:this.e.qb,caption:"on XYLO",description:this.e.description},ba()),kg(this.f.da,l))};n.Eb=function(a){v(this.Na,function(b){O(this.Da.parentElement,b,N(a,b));this.u=N(a,b)?b:this.u},this)};function vi(a,b,c,d,e){U.call(this);v(a.Uf,function(a){var b=a.Y();b&&b.media.id==this.id?(this.rk=a,v(a.Dg,function(a){a.xg||(this.Ic[a.p.id]=a.p)})):this.Ic={}},a);this.e=this.N=a;this.le=c||k;this.Rh=d||k;this.Hj=l;this.jh=!b;this.od=EMBED||!!e;this.Ne=[];this.Pd={};this.ta=[];this.Yc={};this.ac={};this.Hd={};this.bb=[];this.Kd={};this.f=new ki(j,j);this.Gb=new tg("Star");lg(this.Gb,16,j);this.pf=new tg("Facebook");this.Bg=new tg("Twitter");this.ud=new tg("Play");this.kc=new tg("Send");lg(this.kc,
16,j);this.Zc=new tg("Create Poll");this.W=0}t(vi,U);n=vi.prototype;n.P=function(){this.d=X(dh,{media:this.e})};n.q=function(a){vi.g.q.call(this,a);var b=X(dh,{media:this.e,description:this.e.description?Qh(this.e.description):"",ic:pb(this.e),Oj:this.le?this.le.id:k});a.innerHTML=b.innerHTML};
n.w=function(){vi.g.w.call(this);this.Eg=Q("viewers",this.a());var a=Q("picture",this.a()),b=Q("ytvideo",this.a()),c=Q("scrollable",this.a()),d=Q("publisher",this.a()),e=Q("title",this.a()),g=Q("links",this.a());this.B=Q("loading",this.a());var h=a.firstChild;this.gf=Q("info-contents",this.a());this.Mb=Q("user-poll",this.a());this.lm=Q("tweet-holder",this.a());this.ab=Q("tweets",this.a());this.Ub=Q("dot-nav",this.a());this.l=Q("comments",this.a());this.dc=Q("no-comments",this.a());Jf(this.f,this.a());
this.Gb.j(Q("star",this.a()));kg(this.Gb,Rb(A.b().h,this.e));this.pf.j(Q("facebook",this.a()));this.Bg.j(Q("twitter",this.a()));this.ud.j(Q("play",this.a()));this.kc.j(Q("send",this.a()));this.Zc.j(Q("create-poll-button",this.a()));this.zg=new gd(5E3);this.pm=Q("watch-with",this.a());this.eb=Q("create-poll",this.a());this.Fb=Q("send-media",this.a());O(this.a(),"mini",this.od);!this.jh||this.e.kh?wi(this,l,this.e.description,this.e.mg,this.e.Ti,this.e.Ra,this.e.tk):this.jh&&x("/_info/"+this.e.id,q(function(a){a=
Gd(Zd(a.target));wi(this,j,a.description,a.seen,a.tweets,a.comments,a.poll)},this));J(J(J(J(J(J(J(J(J(J(J(J(J(J(J(J(J(J(J(J(J(J(J(J(this.i(),window,"resize",ya(I,q(this.resize,this))),d,"click",q(function(){Z.b().c("media-list",this.e.oa.name,i,"/admin/_media/publisher/"+this.e.oa.id,this.e.oa.L,this.e.oa.description,this.e.oa.link,"/_publisher/"+this.e.oa.id)},this)),this.Gb,"action",q(function(){sb.b().c("star",this.e,W(this.Gb,16));x("/_star",i,"POST","media_id="+this.e.id+(!W(this.Gb,16)?"&delete=1":
""))},this)),this.pf,"action",q(this.ck,this)),this.Bg,"action",q(this.lk,this)),this.ud,"action",q(this.gk,this)),this.kc,"action",q(this.ik,this)),Q("local",this.a()),"click",q(function(){T(Q("link-select",this.a()),j);Q("link-input",this.a()).select()},this)),this.Zc,"action",q(this.Dk,this)),this.f,"add",q(this.Ya,this)),this.dc,"click",q(function(a){a.preventDefault();a.stopPropagation();this.f.pa(j)},this)),Q("conv-link",this.a()),"click",q(function(a){a.preventDefault();a.stopPropagation();
Z.b().c("conversation",this.e,this.ta,this.bb)},this)),Q("tweets-link",this.a()),"click",q(function(a){a.preventDefault();a.stopPropagation();Z.b().c("conversation",this.e,this.ta,this.bb,j)},this)),this.f,"focus",q(function(){this.resize(0,j)},this)),this.f,"resize",q(function(){this.resize()},this)),this.Ub,"click",q(function(a){N(a.target,"dot")&&(xi(this,a.target),this.zg.stop())},this)),this.zg,id,q(function(){var a=this.Rb&&(this.Rb.nextElementSibling!=i?this.Rb.nextElementSibling:Qe(this.Rb.nextSibling))||
Q("dot",this.a());I(q(function(){xi(this,a)},this))},this)),window,"click",q(function(a){!$e(a.target,k,"comment-input")&&!this.f.n()&&(this.f.pa(l),this.resize(0))},this)),h,"load",function(){T(h,j);I(function(){S(h).height<S(a).height+50&&K(h,"fix-height");S(h).width>2*S(a).width?K(h,"pan-left"):S(h).height>2*S(a).height&&K(h,"pan-top");h.style.marginTop=-S(h).height/2+"px";h.style.marginLeft=-S(h).width/2+"px";K(h,"show")})}),c,"scroll",q(function(){var m=Q("ytvideo",this.a()),r=IPHONE&&10<c.scrollTop?
0:((this.od?100:120)-c.scrollTop)/100;uf(d,Math.min(1,Math.max(r,0)));uf(e,Math.min(1,Math.max(r,0)));uf(g,Math.min(1,Math.max(r,0)));uf(h,Math.min(0.5,Math.max(r,0.1)));m&&uf(m,Math.min(0.5,Math.max(r,0.1)));uf(b,Math.min(0.5,Math.max(r,0.1)));O(a,"scrolled",10<c.scrollTop)},this)),this.l,"scroll",q(this.jg,this)),this.l,"click",q(this.df,this)),this.ab,"click",q(this.$k,this)),Q("desc-link",this.a()),"click",q(function(){var b=Ae(a,"scrolled");(new Df(c,[c.scrollLeft,c.scrollTop],[c.scrollLeft,
b?this.od?70:170:0],300)).play()},this));this.le&&J(this.i(),Q("prev-link",this.a()),"click",q(function(){Z.b().c("media-info",this.le,j,i,this.f.n())},this));this.Rh&&this.f.qa(this.Rh);DESKTOP&&!IPAD&&($g(Zg.b(),this.kc.a(),"left",{text:"Send"}),$g(Zg.b(),this.pf.a(),"left",{text:"Post to Facebook"}),$g(Zg.b(),this.Bg.a(),"left",{text:"Tweet"}),$g(Zg.b(),this.Gb.a(),"left",{text:"Save"}),$g(Zg.b(),Q("eye-icon",this.a()),"left",{text:"Seen by"}),$g(Zg.b(),Q("friends-icon",this.a()),"right",{text:"Visible by only your Facebook friends"}));
IPHONE&&new YT.Player(b,{height:"100%",width:"100%",videoId:this.e.fd,playerVars:{controls:0,showinfo:0}});this.e.subscribe(kb,function(a){yi(this,a,j)},this);this.e.subscribe(nb,this.fg,this);this.e.subscribe("add-tweet",function(a){this.oc(a,j)},this);this.e.subscribe(ob,function(a,b,c){zi(this,a,!c)},this);ce.b().subscribe(ee,function(){M(this.ud.a(),"play-loading")},this);ce.b().subscribe("no-media",function(){M(this.ud.a(),"play-loading")},this);A.b().h.subscribe("set-starred",function(){kg(this.Gb,
Rb(A.b().h,this.e))},this);this.resize()};
function wi(a,b,c,d,e,g,h){c?(a.e.description=c,Q("description",a.a()).innerHTML=Qh(c),T(Q("scrollable",a.a()),j)):(T(Q("desc-link",a.a()),l),T(Q("scrollable",a.a()),l));a.Ne=Ua(d,function(a){a=b?dc(A.b(),a):a;a.id!=A.b().h.id&&(T(this.Eg,j),this.Hj=j,zi(this,a,l));return a},a);Oc(a.e.Ic,function(a){zi(this,a,j)},a);a.bb=Ua(e,function(a){a=b?new pi(a):a;this.oc(a);this.Rb=this.Ub.firstChild;K(this.Rb,"selected");return a},a);e.length&&a.zg.start();a.l&&T(a.l.parentElement,j);T(a.dc,!g.length);g=Ua(g,
function(a){a=b?new oi(a):a;a.A||yi(this,a);return a},a);T(a.B,l);h?(Ai(a,h),a.e.tk=h):T(a.Zc.a(),j);a.resize();b&&(a.e.Ti=a.bb,a.e.Ra=g,a.e.mg=a.Ne,a.e.kh=j)}
n.Dk=function(){T(this.eb,j);if(!this.uk){var a=new tg("CREATE");a.j(Q("submit-poll",this.a()));a.Ca(l);var b=Q("poll-title",this.eb),c=Q("option-input-1",this.eb),d=Q("option-input-2",this.eb),e=Q("option-inputs",this.eb);J(J(J(J(J(J(this.i(),a,"action",q(function(){T(this.eb,l);var a;a=e.children;var c=function(a,b){var c=a+(b.value?b.value+"|":"");b.value="";return c},d=this;if(a.reduce)a=d?a.reduce(q(c,d),""):a.reduce(c,"");else{var r="";v(a,function(a){r=c.call(d,r,a)});a=r}b.value&&a&&(x("/_poll",
q(function(a){a=D(a.target);Ai(this,a)},this),"POST","media_id="+this.e.id+"&title="+b.value+"&options="+a),b.value="",T(this.Zc.a(),l))},this)),new Xf(b),"key",q(function(){I(q(function(){a.Ca(b.value&&c.value&&d.value)},this))},this)),new Xf(c),"key",q(function(){I(q(function(){a.Ca(b.value&&c.value&&d.value)},this))},this)),new Xf(d),"key",q(function(){I(q(function(){a.Ca(b.value&&c.value&&d.value)},this))},this)),Q("add-option",this.eb),"click",q(function(){var a=R("input",{type:"text",placeholder:"Option "+
(e.children.length+1)});e.appendChild(a)},this)),Q("close",this.eb),"click",q(function(){T(this.eb,l)},this));this.uk=j}};
function Ai(a,b){T(a.Zc.a(),l);var c=Q("status",a.Mb),d=Q("poll-options",a.Mb);a.Mb.id=b.id;Te(c,b.title.toUpperCase()+" ("+b.vote_count+" VOTES)");v(b.options,function(a){var g=X(yh,{name:a.name,ok:a.percent+"%"});d.appendChild(g);a.voted?Bi(this,b,g):J(this.i(),g,"click",q(function(){N(this.Mb,"voted")||(a.vote_count+=1,b.vote_count+=1,Bi(this,b,g),Te(c,b.title.toUpperCase()+" ("+b.vote_count+" VOTES)"),x("/_poll",i,"POST","id="+a.id),this.f.qa("I voted: "+a.name+" (on "+b.title+")",j,j),this.f.pa(j))},
this))},a);T(a.Mb,j)}function Bi(a,b,c){Q("status",a.Mb);var d=Q("poll-options",a.Mb);K(a.Mb,"voted");Xe(Q("name",c));K(c,"selected");v(Pe(d),function(a,c){var d=parseInt(100*(b.options[c].vote_count/b.vote_count),10)+"%";Te(Q("percent-number",a),d);Q("percent",a).style.width=d},a)}n.xb=function(){return this.f.he()||!!this.f.Ri||!!this.f.n()};
function xi(a,b){if(b){v(Pe(a.Ub),function(a){return M(a,"selected")});a.Rb=b;K(a.Rb,"selected");var c=Xa(Pe(a.Ub),function(a){return a==b});(new Df(a.ab,[a.ab.scrollLeft,a.ab.scrollTop],[320*c,a.ab.scrollTop],200)).play();a.resize()}}
n.Ya=function(a){var b=qi(A.b().h,this.e.id,a.text,a.bd,a.Ag,a.A,a.Qi,q(function(a){var b=this.Hd[a.time.getTime()];b.id="infocomment-"+a.id;Ci(this,a,b)},this)),c=yi(this,b);this.Hd[b.time.getTime()]=c;a.bd&&!a.A&&FB.api("/me/feed","POST",{message:a.text,name:this.e.name,link:this.e.link,picture:this.e.qb,caption:"on XYLO",description:this.e.description},ba());Tb.b().M(this.e.id,a.bd,a.Ag)};
n.oc=function(a,b){this.Kd[a.id]=a;var c=Qh(a.text),c=c.replace(/#(\S+)/g,function(a,b){return'<a target="_blank" href="http://twitter.com/search?q=%23'+b+'">'+a+"</a>"}),c=c.replace(/@(\S+)/g,function(a,b){return'<a target="_blank" href="http://twitter.com/'+b+'">'+a+"</a>"}),c=X(fh,{sb:a,text:c,timestamp:Lb(a.time.getTime()),prefix:"infotweet"}),d=R("div","dot");si($b.b(),a.time,Q("timestamp",c));b?(Ne(this.ab,c,0),Ne(this.Ub,d,0),10<Pe(this.ab).length&&(Oe(this.ab.lastChild),Oe(this.Ub.lastChild),
xi(this,d))):(this.ab.appendChild(c),this.Ub.appendChild(d));this.resize();T(Re(this.ab),j)};
function yi(a,b,c){a.ta.push(b);T(a.dc,l);var d=Qh(b.text),d=d.replace(/@\[(\d+):([a-zA-z\s]+)\]/g,function(a,b,c){return'<a href="#user:'+b+'">'+c+"</a>"}),d=X(gh,{prefix:"infocomment",M:b,text:d,oi:b.p.id==A.b().h.id});si($b.b(),b.time,Q("timestamp",d));b.A?Q("replies",a.ac[b.A]).appendChild(d):a.l.appendChild(d);b.id&&Ci(a,b,d);v(b.yd,function(a){yi(this,a,c)},a);!b.A&&c&&(a.l.scrollTop=a.l.scrollHeight,a.gf.firstChild.scrollTop=a.gf.firstChild.scrollHeight);return d}
function Ci(a,b,c){a.Yc[b.id]=b;c.id="infocomment-"+b.id;if(!b.A){a.ac[b.id]=c;var d=Q("reply-input",c),c=Q("reply-textarea",c);J(a.i(),c,"click",q(function(){if(!N(d,"decorated")){var a=new ki(l,j,j);a.j(d);a.gg(b,b.p);J(this.i(),a,"add",q(function(a){this.Ya(a)},this))}},a))}}
function zi(a,b,c){if(!c&&a.Pd[b.id])M(a.Pd[b.id],"online");else if(b.id!=A.b().h.id){if(!a.Pd[b.id]){var d=X(eh,{p:b});a.Pd[b.id]=d;Ne(a.Eg,d,1);J(a.i(),d,"click",function(){Z.b().c("profile",b)});DESKTOP&&!IPAD&&$g(Zg.b(),d,"top",{text:q(function(){return b.$d()+(N(d,"online")?" is watching":" saw this")},a)})}T(a.Eg,j);O(a.Pd[b.id],"online",c)}}n.$k=function(a){var a=a.target,b=$e(a,k,"tweet");b&&(b=this.Kd[b.id.split("-")[1]],N(a,"reply")&&Z.b().c("reply-tweet",b))};
n.df=function(a){var a=a.target,b=$e(a,k,"comment");b&&(b=this.Yc[b.id.split("-")[1]],N(a,"reply")?Q("reply-textarea",this.ac[b.A?b.A:b.id]).focus():N(a,"remove")&&this.e.c(nb,b))};n.fg=function(a){Oe(P("infocomment-"+a.id));$a(this.ta,function(b){return b.id==a.id})};
n.jg=function(){O(this.l.parentElement,"top-grad",!!this.l.scrollTop);var a=this.l.style.maxHeight,b=Je().height,a=a.substring(0,a.length-2),c=S(this.l).height;O(this.l.parentElement,"bottom-grad",this.l.scrollTop<this.l.scrollHeight-a-5&&c>=a&&640<b)};
n.resize=function(a,b){this.W=a!=i?a:this.W;var c=Je().height;if(this.a()){var d=Je().height+(IPHONE&&SAFARI?61:0)-41-this.W-($e(this.a(),k,"tabbed")?30:0);sf(this.a(),d);sf(this.gf,d-(this.od?143:243)+(IPHONE?50:0)-(this.Ne.length?38:0));640<c&&this.l&&this.l.parentElement?(ff(this.l,"max-height",c-(new Be(this.l.parentElement.offsetLeft,this.l.parentElement.offsetTop)).y-(this.od?213:313)-(this.Ne.length?38:0)-this.W+"px"),this.jg()):640>c&&(ff(this.l,"max-height",""),this.jg());b&&I(q(function(){(new Df(this.l,
[this.l.scrollLeft,this.l.scrollTop],[this.l.scrollLeft,this.l.scrollHeight],400)).play()},this),0)}};n.ck=function(){T(P("overlay"),j);FB.ui({method:"feed",name:this.e.name,link:this.e.link,L:this.e.qb,caption:"on XYLO",description:this.e.description},function(){T(P("overlay"),l)});Di(Tb.b(),this.e.id,j,l)};
n.lk=function(){var a="https://twitter.com/share?url="+this.e.link+"&text=I'm watching "+this.e.name+" "+this.e.link;if(IPHONE||IPAD){var b=document.createElement("a");b.setAttribute("href",a);b.setAttribute("target","_blank");a=document.createEvent("HTMLEvents");a.initEvent("click",j,j);b.dispatchEvent(a)}else b=window.open(a,"Tweet","height=320,width=550"),b.moveTo(screen.width/2-225,screen.height/2-150),b.focus(),Di(Tb.b(),this.e.id,l,j)};
n.gk=function(){K(this.ud.a(),"play-loading");var a=Kb(this.N);ce.b().c(de,a)};
n.ik=function(){if(!N(this.Fb,"decorated")){var a=new ki(l,j,l,j);a.j(Q("recipients",this.Fb));var b=new ki(l,l,l,l,j);b.j(Q("send-message",this.Fb));J(J(this.i(),b,"add",q(function(c){var d=ec(a.rb);d.length&&(v(d,function(a){var b=new Ei({from_user:A.b().h,to_user:a.id,text:c.text||"Sent you a video!",media:this.N});b.time=new yb;b.nb=Lb(b.time.getTime());A.b().c("new-message",b);x("/_message",c.Qg,"POST","from_id="+A.b().h.id+"&to_id="+a.id+"&text="+b.text+"&media_id="+this.N.id)},this),a.clear(),
b.clear(),kg(this.kc,l),T(this.Fb,l))},this)),Q("close",this.Fb),"click",q(function(){T(this.Fb,l);kg(this.kc,l)},this));K(this.Fb,"decorated")}T(this.Fb,W(this.kc,16))};function Fi(a,b,c,d,e,g){U.call(this);this.$b=Pb();this.Yh=a||k;this.Md=b||k;this.Kf={};this.vg=c||k;this.tc=d||k;this.dh=g||k;this.Rj=e||k;this.lf=this.$b?new Oh:k;this.Dc=this.Gh=0}t(Fi,U);
Fi.prototype.q=function(a){Fi.g.q.call(this,a);a.innerHTML="";a.scrollTop=0;K(this.a(),"ios-scroll");(this.tc||this.vg)&&Gi(this);!this.tc&&this.dh&&x(this.dh,q(function(a){a=D(a.target);a.description&&this.nd?(Q("description",this.nd).innerHTML=Qh(a.description),this.Gh=S(this.nd).height,this.resize()):a.description&&Gi(this)},this));this.B=R("div","loading",R("div","loading-spinner"));this.a().appendChild(this.B);T(this.B,l);N(this.a(),"starred")&&(this.Fc=R("div","no-comments","Favorities will appear here."),
this.a().appendChild(this.Fc));this.oe=R("div","medias");this.a().appendChild(this.oe);J(this.i(),window,"resize",ya(I,q(this.resize,this)));this.Md?(T(this.B,j),x(this.Md,q(function(a){T(this.B,l);a=Gd(Zd(a.target));a=Ua(a,function(a){return new hb(a)});v(a,this.Te,this);this.Dc=S(this.oe).height;this.resize()},this))):this.Yh&&(v(this.Yh,this.Te,this),this.Dc=S(this.oe).height,this.resize())};
Fi.prototype.Te=function(a){this.Fc&&T(this.Fc,l);var b=X(wh,{media:a}),c=Q("list-play",b),d=Q("list-plus",b);this.oe.appendChild(b);if(this.$b){var e=this.lf,g=new Nh(b,i);Ph(e,g)}J(J(J(this.i(),b,"click",q(function(){Z.b().c("media-info",a)},this)),c,"click",q(function(b){b.preventDefault();b.stopPropagation();b=Kb(a);ce.b().c(de,b)},this)),d,"click",function(b){b.preventDefault();b.stopPropagation();bc().c(Wb,a,j)});this.Kf[a.id]=b};
Fi.prototype.resize=function(){sf(this.a(),Je().height+(IPHONE&&SAFARI?61:0)-(DESKTOP?40:0)-($e(this.a(),k,"tabbed")?30:0))};function Gi(a){a.nd=X(lh,{qb:a.vg,description:a.tc?Qh(a.tc):"",link:a.Rj});a.a().appendChild(a.nd);a.Gh=S(a.nd).height;a.resize()}Fi.prototype.Rf=function(a,b){x("/admin/_addprogram",q(function(b){b=Gd(Zd(b.target));b=new Jb(b);a.c(Vb,b)},this),"POST","channel="+a.id+"&media="+b.id)};function Ei(a){this.id=a.id;this.D=dc(A.b(),a.from_user);this.Xk=dc(A.b(),a.to_user);this.text=a.text;this.media=a.media?"brkn.model.Media"==oa(a.media)?a.media:tb(sb.b(),a.media):k;this.Ka=a.read;this.nb=(this.time=a.time?ib(a.time+"Z"):k)?Lb(this.time.getTime()):k}Ei.prototype.Fe=function(){x("/_message",qb(),"POST","id="+this.id+"&read=1");this.Ka=j;A.b().h.c("read-message",this.D.id)};function Hi(a){return'<div class="message'+(a.sj?" flip":"")+'"><a href="#user:'+Y(a.message.D.id)+'"><div class="picture" style="background:'+Y(a.message.D.color)+'"><img src="'+Y(a.message.D.L)+'"/></div></a><div class="body"><a class="user" href="#user:'+Y(a.message.D.id)+'">'+Y(a.message.D.name)+'</a>  <div class="texts"><div class="text">'+Y(a.message.text)+'<div class="timestamp">'+Y(a.message.nb)+"</div></div></div></div></div>"}
function Ii(a){return'<div class="text">'+Y(a.message.text)+'<div class="timestamp">'+Y(a.message.nb)+"</div></div>"};function Ji(a,b){U.call(this);this.Ea=a||k;this.xa=b||k;this.Lf={};this.f=new ki(l);this.W=0;this.Ia=this.Ea.id==A.b().h.id}t(Ji,U);
Ji.prototype.q=function(a){Ji.g.q.call(this,a);a.innerHTML="";a.scrollTop=0;this.Db=R("div","messages");this.a().appendChild(this.Db);O(this.Db,"inbox",this.Ia);this.B=R("div","spinner");this.Db.appendChild(this.B);T(this.B,l);this.re=R("div","no-comments",this.Ia?"No Messages":"Start a private conversation.");this.Db.appendChild(this.re);this.lb=R("div","no-comments","Load previous messages");this.Db.appendChild(this.lb);T(this.lb,!this.Ia&&10<=this.xa.length);T(this.re,j);this.Ia?(this.xa=this.xa.reverse(),
A.b().h.subscribe("read-message",function(a){if((a=this.Lf[a])&&N(a,"unread"))M(a,"unread"),Z.b().c("new-messages",-1)},this)):(Jf(this.f,this.a()),J(J(J(J(J(this.i(),window,"click",q(function(a){!$e(a.target,k,"comment-input")&&!this.f.n()&&(this.f.pa(l),this.resize(0))},this)),this.re,"click",q(function(a){a.preventDefault();a.stopPropagation();this.f.pa(j)},this)),this.lb,"click",q(this.Sj,this)),this.f,"add",q(this.Ya,this)),window,"resize",ya(I,q(this.resize,this))));Sa(this.xa,function(a){Ki(this,
a)},this);A.b().subscribe("new-message",function(a){if(a.D.id!=A.b().h.id&&(a.D.id==this.Ea.id||a.Xk.id==this.Ea.id)){if(this.Ia){var c=j,d=this.Lf[a.D.id];d&&(c=!N(d,"unread"),Oe(d));c&&Z.b().c("new-messages",1)}Ki(this,a,this.Ia);this.resize()}},this);this.resize()};
Ji.prototype.Sj=function(){this.lb&&T(this.lb,l);T(this.B,j);x("/_message/"+this.Ea.id+"?offset="+this.xa.length,q(function(a){a=D(a.target);if(a.length){this.me=k;var b=R("div","separator");Ne(this.Db,b,3)}T(this.B,l);this.lb&&T(this.lb,!!a.length);Sa(a,function(a){a=new Ei(a);this.xa.push(a);Ki(this,a,j);return a},this);a.length&&(this.a().scrollTop=0,this.me=k,this.a().scrollTop=b.offsetHeight)},this))};
function Ki(a,b,c){T(a.re,l);a.lb&&T(a.lb,!a.Ia&&10<=a.xa.length);var d,e;if(!a.Ia&&a.me&&a.me.D.id==b.D.id)d=X(Ii,{message:b}),Q("texts",a.Sh).appendChild(d),b.media&&(e=X(wh,{media:b.media}),Q("texts",a.Sh).appendChild(e)),d=Q("timestamp",d);else{var g=X(Hi,{message:b,sj:b.D.id==A.b().h.id});a.me=b;a.Sh=g;c?Ne(a.Db,g,3):a.Db.appendChild(g);d=Q("timestamp",g);O(g,"unread",!b.Ka);if(a.Ia){if(a.Lf[b.D.id]=g,J(a.i(),g,"click",q(function(){b.Ka||(b.Fe(),M(g,"unread"),Z.b().c("new-messages",-1));Z.b().c("profile",
b.D)},a)),c){var h=P("mp3-1");h.load();h.play()}}else b.media&&(e=X(wh,{media:b.media}),Q("texts",g).appendChild(e))}si($b.b(),b.time,d);c||(a.a().scrollTop=a.a().scrollHeight);!a.Ia&&(!b.Ka&&b.id&&Z.b().jf==b.D.id)&&b.Fe();e&&(c=Q("list-play",e),d=Q("list-plus",e),J(J(J(a.i(),e,"click",q(function(){Z.b().c("media-info",b.media)},a)),c,"click",q(function(a){a.preventDefault();a.stopPropagation();a=Kb(b.media);ce.b().c(de,a)},a)),d,"click",function(a){a.preventDefault();a.stopPropagation();bc().c(Wb,
b.media,j)}))}Ji.prototype.Ya=function(a){var b=new Ei({from_user:A.b().h,to_user:dc(A.b(),this.Ea),text:a.text});b.time=new yb;b.nb=Lb(b.time.getTime());Ki(this,b);x("/_message",a.Qg,"POST","from_id="+A.b().h.id+"&to_id="+this.Ea.id+"&text="+a.text)};Ji.prototype.resize=function(a){this.Ia?this.dispatchEvent("resize"):(this.W=a||this.W,sf(this.a(),Je().height+(IPHONE&&SAFARI?61:0)-(DESKTOP?40:0)-42-this.W-($e(this.a(),k,"tabbed")?30:0)))};function Li(a){this.id=a.id;this.p=dc(A.b(),a.user);this.type=a.type;this.M=a.comment?new oi(a.comment):k;this.Ka=a.read;this.nb=(this.time=a.time?ib(a.time+"Z"):k)?Lb(this.time.getTime()):k}Li.prototype.Fe=function(){x("/_notification",qb(),"POST","id="+this.id+"&read=1");this.Ka=j};function Mi(a){return'<div class="notification"><a href="#user:'+Y(a.D.id)+'"><div class="picture" style="background:'+Y(a.D.color)+'"><img src="'+Y(a.D.L)+'"/></div></a><div class="body"><div class="type"><a class="user" href="#user:'+Y(a.D.id)+'">'+Y(a.D.name)+"</a> "+("reply"==a.Pf.type?"replied to your comment":"")+("mention"==a.Pf.type?"mentioned you in a comment":"")+'</div><div class="texts"><div class="text">'+Y(a.text)+'<div class="timestamp">'+Y(a.Pf.nb)+"</div></div></div></div></div>"}
;function Ni(a){U.call(this);this.ec=a;this.fi={};this.cc={};this.W=0}t(Ni,U);
Ni.prototype.q=function(a){Ni.g.q.call(this,a);a.innerHTML="";a.scrollTop=0;this.pd=R("div","notifications");this.a().appendChild(this.pd);this.B=R("div","spinner");this.pd.appendChild(this.B);T(this.B,l);this.Of=R("div","no-comments","No Notifications");this.pd.appendChild(this.Of);T(this.Of,!this.ec.length);v(this.ec,function(a){Oi(this,a)},this);this.dispatchEvent("resize");A.b().subscribe("new-notification",function(a){Oi(this,a,j);Z.b().c("new-messages",1);this.dispatchEvent("resize")},this)};
function Oi(a,b,c){if(b.M){T(a.Of,l);var d,e=b.M.text.replace(/@\[(\d+):([a-zA-z\s]+)\]/g,function(a,b,c){return c}),e=X(Mi,{Pf:b,text:e,D:b.M.p});c?Ne(a.pd,e,2):a.pd.appendChild(e);a.fi[b.id]=e;d=a.cc[b.M.media.id]||[];d.push(b);a.cc[b.M.media.id]=d;d=Q("timestamp",e);O(e,"unread",!b.Ka);J(a.i(),e,"click",q(function(){b.Ka||v(this.cc[b.M.media.id]||[],function(a){a.Fe();Z.b().c("new-messages",-1);(a=this.fi[a.id])&&M(a,"unread")},this);Z.b().c("media-info",b.M.media)},a));si($b.b(),b.time,d);c?(a=
P("mp3-4"),a.load(),a.play()):a.a().scrollTop=a.a().scrollHeight}};function Pi(a){return'<div class="user'+(a.media?" media":"")+'"><div class="name">'+Y(a.p.name)+'</div><div class="picture" style="background:'+Y(a.p.color)+'"><img src="'+Y(a.p.L)+'"/></div>'+(a.timestamp?'<div class="timestamp">'+Y(a.timestamp)+"</div>":"")+(a.media?'<div class="media"><div class="watched">LAST WATCHED </div><div class="watching">NOW WATCHING </div><a class="media-link">'+Y(a.media.name)+"</a></div>":"")+"</div>"};function Qi(a,b){U.call(this);this.Oc=a||k;this.Me={};this.fc=[];this.Gc=[];this.mb=[];this.ob=!!b;this.W=0}t(Qi,U);
Qi.prototype.q=function(a){Qi.g.q.call(this,a);a.innerHTML="";a.scrollTop=0;K(a,"friendlist");K(a,"ios-scroll");this.ob||(a=R("div","label show-all",R("a",{href:"#friendlist:1"},"ALL FRIENDS >")),this.a().appendChild(a));this.ve=R("div","label online-friends-label",this.ob?"ONLINE FRIENDS":R("a",{href:"#friendlist:1"},"ONLINE FRIENDS"));T(this.ve,l);this.a().appendChild(this.ve);this.Xf=R("div","online-friends");this.a().appendChild(this.Xf);this.xd=R("div","label",this.ob?"RECENTLY ONLINE":R("a",
{href:"#friendlist:1"},"RECENTLY ONLINE"));T(this.xd,l);this.a().appendChild(this.xd);this.wd=R("div","recent-friends");this.a().appendChild(this.wd);this.ob&&(this.se=R("div","label","OFFLINE FRIENDS"),T(this.se,l),this.a().appendChild(this.se),this.Qf=R("div","offline-friends"),this.a().appendChild(this.Qf),this.ob&&this.resize(),J(this.i(),window,"resize",q(function(){this.ob&&I(q(function(){this.resize()},this))},this)));if(this.Oc)Qa.sort.call(this.Oc,function(a,b){return a.r&&!b.r?1:!a.r&&b.r?
-1:!a.r&&!b.r?0:a.r.getTime()<b.r.getTime()?1:-1}||eb),v(this.Oc,function(a){Ri(this,a)},this),T(this.a(),j);else{var a=A.b(),b=q(function(a){this.Oc=a;Qa.sort.call(this.Oc,function(a,b){return a.r&&!b.r?1:!a.r&&b.r?-1:!a.r&&!b.r?0:a.r.getTime()<b.r.getTime()?1:-1}||eb);v(this.Oc,function(a){Ri(this,a)},this);T(this.a(),j)},this);a.ph?b&&b(a.sf):x("/_friends",q(function(a){a=D(a.target);this.sf=Ua(a,function(a){return dc(this,a)},this);this.ph=j;b&&b(this.sf)},a))}A.b().subscribe(cc,this.cl,this)};
function Ri(a,b){if(!a.Me[b.id]){var c=l,d=b.r?Lb(b.r.getTime()):k,e=X(Pi,{p:b,timestamp:d,media:b.fb});b.r&&432E5>s()-b.r.getTime()&&si($b.b(),b.r,Q("timestamp",e));b.Hc?(T(a.ve,j),K(e,"online"),v(a.fc,function(a,d){a.$d()>b.$d()&&(Ne(this.Xf,e,d),cb(this.fc,d,0,b),c=j)},a),c||(a.Xf.appendChild(e),a.fc.push(b))):d&&(3>a.mb.length||a.ob)?(v(a.mb,function(a,d){a.r&&(b.r&&a.r.getTime()<b.r.getTime())&&(Ne(this.wd,e,d),cb(this.mb,d,0,b),c=j)},a),c||(a.wd.appendChild(e),a.mb.push(b)),T(a.xd,j),T(a.wd,
j)):a.ob&&(!Wa(a.mb,function(a){return b.id==a.id})&&!Wa(a.Gc,function(a){return b.id==a.id}))&&(T(a.se,j),v(a.Gc,function(a,d){a.r&&(b.r&&a.r.getTime()<b.r.getTime())&&(Ne(this.Qf,e,d),cb(this.Gc,d,0,b),c=j)},a),c||(a.Qf.appendChild(e),a.Gc.push(b)));a.ob||(T(a.xd,!a.fc.length&&a.mb.length),T(a.wd,!a.fc.length&&a.mb.length));a.Me[b.id]=e;d=Q("media-link",e);J(a.i(),e,"click",q(function(){Z.b().c("profile",b)},a));d&&J(a.i(),d,"click",q(function(a){a.stopPropagation();a.preventDefault();Z.b().c("media-info",
b.fb)},a))}}Qi.prototype.cl=function(a){var b=this.Me[a.id];b&&(Oe(b),rb(this.Me,a.id),$a(this.Gc,function(b){return b.id==a.id})&&T(this.se,!!this.Gc.length),$a(this.fc,function(b){return b.id==a.id})&&T(this.ve,!!this.fc.length),$a(this.mb,function(b){return b.id==a.id})&&T(this.xd,!!this.mb.length));Ri(this,a)};Qi.prototype.resize=function(a){this.W=a||this.W;sf(this.a(),Je().height+(IPHONE&&SAFARI?61:0)-42-this.W-($e(this.a(),k,"tabbed")?30:0))};function Si(a,b){U.call(this);this.Re=a;this.Nc=b||k;this.S=0;this.Ei=!b;this.Yb=l;this.lh={};this.Uc={};this.bc={};this.Ab={};this.Le={};this.vi={};this.Hg=[]}t(Si,U);
Si.prototype.q=function(a){Si.g.q.call(this,a);a.innerHTML="";a.scrollTop=0;K(a,"stream");K(a,"ios-scroll");this.Ei&&(this.rf=R("div","friendlist"),T(this.rf,l),this.a().appendChild(this.rf),a=R("div","label","ACTIVITY"),this.a().appendChild(a));this.Sc=R("div","activities");this.a().appendChild(this.Sc);this.B=R("div","spinner");this.a().appendChild(this.B);T(this.B,l);this.Fc=R("div","no-comments",this.Nc==A.b().h.id?"Your activity will appear here.":"Friends' activity will appear here.");this.a().appendChild(this.Fc);
this.Re&&this.Re.length&&Ti(this,this.Re);this.Ei&&(this.qf=new Qi(i,l),this.qf.j(this.rf));A.b().subscribe("new-activity",function(a){(this.Nc==a.user.id||!this.Nc&&a.user.id!=A.b().h.id)&&Ui(this,a,i,i,j)},this);J(J(this.i(),this.a(),"scroll",q(function(){!this.Yb&&this.a().scrollTop+Je().height>this.a().scrollHeight-60&&Vi(this)},this)),window,"resize",ya(I,q(this.resize,this)));this.resize()};
function Vi(a){T(a.B,j);x("/_activity"+(a.Nc?"/"+a.Nc:"")+"?offset="+a.S,q(function(a){this.lh[String(a.target.ld)]||(this.lh[String(a.target.ld)]=j,a=D(a.target).activities,this.Yb=!a.length,O(this.B,"finished",this.Yb),T(this.B,this.Yb),Ti(this,a))},a))}
function Ti(a,b){a.Uc=[];a.bc=[];a.Ab=[];v(b,function(a){this.S++;switch(a.type){case "session":var a=a.session,b=a.channel_id in this.Uc?this.Uc[a.channel_id]:[];b.push(a);this.Uc[a.channel_id]=b;break;case "liked":this.bc[a.media.id]||(b=a.media.id in this.Ab?this.Ab[a.media.id]:[],b.push(a),this.Ab[a.media.id]=b,b=a.user.id in this.Le?this.Le[a.user.id]:[],b.push(a),this.Le[a.user.id]=b);break;case "comment":a=a.comment,b=a.media.id in this.bc?this.bc[a.media.id]:[],b.push(a),this.bc[a.media.id]=
b,this.Ab[a.media.id]&&rb(this.Ab,a.media.id)}},a);Oc(a.Uc,function(a){Ui(this,i,a,"session")},a);Oc(a.bc,function(a){Ui(this,i,a,"comment")},a);Oc(a.Ab,function(a){1<a.length&&Ui(this,i,a,"liked")},a);Oc(a.Le,function(a){Ui(this,i,a,"liked")},a)}
function Ui(a,b,c,d,e){T(a.Fc,l);var b=b||k,c=c||k,g=b?b.type:d,h=[],m=b?[dc(A.b(),b.user)]:[],r=b?ib(b.time+"Z"):k;c&&v(c,function(a){Wa(m,function(b){return b.id==a.user.id})||m.push(dc(A.b(),a.user));var b=ib((a.time||a.tune_in)+"Z");r=r&&r.getTime()>b.getTime()?r:b;"session"==g?v(a.media,function(a){!this.bc[a.id]&&(!this.Ab[a.id]&&!Wa(h,function(b){return b.id==a.id}))&&h.push(a)},this):"liked"==g&&!this.vi[a.media.id]&&(h.push(a.media),this.vi[a.media.id]=j)},a);switch(g){case "session":if(!a.Nc&&
2>m.length)return;var d=b?b.session:c[0],y=C.b().get(d.channel_id),h=b?b.session.media:h;3<h.length&&(h=h.slice(0,3));b=X(ih,{C:m,O:y,time:Lb(r.getTime()),Si:!!d.tune_out});break;case "comment":h=b?[b.comment.media]:[tb(sb.b(),c[0].media)];b=Ua(b?[b.comment]:c,function(a){a=new oi(a);a.text=Qh(a.text);a.text=a.text.replace(/@\[(\d+):([a-zA-z\s]+)\]/g,function(a,b,c){return'<a href="#user:'+b+'">'+c+"</a>"});return a});b=X(jh,{Ra:b.reverse().slice(0,3),C:m,media:h[0]});break;case "liked":h=b?[b.media]:
h;b=X(kh,{C:m,Zh:h.length,time:Lb(r.getTime())});break;default:return}if(h.length){si($b.b(),r,Q("timestamp",b));d=Xa(a.Hg,function(a){return a.time<r.getTime()});cb(a.Hg,d,0,{time:r,element:b});var z=Q("medias",b);v(h,function(a){var b=tb(sb.b(),a),a=X(wh,{media:b}),c=Q("list-play",a),d=Q("list-plus",a);Q("thumb",a);z.appendChild(a);J(J(J(this.i(),a,"click",function(){Z.b().c("media-info",b)}),c,"click",function(a){a.preventDefault();a.stopPropagation();a=Kb(b);ce.b().c(de,a)}),d,"click",function(a){a.preventDefault();
a.stopPropagation();bc().c(Wb,b,j)})},a);e?Ne(a.Sc,b,0):c?Ne(a.Sc,b,d):a.Sc.appendChild(b);I(ya(K,b,"show"))}}Si.prototype.resize=function(){var a=Je().height+(IPHONE&&SAFARI?61:0)-40-($e(this.a(),k,"tabbed")?40:10);sf(this.a(),a);S(this.Sc).height<a&&Vi(this)};function Wi(a){U.call(this);this.Ea=this.N=a;this.pe=a.id==A.b().h.id;this.Na=[this.pe?"inbox":"messages","activity","starred"]}t(Wi,U);n=Wi.prototype;n.q=function(a){Wi.g.q.call(this,a);K(a,"profile");K(a,"ios-scroll");Og(a,uh,{Nf:this.pe})};
n.w=function(){this.Da=Q("tabs",this.a());this.pe&&(x("/_notification",q(function(a){var a=D(a.target),a=Ta(a,function(a){return!!a}),b=0,a=Ua(a,function(a){a=new Li(a);b+=!a.Ka?1:0;return a},this);Z.b().c("new-messages",b);this.ec=new Ni(a);J(this.i(),this.ec,"resize",ya(I,q(this.Ae,this)));this.ec.j(Q("notifications-content",this.a()))},this)),this.Ul=Q("inbox-content",this.a()),J(this.i(),window,"resize",ya(I,q(this.Ae,this))));x("/_message/"+this.Ea.id,q(function(a){var a=D(a.target),b=0,a=Ua(a,
function(a){a=new Ei(a);b+=!a.Ka?1:0;return a},this);this.pe&&Z.b().c("new-messages",b);this.xa=new Ji(this.Ea,a);J(this.i(),this.xa,"resize",ya(I,q(this.Ae,this)));this.xa.j(Q("messages-content",this.a()))},this));x("/_star/"+this.Ea.id,q(function(a){var a=D(a.target),a=Ua(a,function(a){return new hb(a)}),b=A.b().h;b.Hi=a;b.c("set-starred");this.Cd=new Fi(a);this.Cd.j(Q("starred-content",this.a()))},this));x("/_activity/"+this.Ea.id,q(function(a){a=D(a.target).activities;this.tg=new Si(a,this.Ea.id);
this.tg.j(Q("activity-content",this.a()))},this));J(this.i(),this.Da,"click",q(function(a){a=$e(a.target,"li");this.Eb(a)},this));sb.b().subscribe("star",function(a,b){if(b)this.Cd.Te(a);else{var c=this.Cd,d=c.Kf[a.id];d&&(Da(d),rb(c.Kf,a.id))}},this);J(this.i(),window,"resize",ya(I,q(this.xi,this)));this.xi()};n.Eb=function(a){v(this.Na,function(b){O(this.Da.parentElement,b,N(a,b));this.u=N(a,b)?b:this.u},this)};
n.xi=function(){var a=Je().height+(IPHONE&&SAFARI?61:0)-41-($e(this.a(),k,"tabbed")?30:0);sf(this.a(),a);this.Ae()};n.Ae=function(){var a=S(this.a()).height-80;this.ec&&sf(this.ec.a(),Math.floor(a/2));this.xa&&sf(this.xa.a(),Math.ceil(a/2))};function Xi(){U.call(this);this.$b=Pb();this.ej=new ji;this.Na={};this.Hb=[];this.Jc=[];this.jb=this.Rc=0}t(Xi,U);n=Xi.prototype;
n.w=function(){Xi.g.w.call(this);this.Tc=Q("arrow",this.Jb);this.ff=P("sidebar-content");this.Xh=P("media-list");this.ye=P("profile");this.oh=P("friendlist");this.$g=P("conversation");this.Jb=P("toolbar");this.Da=Q("tabs",this.a());this.Qe=Q("activities-count",this.a());this.Af=Q("inbox-count",this.a());var a=new Xf(document);v(Pe(this.Da),function(a){var b=ze(a)[0];this.Na[b]=a;this.Hb.push(b)},this);this.Vf();x("/_activity",q(function(a){a=D(a.target);this.tg=new Si(a.activities);this.tg.j(P("stream"));
Z.b().c("new-activites",parseInt(a.new_count,10))},this));this.Cd=new Wi(A.b().h);this.Cd.j(P("my-profile"));this.V&&(DESKTOP||C.b().I.U&&C.b().I.Y())?(this.G=P("info"),this.u="info",Yi(this,"info","info")):(this.G=P("stream"),this.u="stream",Yi(this,"info","stream"));var b="left";v(this.Hb,function(a){var c=Q(a,this.ff);a==this.u?b="right":K(c,b)},this);this.Jc=[this.G,""];K(this.G,"current");if(this.$b){this.ej.j(P("admin"));var c=X(mh,{name:"ADMIN",className:"admin"});this.Da.appendChild(c);this.Na.admin=
c;this.Hb.push("admin")}Zi(this);J(J(J(J(this.i(),Q("back-button",this.Jb),"click",q(function(a){var b=this.Jc.shift();this.navigate(b[0],j,b[1]);Zi(this);a.stopPropagation()},this)),this.Da,"click",q(function(a){var b=this.u,c=$e(a.target,"li"),h=ze(c)[0];Yi(this,this.u,h);K(c,"selected");Zi(this);b!=this.u&&a.stopPropagation();"stream"==h&&this.ei(0,j)},this)),this.Jb,"click",q(function(a){((a=$e(a.target,"li"))&&ze(a)[0]==this.u||!a)&&(new Df(this.G,[this.G.scrollLeft,this.G.scrollTop],[this.G.scrollLeft,
0],300)).play()},this)),a,"key",q(function(a){a.ctrlKey&&"68"==a.keyCode&&Ae(this.a(),"dark")},this));DESKTOP&&hi.b().subscribe($i,function(a){O(this.a(),"toggled",a);I(q(function(){O(this.a(),"collapsed",!a)},this),!a?500:0)},this);Z.b().subscribe("navigate",this.navigate,this);Z.b().subscribe("new-activites",this.ei,this);Z.b().subscribe("new-messages",this.Yj,this);Z.b().subscribe("conversation",this.Fk,this);Z.b().subscribe("media-list",this.Jk,this);Z.b().subscribe("media-info",this.Fi,this);
Z.b().subscribe("friend-list",this.Ik,this);Z.b().subscribe("profile",this.Lk,this);C.b().subscribe(ae,this.Vf,this);ce.b().subscribe(de,this.Vf,this);C.b().subscribe($d,this.ak,this);DESKTOP&&hi.b().subscribe(aj,function(a){O(this.a(),"admin",a);a?(hi.b().c($i,j),Yi(this,this.u,"admin")):"admin"==this.u&&Yi(this,"admin","info")},this)};n.ei=function(a,b){b&&(this.Rc=0,T(this.Qe,l));this.Rc+=a;Te(this.Qe,this.Rc.toString());T(this.Qe,!!this.Rc)};
n.Yj=function(a,b){b&&(this.jb=0,T(this.Af,l));this.jb+=a;this.jb=Math.max(this.jb,0);Te(this.Af,this.jb.toString());document.title=0<this.jb?"("+this.jb.toString()+") XYLO":"XYLO";T(this.Af,!!this.jb)};n.Vf=function(a){if(a=a||C.b().I.Y())if(this.Sb=a.media,!this.V||this.Sb.id!=this.V.N.id){var a=this.V&&this.V.f.n()?this.V.f.n():k,b=this.V?this.V.e:k;Da(this.V);this.V=new vi(this.Sb,l,b,a);this.V.j(P("info"))}};
n.ak=function(a){a=a||C.b().I;if((this.Sb=a.Y()&&a.Y().media)&&(!this.V||this.Sb.id!=this.V.N.id))Da(this.V),this.V=new vi(this.Sb),this.V.j(P("info")),this.Fi(this.Sb)};
function Yi(a,b,c){var d=Q(c,a.ff),e=Ra(a.Hb,b),b=Ra(a.Hb,c),g=(e=e<b)?0:a.Hb.length-1,h=e?g<a.Hb.length:0<=g;for(g;h;g+=e?1:-1){var m=Q(a.Hb[g],a.ff);if(e&&g>b||!e&&g<b)K(m,"right"),M(m,"left");else if(e&&g<b||!e&&g>b)O(m,"left",e),K(m,"right");else if(g==b){M(m,"right");M(m,"left");break}}a.u=c;cb(a.Jc,0,0,[a.G,""]);M(a.G,"current");a.G=d;K(a.G,"current");Zi(a)}
n.navigate=function(a,b,c){if(a==this.G)c&&Te(Q("back-title",this.Jb),c);else{var d=N(this.G,"screen");b?(M(this.G,"on"),M(this.G,"current"),K(a,"current"),this.G=a):(O(this.G,"on",!d),b=[this.G,Xe(Q("back-title",this.Jb))],cb(this.Jc,0,0,b),M(this.G,"current"),this.G=a,K(this.G,"current"));O(this.Jb,"back",N(this.G,"slide"));c&&Te(Q("back-title",this.Jb),c);this.G!=this.ye&&(Z.b().jf=k)}};n.Fk=function(a,b,c,d){(new ui(a,b,c,d)).j(this.$g);Z.b().c("navigate",this.$g,l,a.name)};
n.Jk=function(a,b,c,d,e,g,h){(new Fi(b,c,d,e,g,h)).j(this.Xh);Z.b().c("navigate",this.Xh,l,a,d,e)};n.Ik=function(){this.qf=new Qi(i,j);this.qf.j(this.oh);Z.b().c("navigate",this.oh,l,"Friends")};n.Fi=function(a,b,c,d){if(this.V&&a.id==this.V.N.id){M(this.Jb,"back");for(a=this.Jc[0][0];a&&N(a,"slide");)a=this.Jc.shift();Yi(this,this.u,"info")}else{var e=P("media-info");(new vi(a,b,c,d)).j(e);Z.b().c("navigate",e,l,a.name)}DESKTOP&&hi.b().c($i,j)};
n.Lk=function(a){if(!this.dg||!(this.dg.N.id==a.id&&this.G==this.ye))Z.b().jf=a.id,this.dg=new Wi(a),this.dg.j(this.ye),Z.b().c("navigate",this.ye,l,a.name),DESKTOP&&hi.b().c($i,j)};
function Zi(a){var b=Math.round(S(a.Na[a.u]).width/2+(new Be(a.Na[a.u].offsetLeft,a.Na[a.u].offsetTop)).x);a.Tc.style.transform="translate3d("+b+"px, 0,0)";a.Tc.style.msTransform="translate3d("+b+"px, 0,0)";a.Tc.style.WebkitTransform="translate3d("+b+"px, 0,0)";a.Tc.style.MozTransform="translate3d("+b+"px, 0,0)";a.Tc.style.ll="translate3d("+b+"px, 0,0)"};function bj(a){return'<div class="main"><div id="stage" class="stage"><div id="ytplayer"></div><div id="stagecover"><div class="message"><span></span><div class="spinner" style="display:none"></div></div><div class="fullscreen"></div><div class="expand"></div><div class="play" style="display: none"><div></div></div><div class="pause" style="display: none"><div></div></div></div><div id="logo"></div></div><div id="sidebar" class="toggled"><div id="toolbar"><div class="back"><div class="back-button"><div>BACK</div></div><div class="back-title"></div></div><ul class="tabs"><li class="info tab selected"><div class="label">NOW</div></li><li class="stream tab"><div class="label">STREAM<div class="activities-count" style="display:none"></div></div></li><li class="profile tab"><div class="label">HOME<div class="inbox-count" style="display:none"></div></div></li></ul><div class="radial-grad"></div><div class="arrow"></div></div><div id="sidebar-content"><div id="info" class="screen info"><div class="no-info">Pick a channel or play a story.</div></div><div id="stream" class="screen stream"><div class="loading loading-activity"><div class="loading-spinner"></div></div></div><div id="my-profile" class="screen profile"></div><div id="admin" class="screen admin"></div><div id="media-list" class="slide media-list"></div><div id="friendlist" class="slide friendlist"></div><div id="conversation" class="slide"></div>'+
(a.dj?'<div id="admin-col-list" class="slide admin"></div><div id="admin-list" class="slide admin-list"></div>':"")+'<div id="media-info" class="slide info"></div><div id="profile" class="slide profile"></div></div></div><div id="notify" class="notify"></div><div id="welcome" class="welcome" style="display:none"><div class="thanks"></div><div class="guide"></div><div class="friends"></div><div class="sidebar"></div><div class="close"></div></div></div>'};function Tb(){}na(Tb);_gaq=[];Tb.prototype.init=function(){_gaq.push(["_setAccount","UA-38058655-1"]);_gaq.push(["_trackPageview"]);var a=document.createElement("script");a.type="text/javascript";a.async=j;a.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)};Tb.prototype.login=function(){_gaq.push(["_trackEvent","Users","Login",A.b().h.id])};
function ac(a,b){_gaq.push(["_trackEvent","Media","Play",b.id]);_gaq.push(["_trackEvent","Users","Play",A.b().h.id])}Tb.prototype.bf=function(a,b){a.U||(_gaq.push(["_trackEvent","Channel","OptOut",b.id]),_gaq.push(["_trackEvent","Channel","OptIn",a.id]))};
Tb.prototype.M=function(a,b,c){_gaq.push(["_trackEvent","Media","Comment",a.id]);_gaq.push(["_trackEvent","Users","Comment",A.b().h.id]);b&&_gaq.push(["_trackEvent","Facebook","Comment",A.b().h.id]);c&&_gaq.push(["_trackEvent","Twitter","Comment",A.b().h.id])};
function Di(a,b,c,d){_gaq.push(["_trackEvent","Media","Share",b.id]);_gaq.push(["_trackEvent","Users","Share",A.b().h.id]);c&&_gaq.push(["_trackEvent","Facebook","Share",A.b().h.id]);d&&_gaq.push(["_trackEvent","Twitter","Share",A.b().h.id]);x("/_share",qb(),"POST","facebook="+c+"&twitter="+d)}ia("_gaq",_gaq);function hi(){w.call(this);this.qk=j;var a=P("controller");this.Gi=!a||N(a,"sidebar-toggled");this.th=a&&N(a,"guide-toggled");a=P("guide");this.jm=!!a&&N(a,"timeless");this.subscribe($i,ca("Gi"),this);this.subscribe(cj,ca("th"),this);this.subscribe(dj,ca("qk"),this)}t(hi,w);na(hi);function ii(a,b){var c=P("toggle-pending");Te(c,b);T(c,!!b)}var dj="play",cj="toggle-guide",$i="toggle-sidebar",aj="toggle-admin";function ej(){w.call(this);this.Vh=l}t(ej,w);na(ej);ej.prototype.init=function(a){this.Ri=a;a=(new appengine.Channel(unescape(a))).open();a.onmessage=q(this.fk,this);a.onclose=q(this.gi,this);H(window,"onbeforeunload",q(this.gi,this));return this};
ej.prototype.fk=function(a){var b=Gd(a.data);switch(b.type){case "viewer_change":var c=dc(A.b(),b.user),d=b.time&&ib(b.time+"Z");c.kf&&d&&c.kf.end(d);(a=b.last_channel_id&&C.b().get(b.last_channel_id))&&a.c("remove-viewer",c);c.fb&&c.fb.c(ob,c,a,j);var e=b.channel_id&&C.b().get(b.channel_id),a=b.media&&tb(sb.b(),b.media);e&&(d=d||new yb,d=new Sb(b.session_id,c,e,d),c.kf=d,e.c(Xb,d));a&&a.c(ob,c,e,b.online!=j);A.b().c(cc,c,b.online);break;case "notification":a=new Li(b.notification);A.b().c("new-notification",
a);break;case "new_comment":c=new oi(b.comment);if(c.p.id!=A.b().h.id&&(d=b.tweet?new pi(b.tweet):k,a=tb(sb.b(),b.comment.media)))a.c(kb,c),d&&a.c("add-tweet",d);break;case "new_message":a=new Ei(b.message);A.b().c("new-message",a);Z.b().jf!=a.D.id&&fb.b().c("flash","messaged you",a.text,a.D,a.D.L,"#user:"+a.D.id);break;case "new_activity":A.b().c("new-activity",b.activity);b.activity.user.id!=A.b().h.id&&"session"!=b.activity.type&&Z.b().c("new-activites",1);break;case "update_programs":a=b.programs;
e=C.b().get(b.channel_id);v(a,function(a){e.c(Yb,a)},this);break;case "new_programs":b.channel&&(e=C.b().Se(b.channel));v(b.programs,q(function(a){a=new Jb(a);if(e=e||C.b().get(b.channel_id))e.c(Vb,a),C.b().I&&C.b().I.Y(),ce.b().Y()||(C.b().c($d,e),C.b().c(ae,a))},this));break;case "twitter_auth":A.b().h.c(Ob)}};
ej.prototype.gi=function(){if(!this.Vh){var a=C.b().I.U&&C.b().I.fb&&Math.floor(ce.b().getCurrentTime());DESKTOP&&x("/_settings",qb(),"POST","show_guide="+hi.b().th+"&show_sidebar="+hi.b().Gi+(a?"&current_seek="+a:""));this.Vh=j}};function $b(){w.call(this);this.Tg=new gd(1E3);this.Oi=new gd(3E4);this.Pi=[];this.of=[]}t($b,w);na($b);$b.prototype.init=function(){this.Tg.start();this.Oi.start();H(this.Tg,id,q(function(){v(this.of,function(a,b){a.time<s()&&(a.callback(),Qa.splice.call(this.of,b,1))},this)},this));H(this.Oi,id,q(function(){v(this.Pi,function(a){Te(a.element,Lb(a.time.getTime()))},this)},this))};function si(a,b,c){86400>(s()-b.getTime())/1E3&&a.Pi.push({time:b,element:c})}
function Zb(a,b,c){86400>(s()-b)/1E3&&a.of.push({time:b,callback:c})};function fj(){w.call(this);this.$l=[]}t(fj,w);na(fj);fj.prototype.If=function(a){Oc(a,q(function(a,c){v(a,q(function(a){a=new Jb(a);C.b().pc[c]&&C.b().pc[c].Ue(a)},this))},this))};var gj=l;function hj(a){a.match(/[\d]+/g).length=3}
if(navigator.plugins&&navigator.plugins.length){var ij=navigator.plugins["Shockwave Flash"];ij&&(gj=j,ij.description&&hj(ij.description));navigator.plugins["Shockwave Flash 2.0"]&&(gj=j)}else if(navigator.mimeTypes&&navigator.mimeTypes.length){var jj=navigator.mimeTypes["application/x-shockwave-flash"];(gj=jj&&jj.enabledPlugin)&&hj(jj.enabledPlugin.description)}else try{var kj=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7"),gj=j;hj(kj.GetVariable("$version"))}catch(lj){try{kj=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6"),
gj=j}catch(mj){try{kj=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),gj=j,hj(kj.GetVariable("$version"))}catch(nj){}}};function oj(a,b,c,d,e,g,h,m){this.Md=a;this.fj=b;this.tc=c;this.Lb=d;this.Yl=e;this.Sl=g;this.qm=h;this.ib=m;this.Uk=[];this.af=[];this.Hl=[];this.em=[]}oj.prototype.qh=da("fj");oj.prototype.Di=function(a){this.Lb=a;return this};oj.prototype.Bi=function(a){this.gc=a;return this};function pj(a){this.Md=a;this.Ok=k}function qj(a){this.Md=a;this.Ok=this.mm=k};function ch(a,b,c){oj.call(this,"http://www.youtube.com/watch?v="+encodeURIComponent(String(a)),b,c,"application/x-shockwave-flash");this.Xi=a;this.Uk=[new pj("http://i.ytimg.com/vi/"+a+"/default.jpg")];this.Bi(new qj("http://www.youtube.com/v/"+encodeURIComponent(String(a))+"&hl=en&fs=1&autoplay=1"))}t(ch,oj);
var bh=RegExp("http://(?:[a-zA-Z]{2,3}\\.)?(?:youtube\\.com/watch)(?:\\?(?:[\\w=-]+&(?:amp;)?)*v=([\\w-]+)(?:&(?:amp;)?[\\w=-]+)*)?(?:#[!]?(?:(?:(?:[\\w=-]+&(?:amp;)?)*(?:v=([\\w-]+))(?:&(?:amp;)?[\\w=-]+)*)|(?:[\\w=&-]+)))?[^\\w-]?","i");function rj(){U.call(this);this.Nk=new Xi}t(rj,U);rj.prototype.q=function(a){rj.g.q.call(this,a);var b=X(bj,{dj:Pb()});Ne(a,b,0)};
rj.prototype.w=function(){rj.g.w.call(this);SAFARI||(document.body.style.height=Je().height+"px");this.Nk.j(P("sidebar"));A.b().h.Zi||A.b();J(this.i(),document.body,"touchmove",function(a){$e(a.target,"div","ios-scroll")||a.preventDefault()});J(this.i(),window,"click",function(a){var b=$e(a.target,"a");if(b=b?b.href:k)if((b=b.match("#(.*):(.*)"))&&b.length)switch(a.preventDefault(),a.stopPropagation(),b[1]){case "user":a=A.b().get(b[2]);Z.b().c("profile",a);break;case "channel":a=C.b().get(b[2]);
C.b().c($d,a);break;case "info":a=sb.b().get(b[2]);Z.b().c("media-info",a);break;case "friendlist":Z.b().c("friend-list")}});x("/_presence",q(function(a){a=D(a.target);this.Cl=ej.b().init(a.token);var b=C.b();v(a.viewer_sessions,q(function(a){var b=dc(A.b(),a.user),e=A.b();Wa(e.ue,function(a){return a.id==b.id})||e.ue.push(b);var e=this.pc[a.channel_id],g=a.media[0]?tb(sb.b(),a.media[0]):k,h=ib(a.tune_in+"Z"),m=a.tune_out?ib(a.tune_out+"Z"):k,a=new Sb(a.id,b,e,h,m);b.kf=a;if(e){e.Dg.push(a);e.c(Xb,
a);var r=e.Y()}else g&&(r=Kb(g));b.id!=A.b().h.id&&(r&&r.media.c(ob,b,e),A.b().c(cc,b,j))},b))},this))};
function sj(a){var b=P("login"),c=P("static-content"),d=P("pages"),e=N(b,"app");O(b,"expanded",a);P("uvTab")&&O(P("uvTab"),"show",e&&a);a?(e?c.style.bottom=-S(d).height-80+"px":c.style.top=Math.max(10,Je().height-280)+"px",a=e?Math.min(Je().height-100,c.scrollHeight+80):Math.min(Je().height-435,c.scrollHeight+190),!e||e&&!b.scrollTop?(e=new Df(b,[b.scrollLeft,b.scrollTop],[b.scrollLeft,a],300),K(b,"scrolling"),e.play(),H(e,"end",function(){M(b,"scrolling")})):b.scrollTop=a):(c.style.top="",c.style.height=
"",e?I(function(){M(b,"show")},200):c.className="")}function tj(a,b){var c=P("fb-login");if(a){var d=Q("power",c);K(d,a)}b&&(d=Q("waitlist",c),Te(d,b));M(c,"spin");K(c,"disabled");T(c,j);K(c,"show");K(c,"waitlist")}
ia("brkn.Mobile.staticInit",function(){var a=P("fb-login"),b=P("homepage"),c=P("login"),d=P("static-content"),e=P("pages"),g=P("footer"),h=l;K(b,"hide");var m=R("img");m.src="/static/img/homepage.jpg";H(m,"load",function(){M(b,"hide");K(b,"show")});I(function(){T(a,j);I(ya(K,a,"show"),400)},100);H(c,"click",function(a){"static-scrollable"==a.target.id&&(a=N(c,"app"),h=l,a?sj(h):(a=new Df(c,[c.scrollLeft,c.scrollTop],[c.scrollLeft,0],300),a.play(),H(a,"end",ya(sj,h))))});H(c,"scroll",function(){!N(c,
"scrolling")&&1>c.scrollTop&&(h=l,sj(h))});H(g,"click",function(a){var a=$e(a.target,k,"section"),b=N(c,"app");a&&(h=j,d.className=a.id,d.style.height=S(e).height+(b?80:220)+"px",sj(h))});H(window,"resize",ya(sj,h));Tb.b().init();IPHONE&&(K(document.body,"iphone"),K(document.body,"login"),window.onload=function(){I(function(){window.scrollTo(0,1)},1E3)})});
ia("brkn.Mobile.auth",function(){FB.getLoginStatus(function(a){if("connected"===a.status){var a=P("fb-login"),b=P("static-content"),c=P("login");K(a,"disabled");K(a,"spin");x("/_session",function(a){if(200==Yd(a.target)){var e=D(a.target);if(e.error)Te(P("error"),e.error),tj("error","Yikes...");else if(e.message)Te(P("message"),e.message);else{M(document.body,"login");var a=e.channels,g=e.programs,e=e.current_user;if(!Qc(e)){var h=A.b();h.h=dc(h,e);FB.api("/me/permissions",q(function(a){this.h.wf=
a.data[0].publish_stream},h));FB.api("/me/friends",q(function(a){a&&a.data&&v(a.data,function(a){this.Od[a.id]||(this.Od[a.id]=new Nb({id:a.id,name:a.name,temp:j}))},this)},h))}C.b().If(a);fj.b().If(g);a=C.b();a.I=a.pc[e.current_channel]||a.Vc[0];if(a.I&&a.I.Y()&&!a.I.Y().ended)g=a.I;else if(a.ke&&a.ke.Y())g=a.ke;else{e=g=k;for(h=0;!e&&h<a.Vc.length;)e=(g=!a.Vc[h].U?a.Vc[h]:k)&&g.Y(),h++}a.I=g||a.I;a.I&&a.I.Y();$b.b().init();(new rj).j(document.body);Tb.b().login();I(function(){I(function(){K(c,"hide");
I(function(){T(P("homepage"),l);K(c,"app");K(b,"faq")},600)},600)})}}else 500==Yd(a.target)?tj("error","Oops, check back later"):tj("wait")},"POST")}else H(P("fb-login"),"click",function(){window.location.href="https://m.facebook.com/dialog/oauth?client_id="+FB_APP_ID+"&response_type=code&redirect_uri="+HOST_URL+"&scope=email";return l})})});