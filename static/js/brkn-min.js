function e(a){throw a;}var h=void 0,j=!0,k=null,l=!1;function aa(){return function(){}}function ba(a){return function(b){this[a]=b}}function ca(a){return function(){return this[a]}}function da(a){return function(){return a}}var m,ea=ea||{},p=this;function fa(a,b){var c=a.split("."),d=p;!(c[0]in d)&&d.execScript&&d.execScript("var "+c[0]);for(var f;c.length&&(f=c.shift());)!c.length&&ga(b)?d[f]=b:d=d[f]?d[f]:d[f]={}}
function ha(a){for(var a=a.split("."),b=p,c;c=a.shift();)if(b[c]!=k)b=b[c];else return k;return b}function ia(){}function ja(a){a.a=function(){return a.rh?a.rh:a.rh=new a}}
function ma(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function ga(a){return a!==h}function na(a){return"array"==ma(a)}function oa(a){var b=ma(a);return"array"==b||"object"==b&&"number"==typeof a.length}function r(a){return"string"==typeof a}function pa(a){return"number"==typeof a}function qa(a){return"function"==ma(a)}function ra(a){var b=typeof a;return"object"==b&&a!=k||"function"==b}function sa(a){return a[ta]||(a[ta]=++ua)}
var ta="closure_uid_"+Math.floor(2147483648*Math.random()).toString(36),ua=0;function va(a,b,c){return a.call.apply(a.bind,arguments)}function wa(a,b,c){a||e(Error());if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}
function s(a,b,c){s=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?va:wa;return s.apply(k,arguments)}function xa(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=Array.prototype.slice.call(arguments);b.unshift.apply(b,c);return a.apply(this,b)}}var u=Date.now||function(){return+new Date};function ya(a,b){var c=b||{},d;for(d in c)var f=(""+c[d]).replace(/\$/g,"$$$$"),a=a.replace(RegExp("\\{\\$"+d+"\\}","gi"),f);return a}
function v(a,b){function c(){}c.prototype=b.prototype;a.d=b.prototype;a.prototype=new c;a.prototype.constructor=a};function za(a,b){for(var c=1;c<arguments.length;c++)var d=String(arguments[c]).replace(/\$/g,"$$$$"),a=a.replace(/\%s/,d);return a}function Aa(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")}function Ba(a){if(!Ca.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(Da,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(Ea,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(Fa,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(Ga,"&quot;"));return a}var Da=/&/g,Ea=/</g,Fa=/>/g,Ga=/\"/g,Ca=/[&<>\"]/;
function Ha(a){var a=ga(h)?a.toFixed(h):String(a),b=a.indexOf(".");-1==b&&(b=a.length);b=Math.max(0,2-b);return Array(b+1).join("0")+a}function Ia(a){return String(a).replace(/\-([a-z])/g,function(a,c){return c.toUpperCase()})};var Ja=Array.prototype,Ka=Ja.indexOf?function(a,b,c){return Ja.indexOf.call(a,b,c)}:function(a,b,c){c=c==k?0:0>c?Math.max(0,a.length+c):c;if(r(a))return!r(b)||1!=b.length?-1:a.indexOf(b,c);for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},w=Ja.forEach?function(a,b,c){Ja.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,f=r(a)?a.split(""):a,g=0;g<d;g++)g in f&&b.call(c,f[g],g,a)},La=Ja.filter?function(a,b,c){return Ja.filter.call(a,b,c)}:function(a,b,c){for(var d=a.length,f=[],g=0,i=
r(a)?a.split(""):a,n=0;n<d;n++)if(n in i){var q=i[n];b.call(c,q,n,a)&&(f[g++]=q)}return f},Ma=Ja.map?function(a,b,c){return Ja.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,f=Array(d),g=r(a)?a.split(""):a,i=0;i<d;i++)i in g&&(f[i]=b.call(c,g[i],i,a));return f},Na=Ja.every?function(a,b,c){return Ja.every.call(a,b,c)}:function(a,b,c){for(var d=a.length,f=r(a)?a.split(""):a,g=0;g<d;g++)if(g in f&&!b.call(c,f[g],g,a))return l;return j};
function Oa(a,b){var c=Pa(a,b,h);return 0>c?k:r(a)?a.charAt(c):a[c]}function Pa(a,b,c){for(var d=a.length,f=r(a)?a.split(""):a,g=0;g<d;g++)if(g in f&&b.call(c,f[g],g,a))return g;return-1}function Qa(a,b){return 0<=Ka(a,b)}function Ra(a,b){var c=Ka(a,b);0<=c&&Ja.splice.call(a,c,1)}function Sa(a,b,c){b=Pa(a,b,c);0<=b&&Ja.splice.call(a,b,1)}function Ta(a){return Ja.concat.apply(Ja,arguments)}function Ua(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]}
function Va(a,b){for(var c=1;c<arguments.length;c++){var d=arguments[c],f;if(na(d)||(f=oa(d))&&d.hasOwnProperty("callee"))a.push.apply(a,d);else if(f)for(var g=a.length,i=d.length,n=0;n<i;n++)a[g+n]=d[n];else a.push(d)}}function Wa(a,b,c,d){Ja.splice.apply(a,Xa(arguments,1))}function Xa(a,b,c){return 2>=arguments.length?Ja.slice.call(a,b):Ja.slice.call(a,b,c)};var Ya,Za,$a,ab,bb;function cb(){return p.navigator?p.navigator.userAgent:k}function db(){return p.navigator}ab=$a=Za=Ya=l;var eb;if(eb=cb()){var fb=db();Ya=0==eb.indexOf("Opera");Za=!Ya&&-1!=eb.indexOf("MSIE");$a=!Ya&&-1!=eb.indexOf("WebKit");ab=!Ya&&!$a&&"Gecko"==fb.product}var gb=Ya,x=Za,hb=ab,y=$a,ib=db();bb=-1!=(ib&&ib.platform||"").indexOf("Mac");var jb=!!db()&&-1!=(db().appVersion||"").indexOf("X11"),kb;
a:{var lb="",mb;if(gb&&p.opera)var nb=p.opera.version,lb="function"==typeof nb?nb():nb;else if(hb?mb=/rv\:([^\);]+)(\)|;)/:x?mb=/MSIE\s+([^\);]+)(\)|;)/:y&&(mb=/WebKit\/(\S+)/),mb)var ob=mb.exec(cb()),lb=ob?ob[1]:"";if(x){var pb,qb=p.document;pb=qb?qb.documentMode:h;if(pb>parseFloat(lb)){kb=String(pb);break a}}kb=lb}var rb={};
function z(a){var b;if(!(b=rb[a])){b=0;for(var c=Aa(String(kb)).split("."),d=Aa(String(a)).split("."),f=Math.max(c.length,d.length),g=0;0==b&&g<f;g++){var i=c[g]||"",n=d[g]||"",q=RegExp("(\\d*)(\\D*)","g"),t=RegExp("(\\d*)(\\D*)","g");do{var A=q.exec(i)||["","",""],J=t.exec(n)||["","",""];if(0==A[0].length&&0==J[0].length)break;b=((0==A[1].length?0:parseInt(A[1],10))<(0==J[1].length?0:parseInt(J[1],10))?-1:(0==A[1].length?0:parseInt(A[1],10))>(0==J[1].length?0:parseInt(J[1],10))?1:0)||((0==A[2].length)<
(0==J[2].length)?-1:(0==A[2].length)>(0==J[2].length)?1:0)||(A[2]<J[2]?-1:A[2]>J[2]?1:0)}while(0==b)}b=rb[a]=0<=b}return b}var sb={};function tb(a){return sb[a]||(sb[a]=x&&!!document.documentMode&&document.documentMode>=a)};var ub,vb=!x||tb(9),wb=!hb&&!x||x&&tb(9)||hb&&z("1.9.1"),xb=x&&!z("9"),yb=x||gb||y;function zb(a){a=a.className;return r(a)&&a.match(/\S+/g)||[]}function B(a,b){for(var c=zb(a),d=Xa(arguments,1),f=c.length+d.length,g=c,i=0;i<d.length;i++)Qa(g,d[i])||g.push(d[i]);a.className=c.join(" ");return c.length==f}function C(a,b){var c=zb(a),d=Xa(arguments,1),f,g=d;f=La(c,function(a){return!Qa(g,a)});a.className=f.join(" ");return f.length==c.length-d.length}function D(a,b){return Qa(zb(a),b)}function E(a,b,c){c?B(a,b):C(a,b)}function Ab(a,b){var c=!D(a,b);E(a,b,c);return c};function Bb(a,b){this.x=ga(a)?a:0;this.y=ga(b)?b:0}Bb.prototype.clone=function(){return new Bb(this.x,this.y)};function Cb(a,b){this.width=a;this.height=b}Cb.prototype.clone=function(){return new Cb(this.width,this.height)};Cb.prototype.ceil=function(){this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};Cb.prototype.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};Cb.prototype.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};function Db(a,b,c){for(var d in a)b.call(c,a[d],d,a)}function Eb(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function Fb(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}function Gb(a){for(var b in a)return l;return j}function Hb(a,b){b in a&&delete a[b]}function Ib(a,b,c){b in a&&e(Error('The object already contains the key "'+b+'"'));a[b]=c}var Jb="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");
function Kb(a,b){for(var c,d,f=1;f<arguments.length;f++){d=arguments[f];for(c in d)a[c]=d[c];for(var g=0;g<Jb.length;g++)c=Jb[g],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};function Lb(a){return a?new Mb(Nb(a)):ub||(ub=new Mb)}function F(a){return r(a)?document.getElementById(a):a}function Ob(a,b){var c=b||document;return c.querySelectorAll&&c.querySelector?c.querySelectorAll("."+a):c.getElementsByClassName?c.getElementsByClassName(a):Pb("*",a,b)}function G(a,b){var c=b||document,d=k;return(d=c.querySelectorAll&&c.querySelector?c.querySelector("."+a):Ob(a,b)[0])||k}
function Pb(a,b,c){var d=document,c=c||d,a=a&&"*"!=a?a.toUpperCase():"";if(c.querySelectorAll&&c.querySelector&&(a||b))return c.querySelectorAll(a+(b?"."+b:""));if(b&&c.getElementsByClassName){c=c.getElementsByClassName(b);if(a){for(var d={},f=0,g=0,i;i=c[g];g++)a==i.nodeName&&(d[f++]=i);d.length=f;return d}return c}c=c.getElementsByTagName(a||"*");if(b){d={};for(g=f=0;i=c[g];g++)a=i.className,"function"==typeof a.split&&Qa(a.split(/\s+/),b)&&(d[f++]=i);d.length=f;return d}return c}
var Qb={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function H(){var a=window.document,a="CSS1Compat"==a.compatMode?a.documentElement:a.body;return new Cb(a.clientWidth,a.clientHeight)}function I(a,b,c){return Rb(document,arguments)}
function Rb(a,b){var c=b[0],d=b[1];if(!vb&&d&&(d.name||d.type)){c=["<",c];d.name&&c.push(' name="',Ba(d.name),'"');if(d.type){c.push(' type="',Ba(d.type),'"');var f={};Kb(f,d);delete f.type;d=f}c.push(">");c=c.join("")}var g=a.createElement(c);d&&(r(d)?g.className=d:na(d)?B.apply(k,[g].concat(d)):Db(d,function(a,b){"style"==b?g.style.cssText=a:"class"==b?g.className=a:"for"==b?g.htmlFor=a:b in Qb?g.setAttribute(Qb[b],a):0==b.lastIndexOf("aria-",0)||0==b.lastIndexOf("data-",0)?g.setAttribute(b,a):
g[b]=a}));if(2<b.length){d=function(b){b&&g.appendChild(r(b)?a.createTextNode(b):b)};for(c=2;c<b.length;c++)if(f=b[c],oa(f)&&!(ra(f)&&0<f.nodeType)){var i=w,n;a:{if((n=f)&&"number"==typeof n.length){if(ra(n)){n="function"==typeof n.item||"string"==typeof n.item;break a}if(qa(n)){n="function"==typeof n.item;break a}}n=l}i(n?Ua(f):f,d)}else d(f)}return g}function Sb(a){for(var b;b=a.firstChild;)a.removeChild(b)}function Tb(a,b,c){a.insertBefore(b,a.childNodes[c]||k)}
function Ub(a){a&&a.parentNode&&a.parentNode.removeChild(a)}function Vb(a){return wb&&a.children!=h?a.children:La(a.childNodes,function(a){return 1==a.nodeType})}function Wb(a){return a.nextElementSibling!=h?a.nextElementSibling:Xb(a.nextSibling,j)}function Xb(a,b){for(;a&&1!=a.nodeType;)a=b?a.nextSibling:a.previousSibling;return a}function Zb(a){if(yb)return a.parentElement;a=a.parentNode;return ra(a)&&1==a.nodeType?a:k}
function $b(a,b){if(a.contains&&1==b.nodeType)return a==b||a.contains(b);if("undefined"!=typeof a.compareDocumentPosition)return a==b||Boolean(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a}function Nb(a){return 9==a.nodeType?a:a.ownerDocument||a.document}
function ac(a,b){if("textContent"in a)a.textContent=b;else if(a.firstChild&&3==a.firstChild.nodeType){for(;a.lastChild!=a.firstChild;)a.removeChild(a.lastChild);a.firstChild.data=b}else Sb(a),a.appendChild(Nb(a).createTextNode(b))}var bc={SCRIPT:1,STYLE:1,HEAD:1,IFRAME:1,OBJECT:1},cc={IMG:" ",BR:"\n"};function dc(a){var b=a.getAttributeNode("tabindex");return b&&b.specified?(a=a.tabIndex,pa(a)&&0<=a&&32768>a):l}
function ec(a){if(xb&&"innerText"in a)a=a.innerText.replace(/(\r\n|\r|\n)/g,"\n");else{var b=[];fc(a,b,j);a=b.join("")}a=a.replace(/ \xAD /g," ").replace(/\xAD/g,"");a=a.replace(/\u200B/g,"");xb||(a=a.replace(/ +/g," "));" "!=a&&(a=a.replace(/^\s*/,""));return a}function gc(a){var b=[];fc(a,b,l);return b.join("")}
function fc(a,b,c){if(!(a.nodeName in bc))if(3==a.nodeType)c?b.push(String(a.nodeValue).replace(/(\r\n|\r|\n)/g,"")):b.push(a.nodeValue);else if(a.nodeName in cc)b.push(cc[a.nodeName]);else for(a=a.firstChild;a;)fc(a,b,c),a=a.nextSibling}function hc(a,b,c){if(!b&&!c)return k;b=b?b.toUpperCase():k;a:{for(var d=0;a;){if((!b||a.nodeName==b)&&(!c||D(a,c))){c=a;break a}a=a.parentNode;d++}c=k}return c}function Mb(a){this.aa=a||p.document||document}m=Mb.prototype;m.Ga=Lb;
m.b=function(a){return r(a)?this.aa.getElementById(a):a};m.I=function(a,b,c){return Rb(this.aa,arguments)};m.createElement=function(a){return this.aa.createElement(a)};m.createTextNode=function(a){return this.aa.createTextNode(a)};function ic(a){var b=a.aa,a=!y&&"CSS1Compat"==b.compatMode?b.documentElement:b.body,b=b.parentWindow||b.defaultView;return new Bb(b.pageXOffset||a.scrollLeft,b.pageYOffset||a.scrollTop)}m.appendChild=function(a,b){a.appendChild(b)};m.Yg=Vb;
function jc(a,b){return b.firstElementChild!=h?b.firstElementChild:Xb(b.firstChild,j)}m.contains=$b;x&&z(8);var kc={};function lc(a,b,c){a.innerHTML=b(c||kc,h,h)}function K(a,b){var c;a:if(c=(new Mb(h)||Lb()).createElement("DIV"),c.innerHTML=a(b||kc,h,h),1==c.childNodes.length){var d=c.firstChild;if(1==d.nodeType){c=d;break a}}return c}function L(a){return"object"===typeof a&&a&&0===a.il?a.content:String(a).replace(mc,nc)}
var oc={"\x00":"&#0;",'"':"&quot;","&":"&amp;","'":"&#39;","<":"&lt;",">":"&gt;","\t":"&#9;","\n":"&#10;","\x0B":"&#11;","\f":"&#12;","\r":"&#13;"," ":"&#32;","-":"&#45;","/":"&#47;","=":"&#61;","`":"&#96;","\u0085":"&#133;","\u00a0":"&#160;","\u2028":"&#8232;","\u2029":"&#8233;"};function nc(a){return oc[a]}var mc=/[\x00\x22\x26\x27\x3c\x3e]/g;function M(){0!=pc&&(this.jl=Error().stack,qc[sa(this)]=this)}var pc=0,qc={};M.prototype.ae=l;M.prototype.$=function(){if(!this.ae&&(this.ae=j,this.k(),0!=pc)){var a=sa(this);delete qc[a]}};M.prototype.k=function(){this.Ki&&rc.apply(k,this.Ki);if(this.Ph)for(;this.Ph.length;)this.Ph.shift()()};function sc(a){a&&"function"==typeof a.$&&a.$()}function rc(a){for(var b=0,c=arguments.length;b<c;++b){var d=arguments[b];oa(d)?rc.apply(k,d):sc(d)}};var tc=!x||tb(9),uc=!x||tb(9),vc=x&&!z("9");!y||z("528");hb&&z("1.9b")||x&&z("8")||gb&&z("9.5")||y&&z("528");hb&&!z("8")||x&&z("9");function wc(a,b){this.type=a;this.currentTarget=this.target=b}m=wc.prototype;m.k=aa();m.$=aa();m.dc=l;m.defaultPrevented=l;m.Be=j;m.stopPropagation=function(){this.dc=j};m.preventDefault=function(){this.defaultPrevented=j;this.Be=l};function xc(a){a.preventDefault()};function yc(a){yc[" "](a);return a}yc[" "]=ia;function zc(a,b){a&&this.init(a,b)}v(zc,wc);var Ac=[1,4,2];m=zc.prototype;m.target=k;m.relatedTarget=k;m.offsetX=0;m.offsetY=0;m.clientX=0;m.clientY=0;m.screenX=0;m.screenY=0;m.button=0;m.keyCode=0;m.charCode=0;m.ctrlKey=l;m.altKey=l;m.shiftKey=l;m.metaKey=l;m.Jf=l;m.ta=k;
m.init=function(a,b){var c=this.type=a.type;wc.call(this,c);this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;if(d){if(hb){var f;a:{try{yc(d.nodeName);f=j;break a}catch(g){}f=l}f||(d=k)}}else"mouseover"==c?d=a.fromElement:"mouseout"==c&&(d=a.toElement);this.relatedTarget=d;this.offsetX=y||a.offsetX!==h?a.offsetX:a.layerX;this.offsetY=y||a.offsetY!==h?a.offsetY:a.layerY;this.clientX=a.clientX!==h?a.clientX:a.pageX;this.clientY=a.clientY!==h?a.clientY:a.pageY;this.screenX=
a.screenX||0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||("keypress"==c?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.Jf=bb?a.metaKey:a.ctrlKey;this.state=a.state;this.ta=a;a.defaultPrevented&&this.preventDefault();delete this.dc};function Bc(a){return(tc?0==a.ta.button:"click"==a.type?j:!!(a.ta.button&Ac[0]))&&!(y&&bb&&a.ctrlKey)}
m.stopPropagation=function(){zc.d.stopPropagation.call(this);this.ta.stopPropagation?this.ta.stopPropagation():this.ta.cancelBubble=j};m.preventDefault=function(){zc.d.preventDefault.call(this);var a=this.ta;if(a.preventDefault)a.preventDefault();else if(a.returnValue=l,vc)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};m.k=aa();function Cc(){}var Dc=0;m=Cc.prototype;m.key=0;m.fc=l;m.Ve=l;m.init=function(a,b,c,d,f,g){qa(a)?this.th=j:a&&a.handleEvent&&qa(a.handleEvent)?this.th=l:e(Error("Invalid listener argument"));this.Hc=a;this.proxy=b;this.src=c;this.type=d;this.capture=!!f;this.le=g;this.Ve=l;this.key=++Dc;this.fc=l};m.handleEvent=function(a){return this.th?this.Hc.call(this.le||this.src,a):this.Hc.handleEvent.call(this.Hc,a)};var Ec={},Fc={},Gc={},Hc={};
function N(a,b,c,d,f){if(b){if(na(b)){for(var g=0;g<b.length;g++)N(a,b[g],c,d,f);return k}var d=!!d,i=Fc;b in i||(i[b]={R:0,za:0});i=i[b];d in i||(i[d]={R:0,za:0},i.R++);var i=i[d],n=sa(a),q;i.za++;if(i[n]){q=i[n];for(g=0;g<q.length;g++)if(i=q[g],i.Hc==c&&i.le==f){if(i.fc)break;return q[g].key}}else q=i[n]=[],i.R++;var t=Ic,A=uc?function(a){return t.call(A.src,A.key,a)}:function(a){a=t.call(A.src,A.key,a);if(!a)return a},g=A;g.src=a;i=new Cc;i.init(c,g,a,b,d,f);c=i.key;g.key=c;q.push(i);Ec[c]=i;Gc[n]||
(Gc[n]=[]);Gc[n].push(i);a.addEventListener?(a==p||!a.Lg)&&a.addEventListener(b,g,d):a.attachEvent(b in Hc?Hc[b]:Hc[b]="on"+b,g);return c}e(Error("Invalid event type"))}function Jc(a,b,c,d,f){if(na(b)){for(var g=0;g<b.length;g++)Jc(a,b[g],c,d,f);return k}a=N(a,b,c,d,f);Ec[a].Ve=j;return a}function Kc(a,b,c,d,f){if(na(b))for(var g=0;g<b.length;g++)Kc(a,b[g],c,d,f);else if(d=!!d,a=Lc(a,b,d))for(g=0;g<a.length;g++)if(a[g].Hc==c&&a[g].capture==d&&a[g].le==f){Mc(a[g].key);break}}
function Mc(a){if(!Ec[a])return l;var b=Ec[a];if(b.fc)return l;var c=b.src,d=b.type,f=b.proxy,g=b.capture;c.removeEventListener?(c==p||!c.Lg)&&c.removeEventListener(d,f,g):c.detachEvent&&c.detachEvent(d in Hc?Hc[d]:Hc[d]="on"+d,f);c=sa(c);Gc[c]&&(f=Gc[c],Ra(f,b),0==f.length&&delete Gc[c]);b.fc=j;if(b=Fc[d][g][c])b.Nh=j,Nc(d,g,c,b);delete Ec[a];return j}
function Nc(a,b,c,d){if(!d.re&&d.Nh){for(var f=0,g=0;f<d.length;f++)d[f].fc?d[f].proxy.src=k:(f!=g&&(d[g]=d[f]),g++);d.length=g;d.Nh=l;0==g&&(delete Fc[a][b][c],Fc[a][b].R--,0==Fc[a][b].R&&(delete Fc[a][b],Fc[a].R--),0==Fc[a].R&&delete Fc[a])}}function Lc(a,b,c){var d=Fc;return b in d&&(d=d[b],c in d&&(d=d[c],a=sa(a),d[a]))?d[a]:k}
function Oc(a,b,c,d,f){var g=1,b=sa(b);if(a[b]){a.za--;a=a[b];a.re?a.re++:a.re=1;try{for(var i=a.length,n=0;n<i;n++){var q=a[n];q&&!q.fc&&(g&=Pc(q,f)!==l)}}finally{a.re--,Nc(c,d,b,a)}}return Boolean(g)}function Pc(a,b){a.Ve&&Mc(a.key);return a.handleEvent(b)}
function Ic(a,b){if(!Ec[a])return j;var c=Ec[a],d=c.type,f=Fc;if(!(d in f))return j;var f=f[d],g,i;if(!uc){g=b||ha("window.event");var n=j in f,q=l in f;if(n){if(0>g.keyCode||g.returnValue!=h)return j;a:{var t=l;if(0==g.keyCode)try{g.keyCode=-1;break a}catch(A){t=j}if(t||g.returnValue==h)g.returnValue=j}}t=new zc;t.init(g,this);g=j;try{if(n){for(var J=[],la=t.currentTarget;la;la=la.parentNode)J.push(la);i=f[j];i.za=i.R;for(var ka=J.length-1;!t.dc&&0<=ka&&i.za;ka--)t.currentTarget=J[ka],g&=Oc(i,J[ka],
d,j,t);if(q){i=f[l];i.za=i.R;for(ka=0;!t.dc&&ka<J.length&&i.za;ka++)t.currentTarget=J[ka],g&=Oc(i,J[ka],d,l,t)}}else g=Pc(c,t)}finally{J&&(J.length=0)}return g}d=new zc(b,this);return g=Pc(c,d)};function Qc(){M.call(this)}v(Qc,M);m=Qc.prototype;m.Lg=j;m.xe=k;m.Wf=ba("xe");m.addEventListener=function(a,b,c,d){N(this,a,b,c,d)};m.removeEventListener=function(a,b,c,d){Kc(this,a,b,c,d)};
m.dispatchEvent=function(a){var b=a.type||a,c=Fc;if(b in c){if(r(a))a=new wc(a,this);else if(a instanceof wc)a.target=a.target||this;else{var d=a,a=new wc(b,this);Kb(a,d)}var d=1,f,c=c[b],b=j in c,g;if(b){f=[];for(g=this;g;g=g.xe)f.push(g);g=c[j];g.za=g.R;for(var i=f.length-1;!a.dc&&0<=i&&g.za;i--)a.currentTarget=f[i],d&=Oc(g,f[i],a.type,j,a)&&a.Be!=l}if(l in c)if(g=c[l],g.za=g.R,b)for(i=0;!a.dc&&i<f.length&&g.za;i++)a.currentTarget=f[i],d&=Oc(g,f[i],a.type,l,a)&&a.Be!=l;else for(f=this;!a.dc&&f&&
g.za;f=f.xe)a.currentTarget=f,d&=Oc(g,f,a.type,l,a)&&a.Be!=l;a=Boolean(d)}else a=j;return a};m.k=function(){Qc.d.k.call(this);var a,b=0,c=a==k;a=!!a;if(this==k)Db(Gc,function(d){for(var f=d.length-1;0<=f;f--){var g=d[f];if(c||a==g.capture)Mc(g.key),b++}});else{var d=sa(this);if(Gc[d])for(var d=Gc[d],f=d.length-1;0<=f;f--){var g=d[f];if(c||a==g.capture)Mc(g.key),b++}}this.xe=k};function Rc(a,b){M.call(this);this.L=a||1;this.Hd=b||Sc;this.Te=s(this.fg,this);this.wf=u()}v(Rc,Qc);Rc.prototype.enabled=l;var Sc=p.window;m=Rc.prototype;m.la=k;m.fg=function(){if(this.enabled){var a=u()-this.wf;0<a&&a<0.8*this.L?this.la=this.Hd.setTimeout(this.Te,this.L-a):(this.dispatchEvent(Tc),this.enabled&&(this.la=this.Hd.setTimeout(this.Te,this.L),this.wf=u()))}};m.start=function(){this.enabled=j;this.la||(this.la=this.Hd.setTimeout(this.Te,this.L),this.wf=u())};
m.stop=function(){this.enabled=l;this.la&&(this.Hd.clearTimeout(this.la),this.la=k)};m.k=function(){Rc.d.k.call(this);this.stop();delete this.Hd};var Tc="tick";function O(a,b,c){qa(a)?c&&(a=s(a,c)):a&&"function"==typeof a.handleEvent?a=s(a.handleEvent,a):e(Error("Invalid listener argument"));return 2147483647<b?-1:Sc.setTimeout(a,b||0)};function P(){M.call(this);this.Pa=[];this.Eb={}}v(P,M);m=P.prototype;m.yh=1;m.ze=0;m.subscribe=function(a,b,c){var d=this.Eb[a];d||(d=this.Eb[a]=[]);var f=this.yh;this.Pa[f]=a;this.Pa[f+1]=b;this.Pa[f+2]=c;this.yh=f+3;d.push(f);return f};function Uc(a,b,c){var d=a.subscribe(b,function(a){c.apply(h,arguments);this.kg(d)},a)}
m.kg=function(a){if(0!=this.ze)return this.wd||(this.wd=[]),this.wd.push(a),l;var b=this.Pa[a];if(b){var c=this.Eb[b];c&&Ra(c,a);delete this.Pa[a];delete this.Pa[a+1];delete this.Pa[a+2]}return!!b};m.c=function(a,b){var c=this.Eb[a];if(c){this.ze++;for(var d=Xa(arguments,1),f=0,g=c.length;f<g;f++){var i=c[f];this.Pa[i+1].apply(this.Pa[i+2],d)}this.ze--;if(this.wd&&0==this.ze)for(;c=this.wd.pop();)this.kg(c)}};
m.clear=function(a){if(a){var b=this.Eb[a];b&&(w(b,this.kg,this),delete this.Eb[a])}else this.Pa.length=0,this.Eb={}};m.k=function(){P.d.k.call(this);delete this.Pa;delete this.Eb;delete this.wd};function Vc(){P.call(this);this.Ud=new Rc(1E3);this.mi=new Rc(3E4);this.ni=[]}v(Vc,P);ja(Vc);Vc.prototype.init=function(){this.Ud.start();this.mi.start();N(this.mi,Tc,s(function(){w(this.ni,function(a){ac(a.element,Wc(a.time.getTime()))},this)},this))};function Xc(a,b,c){86400>(u()-b.getTime())/1E3&&a.ni.push({time:b,element:c})};function Q(){P.call(this);this.Zj=j;this.Tc=D(F("controller"),"sidebar-toggled");this.Zb=D(F("controller"),"guide-toggled");this.subscribe(Yc,ba("Tc"),this);this.subscribe(Zc,ba("Zb"),this);this.subscribe($c,ba("Zj"),this)}v(Q,P);ja(Q);function bd(a,b){var c=F("toggle-pending");ac(c,b);R(c,!!b)}var $c="play",Zc="toggle-guide",Yc="toggle-sidebar";var cd={Nk:["BC","AD"],Mk:["Before Christ","Anno Domini"],Pk:"JFMAMJJASOND".split(""),Wk:"JFMAMJJASOND".split(""),Ok:"January February March April May June July August September October November December".split(" "),Vk:"January February March April May June July August September October November December".split(" "),Sk:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),Yk:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),bl:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),
$k:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),Uk:"Sun Mon Tue Wed Thu Fri Sat".split(" "),Zk:"Sun Mon Tue Wed Thu Fri Sat".split(" "),Qk:"SMTWTFS".split(""),Xk:"SMTWTFS".split(""),Tk:["Q1","Q2","Q3","Q4"],Rk:["1st quarter","2nd quarter","3rd quarter","4th quarter"],Jk:["AM","PM"],Lk:["EEEE, MMMM d, y","MMMM d, y","MMM d, y","M/d/yy"],al:["h:mm:ss a zzzz","h:mm:ss a z","h:mm:ss a","h:mm a"],yi:6,cl:[5,6],zi:5};var dd=/^(\d{4})(?:(?:-?(\d{2})(?:-?(\d{2}))?)|(?:-?(\d{3}))|(?:-?W(\d{2})(?:-?([1-7]))?))?$/,ed=/^(\d{2})(?::?(\d{2})(?::?(\d{2})(\.\d+)?)?)?$/,fd=/Z|(?:([-+])(\d{2})(?::?(\d{2}))?)$/;
function gd(a){var b=new hd(2E3),a=Aa(a),a=a.split(-1==a.indexOf("T")?" ":"T"),c;var d=a[0].match(dd);if(d){var f=Number(d[2]),g=Number(d[3]),i=Number(d[4]);c=Number(d[5]);var n=Number(d[6])||1;b.setFullYear(Number(d[1]));i?(b.setDate(1),b.setMonth(0),b.add(new id(jd,i-1))):c?(b.setMonth(0),b.setDate(1),d=b.getDay()||7,b.add(new id(jd,(4>=d?1-d:8-d)+(Number(n)+7*(Number(c)-1))-1))):(f&&(b.setDate(1),b.setMonth(f-1)),g&&b.setDate(g));c=j}else c=l;if(c&&!(c=2>a.length))a=a[1],c=a.match(fd),n=0,c&&("Z"!=
c[0]&&(n=60*c[2]+Number(c[3]),n*="-"==c[1]?1:-1),n-=b.getTimezoneOffset(),a=a.substr(0,a.length-c[0].length)),(c=a.match(ed))?(b.setHours(Number(c[1])),b.setMinutes(Number(c[2])||0),b.setSeconds(Number(c[3])||0),b.setMilliseconds(c[4]?1E3*c[4]:0),0!=n&&b.setTime(b.getTime()+6E4*n),c=j):c=l;return c?b:k}
function id(a,b,c,d,f,g){r(a)?(this.Ta=a==kd?b:0,this.Ja=a==ld?b:0,this.Ea=a==jd?b:0,this.va=a==md?b:0,this.wa=a==nd?b:0,this.Aa=a==od?b:0):(this.Ta=a||0,this.Ja=b||0,this.Ea=c||0,this.va=d||0,this.wa=f||0,this.Aa=g||0)}
id.prototype.Id=function(a){var b=Math.min(this.Ta,this.Ja,this.Ea,this.va,this.wa,this.Aa),c=Math.max(this.Ta,this.Ja,this.Ea,this.va,this.wa,this.Aa);if(0>b&&0<c)return k;if(!a&&0==b&&0==c)return"PT0S";c=[];0>b&&c.push("-");c.push("P");(this.Ta||a)&&c.push(Math.abs(this.Ta)+"Y");(this.Ja||a)&&c.push(Math.abs(this.Ja)+"M");(this.Ea||a)&&c.push(Math.abs(this.Ea)+"D");if(this.va||this.wa||this.Aa||a)c.push("T"),(this.va||a)&&c.push(Math.abs(this.va)+"H"),(this.wa||a)&&c.push(Math.abs(this.wa)+"M"),
(this.Aa||a)&&c.push(Math.abs(this.Aa)+"S");return c.join("")};id.prototype.clone=function(){return new id(this.Ta,this.Ja,this.Ea,this.va,this.wa,this.Aa)};var kd="y",ld="m",jd="d",md="h",nd="n",od="s";id.prototype.add=function(a){this.Ta+=a.Ta;this.Ja+=a.Ja;this.Ea+=a.Ea;this.va+=a.va;this.wa+=a.wa;this.Aa+=a.Aa};
function pd(a,b,c){pa(a)?(this.q=new Date(a,b||0,c||1),qd(this,c||1)):ra(a)?(this.q=new Date(a.getFullYear(),a.getMonth(),a.getDate()),qd(this,a.getDate())):(this.q=new Date(u()),this.q.setHours(0),this.q.setMinutes(0),this.q.setSeconds(0),this.q.setMilliseconds(0))}m=pd.prototype;m.ee=cd.yi;m.fe=cd.zi;m.clone=function(){var a=new pd(this.q);a.ee=this.ee;a.fe=this.fe;return a};m.getFullYear=function(){return this.q.getFullYear()};m.getYear=function(){return this.getFullYear()};m.getMonth=function(){return this.q.getMonth()};
m.getDate=function(){return this.q.getDate()};m.getTime=function(){return this.q.getTime()};m.getDay=function(){return this.q.getDay()};m.getUTCHours=function(){return this.q.getUTCHours()};m.getTimezoneOffset=function(){return this.q.getTimezoneOffset()};function rd(a){a=a.getTimezoneOffset();if(0==a)a="Z";else var b=Math.abs(a)/60,c=Math.floor(b),b=60*(b-c),a=(0<a?"-":"+")+Ha(c)+":"+Ha(b);return a}m.set=function(a){this.q=new Date(a.getFullYear(),a.getMonth(),a.getDate())};m.setFullYear=function(a){this.q.setFullYear(a)};
m.setMonth=function(a){this.q.setMonth(a)};m.setDate=function(a){this.q.setDate(a)};m.setTime=function(a){this.q.setTime(a)};
m.add=function(a){if(a.Ta||a.Ja){var b=this.getMonth()+a.Ja+12*a.Ta,c=this.getYear()+Math.floor(b/12),b=b%12;0>b&&(b+=12);var d;a:{switch(b){case 1:d=0==c%4&&(0!=c%100||0==c%400)?29:28;break a;case 5:case 8:case 10:case 3:d=30;break a}d=31}d=Math.min(d,this.getDate());this.setDate(1);this.setFullYear(c);this.setMonth(b);this.setDate(d)}a.Ea&&(a=new Date((new Date(this.getYear(),this.getMonth(),this.getDate(),12)).getTime()+864E5*a.Ea),this.setDate(1),this.setFullYear(a.getFullYear()),this.setMonth(a.getMonth()),
this.setDate(a.getDate()),qd(this,a.getDate()))};m.Id=function(a,b){return[this.getFullYear(),Ha(this.getMonth()+1),Ha(this.getDate())].join(a?"-":"")+(b?rd(this):"")};m.toString=function(){return this.Id()};function qd(a,b){a.getDate()!=b&&a.q.setUTCHours(a.q.getUTCHours()+(a.getDate()<b?1:-1))}m.valueOf=function(){return this.q.valueOf()};function hd(a,b,c,d,f,g,i){this.q=pa(a)?new Date(a,b||0,c||1,d||0,f||0,g||0,i||0):new Date(a?a.getTime():u())}v(hd,pd);m=hd.prototype;m.getHours=function(){return this.q.getHours()};
m.getMinutes=function(){return this.q.getMinutes()};m.getSeconds=function(){return this.q.getSeconds()};m.getUTCHours=function(){return this.q.getUTCHours()};m.setHours=function(a){this.q.setHours(a)};m.setMinutes=function(a){this.q.setMinutes(a)};m.setSeconds=function(a){this.q.setSeconds(a)};m.setMilliseconds=function(a){this.q.setMilliseconds(a)};m.setUTCHours=function(a){this.q.setUTCHours(a)};
m.add=function(a){pd.prototype.add.call(this,a);a.va&&this.setHours(this.q.getHours()+a.va);a.wa&&this.setMinutes(this.q.getMinutes()+a.wa);a.Aa&&this.setSeconds(this.q.getSeconds()+a.Aa)};m.Id=function(a,b){var c=pd.prototype.Id.call(this,a);return a?c+" "+Ha(this.getHours())+":"+Ha(this.getMinutes())+":"+Ha(this.getSeconds())+(b?rd(this):""):c+"T"+Ha(this.getHours())+Ha(this.getMinutes())+Ha(this.getSeconds())+(b?rd(this):"")};m.toString=function(){return this.Id()};
m.clone=function(){var a=new hd(this.q);a.ee=this.ee;a.fe=this.fe;return a};function sd(a){M.call(this);this.Ha=a;this.N=[]}v(sd,M);var td=[];function S(a,b,c,d,f){na(c)||(td[0]=c,c=td);for(var g=0;g<c.length;g++){var i=N(b,c[g],d||a,f||l,a.Ha||a);a.N.push(i)}return a}function ud(a,b,c,d,f,g){if(na(c))for(var i=0;i<c.length;i++)ud(a,b,c[i],d,f,g);else b=Jc(b,c,d||a,f,g||a.Ha||a),a.N.push(b)}
function vd(a,b,c,d,f,g){if(na(c))for(var i=0;i<c.length;i++)vd(a,b,c[i],d,f,g);else{a:{d=d||a;g=g||a.Ha||a;f=!!f;if(b=Lc(b,c,f))for(c=0;c<b.length;c++)if(!b[c].fc&&b[c].Hc==d&&b[c].capture==f&&b[c].le==g){b=b[c];break a}b=k}b&&(b=b.key,Mc(b),Ra(a.N,b))}return a}function wd(a){w(a.N,Mc);a.N.length=0}sd.prototype.k=function(){sd.d.k.call(this);wd(this)};sd.prototype.handleEvent=function(){e(Error("EventHandler.handleEvent not implemented"))};function xd(a,b,c,d){this.top=a;this.right=b;this.bottom=c;this.left=d}xd.prototype.clone=function(){return new xd(this.top,this.right,this.bottom,this.left)};xd.prototype.contains=function(a){return!this||!a?l:a instanceof xd?a.left>=this.left&&a.right<=this.right&&a.top>=this.top&&a.bottom<=this.bottom:a.x>=this.left&&a.x<=this.right&&a.y>=this.top&&a.y<=this.bottom};function yd(a,b,c,d){this.left=a;this.top=b;this.width=c;this.height=d}yd.prototype.clone=function(){return new yd(this.left,this.top,this.width,this.height)};yd.prototype.contains=function(a){return a instanceof yd?this.left<=a.left&&this.left+this.width>=a.left+a.width&&this.top<=a.top&&this.top+this.height>=a.top+a.height:a.x>=this.left&&a.x<=this.left+this.width&&a.y>=this.top&&a.y<=this.top+this.height};function zd(a,b,c){r(b)?Ad(a,c,b):Db(b,xa(Ad,a))}function Ad(a,b,c){a.style[Ia(c)]=b}function Bd(a,b){var c=Nb(a);return c.defaultView&&c.defaultView.getComputedStyle&&(c=c.defaultView.getComputedStyle(a,k))?c[b]||c.getPropertyValue(b)||"":""}function Cd(a,b){return a.currentStyle?a.currentStyle[b]:k}function Dd(a,b){return Bd(a,b)||Cd(a,b)||a.style&&a.style[b]}function Ed(a,b,c){var d,f=hb&&(bb||jb)&&z("1.9");b instanceof Bb?(d=b.x,b=b.y):(d=b,b=c);a.style.left=Fd(d,f);a.style.top=Fd(b,f)}
function Gd(a){return new Bb(a.offsetLeft,a.offsetTop)}function Hd(a){var b=a.getBoundingClientRect();x&&(a=a.ownerDocument,b.left-=a.documentElement.clientLeft+a.body.clientLeft,b.top-=a.documentElement.clientTop+a.body.clientTop);return b}
function Id(a){if(x&&!tb(8))return a.offsetParent;for(var b=Nb(a),c=Dd(a,"position"),d="fixed"==c||"absolute"==c,a=a.parentNode;a&&a!=b;a=a.parentNode)if(c=Dd(a,"position"),d=d&&"static"==c&&a!=b.documentElement&&a!=b.body,!d&&(a.scrollWidth>a.clientWidth||a.scrollHeight>a.clientHeight||"fixed"==c||"absolute"==c||"relative"==c))return a;return k}
function Jd(a){var b,c=Nb(a),d=Dd(a,"position"),f=hb&&c.getBoxObjectFor&&!a.getBoundingClientRect&&"absolute"==d&&(b=c.getBoxObjectFor(a))&&(0>b.screenX||0>b.screenY),g=new Bb(0,0),i;b=c?Nb(c):document;if(i=x)if(i=!tb(9))i="CSS1Compat"!=Lb(b).aa.compatMode;i=i?b.body:b.documentElement;if(a==i)return g;if(a.getBoundingClientRect)b=Hd(a),a=ic(Lb(c)),g.x=b.left+a.x,g.y=b.top+a.y;else if(c.getBoxObjectFor&&!f)b=c.getBoxObjectFor(a),a=c.getBoxObjectFor(i),g.x=b.screenX-a.screenX,g.y=b.screenY-a.screenY;
else{f=a;do{g.x+=f.offsetLeft;g.y+=f.offsetTop;f!=a&&(g.x+=f.clientLeft||0,g.y+=f.clientTop||0);if(y&&"fixed"==Dd(f,"position")){g.x+=c.body.scrollLeft;g.y+=c.body.scrollTop;break}f=f.offsetParent}while(f&&f!=a);if(gb||y&&"absolute"==d)g.y-=c.body.offsetTop;for(f=a;(f=Id(f))&&f!=c.body&&f!=i;)if(g.x-=f.scrollLeft,!gb||"TR"!=f.tagName)g.y-=f.scrollTop}return g}function Kd(a,b){var c,d=Jd(a);b instanceof Bb&&(c=b.y,b=b.x);Ed(a,a.offsetLeft+(b-d.x),a.offsetTop+(c-d.y))}
function Fd(a,b){"number"==typeof a&&(a=(b?Math.round(a):a)+"px");return a}function Ld(a,b){a.style.height=Fd(b,j)}function Md(a,b){a.style.width=Fd(b,j)}function T(a){if("none"!=Dd(a,"display"))return Nd(a);var b=a.style,c=b.display,d=b.visibility,f=b.position;b.visibility="hidden";b.position="absolute";b.display="inline";a=Nd(a);b.display=c;b.position=f;b.visibility=d;return a}
function Nd(a){var b=a.offsetWidth,c=a.offsetHeight,d=y&&!b&&!c;return(!ga(b)||d)&&a.getBoundingClientRect?(a=Hd(a),new Cb(a.right-a.left,a.bottom-a.top)):new Cb(b,c)}function Od(a){var b=Jd(a),a=T(a);return new yd(b.x,b.y,a.width,a.height)}function Pd(a,b){var c=a.style;"opacity"in c?c.opacity=b:"MozOpacity"in c?c.MozOpacity=b:"filter"in c&&(c.filter=""===b?"":"alpha(opacity="+100*b+")")}function R(a,b){a.style.display=b?"":"none"}function Qd(a){return"rtl"==Dd(a,"direction")}
var Rd=hb?"MozUserSelect":y?"WebkitUserSelect":k;function Sd(a,b){if(/^\d+px?$/.test(b))return parseInt(b,10);var c=a.style.left,d=a.runtimeStyle.left;a.runtimeStyle.left=a.currentStyle.left;a.style.left=b;var f=a.style.pixelLeft;a.style.left=c;a.runtimeStyle.left=d;return f}
function Td(a,b){if(x){var c=Sd(a,Cd(a,b+"Left")),d=Sd(a,Cd(a,b+"Right")),f=Sd(a,Cd(a,b+"Top")),g=Sd(a,Cd(a,b+"Bottom"));return new xd(f,d,g,c)}c=Bd(a,b+"Left");d=Bd(a,b+"Right");f=Bd(a,b+"Top");g=Bd(a,b+"Bottom");return new xd(parseFloat(f),parseFloat(d),parseFloat(g),parseFloat(c))}var Ud={thin:2,medium:4,thick:6};function Vd(a,b){if("none"==Cd(a,b+"Style"))return 0;var c=Cd(a,b+"Width");return c in Ud?Ud[c]:Sd(a,c)}
function Wd(a){if(x){var b=Vd(a,"borderLeft"),c=Vd(a,"borderRight"),d=Vd(a,"borderTop"),a=Vd(a,"borderBottom");return new xd(d,c,a,b)}b=Bd(a,"borderLeftWidth");c=Bd(a,"borderRightWidth");d=Bd(a,"borderTopWidth");a=Bd(a,"borderBottomWidth");return new xd(parseFloat(d),parseFloat(c),parseFloat(a),parseFloat(b))};function Xd(a,b,c){M.call(this);this.target=a;this.handle=b||a;this.Ch=c||new yd(NaN,NaN,NaN,NaN);this.aa=Nb(a);this.r=new sd(this);N(this.handle,["touchstart","mousedown"],this.jc,l,this)}v(Xd,Qc);var Yd=x||hb&&z("1.9.3");m=Xd.prototype;m.clientX=0;m.clientY=0;m.screenX=0;m.screenY=0;m.gi=0;m.hi=0;m.vc=0;m.wc=0;m.ef=j;m.Tb=l;m.nf=0;m.vj=0;m.oj=l;m.Md=l;m.p=ca("r");m.Vf=function(a){this.nf=Math.pow(a,2)};m.di=ba("Ce");m.Na=ba("ef");
m.k=function(){Xd.d.k.call(this);Kc(this.handle,["touchstart","mousedown"],this.jc,l,this);wd(this.r);Yd&&this.aa.releaseCapture();this.r=this.handle=this.target=k};function Zd(a){ga(a.Ma)||(a.Ma=Qd(a.target));return a.Ma}
m.jc=function(a){var b="mousedown"==a.type;if(this.ef&&!this.Tb&&(!b||Bc(a))){$d(a);if(0==this.nf)if(this.dispatchEvent(new ae("start",this,a.clientX,a.clientY,a)))this.Tb=j,a.preventDefault();else return;else a.preventDefault();var b=this.aa,c=b.documentElement,d=!Yd;S(this.r,b,["touchmove","mousemove"],this.lj,d);S(this.r,b,["touchend","mouseup"],this.Ub,d);Yd?(c.setCapture(l),S(this.r,c,"losecapture",this.Ub)):S(this.r,b?b.parentWindow||b.defaultView:window,"blur",this.Ub);x&&this.oj&&S(this.r,
b,"dragstart",xc);this.Ce&&S(this.r,this.Ce,"scroll",this.Th,d);this.clientX=this.gi=a.clientX;this.clientY=this.hi=a.clientY;this.screenX=a.screenX;this.screenY=a.screenY;this.Md?(a=this.target,b=a.offsetLeft,c=a.offsetParent,!c&&"fixed"==Dd(a,"position")&&(c=Nb(a).documentElement),c?(hb?(d=Wd(c),b+=d.left):tb(8)&&(d=Wd(c),b-=d.left),a=Qd(c)?c.clientWidth-(b+a.offsetWidth):b):a=b):a=this.target.offsetLeft;this.vc=a;this.wc=this.target.offsetTop;this.Hf=ic(Lb(this.aa));this.vj=u()}else this.dispatchEvent("earlycancel")};
m.Ub=function(a,b){wd(this.r);Yd&&this.aa.releaseCapture();if(this.Tb){$d(a);this.Tb=l;var c=be(this,this.vc),d=ce(this,this.wc);this.dispatchEvent(new ae("end",this,a.clientX,a.clientY,a,c,d,b||"touchcancel"==a.type))}else this.dispatchEvent("earlycancel");("touchend"==a.type||"touchcancel"==a.type)&&a.preventDefault()};
function $d(a){var b=a.type;"touchstart"==b||"touchmove"==b?a.init(a.ta.targetTouches[0],a.currentTarget):("touchend"==b||"touchcancel"==b)&&a.init(a.ta.changedTouches[0],a.currentTarget)}
m.lj=function(a){if(this.ef){$d(a);var b=(this.Md&&Zd(this)?-1:1)*(a.clientX-this.clientX),c=a.clientY-this.clientY;this.clientX=a.clientX;this.clientY=a.clientY;this.screenX=a.screenX;this.screenY=a.screenY;if(!this.Tb){var d=this.gi-this.clientX,f=this.hi-this.clientY;if(d*d+f*f>this.nf)if(this.dispatchEvent(new ae("start",this,a.clientX,a.clientY,a)))this.Tb=j;else{this.ae||this.Ub(a);return}}c=de(this,b,c);b=c.x;c=c.y;this.Tb&&this.dispatchEvent(new ae("beforedrag",this,a.clientX,a.clientY,a,
b,c))&&(ee(this,a,b,c),a.preventDefault())}};function de(a,b,c){var d=ic(Lb(a.aa)),b=b+(d.x-a.Hf.x),c=c+(d.y-a.Hf.y);a.Hf=d;a.vc+=b;a.wc+=c;b=be(a,a.vc);a=ce(a,a.wc);return new Bb(b,a)}m.Th=function(a){var b=de(this,0,0);a.clientX=this.clientX;a.clientY=this.clientY;ee(this,a,b.x,b.y)};function ee(a,b,c,d){a.gd(c,d);a.dispatchEvent(new ae("drag",a,b.clientX,b.clientY,b,c,d))}
function be(a,b){var c=a.Ch,d=!isNaN(c.left)?c.left:k,c=!isNaN(c.width)?c.width:0;return Math.min(d!=k?d+c:Infinity,Math.max(d!=k?d:-Infinity,b))}function ce(a,b){var c=a.Ch,d=!isNaN(c.top)?c.top:k,c=!isNaN(c.height)?c.height:0;return Math.min(d!=k?d+c:Infinity,Math.max(d!=k?d:-Infinity,b))}m.gd=function(a,b){this.Md&&Zd(this)?this.target.style.right=a+"px":this.target.style.left=a+"px";this.target.style.top=b+"px"};
function ae(a,b,c,d,f,g,i,n){wc.call(this,a);this.clientX=c;this.clientY=d;this.Ue=f;this.left=ga(g)?g:b.vc;this.top=ga(i)?i:b.wc;this.Ni=b;this.Li=!!n}v(ae,wc);function fe(){M.call(this);this.i=ge;this.kd=this.startTime=k}v(fe,Qc);var ge=0;fe.prototype.yb=function(){this.ma("begin")};fe.prototype.zb=function(){this.ma("end")};fe.prototype.ma=function(a){this.dispatchEvent(a)};function he(a,b,c){M.call(this);this.vb=a;this.L=b||0;this.Ha=c;this.We=s(this.hd,this)}v(he,M);m=he.prototype;m.ia=0;m.k=function(){he.d.k.call(this);this.stop();delete this.vb;delete this.Ha};m.start=function(a){this.stop();this.ia=O(this.We,ga(a)?a:this.L)};m.stop=function(){this.ac()&&Sc.clearTimeout(this.ia);this.ia=0};m.gf=function(){this.stop();this.hd()};m.ac=function(){return 0!=this.ia};m.hd=function(){this.ia=0;this.vb&&this.vb.call(this.Ha)};var ie;ie=da(k);var je={},ke=k;function le(a){a=sa(a);delete je[a];Gb(je)&&ke&&ke.stop()}function me(){ke||(ke=new he(function(){var a=u();Db(je,function(c){ne(c,a)});Gb(je)||me()},20));var a=ke;a.ac()||a.start()};function oe(a,b,c,d){fe.call(this);(!na(a)||!na(b))&&e(Error("Start and end parameters must be arrays"));a.length!=b.length&&e(Error("Start and end points must be the same length"));this.Fd=a;this.Pi=b;this.duration=c;this.pg=d;this.coords=[];this.Md=l}v(oe,fe);m=oe.prototype;m.Wg=0;m.ya=0;m.vf=k;
m.play=function(a){if(a||this.i==ge)this.ya=0,this.coords=this.Fd;else if(1==this.i)return l;le(this);this.startTime=a=u();-1==this.i&&(this.startTime-=this.duration*this.ya);this.kd=this.startTime+this.duration;this.vf=this.startTime;this.ya||this.yb();this.ma("play");-1==this.i&&this.ma("resume");this.i=1;var b=sa(this);b in je||(je[b]=this);me();ne(this,a);return j};m.stop=function(a){le(this);this.i=ge;a&&(this.ya=1);pe(this,this.ya);this.ma("stop");this.zb()};m.he=ca("ya");
m.k=function(){this.i==ge||this.stop(l);this.ma("destroy");oe.d.k.call(this)};function ne(a,b){a.ya=(b-a.startTime)/(a.kd-a.startTime);1<=a.ya&&(a.ya=1);a.Wg=1E3/(b-a.vf);a.vf=b;pe(a,a.ya);1==a.ya?(a.i=ge,le(a),a.ma("finish"),a.zb()):1==a.i&&a.Df()}function pe(a,b){qa(a.pg)&&(b=a.pg(b));a.coords=Array(a.Fd.length);for(var c=0;c<a.Fd.length;c++)a.coords[c]=(a.Pi[c]-a.Fd[c])*b+a.Fd[c]}m.Df=function(){this.ma("animate")};m.ma=function(a){this.dispatchEvent(new qe(a,this))};
function qe(a,b){wc.call(this,a);this.coords=b.coords;this.x=b.coords[0];this.y=b.coords[1];this.Pl=b.coords[2];this.duration=b.duration;this.ya=b.he();this.wl=b.Wg;this.state=b.i;this.el=b}v(qe,wc);function re(a,b,c,d,f){oe.call(this,b,c,d,f);this.element=a}v(re,oe);m=re.prototype;m.Ld=ia;m.vh=function(){ga(this.Ma)||(this.Ma=Qd(this.element));return this.Ma};m.Df=function(){this.Ld();re.d.Df.call(this)};m.zb=function(){this.Ld();re.d.zb.call(this)};m.yb=function(){this.Ld();re.d.yb.call(this)};function se(a,b,c,d,f){(2!=b.length||2!=c.length)&&e(Error("Start and end points must be 2D"));re.apply(this,arguments)}v(se,re);
se.prototype.Ld=function(){if(this.Md){var a=this.element,b=Math.round(this.coords[0]),b=Math.max(b,0);a.scrollLeft=Qd(a)?hb?-b:!x||!z("8")?a.scrollWidth-b-a.clientWidth:b:b}else this.element.scrollLeft=Math.round(this.coords[0]);this.element.scrollTop=Math.round(this.coords[1])};function te(a,b,c,d,f){pa(b)&&(b=[b]);pa(c)&&(c=[c]);re.call(this,a,b,c,d,f);(1!=b.length||1!=c.length)&&e(Error("Start and end points must be 1D"))}v(te,re);te.prototype.Ld=function(){Pd(this.element,this.coords[0])};
te.prototype.show=function(){this.element.style.display=""};te.prototype.hide=function(){this.element.style.display="none"};function ue(a,b,c){te.call(this,a,1,0,b,c)}v(ue,te);ue.prototype.yb=function(){this.show();ue.d.yb.call(this)};ue.prototype.zb=function(){this.hide();ue.d.zb.call(this)};function ve(a,b,c){te.call(this,a,0,1,b,c)}v(ve,te);ve.prototype.yb=function(){this.show();ve.d.yb.call(this)};function we(){}ja(we);we.prototype.zj=0;we.a();function U(a){M.call(this);this.Sb=a||Lb();this.Ma=xe}v(U,Qc);U.prototype.nj=we.a();var xe=k;function ye(a,b){switch(a){case 1:return b?"disable":"enable";case 2:return b?"highlight":"unhighlight";case 4:return b?"activate":"deactivate";case 8:return b?"select":"unselect";case 16:return b?"check":"uncheck";case 32:return b?"focus":"blur";case 64:return b?"open":"close"}e(Error("Invalid component state"))}m=U.prototype;m.ia=k;m.X=l;m.e=k;m.Ma=k;m.w=k;m.H=k;m.Z=k;m.ca=k;m.xi=l;
function ze(a){return a.ia||(a.ia=":"+(a.nj.zj++).toString(36))}m.b=ca("e");m.p=function(){return this.Dc||(this.Dc=new sd(this))};m.De=function(a){this==a&&e(Error("Unable to set parent component"));a&&(this.H&&this.ia&&this.H.ca&&this.ia&&(this.ia in this.H.ca&&this.H.ca[this.ia])&&this.H!=a)&&e(Error("Unable to set parent component"));this.H=a;U.d.Wf.call(this,a)};m.getParent=ca("H");m.Wf=function(a){this.H&&this.H!=a&&e(Error("Method not supported"));U.d.Wf.call(this,a)};m.Ga=ca("Sb");
m.I=function(){this.e=this.Sb.createElement("div")};function Ae(a,b){a.X&&e(Error("Component already rendered"));a.e||a.I();b?b.insertBefore(a.e,k):a.Sb.aa.body.appendChild(a.e);(!a.H||a.H.X)&&a.s()}m.g=function(a){this.X&&e(Error("Component already rendered"));if(a&&this.Mb(a)){this.xi=j;if(!this.Sb||this.Sb.aa!=Nb(a))this.Sb=Lb(a);this.G(a);this.s()}else e(Error("Invalid element to decorate"))};m.Mb=da(j);m.G=ba("e");m.s=function(){this.X=j;Be(this,function(a){!a.X&&a.b()&&a.s()})};
m.Vb=function(){Be(this,function(a){a.X&&a.Vb()});this.Dc&&wd(this.Dc);this.X=l};m.k=function(){U.d.k.call(this);this.X&&this.Vb();this.Dc&&(this.Dc.$(),delete this.Dc);Be(this,function(a){a.$()});!this.xi&&this.e&&Ub(this.e);this.H=this.w=this.e=this.ca=this.Z=k};
function Ce(a,b){var c=a.Z?a.Z.length:0;b.X&&!a.X&&e(Error("Component already rendered"));(0>c||c>(a.Z?a.Z.length:0))&&e(Error("Child component index out of bounds"));if(!a.ca||!a.Z)a.ca={},a.Z=[];if(b.getParent()==a){var d=ze(b);a.ca[d]=b;Ra(a.Z,b)}else Ib(a.ca,ze(b),b);b.De(a);Wa(a.Z,c,0,b);b.X&&a.X&&b.getParent()==a?(d=a.Xb(),d.insertBefore(b.b(),d.childNodes[c]||k)):a.X&&(!b.X&&b.e&&b.e.parentNode)&&b.s()}m.Xb=ca("e");m.vh=function(){this.Ma==k&&(this.Ma=Qd(this.X?this.e:this.Sb.aa.body));return this.Ma};
m.ic=function(a){this.X&&e(Error("Component already rendered"));this.Ma=a};function Be(a,b){a.Z&&w(a.Z,b,h)}m.removeChild=function(a,b){if(a){var c=r(a)?a:ze(a),a=this.ca&&c?(c in this.ca?this.ca[c]:h)||k:k;c&&a&&(Hb(this.ca,c),Ra(this.Z,a),b&&(a.Vb(),a.e&&Ub(a.e)),a.De(k))}a||e(Error("Child is not in parent component"));return a};function De(a,b,c,d,f){if(!x&&(!y||!z("525")))return j;if(bb&&f)return Ee(a);if(f&&!d||!c&&(17==b||18==b)||x&&d&&b==a)return l;switch(a){case 13:return!(x&&tb(9));case 27:return!y}return Ee(a)}function Ee(a){if(48<=a&&57>=a||96<=a&&106>=a||65<=a&&90>=a||y&&0==a)return j;switch(a){case 32:case 63:case 107:case 109:case 110:case 111:case 186:case 59:case 189:case 187:case 61:case 188:case 190:case 191:case 192:case 222:case 219:case 220:case 221:return j;default:return l}}
function Fe(a){switch(a){case 61:return 187;case 59:return 186;case 224:return 91;case 0:return 224;default:return a}};function Ge(){}var He;ja(Ge);m=Ge.prototype;m.Cc=aa();m.I=function(a){var b=a.Ga().I("div",Ie(this,a).join(" "),a.Va);Je(this,a,b);return b};m.Xb=function(a){return a};m.jd=function(a,b,c){if(a=a.b?a.b():a)if(x&&!z("7")){var d=Ke(zb(a),b);d.push(b);xa(c?B:C,a).apply(k,d)}else E(a,b,c)};m.Mb=da(j);
m.g=function(a,b){if(b.id){var c=b.id;a.H&&a.H.ca&&(Hb(a.H.ca,a.ia),Ib(a.H.ca,c,a));a.ia=c}(c=this.Xb(b))&&c.firstChild?(c=c.firstChild.nextSibling?Ua(c.childNodes):c.firstChild,a.Va=c):a.Va=k;var d=0,f=this.ha(),g=this.ha(),i=l,n=l,c=l,q=zb(b);w(q,function(a){if(!i&&a==f)i=j,g==f&&(n=j);else if(!n&&a==g)n=j;else{var b=d;if(!this.ii){this.Sd||Le(this);var c=this.Sd,q={},t;for(t in c)q[c[t]]=t;this.ii=q}a=parseInt(this.ii[a],10);d=b|(isNaN(a)?0:a)}},this);a.i=d;i||(q.push(f),g==f&&(n=j));n||q.push(g);
var t=a.Fa;t&&q.push.apply(q,t);if(x&&!z("7")){var A=Ke(q);0<A.length&&(q.push.apply(q,A),c=j)}if(!i||!n||t||c)b.className=q.join(" ");Je(this,a,b);return b};m.ph=function(a){a.vh()&&this.ic(a.b(),j);a.isEnabled()&&this.Sc(a,a.Ib)};function Je(a,b,c){b.isEnabled()||a.Sa(c,1,j);b.i&8&&a.Sa(c,8,j);b.ea&16&&a.Sa(c,16,Me(b));b.ea&64&&a.Sa(c,64,!!(b.i&64))}
m.Rc=function(a,b){var c=!b,d=x||gb?a.getElementsByTagName("*"):k;if(Rd){if(c=c?"none":"",a.style[Rd]=c,d)for(var f=0,g;g=d[f];f++)g.style[Rd]=c}else if(x||gb)if(c=c?"on":"",a.setAttribute("unselectable",c),d)for(f=0;g=d[f];f++)g.setAttribute("unselectable",c)};m.ic=function(a,b){this.jd(a,this.ha()+"-rtl",b)};m.tf=function(a){var b;return a.ea&32&&(b=a.rb())?dc(b):l};
m.Sc=function(a,b){var c;if(a.ea&32&&(c=a.rb())){if(!b&&a.oe()){try{c.blur()}catch(d){}a.oe()&&a.$g()}dc(c)!=b&&(b?c.tabIndex=0:(c.tabIndex=-1,c.removeAttribute("tabIndex")))}};m.Zf=function(a,b){R(a,b)};m.ka=function(a,b,c){var d=a.b();if(d){var f=Ne(this,b);f&&this.jd(a,f,c);this.Sa(d,b,c)}};m.Sa=function(a,b,c){He||(He={1:"disabled",8:"selected",16:"checked",64:"expanded"});(b=He[b])&&a.setAttribute("aria-"+b,c)};
m.hc=function(a,b){var c=this.Xb(a);if(c&&(Sb(c),b))if(r(b))ac(c,b);else{var d=function(a){if(a){var b=Nb(c);c.appendChild(r(a)?b.createTextNode(a):a)}};na(b)?w(b,d):oa(b)&&!("nodeType"in b)?w(Ua(b),d):d(b)}};m.rb=function(a){return a.b()};m.ha=da("goog-control");function Ie(a,b){var c=a.ha(),d=[c],f=a.ha();f!=c&&d.push(f);c=b.i;for(f=[];c;){var g=c&-c;f.push(Ne(a,g));c&=~g}d.push.apply(d,f);(c=b.Fa)&&d.push.apply(d,c);x&&!z("7")&&d.push.apply(d,Ke(d));return d}
function Ke(a,b){var c=[];b&&(a=a.concat([b]));w([],function(d){Na(d,xa(Qa,a))&&(!b||Qa(d,b))&&c.push(d.join("_"))});return c}function Ne(a,b){a.Sd||Le(a);return a.Sd[b]}function Le(a){var b=a.ha();a.Sd={1:b+"-disabled",2:b+"-hover",4:b+"-active",8:b+"-selected",16:b+"-checked",32:b+"-focused",64:b+"-open"}};function Oe(){}v(Oe,Ge);ja(Oe);m=Oe.prototype;m.Cc=da("button");m.Sa=function(a,b,c){16==b?a.setAttribute("aria-pressed",c):Oe.d.Sa.call(this,a,b,c)};m.I=function(a){var b=Oe.d.I.call(this,a),c=a.md();c&&this.Yf(b,c);(c=a.W())&&this.Ab(b,c);a.ea&16&&this.Sa(b,16,Me(a));return b};m.g=function(a,b){var b=Oe.d.g.call(this,a,b),c=this.W(b);a.og=c;a.gg=this.md(b);a.ea&16&&this.Sa(b,16,Me(a));return b};m.W=ia;m.Ab=ia;m.md=function(a){return a.title};m.Yf=function(a,b){a&&(a.title=b||"")};m.ha=da("goog-button");function Pe(a,b){M.call(this);a&&Qe(this,a,b)}v(Pe,Qc);m=Pe.prototype;m.e=k;m.pe=k;m.uf=k;m.qe=k;m.ub=-1;m.tb=-1;m.Se=l;
var Re={3:13,12:144,63232:38,63233:40,63234:37,63235:39,63236:112,63237:113,63238:114,63239:115,63240:116,63241:117,63242:118,63243:119,63244:120,63245:121,63246:122,63247:123,63248:44,63272:46,63273:36,63275:35,63276:33,63277:34,63289:144,63302:45},Se={Up:38,Down:40,Left:37,Right:39,Enter:13,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"U+007F":46,Home:36,End:35,PageUp:33,PageDown:34,Insert:45},Te=x||y&&z("525"),Ue=bb&&hb;m=Pe.prototype;
m.ij=function(a){if(y&&(17==this.ub&&!a.ctrlKey||18==this.ub&&!a.altKey))this.tb=this.ub=-1;Te&&!De(a.keyCode,this.ub,a.shiftKey,a.ctrlKey,a.altKey)?this.handleEvent(a):(this.tb=hb?Fe(a.keyCode):a.keyCode,Ue&&(this.Se=a.altKey))};m.kj=function(a){this.tb=this.ub=-1;this.Se=a.altKey};
m.handleEvent=function(a){var b=a.ta,c,d,f=b.altKey;x&&"keypress"==a.type?(c=this.tb,d=13!=c&&27!=c?b.keyCode:0):y&&"keypress"==a.type?(c=this.tb,d=0<=b.charCode&&63232>b.charCode&&Ee(c)?b.charCode:0):gb?(c=this.tb,d=Ee(c)?b.keyCode:0):(c=b.keyCode||this.tb,d=b.charCode||0,Ue&&(f=this.Se),bb&&(63==d&&224==c)&&(c=191));var g=c,i=b.keyIdentifier;c?63232<=c&&c in Re?g=Re[c]:25==c&&a.shiftKey&&(g=9):i&&i in Se&&(g=Se[i]);a=g==this.ub;this.ub=g;b=new Ve(g,d,a,b);b.altKey=f;this.dispatchEvent(b)};m.b=ca("e");
function Qe(a,b,c){a.qe&&a.detach();a.e=b;a.pe=N(a.e,"keypress",a,c);a.uf=N(a.e,"keydown",a.ij,c,a);a.qe=N(a.e,"keyup",a.kj,c,a)}m.detach=function(){this.pe&&(Mc(this.pe),Mc(this.uf),Mc(this.qe),this.qe=this.uf=this.pe=k);this.e=k;this.tb=this.ub=-1};m.k=function(){Pe.d.k.call(this);this.detach()};function Ve(a,b,c,d){d&&this.init(d,h);this.type="key";this.keyCode=a;this.charCode=b;this.repeat=c}v(Ve,zc);function We(a,b){a||e(Error("Invalid class name "+a));qa(b)||e(Error("Invalid decorator function "+b))}var Xe={};function Ye(a,b,c){U.call(this,c);if(!b){for(var b=this.constructor,d;b;){d=sa(b);if(d=Xe[d])break;b=b.d?b.d.constructor:k}b=d?qa(d.a)?d.a():new d:k}this.F=b;this.Va=a}v(Ye,U);m=Ye.prototype;m.Va=k;m.i=0;m.ea=39;m.ab=255;m.wk=0;m.Ib=j;m.Fa=k;m.mf=j;m.Qd=l;m.Vh=k;function Ze(a){a.X&&l!=a.mf&&$e(a,l);a.mf=l}m.rb=function(){return this.F.rb(this)};
m.jd=function(a,b){b?a&&(this.Fa?Qa(this.Fa,a)||this.Fa.push(a):this.Fa=[a],this.F.jd(this,a,j)):a&&this.Fa&&(Ra(this.Fa,a),0==this.Fa.length&&(this.Fa=k),this.F.jd(this,a,l))};m.I=function(){var a=this.F.I(this);this.e=a;var b=this.Vh||this.F.Cc();b&&a.setAttribute("role",b);this.Qd||this.F.Rc(a,l);this.Ib||this.F.Zf(a,l)};m.Xb=function(){return this.F.Xb(this.b())};m.Mb=function(a){return this.F.Mb(a)};
m.G=function(a){this.e=a=this.F.g(this,a);var b=this.Vh||this.F.Cc();b&&a.setAttribute("role",b);this.Qd||this.F.Rc(a,l);this.Ib="none"!=a.style.display};m.s=function(){Ye.d.s.call(this);this.F.ph(this);if(this.ea&-2&&(this.mf&&$e(this,j),this.ea&32)){var a=this.rb();if(a){var b=this.Gc||(this.Gc=new Pe);Qe(b,a);S(S(S(this.p(),b,"key",this.jj),a,"focus",this.gj),a,"blur",this.$g)}}};
function $e(a,b){var c=a.p(),d=a.b();b?(S(S(S(S(c,d,"mouseover",a.gh),d,"mousedown",a.eh),d,"mouseup",a.hh),d,"mouseout",a.fh),a.ke!=ia&&S(c,d,"contextmenu",a.ke),x&&S(c,d,"dblclick",a.ah)):(vd(vd(vd(vd(c,d,"mouseover",a.gh),d,"mousedown",a.eh),d,"mouseup",a.hh),d,"mouseout",a.fh),a.ke!=ia&&vd(c,d,"contextmenu",a.ke),x&&vd(c,d,"dblclick",a.ah))}m.Vb=function(){Ye.d.Vb.call(this);this.Gc&&this.Gc.detach();this.Ib&&this.isEnabled()&&this.F.Sc(this,l)};
m.k=function(){Ye.d.k.call(this);this.Gc&&(this.Gc.$(),delete this.Gc);delete this.F;this.Fa=this.Va=k};m.hc=function(a){this.F.hc(this.b(),a);this.Va=a};m.Xg=function(){var a=this.Va;return!a?"":(r(a)?a:na(a)?Ma(a,gc).join(""):ec(a)).replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")};m.ic=function(a){Ye.d.ic.call(this,a);var b=this.b();b&&this.F.ic(b,a)};m.Rc=function(a){this.Qd=a;var b=this.b();b&&this.F.Rc(b,a)};
m.Zf=function(a,b){if(b||this.Ib!=a&&this.dispatchEvent(a?"show":"hide")){var c=this.b();c&&this.F.Zf(c,a);this.isEnabled()&&this.F.Sc(this,a);this.Ib=a;return j}return l};m.isEnabled=function(){return!(this.i&1)};m.Na=function(a){var b=this.getParent();if((!b||"function"!=typeof b.isEnabled||b.isEnabled())&&af(this,1,!a))a||(this.setActive(l),bf(this,l)),this.Ib&&this.F.Sc(this,a),this.ka(1,!a)};function bf(a,b){af(a,2,b)&&a.ka(2,b)}m.ac=function(){return!!(this.i&4)};
m.setActive=function(a){af(this,4,a)&&this.ka(4,a)};function Me(a){return!!(a.i&16)}function cf(a,b){af(a,16,b)&&a.ka(16,b)}m.oe=function(){return!!(this.i&32)};m.Oa=function(a){af(this,32,a)&&this.ka(32,a)};m.ka=function(a,b){this.ea&a&&b!=!!(this.i&a)&&(this.F.ka(this,a,b),this.i=b?this.i|a:this.i&~a)};function df(a,b,c){a.X&&(a.i&b&&!c)&&e(Error("Component already rendered"));!c&&a.i&b&&a.ka(b,l);a.ea=c?a.ea|b:a.ea&~b}function ef(a,b){return!!(a.ab&b)&&!!(a.ea&b)}
function af(a,b,c){return!!(a.ea&b)&&!!(a.i&b)!=c&&(!(a.wk&b)||a.dispatchEvent(ye(b,c)))&&!a.ae}m.gh=function(a){(!a.relatedTarget||!$b(this.b(),a.relatedTarget))&&(this.dispatchEvent("enter")&&this.isEnabled()&&ef(this,2))&&bf(this,j)};m.fh=function(a){if((!a.relatedTarget||!$b(this.b(),a.relatedTarget))&&this.dispatchEvent("leave"))ef(this,4)&&this.setActive(l),ef(this,2)&&bf(this,l)};m.ke=ia;
m.eh=function(a){this.isEnabled()&&(ef(this,2)&&bf(this,j),Bc(a)&&(ef(this,4)&&this.setActive(j),this.F.tf(this)&&this.rb().focus()));!this.Qd&&Bc(a)&&a.preventDefault()};m.hh=function(a){this.isEnabled()&&(ef(this,2)&&bf(this,j),this.ac()&&(this.xd(a)&&ef(this,4))&&this.setActive(l))};m.ah=function(a){this.isEnabled()&&this.xd(a)};
m.xd=function(a){ef(this,16)&&cf(this,!Me(this));ef(this,8)&&af(this,8,j)&&this.ka(8,j);if(ef(this,64)){var b=!(this.i&64);af(this,64,b)&&this.ka(64,b)}b=new wc("action",this);a&&(b.altKey=a.altKey,b.ctrlKey=a.ctrlKey,b.metaKey=a.metaKey,b.shiftKey=a.shiftKey,b.Jf=a.Jf);return this.dispatchEvent(b)};m.gj=function(){ef(this,32)&&this.Oa(j)};m.$g=function(){ef(this,4)&&this.setActive(l);ef(this,32)&&this.Oa(l)};
m.jj=function(a){return this.Ib&&this.isEnabled()&&this.lf(a)?(a.preventDefault(),a.stopPropagation(),j):l};m.lf=function(a){return 13==a.keyCode&&this.xd(a)};qa(Ye)||e(Error("Invalid component class "+Ye));qa(Ge)||e(Error("Invalid renderer class "+Ge));var ff=sa(Ye);Xe[ff]=Ge;We("goog-control",function(){return new Ye(k)});function gf(){}v(gf,Oe);ja(gf);m=gf.prototype;m.Cc=aa();m.I=function(a){Ze(a);a.ab&=-256;df(a,32,l);return a.Ga().I("button",{"class":Ie(this,a).join(" "),disabled:!a.isEnabled(),title:a.md()||"",value:a.W()||""},a.Xg()||"")};m.Mb=function(a){return"BUTTON"==a.tagName||"INPUT"==a.tagName&&("button"==a.type||"submit"==a.type||"reset"==a.type)};m.g=function(a,b){Ze(a);a.ab&=-256;df(a,32,l);b.disabled&&B(b,Ne(this,1));return gf.d.g.call(this,a,b)};m.ph=function(a){S(a.p(),a.b(),"click",a.xd)};m.Rc=ia;
m.ic=ia;m.tf=function(a){return a.isEnabled()};m.Sc=ia;m.ka=function(a,b,c){gf.d.ka.call(this,a,b,c);if((a=a.b())&&1==b)a.disabled=c};m.W=function(a){return a.value};m.Ab=function(a,b){a&&(a.value=b)};m.Sa=ia;function hf(a,b,c){Ye.call(this,a,b||gf.a(),c)}v(hf,Ye);m=hf.prototype;m.W=ca("og");m.Ab=function(a){this.og=a;this.F.Ab(this.b(),a)};m.md=ca("gg");m.Yf=function(a){this.gg=a;this.F.Yf(this.b(),a)};m.k=function(){hf.d.k.call(this);delete this.og;delete this.gg};m.s=function(){hf.d.s.call(this);if(this.ea&32){var a=this.rb();a&&S(this.p(),a,"keyup",this.lf)}};m.lf=function(a){return 13==a.keyCode&&"key"==a.type||32==a.keyCode&&"keyup"==a.type?this.xd(a):32==a.keyCode};We("goog-button",function(){return new hf(k)});function jf(){}v(jf,Oe);ja(jf);m=jf.prototype;m.I=function(a){var b={"class":"goog-inline-block "+Ie(this,a).join(" "),title:a.md()||""},b=a.Ga().I("div",b,kf(this,a.Va,a.Ga()));Je(this,a,b);return b};m.Cc=da("button");m.Xb=function(a){return a&&a.firstChild.firstChild};function kf(a,b,c){return c.I("div","goog-inline-block "+(a.ha()+"-outer-box"),c.I("div","goog-inline-block "+(a.ha()+"-inner-box"),b))}m.Mb=function(a){return"DIV"==a.tagName};
m.g=function(a,b){lf(b,j);lf(b,l);var c;a:{c=jc(a.Ga(),b);var d=this.ha()+"-outer-box";if(c&&D(c,d)&&(c=jc(a.Ga(),c),d=this.ha()+"-inner-box",c&&D(c,d))){c=j;break a}c=l}c||b.appendChild(kf(this,b.childNodes,a.Ga()));B(b,"goog-inline-block",this.ha());return jf.d.g.call(this,a,b)};m.ha=da("goog-custom-button");
function lf(a,b){if(a)for(var c=b?a.firstChild:a.lastChild,d;c&&c.parentNode==a;){d=b?c.nextSibling:c.previousSibling;if(3==c.nodeType){var f=c.nodeValue;if(""==Aa(f))a.removeChild(c);else{c.nodeValue=b?f.replace(/^[\s\xa0]+/,""):f.replace(/[\s\xa0]+$/,"");break}}else break;c=d}};function mf(a,b,c){hf.call(this,a,b||jf.a(),c)}v(mf,hf);We("goog-custom-button",function(){return new mf(k)});function nf(){U.call(this);this.jb=3;this.L=10;this.He=60*this.jb*this.L;this.Dg=[];this.Bg={};this.oa=of();this.Ya=0;this.ai=l;this.ga=[V.a().j,V.a().j.f()]}v(nf,U);m=nf.prototype;
m.s=function(){nf.d.s.call(this);this.Ge=F("ticker");this.ue=F("my-ticker");var a=F("go-live");this.mh=F("header");this.V=F("channels");this.nh=3;this.ra=H().width*this.nh;this.fd=T(F("controller")).height;Q.a().subscribe(Zc,function(a){this.Je(a)},this);Q.a().subscribe(Yc,function(){this.Y(l,h,j)},this);this.Je(D(this.b(),"toggled"));this.Bb=new hd;for(var b=60;b>=this.Bb.getMinutes();)b-=this.L;this.Bb.setMinutes(b);this.O=this.Bb.clone();this.O.add(new id(0,0,0,0,2*-this.L));this.yf=this.O.clone();
this.yf.add(new id(0,0,0,0,this.L*(this.jb+1)));pf(this,this.jb,this.O);Md(this.b(),this.ra);var c=2/this.jb*this.ra-200;Ed(this.b(),-1*c);this.da=(this.ra-200)/this.He;this.Dk=this.ra/this.jb;this.Ob=document.createElement("style");this.Ob.id="channel-name-offs";this.Ob.type="text/css";document.getElementsByTagName("head")[0].appendChild(this.Ob);this.Ob.innerHTML="div#guide div.channels div.channel div.name{left:"+c+"px !important}";w(V.a().tc,s(function(a){if(!a.C){var b=new qf(a,this.He,this.Bb,
c,this.O);Ae(b,this.V);this.Dg.push(b);this.Bg[a.id]=b}a.id==V.a().j.id&&b&&(B(b.b(),"current"),this.S=b,window.currentChannel=this.S);this.te=a.C?a:this.te},this));this.l=new Xd(this.b());var d=this.Ob,f=this.b();this.l.gd=function(a){0>a&&a>-T(f).width+H().width&&(window.currentChannel&&window.currentChannel.update(),this.target.style.left=a+"px",d.innerHTML="div#guide div.channels div.channel div.name{left:"+-a+"px !important}")};var b=F("now-left"),g=F("now-right");S(S(S(S(S(S(S(S(S(S(this.p(),
Vc.a().Ud,Tc,s(this.fg,this)),a,"click",s(function(){V.a().c(rf,this.S.w);Q.a().c($c,j)},this)),window,"resize",s(this.Y,this)),this.V,"scroll",s(this.Y,this,l,h,j)),this.Ge,"click",s(this.Y,this,j,h,l)),b,"click",s(this.Fj,this)),g,"click",s(this.Oj,this)),this.l,"beforedrag",s(function(){B(this.b(),"drag")},this)),this.l,"end",s(function(){C(this.b(),"drag");this.Lb=l;sf(this)},this)),this.mh,"mousewheel",s(function(a){a.preventDefault();a.stopPropagation();a=a.ta;B(this.b(),"drag");a=Gd(this.b()).x+
(a.wheelDelta?a.wheelDelta:a.detail?-a.detail:0);0>a&&a>-1*this.ra+H().width&&(Ed(this.b(),a),this.S&&this.S.update(),this.Ob.innerHTML="div#guide div.channels div.channel div.name{left:"+-a+"px !important}");C(this.b(),"drag");this.Lb=l;sf(this)},this));V.a().subscribe(rf,this.Nb,this);V.a().subscribe(tf,s(this.Y,this));Q.a().subscribe("toggle-admin",function(a){E(this.b(),"admin",a)},this);W.a().subscribe(uf,this.Kf,this);vf(this);this.Y(j,h,l);this.oa&&S(this.p(),this.l,"beforedrag",s(function(a){a.Ue.shiftKey&&
a.preventDefault()},this))};m.Je=function(a){C(this.b(),"animate");this.Y(j,h,l);B(this.b(),"animate");var b=Math.min(this.V.scrollHeight,210);E(this.b(),"toggled",a);Ld(this.b(),a?b+this.fd+19:this.fd);this.S&&(this.V.scrollTop=Gd(this.S.b()).y);O(s(function(){Ld(this.V,a?b:40);E(this.b(),"collapsed",!a);vf(this);this.Y();if(this.S){var c=this.V,d=Gd(this.S.b()).y;c.scrollTop!=d&&(c.scrollTop=d)}},this),a?0:800);a&&vf(this);this.l&&this.l.Na(a)};
function pf(a,b,c){for(var d=G("times",a.b()),f=0;f<=b;f++){var g=c.clone();g.add(new id(0,0,0,0,a.L*f));var i=I,n={"class":"time",style:"width:"+(a.ra-200)/a.jb+"px"},q=h,t=g.getHours();ga(q)||(q=j);var A=12==t;12<t&&(t-=12,A=j);0==t&&q&&(t=12);t=String(t);t+=":"+Ha(g.getMinutes());q&&(g=ya("am"),q=ya("pm"),t+=A?q:g);i=i("div",n,t);d.appendChild(i)}}
m.Nb=function(a){this.S&&C(this.S.b(),"current");this.S=this.Bg[a.id]||k;if(window.currentChannel=this.S)B(this.S.b(),"current"),O(s(this.Y,this,j,h,l));this.ga[0]=a};m.Kf=function(){this.te=this.te||wf();V.a().c(rf,this.te);Q.a().c(Zc,l)};
function sf(a){var b=F("now-left"),c=F("now-right"),d=(u()-a.O.getTime())/1E3*a.da,f=Q.a().Tc?300:0,g=H().width-f,f=T(a.b()).width-f-200;((a.ga[0].C?a.ga[0].queue.length:a.ga[0].cb+(a.Ya+1||0)+1<a.ga[0].pa.length)?((a.ga[0].f(a.Ya+1).time.getTime()-u())/1E3+a.ga[0].f(a.Ya+1).media.duration)*a.da+g:0)>f-d&&xf(a);c.style.right=Q.a().Tc?"300px":0;E(c,"now",!!(-d<Gd(a.b()).x-g));E(b,"now",!!(-d>Gd(a.b()).x+200));R(c,a.ga[0].C?!!a.ga[0].queue.length:a.ga[0].cb+(a.Ya||0)+1<a.ga[0].pa.length);R(b,0<=a.ga[0].cb+
(a.Ya||0)-1)}m.Fj=function(){D(F("now-left"),"now")?V.a().j.f()==W.a().f()?this.Y(j,h,h,j):this.Y(l,h,h,j):this.Y(l,-1)};m.Oj=function(){D(F("now-right"),"now")?V.a().j.f()==W.a().f()?this.Y(j,h,h,j):this.Y(l,h,h,l):this.Y(l,1)};function xf(a){var b=Math.ceil(a.jb/a.nh);pf(a,1,a.yf);a.ra+=a.Dk;Md(a.b(),a.ra);a.jb++;a.yf.add(new id(0,0,0,0,a.L*b));a.He=60*a.jb*a.L}
m.fg=function(){if(Q.a().Zb){var a=V.a().j&&V.a().j.C||l,b=V.a().j&&V.a().j.f(),c=W.a().f(),d=1E3*W.a().he(),f=Math.round((u()-this.O.getTime())/1E3*this.da),d=c&&d?Math.round((c.time.getTime()+d-this.O.getTime())/1E3*this.da):f;sf(this);Ed(this.Ge,f);Ed(this.ue,d);R(this.ue,!!c);E(this.Ge,"go-live",!a&&!!b&&!!c&&b.id!=c.id&&30<Math.abs(d-f));E(this.ue,"show",15<!Math.abs(d-f));E(this.ue,"show-me",!a&&15<Math.abs(d-f));Q.a();this.Y()}};
m.Y=function(a,b,c,d){this.Lb=a!=h?!!a:this.Lb;this.ai=a!=h?!!c:this.Lb;this.Ya=this.Lb?0:b?this.Ya+b:this.Ya;a=V.a().j.f(this.Ya);c=V.a().j.C?(a=yf(V.a(),j))&&a.f():d?a:this.Lb?W.a().f():this.ga[0].f(this.Ya);this.ga[1]=c;if((this.Lb||b)&&c&&this.O){for(var f=W.a().f(),g=W.a().getCurrentTime(),a=(u()-this.O.getTime())/1E3*this.da,f=f&&g?Math.round((f.time.getTime()+g-this.O.getTime())/1E3*this.da):a;a+H().width>this.ra-(Q.a().Tc?300:0);)xf(this);c=-(c.time.getTime()-this.O.getTime())/1E3*this.da+
5;g=H().width-(Q.a().Tc?300:0);!b&&(Q.a().Zb&&a>-c+g-300)&&(c=(d?-a:-f)+g-350);!b&&(Q.a().Zb&&a>-c+g-300)&&(c=-Gd(this.Ge).x-210);c=Math.max(c,-T(this.b()).width+g);Ed(this.b(),Math.min(c,-200));this.Ob.innerHTML="div#guide div.channels div.channel div.name{left:"+-c+"px !important}";if(!this.ai&&this.S){var i=Gd(this.S.b()).y-T(this.mh).height,n=new se(this.V,[this.V.scrollLeft,this.V.scrollTop],[this.V.scrollLeft,i],100*this.Dg.length);S(this.p(),n,"end",s(function(){var a=this.V;a.scrollTop!=i&&
(a.scrollTop=i)},this));O(s(function(){n.play()},this),100)}}b&&sf(this)};function vf(a){var b=Math.min(a.V.scrollHeight,210);Ld(a.V,D(a.b(),"toggled")?b:a.fd);Ld(a.b(),D(a.b(),"collapsed")?a.fd:b+a.fd+19)};function zf(a){return'\t<div class="channel"><div class="programs-container"><div class="programs"></div><div class="suggest"><div class="spinner">...</div><div class="select-program"><div class="select-header">SUGGEST PROGRAM <div class="close"></div></div><div class="select-content"><div class="page"><input type="text" class="program-input" placeholder="Paste YouTube link"/><div class="page2"></div></div></div></div></div></div><div class="graph"></div><div class="viewers"></div><div class="name"><div class="text">'+
L(a.name)+'</div><div class="suggest-program"><div class="add-program button dark">+</div></div></div></div>'}function Af(a){return'<div class="info"><div class="thumb'+(a.repeat?" repeat":"")+'" style="background-image:url('+L(a.Of.media.Ra)+"); background-position: 50% "+L(a.Of.media.Vc)+'%"></div><div class="progress"></div><div class="title">'+L(a.Of.media.name)+"</div>"+(a.Qe?'<div class="remove"></div><div class="repos"></div>':"")+"</div>"}
function Bf(a){return'<div class="line"><div class="pic"><img src="'+L(a.m.P)+'"></div></div>'}function Cf(a){return'<div class="confirm-media"><div class="thumb" style="background-image:url('+L(a.Ak)+')"></div><div class="title">'+L(a.title)+'</div><div class="added">ADDED</div><div class="dark button">ADD</div></div>'};function Df(a){this.id=a.id;this.P=a.picture;this.name=a.name;this.description=a.description;this.link=a.link};function Ef(a){P.call(this);this.id=a.id;this.name=a.name;this.host="youtube";this.Ec=a.host_id;this.duration=a.duration;this.description=a.description;this.link=a.link||"xylocast.com/?m="+this.id;this.La=new Df(a.publisher);this.ec=gd(a.published+"Z");this.Ra="http://i.ytimg.com/vi/"+this.Ec+"/0.jpg";this.li="http://i.ytimg.com/vi/"+this.Ec+"/1.jpg";this.Hl="http://i.ytimg.com/vi/"+this.Ec+"/2.jpg";this.Il="http://i.ytimg.com/vi/"+this.Ec+"/3.jpg";this.dg=new Cb(480,360);this.Vc=a.thumb_pos||37;
this.ed=[];this.Ye=a.comment_count||0;this.vk=a.star_count||0;this.cc=[];this.Gi=a.collection_id;this.subscribe(Ff,this.Bi,this);this.subscribe(Gf,this.qc,this)}v(Ef,P);function Hf(a){return a.ec.getMonth()+1+"/"+a.ec.getDate()+"/"+a.ec.getYear()}var Ff="add-comment",Gf="watching";Ef.prototype.Bi=function(a){this.ed.push(a);this.Ye+=1;a.m.id!=X.a().v.id&&If.a().c(Jf,"commented on "+this.name,a.text,a.m,a.m.P,"#media:"+this.id)};
Ef.prototype.qc=function(a,b,c){c?Sa(this.cc,function(b){return b.id==a.id}):(this.cc.push(a),a.id!=X.a().v.id&&If.a().c(Kf,"is watching "+b.name,this.name,a,this.li,"#info:"+this.id))};function Lf(){P.call(this);this.Bf={}}v(Lf,P);ja(Lf);function Mf(a,b){var c=a.get(b.id);c||(c=new Ef(b),a.add(c));return c}Lf.prototype.get=function(a){return a in this.Bf?this.Bf[a]:h};Lf.prototype.add=function(a){this.Bf[a.id]=a};function Nf(a,b){P.call(this);var c=b||k,d=a||k;this.id=d?d.id:c.id;this.media=d?new Ef(d.media):c;Lf.a().add(this.media);this.time=d?gd(d.time+"Z"):new hd;this.async=d?d.async:j;this.seek=d?d.seek:k}v(Nf,P);function Of(a){return new Nf(h,a)};function Pf(a){P.call(this);this.id=a.id;this.name=a.name;this.url=a.profile_url;this.location=a.location||"";this.P=za("https://graph.facebook.com/%s/picture",this.id);this.color=Raphael.getColor();this.Oe=a.access_level;this.dl=[];this.yl=a.last_login?gd(a.last_login+"Z"):k;this.El=a.session_count;this.fl=a.ave_session?a.ave_session.toFixed(2):k;this.ok=a.show_guide!=h?a.show_guide:j;this.sk=a.show_sidebar!=h?a.show_sidebar:j;this.ak=a.post_facebook!=h?a.post_facebook:j;this.bk=a.post_twitter!=
h?a.post_twitter:j}v(Pf,P);function of(){return X.a().v.Oe==Qf}var Qf=2;function Rf(a,b,c,d,f){this.id=a;this.m=b;this.U=c;this.ig=d;this.Jd=f||k;this.Hh=[]}
Rf.prototype.end=function(a){this.Jd=a;a=(this.Jd.getTime()-this.ig.getTime())/1E3;Sf.a();var b=this.U,c=this.Hh.length;X.a().Ff.length?_gaq.push(["_trackEvent","Users","SessionTimeWithFriends",X.a().v.id,Math.round(a)]):_gaq.push(["_trackEvent","Users","SessionTimeNoFriends",X.a().v.id,Math.round(a)]);_gaq.push(["_trackEvent","Users","SessionMediaCount",X.a().v.id,c]);_gaq.push(["_trackEvent","Users","Active",X.a().v.id,c]);_gaq.push(["_trackEvent","Users",b.id+"-time",X.a().v.id,a]);_gaq.push(["_trackEvent",
"Users",b.id+"-medias",X.a().v.id,c]);b.C||(_gaq.push(["_trackEvent","Channel","SessionTime",b.id,a]),_gaq.push(["_trackEvent","Channel","SessionMediaCount",b.id,c]))};function Tf(a){P.call(this);this.id=a.id;this.name=a.name;this.C=a.my_channel;this.Ji=a.current_media?Mf(Lf.a(),a.current_media):k;this.ll=a.current_seek;this.pa=[];this.Pc={};this.T=a.current_program&&new Nf(a.current_program);this.$c=[];this.queue=[];this.Vj=a.online!=h?a.online:k;this.subscribe(Uf,this.oc,this);this.subscribe(Vf,this.Ci,this);this.subscribe(Wf,this.qc,this);this.subscribe(Xf,this.mg,this)}v(Tf,P);m=Tf.prototype;m.oc=function(a){this.pa.push(a);this.Pc[a.id]=a};
m.Ci=function(a,b){b?(this.queue.push(a),Yf(Sf.a(),a)):Sa(this.queue,function(b){return b.id==a.id},this)};m.qc=function(a){this.$c.push(a)};m.mg=function(a){var b=a.id in this.Pc?this.Pc[a.id]:h;b&&(b.time=gd(a.time+"Z"))};
m.f=function(a){if(this.T&&this.T.async&&this.T.seek)return this.T;if(!this.pa.length)return k;var b=this.T;b||(b=this.pa[0],this.cb=0);if(a)return this.pa[this.cb+a];if(!this.C&&u()>=b.time.getTime()&&u()<b.time.getTime()+1E3*b.media.duration)return this.T=b;for(;u()>b.time.getTime()&&u()>=b.time.getTime()+1E3*b.media.duration;){this.T||(this.T=this.pa[0],this.cb=0);this.pa.length>=this.cb+1?(this.cb++,a=this.pa[this.cb],a=this.T=this.C?a&&a.seek?a:k:this.pa[this.cb]):a=k;if(this.C){if(a&&a.async&&
a.seek)return this.T=a;if(!a)if(this.queue.length){var a=this.queue.shift(),c=Of(a);wf().c(Uf,c);Y("/_addprogram",ie(),"POST","channel_id="+V.a().C.id+"&media_id="+a.id+"&now=true");a=c}else a=k}if(!a)break;b=a}return u()>=b.time.getTime()&&u()<b.time.getTime()+1E3*b.media.duration?this.T=b:k};var Uf="add-program",Vf="add-queue",Wf="add-viewer",Xf="update-program";function Zf(){M.call(this);this.ba=[];this.Bc=[];this.be={};this.r=new sd(this);this.rj=this.uh=l;this.ng=j}v(Zf,Qc);m=Zf.prototype;m.of=0;m.Vf=ba("of");
m.init=function(){if(!this.uh){for(var a=0,b=this.ba.length;a<b;a++)for(var c=Vb(this.ba[a]),d=0,f=c.length;d<f;++d){var g=c[d],i=g,n=sa(i);this.be[n]=g;this.Og&&(S(this.r,g,"mouseover",this.cj),S(this.r,g,"mouseout",this.bj));this.Ng&&(S(this.r,i,"mouseover",this.aj),S(this.r,i,"mouseout",this.$i));this.Bc.push(g);S(this.r,i,["mousedown","touchstart"],this.ih)}this.uh=j}};
m.k=function(){this.r.$();for(var a=0,b=this.ba.length;a<b;a++){var c=this.ba[a];c.Mg=h;c.Rb=h}this.ba.length=0;this.Bc.length=0;this.be=k;$f(this);Zf.d.k.call(this)};function ag(a,b){for(var c=0,d=a.ba.length;c<d;c++){var f=a.ba[c];f.yc=Od(f)}c=0;for(d=a.Bc.length;c<d;c++)f=a.Bc[c],f!=b&&(f.yc=Od(f))}
m.ih=function(a){var b=sa(a.currentTarget);this.o=this.be[b];this.B=this.Vd(this.o);this.ce&&B(this.B,this.ce);this.B.style.margin="0";this.B.style.position="absolute";this.B.style.visibility="hidden";Nb(this.o).body.appendChild(this.B);b=Jd(this.o);Kd(this.B,b);this.l=new Xd(this.B);this.l.Vf(this.of);N(this.l,"start",this.dh,l,this);N(this.l,"end",this.bh,l,this);N(this.l,"earlycancel",this.Td,l,this);this.l.jc(a)};
m.dh=function(a){if(this.dispatchEvent(new bg("beforedragstart",this,a.Ue,this.o,k,k))){this.we=this.o.parentNode;this.Kg=this.Gf=Wb(this.o);this.cf=this.we;this.bf?B.apply(k,Ta(this.o,this.bf)):this.o.style.visibility="hidden";var b=T(this.B);this.B.Xi=b.width/2;this.B.Wi=b.height/2;this.B.style.visibility="";this.ng&&(this.o.style.display="none");ag(this,this.o);this.o.style.display="";N(this.l,"drag",this.dj,l,this);this.dispatchEvent(new bg("dragstart",this,a.Ue,this.o,this.B,this.l))}else a.preventDefault(),
this.Td()};
m.dj=function(a){var b=Jd(this.B),b=new Bb(b.x+this.B.Xi,b.y+this.B.Wi),c;a:{c=k;if("none"!=this.o.style.display){c=this.o.parentNode;var d=Od(c);if(cg(b,d))break a}for(var d=0,f=this.ba.length;d<f;d++){var g=this.ba[d];if(g!=c&&cg(b,g.yc)){c=g;break a}}c=k}var i;if(c){c==k&&e(Error("getHoverNextItem_ called with null hoverList."));var n,q,d=l,f=h;switch(c.Mg){case 0:i=b.y;n=dg;q=eg;break;case 4:d=j;case 2:i=b.x;n=fg;q=eg;break;case 5:d=j;case 3:i=b.x,n=gg,q=hg}for(var g=k,t,A=Vb(c),J=0,la=A.length;J<
la;J++){var ka=A[J];if(ka!=this.o){var Yb=n(ka.yc);if(d){var ad=ig(ka,b);ga(f)||(f=ad);if(q(i,Yb)&&(t==h||ad<f||ad==f&&(q(Yb,t)||Yb==t)))g=ka,t=Yb;ad<f&&(f=ad)}else if(q(i,Yb)&&(t==h||q(Yb,t)))g=ka,t=Yb}}i=g!==k&&ig(g,b)>f?k:g}else i=k;if(!this.dispatchEvent(new bg("beforedragmove",this,a,this.o,this.B,this.l,b,c,i)))return l;if(c)this.ng?(this.o.parentNode!=c||Wb(this.o)!=i)&&c.insertBefore(this.o,i):i&&(this.Kg=i),this.o.style.display="",c.Rb&&B(c,c.Rb);else{this.rj||(this.o.style.display="none");
n=0;for(q=this.ba.length;n<q;n++)t=this.ba[n],t.Rb&&C(t,t.Rb)}c!=this.cf&&(this.cf=c,ag(this,this.o));this.dispatchEvent(new bg("dragmove",this,a,this.o,this.B,this.l,b,c,i));return l};m.Td=function(){$f(this);this.l=this.B=this.Gf=this.we=this.cf=this.o=k;for(var a=0,b=this.ba.length;a<b;a++)this.ba[a].yc=k;a=0;for(b=this.Bc.length;a<b;a++)this.Bc[a].yc=k};
m.bh=function(a){if(!this.dispatchEvent(new bg("beforedragend",this,a,this.o,this.B,this.l)))return l;this.ng||this.we.insertBefore(this.o,this.Kg);$f(this);this.dispatchEvent(new bg("dragend",this,a,this.o,this.B,this.l));this.Td();return j};function $f(a){sc(a.l);a.B&&Ub(a.B);a.o&&"none"==a.o.style.display&&(a.we.insertBefore(a.o,a.Gf),a.o.style.display="");a.bf&&a.o?C.apply(k,Ta(a.o,a.bf)):a.o&&(a.o.style.visibility="visible");for(var b=0,c=a.ba.length;b<c;b++){var d=a.ba[b];d.Rb&&C(d,d.Rb)}}
m.cj=function(a){B.apply(k,Ta(a.currentTarget,this.Og))};m.bj=function(a){C.apply(k,Ta(a.currentTarget,this.Og))};m.aj=function(a){B.apply(k,Ta(a.currentTarget,this.Ng))};m.$i=function(a){C.apply(k,Ta(a.currentTarget,this.Ng))};function cg(a,b){return a.x>b.left&&a.x<b.left+b.width&&a.y>b.top&&a.y<b.top+b.height}function ig(a,b){var c=a.yc;return Math.abs(b.y-(c.top+(c.height-1)/2))}function dg(a){return a.top+a.height-1}function fg(a){return a.left+a.width-1}function gg(a){return a.left||0}
function eg(a,b){return a<b}function hg(a,b){return a>b}m.Vd=function(a){var b=a.cloneNode(j);switch(a.tagName.toLowerCase()){case "tr":return I("table",k,I("tbody",k,b));case "td":case "th":return I("table",k,I("tbody",k,I("tr",k,b)));default:return b}};function bg(a,b,c,d,f,g,i,n,q){wc.call(this,a);this.ol=b;this.event=c;this.Ca=d;this.Oi=f;this.Ni=g;this.Pg=i;this.xl=n;this.sb=q}v(bg,wc);function qf(a,b,c,d,f){U.call(this);this.w=a;this.oa=of();this.ei=this.Pd=l;this.Wc=b;this.Bb=c;this.O=f;this.Fl=d;this.Hb={};this.Ad={};this.pb=this.oa?new Zf:k;this.Ag=6}v(qf,U);m=qf.prototype;m.I=function(){this.e=K(zf,{name:this.w.name,nl:this.w.T,He:this.Wc})};
m.s=function(){qf.d.s.call(this);this.zd=G("programs",this.b());this.Gb=G("viewers",this.b());this.Mh=G("name",this.b());this.jf=G("graph",this.b());this.Qa=G("suggest",this.b());if(this.w.C)R(this.Qa,l);else{this.kc=new jg("Paste YouTube link");this.kc.g(G("program-input",this.b()));var a=new Pe(this.kc.b()),b=new kg(this.kc.b()),c=new lg(s(this.Ef,this),1E3);S(S(S(this.p(),b,mg,s(this.Ef,this)),a,"key",s(function(){c&&c.gf()},this)),this.kc,"focus",s(this.Ef,this))}this.da=(T(this.zd).width-200)/
this.Wc;if(this.ei){var b=0,d=40;this.zf=0;this.Tg=[new Bb(b,d)];this.vl=Math.floor((u()-this.O.getTime())/1E3);for(a=0;a<this.Wc/40;a++)this.Tg.push(new Bb(b+=40,d+=[-30,-5,15,10,25][Math.floor(5*Math.random())])),this.zf=Math.max(this.zf,d);this.Ui=Raphael(this.jf,"100%",60).path("M0,0").attr({stroke:"none",opacity:0.8,fill:"#5d5d5d"})}zd(this.Mh,"background",Raphael.getColor());b=this.w.pa;for(a=0;a<b.length;a++)b[a].time.getTime()<this.Bb.getTime()&&b[a].time.getTime()+1E3*b[a].media.duration>
this.Bb.getTime()-1E3*this.Wc?this.oc(b[a]):b[a].time.getTime()>this.Bb.getTime()&&this.oc(b[a]);if(this.oa){a=this.pb;b=this.zd;b.Mg=2;b.Rb=h;a.ba.push(b);this.pb.ce="drag";var f=this.b();this.pb.ih=function(a){var b=sa(a.currentTarget);this.o=this.be[b];this.B=this.Vd(this.o);this.ce&&B(this.B,this.ce);this.B.style.margin="0";this.B.style.position="absolute";this.B.style.visibility="hidden";f.appendChild(this.B);b=Jd(this.o);Kd(this.B,b);this.l=new Xd(this.B);this.l.Vf(this.of);N(this.l,"start",
this.dh,l,this);N(this.l,"end",this.bh,l,this);N(this.l,"earlycancel",this.Td,l,this);this.l.jc(a)};this.pb.init();var g={},i,n,q,t,A,J=j;S(S(S(this.p(),this.pb,"beforedragstart",s(function(a){(!this.Pd||!a.event.shiftKey)&&a.preventDefault()},this)),this.pb,"dragmove",function(a){q=q||a.Pg.x;t=t||Gd(a.Ca).x;A=A||(a.Ca.previousElementSibling!=h?a.Ca.previousElementSibling:Xb(a.Ca.previousSibling,l));J=J&&!!A;var b=A?T(A).width:h,c=A?Gd(A).x:h,d=a.Pg.x-q;10>Math.abs(d)||(a.sb&&!g[a.sb.id]&&0<d?(b=
T(a.Ca).width,c=Gd(a.sb).x,i=c-b+T(a.sb).width,d=this.w.Pc[a.sb.id],n=d.time.getTime()/1E3+d.media.duration-this.w.Pc[a.Ca.id].media.duration,Ed(a.Ca,i),Ed(a.sb,c-b-12),g[a.sb.id]=j,b=a.sb,b.parentNode&&b.parentNode.insertBefore(a.Ca,b.nextSibling)):J&&(0>d&&t+d<c+b)&&(b=T(a.Ca).width,i=c=Gd(A).x,n=this.w.Pc[A.id].time.getTime()/1E3,Ed(a.Ca,i),Ed(A,c+b+12),b=A.previousElementSibling!=h?A.previousElementSibling:Xb(A.previousSibling,l),A.parentNode&&A.parentNode.insertBefore(a.Ca,A),A=b,J=!!b))}),this.pb,
"dragend",function(a){n&&(Y("/admin/_rescheduleprogram",h,"POST","program="+a.Oi.id+"&time="+n),this.pb.init(),n=h);g={};i=A=t=q=h;J=j})}for(var a=this.w.$c,b=this.qc,d=r(a)?a.split(""):a,la=a.length-1;0<=la;--la)la in d&&b.call(this,d[la],la,a);S(S(S(S(this.p(),this.Qa,"click",s(this.Qj,this)),G("close",this.Qa),"click",s(function(a){a.preventDefault();a.stopPropagation();ng(this)},this)),G("name",this.b()),"click",s(function(){this.w.id!=V.a().j.id&&this.w.f()&&V.a().c(rf,this.w)},this)),Vc.a().Ud,
Tc,s(this.update,this));this.w.subscribe(Uf,this.oc,this);this.w.subscribe(Wf,this.qc,this);this.w.subscribe("remove-viewer",this.fk,this);this.w.subscribe(Xf,this.mg,this);V.a().subscribe(tf,this.si,this);V.a().subscribe(rf,function(){this.Ag=0;this.si()},this);Q.a().subscribe("toggle-admin",ba("Pd"),this);this.update()};m.si=function(){this.u&&C(this.Ad[this.u],"playing");this.u=k;var a=V.a().j.f();if(a){var b=this.Ad[a.id];b&&(this.u=a.id,B(b,"playing"))}};
m.oc=function(a){var b=I("div",{"class":"program",id:a.id}),c=a.media.duration*this.da,d=this.oa&&a.time.getTime()+1E3*a.media.duration>u();lc(b,Af,{Of:a,repeat:600<c,Qe:d});this.Ad[a.id]=b;var f=V.a().j.f();f&&a.id==f.id&&(B(b,"playing"),this.u=a.id);var g=G("thumb",b);O(function(){a.media.dg.height<T(b).height+50?(B(g,"fix-height"),B(g,"pan-left")):B(g,"pan-top");i&&Md(g,200);E(b,"stretched",360<a.media.dg.height)});Md(b,c-12);f=(a.time.getTime()-this.O.getTime())/1E3*this.da;Ed(b,f);Ed(this.Qa,
f+c);this.zd.appendChild(b);var i=120>c;E(b,"clipped",i);S(this.p(),b,"click",function(){Z.a().c(og,a.media)});var n=D(b,"clipped")?200:T(b).width,q=G("title",b),t=T(q).width;S(S(this.p(),b,"mouseover",function(){if(Q.a().Zb){var b=t+Gd(q).x;b>n&&(zd(q,"margin-left",-(b-n-10)+"px"),B(q,"marquee"));this.Pd||zd(g,"background-position-y",a.media.Vc+10*Math.max(a.media.dg.width/n,1)+"%")}}),b,"mouseout",function(){Q.a().Zb&&(zd(q,"margin-left",""),C(q,"marquee"),this.Pd||zd(g,"background-position-y",
a.media.Vc+"%"))});d&&(c=new Xd(G("repos",b)),c.gd=function(a,b){var c=b-24;-50<=c&&50>=c&&zd(g,"background-position-y",50-c+"%")},S(S(this.p(),c,"end",function(){var b=(g.style[Ia("background-position")]||"").split(" ")[1],b=b.substring(0,b.length-1);a.media.Vc=b;Y("/admin/_posthumb",ie(),"POST","media="+a.media.id+"&pos="+b)}),G("remove",b),"click",s(this.Nj,this,a,b)))};m.mg=function(a){var b=this.Ad[a.id],a=(gd(a.time+"Z").getTime()-this.O.getTime())/1E3*this.da;Ed(b,a)};
m.Nj=function(a){Y("admin/_media/collection",s(function(){alert("Disallowed on all channels.")},this),"POST","&media="+a.media.id+"&approve=false")};
m.qc=function(a){if(X.a().v.id!=a.m.id){var b=this.Hb[a.m.id];b||(b=I("div","viewer"),this.Gb.appendChild(b),this.Hb[a.m.id]=b);if(this.w.f()&&(!a.Jd||a.Jd.getTime()>this.O.getTime())){var c=K(Bf,{m:a.m});b.appendChild(c);var d=Math.max(a.ig.getTime(),this.O.getTime()),b=(d-this.O.getTime())/1E3*this.da+200,d=(u()-d)/1E3*this.da;Md(c,d);Ed(c,b);zd(c,"background",a.m.color);S(this.p(),c,"click",function(){Z.a().c(pg,a.m)})}}};m.fk=function(a){this.Hb[a.id]&&(Ub(this.Hb[a.id]),Hb(this.Hb,a.id))};
m.Qj=function(){if(!D(this.Qa,"show")){Pd(G("select-program",this.Qa),1);B(this.Qa,"show");var a=this.kc,b=qg(a);a.qf=j;a.b().focus();!b&&!rg&&(a.b().value=a.Ia);a.b().select();rg||(a.r&&ud(a.r,a.b(),"click",a.kf),O(a.Ri,10,a))}};function ng(a){C(a.Qa,"show");a.kc.Ab("");G("page2",a.b()).innerHTML=""}
m.Ef=function(){var a=G("select-content",this.b()),b=G("page2",this.b());if(!Vb(b).length)try{var c;var d=this.kc.W(),f=sg.exec(d);f?c=new tg(f[1]||f[2],h,h):e(Error("failed to parse video id from youtube url: "+d));Y(za("https://gdata.youtube.com/feeds/api/videos/%s?v=2&alt=json",c.Hk),s(function(d){d=ug(vg(d.target)).entry;lc(b,Cf,{title:d.title.$t,Ak:d.media$group.media$thumbnail[0].url});d=new mf("YES");d.g(G("button",b));(new se(a,[0,0],[160,0],300,wg)).play();S(this.p(),d,"action",s(this.Pj,
this,c))},this))}catch(g){}};m.Pj=function(a){Y("/_addprogram",s(function(a){a=xg(a.target);a.id&&(a=new Nf(a),this.w.c(Uf,a))},this),"POST","channel_id="+this.w.id+"&url="+a.Yc);Pd(G("button",this.Qa),0);R(G("added",this.Qa),j);Pd(G("select-program",this.Qa),0);O(s(function(){ng(this)},this),3E3)};
m.update=function(){E(this.b(),"offline",!this.w.pa.length);if(this.w.pa.length){if(this.ei){var a="",b=T(this.zd).width,c,d,f,g=(u()-this.O)/1E3,i=Xa(this.Tg,0,Math.floor(g/40));w(i,function(n,q){c=n.x/this.Wc*b;d=60-60*(n.y/this.zf);q==i.length-1&&(c=g/this.Wc*b);c+=6;q?(a+="L"+[c-30,f],a+="C"+[c-20,f,c-10,d,c,d]):a+="M"+[c,d]+"R";f=d},this);this.Ui.attr({path:a+"L"+c+",60 10,60z"})}if(this.u){var n=this.Ad[this.u],q=Gd(n).x+Gd(F("guide")).x,n=G("title",n);Ed(n,5>q?-q+10:5)}else this.Ag++;Db(this.w.$c,
function(a){if(this.w.f()&&!a.Jd&&this.Hb[a.m.id]){var b=Math.max(a.ig.getTime(),this.O.getTime());T(this.zd);var c=Math.floor((u()-b)/1E3*this.da),d=W.a().f();a.m.id==X.a().v.id&&d&&(c=Math.floor((d.time.getTime()+1E3*W.a().he()-b)/1E3*this.da));this.Hb[a.m.id].lastChild&&Md(this.Hb[a.m.id].lastChild,c)}},this);q=T(this.jf).height;n=T(this.Gb).height;q-=n;0>q&&zd(this.jf,"margin-top",-q+"px");Ld(this.Mh,T(this.b()).height-1)}};function X(){P.call(this);this.ti={};this.Ff=[]}v(X,P);ja(X);X.prototype.add=function(a){this.ti[a.id]=a};X.prototype.get=function(a){return this.ti[a]};function yg(a,b){var c=a.get(b.id);c||(c=new Pf(b),a.add(c));return c};function zg(a){if("function"==typeof a.ie)return a.ie();if(r(a))return a.split("");if(oa(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return Eb(a)}function Ag(a,b,c){if("function"==typeof a.forEach)a.forEach(b,c);else if(oa(a)||r(a))w(a,b,c);else{var d;if("function"==typeof a.hf)d=a.hf();else if("function"!=typeof a.ie)if(oa(a)||r(a)){d=[];for(var f=a.length,g=0;g<f;g++)d.push(g)}else d=Fb(a);else d=h;for(var f=zg(a),g=f.length,i=0;i<g;i++)b.call(c,f[i],d&&d[i],a)}};function Bg(a,b){this.wb={};this.N=[];var c=arguments.length;if(1<c){c%2&&e(Error("Uneven number of arguments"));for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else if(a){a instanceof Bg?(c=a.hf(),d=a.ie()):(c=Fb(a),d=Eb(a));for(var f=0;f<c.length;f++)this.set(c[f],d[f])}}m=Bg.prototype;m.R=0;m.wi=0;m.ie=function(){Cg(this);for(var a=[],b=0;b<this.N.length;b++)a.push(this.wb[this.N[b]]);return a};m.hf=function(){Cg(this);return this.N.concat()};
m.clear=function(){this.wb={};this.wi=this.R=this.N.length=0};function Cg(a){if(a.R!=a.N.length){for(var b=0,c=0;b<a.N.length;){var d=a.N[b];Object.prototype.hasOwnProperty.call(a.wb,d)&&(a.N[c++]=d);b++}a.N.length=c}if(a.R!=a.N.length){for(var f={},c=b=0;b<a.N.length;)d=a.N[b],Object.prototype.hasOwnProperty.call(f,d)||(a.N[c++]=d,f[d]=1),b++;a.N.length=c}}m.get=function(a,b){return Object.prototype.hasOwnProperty.call(this.wb,a)?this.wb[a]:b};
m.set=function(a,b){Object.prototype.hasOwnProperty.call(this.wb,a)||(this.R++,this.N.push(a),this.wi++);this.wb[a]=b};m.clone=function(){return new Bg(this)};function Dg(a){return Eg(a||arguments.callee.caller,[])}
function Eg(a,b){var c=[];if(Qa(b,a))c.push("[...circular reference...]");else if(a&&50>b.length){c.push(Fg(a)+"(");for(var d=a.arguments,f=0;f<d.length;f++){0<f&&c.push(", ");var g;g=d[f];switch(typeof g){case "object":g=g?"object":"null";break;case "string":break;case "number":g=String(g);break;case "boolean":g=g?"true":"false";break;case "function":g=(g=Fg(g))?g:"[fn]";break;default:g=typeof g}40<g.length&&(g=g.substr(0,40)+"...");c.push(g)}b.push(a);c.push(")\n");try{c.push(Eg(a.caller,b))}catch(i){c.push("[exception trying to get caller]\n")}}else a?
c.push("[...long stack...]"):c.push("[end]");return c.join("")}function Fg(a){if(Gg[a])return Gg[a];a=String(a);if(!Gg[a]){var b=/function ([^\(]+)/.exec(a);Gg[a]=b?b[1]:"[Anonymous]"}return Gg[a]}var Gg={};function Hg(a,b,c,d,f){this.reset(a,b,c,d,f)}Hg.prototype.mk=0;Hg.prototype.Sg=k;Hg.prototype.Rg=k;var Ig=0;Hg.prototype.reset=function(a,b,c,d,f){this.mk="number"==typeof f?f:Ig++;this.Jl=d||u();this.td=a;this.xj=b;this.Al=c;delete this.Sg;delete this.Rg};Hg.prototype.ci=ba("td");function Jg(a){this.yj=a}Jg.prototype.H=k;Jg.prototype.td=k;Jg.prototype.Z=k;Jg.prototype.jh=k;function Kg(a,b){this.name=a;this.value=b}Kg.prototype.toString=ca("name");var Lg=new Kg("SEVERE",1E3),Mg=new Kg("WARNING",900),Ng=new Kg("INFO",800),Og=new Kg("CONFIG",700),Pg=new Kg("FINE",500);m=Jg.prototype;m.getParent=ca("H");m.Yg=function(){this.Z||(this.Z={});return this.Z};m.ci=ba("td");function Qg(a){return a.td?a.td:a.H?Qg(a.H):k}
m.log=function(a,b,c){if(a.value>=Qg(this).value){a=this.Ti(a,b,c);b="log:"+a.xj;p.console&&(p.console.timeStamp?p.console.timeStamp(b):p.console.markTimeline&&p.console.markTimeline(b));p.msWriteProfilerMark&&p.msWriteProfilerMark(b);for(b=this;b;){var c=b,d=a;if(c.jh)for(var f=0,g=h;g=c.jh[f];f++)g(d);b=b.getParent()}}};
m.Ti=function(a,b,c){var d=new Hg(a,String(b),this.yj);if(c){d.Sg=c;var f;var g=arguments.callee.caller;try{var i;var n=ha("window.location.href");if(r(c))i={message:c,name:"Unknown error",lineNumber:"Not available",fileName:n,stack:"Not available"};else{var q,t,A=l;try{q=c.lineNumber||c.zl||"Not available"}catch(J){q="Not available",A=j}try{t=c.fileName||c.filename||c.sourceURL||n}catch(la){t="Not available",A=j}i=A||!c.lineNumber||!c.fileName||!c.stack?{message:c.message,name:c.name,lineNumber:q,
fileName:t,stack:c.stack||"Not available"}:c}f="Message: "+Ba(i.message)+'\nUrl: <a href="view-source:'+i.fileName+'" target="_new">'+i.fileName+"</a>\nLine: "+i.lineNumber+"\n\nBrowser stack:\n"+Ba(i.stack+"-> ")+"[end]\n\nJS stack traversal:\n"+Ba(Dg(g)+"-> ")}catch(ka){f="Exception trying to expose exception! You win, we lose. "+ka}d.Rg=f}return d};function Rg(a,b){a.log(Lg,b,h)}m.info=function(a,b){this.log(Ng,a,b)};function Sg(a,b){a.log(Pg,b,h)}var Tg={},Ug=k;
function Vg(a){Ug||(Ug=new Jg(""),Tg[""]=Ug,Ug.ci(Og));var b;if(!(b=Tg[a])){b=new Jg(a);var c=a.lastIndexOf("."),d=a.substr(c+1),c=Vg(a.substr(0,c));c.Yg()[d]=b;b.H=c;Tg[a]=b}return b};function ug(a){a=String(a);if(/^\s*$/.test(a)?0:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x10-\x1f\x80-\x9f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,"")))try{return eval("("+a+")")}catch(b){}e(Error("Invalid JSON string: "+a))};function Wg(){}Wg.prototype.Rd=k;var Xg;function Yg(){}v(Yg,Wg);function Zg(a){return(a=$g(a))?new ActiveXObject(a):new XMLHttpRequest}function ah(a){var b={};$g(a)&&(b[0]=j,b[1]=j);return b}
function $g(a){if(!a.oh&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var b=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],c=0;c<b.length;c++){var d=b[c];try{return new ActiveXObject(d),a.oh=d}catch(f){}}e(Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed"))}return a.oh}Xg=new Yg;var bh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([\\w\\d\\-\\u0100-\\uffff.%]*)(?::([0-9]+))?)?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");function ch(a){M.call(this);this.headers=new Bg;this.ad=a||k}v(ch,Qc);ch.prototype.D=Vg("goog.net.XhrIo");var dh=/^https?$/i,eh=[];function Y(a,b,c,d){var f=new ch;eh.push(f);b&&N(f,"complete",b);N(f,"ready",xa(fh,f));f.send(a,c,d,h)}function fh(a){a.$();Ra(eh,a)}m=ch.prototype;m.nb=l;m.z=k;m.Ne=k;m.sd="";m.Ah="";m.qd=0;m.rd="";m.ff=l;m.me=l;m.rf=l;m.$b=l;m.Ie=0;m.lc=k;m.Ae="";m.Ik=l;
m.send=function(a,b,c,d){this.z&&e(Error("[goog.net.XhrIo] Object is active with another request"));b=b?b.toUpperCase():"GET";this.sd=a;this.rd="";this.qd=0;this.Ah=b;this.ff=l;this.nb=j;this.z=this.ad?Zg(this.ad):Zg(Xg);this.Ne=this.ad?this.ad.Rd||(this.ad.Rd=ah(this.ad)):Xg.Rd||(Xg.Rd=ah(Xg));this.z.onreadystatechange=s(this.Sh,this);try{Sg(this.D,gh(this,"Opening Xhr")),this.rf=j,this.z.open(b,a,j),this.rf=l}catch(f){Sg(this.D,gh(this,"Error opening Xhr: "+f.message));hh(this,f);return}var a=c||
"",g=this.headers.clone();d&&Ag(d,function(a,b){g.set(b,a)});d=p.FormData&&a instanceof p.FormData;if(b="POST"==b)b=!Object.prototype.hasOwnProperty.call(g.wb,"Content-Type")&&!d;b&&g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");Ag(g,function(a,b){this.z.setRequestHeader(b,a)},this);this.Ae&&(this.z.responseType=this.Ae);"withCredentials"in this.z&&(this.z.withCredentials=this.Ik);try{this.lc&&(Sc.clearTimeout(this.lc),this.lc=k),0<this.Ie&&(Sg(this.D,gh(this,"Will abort after "+
this.Ie+"ms if incomplete")),this.lc=Sc.setTimeout(s(this.Ck,this),this.Ie)),Sg(this.D,gh(this,"Sending request")),this.me=j,this.z.send(a),this.me=l}catch(i){Sg(this.D,gh(this,"Send error: "+i.message)),hh(this,i)}};m.Ck=function(){"undefined"!=typeof ea&&this.z&&(this.rd="Timed out after "+this.Ie+"ms, aborting",this.qd=8,Sg(this.D,gh(this,this.rd)),this.dispatchEvent("timeout"),this.abort(8))};function hh(a,b){a.nb=l;a.z&&(a.$b=j,a.z.abort(),a.$b=l);a.rd=b;a.qd=5;ih(a);jh(a)}
function ih(a){a.ff||(a.ff=j,a.dispatchEvent("complete"),a.dispatchEvent("error"))}m.abort=function(a){this.z&&this.nb&&(Sg(this.D,gh(this,"Aborting")),this.nb=l,this.$b=j,this.z.abort(),this.$b=l,this.qd=a||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),jh(this))};m.k=function(){this.z&&(this.nb&&(this.nb=l,this.$b=j,this.z.abort(),this.$b=l),jh(this,j));ch.d.k.call(this)};m.Sh=function(){!this.rf&&!this.me&&!this.$b?this.Mj():kh(this)};m.Mj=function(){kh(this)};
function kh(a){if(a.nb&&"undefined"!=typeof ea)if(a.Ne[1]&&4==lh(a)&&2==mh(a))Sg(a.D,gh(a,"Local request error detected and ignored"));else if(a.me&&4==lh(a))Sc.setTimeout(s(a.Sh,a),0);else if(a.dispatchEvent("readystatechange"),4==lh(a)){Sg(a.D,gh(a,"Request complete"));a.nb=l;try{var b=mh(a),c,d;a:switch(b){case 200:case 201:case 202:case 204:case 304:case 1223:d=j;break a;default:d=l}if(!(c=d)){var f;if(f=0===b){var g=String(a.sd).match(bh)[1]||k;if(!g&&self.location)var i=self.location.protocol,
g=i.substr(0,i.length-1);f=!dh.test(g?g.toLowerCase():"")}c=f}if(c)a.dispatchEvent("complete"),a.dispatchEvent("success");else{a.qd=6;var n;try{n=2<lh(a)?a.z.statusText:""}catch(q){Sg(a.D,"Can not get status: "+q.message),n=""}a.rd=n+" ["+mh(a)+"]";ih(a)}}finally{jh(a)}}}
function jh(a,b){if(a.z){var c=a.z,d=a.Ne[0]?ia:k;a.z=k;a.Ne=k;a.lc&&(Sc.clearTimeout(a.lc),a.lc=k);b||a.dispatchEvent("ready");try{c.onreadystatechange=d}catch(f){Rg(a.D,"Problem encountered resetting onreadystatechange: "+f.message)}}}m.ac=function(){return!!this.z};function lh(a){return a.z?a.z.readyState:0}function mh(a){try{return 2<lh(a)?a.z.status:-1}catch(b){return a.D.log(Mg,"Can not get status: "+b.message,h),-1}}function xg(a){if(a.z)return ug(a.z.responseText)}
function vg(a){try{if(!a.z)return k;if("response"in a.z)return a.z.response;switch(a.Ae){case "":case "text":return a.z.responseText;case "arraybuffer":if("mozResponseArrayBuffer"in a.z)return a.z.mozResponseArrayBuffer}Rg(a.D,"Response type "+a.Ae+" is not supported on this browser");return k}catch(b){return Sg(a.D,"Can not get response: "+b.message),k}}function gh(a,b){return b+" ["+a.Ah+" "+a.sd+" "+mh(a)+"]"};function V(){P.call(this);this.tc=[];this.sc={};this.subscribe(rf,this.Nb,this);this.subscribe(tf,this.lg,this)}v(V,P);ja(V);V.prototype.get=function(a){return this.sc[a]};function yf(a,b){if(a.j&&a.j.f()&&(b&&!a.j.C||!b))return a.j;if(a.pd&&a.pd.f()&&(b&&!a.pd.C||!b))return a.pd;for(var c=a.tc[0],d=c.f(),f=0;!d&&f<a.tc.length;)c=!c.C?a.tc[f]:c,d=c.f(),f++;return!d?a.j:c}
V.prototype.xf=function(a,b){Db(a,s(function(a){var b=new Tf(a);this.tc.push(b);this.sc[a.id]=b;b.C&&(this.C=b)},this));this.j=this.sc[b]||this.tc[0];(this.j=yf(this))&&this.lg(this.j.f())};V.prototype.Nb=function(a,b){if(a&&!this.j||a&&this.j&&this.j.id!=a.id){this.pd=this.j;this.j=a;this.lg(a.f());var c=a.f(),c=c&&!!c.media.cc.length;Y("/_changechannel",ie(),"POST","channel="+a.id+"&friends="+c+(b?"&forced=true":""));Sf.a().Nb(a,this.pd)}};
V.prototype.lg=function(a){if(this.j&&(this.u&&w(this.j.$c,function(a){Sa(this.u.media.cc,function(b){return b.id==a.m.id})},this),a)){this.u=a;var b=Ma(this.j.$c,function(a){return a.m});a.media.cc=Ta(a.media.cc,b)}};function wf(){var a=V.a();if(!a.C){var b=X.a().v;a.C=new Tf({id:b.id,name:b.name.split(" ")[0]+"'s Channel"})}return a.C}var rf="change-channel",tf="next-program";function nh(){U.call(this);this.Yb=new mf("Guide");df(this.Yb,16,j);this.Za=new mf("Sidebar");df(this.Za,16,j);this.Rf=new mf("Restart");this.xa=new mf("Play");df(this.xa,16,j);this.Nd=new mf("Volume");df(this.Nd,16,j);this.rc=new mf("Admin");df(this.rc,16,j);this.ne=new mf("Info")}v(nh,U);
nh.prototype.s=function(){nh.d.s.call(this);this.ik=G("right",this.b());this.Ka=G("progress",this.b());this.bi=G("seek",this.b());this.eb=G("elapsed",this.b());this.Ek=G("title",this.b());this.Qg=G("duration",this.b());this.ml=G("current-time",this.b());Ce(this,this.Yb);this.Yb.g(F("guide-toggle"));cf(this.Yb,D(this.b(),"guide-toggled"));Ce(this,this.Za);this.Za.g(F("sidebar-toggle"));cf(this.Za,D(this.b(),"sidebar-toggled"));Ce(this,this.Rf);this.Rf.g(G("restart",this.b()));Ce(this,this.xa);this.xa.g(G("play",
this.b()));Ce(this,this.Nd);this.Nd.g(G("volume",this.b()));Ce(this,this.ne);this.ne.g(F("info-toggle"));R(this.ne.b(),X.a().v.Oe!=Qf);Ce(this,this.rc);this.rc.g(F("admin-toggle"));R(this.rc.b(),X.a().v.Oe==Qf);var a=new lg(this.zk,1E3,this);this.resize();this.l=new Xd(this.bi);this.l.Na(l);var b=this.Ka,c=this.eb,d=this.Qg;this.l.gd=function(a){if(0<a&&a<T(b).width){this.target.style.left=a+"px";c.style.width=a+"px";var a=a/T(b).width,g=W.a().f().media.duration;ac(d,oh(Math.round(a*g).toString())+
" / "+oh(g.toString()))}};S(S(S(S(S(S(S(S(S(S(S(S(this.p(),window,"resize",s(this.resize,this)),this.Yb,"action",s(function(){a.gf()},this)),this.Za,"action",s(function(a){a.stopPropagation();Q.a().c(Yc,Me(this.Za))},this)),this.Rf,"action",s(function(a){a.stopPropagation();W.a().f()&&(a=Of(W.a().f().media),W.a().c(uf,a),this.resize())},this)),this.xa,"action",s(function(a){a.stopPropagation();Q.a().c($c,!Me(this.xa));this.resize()},this)),this.ne,"action",s(function(a){a.stopPropagation();Q.a().c("toggle-info")},
this)),this.Nd,"action",s(function(a){a.stopPropagation();Q.a().c("mute",Me(this.Nd))},this)),this.rc,"action",s(function(a){a.stopPropagation();Q.a().c("toggle-admin",Me(this.rc));this.resize()},this)),Vc.a().Ud,Tc,s(function(){if(W.a().f()){var a=W.a().getCurrentTime()/W.a().f().media.duration;0.98<a&&W.a().c(ph);V.a().j.C&&!D(this.Ka,"drag")&&(ac(this.Qg,(W.a().getCurrentTime()?oh(W.a().getCurrentTime().toString())+" / ":"")+oh(W.a().f().media.duration.toString())),Md(this.eb,this.Pf?a*this.Pf:
0))}},this)),this.Ka,"click",s(function(a){!D(this.Ka,"drag")&&W.a().f()&&(a=a.offsetX/T(this.Ka).width*W.a().f().media.duration,C(this.eb,"animate"),W.a().c(qh,a),O(s(function(){B(this.eb,"animate")},this),1E3))},this)),this.l,"beforedrag",s(function(){B(this.Ka,"drag")},this)),this.l,"end",s(function(a){this.bi.style.left="";a=a.left/T(this.Ka).width*W.a().f().media.duration;C(this.eb,"animate");W.a().c(qh,a);O(s(function(){C(this.Ka,"drag");B(this.eb,"animate")},this),1E3)},this));W.a().subscribe(uf,
function(a){rh(this,a,j)},this);W.a().subscribe(sh,function(){this.l.Na(j);this.resize()},this);V.a().subscribe(rf,function(){C(this.b(),"window");O(s(this.resize,this),1E3)},this);V.a().subscribe(tf,function(){this.resize()},this);Q.a().subscribe(Zc,this.Je,this);Q.a().subscribe(Yc,function(a){cf(this.Za,a);this.resize()},this);Q.a().subscribe($c,function(a){cf(this.xa,!a)},this);W.a().subscribe(sh,function(){V.a().j.C&&W.a().f()&&this.resize()},this)};
function rh(a,b,c){ac(a.Ek,b.media.name.toUpperCase());c&&(C(a.eb,"animate"),Md(a.eb,0),O(s(function(){B(this.eb,"animate")},a),1E3))}nh.prototype.zk=function(){var a=Me(this.Yb);Q.a().c(Zc,a)};nh.prototype.Je=function(a){cf(this.Yb,a);a&&(C(this.b(),"window"),C(this.b(),"collapsed"),O(s(this.resize,this)));O(s(function(){E(this.b(),"guide-toggled",a);a||(V.a().j&&V.a().j.f(),B(this.b(),"collapsed"),this.resize())},this),a?0:600)};
nh.prototype.resize=function(){Md(this.b(),H().width-(Me(this.Za)?300:0));if(V.a().j.C)W.a().f()&&(R(this.Ka,j),rh(this,W.a().f()),this.Pf=H().width-(Me(this.Za)?560:260)-50,Md(this.Ka,this.Pf));else{R(this.Ka,l);var a=F("guide"),b=G("current",a),b=Ob("program",b),c=b[b.length-1],a=c?Gd(a).x+Gd(c).x+T(c).width+210:9999999,d=Math.min(H().width-200,Math.max(100,H().width-a)),a=Math.max(100,Me(this.Za)&&250<d?d-247:d+5);this.jk!=a&&(this.jk=a,Md(this.ik,a));O(s(function(){E(this.b(),"window",D(this.b(),
"collapsed")&&!!c&&d<H().width-203)},this),400)}};function th(a){return(a.link?'<a href="'+L(a.link)+'">':"")+'<div class="note'+(a.pf?" pic":"")+'">'+(a.pf?'<div class="picture"><img class="image" src='+L(a.pf)+' style="display: none"/></div>':"")+'<div class="action">'+(a.m?L(a.m.name)+" ":"")+L(a.action)+'</div><div class="content">'+L(a.content)+'</div><div class="close"></div></div>'+(a.link?"</a>":"")};function uh(){U.call(this)}v(uh,U);uh.prototype.I=function(){this.e=I("div",{id:"notify"})};uh.prototype.G=function(a){uh.d.G.call(this,a);If.a().subscribe(Kf,function(a,c,d,f,g){this.fi(j,a,c,d,f,g)},this);If.a().subscribe(Jf,function(a,c,d,f,g){this.fi(l,a,c,d,f,g)},this)};
uh.prototype.fi=function(a,b,c,d,f,g){var i=K(th,{action:b,content:c,m:d,pf:f,link:g}),n=G("image",i);G("close",i);S(S(this.p(),i,"click",function(a){a.preventDefault();a.stopPropagation();Ub(i)}),n,"load",function(){R(n,j);O(function(){n.style.marginLeft=-1*n.clientWidth/2+"px";n.style.marginTop=-1*n.clientHeight/2+"px"})});this.b().appendChild(i);var q=G("note",i);O(function(){B(q,"show");a?O(function(){C(q,"show");B(q,"fade-out");O(function(){Ub(i)},5100)},3E3):B(q,"dim")})};function If(){P.call(this)}v(If,P);ja(If);var Kf="flash",Jf="show";function W(){P.call(this);this.subscribe(uf,function(a){wf().c(Uf,a);Y("/_addprogram",ie(),"POST","channel_id="+V.a().C.id+"&media_id="+a.media.id+"&async=true");Yf(Sf.a(),a.media)},this);this.subscribe(sh,function(a){Y("/_started",ie(),"POST","media_id="+a.id)},this)}v(W,P);ja(W);W.prototype.Xf=ba("t");W.prototype.f=ca("u");W.prototype.getCurrentTime=function(){return this.t&&this.t.getCurrentTime?this.t.getCurrentTime():0};
W.prototype.he=function(){return this.t&&this.t.getCurrentTime?this.t.getCurrentTime():0};var ph="before-end",uf="play-async",sh="playing",qh="seek";function vh(){fe.call(this);this.queue=[]}v(vh,fe);vh.prototype.add=function(a){Qa(this.queue,a)||(this.queue.push(a),N(a,"finish",this.Bj,l,this))};vh.prototype.k=function(){w(this.queue,function(a){a.$()});this.queue.length=0;vh.d.k.call(this)};function wh(){vh.call(this);this.Da=0}v(wh,vh);
wh.prototype.play=function(a){if(0==this.queue.length)return l;if(a||this.i==ge)this.Da<this.queue.length&&this.queue[this.Da].i!=ge&&this.queue[this.Da].stop(l),this.Da=0,this.yb();else if(1==this.i)return l;this.ma("play");-1==this.i&&this.ma("resume");this.startTime=u();this.kd=k;this.i=1;this.queue[this.Da].play(a);return j};
wh.prototype.stop=function(a){this.i=ge;this.kd=u();if(a)for(a=this.Da;a<this.queue.length;++a){var b=this.queue[a];b.i==ge&&b.play();b.i==ge||b.stop(j)}else this.Da<this.queue.length&&this.queue[this.Da].stop(l);this.ma("stop");this.zb()};wh.prototype.Bj=function(){1==this.i&&(this.Da++,this.Da<this.queue.length?this.queue[this.Da].play():(this.kd=u(),this.i=ge,this.ma("finish"),this.zb()))};function xh(a){return a*a*a}function wg(a){return 1-Math.pow(1-a,3)};function yh(){U.call(this)}v(yh,U);m=yh.prototype;
m.s=function(){yh.d.s.call(this);(this.u=(this.S=V.a().j)&&this.S.f())&&u();this.ge=G("fullscreen",this.b());var a=G("expand",this.b());R(this.ge,this.ji());this.Fe=F("stagecover");this.Ih=G("message",this.Fe);this.M=G("spinner",this.Fe);zh(this);this.u?Ah(this,this.u):W.a().c("no-media");S(S(S(S(S(S(this.p(),window,"resize",s(this.resize,this)),this.ge,"click",s(function(a){if(Ab(this.ge,"full")){var c=G("main");c.Xh&&c.Xh();c.webkitRequestFullScreen&&c.webkitRequestFullScreen();c.mozRequestFullScreen&&
c.mozRequestFullScreen()}else document.Ei&&document.Ei(),document.webkitCancelFullScreen&&document.webkitCancelFullScreen(),document.mozCancelFullScreen&&document.mozCancelFullScreen();a.stopPropagation();a.preventDefault()},this)),this.b(),"dblclick",s(this.oi,this)),a,"click",s(this.oi,this)),this.b(),"mousemove",s(function(a){var c=a.offsetX/this.ua,a=a.offsetY/this.ra;if(0.7<c&&0.9>c&&0.7<a&&0.9>a&&(this.yd==YT.PlayerState.PLAYING||this.yd==YT.PlayerState.PAUSED))R(this.Fe,l),O(s(function(){R(this.Fe,
j)},this),500)},this)),this.b(),"click",s(function(a){if(!(a.offsetX>T(this.b()).width/2&&a.offsetY>T(this.b()).height/2)&&this.t&&this.t.getPlayerState)switch(this.t.getPlayerState()){case YT.PlayerState.PLAYING:Q.a().c($c,l);break;case YT.PlayerState.PAUSED:Q.a().c($c,j)}},this));V.a().subscribe(rf,this.Nb,this);V.a().subscribe(tf,function(a){this.u=a;Ah(this,a);zh(this)},this);W.a().subscribe(uf,this.Kf,this);W.a().subscribe(qh,this.lk,this);W.a().subscribe(ph,function(){zh(this,j)},this);Q.a().subscribe(Yc,
function(a){this.resize(a)},this);Q.a().subscribe(Zc,function(){O(s(this.resize,this))},this);Q.a().subscribe($c,function(a){a?this.t.playVideo():this.t.pauseVideo();var a=G(a?"play":"pause",this.b()),c=new wh;c.add(new ve(a,250,wg));c.add(new ue(a,250,xh));c.play()},this);Q.a().subscribe("mute",function(a){this.t&&(a?this.t.mute():this.t.unMute())},this);Q.a().subscribe("restart",function(){this.t.seekTo(0)},this);this.resize()};
m.ji=function(){var a=G("main");return!(!a.Xh&&!a.webkitRequestFullScreen&&!a.mozRequestFullScreen)};m.oi=function(a){a.preventDefault();a.stopPropagation();Z.a();a=!D(F("sidebar"),"toggled");Q.a().c(Yc,a);Q.a().c(Zc,a)};function Ah(a,b){W.a().u=b;a.tj!=b.id&&(If.a().c(Kf,"Now Playing",b.media.name,h,b.media.li,"#info:"+b.media.id),a.tj=b.id);a.play(b.media)}
m.play=function(a,b){!this.t||!this.t.loadVideoById?(this.t=new YT.Player("ytplayer",{height:H().height-40,width:H().width,videoId:a.Ec,playerVars:{controls:0,showinfo:0,iv_load_policy:3,modestbranding:1,wmode:"opaque"},events:{onStateChange:s(this.Yj,this),onReady:s(this.Jj,this),onError:s(this.Ij,this)}}),W.a().Xf(this.t)):(this.t.cueVideoById(a.Ec),O(s(function(){var c=b||0;!this.t.getPlayerState()&&4>c&&this.play(a,++c)},this),1E3))};
m.resize=function(){var a=F("ytplayer"),b=F("stagecover"),c=G("message",b),d=F("guide").style.height,d=d.substring(0,d.length-2),f=D(F("sidebar"),"toggled")?300:0;this.ra=H().height-d;this.ua=H().width-f;Ld(a,H().height-d);Md(a,H().width-f);Ld(b,H().height-d);Md(b,H().width-f);a=T(c);zd(c,{"margin-left":-a.width/2+"px","margin-top":-a.height/2+"px"});E(this.ge,"full",this.ji&&(document.fullScreen||document.webkitIsFullScreen||document.Cl))};m.Nb=function(a){if(a=a.f())this.u=a,Ah(this,a);zh(this)};
m.Kf=function(a){this.u=a;Ah(this,a);zh(this);Y("/_optin",ie(),"POST","media_id="+this.u.media.id)};m.lk=function(a){this.t.seekTo&&this.t.seekTo(a,j)};
m.Yj=function(a){this.yd=a.data;zh(this);switch(a.data){case YT.PlayerState.CUED:window.console.log();a=this.u.async?this.u.seek:(u()-this.u.time.getTime())/1E3;this.t.seekTo(a);this.t.playVideo();Q.a().c($c,j);break;case YT.PlayerState.PLAYING:W.a().c(sh,this.u.media);break;case YT.PlayerState.ENDED:var a=X.a().v.Zd,b=this.u.media;a.Hh.push(b);a.U.C&&a.U.T&&(a.U.T.seek=k,a.U.T=k);Y("/_seen",ie(),"POST","media_id="+b.id+"&session_id="+a.id+"&async="+a.U.C);(a=V.a().j.f())?V.a().c(tf,a):(W.a().u=k,
window.console.log(yf(V.a())),V.a().c(rf,yf(V.a()),j))}};m.Jj=function(){O(s(function(){if(this.t&&(!this.t.getPlayerState||!this.t.getPlayerState()))Ah(this,this.u);else if(this.t.getPlayerState()){var a=this.u.async?this.u.seek:(u()-this.u.time.getTime())/1E3;this.t.seekTo(a);this.t.playVideo()}},this),1E3)};m.Ij=function(){W.a().c("no-media")};
function zh(a,b){var c=F("stagecover"),d=a.u?W.a().getCurrentTime():0;!a.u||a.u&&d>a.u.media.duration?(W.a().c("no-media"),ac(a.Ih.firstChild,Bh),R(a.M,l),B(c,"covered")):a.yd!=YT.PlayerState.PLAYING&&a.yd!=YT.PlayerState.PAUSED||b?(ac(a.Ih.firstChild,Ch),R(a.M,j),B(c,"covered")):(R(a.M,l),C(c,"covered"));Pd(c,a.yd==YT.PlayerState.BUFFERING?0.9:1);a.resize()}var Bh="THIS CHANNEL IS CURRENTLY OFFLINE",Ch="LOADING STORY";function jg(a,b){U.call(this,b);this.Ia=a||""}v(jg,U);jg.prototype.Xa=k;var rg="placeholder"in document.createElement("input");m=jg.prototype;m.nd=l;m.I=function(){this.e=this.Ga().I("input",{type:"text"})};m.G=function(a){jg.d.G.call(this,a);this.Ia||(this.Ia=a.getAttribute("label")||"");var b;a:{var c=Nb(a);try{b=c&&c.activeElement;break a}catch(d){}b=k}b==a&&(this.nd=j,C(this.b(),this.bd));rg?this.b().placeholder=this.Ia:this.b().setAttribute("aria-label",this.Ia)};
m.s=function(){jg.d.s.call(this);var a=new sd(this);S(a,this.b(),"focus",this.kf);S(a,this.b(),"blur",this.Zi);rg?this.r=a:(hb&&S(a,this.b(),["keypress","keydown","keyup"],this.ej),S(a,Nb(this.b())?Nb(this.b()).parentWindow||Nb(this.b()).defaultView:window,"load",this.mj),this.r=a,Dh(this));Eh(this);this.b().sj=this};m.Vb=function(){jg.d.Vb.call(this);this.r&&(this.r.$(),this.r=k);this.b().sj=k};function Dh(a){!a.Si&&(a.r&&a.b().form)&&(S(a.r,a.b().form,"submit",a.hj),a.Si=j)}
m.k=function(){jg.d.k.call(this);this.r&&(this.r.$(),this.r=k)};m.bd="label-input-label";m.kf=function(){this.nd=j;C(this.b(),this.bd);if(!rg&&!qg(this)&&!this.qf){var a=this,b=function(){a.b().value=""};x?O(b,10):b()}};m.Zi=function(){rg||(vd(this.r,this.b(),"click",this.kf),this.Xa=k);this.nd=l;Eh(this)};m.ej=function(a){27==a.keyCode&&("keydown"==a.type?this.Xa=this.b().value:"keypress"==a.type?this.b().value=this.Xa:"keyup"==a.type&&(this.Xa=k),a.preventDefault())};
m.hj=function(){qg(this)||(this.b().value="",O(this.Yi,10,this))};m.Yi=function(){qg(this)||(this.b().value=this.Ia)};m.mj=function(){Eh(this)};function qg(a){return!!a.b()&&""!=a.b().value&&a.b().value!=a.Ia}m.clear=function(){this.b().value="";this.Xa!=k&&(this.Xa="")};m.reset=function(){qg(this)&&(this.clear(),Eh(this))};m.Ab=function(a){this.Xa!=k&&(this.Xa=a);this.b().value=a;Eh(this)};m.W=function(){return this.Xa!=k?this.Xa:qg(this)?this.b().value:""};
function Eh(a){rg?a.b().placeholder!=a.Ia&&(a.b().placeholder=a.Ia):(Dh(a),a.b().setAttribute("aria-label",a.Ia));qg(a)?C(a.b(),a.bd):(!a.qf&&!a.nd&&B(a.b(),a.bd),rg||O(a.hk,10,a))}m.Na=function(a){this.b().disabled=!a;E(this.b(),this.bd+"-disabled",!a)};m.isEnabled=function(){return!this.b().disabled};m.Ri=function(){this.qf=l};m.hk=function(){this.b()&&(!qg(this)&&!this.nd)&&(this.b().value=this.Ia)};function Fh(a,b,c){M.call(this);this.vb=a;this.L=b;this.Ha=c;this.We=s(this.Sj,this)}v(Fh,M);var lg=Fh;m=Fh.prototype;m.Ee=l;m.Uh=0;m.la=k;m.gf=function(){!this.la&&!this.Uh?this.hd():this.Ee=j};m.stop=function(){this.la&&(Sc.clearTimeout(this.la),this.la=k,this.Ee=l)};m.k=function(){Fh.d.k.call(this);this.stop()};m.Sj=function(){this.la=k;this.Ee&&!this.Uh&&(this.Ee=l,this.hd())};m.hd=function(){this.la=O(this.We,this.L);this.vb.call(this.Ha)};function Gh(a,b){M.call(this);this.vb=a;this.Ha=b;this.Wa=new he(s(this.Rj,this),0,this)}v(Gh,M);m=Gh.prototype;m.L=0;m.Sf=0;m.sh=l;m.k=function(){this.Wa.$();delete this.vb;delete this.Ha;Gh.d.k.call(this)};m.start=function(a,b){this.stop();this.sh=l;var c=b||0;this.L=Math.max(a||0,0);this.Sf=0>c?-1:u()+c;this.Wa.start(0>c?this.L:Math.min(this.L,c))};m.stop=function(){this.Wa.stop()};m.ac=function(){return this.Wa.ac()};
m.Rj=function(){if(this.vb.call(this.Ha))this.sh=j;else if(0>this.Sf)this.Wa.start(this.L);else{var a=this.Sf-u();0>=a||this.Wa.start(Math.min(this.L,a))}};function kg(a){M.call(this);this.e=a;this.ud=this.e.value;this.r=new sd(this);this.Bh=u();y||x||hb&&z("1.9")?S(this.r,a,"paste",this.xc):S(this.r,a,["keydown","blur","focus","mouseover","input"],this.fj);this.Wa=new Gh(s(this.Eg,this))}v(kg,Qc);var mg="after_paste";m=kg.prototype;m.i="init";m.D=Vg("goog.events.PasteHandler");m.k=function(){kg.d.k.call(this);this.r.$();this.r=k;this.Wa.$();this.Wa=k};
m.Eg=function(){if(this.ud==this.e.value)return l;this.D.info("detected textchange after paste");this.dispatchEvent(mg);return j};m.xc=function(a){a=new zc(a.ta);a.type="paste";this.dispatchEvent(a);O(function(){this.Eg()||this.Wa.start(50,200)},0,this)};
m.fj=function(a){switch(this.i){case "init":switch(a.type){case "blur":this.i="init";break;case "focus":this.i="focused";break;case "mouseover":this.i="init";this.e.value!=this.ud&&(this.D.info("paste by dragdrop while on init!"),this.xc(a));break;default:Rg(this.D,"unexpected event "+a.type+"during init")}break;case "focused":switch(a.type){case "input":var b=this.Bh+400;if(u()>b||"focus"==this.ck)this.D.info("paste by textchange while focused!"),this.xc(a);break;case "blur":this.i="init";break;
case "keydown":this.D.info("key down ... looking for ctrl+v");if(bb&&gb&&0==a.keyCode||bb&&gb&&17==a.keyCode)break;this.i="typing";break;case "mouseover":this.e.value!=this.ud&&(this.D.info("paste by dragdrop while focused!"),this.xc(a));break;default:Rg(this.D,"unexpected event "+a.type+" during focused")}break;case "typing":switch(a.type){case "input":this.i="focused";break;case "blur":this.i="init";break;case "keydown":if(a.ctrlKey&&86==a.keyCode||a.shiftKey&&45==a.keyCode||a.metaKey&&86==a.keyCode)this.D.info("paste by ctrl+v while keypressed!"),
this.xc(a);break;case "mouseover":this.e.value!=this.ud&&(this.D.info("paste by dragdrop while keypressed!"),this.xc(a));break;default:Rg(this.D,"unexpected event "+a.type+" during keypressed")}break;default:Rg(this.D,"invalid "+this.i+" state")}this.Bh=u();this.ud=this.e.value;this.D.info(a.type+" -> "+this.i);this.ck=a.type};function Z(){P.call(this)}v(Z,P);ja(Z);var og="media-info",pg="profile";function Hh(a){return'<div class="info"><div class="picture"><img src="'+L(a.media.Ra)+'" class="thumb"><div class="publisher"><img src="'+L(a.media.La.P)+'"><div class="name">'+L(a.media.La.name)+'</div></div><div class="title">'+L(a.media.name)+'</div><div class="scrollable ios-scroll"><div class="desc-link"><a href="#">DESCRIPTION</a><div class="published">'+L(a.ec)+'</div></div><div class="description">'+a.description+'</div></div><div class="options"><div class="button star"><div class="icon"></div></div><div class="button facebook"><div class="icon"></div></div><div class="button twitter"><div class="icon"></div></div><div class="button play"><div class="icon"></div></div><div class="button plus"><div class="icon"></div></div></div></div><div class="viewers" style="display: none"><div class="label">SEEN</div></div><div class="tweet-holder" style="display:none"><div class="label"><a class="tweets-link">LATEST TWEETS</a></div><div class="tweets"></div><div class="dot-nav"></div></div><div class="comments-holder ios-scroll" style="display:none"><div class="label"><a class="conv-link">CONVERSATION</a></div><div class="no-comments" style="display:none">Start the conversation.</div><div class="comments"></div><div class="top-grad"></div><div class="bottom-grad"></div></div><div class="loading loading-activity"><div class="loading-spinner"></div></div></div>'}
function Ih(a){return'<div class="viewer"><img src="'+L(a.m.P)+'"></div>'}function Jh(a){return'<div class="tweet">'+(a.Fb.m?'<a href="#user:'+L(a.Fb.m.id)+'"><img src="'+L(a.Fb.P)+'"/></a>':'<img src="'+L(a.Fb.P)+'"/>')+'<div class="text"><a class="handle" target="_blank" href="http://www.twitter.com/'+L(a.Fb.handle)+"/status/"+L(a.Fb.id)+'">'+L(a.Fb.handle)+"</a> "+a.text+'</div><div class="timestamp">'+L(a.timestamp)+"</div></div>"}
function Kh(a){return'<div class="comment'+(a.Ua.hb?" reply":"")+'" id="comment-'+L(a.Ua.id)+'"><a href="#user:'+L(a.Ua.m.id)+'"><img src="'+L(a.Ua.m.P)+'"/></a><div class="text"><a href="#user:'+L(a.Ua.m.id)+'">'+L(a.Ua.m.name)+"</a> "+a.text+'</div><div class="timestamp">'+L(a.timestamp)+'</div><div class="comment-options">'+(a.Wj?'<div class="remove"></div> ':"")+'<div class="reply"></div></div></div>'}
function Lh(){return'<div class="comment-input"><div class="comment-controls"><div class="comment-button tweet-toggle"><div class="icon"></div>tweet<div class="check"></div></div><div class="comment-button fb-toggle"><div class="icon"></div>post<div class="check"></div></div><div class="comment-button add-comment"><div class="return">&#8618;</div>add</div></div><div class="input-holder"><textarea class="comment-textarea" rows="1" placeholder="Add to the conversation..."></textarea></div></div>'}
function Mh(a){var b='<div class="activity'+(1<a.fa.length?" digest":"")+'">';if(1<a.fa.length){for(var b=b+('<div class="text"><span>'+L(a.fa.length)+" friends </span>"+(a.qi?"watched":"are watching")+(a.U?' <a href="#channel:'+L(a.U.id)+'">'+L(a.U.name)+"</a>":"")+'<div class="timestamp">'+L(a.time)+'</div></div><div class="users">'),c=a.fa,d=c.length,f=0;f<d;f++)var g=c[f],b=b+('<a href="#user:'+L(g.id)+'"><div class="picture" style="background:'+L(g.color)+'"><img src="'+L(g.P)+'"/></div></a>');
b+="</div>"}return b+=(1==a.fa.length?'<a href="#user:'+L(a.fa[0].id)+'"><div class="picture" style="background:'+L(a.fa[0].color)+'"><img src="'+L(a.fa[0].P)+'"/></div></a><div class="text"><a class="user" href="#user:'+L(a.fa[0].id)+'">'+L(a.fa[0].name)+"</a> "+(a.qi?"watched":"is watching")+(a.U?' <a href="#channel:'+L(a.U.id)+'">'+L(a.U.name)+"</a>":"")+'<div class="timestamp">'+L(a.time)+"</div></div>":"")+'<div class="medias"></div></div>'}
function Nh(a){for(var b='<div class="comment activity'+(1<a.ed.length?" digest":"")+'">'+(1<a.ed.length?'<div class="text">'+(1==a.fa.length?'<a class="user" href="#user:'+L(a.fa[0].id)+'">'+L(a.fa[0].name)+' </a> discussed <a class="title" href="#info:'+L(a.media.id)+'">'+L(a.media.name)+"</a>.":"<span>"+L(a.fa.length)+' friends </span> discussed <a class="title" href="#info:'+L(a.media.id)+'"> '+L(a.media.name)+"</a>.")+"</div>":""),a=a.ed,c=a.length,d=0;d<c;d++)var f=a[d],b=b+('<div class="comment"><a href="#user:'+
L(f.m.id)+'"><div class="picture" style="background:'+L(f.m.color)+'"><img src="'+L(f.m.P)+'"/></div></a><div class="text"><a class="user" href="#user:'+L(f.m.id)+'">'+L(f.m.name)+"</a>  "+L(f.text)+'<div class="timestamp">'+L(f.ek)+"</div></div></div>");return b+'<div class="medias"></div></div>'}
function Oh(a){return'<div class="list-info"><div class="picture-cell" '+(a.Ra?'style="display:table-cell"':"")+">"+(a.link?'<a href="'+L(a.link)+'" target="_blank">':"")+'<div class="picture"><img class="thumb" src="'+L(a.Ra)+'"></div>'+(a.link?"</a>":"")+'</div><div class="description" '+(a.description?'style="display:table-cell"':"")+">"+L(a.description)+"</div></div>"}function Ph(a){return'<li class="'+L(a.className)+' tab"><div class="label">'+L(a.name)+"</div></li>"}
function Qh(a){return'<div class="admin"><div class="scrollable ios-scroll"><div class="search"><input type="text" class="input" '+(a.qh?'placeholder="'+L(a.qh)+'"':"")+'/></div><div class="results"></div><div class="section" style="display:none"><div class="label">CHANNELS</div><div class="admin-channels"></div></div><div class="section" style="display:none"><div class="label">CURRENT TOPICS</div><div class="topics"></div></div><div class="section" style="display:none"><div class="label">COLLECTIONS</div><div class="collections"></div></div><div class="scroll-area"></div>'}
function Rh(){return'<div class="admin-list admin"><div class="search"><input class="input" type="text" placeholder="Paste video or playlist link" /></div><div class="tabbed pending"><ul class="tabs"><li class="tab pending"><div class="label">PENDING</div></li><li class="tab all"><div class="label">ALL</div></li><li class="tab playlists"><div class="label">PLAYLISTS</div></li><li class="tab publishers"><div class="label">PUBLISHERS</div></li></ul><div class="pending-content content pending"></div><div class="all-content content all"></div><div class="playlists-content content playlists"></div><div class="publishers-content content publishers"></div><div class="spinner" style="display:none"></div></div>'}
function Sh(a){return'<div class="playlist"><div class="title">'+L(a.name)+'</div><div class="controls"><div class="remove dark button">x</div></div></div>'}function Th(a){return'<div class="publisher">'+(a.P?'<img src="'+L(a.P)+'"/>':"")+'<div class="title">'+L(a.name)+'</div><div class="controls"><div class="remove dark button">x</div></div></div>'}
function Uh(a){return'<div class="channel '+(a.U.Vj?"on":"off")+'"><div class="title">'+L(a.U.name)+'</div><div class="controls"><div class="fetch dark button">FETCH</div><div class="program dark button">PROG.</div><div class="remove dark button">x</div><div class="on dark button">ON</div><div class="off dark button">OFF</div></div>'+(a.U.Nc?'<div class="pending">'+L(a.U.Nc)+"</div>":"")+"</div>"}
function Vh(a){return'<div class="collection"><div class="title">'+L(a.Xe.name)+'</div><div class="controls">'+(a.Xe.Nc?'<div class="pending">'+L(a.Xe.Nc)+"</div>":"")+'<div class="fetch dark button">FETCH</div><div class="button dark remove">x</div></div></div>'}function Wh(a){return'<div class="topic"><div class="title">'+L(a.Fk)+'</div><div class="controls">'+(a.Nc?'<div class="pending">'+L(a.Nc)+"</div>":"")+"</div></div>"}
function Xh(){return'<div class="tabbed activity"><ul class="tabs"><li class="tab activity"><div class="label">ACTIVITY</div></li><li class="tab starred"><div class="label"><div class="heart"></div>\'d</div></li></ul><div class="activity-content content activity"><div class="loading loading-activity"><div class="loading-spinner"></div></div></div><div class="starred-content content starred"><div class="loading loading-starred"><div class="loading-spinner"></div></div></div><div class="spinner" style="display:none"></div></div>'}
function Yh(){return'<div class="tabbed"><ul class="tabs"><li class="tab comments"><div class="label">CONVERSATION</div></li><li class="tab tweets"><div class="label">TWEETS</div></li></ul><div class="comments-content content comments-holder"><div class="loading loading-activity"><div class="loading-spinner"></div></div></div><div class="tweets-content content tweet-holder"><div class="loading loading-starred"><div class="loading-spinner"></div></div></div></div>'}
function Zh(a){return'<div class="list-media show"><div class="media"><div class="preview"><div class="thumb" style="background-image:url('+L(a.media.Ra)+"); background-position: 50% "+L(a.media.Vc)+'%"></div><div class="title">'+L(a.media.name)+'</div></div></div><div class="publisher"><img src="'+L(a.media.La.P)+'"><div class="name">'+L(a.media.La.name)+'</div></div><div class="stats"><div class="comment-count"><div class="icon"></div>'+L(a.media.Ye)+'</div><div class="star-count"><div class="icon"></div>'+
L(a.media.vk)+"</div></div></div>"}
function $h(a){return'<div class="admin-media list-media"><div class="media"><div class="preview"><div class="thumb" style="background-image:url('+L(a.media.Ra)+"); background-position: 50% "+L(a.media.Vc)+'%"></div><div class="title">'+L(a.media.name)+'</div><div class="published">'+L(a.ec)+'</div><div class="play"></div><div class="approve"></div><div class="remove"></div><div class="repos"></div></div></div><div class="publisher"><img src="'+L(a.media.La.P)+'"><div class="name">'+L(a.media.La.name)+
'</div><div class="duration">'+L(a.media.duration)+' seconds</div></div><div class="description">'+L(a.media.description)+"</div></div>"};function ai(){M.call(this);this.od=[];this.yk=[];this.Cd=[]}v(ai,Qc);m=ai.prototype;m.wh=l;m.xh=l;m.sf=l;m.di=ba("Ce");m.init=function(){if(!this.sf){for(var a,b=0;a=this.od[b];b++)bi(this,a);this.sf=j}};function bi(a,b){a.wh&&(N(b.element,"mousedown",b.Kh,l,b),a.$f&&B(b.element,a.$f));a.xh&&a.cg&&B(b.element,a.cg)}
m.jc=function(a,b){if(!this.sa)if(this.sa=b,this.dispatchEvent(new ci("dragstart",this,this.sa))==l)this.sa=k;else{var c=b.uc,d=this.Vd(c);this.Mi&&B(d,this.Mi);this.Ac=d;d=Nb(c);d.body.appendChild(this.Ac);var f=this.Ac,g=Jd(c),c=Td(c,"margin");g.x-=2*(c.left||0);g.y-=2*(c.top||0);f.style.position="absolute";f.style.left=g.x+"px";f.style.top=g.y+"px";this.l=new Xd(f);this.l.di(this.Ce);N(this.l,"drag",this.Lh,l,this);N(this.l,"end",this.Ub,l,this);N(d.body,"selectstart",this.ki);this.Uc=[];for(d=
0;c=this.yk[d];d++)for(var i,f=0;i=c.od[f];f++)for(var g=c,n=[i.element],q=this.Uc,t=0;t<n.length;t++){var A=n[t],J=Jd(A),la=T(A),J=new xd(J.y,J.x+la.width,J.y+la.height,J.x);q.push(new di(J,g,i,A));ei(this,J)}this.ib||(this.ib=new xd(0,0,0,0));for(d=0;c=this.Cd[d];d++)c.af=[],c.Yh=c.e.scrollLeft,c.Zh=c.e.scrollTop,f=Jd(c.e),g=T(c.e),c.Q=new xd(f.y,f.x+g.width,f.y+g.height,f.x);for(d=0;g=this.Uc[d];d++)for(f=0;c=this.Cd[f];f++)$b(c.e,g.e)&&(c.af.push(g),g.Bd=c);this.Jb=k;for(d=0;c=this.Cd[d];d++)N(c.e,
"scroll",this.Hg,l,this);this.l.jc(a);a.preventDefault()}};
m.Ub=function(a){var b=a.Li?k:this.Jb;if(b&&b.qa){var c=a.clientX,a=a.clientY,d=ic(Lb(this.Ac)),f=c+d.x,d=a+d.y,g;this.Gd&&(g=this.Gd(b.gb,b.Q,f,d));this.dispatchEvent(new ci("drag",this,this.sa,b.qa,b.gb,b.e,c,a,f,d));b.qa.dispatchEvent(new ci("drop",this,this.sa,b.qa,b.gb,b.e,c,a,f,d,g))}this.dispatchEvent(new ci("dragend",this,this.sa));Kc(this.l,"drag",this.Lh,l,this);Kc(this.l,"end",this.Ub,l,this);Kc(Nb(this.sa.uc).body,"selectstart",this.ki);for(b=0;c=this.Cd[b];b++)Kc(c.e,"scroll",this.Hg,
l,this),c.af=[];this.l.$();Ub(this.Ac);delete this.sa;delete this.Ac;delete this.l;delete this.Uc;delete this.Jb};
m.Lh=function(a){var b,c=ic(Lb(this.Ac));b=new Bb(a.clientX+c.x,a.clientY+c.y);var c=b.x,d=b.y,f=this.Jb,g;if(f){this.Gd&&f.qa&&(g=this.Gd(f.gb,f.Q,c,d));if(f.Q.contains(b)&&g==this.qg)return;f.qa&&(this.dispatchEvent(new ci("dragout",this,this.sa,f.qa,f.gb,f.e)),f.qa.dispatchEvent(new ci("dragout",this,this.sa,f.qa,f.gb,f.e,h,h,h,h,this.qg)));this.qg=g;this.Jb=k}if(this.ib.contains(b)){a:{for(var i=0;f=this.Uc[i];i++)if(f.Q.contains(b))if(f.Bd){if(f.Bd.Q.contains(b)){b=f;break a}}else{b=f;break a}b=
k}if((f=this.Jb=b)&&f.qa)this.Gd&&(g=this.Gd(f.gb,f.Q,c,d)),c=new ci("dragover",this,this.sa,f.qa,f.gb,f.e),c.xk=g,this.dispatchEvent(c),f.qa.dispatchEvent(new ci("dragover",this,this.sa,f.qa,f.gb,f.e,a.clientX,a.clientY,h,h,g));else if(!f){this.na||(this.na=new di(this.ib.clone()));a=this.na.Q;a.top=this.ib.top;a.right=this.ib.right;a.bottom=this.ib.bottom;a.left=this.ib.left;for(g=0;f=this.Uc[g];g++)b=f.Q,f.Bd&&(f=f.Bd.Q,b=new xd(Math.max(b.top,f.top),Math.min(b.right,f.right),Math.min(b.bottom,
f.bottom),Math.max(b.left,f.left))),f=k,c>=b.right?f=b.right>a.left?b.right:a.left:c<b.left&&(f=b.left<a.right?b.left:a.right),i=k,d>=b.bottom?i=b.bottom>a.top?b.bottom:a.top:d<b.top&&(i=b.top<a.bottom?b.top:a.bottom),f!==k&&i!==k&&(Math.abs(f-c)>Math.abs(i-d)?i=k:f=k),f===k?i!==k&&(i<=d?a.top=i:a.bottom=i):f<=c?a.left=f:a.right=f;this.Jb=10<=(a.right-a.left)*(a.bottom-a.top)?this.na:k}}};m.ki=da(l);
m.Hg=function(a){for(var b=0,c;c=this.Cd[b];b++)if(a.target==c.e){var d=c.Zh-c.e.scrollTop,f=c.Yh-c.e.scrollLeft;c.Zh=c.e.scrollTop;c.Yh=c.e.scrollLeft;this.na&&this.Jb==this.na&&(0<d?this.na.Q.top+=d:this.na.Q.bottom+=d,0<f?this.na.Q.left+=f:this.na.Q.right+=f);for(var g=0,i;i=c.af[g];g++)i=i.Q,i.top+=d,i.left+=f,i.bottom+=d,i.right+=f,ei(this,i)}this.l.Th(a)};
m.Vd=function(a){var b=a.cloneNode(j);switch(a.tagName.toLowerCase()){case "tr":return I("table",k,I("tbody",k,b));case "td":case "th":return I("table",k,I("tbody",k,I("tr",k,b)));default:return b}};function ei(a,b){if(1==a.Uc.length)a.ib=new xd(b.top,b.right,b.bottom,b.left);else{var c=a.ib;c.left=Math.min(b.left,c.left);c.right=Math.max(b.right,c.right);c.top=Math.min(b.top,c.top);c.bottom=Math.max(b.bottom,c.bottom)}}
m.k=function(){ai.d.k.call(this);for(var a,b=0;a=this.od[b];b++)this.wh&&(Kc(a.element,"mousedown",a.Kh,l,a),this.$f&&C(a.element,this.$f)),this.xh&&this.cg&&C(a.element,this.cg),a.$();this.od.length=0};function ci(a,b,c,d,f,g,i,n,q,t,A){wc.call(this,a);this.pl=b;this.ql=c;this.rl=d;this.tl=f;this.sl=g;this.clientX=i;this.clientY=n;this.Nl=q;this.Ol=t;this.xk=A}v(ci,wc);ci.prototype.k=aa();
function fi(a,b){M.call(this);this.element=F(a);this.data=b;this.H=k;this.element||e(Error("Invalid argument"))}v(fi,Qc);m=fi.prototype;m.uc=k;m.Kh=function(a){if(Bc(a)){var b=a.target;b&&(N(b,"mousemove",this.Kc,l,this),N(b,"mouseout",this.Kc,l,this),N(b,"mouseup",this.Cf,l,this),this.uc=b,this.ag=new Bb(a.clientX,a.clientY),a.preventDefault())}};m.De=ba("H");
m.Kc=function(a){var b=this.uc,c="mouseout"==a.type&&a.target==b;if(5<Math.abs(a.clientX-this.ag.x)+Math.abs(a.clientY-this.ag.y)||c)Kc(b,"mousemove",this.Kc,l,this),Kc(b,"mouseout",this.Kc,l,this),Kc(b,"mouseup",this.Cf,l,this),this.H.jc(a,this)};m.Cf=function(){var a=this.uc;Kc(a,"mousemove",this.Kc,l,this);Kc(a,"mouseout",this.Kc,l,this);Kc(a,"mouseup",this.Cf,l,this);delete this.ag;this.uc=k};function di(a,b,c,d){this.Q=a;this.qa=b;this.gb=c;this.e=d}di.prototype.Bd=k;function gi(){ai.call(this)}v(gi,ai);function hi(a,b){b.De(a);a.od.push(b);a.sf&&bi(a,b)};function ii(a){var b={};"rel"in b||(b.rel="nofollow");"target"in b||(b.target="_blank");var c=[],d;for(d in b)b.hasOwnProperty(d)&&b[d]&&c.push(Ba(d),'="',Ba(b[d]),'" ');var f=c.join("");return a.replace(ji,function(a,b,c,d,t){a=[Ba(b)];if(!c)return a[0];a.push("<a ",f,'href="');d?(a.push("mailto:"),c=d,d=""):(t||a.push("http://"),(d=c.match(ki))?(c=d[1],d=d[2]):d="");c=Ba(c);d=Ba(d);a.push(c,'">',c,"</a>",d);return a.join("")})}
var ki=/^(.*)([:;,\.?\[\]])$/,ji=RegExp("([\\S\\s]*?)(\\b(?:mailto:)?([\\w.+-]+@[A-Za-z0-9.-]+\\.(?:com|org|net|edu|gov|aero|biz|cat|coop|info|int|jobs|mobi|museum|name|pro|travel|arpa|asia|xxx|[a-z][a-z])\\b)|\\b(?:(https?|ftp)://+|www\\.)\\w[:;,\\.?\\[\\]\\w/~%&=+#-@!]*|$)","g");function li(){}v(li,Ge);ja(li);m=li.prototype;m.Cc=aa();m.g=function(a,b){Ze(a);a.ab&=-256;df(a,32,l);li.d.g.call(this,a,b);a.hc(b.value);return b};m.I=function(a){Ze(a);a.ab&=-256;df(a,32,l);return a.Ga().I("textarea",{"class":Ie(this,a).join(" "),disabled:!a.isEnabled()},a.Va||"")};m.Mb=function(a){return"TEXTAREA"==a.tagName};m.ic=ia;m.tf=function(a){return a.isEnabled()};m.Sc=ia;m.ka=function(a,b,c){li.d.ka.call(this,a,b,c);if((a=a.b())&&1==b)a.disabled=c};m.Sa=ia;
m.hc=function(a,b){a&&(a.value=b)};m.ha=da("goog-textarea");function mi(a,b,c){Ye.call(this,a,b||li.a(),c);Ze(this);this.Rc(j);a||(this.Va="")}v(mi,Ye);var ni=hb||y;m=mi.prototype;m.Fc=l;m.ua=0;m.Eh=0;m.Jh=0;m.kh=l;m.ve=l;m.Uf=l;m.Tf=l;function oi(a){return a.vd.top+a.vd.bottom+a.yg.top+a.yg.bottom}function pi(a){var b=a.Jh,c=a.b();b&&(c&&a.ve)&&(b-=oi(a));return b}function qi(a){var b=a.Eh,c=a.b();b&&(c&&a.ve)&&(b-=oi(a));return b}m.Ab=function(a){this.hc(String(a))};m.W=function(){return this.b().value};m.hc=function(a){mi.d.hc.call(this,a);this.resize()};
m.Na=function(a){mi.d.Na.call(this,a);this.b().disabled=!a};m.resize=function(){this.b()&&this.je()};m.s=function(){mi.d.s.call(this);var a=this.b();zd(a,{overflowY:"hidden",overflowX:"auto",boxSizing:"border-box",MsBoxSizing:"border-box",WebkitBoxSizing:"border-box",MozBoxSizing:"border-box"});this.vd=Td(a,"padding");this.yg=Wd(a);S(S(S(S(this.p(),a,"scroll",this.je),a,"focus",this.je),a,"keyup",this.je),a,"mouseup",this.wj);this.resize()};
function ri(a){if(!a.kh){var b=a.b().cloneNode(l);zd(b,{position:"absolute",height:"auto",top:"-9999px",margin:"0",padding:"1px",border:"1px solid #000",overflow:"hidden"});a.Ga().aa.body.appendChild(b);var c=b.scrollHeight;b.style.padding="10px";var d=b.scrollHeight;a.Uf=d>c;b.style.borderWidth="10px";a.Tf=b.scrollHeight>d;b.style.height="100px";100!=b.offsetHeight&&(a.ve=j);Ub(b);a.kh=j}var b=a.b(),c=a.b().scrollHeight,f=a.b(),d=f.offsetHeight-f.clientHeight;if(!a.Uf)var g=a.vd,d=d-(g.top+g.bottom);
a.Tf||(f=Wd(f),d-=f.top+f.bottom);c+=0<d?d:0;a.ve?c-=oi(a):(a.Uf||(d=a.vd,c+=d.top+d.bottom),a.Tf||(a=Wd(b),c+=a.top+a.bottom));return c}function si(a,b){a.ua!=b&&(a.ua=b,a.b().style.height=b+"px")}function ti(a){a=a.b();a.style.height="auto";var b=a.value.match(/\n/g)||[];a.rows=b.length+1}
m.je=function(){if(!this.Fc){var a=l;this.Fc=j;var b=this.b(),c=this.ua;if(b.scrollHeight){var d=l,f=l,g=ri(this),i=b.offsetHeight,n=pi(this),q=qi(this);n&&g<n?(si(this,n),d=j):q&&g>q?(si(this,q),b.style.overflowY="",f=j):i!=g?si(this,g):this.ua||(this.ua=g);!d&&(!f&&ni)&&(a=j)}else ti(this);this.Fc=l;a&&(a=this.b(),this.Fc||(this.Fc=j,b=l,a.value||(a.value=" ",b=j),(f=a.scrollHeight)?(g=ri(this),d=pi(this),i=qi(this),!(d&&g<=d)&&!(i&&g>=i)&&(i=this.vd,a.style.paddingBottom=i.bottom+1+"px",ri(this)==
g&&(a.style.paddingBottom=i.bottom+f+"px",a.scrollTop=0,f=ri(this)-f,f>=d?si(this,f):si(this,d)),a.style.paddingBottom=i.bottom+"px")):ti(this),b&&(a.value=""),this.Fc=l));c!=this.ua&&this.dispatchEvent("resize")}};m.wj=function(){var a=this.b(),b=a.offsetHeight;a.filters&&a.filters.length&&(a=a.filters.item("DXImageTransform.Microsoft.DropShadow"))&&(b-=a.offX);b!=this.ua&&(this.ua=this.Jh=b)};function ui(a,b,c,d,f,g){U.call(this);this.oa=of();this.Pb=a;this.ye=b;this.Lf=c;this.Qf=d;this.eg=f||k;this.$d=g||k;this.df=this.oa?new gi:k;this.Wb={pending:l,all:l};this.$a=["pending","all","playlists","publishers"]}v(ui,U);m=ui.prototype;
m.G=function(a){ui.d.G.call(this,a);a.innerHTML="";a.scrollTop=0;lc(a,Rh);var b=G("pending-content",a);w(this.ye,function(a){vi(this,b,a)},this);this.$j=G("playlists-content",a);w(this.Lf,this.ug,this);this.dk=G("publishers-content",a);w(this.Qf,this.vg,this);this.resize()};
m.s=function(){ui.d.s.call(this);this.ja=G("input",this.b());var a=new Pe(this.ja),b=new kg(this.ja);this.Ba=G("tabs",this.b());this.K="pending";var c=l;S(S(S(S(this.p(),window,"resize",xa(O,s(this.resize,this))),a,"key",s(function(a){"13"==a.keyCode&&wi(this,this.ja.value)},this)),b,mg,s(function(){wi(this,this.ja.value)},this)),this.Ba,"click",s(function(a){a=hc(a.target,"li");this.xb(a)},this));S(this.p(),this.b(),"scroll",s(function(){if(this.Pb&&!c&&!this.Wb[this.K]&&this.b().scrollTop+H().height>
this.b().scrollHeight-this.b().clientTop){c=j;var a=G("spinner",this.b());R(a,j);var b="pending"==this.K?this.ye:this.Re;Y("/admin/_media/collection/"+this.Pb+"?offset="+b.length+("pending"==this.K?"&pending=1":""),s(function(g){c=l;g=ug(vg(g.target)).medias;g=Ma(g,function(a){return new Ef(a)});Va(b,g);var i=G(this.K+"-content",this.b());w(g,function(a){vi(this,i,a)},this);this.Wb[this.K]=!g.length;E(a,"finished",!g.length)},this))}},this));this.resize()};
m.resize=function(){Ld(this.b(),H().height-40)};
function wi(a,b){var c;c=b.match("(?:(https?|ftp)://+|www\\.)\\w[:;,\\.?\\[\\]\\w/~%&=+#-@!]*");c=c!=k?c[0]:"";a.Pb&&c&&(a.ja.disabled="disabled",Y("admin/_add/collection/"+a.Pb,s(function(a){this.ja.value="";this.ja.disabled="";a=xg(a.target);if("media"==a.type){var b=Mf(Lf.a(),a.data);Oa(this.ye,function(a){return a.id==b.id})||(this.ye.push(b),a=G("pending-content",this.b()),vi(this,a,b,j),this.xb(Pb("li","pending",h)[0]))}else if("playlist"==a.type){var c=a.data;Oa(this.Lf,function(a){return a.id==
c.id})||(this.Lf.push(c),this.ug(c),this.xb(Pb("li","playlists",h)[0]))}else if("publisher"==a.type){var i=a.data;Oa(this.Qf,function(a){return a.id==i.id})||(this.Qf.push(i),this.vg(i),this.xb(Pb("li","publishers",h)[0]))}},a),"POST","url="+c))}
m.xb=function(a){w(this.$a,function(b){E(this.Ba.parentElement,b,D(a,b));this.K=D(a,b)?b:this.K},this);this.Pb&&!this.Re&&Y("/admin/_media/collection/"+this.Pb,s(function(a){a=ug(vg(a.target)).medias;this.Re=Ma(a,function(a){return new Ef(a)});var c=G("all-content",this.b());w(this.Re,function(a){vi(this,c,a)},this)},this))};m.ug=function(a){a=K(Sh,{name:a.name});this.$j.appendChild(a)};m.vg=function(a){a=K(Th,{name:a.name,P:a.picture});this.dk.appendChild(a)};
function vi(a,b,c,d){var f=K($h,{media:c,ec:Hf(c)});d?Tb(b,f,0):b.appendChild(f);a.oa&&(b=a.df,d=new fi(f,h),hi(b,d));var b=new Xd(G("repos",f)),g=G("thumb",f),d=G("play",f),i=G("approve",f),n=G("remove",f);b.gd=function(a,b){window.console.log("here");var c=b-24;-50<=c&&50>=c&&zd(g,"background-position-y",50-c+"%")};S(S(S(S(a.p(),b,"end",function(){var a=(g.style[Ia("background-position")]||"").split(" ")[1],a=a.substring(0,a.length-1);Y("/admin/_posthumb",ie(),"POST","media="+c.id+"&pos="+a)}),
d,"click",s(a.Xj,a,c)),i,"click",s(a.xg,a,c,j,f)),n,"click",s(a.xg,a,c,l,f));O(xa(B,f,"show"))}m.xg=function(a,b,c){var d=a.Gi||this.Pb;Y("admin/_media/collection",s(function(){B(c,"remove");O(function(){Ub(c)},300);Q.a();var b;Q.a();b=ec(F("toggle-pending"));bd(0,b-1);Z.a().c("approved",a,d)},this),"POST","col="+d+"&media="+a.id+"&approve="+b)};m.Xj=function(a){a=Of(a);W.a().c(uf,a)};function xi(a){U.call(this);this.ob=a||k;this.Xc=this.Cg=this.pi=this.Gg=0}v(xi,U);m=xi.prototype;m.I=function(){this.e=K(Qh)};m.G=function(a){xi.d.G.call(this,a);var b=K(Qh,{qh:this.ob?"Add a collection":"Add a Channel"});a.innerHTML=b.innerHTML};
m.s=function(){xi.d.s.call(this);this.ja=G("input",this.b());var a=new Pe(this.ja);this.kk=G("scrollable",this.b());this.V=G("admin-channels",this.b());this.hg=G("topics",this.b());this.Wd=G("collections",this.b());this.Fg=F("admin-col-list");this.Od=F("admin-list");V.a();this.ob?(Y("/admin/_topicmedias/"+this.ob,s(function(a){a=xg(a.target);Db(a,function(a,b){R(this.hg.parentElement,j);if(a&&a.length){var f=K(Wh,{Fk:b,Nc:a.length});this.hg.appendChild(f);N(f,"click",s(function(){a=Ma(a,function(a){return new Ef(a)});
(new ui("",a,[],[])).g(this.Od);Z.a().c("navigate",this.Od,l,b)},this));Z.a().subscribe("approved",function(b){if(Oa(a,function(a){return a.id==b.id})){var d=G("pending",f),n=ec(d)-1;0>=n?(Ub(f),sc(f)):ac(d,n)}},this)}},this);this.Xc&&bd(Q.a(),this.Xc);this.pi=T(this.hg.parentElement).height;this.resize()},this)),Y("/admin/_collections/"+this.ob,s(function(a){a=xg(a.target);R(this.Wd.parentElement,!!a.length);w(a,this.tg,this);this.Xc&&bd(Q.a(),this.Xc);this.Gg=T(this.Wd.parentElement).height;this.resize()},
this))):Y("/admin/_channels",s(function(a){a=xg(a.target);R(this.V.parentElement,!!a.length);w(a,this.sg,this);this.Cg=T(this.V.parentElement).height;this.resize()},this));S(this.p(),a,"key",s(function(a){"13"==a.keyCode&&this.ja.value&&(a=this.ja.value,this.ja.disabled="disabled",Y(this.ob?"/admin/_collections":"/admin/_channels",s(function(a){a=xg(a.target);this.ob?(R(this.Wd.parentElement,!!a),this.tg(a)):(R(this.V.parentElement,!!a),this.sg(a));this.ja.disabled="";this.ja.value=""},this),"POST",
"name="+a+(this.ob?"&cid="+this.ob:"")))},this))};
m.sg=function(a){var b=new Tf(a),c=K(Uh,{U:b});this.V.appendChild(c);N(c,"click",s(function(a){D(a.target,"on")||D(a.target,"off")?(E(c,"on",D(a.target,"on")),E(c,"off",!D(a.target,"on")),Y("/admin/_channel/online/"+b.id,s(function(a){a.target.disabled="";a=xg(a.target);E(c,"on",a.online);E(c,"off",!a.online)},this),"POST","online="+D(a.target,"on"))):D(a.target,"program")?Y("/admin/_program",ie(),"POST","channel_id="+b.id):D(a.target,"fetch")?Y("/admin/_fetch",function(){alert("Fetch began, but give it some time.")},
"POST","channel_id="+b.id):D(a.target,"remove")&&confirm("Remove "+b.name+"?")?(R(c,l),Y("/admin/_channels/"+b.id,function(a){xg(a.target).deleted?Ub(c):R(c,j)},"DELETE")):((new xi(b.id)).g(this.Fg),Z.a().c("navigate",this.Fg,l,b.name))},this))};
m.tg=function(a){var b=K(Vh,{Xe:a});this.Xc+=a.pending;this.Wd.appendChild(b);N(b,"click",s(function(c){D(c.target,"remove")&&confirm("Remove "+a.name+"?")?(R(b,l),Y("/admin/_collections/"+a.id,function(a){xg(a.target).deleted?Ub(b):R(b,j)},"DELETE")):D(c.target,"fetch")?Y("/admin/_fetch",function(){alert("Fetch began, but give it some time.")},"POST","col_id="+a.id):Y("/admin/_media/collection/"+a.id+"?pending=1",s(function(b){var b=ug(vg(b.target)),c=b.medias,c=Ma(c,function(a){return new Ef(a)});
(new ui(a.id,c,b.playlists,b.publishers)).g(this.Od);Z.a().c("navigate",this.Od,l,a.name)},this))},this));Z.a().subscribe("approved",function(c,d){if(d==a.id){var f=G("pending",b),g=ec(f)-1;0>=g?(Ub(b),sc(b)):ac(f,g)}},this)};m.resize=function(){Ld(this.kk,this.Cg+this.pi+this.Gg+110)};function yi(){U.call(this);this.n=new mi("Add to the conversation.");this.kb=new mf("tweet");df(this.kb,16,j);this.qb=new mf("post");df(this.qb,16,j);var a=X.a().v;this.de=a.ak;this.Le=a.bk;this.nc=new mf("add");this.If=this.mc=k}v(yi,U);m=yi.prototype;m.I=function(){this.e=K(Lh)};
m.s=function(){yi.d.s.call(this);this.n.g(G("comment-textarea",this.b()));var a=this.n;a.Eh=70;a.resize();a=new Pe(this.n.rb());this.Xd=G("comment-controls",this.b());this.qj=G("input-holder",this.b());Ce(this,this.kb);this.kb.g(G("tweet-toggle",this.b()));Y("/_twitter",s(function(a){a=xg(a.target);this.Le=this.Le&&a.auth;this.Gk=a.auth_url;cf(this.kb,this.Le)},this));Ce(this,this.qb);this.qb.g(G("fb-toggle",this.b()));FB.api("/me/permissions",s(function(a){this.de=this.de&&!!a.data[0].publish_stream;
cf(this.qb,this.de)},this));Ce(this,this.nc);this.nc.g(G("add-comment",this.b()));this.nc.Na(l);S(S(S(S(S(S(this.p(),this.n.b(),"focus",s(function(){Ed(this.Xd,0,0);this.dispatchEvent("focus")},this)),a,"key",s(function(a){this.nc.Na(this.n.W());"13"==a.keyCode?(a.preventDefault(),a.stopPropagation(),this.nc.setActive(this.n.W()),this.Mc(a)):"8"==a.keyCode&&(!this.W()&&this.mc)&&zi(this)},this)),this.n,"resize",s(function(a){this.dispatchEvent(a)},this)),this.qb,"action",s(this.Ej,this)),this.kb,
"action",s(this.Uj,this)),this.nc,"action",s(this.Mc,this));Z.a().subscribe("reply-comment",this.gk,this);X.a().subscribe("twitter-auth",function(){cf(this.kb,j)},this)};m.gk=function(a,b){this.If=a.id.toString();var c=b.name.split(" ");this.mc=I("div","token","@"+(c&&c.length?c[0]:b.name));this.qj.appendChild(this.mc);this.Oa(j);this.n.b().style.paddingLeft=T(this.mc).width+5+"px"};function zi(a){a.If=k;Ub(a.mc);a.mc=k;a.n.b().style.paddingLeft=""}m.W=function(){return this.n.W()};
m.collapse=function(){return 25!=Gd(this.Xd).y?(Ed(this.Xd,0,25),j):l};m.oe=function(){return D(this.b(),"focused")};m.Oa=function(a){a&&(this.n.b().focus(),O(s(function(){Ed(this.Xd,0,0)},this)));return E(this.b(),"focused",a)};m.Mc=function(){this.n.W()&&(this.n.setActive(l),this.n.Na(l),this.Oa(j),this.dispatchEvent({type:"add",zg:s(function(){this.n.Ab("");this.n.Na(j);this.n.Oa(j);zi(this)},this),ld:Me(this.qb),Ke:Me(this.kb),text:this.n.W(),hb:this.If}))};
m.Ej=function(){!this.de&&Me(this.qb)&&(R(F("overlay"),j),FB.login(function(a){R(F("overlay"),l);this.Qi=!!a.authResponse;cf(this.qb,this.Qi)},{scope:"publish_stream"}))};m.Uj=function(){if(!this.Le&&Me(this.kb)){cf(this.kb,l);var a=window.open(this.Gk,"Twitter Login","height=300,width=550");a.moveTo(screen.width/2-225,screen.height/2-150);a.focus()}};function Ai(a){this.id=a.id;this.m=yg(X.a(),a.user);this.text=a.text;this.time=gd(a.time+"Z");this.ek=Wc(this.time.getTime());this.hb=a.parent_id;this.Wh=[];w(a.replies,function(a){a=new Ai(a);this.Wh.push(a)},this)};function Bi(a){this.id=a.id;this.m=a.user&&yg(X.a(),a.user);this.handle=a.handle;this.P=a.picture;this.text=a.text;this.time=gd(a.time+"Z")};function Ci(a,b,c,d){U.call(this);this.h=a;this.bb=b||[];this.Me=!!c;this.mb=d||[];this.gc=this.hl=0}v(Ci,U);
Ci.prototype.G=function(a){Ci.d.G.call(this,a);a.innerHTML="";a.scrollTop=0;B(this.b(),"ios-scroll");this.M=I("div","loading",I("div","loading-spinner"));this.b().appendChild(this.M);R(this.M,l);this.bc=I("div","no-comments","Start the conversation.");this.b().appendChild(this.bc);this.A=I("div","comments tweets");this.b().appendChild(this.A);S(this.p(),window,"resize",xa(O,s(this.resize,this)));this.bb.length?(w(this.bb,function(a){this.Kb(a)},this),this.Jc=T(this.A).height):this.Me&&this.mb.length?
(w(this.mb,function(a){this.pc(a)},this),this.Jc=T(this.A).height):R(this.M,j);this.Me?(Y("/_tweet/"+this.h.id+"?offset="+this.mb.length,s(function(a){R(this.M,l);a=ug(vg(a.target));a=Ma(a,function(a){a=new Bi(a);this.pc(a);return a},this);this.Jc=T(this.A).height;this.resize()},this)),this.h.subscribe("add-tweet",function(a){this.pc(a,j)},this)):(Y("/_comment/"+this.h.id+"?offset="+this.bb.length,s(function(a){R(this.M,l);a=ug(vg(a.target));a=Ma(a,function(a){a=new Ai(a);this.Kb(a);return a},this);
this.Jc=T(this.A).height;this.resize()},this)),this.h.subscribe(Ff,this.Kb,this));this.resize(41)};
Ci.prototype.pc=function(a,b){R(this.bc,l);var c=ii(a.text),c=c.replace(/#(\S+)/g,function(a,b){return'<a target="_blank" href="http://twitter.com/search?q=%23'+b+'">'+a+"</a>"}),c=c.replace(/@(\S+)/g,function(a,b){return'<a target="_blank" href="http://twitter.com/'+b+'">'+a+"</a>"}),c=K(Jh,{Fb:a,text:c,timestamp:Wc(a.time.getTime())});Xc(Vc.a(),a.time,G("timestamp",c));b?Tb(this.A,c,0):this.A.appendChild(c);this.resize();R(Zb(this.A),j)};
Ci.prototype.Kb=function(a){R(this.bc,l);var b=K(Kh,{Ua:a,text:ii(a.text),timestamp:Wc(a.time.getTime())});Xc(Vc.a(),a.time,G("timestamp",b));this.A.appendChild(b);this.resize()};Ci.prototype.resize=function(a){this.gc=a||this.gc;Ld(this.b(),H().height-42-this.gc-(hc(this.b(),k,"tabbed")?30:0))};function Di(a,b,c,d){U.call(this);this.h=this.w=a;this.bb=b||[];this.mb=c||[];this.Me=!!d;this.Ze=new Ci(a,this.bb);this.jg=new Ci(a,h,j,this.mb);this.n=new yi;this.$a=["comments","tweets"]}v(Di,U);m=Di.prototype;m.G=function(a){Di.d.G.call(this,a);B(a,"conversation");B(a,"ios-scroll");lc(a,Yh);B(a.firstChild,this.Me?"tweets":"comments")};
m.s=function(){this.Ba=G("tabs",this.b());this.Ze.g(G("comments-content",this.b()));this.jg.g(G("tweets-content",this.b()));Ae(this.n,this.b());S(S(S(S(S(S(S(this.p(),this.Ba,"click",s(function(a){a=hc(a.target,"li");this.xb(a)},this)),this.n,"add",s(this.Mc,this)),this.n,"resize",s(function(){D(this.b().firstChild,"comments")?this.Ze.resize(41):this.jg.resize(41)},this)),window,"click",s(function(a){!hc(a.target,k,"comment-input")&&!this.n.W()&&(this.n.Oa(l),this.n.collapse())},this)),G("no-comments",
this.b()),"click",s(this.Rh,this)),Ob("no-comments",this.b())[1],"click",s(this.Rh,this)),window,"click",s(function(a){!hc(a.target,k,"comment-input")&&!this.n.W()&&(this.n.Oa(l),this.n.collapse())},this));this.Ze.resize(41);this.jg.resize(41)};m.Rh=function(a){a.preventDefault();a.stopPropagation();this.n.Oa(j)};
m.Mc=function(a){Y("/_comment",a.zg,"POST","media_id="+this.h.id+"&text="+a.text+"&tweet="+a.Ke);a.ld&&FB.api("/me/feed","POST",{message:a.text,name:this.h.name,link:"http://www.broken.tv",picture:this.h.Ra,caption:"on Broken.TV",description:this.h.description},aa());Sf.a().Ua(this.h.id,a.ld,a.Ke)};m.xb=function(a){w(this.$a,function(b){E(this.Ba.parentElement,b,D(a,b));this.K=D(a,b)?b:this.K},this)};function Wc(a){var b=u(),c=Math.floor((b-a)/6E4),b=l;0>c&&(b=j,c*=-1);if(60>c)return Ei(c,b,0);c=Math.floor(c/60);if(24>c)return Ei(c,b,1);c=new Date(u());c.setHours(0);c.setMinutes(0);c.setSeconds(0);c.setMilliseconds(0);c=Math.ceil((c.getTime()-a)/864E5);b&&(c*=-1);return 14>c?Ei(c,b,2):""}
function Ei(a,b,c){return!b&&0==c?(b=ya("{$num} minute ago",{num:a}),c=ya("{$num} minutes ago",{num:a}),1==a?b:c):b&&0==c?(b=ya("in {$num} minute",{num:a}),c=ya("in {$num} minutes",{num:a}),1==a?b:c):!b&&1==c?(b=ya("{$num} hour ago",{num:a}),c=ya("{$num} hours ago",{num:a}),1==a?b:c):b&&1==c?(b=ya("in {$num} hour",{num:a}),c=ya("in {$num} hours",{num:a}),1==a?b:c):!b&&2==c?(b=ya("{$num} day ago",{num:a}),c=ya("{$num} days ago",{num:a}),1==a?b:c):b&&2==c?(b=ya("in {$num} day",{num:a}),c=ya("in {$num} days",
{num:a}),1==a?b:c):""};function Fi(a){U.call(this);this.h=this.w=a;this.lh=l;this.Zc={};this.bb=[];this.$e={};this.zh={};this.mb=[];this.n=new yi;this.Dd=new mf("Star");df(this.Dd,16,j);this.Ug=new mf("Facebook");this.ri=new mf("Twitter");this.xa=new mf("Play");this.Oc=new mf("Plus");df(this.Oc,16,j);this.gc=0}v(Fi,U);m=Fi.prototype;m.I=function(){this.e=K(Hh,{media:this.h})};
m.G=function(a){Fi.d.G.call(this,a);var b=K(Hh,{media:this.h,description:this.h.description?ii(this.h.description):"",ec:Hf(this.h)});a.innerHTML=b.innerHTML};
m.s=function(){Fi.d.s.call(this);this.Gb=G("viewers",this.b());var a=G("picture",this.b()),b=G("scrollable",this.b()),c=G("publisher",this.b()),d=G("title",this.b());this.M=G("loading",this.b());var f=a.firstChild;this.Kl=G("tweet-holder",this.b());this.lb=G("tweets",this.b());this.zc=G("dot-nav",this.b());this.A=G("comments",this.b());this.bc=G("no-comments",this.b());Ae(this.n,this.b());this.Dd.g(G("star",this.b()));this.Ug.g(G("facebook",this.b()));this.ri.g(G("twitter",this.b()));this.xa.g(G("play",
this.b()));this.Oc.g(G("plus",this.b()));var g=new Rc(5E3);Y("/_info/"+this.h.id,s(function(a){a=ug(vg(a.target));a.description?(this.h.description=a.description,G("description",this.b()).innerHTML=ii(a.description)):(R(G("desc-link",this.b()),l),R(G("scrollable",this.b()),l));w(a.seen,function(a){var b=yg(X.a(),a);b.id!=X.a().v.id&&(R(this.Gb,j),this.lh=j,b=K(Ih,{m:b}),this.Gb.appendChild(b),this.Zc[a.id]=b,S(this.p(),b,"click",function(){Z.a().c(pg,a)}))},this);w(this.h.cc,this.wg,this);var b=a.tweets;
this.mb=Ma(b,function(a){a=new Bi(a);this.pc(a);this.Qb=this.zc.firstChild;B(this.Qb,"selected");return a},this);b.length&&g.start();a=a.comments;R(this.A.parentElement,j);R(this.bc,!a.length);a=Ma(a,function(a){a=new Ai(a);this.Kb(a);return a},this);R(this.M,l);this.resize()},this));S(S(S(S(S(S(S(S(S(S(S(S(S(S(S(S(S(S(S(S(S(S(this.p(),window,"resize",xa(O,s(this.resize,this))),c,"click",s(function(){Z.a().c("media-list",this.h.La.name,h,"/admin/_media/publisher/"+this.h.La.id,this.h.La.P,this.h.La.description,
this.h.La.link)},this)),this.Dd,"action",s(function(){Lf.a().c("star",this.h,Me(this.Dd));Y("/_star",h,"POST","media_id="+this.h.id+(!Me(this.Dd)?"&delete=1":""))},this)),this.Ug,"action",s(this.Dj,this)),this.ri,"action",s(this.Tj,this)),this.xa,"action",s(this.Hj,this)),this.Oc,"action",s(this.Kj,this)),this.Oc.b(),"mousedown",s(this.Lj,this)),this.n,"add",s(this.Mc,this)),this.bc,"click",s(function(a){a.preventDefault();a.stopPropagation();this.n.Oa(j)},this)),G("conv-link",this.b()),"click",s(function(a){a.preventDefault();
a.stopPropagation();Z.a().c("conversation",this.h,this.bb,this.mb)},this)),G("tweets-link",this.b()),"click",s(function(a){a.preventDefault();a.stopPropagation();Z.a().c("conversation",this.h,this.bb,this.mb,j)},this)),this.n,"focus",s(function(){this.resize(25,j)},this)),this.n,"resize",s(function(a){this.resize(25+(a.target.ua-41))},this)),this.zc,"click",s(function(a){D(a.target,"dot")&&(Gi(this,a.target),g.stop())},this)),g,Tc,s(function(){var a=this.Qb&&Wb(this.Qb)||G("dot",this.b());Gi(this,
a)},this)),window,"click",s(function(a){!hc(a.target,k,"comment-input")&&!this.n.W()&&(this.n.Oa(l),this.n.collapse()&&this.resize(0))},this)),f,"load",function(){R(f,j);O(function(){T(f).height<T(a).height+50&&B(f,"fix-height");T(f).width>2*T(a).width?B(f,"pan-left"):T(f).height>2*T(a).height&&B(f,"pan-top");f.style.marginTop=-T(f).height/2+"px";f.style.marginLeft=-T(f).width/2+"px"})}),b,"scroll",s(function(){var g=(120-b.scrollTop)/100;Pd(c,Math.min(1,Math.max(g,0)));Pd(d,Math.min(1,Math.max(g,
0)));Pd(f,Math.min(0.5,Math.max(g,0.1)));E(a,"scrolled",10<b.scrollTop)},this)),this.A,"scroll",s(this.$h,this)),this.A,"click",s(this.Hi,this)),G("desc-link",this.b()),"click",s(function(){var c=Ab(a,"scrolled");(new se(b,[b.scrollLeft,b.scrollTop],[b.scrollLeft,c?170:0],300)).play()},this));this.h.subscribe(Ff,this.Kb,this);this.h.subscribe("add-tweet",function(a){this.pc(a,j)},this);this.h.subscribe(Gf,this.wg,this)};
function Gi(a,b){if(b){a.Qb&&C(a.Qb,"selected");a.Qb=b;B(a.Qb,"selected");var c=Pa(Vb(a.zc),function(a){return a==b});(new se(a.lb,[a.lb.scrollLeft,a.lb.scrollTop],[300*c,a.lb.scrollTop],200)).play();a.resize()}}
m.Mc=function(a){Y("/_comment",a.zg,"POST","media_id="+this.h.id+"&text="+a.text+"&tweet="+a.Ke+"&facebook="+a.ld+(a.hb?"&parent_id="+a.hb:""));a.ld&&FB.api("/me/feed","POST",{message:a.text,name:this.h.name,link:this.h.link,picture:this.h.Ra,caption:"on XYLO",description:this.h.description},aa());Sf.a().Ua(this.h.id,a.ld,a.Ke)};
m.pc=function(a,b){var c=ii(a.text),c=c.replace(/#(\S+)/g,function(a,b){return'<a target="_blank" href="http://twitter.com/search?q=%23'+b+'">'+a+"</a>"}),c=c.replace(/@(\S+)/g,function(a,b){return'<a target="_blank" href="http://twitter.com/'+b+'">'+a+"</a>"}),c=K(Jh,{Fb:a,text:c,timestamp:Wc(a.time.getTime())}),d=I("div","dot");Xc(Vc.a(),a.time,G("timestamp",c));b?(Tb(this.lb,c,0),Tb(this.zc,d,0),10<Vb(this.lb).length&&(Ub(this.lb.lastChild),Ub(this.zc.lastChild),Gi(this,d))):(this.lb.appendChild(c),
this.zc.appendChild(d));this.resize();R(Zb(this.lb),j)};m.Kb=function(a){this.bb.push(a);this.$e[a.id]=a;R(this.bc,l);var b=K(Kh,{Ua:a,text:ii(a.text),timestamp:Wc(a.time.getTime()),Wj:a.m.id==X.a().v.id});Xc(Vc.a(),a.time,G("timestamp",b));if(a.hb){var c=this.zh[a.hb];c.parentNode&&c.parentNode.insertBefore(b,c.nextSibling)}else this.A.appendChild(b);this.zh[a.hb||a.id]=b;this.resize(this.n.oe()?25:0,j);w(a.Wh,function(a){this.Kb(a)},this)};
m.wg=function(a,b){b&&this.Zc[a.id]&&C(this.Zc[a.id],"online");if(a.id!=X.a().v.id){if(!this.Zc[a.id]){var c=K(Ih,{m:a});this.Zc[a.id]=c;Tb(this.Gb,c,1);S(this.p(),c,"click",function(){Z.a().c(pg,a)})}R(this.Gb,j);ac(this.Gb.firstChild,"WATCHING"+(this.lh?" + SEEN":""));B(this.Zc[a.id],"online")}};
m.Hi=function(a){var b=a.target;if(a=hc(b,k,"comment")){var c=parseInt(a.id.split("-")[1],10),d=this.$e[c];if(D(b,"reply"))Z.a().c("reply-comment",d.hb?this.$e[d.hb]:d,d.m);else if(D(b,"remove")){Y("/_comment",ie(),"POST","delete=true&id="+c);b=a.nextSibling;for(Ub(a);D(b,"reply");)b=b.nextSibling,Ub(b)}}};
m.$h=function(){E(this.A.parentElement,"top-grad",!!this.A.scrollTop);var a=this.A.style.maxHeight,a=a.substring(0,a.length-2),b=T(this.A).height;E(this.A.parentElement,"bottom-grad",this.A.scrollTop<this.A.scrollHeight-a-5&&b>=a)};
m.resize=function(a,b){this.gc=a!=h?a:this.gc;this.A&&this.A.parentElement&&zd(this.A,"max-height",H().height-Gd(this.A.parentElement).y-110-this.gc+"px");this.$h();b&&O(s(function(){(new se(this.A,[this.A.scrollLeft,this.A.scrollTop],[this.A.scrollLeft,this.A.scrollHeight],400)).play()},this),0)};
m.Dj=function(){R(F("overlay"),j);FB.ui({method:"feed",name:this.h.name,link:this.h.link,P:this.h.Ra,caption:"on XYLO",description:this.h.description},function(){R(F("overlay"),l)});Hi(Sf.a(),this.h.id,j,l)};m.Tj=function(){var a=window.open("https://twitter.com/share?url="+this.h.link+"&text=I'm watching "+this.h.name+" "+this.h.link,"Tweet","height=320,width=550");a.moveTo(screen.width/2-225,screen.height/2-150);a.focus();Hi(Sf.a(),this.h.id,l,j)};m.Hj=function(){var a=Of(this.w);W.a().c(uf,a)};
m.Lj=function(){if(!W.a().f()||!W.a().f().async)this.xa.setActive(j),O(s(function(){this.xa.setActive(l)},this),2E3)};m.Kj=function(){if(!W.a().f()||!W.a().f().async){var a=Of(this.w);W.a().c(uf,a);this.xa.setActive(l);cf(this.Oc,l)}else wf().c(Vf,this.w,Me(this.Oc)),If.a().c(Kf,"Added to queue",this.h.name,h,this.h.Ra)};function Ii(a,b,c,d,f){U.call(this);this.oa=of();this.Gh=a||k;this.Yc=b||k;this.Af={};this.eg=c||k;this.$d=d||k;this.uj=f||k;this.df=this.oa?new gi:k;this.Jc=this.pj=0}v(Ii,U);
Ii.prototype.G=function(a){Ii.d.G.call(this,a);a.innerHTML="";a.scrollTop=0;B(this.b(),"ios-scroll");if(this.$d||this.eg)a=K(Oh,{Ra:this.eg,description:this.$d,link:this.uj}),this.b().appendChild(a),this.pj=T(a).height;this.M=I("div","loading",I("div","loading-spinner"));this.b().appendChild(this.M);R(this.M,l);D(this.b(),"starred")&&(this.Lc=I("div","no-comments","Stories you love will be here."),this.b().appendChild(this.Lc));this.se=I("div","medias");this.b().appendChild(this.se);S(this.p(),window,
"resize",xa(O,s(this.resize,this)));this.Yc?(R(this.M,j),Y(this.Yc,s(function(a){R(this.M,l);a=ug(vg(a.target));a=Ma(a,function(a){return new Ef(a)});w(a,this.Pe,this);this.Jc=T(this.se).height;this.resize()},this))):this.Gh&&(w(this.Gh,this.Pe,this),this.Jc=T(this.se).height,this.resize())};
Ii.prototype.Pe=function(a){this.Lc&&R(this.Lc,l);var b=K(Zh,{media:a});this.se.appendChild(b);if(this.oa){var c=this.df,d=new fi(b,h);hi(c,d)}S(this.p(),b,"click",s(function(){Z.a().c(og,a)},this));this.Af[a.id]=b};Ii.prototype.resize=function(){Ld(this.b(),H().height-40-(hc(this.b(),k,"tabbed")?30:0))};function Ji(a){U.call(this);this.vi=this.w=a;this.$a=["activity","starred"]}v(Ji,U);Ji.prototype.G=function(a){Ji.d.G.call(this,a);B(a,"profile");B(a,"ios-scroll");lc(a,Xh)};
Ji.prototype.s=function(){this.Ba=G("tabs",this.b());Y("/_star",s(function(a){a=xg(a.target);a=Ma(a,function(a){return new Ef(a)});this.Ed=new Ii(a);this.Ed.g(G("starred-content",this.b()))},this));Y("/_activity/"+this.vi.id,s(function(a){a=xg(a.target);window.console.log(a);this.bg=new Ki(a,this.vi.id);this.bg.g(G("activity-content",this.b()))},this));S(this.p(),this.Ba,"click",s(function(a){a=hc(a.target,"li");this.xb(a)},this));Lf.a().subscribe("star",function(a,b){if(b)this.Ed.Pe(a);else{var c=
this.Ed,d=c.Af[a.id];d&&(sc(d),Hb(c.Af,a.id))}},this)};Ji.prototype.xb=function(a){w(this.$a,function(b){E(this.Ba.parentElement,b,D(a,b));this.K=D(a,b)?b:this.K},this)};function Ki(a,b){U.call(this);this.Ai=a;this.Kd=b||k;this.R=0;this.Wb=l;this.Vg=[];this.dd=[];this.Ic=[];this.rg=[]}v(Ki,U);
Ki.prototype.G=function(a){Ki.d.G.call(this,a);a.innerHTML="";a.scrollTop=0;B(a,"stream");B(a,"ios-scroll");this.cd=I("div","activities");this.b().appendChild(this.cd);this.M=I("div","spinner");this.b().appendChild(this.M);R(this.M,l);this.Lc=I("div","no-comments",this.Kd?"Your activity will appear here.":"Friends's activity will appear here.");this.b().appendChild(this.Lc);Li(this,this.Ai);X.a().subscribe("new-activity",function(a){(this.Kd==a.user.id||!this.Kd&&a.user.id!=X.a().v.id)&&Mi(this,a,
h,h,j)},this);S(S(this.p(),this.b(),"scroll",s(function(){!this.Wb&&this.b().scrollTop+H().height>this.b().scrollHeight-60&&Ni(this)},this)),window,"resize",xa(O,s(this.resize,this)));this.resize()};function Ni(a){R(a.M,j);Y("/_activity"+(a.Kd?"/"+a.Kd:"")+"?offset="+a.R,s(function(a){this.Vg[String(a.target.sd)]||(this.Vg[String(a.target.sd)]=j,a=xg(a.target),this.Wb=!a.length,E(this.M,"finished",this.Wb),R(this.M,this.Wb),Li(this,a))},a))}
function Li(a,b){a.dd=[];a.Ic=[];w(b,function(a){this.R++;switch(a.type){case "session":var a=a.session,b=a.channel_id in this.dd?this.dd[a.channel_id]:[];b.push(a);this.dd[a.channel_id]=b;break;case "comment":a=a.comment,b=a.media.id in this.Ic?this.Ic[a.media.id]:[],b.push(a),this.Ic[a.media.id]=b}},a);Db(a.dd,function(a){Mi(this,h,a,"session")},a);Db(a.Ic,function(a){Mi(this,h,a,"comment")},a)}
function Mi(a,b,c,d,f){R(a.Lc,l);var b=b||k,c=c||k,g=b?b.type:d,i=[],n=b?[yg(X.a(),b.user)]:[],q=b?gd(b.time+"Z"):k;c&&w(c,function(a){Oa(n,function(b){return b.id==a.user.id})||n.push(yg(X.a(),a.user));var b=gd((a.time||a.tune_in)+"Z");q=q&&q.getTime()>b.getTime()?q:b;"session"==g&&w(a.media,function(a){!this.Ic[a.id]&&!Oa(i,function(b){return b.id==a.id})&&i.push(a)},this)},a);switch(g){case "session":var d=b?b.session:c[0],t=V.a().get(d.channel_id),i=b?b.session.media:i,b=K(Mh,{fa:n,U:t,time:Wc(q.getTime()),
qi:!!d.tune_out});break;case "comment":var i=b?[b.comment.media]:[c[0].media],A=b?[new Ai(b.comment)]:[];c&&w(c,function(a){A.push(new Ai(a))});b=K(Nh,{ed:A.reverse(),fa:n,media:i[0]});break;default:return}Xc(Vc.a(),q,G("timestamp",b));d=Pa(a.rg,function(a){return a.time<q.getTime()});Wa(a.rg,d,0,{time:q,element:b});var J=G("medias",b);w(i,function(a){var b=new Ef(a),a=K(Zh,{media:b});G("thumb",a);J.appendChild(a);S(this.p(),a,"click",function(){Z.a().c(og,b)})},a);f?Tb(a.cd,b,0):c?Tb(a.cd,b,d):a.cd.appendChild(b);
O(xa(B,b,"show"))}Ki.prototype.resize=function(){var a=H().height-40-(hc(this.b(),k,"tabbed")?40:10);Ld(this.b(),a);T(this.cd).height<a&&Ni(this)};function Oi(){U.call(this);this.oa=of();this.Di=new xi;this.$a={};this.Cb=[];this.Qc=[]}v(Oi,U);m=Oi.prototype;
m.s=function(){Oi.d.s.call(this);this.Ig=F("sidebar-content");this.Fh=F("media-list");this.Mf=F("profile");this.Jg=F("conversation");this.Db=F("toolbar");this.Ba=G("tabs",this.b());var a=new Pe(document);w(Vb(this.Ba),function(a){var b=zb(a)[0];this.$a[b]=a;this.Cb.push(b)},this);this.Qh();Y("/_activity",s(function(a){a=xg(a.target);this.bg=new Ki(a);this.bg.g(F("stream"))},this));this.Ed=new Ji(X.a().v);this.Ed.g(F("my-profile"));this.fb?(this.J=this.fb.b(),this.K="info"):(this.J=F("stream"),this.K=
"stream");this.Qc=[this.J,""];B(this.J,"current");if(this.oa){this.Di.g(F("admin"));var b=K(Ph,{name:"ADMIN",className:"admin"});this.Ba.appendChild(b);this.$a.admin=b;this.Cb.push("admin")}Pi(this);S(S(S(S(this.p(),G("back-button",this.Db),"click",s(function(a){var b=this.Qc.shift();this.navigate(b[0],j,b[1]);Pi(this);a.stopPropagation()},this)),this.Ba,"click",s(function(a){var b=this.K,f=hc(a.target,"li"),g=zb(f)[0];Qi(this,this.K,g);B(f,"selected");Ed(G("arrow",this.Db),T(f).width/2+Gd(f).x);
b!=this.K&&a.stopPropagation()},this)),this.Db,"click",s(function(a){((a=hc(a.target,"li"))&&zb(a)[0]==this.K||!a)&&(new se(this.J,[this.J.scrollLeft,this.J.scrollTop],[this.J.scrollLeft,0],300)).play()},this)),a,"key",s(function(a){a.ctrlKey&&"68"==a.keyCode&&Ab(this.b(),"dark")},this));Q.a().subscribe(Yc,function(a){E(this.b(),"toggled",a);O(s(function(){E(this.b(),"collapsed",!a)},this),!a?500:0)},this);Z.a().subscribe("navigate",this.navigate,this);Z.a().subscribe("conversation",this.nk,this);
Z.a().subscribe("media-list",this.qk,this);Z.a().subscribe(og,this.pk,this);Z.a().subscribe(pg,this.rk,this);V.a().subscribe(tf,this.Qh,this);V.a().subscribe(rf,this.Cj,this);Q.a().subscribe("toggle-admin",function(a){E(this.b(),"admin",a);a?(Q.a().c(Yc,j),Qi(this,this.K,"admin")):"admin"==this.K&&Qi(this,"admin","info")},this)};m.Qh=function(a){if(a=a||V.a().j.f())this.Yd=a.media,sc(this.fb),this.fb=new Fi(this.Yd),this.fb.g(F("info"))};
m.Cj=function(a){a=a||V.a().j;if(this.Yd=a.f()&&a.f().media)sc(this.fb),this.fb=new Fi(this.Yd),this.fb.g(F("info"))};
function Qi(a,b,c){var d=G(c,a.Ig);Ka(a.Cb,b);var f=Ka(a.Cb,c),g=(b=Ka(a.Cb,b)<f)?0:a.Cb.length-1,i=b?g<a.Cb.length:0<=g;for(g;i;g+=b?1:-1){var n=G(a.Cb[g],a.Ig);if(b&&g>f||!b&&g<f)zd(n,{left:"",right:""});else if(b&&g<f||!b&&g>f)zd(n,{left:b?"-300px":"",right:""});else if(g==f){zd(n,{right:b?0:"",left:""});break}}a.K=c;Wa(a.Qc,0,0,[a.J,""]);C(a.J,"current");a.J=d;B(a.J,"current");Pi(a)}
m.navigate=function(a,b,c){if(a!=this.J){var d=D(this.J,"screen");b?(zd(this.J,{left:"",right:0}),zd(a,{right:"",left:0,width:""}),C(this.J,"current"),B(a,"current"),this.J=a):(zd(this.J,{left:d?0:"",right:""}),zd(a,{right:0,left:""}),b=[this.J,ec(G("back-title",this.Db))],Wa(this.Qc,0,0,b),C(this.J,"current"),this.J=a,B(this.J,"current"));E(this.Db,"back",D(this.J,"slide"));c&&ac(G("back-title",this.Db),c)}};m.nk=function(a,b,c,d){(new Di(a,b,c,d)).g(this.Jg);Z.a().c("navigate",this.Jg,l,a.name)};
m.qk=function(a,b,c,d,f,g){(new Ii(b,c,d,f,g)).g(this.Fh);Z.a().c("navigate",this.Fh,l,a,d,f)};m.pk=function(a){if(this.fb&&a.id==this.fb.w.id){C(this.Db,"back");for(a=this.Qc[0][0];a&&D(a,"slide");)a=this.Qc.shift();Qi(this,this.K,"info")}else{var b=F("media-info");(new Fi(a)).g(b);Z.a().c("navigate",b,l,a.name)}Q.a().c(Yc,j)};m.rk=function(a){if(!this.Nf||!(this.Nf.w.id==a.id&&this.J==this.Mf))this.Nf=new Ji(a),this.Nf.g(this.Mf),Z.a().c("navigate",this.Mf,l,a.name),Q.a().c(Yc,j)};
function Pi(a){Ed(G("arrow",a.Db),T(a.$a[a.K]).width/2+Gd(a.$a[a.K]).x)};function Ri(a){return'<div class="main"><div id="stage" class="stage"><div id="ytplayer"></div><div id="stagecover"><div class="message"><span></span><div class="spinner" style="display:none"></div></div><div class="fullscreen"></div><div class="expand"></div><div class="play" style="display: none"><div></div></div><div class="pause" style="display: none"><div></div></div></div><div id="logo"></div></div><div id="guide" class="guide animate'+(a.Zg?" toggled":" collapsed")+'"><div id="channels" class="channels"></div><div class="right-grad"></div><div class="header" id="header"><div class="times"><div id="now-left" class="left browse">&#x25C0;<span> NOW</span></div><div id="now-right" class="right browse"><span>NOW </span>&#x25B6;</div></div></div><div id="my-ticker" class="my-ticker" style="display:none"><div class="me" style="background:'+
L(a.m.color)+";border-color:"+L(a.m.color)+';"><img src="'+L(a.m.P)+'"/></div></div><div id="ticker" class="ticker"><div id="go-live" class="go-live">GO LIVE</div></div></div><div id="controller" class="controller'+(a.Zg?" guide-toggled":" collapsed")+(a.sidebar?" sidebar-toggled":"")+'"><div class="background"></div><div class="left"><div id="guide-toggle" class="guide-toggle dark button">GUIDE</div><div class="controls"><div class="restart dark button"><div class="icon"></div></div><div class="play dark button"><div class="icon"></div></div><div class="volume dark button"><div class="icon"></div></div></div><div class="border"></div></div><div class="right"><div id="info-toggle" class="info-toggle dark button"><div class="icon"></div></div><div id="admin-toggle" class="admin-toggle dark button" style="display: none"><div class="icon"></div><div id="toggle-pending" class="pending" style="display:none"></div></div><div id="sidebar-toggle" class="sidebar-toggle dark button"><div class="icon"></div></div><div class="border"></div></div><div class="progress" style="display: none"><div class="elapsed animate"><div class="seek"></div></div><div class="title"></div><div class="current-time"></div><div class="duration"></div></div></div><div id="sidebar" class="'+
(a.sidebar?"toggled":"collapsed")+'"><div id="toolbar"><div class="back"><div class="back-button"><div>BACK</div></div><div class="back-title"></div></div><ul class="tabs"><li class="info tab selected"><div class="label">NOW</div></li><li class="stream tab"><div class="label">STREAM</div></li><li class="profile tab"><div class="label">ME</div></li></ul><div class="radial-grad"></div><div class="arrow"></div></div><div id="sidebar-content"><div id="info" class="screen info"><div class="no-info">Pick a channel or play a story.</div></div><div id="stream" class="screen stream"><div class="loading loading-activity"><div class="loading-spinner"></div></div></div><div id="my-profile" class="screen profile"></div><div id="admin" class="screen admin"></div><div id="media-list" class="slide media-list"></div><div id="conversation" class="slide"></div>'+
(a.Qe?'<div id="admin-col-list" class="slide admin"></div><div id="admin-list" class="slide admin-list"></div>':"")+'<div id="media-info" class="slide info"></div><div id="profile" class="slide profile"></div></div></div><div id="notify" class="notify"></div></div>'};function Sf(){}ja(Sf);_gaq=[];Sf.prototype.init=function(){_gaq.push(["_setAccount","UA-38058655-1"]);_gaq.push(["_trackPageview"]);var a=document.createElement("script");a.type="text/javascript";a.async=j;a.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)};Sf.prototype.login=function(){_gaq.push(["_trackEvent","Users","Login",X.a().v.id])};
function Yf(a,b){_gaq.push(["_trackEvent","Media","Play",b.id]);_gaq.push(["_trackEvent","Users","Play",X.a().v.id])}Sf.prototype.Nb=function(a,b){a.C||(_gaq.push(["_trackEvent","Channel","OptOut",b.id]),_gaq.push(["_trackEvent","Channel","OptIn",a.id]))};
Sf.prototype.Ua=function(a,b,c){_gaq.push(["_trackEvent","Media","Comment",a.id]);_gaq.push(["_trackEvent","Users","Comment",X.a().v.id]);b&&_gaq.push(["_trackEvent","Facebook","Comment",X.a().v.id]);c&&_gaq.push(["_trackEvent","Twitter","Comment",X.a().v.id])};
function Hi(a,b,c,d){_gaq.push(["_trackEvent","Media","Share",b.id]);_gaq.push(["_trackEvent","Users","Share",X.a().v.id]);c&&_gaq.push(["_trackEvent","Facebook","Share",X.a().v.id]);d&&_gaq.push(["_trackEvent","Twitter","Share",X.a().v.id]);Y("/_share",ie(),"POST","facebook="+c+"&twitter="+d)}fa("_gaq",_gaq);function Si(){P.call(this);this.Dh=l}v(Si,P);ja(Si);Si.prototype.init=function(a){this.mc=a;a=(new appengine.Channel(unescape(a))).open();a.onmessage=s(this.Gj,this);a.onclose=s(this.Oh,this);window.onbeforeunload=s(this.Oh,this);return this};
Si.prototype.Gj=function(a){var b=ug(a.data);switch(b.type){case "viewer_change":var a=yg(X.a(),b.user),c=V.a().get(b.channel_id),d=gd(b.time+"Z"),f=new Rf(b.session_id,a,c,d);a.Zd&&a.Zd.end(d);a.Zd=f;if(b.last_channel_id){d=V.a().get(b.last_channel_id);d.c("remove-viewer",a);var g=d.f();g&&g.media.c(Gf,a,d,j)}c.c(Wf,f);(f=c.f())&&f.media.c(Gf,a,c);break;case "new_comment":a=new Ai(b.comment);f=b.tweet?new Bi(b.tweet):k;if(d=Mf(Lf.a(),b.comment.media))d.c(Ff,a),f&&d.c("add-tweet",f);break;case "new_activity":X.a().c("new-activity",
b.activity);break;case "update_programs":a=b.programs;c=V.a().get(b.channel_id);w(a,function(a){c.c(Xf,a)},this);break;case "new_programs":w(b.programs,s(function(a){var a=new Nf(a),c=V.a().get(b.channel_id);c&&(c.c(Uf,a),(!V.a().j||!V.a().j.f())&&V.a().c(rf,c))},this));break;case "twitter_auth":X.a().v.c("twitter-auth")}};
Si.prototype.Oh=function(){if(!this.Dh){var a=V.a().j.C&&V.a().j.Ji&&Math.floor(W.a().getCurrentTime());Y("/_settings",ie(),"POST","show_guide="+Q.a().Zb+"&show_sidebar="+Q.a().Tc+(a?"&current_seek="+a:""));this.Dh=j}};function Ti(){P.call(this);this.Dl=[]}v(Ti,P);ja(Ti);Ti.prototype.xf=function(a){Db(a,s(function(a,c){w(a,s(function(a){a=new Nf(a);V.a().sc[c]&&V.a().sc[c].oc(a)},this))},this))};var Ui=l;function Vi(a){a.match(/[\d]+/g).length=3}
if(navigator.plugins&&navigator.plugins.length){var Wi=navigator.plugins["Shockwave Flash"];Wi&&(Ui=j,Wi.description&&Vi(Wi.description));navigator.plugins["Shockwave Flash 2.0"]&&(Ui=j)}else if(navigator.mimeTypes&&navigator.mimeTypes.length){var Xi=navigator.mimeTypes["application/x-shockwave-flash"];(Ui=Xi&&Xi.enabledPlugin)&&Vi(Xi.enabledPlugin.description)}else try{var Yi=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7"),Ui=j;Vi(Yi.GetVariable("$version"))}catch(Zi){try{Yi=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6"),
Ui=j}catch($i){try{Yi=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),Ui=j,Vi(Yi.GetVariable("$version"))}catch(aj){}}};function bj(a,b,c,d,f,g,i,n){this.Yc=a;this.Fi=b;this.$d=c;this.Ll=d;this.Bl=f;this.ul=g;this.ra=i;this.ua=n;this.Bk=[];this.gl=[];this.kl=[];this.Gl=[]}bj.prototype.Xg=ca("Fi");bj.prototype.Xf=function(a){this.t=a;return this};function cj(a){this.Yc=a;this.uk=k}function dj(a){this.Yc=a;this.uk=this.Ml=k};function tg(a,b,c){bj.call(this,"http://www.youtube.com/watch?v="+encodeURIComponent(String(a)),b,c,"application/x-shockwave-flash");this.Hk=a;this.Bk=[new cj("http://i.ytimg.com/vi/"+a+"/default.jpg")];this.Xf(new dj("http://www.youtube.com/v/"+encodeURIComponent(String(a))+"&hl=en&fs=1&autoplay=1"))}v(tg,bj);
var sg=RegExp("http://(?:[a-zA-Z]{2,3}\\.)?(?:youtube\\.com/watch)(?:\\?(?:[\\w=-]+&(?:amp;)?)*v=([\\w-]+)(?:&(?:amp;)?[\\w=-]+)*)?(?:#[!]?(?:(?:(?:[\\w=-]+&(?:amp;)?)*(?:v=([\\w-]+))(?:&(?:amp;)?[\\w=-]+)*)|(?:[\\w=&-]+)))?[^\\w-]?","i");function ej(a){U.call(this);this.Kk=Si.a().init(a);this.Ii=new nh;this.Vi=new nf;this.tk=new Oi;this.t=new yh;this.Aj=new uh}v(ej,U);ej.prototype.G=function(a){ej.d.G.call(this,a);var b=K(Ri,{m:X.a().v,Qe:of(),Zg:X.a().v.ok,sidebar:X.a().v.sk});Tb(a,b,0)};
ej.prototype.s=function(){ej.d.s.call(this);this.Ii.g(F("controller"));this.Vi.g(F("guide"));this.tk.g(F("sidebar"));this.t.g(F("stage"));this.Aj.g(F("notify"));S(this.p(),document.body,"touchmove",function(a){hc(a.target,"div","ios-scroll")||a.preventDefault()});S(this.p(),window,"click",function(a){var b=hc(a.target,"a");if(b=b?b.href:k)if((b=b.match("#(.*):(.*)"))&&b.length)switch(a.preventDefault(),a.stopPropagation(),b[1]){case "user":a=X.a().get(b[2]);Z.a().c(pg,a);break;case "channel":a=V.a().get(b[2]);
V.a().c(rf,a);break;case "info":a=Lf.a().get(b[2]),Z.a().c(og,a)}});Q.a().subscribe("toggle-info",function(){var a=F("login"),b=F("static-content"),c=F("pages");C(a,"hide");B(a,"show");b.style.height=T(c).height+80+"px";fj(j)},this)};
function fj(a){var b=F("login"),c=F("static-content"),d=F("pages"),f=D(b,"app");E(b,"expanded",a);F("uvTab")&&E(F("uvTab"),"show",f&&a);a?(f?c.style.bottom=-T(d).height-80+"px":c.style.top=Math.max(10,H().height-280)+"px",a=f?Math.min(H().height-100,c.scrollHeight+80):Math.min(H().height-435,c.scrollHeight+190),!f||f&&!b.scrollTop?(f=new se(b,[b.scrollLeft,b.scrollTop],[b.scrollLeft,a],300),B(b,"scrolling"),f.play(),N(f,"end",function(){C(b,"scrolling")})):b.scrollTop=a):(c.style.top="",c.style.height=
"",f?O(function(){C(b,"show")},200):c.className="")}
function gj(){var a=F("fb-login"),b=F("static-content"),c=F("login");B(a,"disabled");B(a,"spin");Y("/_session",function(a){if(200==mh(a.target)){var f=xg(a.target),a=function(){O(function(){B(b,"hide");B(c,"hide");O(function(){R(F("homepage"),l);B(c,"app");B(b,"about")},600)},600)};Uc(W.a(),"no-media",a);Uc(W.a(),sh,a);var a=f.token,g=f.channels,i=f.programs,n=f.current_user,f=f.viewer_sessions;if(!Gb(n)){var q=X.a();q.v=yg(q,n)}V.a().xf(g,n.current_channel);Ti.a().xf(i);var g=V.a(),t=X.a();w(f,s(function(a){var b=
yg(X.a(),a.user);t.add(b);var c=X.a();Oa(c.Ff,function(a){return a.id==b.id})||c.Ff.push(b);var c=this.sc[a.channel_id],d=gd(a.tune_in+"Z"),f=a.tune_out?gd(a.tune_out+"Z"):k,a=new Rf(a.id,b,c,d,f);b.Zd=a;c&&(c.$c.push(a),(a=c.f())&&a.media.c(Gf,b,c))},g));Vc.a().init();(new ej(a)).g(document.body);Sf.a().login();a=document.createElement("script");a.type="text/javascript";a.async=j;a.src=("https:"==document.location.protocol?"https://":"http://")+"widget.uservoice.com/WGHjF5nSR8jL1GxXyQNxWA.js";g=
document.getElementsByTagName("script")[0];g.parentNode.insertBefore(a,g)}else 500==mh(a.target)?hj("error","Opps, check back later"):hj("wait")},"POST")}function hj(a,b){var c=F("fb-login");if(a){var d=G("power",c);B(d,a)}b&&(d=G("waitlist",c),ac(d,b));C(c,"spin");B(c,"disabled");R(c,j);B(c,"show");B(c,"waitlist")}function oh(a){var b=parseInt(a,10),a=Math.floor(b/3600),c=Math.floor((b-3600*a)/60),b=b-3600*a-60*c;10>c&&(c=(a?"0":"")+c);10>b&&(b="0"+b);return(a?a+":":"")+(c?c+":":"")+b}
fa("brkn.Main.staticInit",function(){var a=F("fb-login"),b=F("login"),c=F("static-content"),d=F("pages"),f=F("footer"),g=l;O(function(){R(a,j);O(xa(B,a,"show"),400)},100);N(b,"click",function(a){"static-scrollable"==a.target.id&&(a=D(b,"app"),g=l,a?fj(g):(a=new se(b,[b.scrollLeft,b.scrollTop],[b.scrollLeft,0],300),a.play(),N(a,"end",xa(fj,g))))});N(b,"scroll",function(){!D(b,"scrolling")&&1>b.scrollTop&&(g=l,fj(g))});N(f,"click",function(a){var a=hc(a.target,k,"section"),f=D(b,"app");a&&(g=j,c.className=
a.id,c.style.height=T(d).height+(f?80:220)+"px",fj(g))});N(window,"resize",xa(fj,g));Sf.a().init()});fa("brkn.Main.auth",function(){FB.getLoginStatus(function(a){if("connected"===a.status)gj();else{var b=F("fb-login");N(b,"click",function(){B(b,"disabled");FB.login(function(a){a.authResponse?gj():C(b,"disabled")},{scope:"email"})})}})});