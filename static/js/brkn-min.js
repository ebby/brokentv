function e(a){throw a;}var i=void 0,j=!0,k=null,l=!1;function aa(){return function(){}}function ba(a){return function(b){this[a]=b}}function ca(a){return function(){return this[a]}}function da(a){return function(){return a}}var m,ea=ea||{},fa=this;function ga(a,b){var c=a.split("."),d=fa;!(c[0]in d)&&d.execScript&&d.execScript("var "+c[0]);for(var f;c.length&&(f=c.shift());)!c.length&&ha(b)?d[f]=b:d=d[f]?d[f]:d[f]={}}
function ia(a){for(var a=a.split("."),b=fa,c;c=a.shift();)if(b[c]!=k)b=b[c];else return k;return b}function ja(){}function ka(a){a.a=function(){return a.Lh?a.Lh:a.Lh=new a}}
function la(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function ha(a){return a!==i}function ma(a){return"array"==la(a)}function na(a){var b=la(a);return"array"==b||"object"==b&&"number"==typeof a.length}function p(a){return"string"==typeof a}function oa(a){return"number"==typeof a}function pa(a){return"function"==la(a)}function qa(a){var b=typeof a;return"object"==b&&a!=k||"function"==b}function ra(a){return a[sa]||(a[sa]=++ta)}
var sa="closure_uid_"+Math.floor(2147483648*Math.random()).toString(36),ta=0;function ua(a,b,c){return a.call.apply(a.bind,arguments)}function va(a,b,c){a||e(Error());if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}
function r(a,b,c){r=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ua:va;return r.apply(k,arguments)}function wa(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=Array.prototype.slice.call(arguments);b.unshift.apply(b,c);return a.apply(this,b)}}var s=Date.now||function(){return+new Date};function ya(a,b){var c=b||{},d;for(d in c)var f=(""+c[d]).replace(/\$/g,"$$$$"),a=a.replace(RegExp("\\{\\$"+d+"\\}","gi"),f);return a}
function t(a,b){function c(){}c.prototype=b.prototype;a.d=b.prototype;a.prototype=new c;a.prototype.constructor=a};function za(a,b){for(var c=1;c<arguments.length;c++)var d=String(arguments[c]).replace(/\$/g,"$$$$"),a=a.replace(/\%s/,d);return a}function Aa(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")}function Ba(a){if(!Ca.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(Da,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(Ea,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(Fa,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(Ga,"&quot;"));return a}var Da=/&/g,Ea=/</g,Fa=/>/g,Ga=/\"/g,Ca=/[&<>\"]/;
function Ha(a){var a=ha(i)?a.toFixed(i):String(a),b=a.indexOf(".");-1==b&&(b=a.length);b=Math.max(0,2-b);return Array(b+1).join("0")+a}function Ia(a){return String(a).replace(/\-([a-z])/g,function(a,c){return c.toUpperCase()})};var Ja=Array.prototype,Ka=Ja.indexOf?function(a,b,c){return Ja.indexOf.call(a,b,c)}:function(a,b,c){c=c==k?0:0>c?Math.max(0,a.length+c):c;if(p(a))return!p(b)||1!=b.length?-1:a.indexOf(b,c);for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},u=Ja.forEach?function(a,b,c){Ja.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,f=p(a)?a.split(""):a,g=0;g<d;g++)g in f&&b.call(c,f[g],g,a)},La=Ja.filter?function(a,b,c){return Ja.filter.call(a,b,c)}:function(a,b,c){for(var d=a.length,f=[],g=0,h=
p(a)?a.split(""):a,n=0;n<d;n++)if(n in h){var q=h[n];b.call(c,q,n,a)&&(f[g++]=q)}return f},Ma=Ja.map?function(a,b,c){return Ja.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,f=Array(d),g=p(a)?a.split(""):a,h=0;h<d;h++)h in g&&(f[h]=b.call(c,g[h],h,a));return f},Na=Ja.every?function(a,b,c){return Ja.every.call(a,b,c)}:function(a,b,c){for(var d=a.length,f=p(a)?a.split(""):a,g=0;g<d;g++)if(g in f&&!b.call(c,f[g],g,a))return l;return j};
function Oa(a,b){var c=Pa(a,b,i);return 0>c?k:p(a)?a.charAt(c):a[c]}function Pa(a,b,c){for(var d=a.length,f=p(a)?a.split(""):a,g=0;g<d;g++)if(g in f&&b.call(c,f[g],g,a))return g;return-1}function Qa(a,b){return 0<=Ka(a,b)}function Ra(a,b){var c=Ka(a,b);0<=c&&Ja.splice.call(a,c,1)}function Sa(a,b,c){b=Pa(a,b,c);0<=b&&Ja.splice.call(a,b,1)}function Ta(a){return Ja.concat.apply(Ja,arguments)}function Ua(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]}
function Va(a,b){for(var c=1;c<arguments.length;c++){var d=arguments[c],f;if(ma(d)||(f=na(d))&&d.hasOwnProperty("callee"))a.push.apply(a,d);else if(f)for(var g=a.length,h=d.length,n=0;n<h;n++)a[g+n]=d[n];else a.push(d)}}function Wa(a,b,c,d){Ja.splice.apply(a,Xa(arguments,1))}function Xa(a,b,c){return 2>=arguments.length?Ja.slice.call(a,b):Ja.slice.call(a,b,c)};var Ya,Za,$a,ab,bb;function cb(){return fa.navigator?fa.navigator.userAgent:k}function db(){return fa.navigator}ab=$a=Za=Ya=l;var eb;if(eb=cb()){var fb=db();Ya=0==eb.indexOf("Opera");Za=!Ya&&-1!=eb.indexOf("MSIE");$a=!Ya&&-1!=eb.indexOf("WebKit");ab=!Ya&&!$a&&"Gecko"==fb.product}var hb=Ya,w=Za,ib=ab,jb=$a,kb=db();bb=-1!=(kb&&kb.platform||"").indexOf("Mac");var lb=!!db()&&-1!=(db().appVersion||"").indexOf("X11"),mb;
a:{var nb="",ob;if(hb&&fa.opera)var pb=fa.opera.version,nb="function"==typeof pb?pb():pb;else if(ib?ob=/rv\:([^\);]+)(\)|;)/:w?ob=/MSIE\s+([^\);]+)(\)|;)/:jb&&(ob=/WebKit\/(\S+)/),ob)var qb=ob.exec(cb()),nb=qb?qb[1]:"";if(w){var rb,sb=fa.document;rb=sb?sb.documentMode:i;if(rb>parseFloat(nb)){mb=String(rb);break a}}mb=nb}var tb={};
function ub(a){var b;if(!(b=tb[a])){b=0;for(var c=Aa(String(mb)).split("."),d=Aa(String(a)).split("."),f=Math.max(c.length,d.length),g=0;0==b&&g<f;g++){var h=c[g]||"",n=d[g]||"",q=RegExp("(\\d*)(\\D*)","g"),v=RegExp("(\\d*)(\\D*)","g");do{var y=q.exec(h)||["","",""],J=v.exec(n)||["","",""];if(0==y[0].length&&0==J[0].length)break;b=((0==y[1].length?0:parseInt(y[1],10))<(0==J[1].length?0:parseInt(J[1],10))?-1:(0==y[1].length?0:parseInt(y[1],10))>(0==J[1].length?0:parseInt(J[1],10))?1:0)||((0==y[2].length)<
(0==J[2].length)?-1:(0==y[2].length)>(0==J[2].length)?1:0)||(y[2]<J[2]?-1:y[2]>J[2]?1:0)}while(0==b)}b=tb[a]=0<=b}return b}var vb={};function wb(a){return vb[a]||(vb[a]=w&&!!document.documentMode&&document.documentMode>=a)};var xb,yb=!w||wb(9),zb=!ib&&!w||w&&wb(9)||ib&&ub("1.9.1"),Ab=w&&!ub("9"),Bb=w||hb||jb;function Cb(a){a=a.className;return p(a)&&a.match(/\S+/g)||[]}function x(a,b){for(var c=Cb(a),d=Xa(arguments,1),f=c.length+d.length,g=c,h=0;h<d.length;h++)Qa(g,d[h])||g.push(d[h]);a.className=c.join(" ");return c.length==f}function z(a,b){var c=Cb(a),d=Xa(arguments,1),f,g=d;f=La(c,function(a){return!Qa(g,a)});a.className=f.join(" ");return f.length==c.length-d.length}function A(a,b){return Qa(Cb(a),b)}function B(a,b,c){c?x(a,b):z(a,b)}function Db(a,b){var c=!A(a,b);B(a,b,c);return c};function Eb(a,b){this.x=ha(a)?a:0;this.y=ha(b)?b:0}Eb.prototype.clone=function(){return new Eb(this.x,this.y)};function Fb(a,b){this.width=a;this.height=b}Fb.prototype.clone=function(){return new Fb(this.width,this.height)};Fb.prototype.ceil=function(){this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};Fb.prototype.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};Fb.prototype.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};function Gb(a,b,c){for(var d in a)b.call(c,a[d],d,a)}function Hb(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function Ib(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}function Jb(a){for(var b in a)return l;return j}function Kb(a,b){b in a&&delete a[b]}function Lb(a,b,c){b in a&&e(Error('The object already contains the key "'+b+'"'));a[b]=c}var Mb="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");
function Nb(a,b){for(var c,d,f=1;f<arguments.length;f++){d=arguments[f];for(c in d)a[c]=d[c];for(var g=0;g<Mb.length;g++)c=Mb[g],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};function Ob(a){return a?new Pb(Qb(a)):xb||(xb=new Pb)}function C(a){return p(a)?document.getElementById(a):a}function Rb(a,b){var c=b||document;return c.querySelectorAll&&c.querySelector?c.querySelectorAll("."+a):c.getElementsByClassName?c.getElementsByClassName(a):Sb("*",a,b)}function D(a,b){var c=b||document,d=k;return(d=c.querySelectorAll&&c.querySelector?c.querySelector("."+a):Rb(a,b)[0])||k}
function Sb(a,b,c){var d=document,c=c||d,a=a&&"*"!=a?a.toUpperCase():"";if(c.querySelectorAll&&c.querySelector&&(a||b))return c.querySelectorAll(a+(b?"."+b:""));if(b&&c.getElementsByClassName){c=c.getElementsByClassName(b);if(a){for(var d={},f=0,g=0,h;h=c[g];g++)a==h.nodeName&&(d[f++]=h);d.length=f;return d}return c}c=c.getElementsByTagName(a||"*");if(b){d={};for(g=f=0;h=c[g];g++)a=h.className,"function"==typeof a.split&&Qa(a.split(/\s+/),b)&&(d[f++]=h);d.length=f;return d}return c}
var Tb={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function E(){var a=window.document,a="CSS1Compat"==a.compatMode?a.documentElement:a.body;return new Fb(a.clientWidth,a.clientHeight)}function F(a,b,c){return Ub(document,arguments)}
function Ub(a,b){var c=b[0],d=b[1];if(!yb&&d&&(d.name||d.type)){c=["<",c];d.name&&c.push(' name="',Ba(d.name),'"');if(d.type){c.push(' type="',Ba(d.type),'"');var f={};Nb(f,d);delete f.type;d=f}c.push(">");c=c.join("")}var g=a.createElement(c);d&&(p(d)?g.className=d:ma(d)?x.apply(k,[g].concat(d)):Gb(d,function(a,b){"style"==b?g.style.cssText=a:"class"==b?g.className=a:"for"==b?g.htmlFor=a:b in Tb?g.setAttribute(Tb[b],a):0==b.lastIndexOf("aria-",0)||0==b.lastIndexOf("data-",0)?g.setAttribute(b,a):
g[b]=a}));if(2<b.length){d=function(b){b&&g.appendChild(p(b)?a.createTextNode(b):b)};for(c=2;c<b.length;c++)if(f=b[c],na(f)&&!(qa(f)&&0<f.nodeType)){var h=u,n;a:{if((n=f)&&"number"==typeof n.length){if(qa(n)){n="function"==typeof n.item||"string"==typeof n.item;break a}if(pa(n)){n="function"==typeof n.item;break a}}n=l}h(n?Ua(f):f,d)}else d(f)}return g}function Vb(a){for(var b;b=a.firstChild;)a.removeChild(b)}function Wb(a,b,c){a.insertBefore(b,a.childNodes[c]||k)}
function G(a){a&&a.parentNode&&a.parentNode.removeChild(a)}function Xb(a){return zb&&a.children!=i?a.children:La(a.childNodes,function(a){return 1==a.nodeType})}function Yb(a){return a.nextElementSibling!=i?a.nextElementSibling:Zb(a.nextSibling,j)}function Zb(a,b){for(;a&&1!=a.nodeType;)a=b?a.nextSibling:a.previousSibling;return a}function $b(a){if(Bb)return a.parentElement;a=a.parentNode;return qa(a)&&1==a.nodeType?a:k}
function ac(a,b){if(a.contains&&1==b.nodeType)return a==b||a.contains(b);if("undefined"!=typeof a.compareDocumentPosition)return a==b||Boolean(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a}function Qb(a){return 9==a.nodeType?a:a.ownerDocument||a.document}
function bc(a,b){if("textContent"in a)a.textContent=b;else if(a.firstChild&&3==a.firstChild.nodeType){for(;a.lastChild!=a.firstChild;)a.removeChild(a.lastChild);a.firstChild.data=b}else Vb(a),a.appendChild(Qb(a).createTextNode(b))}var cc={SCRIPT:1,STYLE:1,HEAD:1,IFRAME:1,OBJECT:1},dc={IMG:" ",BR:"\n"};function ec(a){var b=a.getAttributeNode("tabindex");return b&&b.specified?(a=a.tabIndex,oa(a)&&0<=a&&32768>a):l}
function fc(a){if(Ab&&"innerText"in a)a=a.innerText.replace(/(\r\n|\r|\n)/g,"\n");else{var b=[];gc(a,b,j);a=b.join("")}a=a.replace(/ \xAD /g," ").replace(/\xAD/g,"");a=a.replace(/\u200B/g,"");Ab||(a=a.replace(/ +/g," "));" "!=a&&(a=a.replace(/^\s*/,""));return a}function hc(a){var b=[];gc(a,b,l);return b.join("")}
function gc(a,b,c){if(!(a.nodeName in cc))if(3==a.nodeType)c?b.push(String(a.nodeValue).replace(/(\r\n|\r|\n)/g,"")):b.push(a.nodeValue);else if(a.nodeName in dc)b.push(dc[a.nodeName]);else for(a=a.firstChild;a;)gc(a,b,c),a=a.nextSibling}function ic(a,b,c){if(!b&&!c)return k;b=b?b.toUpperCase():k;a:{for(var d=0;a;){if((!b||a.nodeName==b)&&(!c||A(a,c))){c=a;break a}a=a.parentNode;d++}c=k}return c}function Pb(a){this.ca=a||fa.document||document}m=Pb.prototype;m.La=Ob;
m.b=function(a){return p(a)?this.ca.getElementById(a):a};m.J=function(a,b,c){return Ub(this.ca,arguments)};m.createElement=function(a){return this.ca.createElement(a)};m.createTextNode=function(a){return this.ca.createTextNode(a)};function jc(a){var b=a.ca,a=!jb&&"CSS1Compat"==b.compatMode?b.documentElement:b.body,b=b.parentWindow||b.defaultView;return new Eb(b.pageXOffset||a.scrollLeft,b.pageYOffset||a.scrollTop)}m.appendChild=function(a,b){a.appendChild(b)};m.rh=Xb;
function kc(a,b){return b.firstElementChild!=i?b.firstElementChild:Zb(b.firstChild,j)}m.contains=ac;w&&ub(8);var lc={};function mc(a,b,c){a.innerHTML=b(c||lc,i,i)}function H(a,b){var c;a:if(c=(new Pb(i)||Ob()).createElement("DIV"),c.innerHTML=a(b||lc,i,i),1==c.childNodes.length){var d=c.firstChild;if(1==d.nodeType){c=d;break a}}return c}function I(a){return"object"===typeof a&&a&&0===a.Hl?a.content:String(a).replace(nc,oc)}
var pc={"\x00":"&#0;",'"':"&quot;","&":"&amp;","'":"&#39;","<":"&lt;",">":"&gt;","\t":"&#9;","\n":"&#10;","\x0B":"&#11;","\f":"&#12;","\r":"&#13;"," ":"&#32;","-":"&#45;","/":"&#47;","=":"&#61;","`":"&#96;","\u0085":"&#133;","\u00a0":"&#160;","\u2028":"&#8232;","\u2029":"&#8233;"};function oc(a){return pc[a]}var nc=/[\x00\x22\x26\x27\x3c\x3e]/g;function K(){0!=qc&&(this.Il=Error().stack,rc[ra(this)]=this)}var qc=0,rc={};K.prototype.le=l;K.prototype.ba=function(){if(!this.le&&(this.le=j,this.n(),0!=qc)){var a=ra(this);delete rc[a]}};K.prototype.n=function(){this.gj&&sc.apply(k,this.gj);if(this.ii)for(;this.ii.length;)this.ii.shift()()};function tc(a){a&&"function"==typeof a.ba&&a.ba()}function sc(a){for(var b=0,c=arguments.length;b<c;++b){var d=arguments[b];na(d)?sc.apply(k,d):tc(d)}};var uc=!w||wb(9),vc=!w||wb(9),wc=w&&!ub("9");!jb||ub("528");ib&&ub("1.9b")||w&&ub("8")||hb&&ub("9.5")||jb&&ub("528");ib&&!ub("8")||w&&ub("9");function xc(a,b){this.type=a;this.currentTarget=this.target=b}m=xc.prototype;m.n=aa();m.ba=aa();m.ic=l;m.defaultPrevented=l;m.Ke=j;m.stopPropagation=function(){this.ic=j};m.preventDefault=function(){this.defaultPrevented=j;this.Ke=l};function yc(a){a.preventDefault()};function zc(a){zc[" "](a);return a}zc[" "]=ja;function Ac(a,b){a&&this.init(a,b)}t(Ac,xc);var Bc=[1,4,2];m=Ac.prototype;m.target=k;m.relatedTarget=k;m.offsetX=0;m.offsetY=0;m.clientX=0;m.clientY=0;m.screenX=0;m.screenY=0;m.button=0;m.keyCode=0;m.charCode=0;m.ctrlKey=l;m.altKey=l;m.shiftKey=l;m.metaKey=l;m.Xf=l;m.va=k;
m.init=function(a,b){var c=this.type=a.type;xc.call(this,c);this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;if(d){if(ib){var f;a:{try{zc(d.nodeName);f=j;break a}catch(g){}f=l}f||(d=k)}}else"mouseover"==c?d=a.fromElement:"mouseout"==c&&(d=a.toElement);this.relatedTarget=d;this.offsetX=jb||a.offsetX!==i?a.offsetX:a.layerX;this.offsetY=jb||a.offsetY!==i?a.offsetY:a.layerY;this.clientX=a.clientX!==i?a.clientX:a.pageX;this.clientY=a.clientY!==i?a.clientY:a.pageY;this.screenX=
a.screenX||0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||("keypress"==c?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.Xf=bb?a.metaKey:a.ctrlKey;this.state=a.state;this.va=a;a.defaultPrevented&&this.preventDefault();delete this.ic};function Cc(a){return(uc?0==a.va.button:"click"==a.type?j:!!(a.va.button&Bc[0]))&&!(jb&&bb&&a.ctrlKey)}
m.stopPropagation=function(){Ac.d.stopPropagation.call(this);this.va.stopPropagation?this.va.stopPropagation():this.va.cancelBubble=j};m.preventDefault=function(){Ac.d.preventDefault.call(this);var a=this.va;if(a.preventDefault)a.preventDefault();else if(a.returnValue=l,wc)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};m.n=aa();function Dc(){}var Ec=0;m=Dc.prototype;m.key=0;m.kc=l;m.cf=l;m.init=function(a,b,c,d,f,g){pa(a)?this.Nh=j:a&&a.handleEvent&&pa(a.handleEvent)?this.Nh=l:e(Error("Invalid listener argument"));this.Nc=a;this.proxy=b;this.src=c;this.type=d;this.capture=!!f;this.ve=g;this.cf=l;this.key=++Ec;this.kc=l};m.handleEvent=function(a){return this.Nh?this.Nc.call(this.ve||this.src,a):this.Nc.handleEvent.call(this.Nc,a)};var Fc={},Gc={},Hc={},Ic={};
function L(a,b,c,d,f){if(b){if(ma(b)){for(var g=0;g<b.length;g++)L(a,b[g],c,d,f);return k}var d=!!d,h=Gc;b in h||(h[b]={S:0,Da:0});h=h[b];d in h||(h[d]={S:0,Da:0},h.S++);var h=h[d],n=ra(a),q;h.Da++;if(h[n]){q=h[n];for(g=0;g<q.length;g++)if(h=q[g],h.Nc==c&&h.ve==f){if(h.kc)break;return q[g].key}}else q=h[n]=[],h.S++;var v=Jc,y=vc?function(a){return v.call(y.src,y.key,a)}:function(a){a=v.call(y.src,y.key,a);if(!a)return a},g=y;g.src=a;h=new Dc;h.init(c,g,a,b,d,f);c=h.key;g.key=c;q.push(h);Fc[c]=h;Hc[n]||
(Hc[n]=[]);Hc[n].push(h);a.addEventListener?(a==fa||!a.$g)&&a.addEventListener(b,g,d):a.attachEvent(b in Ic?Ic[b]:Ic[b]="on"+b,g);return c}e(Error("Invalid event type"))}function Kc(a,b,c,d,f){if(ma(b)){for(var g=0;g<b.length;g++)Kc(a,b[g],c,d,f);return k}a=L(a,b,c,d,f);Fc[a].cf=j;return a}function Lc(a,b,c,d,f){if(ma(b))for(var g=0;g<b.length;g++)Lc(a,b[g],c,d,f);else if(d=!!d,a=Mc(a,b,d))for(g=0;g<a.length;g++)if(a[g].Nc==c&&a[g].capture==d&&a[g].ve==f){Nc(a[g].key);break}}
function Nc(a){if(!Fc[a])return l;var b=Fc[a];if(b.kc)return l;var c=b.src,d=b.type,f=b.proxy,g=b.capture;c.removeEventListener?(c==fa||!c.$g)&&c.removeEventListener(d,f,g):c.detachEvent&&c.detachEvent(d in Ic?Ic[d]:Ic[d]="on"+d,f);c=ra(c);Hc[c]&&(f=Hc[c],Ra(f,b),0==f.length&&delete Hc[c]);b.kc=j;if(b=Gc[d][g][c])b.gi=j,Oc(d,g,c,b);delete Fc[a];return j}
function Oc(a,b,c,d){if(!d.Be&&d.gi){for(var f=0,g=0;f<d.length;f++)d[f].kc?d[f].proxy.src=k:(f!=g&&(d[g]=d[f]),g++);d.length=g;d.gi=l;0==g&&(delete Gc[a][b][c],Gc[a][b].S--,0==Gc[a][b].S&&(delete Gc[a][b],Gc[a].S--),0==Gc[a].S&&delete Gc[a])}}function Mc(a,b,c){var d=Gc;return b in d&&(d=d[b],c in d&&(d=d[c],a=ra(a),d[a]))?d[a]:k}
function Pc(a,b,c,d,f){var g=1,b=ra(b);if(a[b]){a.Da--;a=a[b];a.Be?a.Be++:a.Be=1;try{for(var h=a.length,n=0;n<h;n++){var q=a[n];q&&!q.kc&&(g&=Qc(q,f)!==l)}}finally{a.Be--,Oc(c,d,b,a)}}return Boolean(g)}function Qc(a,b){a.cf&&Nc(a.key);return a.handleEvent(b)}
function Jc(a,b){if(!Fc[a])return j;var c=Fc[a],d=c.type,f=Gc;if(!(d in f))return j;var f=f[d],g,h;if(!vc){g=b||ia("window.event");var n=j in f,q=l in f;if(n){if(0>g.keyCode||g.returnValue!=i)return j;a:{var v=l;if(0==g.keyCode)try{g.keyCode=-1;break a}catch(y){v=j}if(v||g.returnValue==i)g.returnValue=j}}v=new Ac;v.init(g,this);g=j;try{if(n){for(var J=[],Z=v.currentTarget;Z;Z=Z.parentNode)J.push(Z);h=f[j];h.Da=h.S;for(var Y=J.length-1;!v.ic&&0<=Y&&h.Da;Y--)v.currentTarget=J[Y],g&=Pc(h,J[Y],d,j,v);
if(q){h=f[l];h.Da=h.S;for(Y=0;!v.ic&&Y<J.length&&h.Da;Y++)v.currentTarget=J[Y],g&=Pc(h,J[Y],d,l,v)}}else g=Qc(c,v)}finally{J&&(J.length=0)}return g}d=new Ac(b,this);return g=Qc(c,d)};function Rc(){K.call(this)}t(Rc,K);m=Rc.prototype;m.$g=j;m.Ge=k;m.kg=ba("Ge");m.addEventListener=function(a,b,c,d){L(this,a,b,c,d)};m.removeEventListener=function(a,b,c,d){Lc(this,a,b,c,d)};
m.dispatchEvent=function(a){var b=a.type||a,c=Gc;if(b in c){if(p(a))a=new xc(a,this);else if(a instanceof xc)a.target=a.target||this;else{var d=a,a=new xc(b,this);Nb(a,d)}var d=1,f,c=c[b],b=j in c,g;if(b){f=[];for(g=this;g;g=g.Ge)f.push(g);g=c[j];g.Da=g.S;for(var h=f.length-1;!a.ic&&0<=h&&g.Da;h--)a.currentTarget=f[h],d&=Pc(g,f[h],a.type,j,a)&&a.Ke!=l}if(l in c)if(g=c[l],g.Da=g.S,b)for(h=0;!a.ic&&h<f.length&&g.Da;h++)a.currentTarget=f[h],d&=Pc(g,f[h],a.type,l,a)&&a.Ke!=l;else for(f=this;!a.ic&&f&&
g.Da;f=f.Ge)a.currentTarget=f,d&=Pc(g,f,a.type,l,a)&&a.Ke!=l;a=Boolean(d)}else a=j;return a};m.n=function(){Rc.d.n.call(this);var a,b=0,c=a==k;a=!!a;if(this==k)Gb(Hc,function(d){for(var f=d.length-1;0<=f;f--){var g=d[f];if(c||a==g.capture)Nc(g.key),b++}});else{var d=ra(this);if(Hc[d])for(var d=Hc[d],f=d.length-1;0<=f;f--){var g=d[f];if(c||a==g.capture)Nc(g.key),b++}}this.Ge=k};function Sc(a,b){K.call(this);this.M=a||1;this.Wd=b||Tc;this.af=r(this.vg,this);this.If=s()}t(Sc,Rc);Sc.prototype.enabled=l;var Tc=fa.window;m=Sc.prototype;m.oa=k;m.vg=function(){if(this.enabled){var a=s()-this.If;0<a&&a<0.8*this.M?this.oa=this.Wd.setTimeout(this.af,this.M-a):(this.dispatchEvent(Uc),this.enabled&&(this.oa=this.Wd.setTimeout(this.af,this.M),this.If=s()))}};m.start=function(){this.enabled=j;this.oa||(this.oa=this.Wd.setTimeout(this.af,this.M),this.If=s())};
m.stop=function(){this.enabled=l;this.oa&&(this.Wd.clearTimeout(this.oa),this.oa=k)};m.n=function(){Sc.d.n.call(this);this.stop();delete this.Wd};var Uc="tick";function M(a,b,c){pa(a)?c&&(a=r(a,c)):a&&"function"==typeof a.handleEvent?a=r(a.handleEvent,a):e(Error("Invalid listener argument"));return 2147483647<b?-1:Tc.setTimeout(a,b||0)};function N(){K.call(this);this.Sa=[];this.Lb={}}t(N,K);m=N.prototype;m.Sh=1;m.Ie=0;m.subscribe=function(a,b,c){var d=this.Lb[a];d||(d=this.Lb[a]=[]);var f=this.Sh;this.Sa[f]=a;this.Sa[f+1]=b;this.Sa[f+2]=c;this.Sh=f+3;d.push(f);return f};m.Ri=function(a){if(0!=this.Ie)return this.Ld||(this.Ld=[]),this.Ld.push(a),l;var b=this.Sa[a];if(b){var c=this.Lb[b];c&&Ra(c,a);delete this.Sa[a];delete this.Sa[a+1];delete this.Sa[a+2]}return!!b};
m.c=function(a,b){var c=this.Lb[a];if(c){this.Ie++;for(var d=Xa(arguments,1),f=0,g=c.length;f<g;f++){var h=c[f];this.Sa[h+1].apply(this.Sa[h+2],d)}this.Ie--;if(this.Ld&&0==this.Ie)for(;c=this.Ld.pop();)this.Ri(c)}};m.clear=function(a){if(a){var b=this.Lb[a];b&&(u(b,this.Ri,this),delete this.Lb[a])}else this.Sa.length=0,this.Lb={}};m.n=function(){N.d.n.call(this);delete this.Sa;delete this.Lb;delete this.Ld};function Vc(){N.call(this);this.od=new Sc(1E3);this.Ki=new Sc(3E4);this.Li=[];this.rf=[]}t(Vc,N);ka(Vc);Vc.prototype.init=function(){this.od.start();this.Ki.start();L(this.od,Uc,r(function(){u(this.rf,function(a,b){a.time<s()&&(a.callback(),Ja.splice.call(this.rf,b,1))},this)},this));L(this.Ki,Uc,r(function(){u(this.Li,function(a){bc(a.element,Wc(a.time.getTime()))},this)},this))};function Xc(a,b,c){86400>(s()-b.getTime())/1E3&&a.Li.push({time:b,element:c})}
function Yc(a,b,c){86400>(s()-b)/1E3&&a.rf.push({time:b,callback:c})};function O(){N.call(this);this.xk=j;this.Zc=A(C("controller"),"sidebar-toggled");this.Jc=A(C("controller"),"guide-toggled");this.subscribe(Zc,ba("Zc"),this);this.subscribe($c,ba("Jc"),this);this.subscribe(ad,ba("xk"),this)}t(O,N);ka(O);function bd(a,b){var c=C("toggle-pending");bc(c,b);P(c,!!b)}var ad="play",$c="toggle-guide",Zc="toggle-sidebar";var cd={ll:["BC","AD"],kl:["Before Christ","Anno Domini"],nl:"JFMAMJJASOND".split(""),vl:"JFMAMJJASOND".split(""),ml:"January February March April May June July August September October November December".split(" "),ul:"January February March April May June July August September October November December".split(" "),rl:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),xl:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),Bl:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),
zl:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),tl:"Sun Mon Tue Wed Thu Fri Sat".split(" "),yl:"Sun Mon Tue Wed Thu Fri Sat".split(" "),ol:"SMTWTFS".split(""),wl:"SMTWTFS".split(""),sl:["Q1","Q2","Q3","Q4"],ql:["1st quarter","2nd quarter","3rd quarter","4th quarter"],hl:["AM","PM"],jl:["EEEE, MMMM d, y","MMMM d, y","MMM d, y","M/d/yy"],Al:["h:mm:ss a zzzz","h:mm:ss a z","h:mm:ss a","h:mm a"],Wi:6,Cl:[5,6],Xi:5};var dd=/^(\d{4})(?:(?:-?(\d{2})(?:-?(\d{2}))?)|(?:-?(\d{3}))|(?:-?W(\d{2})(?:-?([1-7]))?))?$/,ed=/^(\d{2})(?::?(\d{2})(?::?(\d{2})(\.\d+)?)?)?$/,fd=/Z|(?:([-+])(\d{2})(?::?(\d{2}))?)$/;
function gd(a){var b=new hd(2E3),a=Aa(a),a=a.split(-1==a.indexOf("T")?" ":"T"),c;var d=a[0].match(dd);if(d){var f=Number(d[2]),g=Number(d[3]),h=Number(d[4]);c=Number(d[5]);var n=Number(d[6])||1;b.setFullYear(Number(d[1]));h?(b.setDate(1),b.setMonth(0),b.add(new id(jd,h-1))):c?(b.setMonth(0),b.setDate(1),d=b.getDay()||7,b.add(new id(jd,(4>=d?1-d:8-d)+(Number(n)+7*(Number(c)-1))-1))):(f&&(b.setDate(1),b.setMonth(f-1)),g&&b.setDate(g));c=j}else c=l;if(c&&!(c=2>a.length))a=a[1],c=a.match(fd),n=0,c&&("Z"!=
c[0]&&(n=60*c[2]+Number(c[3]),n*="-"==c[1]?1:-1),n-=b.getTimezoneOffset(),a=a.substr(0,a.length-c[0].length)),(c=a.match(ed))?(b.setHours(Number(c[1])),b.setMinutes(Number(c[2])||0),b.setSeconds(Number(c[3])||0),b.setMilliseconds(c[4]?1E3*c[4]:0),0!=n&&b.setTime(b.getTime()+6E4*n),c=j):c=l;return c?b:k}
function id(a,b,c,d,f,g){p(a)?(this.Wa=a==kd?b:0,this.Oa=a==ld?b:0,this.Ja=a==jd?b:0,this.ya=a==md?b:0,this.za=a==nd?b:0,this.Ea=a==od?b:0):(this.Wa=a||0,this.Oa=b||0,this.Ja=c||0,this.ya=d||0,this.za=f||0,this.Ea=g||0)}
id.prototype.Xd=function(a){var b=Math.min(this.Wa,this.Oa,this.Ja,this.ya,this.za,this.Ea),c=Math.max(this.Wa,this.Oa,this.Ja,this.ya,this.za,this.Ea);if(0>b&&0<c)return k;if(!a&&0==b&&0==c)return"PT0S";c=[];0>b&&c.push("-");c.push("P");(this.Wa||a)&&c.push(Math.abs(this.Wa)+"Y");(this.Oa||a)&&c.push(Math.abs(this.Oa)+"M");(this.Ja||a)&&c.push(Math.abs(this.Ja)+"D");if(this.ya||this.za||this.Ea||a)c.push("T"),(this.ya||a)&&c.push(Math.abs(this.ya)+"H"),(this.za||a)&&c.push(Math.abs(this.za)+"M"),
(this.Ea||a)&&c.push(Math.abs(this.Ea)+"S");return c.join("")};id.prototype.clone=function(){return new id(this.Wa,this.Oa,this.Ja,this.ya,this.za,this.Ea)};var kd="y",ld="m",jd="d",md="h",nd="n",od="s";id.prototype.add=function(a){this.Wa+=a.Wa;this.Oa+=a.Oa;this.Ja+=a.Ja;this.ya+=a.ya;this.za+=a.za;this.Ea+=a.Ea};
function pd(a,b,c){oa(a)?(this.s=new Date(a,b||0,c||1),qd(this,c||1)):qa(a)?(this.s=new Date(a.getFullYear(),a.getMonth(),a.getDate()),qd(this,a.getDate())):(this.s=new Date(s()),this.s.setHours(0),this.s.setMinutes(0),this.s.setSeconds(0),this.s.setMilliseconds(0))}m=pd.prototype;m.pe=cd.Wi;m.qe=cd.Xi;m.clone=function(){var a=new pd(this.s);a.pe=this.pe;a.qe=this.qe;return a};m.getFullYear=function(){return this.s.getFullYear()};m.getYear=function(){return this.getFullYear()};m.getMonth=function(){return this.s.getMonth()};
m.getDate=function(){return this.s.getDate()};m.getTime=function(){return this.s.getTime()};m.getDay=function(){return this.s.getDay()};m.getUTCHours=function(){return this.s.getUTCHours()};m.getTimezoneOffset=function(){return this.s.getTimezoneOffset()};function rd(a){a=a.getTimezoneOffset();if(0==a)a="Z";else var b=Math.abs(a)/60,c=Math.floor(b),b=60*(b-c),a=(0<a?"-":"+")+Ha(c)+":"+Ha(b);return a}m.set=function(a){this.s=new Date(a.getFullYear(),a.getMonth(),a.getDate())};m.setFullYear=function(a){this.s.setFullYear(a)};
m.setMonth=function(a){this.s.setMonth(a)};m.setDate=function(a){this.s.setDate(a)};m.setTime=function(a){this.s.setTime(a)};
m.add=function(a){if(a.Wa||a.Oa){var b=this.getMonth()+a.Oa+12*a.Wa,c=this.getYear()+Math.floor(b/12),b=b%12;0>b&&(b+=12);var d;a:{switch(b){case 1:d=0==c%4&&(0!=c%100||0==c%400)?29:28;break a;case 5:case 8:case 10:case 3:d=30;break a}d=31}d=Math.min(d,this.getDate());this.setDate(1);this.setFullYear(c);this.setMonth(b);this.setDate(d)}a.Ja&&(a=new Date((new Date(this.getYear(),this.getMonth(),this.getDate(),12)).getTime()+864E5*a.Ja),this.setDate(1),this.setFullYear(a.getFullYear()),this.setMonth(a.getMonth()),
this.setDate(a.getDate()),qd(this,a.getDate()))};m.Xd=function(a,b){return[this.getFullYear(),Ha(this.getMonth()+1),Ha(this.getDate())].join(a?"-":"")+(b?rd(this):"")};m.toString=function(){return this.Xd()};function qd(a,b){a.getDate()!=b&&a.s.setUTCHours(a.s.getUTCHours()+(a.getDate()<b?1:-1))}m.valueOf=function(){return this.s.valueOf()};function hd(a,b,c,d,f,g,h){this.s=oa(a)?new Date(a,b||0,c||1,d||0,f||0,g||0,h||0):new Date(a?a.getTime():s())}t(hd,pd);m=hd.prototype;m.getHours=function(){return this.s.getHours()};
m.getMinutes=function(){return this.s.getMinutes()};m.getSeconds=function(){return this.s.getSeconds()};m.getUTCHours=function(){return this.s.getUTCHours()};m.setHours=function(a){this.s.setHours(a)};m.setMinutes=function(a){this.s.setMinutes(a)};m.setSeconds=function(a){this.s.setSeconds(a)};m.setMilliseconds=function(a){this.s.setMilliseconds(a)};m.setUTCHours=function(a){this.s.setUTCHours(a)};
m.add=function(a){pd.prototype.add.call(this,a);a.ya&&this.setHours(this.s.getHours()+a.ya);a.za&&this.setMinutes(this.s.getMinutes()+a.za);a.Ea&&this.setSeconds(this.s.getSeconds()+a.Ea)};m.Xd=function(a,b){var c=pd.prototype.Xd.call(this,a);return a?c+" "+Ha(this.getHours())+":"+Ha(this.getMinutes())+":"+Ha(this.getSeconds())+(b?rd(this):""):c+"T"+Ha(this.getHours())+Ha(this.getMinutes())+Ha(this.getSeconds())+(b?rd(this):"")};m.toString=function(){return this.Xd()};
m.clone=function(){var a=new hd(this.s);a.pe=this.pe;a.qe=this.qe;return a};function sd(a){K.call(this);this.Ma=a;this.O=[]}t(sd,K);var td=[];function Q(a,b,c,d,f){ma(c)||(td[0]=c,c=td);for(var g=0;g<c.length;g++){var h=L(b,c[g],d||a,f||l,a.Ma||a);a.O.push(h)}return a}function ud(a,b,c,d,f,g){if(ma(c))for(var h=0;h<c.length;h++)ud(a,b,c[h],d,f,g);else b=Kc(b,c,d||a,f,g||a.Ma||a),a.O.push(b)}
function vd(a,b,c,d,f,g){if(ma(c))for(var h=0;h<c.length;h++)vd(a,b,c[h],d,f,g);else{a:{d=d||a;g=g||a.Ma||a;f=!!f;if(b=Mc(b,c,f))for(c=0;c<b.length;c++)if(!b[c].kc&&b[c].Nc==d&&b[c].capture==f&&b[c].ve==g){b=b[c];break a}b=k}b&&(b=b.key,Nc(b),Ra(a.O,b))}return a}function wd(a){u(a.O,Nc);a.O.length=0}sd.prototype.n=function(){sd.d.n.call(this);wd(this)};sd.prototype.handleEvent=function(){e(Error("EventHandler.handleEvent not implemented"))};function xd(a,b,c,d){this.top=a;this.right=b;this.bottom=c;this.left=d}xd.prototype.clone=function(){return new xd(this.top,this.right,this.bottom,this.left)};xd.prototype.contains=function(a){return!this||!a?l:a instanceof xd?a.left>=this.left&&a.right<=this.right&&a.top>=this.top&&a.bottom<=this.bottom:a.x>=this.left&&a.x<=this.right&&a.y>=this.top&&a.y<=this.bottom};function yd(a,b,c,d){this.left=a;this.top=b;this.width=c;this.height=d}yd.prototype.clone=function(){return new yd(this.left,this.top,this.width,this.height)};yd.prototype.contains=function(a){return a instanceof yd?this.left<=a.left&&this.left+this.width>=a.left+a.width&&this.top<=a.top&&this.top+this.height>=a.top+a.height:a.x>=this.left&&a.x<=this.left+this.width&&a.y>=this.top&&a.y<=this.top+this.height};function zd(a,b,c){p(b)?Ad(a,c,b):Gb(b,wa(Ad,a))}function Ad(a,b,c){a.style[Ia(c)]=b}function Bd(a,b){var c=Qb(a);return c.defaultView&&c.defaultView.getComputedStyle&&(c=c.defaultView.getComputedStyle(a,k))?c[b]||c.getPropertyValue(b)||"":""}function Cd(a,b){return a.currentStyle?a.currentStyle[b]:k}function Dd(a,b){return Bd(a,b)||Cd(a,b)||a.style&&a.style[b]}function Ed(a,b,c){var d,f=ib&&(bb||lb)&&ub("1.9");b instanceof Eb?(d=b.x,b=b.y):(d=b,b=c);a.style.left=Fd(d,f);a.style.top=Fd(b,f)}
function Gd(a){return new Eb(a.offsetLeft,a.offsetTop)}function Hd(a){var b=a.getBoundingClientRect();w&&(a=a.ownerDocument,b.left-=a.documentElement.clientLeft+a.body.clientLeft,b.top-=a.documentElement.clientTop+a.body.clientTop);return b}
function Id(a){if(w&&!wb(8))return a.offsetParent;for(var b=Qb(a),c=Dd(a,"position"),d="fixed"==c||"absolute"==c,a=a.parentNode;a&&a!=b;a=a.parentNode)if(c=Dd(a,"position"),d=d&&"static"==c&&a!=b.documentElement&&a!=b.body,!d&&(a.scrollWidth>a.clientWidth||a.scrollHeight>a.clientHeight||"fixed"==c||"absolute"==c||"relative"==c))return a;return k}
function Jd(a){var b,c=Qb(a),d=Dd(a,"position"),f=ib&&c.getBoxObjectFor&&!a.getBoundingClientRect&&"absolute"==d&&(b=c.getBoxObjectFor(a))&&(0>b.screenX||0>b.screenY),g=new Eb(0,0),h;b=c?Qb(c):document;if(h=w)if(h=!wb(9))h="CSS1Compat"!=Ob(b).ca.compatMode;h=h?b.body:b.documentElement;if(a==h)return g;if(a.getBoundingClientRect)b=Hd(a),a=jc(Ob(c)),g.x=b.left+a.x,g.y=b.top+a.y;else if(c.getBoxObjectFor&&!f)b=c.getBoxObjectFor(a),a=c.getBoxObjectFor(h),g.x=b.screenX-a.screenX,g.y=b.screenY-a.screenY;
else{f=a;do{g.x+=f.offsetLeft;g.y+=f.offsetTop;f!=a&&(g.x+=f.clientLeft||0,g.y+=f.clientTop||0);if(jb&&"fixed"==Dd(f,"position")){g.x+=c.body.scrollLeft;g.y+=c.body.scrollTop;break}f=f.offsetParent}while(f&&f!=a);if(hb||jb&&"absolute"==d)g.y-=c.body.offsetTop;for(f=a;(f=Id(f))&&f!=c.body&&f!=h;)if(g.x-=f.scrollLeft,!hb||"TR"!=f.tagName)g.y-=f.scrollTop}return g}function Kd(a,b){var c,d=Jd(a);b instanceof Eb&&(c=b.y,b=b.x);Ed(a,a.offsetLeft+(b-d.x),a.offsetTop+(c-d.y))}
function Fd(a,b){"number"==typeof a&&(a=(b?Math.round(a):a)+"px");return a}function Ld(a,b){a.style.height=Fd(b,j)}function Md(a,b){a.style.width=Fd(b,j)}function R(a){if("none"!=Dd(a,"display"))return Nd(a);var b=a.style,c=b.display,d=b.visibility,f=b.position;b.visibility="hidden";b.position="absolute";b.display="inline";a=Nd(a);b.display=c;b.position=f;b.visibility=d;return a}
function Nd(a){var b=a.offsetWidth,c=a.offsetHeight,d=jb&&!b&&!c;return(!ha(b)||d)&&a.getBoundingClientRect?(a=Hd(a),new Fb(a.right-a.left,a.bottom-a.top)):new Fb(b,c)}function Od(a){var b=Jd(a),a=R(a);return new yd(b.x,b.y,a.width,a.height)}function Pd(a,b){var c=a.style;"opacity"in c?c.opacity=b:"MozOpacity"in c?c.MozOpacity=b:"filter"in c&&(c.filter=""===b?"":"alpha(opacity="+100*b+")")}function P(a,b){a.style.display=b?"":"none"}function Qd(a){return"rtl"==Dd(a,"direction")}
var Rd=ib?"MozUserSelect":jb?"WebkitUserSelect":k;function Sd(a,b){if(/^\d+px?$/.test(b))return parseInt(b,10);var c=a.style.left,d=a.runtimeStyle.left;a.runtimeStyle.left=a.currentStyle.left;a.style.left=b;var f=a.style.pixelLeft;a.style.left=c;a.runtimeStyle.left=d;return f}
function Td(a,b){if(w){var c=Sd(a,Cd(a,b+"Left")),d=Sd(a,Cd(a,b+"Right")),f=Sd(a,Cd(a,b+"Top")),g=Sd(a,Cd(a,b+"Bottom"));return new xd(f,d,g,c)}c=Bd(a,b+"Left");d=Bd(a,b+"Right");f=Bd(a,b+"Top");g=Bd(a,b+"Bottom");return new xd(parseFloat(f),parseFloat(d),parseFloat(g),parseFloat(c))}var Ud={thin:2,medium:4,thick:6};function Vd(a,b){if("none"==Cd(a,b+"Style"))return 0;var c=Cd(a,b+"Width");return c in Ud?Ud[c]:Sd(a,c)}
function Wd(a){if(w){var b=Vd(a,"borderLeft"),c=Vd(a,"borderRight"),d=Vd(a,"borderTop"),a=Vd(a,"borderBottom");return new xd(d,c,a,b)}b=Bd(a,"borderLeftWidth");c=Bd(a,"borderRightWidth");d=Bd(a,"borderTopWidth");a=Bd(a,"borderBottomWidth");return new xd(parseFloat(d),parseFloat(c),parseFloat(a),parseFloat(b))};function Xd(a,b,c){K.call(this);this.target=a;this.handle=b||a;this.Wh=c||new yd(NaN,NaN,NaN,NaN);this.ca=Qb(a);this.t=new sd(this);L(this.handle,["touchstart","mousedown"],this.oc,l,this)}t(Xd,Rc);var Yd=w||ib&&ub("1.9.3");m=Xd.prototype;m.clientX=0;m.clientY=0;m.screenX=0;m.screenY=0;m.Fi=0;m.Gi=0;m.Ac=0;m.Bc=0;m.pf=j;m.qa=l;m.zf=0;m.Wj=0;m.Pj=l;m.$d=l;m.m=ca("t");m.jg=function(a){this.zf=Math.pow(a,2)};m.Ci=ba("Le");m.mb=ba("pf");
m.n=function(){Xd.d.n.call(this);Lc(this.handle,["touchstart","mousedown"],this.oc,l,this);wd(this.t);Yd&&this.ca.releaseCapture();this.t=this.handle=this.target=k};function Zd(a){ha(a.Qa)||(a.Qa=Qd(a.target));return a.Qa}
m.oc=function(a){var b="mousedown"==a.type;if(this.pf&&!this.qa&&(!b||Cc(a))){$d(a);if(0==this.zf)if(this.dispatchEvent(new ae("start",this,a.clientX,a.clientY,a)))this.qa=j,a.preventDefault();else return;else a.preventDefault();var b=this.ca,c=b.documentElement,d=!Yd;Q(this.t,b,["touchmove","mousemove"],this.Lj,d);Q(this.t,b,["touchend","mouseup"],this.$b,d);Yd?(c.setCapture(l),Q(this.t,c,"losecapture",this.$b)):Q(this.t,b?b.parentWindow||b.defaultView:window,"blur",this.$b);w&&this.Pj&&Q(this.t,
b,"dragstart",yc);this.Le&&Q(this.t,this.Le,"scroll",this.li,d);this.clientX=this.Fi=a.clientX;this.clientY=this.Gi=a.clientY;this.screenX=a.screenX;this.screenY=a.screenY;this.$d?(a=this.target,b=a.offsetLeft,c=a.offsetParent,!c&&"fixed"==Dd(a,"position")&&(c=Qb(a).documentElement),c?(ib?(d=Wd(c),b+=d.left):wb(8)&&(d=Wd(c),b-=d.left),a=Qd(c)?c.clientWidth-(b+a.offsetWidth):b):a=b):a=this.target.offsetLeft;this.Ac=a;this.Bc=this.target.offsetTop;this.Vf=jc(Ob(this.ca));this.Wj=s()}else this.dispatchEvent("earlycancel")};
m.$b=function(a,b){wd(this.t);Yd&&this.ca.releaseCapture();if(this.qa){$d(a);this.qa=l;var c=be(this,this.Ac),d=ce(this,this.Bc);this.dispatchEvent(new ae("end",this,a.clientX,a.clientY,a,c,d,b||"touchcancel"==a.type))}else this.dispatchEvent("earlycancel");("touchend"==a.type||"touchcancel"==a.type)&&a.preventDefault()};
function $d(a){var b=a.type;"touchstart"==b||"touchmove"==b?a.init(a.va.targetTouches[0],a.currentTarget):("touchend"==b||"touchcancel"==b)&&a.init(a.va.changedTouches[0],a.currentTarget)}
m.Lj=function(a){if(this.pf){$d(a);var b=(this.$d&&Zd(this)?-1:1)*(a.clientX-this.clientX),c=a.clientY-this.clientY;this.clientX=a.clientX;this.clientY=a.clientY;this.screenX=a.screenX;this.screenY=a.screenY;if(!this.qa){var d=this.Fi-this.clientX,f=this.Gi-this.clientY;if(d*d+f*f>this.zf)if(this.dispatchEvent(new ae("start",this,a.clientX,a.clientY,a)))this.qa=j;else{this.le||this.$b(a);return}}c=de(this,b,c);b=c.x;c=c.y;this.qa&&this.dispatchEvent(new ae("beforedrag",this,a.clientX,a.clientY,a,
b,c))&&(ee(this,a,b,c),a.preventDefault())}};function de(a,b,c){var d=jc(Ob(a.ca)),b=b+(d.x-a.Vf.x),c=c+(d.y-a.Vf.y);a.Vf=d;a.Ac+=b;a.Bc+=c;b=be(a,a.Ac);a=ce(a,a.Bc);return new Eb(b,a)}m.li=function(a){var b=de(this,0,0);a.clientX=this.clientX;a.clientY=this.clientY;ee(this,a,b.x,b.y)};function ee(a,b,c,d){a.td(c,d);a.dispatchEvent(new ae("drag",a,b.clientX,b.clientY,b,c,d))}
function be(a,b){var c=a.Wh,d=!isNaN(c.left)?c.left:k,c=!isNaN(c.width)?c.width:0;return Math.min(d!=k?d+c:Infinity,Math.max(d!=k?d:-Infinity,b))}function ce(a,b){var c=a.Wh,d=!isNaN(c.top)?c.top:k,c=!isNaN(c.height)?c.height:0;return Math.min(d!=k?d+c:Infinity,Math.max(d!=k?d:-Infinity,b))}m.td=function(a,b){this.$d&&Zd(this)?this.target.style.right=a+"px":this.target.style.left=a+"px";this.target.style.top=b+"px"};
function ae(a,b,c,d,f,g,h,n){xc.call(this,a);this.clientX=c;this.clientY=d;this.bf=f;this.left=ha(g)?g:b.Ac;this.top=ha(h)?h:b.Bc;this.jj=b;this.hj=!!n}t(ae,xc);function fe(){K.call(this);this.i=ge;this.wd=this.startTime=k}t(fe,Rc);var ge=0;fe.prototype.Fb=function(){this.pa("begin")};fe.prototype.Gb=function(){this.pa("end")};fe.prototype.pa=function(a){this.dispatchEvent(a)};function he(a,b,c){K.call(this);this.Cb=a;this.M=b||0;this.Ma=c;this.df=r(this.ud,this)}t(he,K);m=he.prototype;m.ka=0;m.n=function(){he.d.n.call(this);this.stop();delete this.Cb;delete this.Ma};m.start=function(a){this.stop();this.ka=M(this.df,ha(a)?a:this.M)};m.stop=function(){this.zb()&&Tc.clearTimeout(this.ka);this.ka=0};m.sf=function(){this.stop();this.ud()};m.zb=function(){return 0!=this.ka};m.ud=function(){this.ka=0;this.Cb&&this.Cb.call(this.Ma)};var ie;ie=da(k);var je={},ke=k;function le(a){a=ra(a);delete je[a];Jb(je)&&ke&&ke.stop()}function me(){ke||(ke=new he(function(){var a=s();Gb(je,function(c){ne(c,a)});Jb(je)||me()},20));var a=ke;a.zb()||a.start()};function oe(a,b,c,d){fe.call(this);(!ma(a)||!ma(b))&&e(Error("Start and end parameters must be arrays"));a.length!=b.length&&e(Error("Start and end points must be the same length"));this.Ud=a;this.lj=b;this.duration=c;this.Hg=d;this.coords=[];this.$d=l}t(oe,fe);m=oe.prototype;m.ph=0;m.Ba=0;m.Hf=k;
m.play=function(a){if(a||this.i==ge)this.Ba=0,this.coords=this.Ud;else if(1==this.i)return l;le(this);this.startTime=a=s();-1==this.i&&(this.startTime-=this.duration*this.Ba);this.wd=this.startTime+this.duration;this.Hf=this.startTime;this.Ba||this.Fb();this.pa("play");-1==this.i&&this.pa("resume");this.i=1;var b=ra(this);b in je||(je[b]=this);me();ne(this,a);return j};m.stop=function(a){le(this);this.i=ge;a&&(this.Ba=1);pe(this,this.Ba);this.pa("stop");this.Gb()};m.re=ca("Ba");
m.n=function(){this.i==ge||this.stop(l);this.pa("destroy");oe.d.n.call(this)};function ne(a,b){a.Ba=(b-a.startTime)/(a.wd-a.startTime);1<=a.Ba&&(a.Ba=1);a.ph=1E3/(b-a.Hf);a.Hf=b;pe(a,a.Ba);1==a.Ba?(a.i=ge,le(a),a.pa("finish"),a.Gb()):1==a.i&&a.Qf()}function pe(a,b){pa(a.Hg)&&(b=a.Hg(b));a.coords=Array(a.Ud.length);for(var c=0;c<a.Ud.length;c++)a.coords[c]=(a.lj[c]-a.Ud[c])*b+a.Ud[c]}m.Qf=function(){this.pa("animate")};m.pa=function(a){this.dispatchEvent(new qe(a,this))};
function qe(a,b){xc.call(this,a);this.coords=b.coords;this.x=b.coords[0];this.y=b.coords[1];this.pm=b.coords[2];this.duration=b.duration;this.Ba=b.re();this.Wl=b.ph;this.state=b.i;this.El=b}t(qe,xc);function re(a,b,c,d,f){oe.call(this,b,c,d,f);this.element=a}t(re,oe);m=re.prototype;m.Zd=ja;m.Ph=function(){ha(this.Qa)||(this.Qa=Qd(this.element));return this.Qa};m.Qf=function(){this.Zd();re.d.Qf.call(this)};m.Gb=function(){this.Zd();re.d.Gb.call(this)};m.Fb=function(){this.Zd();re.d.Fb.call(this)};function se(a,b,c,d,f){(2!=b.length||2!=c.length)&&e(Error("Start and end points must be 2D"));re.apply(this,arguments)}t(se,re);
se.prototype.Zd=function(){if(this.$d){var a=this.element,b=Math.round(this.coords[0]),b=Math.max(b,0);a.scrollLeft=Qd(a)?ib?-b:!w||!ub("8")?a.scrollWidth-b-a.clientWidth:b:b}else this.element.scrollLeft=Math.round(this.coords[0]);this.element.scrollTop=Math.round(this.coords[1])};function te(a,b,c,d,f){oa(b)&&(b=[b]);oa(c)&&(c=[c]);re.call(this,a,b,c,d,f);(1!=b.length||1!=c.length)&&e(Error("Start and end points must be 1D"))}t(te,re);te.prototype.Zd=function(){Pd(this.element,this.coords[0])};
te.prototype.show=function(){this.element.style.display=""};te.prototype.hide=function(){this.element.style.display="none"};function ue(a,b,c){te.call(this,a,1,0,b,c)}t(ue,te);ue.prototype.Fb=function(){this.show();ue.d.Fb.call(this)};ue.prototype.Gb=function(){this.hide();ue.d.Gb.call(this)};function ve(a,b,c){te.call(this,a,0,1,b,c)}t(ve,te);ve.prototype.Fb=function(){this.show();ve.d.Fb.call(this)};function we(){}ka(we);we.prototype.$j=0;we.a();function S(a){K.call(this);this.Yb=a||Ob();this.Qa=xe}t(S,Rc);S.prototype.Oj=we.a();var xe=k;function ye(a,b){switch(a){case 1:return b?"disable":"enable";case 2:return b?"highlight":"unhighlight";case 4:return b?"activate":"deactivate";case 8:return b?"select":"unselect";case 16:return b?"check":"uncheck";case 32:return b?"focus":"blur";case 64:return b?"open":"close"}e(Error("Invalid component state"))}m=S.prototype;m.ka=k;m.W=l;m.f=k;m.Qa=k;m.r=k;m.I=k;m.$=k;m.ga=k;m.Vi=l;
function ze(a){return a.ka||(a.ka=":"+(a.Oj.$j++).toString(36))}m.b=ca("f");m.m=function(){return this.Ic||(this.Ic=new sd(this))};m.Ne=function(a){this==a&&e(Error("Unable to set parent component"));a&&(this.I&&this.ka&&this.I.ga&&this.ka&&(this.ka in this.I.ga&&this.I.ga[this.ka])&&this.I!=a)&&e(Error("Unable to set parent component"));this.I=a;S.d.kg.call(this,a)};m.getParent=ca("I");m.kg=function(a){this.I&&this.I!=a&&e(Error("Method not supported"));S.d.kg.call(this,a)};m.La=ca("Yb");
m.J=function(){this.f=this.Yb.createElement("div")};function Ae(a,b){a.W&&e(Error("Component already rendered"));a.f||a.J();b?b.insertBefore(a.f,k):a.Yb.ca.body.appendChild(a.f);(!a.I||a.I.W)&&a.v()}m.h=function(a){this.W&&e(Error("Component already rendered"));if(a&&this.Tb(a)){this.Vi=j;if(!this.Yb||this.Yb.ca!=Qb(a))this.Yb=Ob(a);this.H(a);this.v()}else e(Error("Invalid element to decorate"))};m.Tb=da(j);m.H=ba("f");m.v=function(){this.W=j;Be(this,function(a){!a.W&&a.b()&&a.v()})};
m.ac=function(){Be(this,function(a){a.W&&a.ac()});this.Ic&&wd(this.Ic);this.W=l};m.n=function(){S.d.n.call(this);this.W&&this.ac();this.Ic&&(this.Ic.ba(),delete this.Ic);Be(this,function(a){a.ba()});!this.Vi&&this.f&&G(this.f);this.I=this.r=this.f=this.ga=this.$=k};
function Ce(a,b){var c=a.$?a.$.length:0;b.W&&!a.W&&e(Error("Component already rendered"));(0>c||c>(a.$?a.$.length:0))&&e(Error("Child component index out of bounds"));if(!a.ga||!a.$)a.ga={},a.$=[];if(b.getParent()==a){var d=ze(b);a.ga[d]=b;Ra(a.$,b)}else Lb(a.ga,ze(b),b);b.Ne(a);Wa(a.$,c,0,b);b.W&&a.W&&b.getParent()==a?(d=a.dc(),d.insertBefore(b.b(),d.childNodes[c]||k)):a.W&&(!b.W&&b.f&&b.f.parentNode)&&b.v()}m.dc=ca("f");m.Ph=function(){this.Qa==k&&(this.Qa=Qd(this.W?this.f:this.Yb.ca.body));return this.Qa};
m.nc=function(a){this.W&&e(Error("Component already rendered"));this.Qa=a};function Be(a,b){a.$&&u(a.$,b,i)}m.removeChild=function(a,b){if(a){var c=p(a)?a:ze(a),a=this.ga&&c?(c in this.ga?this.ga[c]:i)||k:k;c&&a&&(Kb(this.ga,c),Ra(this.$,a),b&&(a.ac(),a.f&&G(a.f)),a.Ne(k))}a||e(Error("Child is not in parent component"));return a};function De(a,b,c,d,f){if(!w&&(!jb||!ub("525")))return j;if(bb&&f)return Ee(a);if(f&&!d||!c&&(17==b||18==b)||w&&d&&b==a)return l;switch(a){case 13:return!(w&&wb(9));case 27:return!jb}return Ee(a)}function Ee(a){if(48<=a&&57>=a||96<=a&&106>=a||65<=a&&90>=a||jb&&0==a)return j;switch(a){case 32:case 63:case 107:case 109:case 110:case 111:case 186:case 59:case 189:case 187:case 61:case 188:case 190:case 191:case 192:case 222:case 219:case 220:case 221:return j;default:return l}}
function Fe(a){switch(a){case 61:return 187;case 59:return 186;case 224:return 91;case 0:return 224;default:return a}};function Ge(){}var He;ka(Ge);m=Ge.prototype;m.Hc=aa();m.J=function(a){var b=a.La().J("div",Ie(this,a).join(" "),a.Za);Je(this,a,b);return b};m.dc=function(a){return a};m.vd=function(a,b,c){if(a=a.b?a.b():a)if(w&&!ub("7")){var d=Ke(Cb(a),b);d.push(b);wa(c?x:z,a).apply(k,d)}else B(a,b,c)};m.Tb=da(j);
m.h=function(a,b){if(b.id){var c=b.id;a.I&&a.I.ga&&(Kb(a.I.ga,a.ka),Lb(a.I.ga,c,a));a.ka=c}(c=this.dc(b))&&c.firstChild?(c=c.firstChild.nextSibling?Ua(c.childNodes):c.firstChild,a.Za=c):a.Za=k;var d=0,f=this.ja(),g=this.ja(),h=l,n=l,c=l,q=Cb(b);u(q,function(a){if(!h&&a==f)h=j,g==f&&(n=j);else if(!n&&a==g)n=j;else{var b=d;if(!this.Hi){this.fe||Le(this);var c=this.fe,q={},v;for(v in c)q[c[v]]=v;this.Hi=q}a=parseInt(this.Hi[a],10);d=b|(isNaN(a)?0:a)}},this);a.i=d;h||(q.push(f),g==f&&(n=j));n||q.push(g);
var v=a.Ka;v&&q.push.apply(q,v);if(w&&!ub("7")){var y=Ke(q);0<y.length&&(q.push.apply(q,y),c=j)}if(!h||!n||v||c)b.className=q.join(" ");Je(this,a,b);return b};m.Jh=function(a){a.Ph()&&this.nc(a.b(),j);a.isEnabled()&&this.Yc(a,a.Pb)};function Je(a,b,c){b.isEnabled()||a.Va(c,1,j);b.i&8&&a.Va(c,8,j);b.ha&16&&a.Va(c,16,Me(b));b.ha&64&&a.Va(c,64,!!(b.i&64))}
m.Xc=function(a,b){var c=!b,d=w||hb?a.getElementsByTagName("*"):k;if(Rd){if(c=c?"none":"",a.style[Rd]=c,d)for(var f=0,g;g=d[f];f++)g.style[Rd]=c}else if(w||hb)if(c=c?"on":"",a.setAttribute("unselectable",c),d)for(f=0;g=d[f];f++)g.setAttribute("unselectable",c)};m.nc=function(a,b){this.vd(a,this.ja()+"-rtl",b)};m.Ff=function(a){var b;return a.ha&32&&(b=a.xb())?ec(b):l};
m.Yc=function(a,b){var c;if(a.ha&32&&(c=a.xb())){if(!b&&a.Ad()){try{c.blur()}catch(d){}a.Ad()&&a.th()}ec(c)!=b&&(b?c.tabIndex=0:(c.tabIndex=-1,c.removeAttribute("tabIndex")))}};m.ng=function(a,b){P(a,b)};m.na=function(a,b,c){var d=a.b();if(d){var f=Ne(this,b);f&&this.vd(a,f,c);this.Va(d,b,c)}};m.Va=function(a,b,c){He||(He={1:"disabled",8:"selected",16:"checked",64:"expanded"});(b=He[b])&&a.setAttribute("aria-"+b,c)};
m.mc=function(a,b){var c=this.dc(a);if(c&&(Vb(c),b))if(p(b))bc(c,b);else{var d=function(a){if(a){var b=Qb(c);c.appendChild(p(a)?b.createTextNode(a):a)}};ma(b)?u(b,d):na(b)&&!("nodeType"in b)?u(Ua(b),d):d(b)}};m.xb=function(a){return a.b()};m.ja=da("goog-control");function Ie(a,b){var c=a.ja(),d=[c],f=a.ja();f!=c&&d.push(f);c=b.i;for(f=[];c;){var g=c&-c;f.push(Ne(a,g));c&=~g}d.push.apply(d,f);(c=b.Ka)&&d.push.apply(d,c);w&&!ub("7")&&d.push.apply(d,Ke(d));return d}
function Ke(a,b){var c=[];b&&(a=a.concat([b]));u([],function(d){Na(d,wa(Qa,a))&&(!b||Qa(d,b))&&c.push(d.join("_"))});return c}function Ne(a,b){a.fe||Le(a);return a.fe[b]}function Le(a){var b=a.ja();a.fe={1:b+"-disabled",2:b+"-hover",4:b+"-active",8:b+"-selected",16:b+"-checked",32:b+"-focused",64:b+"-open"}};function Oe(){}t(Oe,Ge);ka(Oe);m=Oe.prototype;m.Hc=da("button");m.Va=function(a,b,c){16==b?a.setAttribute("aria-pressed",c):Oe.d.Va.call(this,a,b,c)};m.J=function(a){var b=Oe.d.J.call(this,a),c=a.yd();c&&this.mg(b,c);(c=a.L())&&this.Ra(b,c);a.ha&16&&this.Va(b,16,Me(a));return b};m.h=function(a,b){var b=Oe.d.h.call(this,a,b),c=this.L(b);a.Gg=c;a.wg=this.yd(b);a.ha&16&&this.Va(b,16,Me(a));return b};m.L=ja;m.Ra=ja;m.yd=function(a){return a.title};m.mg=function(a,b){a&&(a.title=b||"")};m.ja=da("goog-button");function Pe(a,b){K.call(this);a&&Qe(this,a,b)}t(Pe,Rc);m=Pe.prototype;m.f=k;m.ye=k;m.Gf=k;m.ze=k;m.Bb=-1;m.Ab=-1;m.$e=l;
var Re={3:13,12:144,63232:38,63233:40,63234:37,63235:39,63236:112,63237:113,63238:114,63239:115,63240:116,63241:117,63242:118,63243:119,63244:120,63245:121,63246:122,63247:123,63248:44,63272:46,63273:36,63275:35,63276:33,63277:34,63289:144,63302:45},Se={Up:38,Down:40,Left:37,Right:39,Enter:13,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"U+007F":46,Home:36,End:35,PageUp:33,PageDown:34,Insert:45},Te=w||jb&&ub("525"),Ue=bb&&ib;m=Pe.prototype;
m.Ij=function(a){if(jb&&(17==this.Bb&&!a.ctrlKey||18==this.Bb&&!a.altKey))this.Ab=this.Bb=-1;Te&&!De(a.keyCode,this.Bb,a.shiftKey,a.ctrlKey,a.altKey)?this.handleEvent(a):(this.Ab=ib?Fe(a.keyCode):a.keyCode,Ue&&(this.$e=a.altKey))};m.Kj=function(a){this.Ab=this.Bb=-1;this.$e=a.altKey};
m.handleEvent=function(a){var b=a.va,c,d,f=b.altKey;w&&"keypress"==a.type?(c=this.Ab,d=13!=c&&27!=c?b.keyCode:0):jb&&"keypress"==a.type?(c=this.Ab,d=0<=b.charCode&&63232>b.charCode&&Ee(c)?b.charCode:0):hb?(c=this.Ab,d=Ee(c)?b.keyCode:0):(c=b.keyCode||this.Ab,d=b.charCode||0,Ue&&(f=this.$e),bb&&(63==d&&224==c)&&(c=191));var g=c,h=b.keyIdentifier;c?63232<=c&&c in Re?g=Re[c]:25==c&&a.shiftKey&&(g=9):h&&h in Se&&(g=Se[h]);a=g==this.Bb;this.Bb=g;b=new Ve(g,d,a,b);b.altKey=f;this.dispatchEvent(b)};
m.b=ca("f");function Qe(a,b,c){a.ze&&a.detach();a.f=b;a.ye=L(a.f,"keypress",a,c);a.Gf=L(a.f,"keydown",a.Ij,c,a);a.ze=L(a.f,"keyup",a.Kj,c,a)}m.detach=function(){this.ye&&(Nc(this.ye),Nc(this.Gf),Nc(this.ze),this.ze=this.Gf=this.ye=k);this.f=k;this.Ab=this.Bb=-1};m.n=function(){Pe.d.n.call(this);this.detach()};function Ve(a,b,c,d){d&&this.init(d,i);this.type="key";this.keyCode=a;this.charCode=b;this.repeat=c}t(Ve,Ac);function We(a,b){a||e(Error("Invalid class name "+a));pa(b)||e(Error("Invalid decorator function "+b))}var Xe={};function Ye(a,b,c){S.call(this,c);if(!b){for(var b=this.constructor,d;b;){d=ra(b);if(d=Xe[d])break;b=b.d?b.d.constructor:k}b=d?pa(d.a)?d.a():new d:k}this.G=b;this.Za=a}t(Ye,S);m=Ye.prototype;m.Za=k;m.i=0;m.ha=39;m.hb=255;m.Uk=0;m.Pb=j;m.Ka=k;m.yf=j;m.de=l;m.oi=k;function Ze(a){a.W&&l!=a.yf&&$e(a,l);a.yf=l}m.xb=function(){return this.G.xb(this)};
m.vd=function(a,b){b?a&&(this.Ka?Qa(this.Ka,a)||this.Ka.push(a):this.Ka=[a],this.G.vd(this,a,j)):a&&this.Ka&&(Ra(this.Ka,a),0==this.Ka.length&&(this.Ka=k),this.G.vd(this,a,l))};m.J=function(){var a=this.G.J(this);this.f=a;var b=this.oi||this.G.Hc();b&&a.setAttribute("role",b);this.de||this.G.Xc(a,l);this.Pb||this.G.ng(a,l)};m.dc=function(){return this.G.dc(this.b())};m.Tb=function(a){return this.G.Tb(a)};
m.H=function(a){this.f=a=this.G.h(this,a);var b=this.oi||this.G.Hc();b&&a.setAttribute("role",b);this.de||this.G.Xc(a,l);this.Pb="none"!=a.style.display};m.v=function(){Ye.d.v.call(this);this.G.Jh(this);if(this.ha&-2&&(this.yf&&$e(this,j),this.ha&32)){var a=this.xb();if(a){var b=this.Mc||(this.Mc=new Pe);Qe(b,a);Q(Q(Q(this.m(),b,"key",this.Jj),a,"focus",this.Gj),a,"blur",this.th)}}};
function $e(a,b){var c=a.m(),d=a.b();b?(Q(Q(Q(Q(c,d,"mouseover",a.zh),d,"mousedown",a.xh),d,"mouseup",a.Ah),d,"mouseout",a.yh),a.ue!=ja&&Q(c,d,"contextmenu",a.ue),w&&Q(c,d,"dblclick",a.uh)):(vd(vd(vd(vd(c,d,"mouseover",a.zh),d,"mousedown",a.xh),d,"mouseup",a.Ah),d,"mouseout",a.yh),a.ue!=ja&&vd(c,d,"contextmenu",a.ue),w&&vd(c,d,"dblclick",a.uh))}m.ac=function(){Ye.d.ac.call(this);this.Mc&&this.Mc.detach();this.Pb&&this.isEnabled()&&this.G.Yc(this,l)};
m.n=function(){Ye.d.n.call(this);this.Mc&&(this.Mc.ba(),delete this.Mc);delete this.G;this.Ka=this.Za=k};m.mc=function(a){this.G.mc(this.b(),a);this.Za=a};m.qh=function(){var a=this.Za;return!a?"":(p(a)?a:ma(a)?Ma(a,hc).join(""):fc(a)).replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")};m.nc=function(a){Ye.d.nc.call(this,a);var b=this.b();b&&this.G.nc(b,a)};m.Xc=function(a){this.de=a;var b=this.b();b&&this.G.Xc(b,a)};
m.ng=function(a,b){if(b||this.Pb!=a&&this.dispatchEvent(a?"show":"hide")){var c=this.b();c&&this.G.ng(c,a);this.isEnabled()&&this.G.Yc(this,a);this.Pb=a;return j}return l};m.isEnabled=function(){return!(this.i&1)};m.mb=function(a){var b=this.getParent();if((!b||"function"!=typeof b.isEnabled||b.isEnabled())&&af(this,1,!a))a||(this.setActive(l),bf(this,l)),this.Pb&&this.G.Yc(this,a),this.na(1,!a)};function bf(a,b){af(a,2,b)&&a.na(2,b)}m.zb=function(){return!!(this.i&4)};
m.setActive=function(a){af(this,4,a)&&this.na(4,a)};function Me(a){return!!(a.i&16)}function cf(a,b){af(a,16,b)&&a.na(16,b)}m.Ad=function(){return!!(this.i&32)};m.nb=function(a){af(this,32,a)&&this.na(32,a)};m.na=function(a,b){this.ha&a&&b!=!!(this.i&a)&&(this.G.na(this,a,b),this.i=b?this.i|a:this.i&~a)};function df(a,b,c){a.W&&(a.i&b&&!c)&&e(Error("Component already rendered"));!c&&a.i&b&&a.na(b,l);a.ha=c?a.ha|b:a.ha&~b}function ef(a,b){return!!(a.hb&b)&&!!(a.ha&b)}
function af(a,b,c){return!!(a.ha&b)&&!!(a.i&b)!=c&&(!(a.Uk&b)||a.dispatchEvent(ye(b,c)))&&!a.le}m.zh=function(a){(!a.relatedTarget||!ac(this.b(),a.relatedTarget))&&(this.dispatchEvent("enter")&&this.isEnabled()&&ef(this,2))&&bf(this,j)};m.yh=function(a){if((!a.relatedTarget||!ac(this.b(),a.relatedTarget))&&this.dispatchEvent("leave"))ef(this,4)&&this.setActive(l),ef(this,2)&&bf(this,l)};m.ue=ja;
m.xh=function(a){this.isEnabled()&&(ef(this,2)&&bf(this,j),Cc(a)&&(ef(this,4)&&this.setActive(j),this.G.Ff(this)&&this.xb().focus()));!this.de&&Cc(a)&&a.preventDefault()};m.Ah=function(a){this.isEnabled()&&(ef(this,2)&&bf(this,j),this.zb()&&(this.Md(a)&&ef(this,4))&&this.setActive(l))};m.uh=function(a){this.isEnabled()&&this.Md(a)};
m.Md=function(a){ef(this,16)&&cf(this,!Me(this));ef(this,8)&&af(this,8,j)&&this.na(8,j);if(ef(this,64)){var b=!(this.i&64);af(this,64,b)&&this.na(64,b)}b=new xc("action",this);a&&(b.altKey=a.altKey,b.ctrlKey=a.ctrlKey,b.metaKey=a.metaKey,b.shiftKey=a.shiftKey,b.Xf=a.Xf);return this.dispatchEvent(b)};m.Gj=function(){ef(this,32)&&this.nb(j)};m.th=function(){ef(this,4)&&this.setActive(l);ef(this,32)&&this.nb(l)};
m.Jj=function(a){return this.Pb&&this.isEnabled()&&this.xf(a)?(a.preventDefault(),a.stopPropagation(),j):l};m.xf=function(a){return 13==a.keyCode&&this.Md(a)};pa(Ye)||e(Error("Invalid component class "+Ye));pa(Ge)||e(Error("Invalid renderer class "+Ge));var ff=ra(Ye);Xe[ff]=Ge;We("goog-control",function(){return new Ye(k)});function gf(){}t(gf,Oe);ka(gf);m=gf.prototype;m.Hc=aa();m.J=function(a){Ze(a);a.hb&=-256;df(a,32,l);return a.La().J("button",{"class":Ie(this,a).join(" "),disabled:!a.isEnabled(),title:a.yd()||"",value:a.L()||""},a.qh()||"")};m.Tb=function(a){return"BUTTON"==a.tagName||"INPUT"==a.tagName&&("button"==a.type||"submit"==a.type||"reset"==a.type)};m.h=function(a,b){Ze(a);a.hb&=-256;df(a,32,l);b.disabled&&x(b,Ne(this,1));return gf.d.h.call(this,a,b)};m.Jh=function(a){Q(a.m(),a.b(),"click",a.Md)};m.Xc=ja;
m.nc=ja;m.Ff=function(a){return a.isEnabled()};m.Yc=ja;m.na=function(a,b,c){gf.d.na.call(this,a,b,c);if((a=a.b())&&1==b)a.disabled=c};m.L=function(a){return a.value};m.Ra=function(a,b){a&&(a.value=b)};m.Va=ja;function hf(a,b,c){Ye.call(this,a,b||gf.a(),c)}t(hf,Ye);m=hf.prototype;m.L=ca("Gg");m.Ra=function(a){this.Gg=a;this.G.Ra(this.b(),a)};m.yd=ca("wg");m.mg=function(a){this.wg=a;this.G.mg(this.b(),a)};m.n=function(){hf.d.n.call(this);delete this.Gg;delete this.wg};m.v=function(){hf.d.v.call(this);if(this.ha&32){var a=this.xb();a&&Q(this.m(),a,"keyup",this.xf)}};m.xf=function(a){return 13==a.keyCode&&"key"==a.type||32==a.keyCode&&"keyup"==a.type?this.Md(a):32==a.keyCode};We("goog-button",function(){return new hf(k)});function jf(){}t(jf,Oe);ka(jf);m=jf.prototype;m.J=function(a){var b={"class":"goog-inline-block "+Ie(this,a).join(" "),title:a.yd()||""},b=a.La().J("div",b,kf(this,a.Za,a.La()));Je(this,a,b);return b};m.Hc=da("button");m.dc=function(a){return a&&a.firstChild.firstChild};function kf(a,b,c){return c.J("div","goog-inline-block "+(a.ja()+"-outer-box"),c.J("div","goog-inline-block "+(a.ja()+"-inner-box"),b))}m.Tb=function(a){return"DIV"==a.tagName};
m.h=function(a,b){lf(b,j);lf(b,l);var c;a:{c=kc(a.La(),b);var d=this.ja()+"-outer-box";if(c&&A(c,d)&&(c=kc(a.La(),c),d=this.ja()+"-inner-box",c&&A(c,d))){c=j;break a}c=l}c||b.appendChild(kf(this,b.childNodes,a.La()));x(b,"goog-inline-block",this.ja());return jf.d.h.call(this,a,b)};m.ja=da("goog-custom-button");
function lf(a,b){if(a)for(var c=b?a.firstChild:a.lastChild,d;c&&c.parentNode==a;){d=b?c.nextSibling:c.previousSibling;if(3==c.nodeType){var f=c.nodeValue;if(""==Aa(f))a.removeChild(c);else{c.nodeValue=b?f.replace(/^[\s\xa0]+/,""):f.replace(/[\s\xa0]+$/,"");break}}else break;c=d}};function mf(a,b,c){hf.call(this,a,b||jf.a(),c)}t(mf,hf);We("goog-custom-button",function(){return new mf(k)});function nf(){S.call(this);this.Kb=2;this.M=10;this.Qe=60*this.Kb*this.M;this.Tg=[];this.Rg={};this.sa=of();this.wa=0;this.zi=this.yi=l;this.tf=this.gb=j;this.qa=l;this.aa=[T.a().l,T.a().l.g()]}t(nf,S);m=nf.prototype;
m.v=function(){nf.d.v.call(this);this.bd=C("ticker");this.cm=C("my-ticker");var a=C("go-live");this.Fh=C("header");this.X=C("channels");this.Gh=1;this.Ga=Math.max(1280,E().width)*this.Gh;this.qd=R(C("controller")).height;O.a().subscribe($c,function(a){this.Se(a)},this);O.a().subscribe(Zc,function(a){B(this.b(),"sidebar-toggled",a);this.fa(l,i,j);pf(this)},this);this.Se(A(this.b(),"toggled"));this.Ib=new hd;for(var b=60;b>=this.Ib.getMinutes();)b-=this.M;this.Ib.setMinutes(b);this.P=this.Ib.clone();
this.P.add(new id(0,0,0,0,0*-this.M));this.Kf=this.P.clone();this.Kf.add(new id(0,0,0,0,this.M*(this.Kb+1)));qf(this,this.Kb,this.P);Md(this.b(),this.Ga);this.ea=(this.Ga-200)/this.Qe;this.al=this.Ga/this.Kb;this.Vb=document.createElement("style");this.Vb.id="channel-name-offs";this.Vb.type="text/css";document.getElementsByTagName("head")[0].appendChild(this.Vb);this.Vb.innerHTML="div#guide div.channels div.channel div.name{left:0 !important}";var c=0;u(T.a().xc,r(function(a){if(!a.C){var b=new rf(a,
this.Qe,this.Ib,0,this.P);Ae(b,this.X);this.Tg.push(b);this.Rg[a.id]=b;a.subscribe(sf,function(){this.Pd()},this);var d=Rb("program",b.b());(d=d[d.length-1])&&(c=Math.max(c,Gd(d).x+R(d).width+170))}a.id==T.a().l.id&&b&&(x(b.b(),"current"),this.T=b,window.currentChannel=this.T);this.De=a.C?a:this.De},this));this.o=new Xd(this.b());var d=this.Vb,f=this.b();this.o.td=function(a){0>a&&a>-R(f).width+E().width&&(window.currentChannel&&window.currentChannel.update(),this.target.style.left=a+"px",d.innerHTML=
"div#guide div.channels div.channel div.name{left:"+-a+"px !important}")};var b=C("now-left"),g=C("now-right");Q(Q(Q(Q(Q(Q(Q(Q(Q(this.m(),Vc.a().od,Uc,r(this.vg,this)),a,"click",r(function(){T.a().c(tf,this.T.r);O.a().c(ad,j)},this)),window,"resize",r(this.fa,this)),this.bd,"click",r(this.fa,this,j,i,l)),b,"click",r(this.fk,this)),g,"click",r(this.ok,this)),this.o,"beforedrag",r(function(){z(this.b(),"animate");x(this.b(),"drag");this.qa=j},this)),this.o,"end",r(function(){z(this.b(),"drag");x(this.b(),
"animate");this.gb=this.qa=l;pf(this)},this)),this.Fh,"mousewheel",r(function(a){a.preventDefault();a.stopPropagation();a=a.va;z(this.b(),"animate");x(this.b(),"drag");this.qa=j;a=Gd(this.b()).x+(a.wheelDelta?a.wheelDelta:a.detail?-a.detail:0);0>a&&a>-1*this.Ga+E().width&&(Ed(this.b(),a),this.T&&this.T.update(),this.Vb.innerHTML="div#guide div.channels div.channel div.name{left:"+-a+"px !important}");z(this.b(),"drag");x(this.b(),"animate");this.gb=this.qa=l;pf(this)},this));T.a().subscribe(uf,this.Pd,
this);T.a().subscribe(tf,this.Ub,this);T.a().subscribe(vf,r(function(){M(r(function(){this.fa(j)},this))},this));O.a().subscribe("toggle-admin",function(a){B(this.b(),"admin",a)},this);for(U.a().subscribe(wf,this.Yf,this);R(this.b()).width<c;)xf(this);this.Pd();this.sa&&Q(this.m(),this.o,"beforedrag",r(function(a){a.bf.shiftKey&&a.preventDefault()},this))};
m.Se=function(a){z(this.b(),"animate");this.fa(j,i,l);x(this.b(),"animate");var b=Math.min(this.X.scrollHeight,190);B(this.b(),"toggled",a);Ld(this.b(),a?b+this.qd+19:this.qd);this.T&&(this.X.scrollTop=Gd(this.T.b()).y);M(r(function(){Ld(this.X,a?b:40);B(this.b(),"collapsed",!a);this.Pd();this.fa();if(this.T){var c=this.X,d=Gd(this.T.b()).y;c.scrollTop!=d&&(c.scrollTop=d)}},this),a?0:800);a&&this.Pd();this.o&&this.o.mb(a)};
function qf(a,b,c){for(var d=D("times",a.b()),f=0;f<=b;f++){var g=c.clone();g.add(new id(0,0,0,0,a.M*f));var h=F,n={"class":"time",style:"width:"+(a.Ga-200)/a.Kb+"px"},q=i,v=g.getHours();ha(q)||(q=j);var y=12==v;12<v&&(v-=12,y=j);0==v&&q&&(v=12);v=String(v);v+=":"+Ha(g.getMinutes());q&&(g=ya("am"),q=ya("pm"),v+=y?q:g);h=h("div",n,v);d.appendChild(h)}}
m.Ub=function(a){this.T&&z(this.T.b(),"current");this.T=this.Rg[a.id]||k;if(window.currentChannel=this.T)x(this.T.b(),"current"),M(r(this.fa,this,j,i,l));this.aa[0]=a};m.Yf=function(){this.De=this.De||yf();T.a().c(tf,this.De);O.a().c($c,l)};
function pf(a){var b=C("now-left"),c=C("now-right"),d=(s()-a.P.getTime())/1E3*a.ea,f=O.a().Zc?320:0,g=E().width-f,f=R(a.b()).width-f-200;((a.aa[0].C?a.aa[0].queue.length:a.aa[0].jb+(a.wa+1||0)+1<a.aa[0].ma.length)?((a.aa[0].g(a.wa+1).time.getTime()-s())/1E3+a.aa[0].g(a.wa+1).media.duration)*a.ea+g:0)>f-d&&xf(a);c.style.right=O.a().Zc?"320px":0;B(c,"now",!!(-Gd(a.bd).x<Gd(a.b()).x-g));B(b,"now",!!(-Gd(a.bd).x>Gd(a.b()).x));d=-1;0<=a.aa[0].jb+(a.wa||0)-1&&a.aa[0].g(a.wa-1)&&(d=(a.aa[0].g(a.wa-1).time.getTime()-
a.P.getTime())/1E3*a.ea);P(c,(a.aa[0].C?!!a.aa[0].queue.length:a.aa[0].jb+(a.wa||0)+1<a.aa[0].ma.length)||A(c,"now"));P(b,0<d||A(b,"now"))}m.fk=function(){A(C("now-left"),"now")?T.a().l.g()==U.a().g()?this.fa(j,i,i,j):this.fa(l,i,i,j):this.fa(l,-1)};m.ok=function(){A(C("now-right"),"now")?T.a().l.g()==U.a().g()?this.fa(j,i,i,j):this.fa(l,i,i,l):this.fa(l,1)};function xf(a){var b=Math.ceil(a.Kb/a.Gh);qf(a,1,a.Kf);a.Ga+=a.al;Md(a.b(),a.Ga);a.Kb++;a.Kf.add(new id(0,0,0,0,a.M*b));a.Qe=60*a.Kb*a.M}
m.vg=function(){if(O.a().Jc||this.tf){var a=T.a().l&&T.a().l.C||l,b=T.a().l&&T.a().l.g(),c=U.a().g(),d=1E3*U.a().re(),f=Math.round((s()-this.P.getTime())/1E3*this.ea),d=c&&d?Math.round((c.time.getTime()+d-this.P.getTime())/1E3*this.ea):f;pf(this);Ed(this.bd,f);B(this.bd,"go-live",!a&&!!b&&!!c&&b.id!=c.id&&45<Math.abs(d-f));this.tf?(this.tf=l,this.fa(j,i,l),x(this.b(),"animate")):this.qa||this.fa()}};
m.fa=function(a,b,c,d){this.gb=a!=i?!!a:this.gb;this.yi=a!=i?!!c:this.gb;this.wa=this.gb?0:b?this.wa+b:this.wa;a=T.a().l.g(this.wa);d=T.a().l.C?(d=zf(T.a(),j))&&d.g():d?a:this.gb?U.a().g():this.aa[0].g(this.wa);this.aa[1]=d;this.gb||z(this.b(),"tick-along");if((this.gb||b)&&this.P){var c=U.a().g(),f=U.a().getCurrentTime(),a=(s()-this.P.getTime())/1E3*this.ea;for(c&&f&&Math.round((c.time.getTime()+f-this.P.getTime())/1E3*this.ea);a+E().width>this.Ga-(O.a().Zc?320:0);)xf(this);c=E().width-(O.a().Zc?
320:0);f=0;d&&(f=-(d.time.getTime()-this.P.getTime())/1E3*this.ea+5);if(!d||!b&&O.a().Jc&&a>-f+c-320)f=-Gd(this.bd).x+c-200,x(this.b(),"tick-along");f=Math.max(f,-R(this.b()).width+c);f=Math.min(f,0);Ed(this.b(),f);this.Vb.innerHTML="div#guide div.channels div.channel div.name{left:"+-f+"px !important}";if(!this.yi&&this.T){var g=Gd(this.T.b()).y-R(this.Fh).height,h=new se(this.X,[this.X.scrollLeft,this.X.scrollTop],[this.X.scrollLeft,g],100*this.Tg.length);Q(this.m(),h,"end",r(function(){var a=this.X;
a.scrollTop!=g&&(a.scrollTop=g);this.zi=l},this));M(r(function(){this.zi=j;h.play()},this),100)}}b&&pf(this)};m.Pd=function(){var a=Math.min(this.X.scrollHeight,190);Ld(this.X,A(this.b(),"toggled")?a:this.qd);Ld(this.b(),A(this.b(),"collapsed")?this.qd:a+this.qd+19)};function Af(a){return'\t<div class="channel"><div class="programs-container"><div class="programs"></div><div class="suggest"><div class="spinner">...</div><div class="select-program"><div class="select-header">SUGGESTION BOX <div class="close"></div></div><div class="select-content"><div class="page"><input type="text" class="program-input" placeholder="Paste YouTube link"/><div class="page2"></div></div></div></div></div></div><div class="graph"></div><div class="viewers"></div><div class="name"><div class="text">'+
I(a.name)+'</div><div class="suggest-program"><div class="add-program button dark">+</div></div></div></div>'}function Bf(a){return'<div class="info"><div class="thumb'+(a.repeat?" repeat":"")+'" style="background-image:url('+I(a.bg.media.Ua)+"); background-position: 50% "+I(a.bg.media.ad)+'%"></div><div class="progress"></div><div class="title">'+I(a.bg.media.name)+"</div>"+(a.Ye?'<div class="remove"></div><div class="repos"></div>':"")+"</div>"}
function Cf(a){return'<div class="line"><div class="pic"><img src="'+I(a.j.Q)+'"></div></div>'}function Df(a){return'<div class="confirm-media"><div class="thumb" style="background-image:url('+I(a.Yk)+')"></div><div class="title">'+I(a.title)+'</div><div class="added">ADDED</div><div class="dark button">ADD</div></div>'};function Ef(){N.call(this)}t(Ef,N);ka(Ef);function Ff(a){this.id=a.id;this.Q=a.picture;this.name=a.name;this.description=a.description;this.link=a.link};function Gf(a){N.call(this);this.id=a.id;this.name=a.name;this.host="youtube";this.Kc=a.host_id;this.Nj="http://www.youtube.com/watch?v="+a.host_id;this.duration=a.duration;this.nh=l;this.description=a.description;this.link=a.link||"xylocast.com/?m="+this.id;this.Ca=new Ff(a.publisher);this.jc=gd(a.published+"Z");this.Ua="http://i.ytimg.com/vi/"+this.Kc+"/0.jpg";this.tg="http://i.ytimg.com/vi/"+this.Kc+"/1.jpg";this.hm="http://i.ytimg.com/vi/"+this.Kc+"/2.jpg";this.im="http://i.ytimg.com/vi/"+this.Kc+
"/3.jpg";this.sg=new Fb(480,360);this.ad=a.thumb_pos||37;this.vb=[];this.Pi=[];this.pd=a.comment_count||0;this.Tk=a.star_count||0;this.Me=[];this.hc={};this.ej=a.collection_id;this.subscribe(Hf,this.Zi,this);this.subscribe(If,this.Ek,this);this.subscribe(Jf,this.uc,this)}t(Gf,N);function Kf(a){return a.jc.getMonth()+1+"/"+a.jc.getDate()+"/"+a.jc.getYear()}var Hf="add-comment",If="remove-comment",Jf="watching";
Gf.prototype.Zi=function(a){this.vb.push(a);this.pd+=1;a.j.id!=V.a().q.id&&Ef.a().c("show","commented on "+this.name,a.text,a.j,a.j.Q,"#info:"+this.id)};Gf.prototype.Ek=function(a){W("/_comment",ie(),"POST","delete=true&id="+a);Sa(this.vb,function(b){return b.id==a});this.pd-=1};Gf.prototype.uc=function(a,b,c){c?(Kb(this.hc,a.id),a.sd=k):(this.hc[a.id]=a,a.sd=this,a.id!=V.a().q.id&&Ef.a().c("flash","is watching "+b.name,this.name,a,this.tg,"#info:"+this.id))};function Lf(){N.call(this);this.Of={}}t(Lf,N);ka(Lf);function Mf(a,b){var c=a.get(b.id);c||(c=new Gf(b),a.add(c));return c}Lf.prototype.get=function(a){return a in this.Of?this.Of[a]:i};Lf.prototype.add=function(a){this.Of[a.id]=a};function Nf(a,b){N.call(this);var c=b||k,d=a||k;this.id=d?d.id:c.id;this.media=d?Mf(Lf.a(),d.media):c;Lf.a().add(this.media);this.time=d?gd(d.time+"Z"):new hd;this.async=d?d.async:j;this.seek=d?d.seek:k}t(Nf,N);function Of(a){return new Nf(i,a)};function Pf(a){N.call(this);this.id=a.id;this.name=a.name;this.url=a.profile_url;this.location=a.location||"";this.fl=a.welcomed;this.Nl=a.demo;this.Q=za("https://graph.facebook.com/%s/picture",this.id);for(this.color=Raphael.getColor();"#00bf85"==this.color||"#00bf2f"==this.color;)this.color=Raphael.getColor();this.We=a.access_level;this.Dl=[];this.Yl=a.last_login?gd(a.last_login+"Z"):k;this.em=a.session_count;this.Fl=a.ave_session?a.ave_session.toFixed(2):k;this.Mk=a.show_guide!=i?a.show_guide:
j;this.Qk=a.show_sidebar!=i?a.show_sidebar:j;this.zk=a.post_facebook!=i?a.post_facebook:j;this.Ak=a.post_twitter!=i?a.post_twitter:j}t(Pf,N);function of(){return V.a().q.We==Qf}var Qf=2;function Rf(a,b,c,d,f){this.id=a;this.j=b;this.V=c;this.yg=d;this.ed=f||k;this.ai=[]}Rf.prototype.Me=function(a){this.ai.push(a);this.V.C&&this.V.U&&(this.V.U.seek=k,this.V.U=k);W("/_seen",ie(),"POST","media_id="+a.id+"&session_id="+this.id+"&async="+this.V.C)};
Rf.prototype.end=function(a){this.ed=a;a=(this.ed.getTime()-this.yg.getTime())/1E3;Sf.a();var b=this.V,c=this.ai.length;V.a().Tf.length?_gaq.push(["_trackEvent","Users","SessionTimeWithFriends",V.a().q.id,Math.round(a)]):_gaq.push(["_trackEvent","Users","SessionTimeNoFriends",V.a().q.id,Math.round(a)]);_gaq.push(["_trackEvent","Users","SessionMediaCount",V.a().q.id,c]);_gaq.push(["_trackEvent","Users","Active",V.a().q.id,c]);_gaq.push(["_trackEvent","Users",b.id+"-time",V.a().q.id,a]);_gaq.push(["_trackEvent",
"Users",b.id+"-medias",V.a().q.id,c]);b.C||(_gaq.push(["_trackEvent","Channel","SessionTime",b.id,a]),_gaq.push(["_trackEvent","Channel","SessionMediaCount",b.id,c]))};function Tf(a){N.call(this);this.id=a.id;this.name=a.name;this.C=a.my_channel;this.sd=a.current_media?Mf(Lf.a(),a.current_media):k;this.Kl=a.current_seek;this.ma=[];this.Hb={};this.U=a.current_program&&new Nf(a.current_program);this.hd=[];this.queue=[];this.cb=0;this.Jd=a.online!=i?a.online:k;this.subscribe(Uf,this.Sb,this);this.subscribe(Vf,this.$i,this);this.subscribe(Wf,this.uc,this);this.subscribe(Xf,this.Dg,this)}t(Tf,N);m=Tf.prototype;
m.Sb=function(a){this.ma.push(a);this.Hb[a.id]=a;a.time.getTime()+1E3*a.media.duration>this.cb&&(this.cb=a.time.getTime()+1E3*a.media.duration-12E4,Yc(Vc.a(),this.cb,r(this.Mf,this,this.cb)),Yc(Vc.a(),this.cb+6E4,r(this.Mf,this,this.cb+6E4)))};m.Mf=function(a){this.cb<=a&&!this.C&&W("/_programming/"+this.id,r(function(a){a=Yf(a.target);a.length||Yc(Vc.a(),s()+1E3,r(this.Mf,this,s()+1E3));u(a,function(a){if(!this.Hb[a.id]){var b=this.Hb[a.id];b||(b=new Nf(a),this.Sb(b));this.c(Uf,b)}},this)},this))};
m.$i=function(a,b){b?(this.queue.push(a),Ef.a().c("flash","Added to queue",a.name,i,a.tg,"#info:"+a.id),Zf(Sf.a(),a)):Sa(this.queue,function(b){return b.id==a.id},this)};m.uc=function(a){this.hd.push(a)};m.Dg=function(a){var b=a.id in this.Hb?this.Hb[a.id]:i;b&&(b.time=gd(a.time+"Z"))};
m.g=function(a){if(this.U&&this.U.async&&this.U.seek)return this.U;if(!this.ma.length)return k;var b=this.U;b||(b=this.ma[0],this.jb=0);if(a)return this.ma[this.jb+a];if(!this.C&&s()>=b.time.getTime()&&s()<b.time.getTime()+1E3*b.media.duration)return this.U=b;for(;s()>b.time.getTime()&&s()>=b.time.getTime()+1E3*b.media.duration;){this.U||(this.U=this.ma[0],this.jb=0);this.ma.length>=this.jb+1?(this.jb++,a=this.ma[this.jb],a=this.U=this.C?a&&a.seek?a:k:this.ma[this.jb]):a=k;if(this.C){if(a&&a.async&&
a.seek)return this.U=a;if(!a)if(this.queue.length){var a=this.queue.shift(),c=Of(a);yf().c(Uf,c);W("/_addprogram",ie(),"POST","channel_id="+T.a().C.id+"&media_id="+a.id+"&now=true");a=c}else a=k}if(!a)break;b=a}return s()>=b.time.getTime()&&s()<b.time.getTime()+1E3*b.media.duration?this.U=b:k};var Uf="add-program",Vf="add-queue",Wf="add-viewer",Xf="update-program",sf="online";function $f(){K.call(this);this.da=[];this.Gc=[];this.me={};this.t=new sd(this);this.Rj=this.Oh=l;this.Eg=j}t($f,Rc);m=$f.prototype;m.Af=0;m.jg=ba("Af");
m.init=function(){if(!this.Oh){for(var a=0,b=this.da.length;a<b;a++)for(var c=Xb(this.da[a]),d=0,f=c.length;d<f;++d){var g=c[d],h=g,n=ra(h);this.me[n]=g;this.eh&&(Q(this.t,g,"mouseover",this.Cj),Q(this.t,g,"mouseout",this.Bj));this.dh&&(Q(this.t,h,"mouseover",this.Aj),Q(this.t,h,"mouseout",this.zj));this.Gc.push(g);Q(this.t,h,["mousedown","touchstart"],this.Bh)}this.Oh=j}};
m.n=function(){this.t.ba();for(var a=0,b=this.da.length;a<b;a++){var c=this.da[a];c.bh=i;c.Xb=i}this.da.length=0;this.Gc.length=0;this.me=k;ag(this);$f.d.n.call(this)};function bg(a,b){for(var c=0,d=a.da.length;c<d;c++){var f=a.da[c];f.Ec=Od(f)}c=0;for(d=a.Gc.length;c<d;c++)f=a.Gc[c],f!=b&&(f.Ec=Od(f))}
m.Bh=function(a){var b=ra(a.currentTarget);this.p=this.me[b];this.B=this.he(this.p);this.ne&&x(this.B,this.ne);this.B.style.margin="0";this.B.style.position="absolute";this.B.style.visibility="hidden";Qb(this.p).body.appendChild(this.B);b=Jd(this.p);Kd(this.B,b);this.o=new Xd(this.B);this.o.jg(this.Af);L(this.o,"start",this.wh,l,this);L(this.o,"end",this.vh,l,this);L(this.o,"earlycancel",this.ge,l,this);this.o.oc(a)};
m.wh=function(a){if(this.dispatchEvent(new cg("beforedragstart",this,a.bf,this.p,k,k))){this.Fe=this.p.parentNode;this.Zg=this.Uf=Yb(this.p);this.nf=this.Fe;this.mf?x.apply(k,Ta(this.p,this.mf)):this.p.style.visibility="hidden";var b=R(this.B);this.B.wj=b.width/2;this.B.vj=b.height/2;this.B.style.visibility="";this.Eg&&(this.p.style.display="none");bg(this,this.p);this.p.style.display="";L(this.o,"drag",this.Dj,l,this);this.dispatchEvent(new cg("dragstart",this,a.bf,this.p,this.B,this.o))}else a.preventDefault(),
this.ge()};
m.Dj=function(a){var b=Jd(this.B),b=new Eb(b.x+this.B.wj,b.y+this.B.vj),c;a:{c=k;if("none"!=this.p.style.display){c=this.p.parentNode;var d=Od(c);if(dg(b,d))break a}for(var d=0,f=this.da.length;d<f;d++){var g=this.da[d];if(g!=c&&dg(b,g.Ec)){c=g;break a}}c=k}var h;if(c){c==k&&e(Error("getHoverNextItem_ called with null hoverList."));var n,q,d=l,f=i;switch(c.bh){case 0:h=b.y;n=eg;q=fg;break;case 4:d=j;case 2:h=b.x;n=gg;q=fg;break;case 5:d=j;case 3:h=b.x,n=hg,q=ig}for(var g=k,v,y=Xb(c),J=0,Z=y.length;J<
Z;J++){var Y=y[J];if(Y!=this.p){var xa=n(Y.Ec);if(d){var gb=jg(Y,b);ha(f)||(f=gb);if(q(h,xa)&&(v==i||gb<f||gb==f&&(q(xa,v)||xa==v)))g=Y,v=xa;gb<f&&(f=gb)}else if(q(h,xa)&&(v==i||q(xa,v)))g=Y,v=xa}}h=g!==k&&jg(g,b)>f?k:g}else h=k;if(!this.dispatchEvent(new cg("beforedragmove",this,a,this.p,this.B,this.o,b,c,h)))return l;if(c)this.Eg?(this.p.parentNode!=c||Yb(this.p)!=h)&&c.insertBefore(this.p,h):h&&(this.Zg=h),this.p.style.display="",c.Xb&&x(c,c.Xb);else{this.Rj||(this.p.style.display="none");n=0;
for(q=this.da.length;n<q;n++)v=this.da[n],v.Xb&&z(v,v.Xb)}c!=this.nf&&(this.nf=c,bg(this,this.p));this.dispatchEvent(new cg("dragmove",this,a,this.p,this.B,this.o,b,c,h));return l};m.ge=function(){ag(this);this.o=this.B=this.Uf=this.Fe=this.nf=this.p=k;for(var a=0,b=this.da.length;a<b;a++)this.da[a].Ec=k;a=0;for(b=this.Gc.length;a<b;a++)this.Gc[a].Ec=k};
m.vh=function(a){if(!this.dispatchEvent(new cg("beforedragend",this,a,this.p,this.B,this.o)))return l;this.Eg||this.Fe.insertBefore(this.p,this.Zg);ag(this);this.dispatchEvent(new cg("dragend",this,a,this.p,this.B,this.o));this.ge();return j};function ag(a){tc(a.o);a.B&&G(a.B);a.p&&"none"==a.p.style.display&&(a.Fe.insertBefore(a.p,a.Uf),a.p.style.display="");a.mf&&a.p?z.apply(k,Ta(a.p,a.mf)):a.p&&(a.p.style.visibility="visible");for(var b=0,c=a.da.length;b<c;b++){var d=a.da[b];d.Xb&&z(d,d.Xb)}}
m.Cj=function(a){x.apply(k,Ta(a.currentTarget,this.eh))};m.Bj=function(a){z.apply(k,Ta(a.currentTarget,this.eh))};m.Aj=function(a){x.apply(k,Ta(a.currentTarget,this.dh))};m.zj=function(a){z.apply(k,Ta(a.currentTarget,this.dh))};function dg(a,b){return a.x>b.left&&a.x<b.left+b.width&&a.y>b.top&&a.y<b.top+b.height}function jg(a,b){var c=a.Ec;return Math.abs(b.y-(c.top+(c.height-1)/2))}function eg(a){return a.top+a.height-1}function gg(a){return a.left+a.width-1}function hg(a){return a.left||0}
function fg(a,b){return a<b}function ig(a,b){return a>b}m.he=function(a){var b=a.cloneNode(j);switch(a.tagName.toLowerCase()){case "tr":return F("table",k,F("tbody",k,b));case "td":case "th":return F("table",k,F("tbody",k,F("tr",k,b)));default:return b}};function cg(a,b,c,d,f,g,h,n,q){xc.call(this,a);this.Ol=b;this.event=c;this.Ha=d;this.kj=f;this.jj=g;this.fh=h;this.Xl=n;this.yb=q}t(cg,xc);function rf(a,b,c,d,f){S.call(this);this.r=a;this.sa=of();this.Di=this.ce=l;this.cd=b;this.Ib=c;this.P=f;this.fm=d;this.Ob={};this.Vc={};this.wb=this.sa?new $f:k;this.ff=6;this.Jd=j}t(rf,S);m=rf.prototype;m.J=function(){this.f=H(Af,{name:this.r.name,Ml:this.r.U,Qe:this.cd})};
m.v=function(){rf.d.v.call(this);this.Od=D("programs",this.b());this.Nb=D("viewers",this.b());this.fi=D("name",this.b());this.vf=D("graph",this.b());this.Ta=D("suggest",this.b());if(this.r.C)P(this.Ta,l);else{this.pc=new kg("Paste YouTube link");this.pc.h(D("program-input",this.b()));var a=new Pe(this.pc.b()),b=new lg(this.pc.b()),c=new mg(r(this.Sf,this),1E3);Q(Q(Q(this.m(),b,ng,r(this.Sf,this)),a,"key",r(function(){c&&c.sf()},this)),this.pc,"focus",r(this.Sf,this))}this.ea=(R(this.Od).width-200)/
this.cd;if(this.Di){var b=0,d=40;this.Lf=0;this.jh=[new Eb(b,d)];this.Vl=Math.floor((s()-this.P.getTime())/1E3);for(a=0;a<this.cd/40;a++)this.jh.push(new Eb(b+=40,d+=[-30,-5,15,10,25][Math.floor(5*Math.random())])),this.Lf=Math.max(this.Lf,d);this.tj=Raphael(this.vf,"100%",60).path("M0,0").attr({stroke:"none",opacity:0.8,fill:"#5d5d5d"})}zd(this.fi,"background",Raphael.getColor());b=this.r.ma;for(a=0;a<b.length;a++)b[a].time.getTime()<this.Ib.getTime()&&b[a].time.getTime()+1E3*b[a].media.duration>
this.Ib.getTime()-1E3*this.cd?this.Sb(b[a]):b[a].time.getTime()>this.Ib.getTime()&&this.Sb(b[a]);if(this.sa){a=this.wb;b=this.Od;b.bh=2;b.Xb=i;a.da.push(b);this.wb.ne="drag";var f=this.b();this.wb.Bh=function(a){var b=ra(a.currentTarget);this.p=this.me[b];this.B=this.he(this.p);this.ne&&x(this.B,this.ne);this.B.style.margin="0";this.B.style.position="absolute";this.B.style.visibility="hidden";f.appendChild(this.B);b=Jd(this.p);Kd(this.B,b);this.o=new Xd(this.B);this.o.jg(this.Af);L(this.o,"start",
this.wh,l,this);L(this.o,"end",this.vh,l,this);L(this.o,"earlycancel",this.ge,l,this);this.o.oc(a)};this.wb.init();var g={},h,n,q,v,y,J=j;Q(Q(Q(this.m(),this.wb,"beforedragstart",r(function(a){(!this.ce||!a.event.shiftKey)&&a.preventDefault()},this)),this.wb,"dragmove",function(a){q=q||a.fh.x;v=v||Gd(a.Ha).x;y=y||(a.Ha.previousElementSibling!=i?a.Ha.previousElementSibling:Zb(a.Ha.previousSibling,l));J=J&&!!y;var b=y?R(y).width:i,c=y?Gd(y).x:i,d=a.fh.x-q;10>Math.abs(d)||(a.yb&&!g[a.yb.id]&&0<d?(b=
R(a.Ha).width,c=Gd(a.yb).x,h=c-b+R(a.yb).width,d=this.r.Hb[a.yb.id],n=d.time.getTime()/1E3+d.media.duration-this.r.Hb[a.Ha.id].media.duration,Ed(a.Ha,h),Ed(a.yb,c-b-12),g[a.yb.id]=j,b=a.yb,b.parentNode&&b.parentNode.insertBefore(a.Ha,b.nextSibling)):J&&(0>d&&v+d<c+b)&&(b=R(a.Ha).width,h=c=Gd(y).x,n=this.r.Hb[y.id].time.getTime()/1E3,Ed(a.Ha,h),Ed(y,c+b+12),b=y.previousElementSibling!=i?y.previousElementSibling:Zb(y.previousSibling,l),y.parentNode&&y.parentNode.insertBefore(a.Ha,y),y=b,J=!!b))}),this.wb,
"dragend",function(a){n&&(W("/admin/_rescheduleprogram",i,"POST","program="+a.kj.id+"&time="+n),this.wb.init(),n=i);g={};h=y=v=q=i;J=j})}for(var a=this.r.hd,b=this.uc,d=p(a)?a.split(""):a,Z=a.length-1;0<=Z;--Z)Z in d&&b.call(this,d[Z],Z,a);Q(Q(Q(Q(this.m(),this.Ta,"click",r(this.qk,this)),D("close",this.Ta),"click",r(function(a){a.preventDefault();a.stopPropagation();og(this)},this)),D("name",this.b()),"click",r(function(){this.r.id!=T.a().l.id&&this.r.g()&&T.a().c(tf,this.r)},this)),Vc.a().od,Uc,
r(this.update,this));this.r.subscribe(Uf,this.Sb,this);this.r.subscribe(Wf,this.uc,this);this.r.subscribe("remove-viewer",this.Fk,this);this.r.subscribe(Xf,this.Dg,this);T.a().subscribe(vf,this.Si,this);T.a().subscribe(tf,function(){this.ff=0;this.Si()},this);O.a().subscribe("toggle-admin",ba("ce"),this);this.update()};m.Si=function(){if(this.u){z(this.Vc[this.u],"playing");var a=D("title",this.Vc[this.u]);a&&(a.style.left="")}this.u=k;if(a=T.a().l.g()){var b=this.Vc[a.id];b&&(this.u=a.id,x(b,"playing"))}};
m.Sb=function(a){var b=F("div",{"class":"program",id:a.id}),c=a.media.duration*this.ea,d=this.sa&&a.time.getTime()+1E3*a.media.duration>s();mc(b,Bf,{bg:a,repeat:600<c,Ye:d});this.Vc[a.id]=b;var f=T.a().l.g();f&&a.id==f.id&&(x(b,"playing"),this.u=a.id);var g=D("thumb",b);M(function(){a.media.sg.height<R(b).height+50?(x(g,"fix-height"),x(g,"pan-left")):x(g,"pan-top");h&&Md(g,200);B(b,"stretched",360<a.media.sg.height)});Md(b,c-12);f=(a.time.getTime()-this.P.getTime())/1E3*this.ea;Ed(b,f);Ed(this.Ta,
f+c);this.Od.appendChild(b);var h=120>c;B(b,"clipped",h);Q(this.m(),b,"click",function(){X.a().c(pg,a.media)});var n=A(b,"clipped")?200:R(b).width,c=D("title",b);R(c);Q(Q(this.m(),b,"mouseover",function(){O.a().Jc&&(this.ce||zd(g,"background-position-y",a.media.ad+10*Math.max(a.media.sg.width/n,1)+"%"))}),b,"mouseout",function(){O.a().Jc&&(this.ce||zd(g,"background-position-y",a.media.ad+"%"))});d&&(d=new Xd(D("repos",b)),d.td=function(a,b){var c=b-24;-50<=c&&50>=c&&zd(g,"background-position-y",50-
c+"%")},Q(Q(this.m(),d,"end",function(){var b=(g.style[Ia("background-position")]||"").split(" ")[1],b=b.substring(0,b.length-1);a.media.ad=b;W("/admin/_posthumb",ie(),"POST","media="+a.media.id+"&pos="+b)}),D("remove",b),"click",r(this.nk,this,a,b)))};m.Dg=function(a){var b=this.Vc[a.id],a=(gd(a.time+"Z").getTime()-this.P.getTime())/1E3*this.ea;Ed(b,a)};
m.nk=function(a,b){G(b);W("/admin/_removeprogram",i,"POST","program="+a.id+"&media_id="+a.media.id+"&channel_id="+this.r.id);W("admin/_media/collection",r(function(){alert("Disallowed on all channels.")},this),"POST","&media="+a.media.id+"&approve=false")};
m.uc=function(a){if(V.a().q.id!=a.j.id){var b=this.Ob[a.j.id];b||(b=F("div","viewer"),this.Nb.appendChild(b),this.Ob[a.j.id]=b);if(!a.ed||a.ed.getTime()>this.P.getTime()){var c=H(Cf,{j:a.j});b.appendChild(c);var d=Math.max(a.yg.getTime(),this.P.getTime()),b=(d-this.P.getTime())/1E3*this.ea+200,d=(s()-d)/1E3*this.ea;Md(c,d);Ed(c,b);zd(c,"background",a.j.color);Q(this.m(),c,"click",function(){X.a().c(qg,a.j)})}}};m.Fk=function(a){this.Ob[a.id]&&(G(this.Ob[a.id]),Kb(this.Ob,a.id),T.a().c(uf))};
m.qk=function(){if(!A(this.Ta,"show")){Pd(D("select-program",this.Ta),1);x(this.Ta,"show");var a=this.pc,b=rg(a);a.Cf=j;a.b().focus();!b&&!sg&&(a.b().value=a.Na);a.b().select();sg||(a.t&&ud(a.t,a.b(),"click",a.wf),M(a.qj,10,a))}};function og(a){z(a.Ta,"show");a.pc.Ra("");D("page2",a.b()).innerHTML=""}
m.Sf=function(){var a=D("select-content",this.b()),b=D("page2",this.b());if(!Xb(b).length)try{var c;var d=this.pc.L(),f=tg.exec(d);f?c=new ug(f[1]||f[2],i,i):e(Error("failed to parse video id from youtube url: "+d));W(za("https://gdata.youtube.com/feeds/api/videos/%s?v=2&alt=json",c.el),r(function(d){d=vg(wg(d.target)).entry;mc(b,Df,{title:d.title.$t,Yk:d.media$group.media$thumbnail[0].url});d=new mf("YES");d.h(D("button",b));(new se(a,[0,0],[160,0],300,xg)).play();Q(this.m(),d,"action",r(this.pk,
this,c))},this))}catch(g){}};m.pk=function(a){W("/_addprogram",r(function(a){a=Yf(a.target);a.id&&(a=new Nf(a),this.r.c(Uf,a))},this),"POST","channel_id="+this.r.id+"&url="+a.fd);Pd(D("button",this.Ta),0);P(D("added",this.Ta),j);Pd(D("select-program",this.Ta),0);M(r(function(){og(this)},this),3E3)};
m.update=function(){!this.Jd&&this.r.ma.length&&this.r.c(sf,j);this.Jd=!!this.r.ma.length;B(this.b(),"offline",!this.Jd);if(this.r.ma.length){if(this.Di){var a="",b=R(this.Od).width,c,d,f,g=(s()-this.P)/1E3,h=Xa(this.jh,0,Math.floor(g/40));u(h,function(n,q){c=n.x/this.cd*b;d=60-60*(n.y/this.Lf);q==h.length-1&&(c=g/this.cd*b);c+=6;q?(a+="L"+[c-30,f],a+="C"+[c-20,f,c-10,d,c,d]):a+="M"+[c,d]+"R";f=d},this);this.tj.attr({path:a+"L"+c+",60 10,60z"})}if(this.u&&0<this.ff){var n=this.Vc[this.u],q=Gd(n).x+
Gd(C("guide")).x,n=D("title",n);Ed(n,5>q?-q+10:5)}else this.ff++;Gb(this.r.hd,function(a){if(this.r.g()&&!a.ed&&this.Ob[a.j.id]){var b=Math.max(a.yg.getTime(),this.P.getTime());R(this.Od);var c=Math.floor((s()-b)/1E3*this.ea),d=U.a().g();a.j.id==V.a().q.id&&d&&(c=Math.floor((d.time.getTime()+1E3*U.a().re()-b)/1E3*this.ea));this.Ob[a.j.id].lastChild&&Md(this.Ob[a.j.id].lastChild,c)}},this);q=R(this.vf).height;n=R(this.Nb).height;q-=n;0>q&&zd(this.vf,"margin-top",-q+"px");Ld(this.fi,R(this.b()).height-
1)}};function V(){N.call(this);this.Ti={};this.Tf=[]}t(V,N);ka(V);V.prototype.add=function(a){this.Ti[a.id]=a};V.prototype.get=function(a){return this.Ti[a]};function yg(a,b){var c=a.get(b.id);c||(c=new Pf(b),a.add(c));return c};function zg(a){if("function"==typeof a.se)return a.se();if(p(a))return a.split("");if(na(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return Hb(a)}function Ag(a,b,c){if("function"==typeof a.forEach)a.forEach(b,c);else if(na(a)||p(a))u(a,b,c);else{var d;if("function"==typeof a.uf)d=a.uf();else if("function"!=typeof a.se)if(na(a)||p(a)){d=[];for(var f=a.length,g=0;g<f;g++)d.push(g)}else d=Ib(a);else d=i;for(var f=zg(a),g=f.length,h=0;h<g;h++)b.call(c,f[h],d&&d[h],a)}};function Bg(a,b){this.Db={};this.O=[];var c=arguments.length;if(1<c){c%2&&e(Error("Uneven number of arguments"));for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else if(a){a instanceof Bg?(c=a.uf(),d=a.se()):(c=Ib(a),d=Hb(a));for(var f=0;f<c.length;f++)this.set(c[f],d[f])}}m=Bg.prototype;m.S=0;m.Ui=0;m.se=function(){Cg(this);for(var a=[],b=0;b<this.O.length;b++)a.push(this.Db[this.O[b]]);return a};m.uf=function(){Cg(this);return this.O.concat()};
m.clear=function(){this.Db={};this.Ui=this.S=this.O.length=0};function Cg(a){if(a.S!=a.O.length){for(var b=0,c=0;b<a.O.length;){var d=a.O[b];Object.prototype.hasOwnProperty.call(a.Db,d)&&(a.O[c++]=d);b++}a.O.length=c}if(a.S!=a.O.length){for(var f={},c=b=0;b<a.O.length;)d=a.O[b],Object.prototype.hasOwnProperty.call(f,d)||(a.O[c++]=d,f[d]=1),b++;a.O.length=c}}m.get=function(a,b){return Object.prototype.hasOwnProperty.call(this.Db,a)?this.Db[a]:b};
m.set=function(a,b){Object.prototype.hasOwnProperty.call(this.Db,a)||(this.S++,this.O.push(a),this.Ui++);this.Db[a]=b};m.clone=function(){return new Bg(this)};function Dg(a){return Eg(a||arguments.callee.caller,[])}
function Eg(a,b){var c=[];if(Qa(b,a))c.push("[...circular reference...]");else if(a&&50>b.length){c.push(Fg(a)+"(");for(var d=a.arguments,f=0;f<d.length;f++){0<f&&c.push(", ");var g;g=d[f];switch(typeof g){case "object":g=g?"object":"null";break;case "string":break;case "number":g=String(g);break;case "boolean":g=g?"true":"false";break;case "function":g=(g=Fg(g))?g:"[fn]";break;default:g=typeof g}40<g.length&&(g=g.substr(0,40)+"...");c.push(g)}b.push(a);c.push(")\n");try{c.push(Eg(a.caller,b))}catch(h){c.push("[exception trying to get caller]\n")}}else a?
c.push("[...long stack...]"):c.push("[end]");return c.join("")}function Fg(a){if(Gg[a])return Gg[a];a=String(a);if(!Gg[a]){var b=/function ([^\(]+)/.exec(a);Gg[a]=b?b[1]:"[Anonymous]"}return Gg[a]}var Gg={};function Hg(a,b,c,d,f){this.reset(a,b,c,d,f)}Hg.prototype.Kk=0;Hg.prototype.ih=k;Hg.prototype.hh=k;var Ig=0;Hg.prototype.reset=function(a,b,c,d,f){this.Kk="number"==typeof f?f:Ig++;this.jm=d||s();this.Gd=a;this.Yj=b;this.$l=c;delete this.ih;delete this.hh};Hg.prototype.Bi=ba("Gd");function Jg(a){this.Zj=a}Jg.prototype.I=k;Jg.prototype.Gd=k;Jg.prototype.$=k;Jg.prototype.Ch=k;function Kg(a,b){this.name=a;this.value=b}Kg.prototype.toString=ca("name");var Lg=new Kg("SEVERE",1E3),Mg=new Kg("WARNING",900),Ng=new Kg("INFO",800),Og=new Kg("CONFIG",700),Pg=new Kg("FINE",500);m=Jg.prototype;m.getParent=ca("I");m.rh=function(){this.$||(this.$={});return this.$};m.Bi=ba("Gd");function Qg(a){return a.Gd?a.Gd:a.I?Qg(a.I):k}
m.log=function(a,b,c){if(a.value>=Qg(this).value){a=this.sj(a,b,c);b="log:"+a.Yj;fa.console&&(fa.console.timeStamp?fa.console.timeStamp(b):fa.console.markTimeline&&fa.console.markTimeline(b));fa.msWriteProfilerMark&&fa.msWriteProfilerMark(b);for(b=this;b;){var c=b,d=a;if(c.Ch)for(var f=0,g=i;g=c.Ch[f];f++)g(d);b=b.getParent()}}};
m.sj=function(a,b,c){var d=new Hg(a,String(b),this.Zj);if(c){d.ih=c;var f;var g=arguments.callee.caller;try{var h;var n=ia("window.location.href");if(p(c))h={message:c,name:"Unknown error",lineNumber:"Not available",fileName:n,stack:"Not available"};else{var q,v,y=l;try{q=c.lineNumber||c.Zl||"Not available"}catch(J){q="Not available",y=j}try{v=c.fileName||c.filename||c.sourceURL||n}catch(Z){v="Not available",y=j}h=y||!c.lineNumber||!c.fileName||!c.stack?{message:c.message,name:c.name,lineNumber:q,
fileName:v,stack:c.stack||"Not available"}:c}f="Message: "+Ba(h.message)+'\nUrl: <a href="view-source:'+h.fileName+'" target="_new">'+h.fileName+"</a>\nLine: "+h.lineNumber+"\n\nBrowser stack:\n"+Ba(h.stack+"-> ")+"[end]\n\nJS stack traversal:\n"+Ba(Dg(g)+"-> ")}catch(Y){f="Exception trying to expose exception! You win, we lose. "+Y}d.hh=f}return d};function Rg(a,b){a.log(Lg,b,i)}m.info=function(a,b){this.log(Ng,a,b)};function Sg(a,b){a.log(Pg,b,i)}var Tg={},Ug=k;
function Vg(a){Ug||(Ug=new Jg(""),Tg[""]=Ug,Ug.Bi(Og));var b;if(!(b=Tg[a])){b=new Jg(a);var c=a.lastIndexOf("."),d=a.substr(c+1),c=Vg(a.substr(0,c));c.rh()[d]=b;b.I=c;Tg[a]=b}return b};function vg(a){a=String(a);if(/^\s*$/.test(a)?0:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x10-\x1f\x80-\x9f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,"")))try{return eval("("+a+")")}catch(b){}e(Error("Invalid JSON string: "+a))};function Wg(){}Wg.prototype.ee=k;var Xg;function Yg(){}t(Yg,Wg);function Zg(a){return(a=$g(a))?new ActiveXObject(a):new XMLHttpRequest}function ah(a){var b={};$g(a)&&(b[0]=j,b[1]=j);return b}
function $g(a){if(!a.Hh&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var b=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],c=0;c<b.length;c++){var d=b[c];try{return new ActiveXObject(d),a.Hh=d}catch(f){}}e(Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed"))}return a.Hh}Xg=new Yg;var bh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([\\w\\d\\-\\u0100-\\uffff.%]*)(?::([0-9]+))?)?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");function ch(a){K.call(this);this.headers=new Bg;this.jd=a||k}t(ch,Rc);ch.prototype.D=Vg("goog.net.XhrIo");var dh=/^https?$/i,eh=[];function W(a,b,c,d){var f=new ch;eh.push(f);b&&L(f,"complete",b);L(f,"ready",wa(fh,f));f.send(a,c,d,i)}function fh(a){a.ba();Ra(eh,a)}m=ch.prototype;m.tb=l;m.A=k;m.Ve=k;m.Fd="";m.Vh="";m.Dd=0;m.Ed="";m.qf=l;m.we=l;m.Df=l;m.fc=l;m.Re=0;m.qc=k;m.Je="";m.gl=l;
m.send=function(a,b,c,d){this.A&&e(Error("[goog.net.XhrIo] Object is active with another request"));b=b?b.toUpperCase():"GET";this.Fd=a;this.Ed="";this.Dd=0;this.Vh=b;this.qf=l;this.tb=j;this.A=this.jd?Zg(this.jd):Zg(Xg);this.Ve=this.jd?this.jd.ee||(this.jd.ee=ah(this.jd)):Xg.ee||(Xg.ee=ah(Xg));this.A.onreadystatechange=r(this.ki,this);try{Sg(this.D,gh(this,"Opening Xhr")),this.Df=j,this.A.open(b,a,j),this.Df=l}catch(f){Sg(this.D,gh(this,"Error opening Xhr: "+f.message));hh(this,f);return}var a=c||
"",g=this.headers.clone();d&&Ag(d,function(a,b){g.set(b,a)});d=fa.FormData&&a instanceof fa.FormData;if(b="POST"==b)b=!Object.prototype.hasOwnProperty.call(g.Db,"Content-Type")&&!d;b&&g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");Ag(g,function(a,b){this.A.setRequestHeader(b,a)},this);this.Je&&(this.A.responseType=this.Je);"withCredentials"in this.A&&(this.A.withCredentials=this.gl);try{this.qc&&(Tc.clearTimeout(this.qc),this.qc=k),0<this.Re&&(Sg(this.D,gh(this,"Will abort after "+
this.Re+"ms if incomplete")),this.qc=Tc.setTimeout(r(this.$k,this),this.Re)),Sg(this.D,gh(this,"Sending request")),this.we=j,this.A.send(a),this.we=l}catch(h){Sg(this.D,gh(this,"Send error: "+h.message)),hh(this,h)}};m.$k=function(){"undefined"!=typeof ea&&this.A&&(this.Ed="Timed out after "+this.Re+"ms, aborting",this.Dd=8,Sg(this.D,gh(this,this.Ed)),this.dispatchEvent("timeout"),this.abort(8))};function hh(a,b){a.tb=l;a.A&&(a.fc=j,a.A.abort(),a.fc=l);a.Ed=b;a.Dd=5;ih(a);jh(a)}
function ih(a){a.qf||(a.qf=j,a.dispatchEvent("complete"),a.dispatchEvent("error"))}m.abort=function(a){this.A&&this.tb&&(Sg(this.D,gh(this,"Aborting")),this.tb=l,this.fc=j,this.A.abort(),this.fc=l,this.Dd=a||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),jh(this))};m.n=function(){this.A&&(this.tb&&(this.tb=l,this.fc=j,this.A.abort(),this.fc=l),jh(this,j));ch.d.n.call(this)};m.ki=function(){!this.Df&&!this.we&&!this.fc?this.mk():kh(this)};m.mk=function(){kh(this)};
function kh(a){if(a.tb&&"undefined"!=typeof ea)if(a.Ve[1]&&4==lh(a)&&2==mh(a))Sg(a.D,gh(a,"Local request error detected and ignored"));else if(a.we&&4==lh(a))Tc.setTimeout(r(a.ki,a),0);else if(a.dispatchEvent("readystatechange"),4==lh(a)){Sg(a.D,gh(a,"Request complete"));a.tb=l;try{var b=mh(a),c,d;a:switch(b){case 200:case 201:case 202:case 204:case 304:case 1223:d=j;break a;default:d=l}if(!(c=d)){var f;if(f=0===b){var g=String(a.Fd).match(bh)[1]||k;if(!g&&self.location)var h=self.location.protocol,
g=h.substr(0,h.length-1);f=!dh.test(g?g.toLowerCase():"")}c=f}if(c)a.dispatchEvent("complete"),a.dispatchEvent("success");else{a.Dd=6;var n;try{n=2<lh(a)?a.A.statusText:""}catch(q){Sg(a.D,"Can not get status: "+q.message),n=""}a.Ed=n+" ["+mh(a)+"]";ih(a)}}finally{jh(a)}}}
function jh(a,b){if(a.A){var c=a.A,d=a.Ve[0]?ja:k;a.A=k;a.Ve=k;a.qc&&(Tc.clearTimeout(a.qc),a.qc=k);b||a.dispatchEvent("ready");try{c.onreadystatechange=d}catch(f){Rg(a.D,"Problem encountered resetting onreadystatechange: "+f.message)}}}m.zb=function(){return!!this.A};function lh(a){return a.A?a.A.readyState:0}function mh(a){try{return 2<lh(a)?a.A.status:-1}catch(b){return a.D.log(Mg,"Can not get status: "+b.message,i),-1}}function Yf(a){if(a.A)return vg(a.A.responseText)}
function wg(a){try{if(!a.A)return k;if("response"in a.A)return a.A.response;switch(a.Je){case "":case "text":return a.A.responseText;case "arraybuffer":if("mozResponseArrayBuffer"in a.A)return a.A.mozResponseArrayBuffer}Rg(a.D,"Response type "+a.Je+" is not supported on this browser");return k}catch(b){return Sg(a.D,"Can not get response: "+b.message),k}}function gh(a,b){return b+" ["+a.Vh+" "+a.Fd+" "+mh(a)+"]"};function T(){N.call(this);this.xc=[];this.wc={};this.subscribe(tf,this.Ub,this);this.subscribe(vf,this.Cg,this)}t(T,N);ka(T);T.prototype.get=function(a){return this.wc[a]};function zf(a,b){if(a.l&&a.l.g()&&(b&&!a.l.C||!b))return a.l;if(a.Cd&&a.Cd.g()&&(b&&!a.Cd.C||!b))return a.Cd;for(var c=k,d=k,f=0;!d&&f<a.xc.length;)d=(c=!a.xc[f].C?a.xc[f]:k)&&c.g(),f++;return c}T.prototype.Jf=function(a){Gb(a,r(function(a){var c=new Tf(a);this.xc.push(c);this.wc[a.id]=c;c.C&&(this.C=c)},this))};
T.prototype.Ub=function(a,b){if(a&&!this.l||a&&this.l&&this.l.id!=a.id){this.Cd=this.l;this.l=a;this.Cg(a.g());var c=a.g(),c=c&&!Jb(c.media.hc);W("/_changechannel",ie(),"POST","channel="+a.id+"&friends="+c+(b?"&forced=true":""));Sf.a().Ub(a,this.Cd)}};T.prototype.Cg=function(a){this.l&&(this.u&&u(this.l.hd,function(a){Kb(this.u.media.hc,a.j.id)},this),a&&(this.u=a,u(this.l.hd,function(b){b.ed||(a.media.hc[b.j.id]=b.j)})))};
function yf(){var a=T.a();if(!a.C){var b=V.a().q;a.C=new Tf({id:b.id,name:b.name.split(" ")[0]+"'s Channel"})}return a.C}var tf="change-channel",vf="next-program",uf="resize";function nh(){S.call(this);this.ec=new mf("Guide");df(this.ec,16,j);this.ob=new mf("Sidebar");df(this.ob,16,j);this.fg=new mf("Restart");this.Aa=new mf("Play");df(this.Aa,16,j);this.ae=new mf("Volume");df(this.ae,16,j);this.vc=new mf("Admin");df(this.vc,16,j);this.xe=new mf("Info")}t(nh,S);
nh.prototype.v=function(){nh.d.v.call(this);this.ti=D("right",this.b());this.Pa=D("progress",this.b());this.Ai=D("seek",this.b());this.kb=D("elapsed",this.b());this.bl=D("title",this.b());this.gh=D("duration",this.b());this.Ll=D("current-time",this.b());Ce(this,this.ec);this.ec.h(C("guide-toggle"));cf(this.ec,A(this.b(),"guide-toggled"));Ce(this,this.ob);this.ob.h(C("sidebar-toggle"));cf(this.ob,A(this.b(),"sidebar-toggled"));Ce(this,this.fg);this.fg.h(D("restart",this.b()));Ce(this,this.Aa);this.Aa.h(D("play",
this.b()));Ce(this,this.ae);this.ae.h(D("volume",this.b()));Ce(this,this.xe);this.xe.h(C("info-toggle"));P(this.xe.b(),V.a().q.We!=Qf);Ce(this,this.vc);this.vc.h(C("admin-toggle"));P(this.vc.b(),V.a().q.We==Qf);var a=new mg(this.Xk,1E3,this);this.resize();this.o=new Xd(this.Ai);this.o.mb(l);var b=this.Pa,c=this.kb,d=this.gh;this.o.td=function(a){if(0<a&&a<R(b).width){this.target.style.left=a+"px";c.style.width=a+"px";var a=a/R(b).width,g=U.a().g().media.duration;bc(d,oh(Math.round(a*g).toString())+
" / "+oh(g.toString()))}};Q(Q(Q(Q(Q(Q(Q(Q(Q(Q(Q(Q(this.m(),window,"resize",r(this.resize,this)),this.ec,"action",r(function(){a.sf()},this)),this.ob,"action",r(function(a){a.stopPropagation();O.a().c(Zc,Me(this.ob))},this)),this.fg,"action",r(function(a){a.stopPropagation();U.a().g()&&(a=Of(U.a().g().media),U.a().c(wf,a),this.resize())},this)),this.Aa,"action",r(function(a){a.stopPropagation();O.a().c(ad,!Me(this.Aa));this.resize()},this)),this.xe,"action",r(function(a){a.stopPropagation();O.a().c("toggle-info")},
this)),this.ae,"action",r(function(a){a.stopPropagation();O.a().c("mute",Me(this.ae))},this)),this.vc,"action",r(function(a){a.stopPropagation();O.a().c("toggle-admin",Me(this.vc));this.resize()},this)),Vc.a().od,Uc,r(function(){if(U.a().g()){var a=U.a().getCurrentTime()/U.a().g().media.duration;3>U.a().g().media.duration-U.a().getCurrentTime()&&U.a().c(ph);T.a().l.C&&!A(this.Pa,"drag")&&(bc(this.gh,(U.a().getCurrentTime()?oh(U.a().getCurrentTime().toString())+" / ":"")+oh(U.a().g().media.duration.toString())),
Md(this.kb,this.cg?a*this.cg:0))}},this)),this.Pa,"click",r(function(a){!A(this.Pa,"drag")&&U.a().g()&&(a=a.offsetX/R(this.Pa).width*U.a().g().media.duration,z(this.kb,"animate"),U.a().c(qh,a),M(r(function(){x(this.kb,"animate")},this),1E3))},this)),this.o,"beforedrag",r(function(){x(this.Pa,"drag")},this)),this.o,"end",r(function(a){this.Ai.style.left="";a=a.left/R(this.Pa).width*U.a().g().media.duration;z(this.kb,"animate");U.a().c(qh,a);M(r(function(){z(this.Pa,"drag");x(this.kb,"animate")},this),
1E3)},this));U.a().subscribe(wf,function(a){rh(this,a,j)},this);U.a().subscribe(sh,function(){this.o.mb(j);this.resize()},this);T.a().subscribe(tf,function(){z(this.b(),"window");M(r(this.resize,this),1E3)},this);T.a().subscribe(vf,function(){this.resize()},this);O.a().subscribe($c,this.Se,this);O.a().subscribe(Zc,function(a){cf(this.ob,a);B(this.b(),"sidebar-toggled",a);this.resize()},this);O.a().subscribe(ad,function(a){cf(this.Aa,!a)},this);U.a().subscribe(sh,function(){T.a().l.C&&U.a().g()&&this.resize()},
this)};function rh(a,b,c){bc(a.bl,b.media.name.toUpperCase());c&&(z(a.kb,"animate"),Md(a.kb,0),M(r(function(){x(this.kb,"animate")},a),1E3))}nh.prototype.Xk=function(){var a=Me(this.ec);O.a().c($c,a)};nh.prototype.Se=function(a){cf(this.ec,a);a&&(z(this.b(),"window"),z(this.b(),"collapsed"),M(r(this.resize,this)));M(r(function(){B(this.b(),"guide-toggled",a);a||(T.a().l&&T.a().l.g(),x(this.b(),"collapsed"),this.resize())},this),a?0:600)};
nh.prototype.resize=function(){if(T.a().l.C)U.a().g()&&(P(this.Pa,j),rh(this,U.a().g()),this.cg=E().width-(Me(this.ob)?580:260)-50,Md(this.Pa,this.cg));else{P(this.Pa,l);var a=C("guide"),b=D("current",a),b=Rb("program",b),a=(b=b[b.length-1])?Gd(a).x+Gd(b).x+R(b).width+210:9999999,a=Math.min(E().width-200,Math.max(100,E().width-a)),c=Math.max(100,Me(this.ob)&&250<a?a-247:a+5),d=A(this.b(),"collapsed")&&!!b&&a<E().width-203;d&&this.Hk!=c?(this.Hk=c,Md(this.ti,c)):this.ti.style.width="";M(r(function(){B(this.b(),
"window",d&&A(this.b(),"collapsed"))},this),400)}};function th(a){return(a.link?'<a href="'+I(a.link)+'">':"")+'<div class="note'+(a.Bf?" pic":"")+'">'+(a.Bf?'<div class="picture"><img class="image" src='+I(a.Bf)+' style="display: none"/></div>':"")+'<div class="action">'+(a.j?I(a.j.name)+" ":"")+I(a.action)+'</div><div class="content">'+I(a.content)+'</div><div class="close"></div></div>'+(a.link?"</a>":"")};function uh(){S.call(this)}t(uh,S);uh.prototype.J=function(){this.f=F("div",{id:"notify"})};uh.prototype.H=function(a){uh.d.H.call(this,a);Ef.a().subscribe("flash",function(a,c,d,f,g){this.Ei(j,a,c,d,f,g)},this);Ef.a().subscribe("show",function(a,c,d,f,g){this.Ei(l,a,c,d,f,g)},this)};
uh.prototype.Ei=function(a,b,c,d,f,g){var h=H(th,{action:b,content:c,j:d,Bf:f,link:g}),n=D("image",h);D("close",h);Q(Q(Q(this.m(),D("close",h),"click",function(a){a.preventDefault();a.stopPropagation();G(h)}),h,"click",function(){G(h)}),n,"load",function(){P(n,j);M(function(){n.style.marginLeft=-1*n.clientWidth/2+"px";n.style.marginTop=-1*n.clientHeight/2+"px"})});this.b().appendChild(h);var q=D("note",h);M(function(){x(q,"show");a?M(function(){z(q,"show");x(q,"fade-out");M(function(){G(h)},5100)},
3E3):x(q,"dim")})};function U(){N.call(this);this.subscribe(wf,function(a){yf().c(Uf,a);W("/_addprogram",ie(),"POST","channel_id="+T.a().C.id+"&media_id="+a.media.id+"&async=true");Zf(Sf.a(),a.media)},this);this.subscribe(sh,function(a){W("/_started",ie(),"POST","media_id="+a.id)},this)}t(U,N);ka(U);U.prototype.lg=ba("w");U.prototype.g=ca("u");U.prototype.getCurrentTime=function(){return this.w&&this.w.getCurrentTime?this.w.getCurrentTime():0};
U.prototype.re=function(){return this.w&&this.w.getCurrentTime?this.w.getCurrentTime():0};var ph="before-end",wf="play-async",sh="playing",qh="seek";function vh(){fe.call(this);this.queue=[]}t(vh,fe);vh.prototype.add=function(a){Qa(this.queue,a)||(this.queue.push(a),L(a,"finish",this.bk,l,this))};vh.prototype.n=function(){u(this.queue,function(a){a.ba()});this.queue.length=0;vh.d.n.call(this)};function wh(){vh.call(this);this.Ia=0}t(wh,vh);
wh.prototype.play=function(a){if(0==this.queue.length)return l;if(a||this.i==ge)this.Ia<this.queue.length&&this.queue[this.Ia].i!=ge&&this.queue[this.Ia].stop(l),this.Ia=0,this.Fb();else if(1==this.i)return l;this.pa("play");-1==this.i&&this.pa("resume");this.startTime=s();this.wd=k;this.i=1;this.queue[this.Ia].play(a);return j};
wh.prototype.stop=function(a){this.i=ge;this.wd=s();if(a)for(a=this.Ia;a<this.queue.length;++a){var b=this.queue[a];b.i==ge&&b.play();b.i==ge||b.stop(j)}else this.Ia<this.queue.length&&this.queue[this.Ia].stop(l);this.pa("stop");this.Gb()};wh.prototype.bk=function(){1==this.i&&(this.Ia++,this.Ia<this.queue.length?this.queue[this.Ia].play():(this.wd=s(),this.i=ge,this.pa("finish"),this.Gb()))};function xh(a){return a*a*a}function xg(a){return 1-Math.pow(1-a,3)};function yh(){S.call(this)}t(yh,S);m=yh.prototype;
m.v=function(){yh.d.v.call(this);(this.u=(this.T=T.a().l)&&this.T.g())&&s();this.cc=D("fullscreen",this.b());var a=D("expand",this.b());P(this.cc,this.Ii());this.Pe=C("stagecover");this.bi=D("message",this.Pe);this.N=D("spinner",this.Pe);zh(this);this.u?Ah(this,this.u):U.a().c("no-media");Q(Q(Q(Q(Q(Q(Q(Q(Q(this.m(),window,"resize",r(this.resize,this)),document,"webkitfullscreenchange",r(function(){Db(this.cc,"full")},this)),document,"mozfullscreenchange",r(function(){Db(this.cc,"full")},this)),document,
"fullscreenchange",r(function(){Db(this.cc,"full")},this)),this.cc,"click",r(function(a){if(A(this.cc,"full"))document.bj&&document.bj(),document.webkitCancelFullScreen&&document.webkitCancelFullScreen(),document.mozCancelFullScreen&&document.mozCancelFullScreen();else{var c=D("main");c.si&&c.si();c.webkitRequestFullScreen&&c.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT);c.mozRequestFullScreen&&c.mozRequestFullScreen()}a.stopPropagation();a.preventDefault()},this)),this.b(),"dblclick",r(this.Mi,
this)),a,"click",r(this.Mi,this)),this.b(),"mousemove",r(function(a){var c=a.offsetX/this.xa,a=a.offsetY/this.Ga;if(0.7<c&&1>c&&0.7<a&&1>a&&(this.Nd==YT.PlayerState.PLAYING||this.Nd==YT.PlayerState.PAUSED))P(this.Pe,l),M(r(function(){P(this.Pe,j)},this),500)},this)),this.b(),"click",r(function(a){if(!(a.offsetX>R(this.b()).width/2&&a.offsetY>R(this.b()).height/2)&&this.w&&this.w.getPlayerState)switch(this.w.getPlayerState()){case YT.PlayerState.PLAYING:O.a().c(ad,l);break;case YT.PlayerState.PAUSED:O.a().c(ad,
j)}},this));T.a().subscribe(tf,this.Ub,this);T.a().subscribe(vf,function(a){this.u=a;Ah(this,a);zh(this)},this);U.a().subscribe(wf,this.Yf,this);U.a().subscribe(qh,this.Jk,this);U.a().subscribe(ph,function(){zh(this,j)},this);O.a().subscribe(Zc,function(a){this.resize(a)},this);O.a().subscribe($c,function(){M(r(this.resize,this))},this);O.a().subscribe(ad,function(a){a?this.w.playVideo():this.w.pauseVideo();var a=D(a?"play":"pause",this.b()),c=new wh;c.add(new ve(a,250,xg));c.add(new ue(a,250,xh));
c.play()},this);O.a().subscribe("mute",function(a){this.w&&(a?this.w.mute():this.w.unMute())},this);O.a().subscribe("restart",function(){this.w.seekTo(0)},this);this.resize()};m.Ii=function(){var a=D("main");return!(!a.si&&!a.webkitRequestFullScreen&&!a.mozRequestFullScreen)};m.Mi=function(a){a.preventDefault();a.stopPropagation();X.a();a=!A(C("sidebar"),"toggled");O.a().c(Zc,a);O.a().c($c,a)};
function Ah(a,b){U.a().u=b;a.Uj!=b.id&&(Ef.a().c("flash","Now playing",b.media.name,i,b.media.tg,"#info:"+b.media.id),a.Uj=b.id);a.play(b.media)}
m.play=function(a,b){!this.w||!this.w.loadVideoById?(this.w=new YT.Player("ytplayer",{height:E().height-40,width:E().width,videoId:a.Kc,playerVars:{controls:0,showinfo:0,iv_load_policy:3,modestbranding:1,wmode:"opaque",origin:HOST_URL,enablejsapi:1},events:{onStateChange:r(this.wk,this),onReady:r(this.jk,this),onError:r(this.ik,this)}}),U.a().lg(this.w)):(this.w.cueVideoById(a.Kc),M(r(function(){var c=b||0;!this.w.getPlayerState()&&4>c&&this.play(a,++c)},this),1E3))};
m.resize=function(){var a=C("ytplayer"),b=C("stagecover"),c=D("message",b),d=A(C("sidebar"),"toggled")?320:0;this.Ga=E().height-40;this.xa=E().width-d;Ld(a,E().height-40);Md(a,E().width-d);Ld(b,E().height-40);Md(b,E().width-d);a=R(c);zd(c,{"margin-left":-a.width/2+"px","margin-top":-a.height/2+"px"});B(this.cc,"full",this.Ii&&(document.fullScreen||document.webkitIsFullScreen||document.bm))};m.Ub=function(a){if(a=a.g())this.u=a,Ah(this,a);zh(this)};
m.Yf=function(a){this.u=a;Ah(this,a);zh(this);W("/_optin",ie(),"POST","media_id="+this.u.media.id)};m.Jk=function(a){this.w.seekTo&&this.w.seekTo(a,j)};
m.wk=function(a){this.Nd=a.data;zh(this);switch(a.data){case YT.PlayerState.CUED:a=this.u.async?this.u.seek:(s()-this.u.time.getTime())/1E3;this.w.seekTo(a);this.w.playVideo();O.a().c(ad,j);break;case YT.PlayerState.PLAYING:U.a().c(sh,this.u.media);break;case YT.PlayerState.ENDED:V.a().q.ke.Me(this.u.media),(a=T.a().l.g())?T.a().c(vf,a):(U.a().u=k,T.a().c(tf,zf(T.a()),j))}};
m.jk=function(){M(r(function(){if(this.w&&(!this.w.getPlayerState||!this.w.getPlayerState()))Ah(this,this.u);else if(this.w.getPlayerState()){var a=this.u.async?this.u.seek:(s()-this.u.time.getTime())/1E3;this.w.seekTo(a);this.w.playVideo()}},this),1E3)};m.ik=function(){U.a().c("no-media")};
function zh(a,b){var c=C("stagecover"),d=a.u?U.a().getCurrentTime():0;!a.u||a.u&&d>a.u.media.duration?(U.a().c("no-media"),bc(a.bi.firstChild,Bh),P(a.N,l),x(c,"covered")):a.Nd!=YT.PlayerState.PLAYING&&a.Nd!=YT.PlayerState.PAUSED||b?(bc(a.bi.firstChild,Ch),P(a.N,j),x(c,"covered")):(P(a.N,l),z(c,"covered"));Pd(c,a.Nd==YT.PlayerState.BUFFERING?0.9:1);a.resize()}var Bh="THIS CHANNEL IS CURRENTLY OFFLINE",Ch="LOADING STORY";function kg(a,b){S.call(this,b);this.Na=a||""}t(kg,S);kg.prototype.bb=k;var sg="placeholder"in document.createElement("input");m=kg.prototype;m.zd=l;m.J=function(){this.f=this.La().J("input",{type:"text"})};m.H=function(a){kg.d.H.call(this,a);this.Na||(this.Na=a.getAttribute("label")||"");var b;a:{var c=Qb(a);try{b=c&&c.activeElement;break a}catch(d){}b=k}b==a&&(this.zd=j,z(this.b(),this.kd));sg?this.b().placeholder=this.Na:this.b().setAttribute("aria-label",this.Na)};
m.v=function(){kg.d.v.call(this);var a=new sd(this);Q(a,this.b(),"focus",this.wf);Q(a,this.b(),"blur",this.yj);sg?this.t=a:(ib&&Q(a,this.b(),["keypress","keydown","keyup"],this.Ej),Q(a,Qb(this.b())?Qb(this.b()).parentWindow||Qb(this.b()).defaultView:window,"load",this.Mj),this.t=a,Dh(this));Eh(this);this.b().Sj=this};m.ac=function(){kg.d.ac.call(this);this.t&&(this.t.ba(),this.t=k);this.b().Sj=k};function Dh(a){!a.rj&&(a.t&&a.b().form)&&(Q(a.t,a.b().form,"submit",a.Hj),a.rj=j)}
m.n=function(){kg.d.n.call(this);this.t&&(this.t.ba(),this.t=k)};m.kd="label-input-label";m.wf=function(){this.zd=j;z(this.b(),this.kd);if(!sg&&!rg(this)&&!this.Cf){var a=this,b=function(){a.b().value=""};w?M(b,10):b()}};m.yj=function(){sg||(vd(this.t,this.b(),"click",this.wf),this.bb=k);this.zd=l;Eh(this)};m.Ej=function(a){27==a.keyCode&&("keydown"==a.type?this.bb=this.b().value:"keypress"==a.type?this.b().value=this.bb:"keyup"==a.type&&(this.bb=k),a.preventDefault())};
m.Hj=function(){rg(this)||(this.b().value="",M(this.xj,10,this))};m.xj=function(){rg(this)||(this.b().value=this.Na)};m.Mj=function(){Eh(this)};function rg(a){return!!a.b()&&""!=a.b().value&&a.b().value!=a.Na}m.clear=function(){this.b().value="";this.bb!=k&&(this.bb="")};m.reset=function(){rg(this)&&(this.clear(),Eh(this))};m.Ra=function(a){this.bb!=k&&(this.bb=a);this.b().value=a;Eh(this)};m.L=function(){return this.bb!=k?this.bb:rg(this)?this.b().value:""};
function Eh(a){sg?a.b().placeholder!=a.Na&&(a.b().placeholder=a.Na):(Dh(a),a.b().setAttribute("aria-label",a.Na));rg(a)?z(a.b(),a.kd):(!a.Cf&&!a.zd&&x(a.b(),a.kd),sg||M(a.Gk,10,a))}m.mb=function(a){this.b().disabled=!a;B(this.b(),this.kd+"-disabled",!a)};m.isEnabled=function(){return!this.b().disabled};m.qj=function(){this.Cf=l};m.Gk=function(){this.b()&&(!rg(this)&&!this.zd)&&(this.b().value=this.Na)};function Fh(a,b,c){K.call(this);this.Cb=a;this.M=b;this.Ma=c;this.df=r(this.sk,this)}t(Fh,K);var mg=Fh;m=Fh.prototype;m.Oe=l;m.ni=0;m.oa=k;m.sf=function(){!this.oa&&!this.ni?this.ud():this.Oe=j};m.stop=function(){this.oa&&(Tc.clearTimeout(this.oa),this.oa=k,this.Oe=l)};m.n=function(){Fh.d.n.call(this);this.stop()};m.sk=function(){this.oa=k;this.Oe&&!this.ni&&(this.Oe=l,this.ud())};m.ud=function(){this.oa=M(this.df,this.M);this.Cb.call(this.Ma)};function Gh(a,b){K.call(this);this.Cb=a;this.Ma=b;this.$a=new he(r(this.rk,this),0,this)}t(Gh,K);m=Gh.prototype;m.M=0;m.gg=0;m.Mh=l;m.n=function(){this.$a.ba();delete this.Cb;delete this.Ma;Gh.d.n.call(this)};m.start=function(a,b){this.stop();this.Mh=l;var c=b||0;this.M=Math.max(a||0,0);this.gg=0>c?-1:s()+c;this.$a.start(0>c?this.M:Math.min(this.M,c))};m.stop=function(){this.$a.stop()};m.zb=function(){return this.$a.zb()};
m.rk=function(){if(this.Cb.call(this.Ma))this.Mh=j;else if(0>this.gg)this.$a.start(this.M);else{var a=this.gg-s();0>=a||this.$a.start(Math.min(this.M,a))}};function lg(a){K.call(this);this.f=a;this.Id=this.f.value;this.t=new sd(this);this.cb=s();jb||w||ib&&ub("1.9")?Q(this.t,a,"paste",this.Dc):Q(this.t,a,["keydown","blur","focus","mouseover","input"],this.Fj);this.$a=new Gh(r(this.Ug,this))}t(lg,Rc);var ng="after_paste";m=lg.prototype;m.i="init";m.D=Vg("goog.events.PasteHandler");m.n=function(){lg.d.n.call(this);this.t.ba();this.t=k;this.$a.ba();this.$a=k};
m.Ug=function(){if(this.Id==this.f.value)return l;this.D.info("detected textchange after paste");this.dispatchEvent(ng);return j};m.Dc=function(a){a=new Ac(a.va);a.type="paste";this.dispatchEvent(a);M(function(){this.Ug()||this.$a.start(50,200)},0,this)};
m.Fj=function(a){switch(this.i){case "init":switch(a.type){case "blur":this.i="init";break;case "focus":this.i="focused";break;case "mouseover":this.i="init";this.f.value!=this.Id&&(this.D.info("paste by dragdrop while on init!"),this.Dc(a));break;default:Rg(this.D,"unexpected event "+a.type+"during init")}break;case "focused":switch(a.type){case "input":var b=this.cb+400;if(s()>b||"focus"==this.Bk)this.D.info("paste by textchange while focused!"),this.Dc(a);break;case "blur":this.i="init";break;
case "keydown":this.D.info("key down ... looking for ctrl+v");if(bb&&hb&&0==a.keyCode||bb&&hb&&17==a.keyCode)break;this.i="typing";break;case "mouseover":this.f.value!=this.Id&&(this.D.info("paste by dragdrop while focused!"),this.Dc(a));break;default:Rg(this.D,"unexpected event "+a.type+" during focused")}break;case "typing":switch(a.type){case "input":this.i="focused";break;case "blur":this.i="init";break;case "keydown":if(a.ctrlKey&&86==a.keyCode||a.shiftKey&&45==a.keyCode||a.metaKey&&86==a.keyCode)this.D.info("paste by ctrl+v while keypressed!"),
this.Dc(a);break;case "mouseover":this.f.value!=this.Id&&(this.D.info("paste by dragdrop while keypressed!"),this.Dc(a));break;default:Rg(this.D,"unexpected event "+a.type+" during keypressed")}break;default:Rg(this.D,"invalid "+this.i+" state")}this.cb=s();this.Id=this.f.value;this.D.info(a.type+" -> "+this.i);this.Bk=a.type};function X(){N.call(this)}t(X,N);ka(X);var pg="media-info",qg="profile";function Hh(a){return'<div class="info"><div class="picture"><img src="'+I(a.media.Ua)+'" class="thumb"><div class="publisher"><img src="'+I(a.media.Ca.Q)+'"><div class="name">'+I(a.media.Ca.name)+'</div></div><div class="links"><div class="local"></div><a target="_blank" href="'+a.media.Nj+'"><div class="host"></div></a></div><div class="link-select" style="display:none"><input onClick="this.select();" class="link-input" type="text" value="'+a.media.link+'" readonly="readonly"/></div><div class="title"><div class="text">'+
I(a.media.name)+'</div></div><div class="scrollable ios-scroll" '+(!a.description?'style="display:none"':"")+'><div class="desc-link"><a href="#">DESCRIPTION</a><div class="published">'+I(a.jc)+'</div></div><div class="description">'+a.description+'</div></div><div class="button play"><div class="icon"></div></div><div class="options"><div class="button star"><div class="icon"></div></div><div class="button facebook"><div class="icon"></div></div><div class="button twitter"><div class="icon"></div></div><div class="button plus"><div class="icon"></div></div></div></div><div class="viewers" style="display: none"><div class="label">SEEN</div></div><div class="tweet-holder" style="display:none"><div class="label"><a class="tweets-link">LATEST TWEETS</a></div><div class="tweets"></div><div class="dot-nav"></div></div><div class="comments-holder ios-scroll" style="display:none"><div class="label"><a class="conv-link">CONVERSATION</a>'+
(a.Tj?'<a class="prev-link">&#10218; LAST PROGRAM</a>':"")+'</div><div class="no-comments" style="display:none">Start the conversation.</div><div class="comments"></div><div class="top-grad"></div><div class="bottom-grad"></div></div><div class="loading loading-activity"><div class="loading-spinner"></div></div><div class="overlay" style="display: none"><div class="leaving"><div>This program is over. Carry on?</div><div class="button dark no">Not yet</div><div class="button dark yes">Let\'s go</div></div></div></div>'}
function Ih(a){return'<div class="viewer"><img src="'+I(a.j.Q)+'"></div>'}function Jh(a){return'<div class="tweet">'+(a.Mb.j?'<a href="#user:'+I(a.Mb.j.id)+'"><img src="'+I(a.Mb.Q)+'"/></a>':'<img src="'+I(a.Mb.Q)+'"/>')+'<div class="text"><a class="handle" target="_blank" href="http://www.twitter.com/'+I(a.Mb.handle)+"/status/"+I(a.Mb.id)+'">'+I(a.Mb.handle)+"</a> "+a.text+'</div><div class="timestamp">'+I(a.timestamp)+"</div></div>"}
function Kh(a){return'<div class="comment'+(a.ib.Z?" reply":"")+'" id="'+I(a.prefix)+"-"+I(a.ib.id)+'"><a href="#user:'+I(a.ib.j.id)+'"><img src="'+I(a.ib.j.Q)+'"/></a><div class="text"><a class="username" href="#user:'+I(a.ib.j.id)+'">'+I(a.ib.j.name)+"</a> "+a.text+'</div><div class="timestamp">'+I(a.timestamp)+'</div><div class="comment-options">'+(a.mi?'<div class="remove"></div> ':"")+'<div class="reply"></div></div></div>'}
function Lh(){return'<div class="comment-input"><div class="comment-controls"><div class="comment-button tweet-toggle"><div class="icon"></div>tweet<div class="check"></div></div><div class="comment-button fb-toggle"><div class="icon"></div>post<div class="check"></div></div><div class="comment-button add-comment"><div class="return">&#8618;</div>add</div></div><div class="input-holder"><textarea class="comment-textarea" rows="1" placeholder="Add to the conversation..."></textarea></div></div>'}
function Mh(a){var b='<div class="activity'+(1<a.ia.length?" digest":"")+'">';if(1<a.ia.length){for(var b=b+('<div class="text"><span>'+I(a.ia.length)+" friends </span>"+(a.Oi?"watched":"are watching")+(a.V?' <a href="#channel:'+I(a.V.id)+'">'+I(a.V.name)+"</a>":"")+'<div class="timestamp">'+I(a.time)+'</div></div><div class="users">'),c=a.ia,d=c.length,f=0;f<d;f++)var g=c[f],b=b+('<a href="#user:'+I(g.id)+'"><div class="picture" style="background:'+I(g.color)+'"><img src="'+I(g.Q)+'"/></div></a>');
b+="</div>"}return b+=(1==a.ia.length?'<a href="#user:'+I(a.ia[0].id)+'"><div class="picture" style="background:'+I(a.ia[0].color)+'"><img src="'+I(a.ia[0].Q)+'"/></div></a><div class="text"><a class="user" href="#user:'+I(a.ia[0].id)+'">'+I(a.ia[0].name)+"</a> "+(a.Oi?"watched":"is watching")+(a.V?' <a href="#channel:'+I(a.V.id)+'">'+I(a.V.name)+"</a>":"")+'<div class="timestamp">'+I(a.time)+"</div></div>":"")+'<div class="medias"></div></div>'}
function Nh(a){for(var b='<div class="comment activity'+(1<a.vb.length?" digest":"")+'">'+(1<a.vb.length?'<div class="text">'+(1==a.ia.length?'<a class="user" href="#user:'+I(a.ia[0].id)+'">'+I(a.ia[0].name)+' </a> discussed <a class="title" href="#info:'+I(a.media.id)+'">'+I(a.media.name)+"</a>.":"<span>"+I(a.ia.length)+' friends </span> discussed <a class="title" href="#info:'+I(a.media.id)+'"> '+I(a.media.name)+"</a>.")+"</div>":""),a=a.vb,c=a.length,d=0;d<c;d++)var f=a[d],b=b+('<div class="comment"><a href="#user:'+
I(f.j.id)+'"><div class="picture" style="background:'+I(f.j.color)+'"><img src="'+I(f.j.Q)+'"/></div></a><div class="text"><a class="user" href="#user:'+I(f.j.id)+'">'+I(f.j.name)+'</a>  "'+I(f.text)+'"<div class="timestamp">'+I(f.Dk)+"</div></div></div>");return b+'<div class="medias"></div></div>'}
function Oh(a){return'<div class="list-info"><div class="picture-cell" '+(a.Ua?'style="display:table-cell"':"")+">"+(a.link?'<a href="'+I(a.link)+'" target="_blank">':"")+'<div class="picture"><img class="thumb" src="'+I(a.Ua)+'"></div>'+(a.link?"</a>":"")+'</div><div class="description" style="display:table-cell">'+a.description+"</div></div>"}function Ph(a){return'<li class="'+I(a.className)+' tab"><div class="label">'+I(a.name)+"</div></li>"}
function Qh(a){return'<div class="admin"><div class="scrollable ios-scroll"><div class="search"><input type="text" class="input" '+(a.Kh?'placeholder="'+I(a.Kh)+'"':"")+'/></div><div class="results"></div><div class="section" style="display:none"><div class="label">CHANNELS</div><div class="admin-channels"></div></div><div class="section" style="display:none"><div class="label">CURRENT TOPICS</div><div class="topics"></div></div><div class="section" style="display:none"><div class="label">COLLECTIONS</div><div class="collections"></div></div><div class="scroll-area"></div>'}
function Rh(){return'<div class="admin-list admin"><div class="search"><input class="input" type="text" placeholder="Paste video or playlist link" /></div><div class="tabbed pending"><ul class="tabs"><li class="tab pending"><div class="label">PENDING</div></li><li class="tab all"><div class="label">ALL</div></li><li class="tab playlists"><div class="label">PLAYLISTS</div></li><li class="tab publishers"><div class="label">PUBLISHERS</div></li><li class="tab categories"><div class="label">CATEGORIES</div></li></ul><div class="pending-content content pending"></div><div class="all-content content all"></div><div class="playlists-content content playlists"></div><div class="publishers-content content publishers"></div><div class="categories-content content categories"><div class="label">GUIDE CATEGORIES</div><div class="categories-list"></div><div class="label">FEED IDS</div><div class="feed-ids"></div><div class="label">FEED CATEGORIES</div><div class="feed-cats"></div></div><div class="spinner" style="display:none"></div></div>'}
function Sh(a){return'<div class="playlist"><div class="title">'+I(a.name)+'</div><div class="controls"><div class="remove dark button">x</div></div></div>'}function Th(a){return'<div class="category button">'+I(a.name)+"</div>"}function Uh(a){return'<div class="publisher">'+(a.Q?'<img src="'+I(a.Q)+'"/>':"")+'<div class="title">'+I(a.name)+'</div><div class="controls"><div class="remove dark button">x</div></div></div>'}
function Vh(a){return'<div class="channel '+(a.V.Jd?"on":"off")+'"><div class="title">'+I(a.V.name)+'</div><div class="controls"><div class="fetch dark button">FETCH</div><div class="program dark button">PROG.</div><div class="remove dark button">x</div><div class="on dark button">ON</div><div class="off dark button">OFF</div></div>'+(a.V.Tc?'<div class="pending">'+I(a.V.Tc)+"</div>":"")+"</div>"}
function Wh(a){return'<div class="collection"><div class="title">'+I(a.gf.name)+'</div><div class="controls">'+(a.gf.Tc?'<div class="pending">'+I(a.gf.Tc)+"</div>":"")+'<div class="fetch dark button">FETCH</div><div class="button dark remove">x</div></div></div>'}function Xh(a){return'<div class="topic"><div class="title">'+I(a.cl)+'</div><div class="controls">'+(a.Tc?'<div class="pending">'+I(a.Tc)+"</div>":"")+"</div></div>"}
function Yh(){return'<div class="tabbed activity"><ul class="tabs"><li class="tab activity"><div class="label">ACTIVITY</div></li><li class="tab starred"><div class="label"><div class="heart"></div>\'d</div></li></ul><div class="activity-content content activity"><div class="loading loading-activity"><div class="loading-spinner"></div></div></div><div class="starred-content content starred"><div class="loading loading-starred"><div class="loading-spinner"></div></div></div><div class="spinner" style="display:none"></div></div>'}
function Zh(){return'<div class="tabbed"><ul class="tabs"><li class="tab comments"><div class="label">CONVERSATION</div></li><li class="tab tweets"><div class="label">TWEETS</div></li></ul><div class="comments-content content comments-holder"><div class="loading loading-activity"><div class="loading-spinner"></div></div></div><div class="tweets-content content tweet-holder"><div class="loading loading-starred"><div class="loading-spinner"></div></div></div></div>'}
function $h(a){return'<div class="list-media show"><div class="media"><div class="preview"><div class="thumb" style="background-image:url('+I(a.media.Ua)+"); background-position: 50% "+I(a.media.ad)+'%"></div><div class="list-play"><div class="icon"></div></div><div class="title">'+I(a.media.name)+'</div></div></div><div class="publisher"><img src="'+I(a.media.Ca.Q)+'"><div class="name">'+I(a.media.Ca.name)+'</div></div><div class="stats"><div class="comment-count"><div class="icon"></div>'+I(a.media.pd)+
'</div><div class="star-count"><div class="icon"></div>'+I(a.media.Tk)+"</div></div></div>"}
function ai(a){return'<div class="admin-media list-media"><div class="media"><div class="preview"><div class="thumb" style="background-image:url('+I(a.media.Ua)+"); background-position: 50% "+I(a.media.ad)+'%"></div><div class="title">'+I(a.media.name)+'</div><div class="published">'+I(a.jc)+'</div><div class="play"></div><div class="approve"></div><div class="remove"></div><div class="repos"></div></div></div><div class="publisher"><img src="'+I(a.media.Ca.Q)+'"><div class="name">'+I(a.media.Ca.name)+
'</div><div class="duration">'+I(a.media.duration)+' seconds</div></div><div class="description">'+I(a.media.description)+"</div></div>"};function bi(){K.call(this);this.Bd=[];this.Wk=[];this.Rd=[]}t(bi,Rc);m=bi.prototype;m.Qh=l;m.Rh=l;m.Ef=l;m.Ci=ba("Le");m.init=function(){if(!this.Ef){for(var a,b=0;a=this.Bd[b];b++)ci(this,a);this.Ef=j}};function ci(a,b){a.Qh&&(L(b.element,"mousedown",b.di,l,b),a.og&&x(b.element,a.og));a.Rh&&a.rg&&x(b.element,a.rg)}
m.oc=function(a,b){if(!this.ua)if(this.ua=b,this.dispatchEvent(new di("dragstart",this,this.ua))==l)this.ua=k;else{var c=b.yc,d=this.he(c);this.ij&&x(d,this.ij);this.Fc=d;d=Qb(c);d.body.appendChild(this.Fc);var f=this.Fc,g=Jd(c),c=Td(c,"margin");g.x-=2*(c.left||0);g.y-=2*(c.top||0);f.style.position="absolute";f.style.left=g.x+"px";f.style.top=g.y+"px";this.o=new Xd(f);this.o.Ci(this.Le);L(this.o,"drag",this.ei,l,this);L(this.o,"end",this.$b,l,this);L(d.body,"selectstart",this.Ji);this.$c=[];for(d=
0;c=this.Wk[d];d++)for(var h,f=0;h=c.Bd[f];f++)for(var g=c,n=[h.element],q=this.$c,v=0;v<n.length;v++){var y=n[v],J=Jd(y),Z=R(y),J=new xd(J.y,J.x+Z.width,J.y+Z.height,J.x);q.push(new ei(J,g,h,y));fi(this,J)}this.pb||(this.pb=new xd(0,0,0,0));for(d=0;c=this.Rd[d];d++)c.kf=[],c.vi=c.f.scrollLeft,c.wi=c.f.scrollTop,f=Jd(c.f),g=R(c.f),c.R=new xd(f.y,f.x+g.width,f.y+g.height,f.x);for(d=0;g=this.$c[d];d++)for(f=0;c=this.Rd[f];f++)ac(c.f,g.f)&&(c.kf.push(g),g.Qd=c);this.Qb=k;for(d=0;c=this.Rd[d];d++)L(c.f,
"scroll",this.Xg,l,this);this.o.oc(a);a.preventDefault()}};
m.$b=function(a){var b=a.hj?k:this.Qb;if(b&&b.ta){var c=a.clientX,a=a.clientY,d=jc(Ob(this.Fc)),f=c+d.x,d=a+d.y,g;this.Vd&&(g=this.Vd(b.lb,b.R,f,d));this.dispatchEvent(new di("drag",this,this.ua,b.ta,b.lb,b.f,c,a,f,d));b.ta.dispatchEvent(new di("drop",this,this.ua,b.ta,b.lb,b.f,c,a,f,d,g))}this.dispatchEvent(new di("dragend",this,this.ua));Lc(this.o,"drag",this.ei,l,this);Lc(this.o,"end",this.$b,l,this);Lc(Qb(this.ua.yc).body,"selectstart",this.Ji);for(b=0;c=this.Rd[b];b++)Lc(c.f,"scroll",this.Xg,
l,this),c.kf=[];this.o.ba();G(this.Fc);delete this.ua;delete this.Fc;delete this.o;delete this.$c;delete this.Qb};
m.ei=function(a){var b,c=jc(Ob(this.Fc));b=new Eb(a.clientX+c.x,a.clientY+c.y);var c=b.x,d=b.y,f=this.Qb,g;if(f){this.Vd&&f.ta&&(g=this.Vd(f.lb,f.R,c,d));if(f.R.contains(b)&&g==this.Ig)return;f.ta&&(this.dispatchEvent(new di("dragout",this,this.ua,f.ta,f.lb,f.f)),f.ta.dispatchEvent(new di("dragout",this,this.ua,f.ta,f.lb,f.f,i,i,i,i,this.Ig)));this.Ig=g;this.Qb=k}if(this.pb.contains(b)){a:{for(var h=0;f=this.$c[h];h++)if(f.R.contains(b))if(f.Qd){if(f.Qd.R.contains(b)){b=f;break a}}else{b=f;break a}b=
k}if((f=this.Qb=b)&&f.ta)this.Vd&&(g=this.Vd(f.lb,f.R,c,d)),c=new di("dragover",this,this.ua,f.ta,f.lb,f.f),c.Vk=g,this.dispatchEvent(c),f.ta.dispatchEvent(new di("dragover",this,this.ua,f.ta,f.lb,f.f,a.clientX,a.clientY,i,i,g));else if(!f){this.ra||(this.ra=new ei(this.pb.clone()));a=this.ra.R;a.top=this.pb.top;a.right=this.pb.right;a.bottom=this.pb.bottom;a.left=this.pb.left;for(g=0;f=this.$c[g];g++)b=f.R,f.Qd&&(f=f.Qd.R,b=new xd(Math.max(b.top,f.top),Math.min(b.right,f.right),Math.min(b.bottom,
f.bottom),Math.max(b.left,f.left))),f=k,c>=b.right?f=b.right>a.left?b.right:a.left:c<b.left&&(f=b.left<a.right?b.left:a.right),h=k,d>=b.bottom?h=b.bottom>a.top?b.bottom:a.top:d<b.top&&(h=b.top<a.bottom?b.top:a.bottom),f!==k&&h!==k&&(Math.abs(f-c)>Math.abs(h-d)?h=k:f=k),f===k?h!==k&&(h<=d?a.top=h:a.bottom=h):f<=c?a.left=f:a.right=f;this.Qb=10<=(a.right-a.left)*(a.bottom-a.top)?this.ra:k}}};m.Ji=da(l);
m.Xg=function(a){for(var b=0,c;c=this.Rd[b];b++)if(a.target==c.f){var d=c.wi-c.f.scrollTop,f=c.vi-c.f.scrollLeft;c.wi=c.f.scrollTop;c.vi=c.f.scrollLeft;this.ra&&this.Qb==this.ra&&(0<d?this.ra.R.top+=d:this.ra.R.bottom+=d,0<f?this.ra.R.left+=f:this.ra.R.right+=f);for(var g=0,h;h=c.kf[g];g++)h=h.R,h.top+=d,h.left+=f,h.bottom+=d,h.right+=f,fi(this,h)}this.o.li(a)};
m.he=function(a){var b=a.cloneNode(j);switch(a.tagName.toLowerCase()){case "tr":return F("table",k,F("tbody",k,b));case "td":case "th":return F("table",k,F("tbody",k,F("tr",k,b)));default:return b}};function fi(a,b){if(1==a.$c.length)a.pb=new xd(b.top,b.right,b.bottom,b.left);else{var c=a.pb;c.left=Math.min(b.left,c.left);c.right=Math.max(b.right,c.right);c.top=Math.min(b.top,c.top);c.bottom=Math.max(b.bottom,c.bottom)}}
m.n=function(){bi.d.n.call(this);for(var a,b=0;a=this.Bd[b];b++)this.Qh&&(Lc(a.element,"mousedown",a.di,l,a),this.og&&z(a.element,this.og)),this.Rh&&this.rg&&z(a.element,this.rg),a.ba();this.Bd.length=0};function di(a,b,c,d,f,g,h,n,q,v,y){xc.call(this,a);this.Pl=b;this.Ql=c;this.Rl=d;this.Tl=f;this.Sl=g;this.clientX=h;this.clientY=n;this.nm=q;this.om=v;this.Vk=y}t(di,xc);di.prototype.n=aa();
function gi(a,b){K.call(this);this.element=C(a);this.data=b;this.I=k;this.element||e(Error("Invalid argument"))}t(gi,Rc);m=gi.prototype;m.yc=k;m.di=function(a){if(Cc(a)){var b=a.target;b&&(L(b,"mousemove",this.Qc,l,this),L(b,"mouseout",this.Qc,l,this),L(b,"mouseup",this.Pf,l,this),this.yc=b,this.pg=new Eb(a.clientX,a.clientY),a.preventDefault())}};m.Ne=ba("I");
m.Qc=function(a){var b=this.yc,c="mouseout"==a.type&&a.target==b;if(5<Math.abs(a.clientX-this.pg.x)+Math.abs(a.clientY-this.pg.y)||c)Lc(b,"mousemove",this.Qc,l,this),Lc(b,"mouseout",this.Qc,l,this),Lc(b,"mouseup",this.Pf,l,this),this.I.oc(a,this)};m.Pf=function(){var a=this.yc;Lc(a,"mousemove",this.Qc,l,this);Lc(a,"mouseout",this.Qc,l,this);Lc(a,"mouseup",this.Pf,l,this);delete this.pg;this.yc=k};function ei(a,b,c,d){this.R=a;this.ta=b;this.lb=c;this.f=d}ei.prototype.Qd=k;function hi(){bi.call(this)}t(hi,bi);function ii(a,b){b.Ne(a);a.Bd.push(b);a.Ef&&ci(a,b)};function ji(a){var b={};"rel"in b||(b.rel="nofollow");"target"in b||(b.target="_blank");var c=[],d;for(d in b)b.hasOwnProperty(d)&&b[d]&&c.push(Ba(d),'="',Ba(b[d]),'" ');var f=c.join("");return a.replace(ki,function(a,b,c,d,v){a=[Ba(b)];if(!c)return a[0];a.push("<a ",f,'href="');d?(a.push("mailto:"),c=d,d=""):(v||a.push("http://"),(d=c.match(li))?(c=d[1],d=d[2]):d="");c=Ba(c);d=Ba(d);a.push(c,'">',c,"</a>",d);return a.join("")})}
var li=/^(.*)([:;,\.?\[\]])$/,ki=RegExp("([\\S\\s]*?)(\\b(?:mailto:)?([\\w.+-]+@[A-Za-z0-9.-]+\\.(?:com|org|net|edu|gov|aero|biz|cat|coop|info|int|jobs|mobi|museum|name|pro|travel|arpa|asia|xxx|[a-z][a-z])\\b)|\\b(?:(https?|ftp)://+|www\\.)\\w[:;,\\.?\\[\\]\\w/~%&=+#-@!]*|$)","g");function mi(){}t(mi,Ge);ka(mi);m=mi.prototype;m.Hc=aa();m.h=function(a,b){Ze(a);a.hb&=-256;df(a,32,l);mi.d.h.call(this,a,b);a.mc(b.value);return b};m.J=function(a){Ze(a);a.hb&=-256;df(a,32,l);return a.La().J("textarea",{"class":Ie(this,a).join(" "),disabled:!a.isEnabled()},a.Za||"")};m.Tb=function(a){return"TEXTAREA"==a.tagName};m.nc=ja;m.Ff=function(a){return a.isEnabled()};m.Yc=ja;m.na=function(a,b,c){mi.d.na.call(this,a,b,c);if((a=a.b())&&1==b)a.disabled=c};m.Va=ja;
m.mc=function(a,b){a&&(a.value=b)};m.ja=da("goog-textarea");function ni(a,b,c){Ye.call(this,a,b||mi.a(),c);Ze(this);this.Xc(j);a||(this.Za="")}t(ni,Ye);var oi=ib||jb;m=ni.prototype;m.Lc=l;m.xa=0;m.Yh=0;m.ci=0;m.Dh=l;m.Ee=l;m.ig=l;m.hg=l;function pi(a){return a.Kd.top+a.Kd.bottom+a.Pg.top+a.Pg.bottom}function qi(a){var b=a.ci,c=a.b();b&&(c&&a.Ee)&&(b-=pi(a));return b}function ri(a){var b=a.Yh,c=a.b();b&&(c&&a.Ee)&&(b-=pi(a));return b}m.Ra=function(a){this.mc(String(a))};m.L=function(){return this.b().value};m.mc=function(a){ni.d.mc.call(this,a);this.resize()};
m.mb=function(a){ni.d.mb.call(this,a);this.b().disabled=!a};m.resize=function(){this.b()&&this.te()};m.v=function(){ni.d.v.call(this);var a=this.b();zd(a,{overflowY:"hidden",overflowX:"auto",boxSizing:"border-box",MsBoxSizing:"border-box",WebkitBoxSizing:"border-box",MozBoxSizing:"border-box"});this.Kd=Td(a,"padding");this.Pg=Wd(a);Q(Q(Q(Q(this.m(),a,"scroll",this.te),a,"focus",this.te),a,"keyup",this.te),a,"mouseup",this.Xj);this.resize()};
function si(a){if(!a.Dh){var b=a.b().cloneNode(l);zd(b,{position:"absolute",height:"auto",top:"-9999px",margin:"0",padding:"1px",border:"1px solid #000",overflow:"hidden"});a.La().ca.body.appendChild(b);var c=b.scrollHeight;b.style.padding="10px";var d=b.scrollHeight;a.ig=d>c;b.style.borderWidth="10px";a.hg=b.scrollHeight>d;b.style.height="100px";100!=b.offsetHeight&&(a.Ee=j);G(b);a.Dh=j}var b=a.b(),c=a.b().scrollHeight,f=a.b(),d=f.offsetHeight-f.clientHeight;if(!a.ig)var g=a.Kd,d=d-(g.top+g.bottom);
a.hg||(f=Wd(f),d-=f.top+f.bottom);c+=0<d?d:0;a.Ee?c-=pi(a):(a.ig||(d=a.Kd,c+=d.top+d.bottom),a.hg||(a=Wd(b),c+=a.top+a.bottom));return c}function ti(a,b){a.xa!=b&&(a.xa=b,a.b().style.height=b+"px")}function ui(a){a=a.b();a.style.height="auto";var b=a.value.match(/\n/g)||[];a.rows=b.length+1}
m.te=function(){if(!this.Lc){var a=l;this.Lc=j;var b=this.b(),c=this.xa;if(b.scrollHeight){var d=l,f=l,g=si(this),h=b.offsetHeight,n=qi(this),q=ri(this);n&&g<n?(ti(this,n),d=j):q&&g>q?(ti(this,q),b.style.overflowY="",f=j):h!=g?ti(this,g):this.xa||(this.xa=g);!d&&(!f&&oi)&&(a=j)}else ui(this);this.Lc=l;a&&(a=this.b(),this.Lc||(this.Lc=j,b=l,a.value||(a.value=" ",b=j),(f=a.scrollHeight)?(g=si(this),d=qi(this),h=ri(this),!(d&&g<=d)&&!(h&&g>=h)&&(h=this.Kd,a.style.paddingBottom=h.bottom+1+"px",si(this)==
g&&(a.style.paddingBottom=h.bottom+f+"px",a.scrollTop=0,f=si(this)-f,f>=d?ti(this,f):ti(this,d)),a.style.paddingBottom=h.bottom+"px")):ui(this),b&&(a.value=""),this.Lc=l));c!=this.xa&&this.dispatchEvent("resize")}};m.Xj=function(){var a=this.b(),b=a.offsetHeight;a.filters&&a.filters.length&&(a=a.filters.item("DXImageTransform.Microsoft.DropShadow"))&&(b-=a.offX);b!=this.xa&&(this.xa=this.ci=b)};function vi(a,b,c,d,f,g,h){S.call(this);this.sa=of();this.Xa=a;this.He=b;this.Zf=c;this.dg=d;this.ef=f.categories;this.nj=f.feed_categories;this.pj=f.feed_id;this.ug=g||k;this.Cc=h||k;this.of=this.sa?new hi:k;this.bc={pending:l,all:l};this.eb=["pending","all","playlists","publishers","categories"]}t(vi,S);var wi="top_rated top_favorites most_shared most_recent most_discussed most_responded recently_featured on_the_web most_viewed".split(" "),xi="All Film Autos Music Animals Sports Travel Games Videoblog People Comedy Entertainment News Howto Education Tech Nonprofit Movies Shows Shortmov".split(" ");
m=vi.prototype;
m.H=function(a){vi.d.H.call(this,a);a.innerHTML="";a.scrollTop=0;mc(a,Rh);var b=D("pending-content",a);u(this.He,function(a){yi(this,b,a)},this);this.yk=D("playlists-content",a);u(this.Zf,this.Mg,this);this.Ck=D("publishers-content",a);u(this.dg,this.Ng,this);this.dj=D("categories-list",a);this.lh=D("feed-ids",a);this.oj=D("feed-cats",a);W("/admin/_categories",r(function(a){a=Yf(a.target);u(a,function(a){zi(this,a,"category",Qa(this.ef,a.id)||!this.ef.length)},this)},this));u(xi,function(a){zi(this,a,
"feed_category",Qa(this.nj,a))},this);u(wi,function(a){zi(this,a,"feed_id",this.pj==a)},this);this.resize()};
m.v=function(){vi.d.v.call(this);this.la=D("input",this.b());var a=new Pe(this.la),b=new lg(this.la);this.Fa=D("tabs",this.b());this.F="pending";var c=l;Q(Q(Q(Q(this.m(),window,"resize",wa(M,r(this.resize,this))),a,"key",r(function(a){"13"==a.keyCode&&Ai(this,this.la.value)},this)),b,ng,r(function(){Ai(this,this.la.value)},this)),this.Fa,"click",r(function(a){a=ic(a.target,"li");this.Eb(a)},this));Q(this.m(),this.b(),"scroll",r(function(){if(this.Xa&&!c&&!this.bc[this.F]&&("pending"==this.F||"all"==
this.F)&&this.b().scrollTop+E().height>this.b().scrollHeight-this.b().clientTop){c=j;var a=D("spinner",this.b());P(a,j);var b="pending"==this.F?this.He:this.Ze;W("/admin/_media/collection/"+this.Xa+"?offset="+b.length+("pending"==this.F?"&pending=1":""),r(function(g){c=l;g=vg(wg(g.target)).medias;g=Ma(g,function(a){return new Gf(a)});Va(b,g);var h=D(this.F+"-content",this.b());u(g,function(a){yi(this,h,a)},this);this.bc[this.F]=!g.length;B(a,"finished",!g.length)},this))}},this));this.resize()};
m.resize=function(){Ld(this.b(),E().height-40)};
function Ai(a,b){var c;c=b.match("(?:(https?|ftp)://+|www\\.)\\w[:;,\\.?\\[\\]\\w/~%&=+#-@!]*");c=c!=k?c[0]:"";a.Xa&&c&&(a.la.disabled="disabled",W("admin/_add/collection/"+a.Xa,r(function(a){this.la.value="";this.la.disabled="";a=Yf(a.target);if("media"==a.type){var b=Mf(Lf.a(),a.data);Oa(this.He,function(a){return a.id==b.id})||(this.He.push(b),a=D("pending-content",this.b()),yi(this,a,b,j),this.Eb(Sb("li","pending",i)[0]))}else if("playlist"==a.type){var c=a.data;Oa(this.Zf,function(a){return a.id==
c.id})||(this.Zf.push(c),this.Mg(c),this.Eb(Sb("li","playlists",i)[0]))}else if("publisher"==a.type){var h=a.data;h&&!Oa(this.dg,function(a){return a.id==h.id})&&(this.dg.push(h),this.Ng(h),this.Eb(Sb("li","publishers",i)[0]))}},a),"POST","url="+c))}
m.Eb=function(a){u(this.eb,function(b){B(this.Fa.parentElement,b,A(a,b));this.F=A(a,b)?b:this.F},this);this.Xa&&!this.Ze&&W("/admin/_media/collection/"+this.Xa,r(function(a){a=vg(wg(a.target)).medias;this.Ze=Ma(a,function(a){return new Gf(a)});var c=D("all-content",this.b());u(this.Ze,function(a){yi(this,c,a)},this)},this))};
m.Mg=function(a){var b=H(Sh,{name:a.name});this.yk.appendChild(b);var c=D("remove",b);Q(this.m(),c,"click",function(){W("admin/_remove/collection/"+this.Xa,r(function(){G(b)},this),"POST","pub_id="+a.id)})};m.Ng=function(a){var b=H(Uh,{name:a.name||a.id,Q:a.picture});this.Ck.appendChild(b);var c=D("remove",b);Q(this.m(),c,"click",function(){W("admin/_remove/collection/"+this.Xa,r(function(){G(b)},this),"POST","pub_id="+a.id)})};
function zi(a,b,c,d){if("category"==c){var f=H(Th,{name:b.name,id:b.id});a.dj.appendChild(f)}else f=H(Th,{name:b,id:b}),("feed_id"==c?a.lh:a.oj).appendChild(f);B(f,"enabled",!!d);var g="category"==c?"cat_id="+b.id:"feed_id"==c?"feed_id="+b:"feed_cat="+b;Q(a.m(),f,"click",function(){"feed_id"==c&&u(Xb(this.lh),function(a){z(a,"enabled")});var a=Db(f,"enabled");W("admin/_edit/collection/"+this.Xa,ie(),"POST",g+"&enabled="+a)})}
function yi(a,b,c,d){var f=H(ai,{media:c,jc:Kf(c)});d?Wb(b,f,0):b.appendChild(f);a.sa&&(b=a.of,d=new gi(f,i),ii(b,d));var b=new Xd(D("repos",f)),g=D("thumb",f),d=D("play",f),h=D("approve",f),n=D("remove",f);b.td=function(a,b){var c=b-24;-50<=c&&50>=c&&zd(g,"background-position-y",50-c+"%")};Q(Q(Q(Q(a.m(),b,"end",function(){var a=(g.style[Ia("background-position")]||"").split(" ")[1],a=a.substring(0,a.length-1);W("/admin/_posthumb",ie(),"POST","media="+c.id+"&pos="+a)}),d,"click",r(a.vk,a,c)),h,"click",
r(a.Og,a,c,j,f)),n,"click",r(a.Og,a,c,l,f));M(wa(x,f,"show"))}m.Og=function(a,b,c){var d=a.ej||this.Xa;W("admin/_media/collection",r(function(){x(c,"remove");M(function(){G(c)},300);O.a();var b;O.a();b=fc(C("toggle-pending"));bd(0,b-1);X.a().c("approved",a,d)},this),"POST","col="+d+"&media="+a.id+"&approve="+b)};m.vk=function(a){a=Of(a);U.a().c(wf,a)};function Bi(a){S.call(this);this.ub=a||k;this.dd=this.Sg=this.Ni=this.Wg=0}t(Bi,S);m=Bi.prototype;m.J=function(){this.f=H(Qh)};m.H=function(a){Bi.d.H.call(this,a);var b=H(Qh,{Kh:this.ub?"Add a collection":"Add a Channel"});a.innerHTML=b.innerHTML};
m.v=function(){Bi.d.v.call(this);this.la=D("input",this.b());var a=new Pe(this.la);this.Ik=D("scrollable",this.b());this.X=D("admin-channels",this.b());this.xg=D("topics",this.b());this.ie=D("collections",this.b());this.Vg=C("admin-col-list");this.be=C("admin-list");T.a();this.ub?(W("/admin/_topicmedias/"+this.ub,r(function(a){a=Yf(a.target);Gb(a,function(a,b){P(this.xg.parentElement,j);if(a&&a.length){var f=H(Xh,{cl:b,Tc:a.length});this.xg.appendChild(f);L(f,"click",r(function(){a=Ma(a,function(a){return new Gf(a)});
(new vi("",a,[],[],[])).h(this.be);X.a().c("navigate",this.be,l,b)},this));X.a().subscribe("approved",function(b){if(Oa(a,function(a){return a.id==b.id})){var d=D("pending",f),n=fc(d)-1;0>=n?(G(f),tc(f)):bc(d,n)}},this)}},this);this.dd&&bd(O.a(),this.dd);this.Ni=R(this.xg.parentElement).height;this.resize()},this)),W("/admin/_collections/"+this.ub,r(function(a){a=Yf(a.target);P(this.ie.parentElement,!!a.length);u(a,this.Lg,this);this.dd&&bd(O.a(),this.dd);this.Wg=R(this.ie.parentElement).height;this.resize()},
this))):W("/admin/_channels",r(function(a){a=Yf(a.target);P(this.X.parentElement,!!a.length);u(a,this.Kg,this);this.Sg=R(this.X.parentElement).height;this.resize()},this));Q(this.m(),a,"key",r(function(a){"13"==a.keyCode&&this.la.value&&(a=this.la.value,this.la.disabled="disabled",W(this.ub?"/admin/_collections":"/admin/_channels",r(function(a){a=Yf(a.target);this.ub?(P(this.ie.parentElement,!!a),this.Lg(a)):(P(this.X.parentElement,!!a),this.Kg(a));this.la.disabled="";this.la.value=""},this),"POST",
"name="+a+(this.ub?"&cid="+this.ub:"")))},this))};
m.Kg=function(a){var b=new Tf(a),c=H(Vh,{V:b});this.X.appendChild(c);L(c,"click",r(function(a){A(a.target,"on")||A(a.target,"off")?(B(c,"on",A(a.target,"on")),B(c,"off",!A(a.target,"on")),W("/admin/_channel/online/"+b.id,r(function(a){a.target.disabled="";a=Yf(a.target);B(c,"on",a.online);B(c,"off",!a.online)},this),"POST","online="+A(a.target,"on"))):A(a.target,"program")?W("/admin/_program",ie(),"POST","channel_id="+b.id):A(a.target,"fetch")?W("/admin/_fetch",function(){alert("Fetch began, but give it some time.")},
"POST","channel_id="+b.id):A(a.target,"remove")&&confirm("Remove "+b.name+"?")?(P(c,l),W("/admin/_channels/"+b.id,function(a){Yf(a.target).deleted?G(c):P(c,j)},"DELETE")):((new Bi(b.id)).h(this.Vg),X.a().c("navigate",this.Vg,l,b.name))},this))};
m.Lg=function(a){var b=H(Wh,{gf:a});this.dd+=a.pending;this.ie.appendChild(b);L(b,"click",r(function(c){A(c.target,"remove")&&confirm("Remove "+a.name+"?")?(P(b,l),W("/admin/_collections/"+a.id,function(a){Yf(a.target).deleted?G(b):P(b,j)},"DELETE")):A(c.target,"fetch")?W("/admin/_fetch",function(){alert("Fetch began, but give it some time.")},"POST","col_id="+a.id):W("/admin/_media/collection/"+a.id+"?pending=1",r(function(b){var b=vg(wg(b.target)),c=b.medias,c=Ma(c,function(a){return new Gf(a)});
(new vi(a.id,c,b.playlists,b.publishers,b.categories)).h(this.be);X.a().c("navigate",this.be,l,a.name)},this))},this));X.a().subscribe("approved",function(c,d){if(d==a.id){var f=D("pending",b),g=fc(f)-1;0>=g?(G(b),tc(b)):bc(f,g)}},this)};m.resize=function(){Ld(this.Ik,this.Sg+this.Ni+this.Wg+110)};function Ci(){S.call(this);this.k=new ni("Add to the conversation.");this.rb=new mf("tweet");df(this.rb,16,j);this.ab=new mf("post");df(this.ab,16,j);var a=V.a().q;this.oe=a.zk;this.Te=a.Ak;this.sc=new mf("add");this.Wf=this.qb=this.ri=k}t(Ci,S);m=Ci.prototype;m.J=function(){this.f=H(Lh)};
m.v=function(){Ci.d.v.call(this);this.k.h(D("comment-textarea",this.b()));var a=this.k;a.Yh=70;a.resize();a=new Pe(this.k.xb());this.je=D("comment-controls",this.b());this.Qj=D("input-holder",this.b());Ce(this,this.rb);this.rb.h(D("tweet-toggle",this.b()));W("/_twitter",r(function(a){a=Yf(a.target);this.Te=this.Te&&a.auth;this.dl=a.auth_url;cf(this.rb,this.Te)},this));Ce(this,this.ab);this.ab.h(D("fb-toggle",this.b()));FB.api("/me/permissions",r(function(a){this.oe=this.oe&&!!a.data[0].publish_stream;
cf(this.ab,this.oe)},this));Ce(this,this.sc);this.sc.h(D("add-comment",this.b()));this.sc.mb(l);Q(Q(Q(Q(Q(Q(this.m(),this.k.b(),"focus",r(function(){Ed(this.je,0,0);this.dispatchEvent("focus")},this)),a,"key",r(function(a){this.sc.mb(this.k.L());"13"==a.keyCode?(a.preventDefault(),a.stopPropagation(),this.sc.setActive(this.k.L()),this.Sc(a)):"8"==a.keyCode&&(!this.L()&&this.qb)&&Di(this)},this)),this.k,"resize",r(function(a){this.dispatchEvent(a)},this)),this.ab,"action",r(this.ek,this)),this.rb,
"action",r(this.uk,this)),this.sc,"action",r(this.Sc,this));X.a().subscribe("reply-comment",this.qi,this);V.a().q.subscribe("twitter-auth",function(){cf(this.rb,j)},this)};m.qi=function(a,b){this.qb&&Di(this);this.ri=b;this.Wf=a.id?a.id:a.toString();var c=b.name.split(" ");this.qb=F("div","token","@"+(c&&c.length?c[0]:b.name));this.Qj.appendChild(this.qb);this.nb(j);this.k.b().style.paddingLeft=R(this.qb).width+5+"px"};function Di(a){a.ri=k;a.Wf=k;G(a.qb);a.qb=k;a.k.b().style.paddingLeft=""}m.L=function(){return this.k.L()};
m.Ra=function(a){return this.k.Ra(a)};m.collapse=function(){return 25!=Gd(this.je).y?(Ed(this.je,0,25),j):l};m.Ad=function(){return A(this.b(),"focused")};m.nb=function(a){a&&(this.k.b().focus(),M(r(function(){Ed(this.je,0,0)},this)));return B(this.b(),"focused",a)};
m.Sc=function(){this.k.L()&&(window.console.log(this.k.L()),this.dispatchEvent({type:"add",Qg:r(function(a){var b=Yf(a.target),a=new Ei(b.comment),c=b.tweet?new Fi(b.tweet):k;if(b=Mf(Lf.a(),b.comment.media))b.c(Hf,a),c&&b.c("add-tweet",c)},this),xd:Me(this.ab),Bg:Me(this.rb),text:this.k.L(),Z:this.Wf}),this.k.Ra(""),Di(this))};m.ek=function(){!this.oe&&Me(this.ab)&&(P(C("overlay"),j),FB.login(r(function(a){P(C("overlay"),l);this.mj=!!a.authResponse;cf(this.ab,this.mj)},this),{scope:"publish_stream"}))};
m.uk=function(){if(!this.Te&&Me(this.rb)){cf(this.rb,l);var a=window.open(this.dl,"Twitter Login","height=300,width=550");a.moveTo(screen.width/2-225,screen.height/2-150);a.focus()}};function Ei(a){this.id=a.id;this.j=yg(V.a(),a.user);this.text=a.text;this.time=gd(a.time+"Z");this.Dk=Wc(this.time.getTime());this.Z=a.parent_id;this.pi=[];u(a.replies,function(a){a=new Ei(a);this.pi.push(a)},this)};function Fi(a){this.id=a.id;this.j=a.user&&yg(V.a(),a.user);this.handle=a.handle;this.Q=a.picture;this.text=a.text;this.time=gd(a.time+"Z")};function Gi(a,b,c,d){S.call(this);this.e=a;this.Ya=b||[];this.Wb={};this.Ue=!!c;this.fb=d||[];this.lc=this.Gl=0}t(Gi,S);m=Gi.prototype;
m.H=function(a){Gi.d.H.call(this,a);a.innerHTML="";a.scrollTop=0;x(this.b(),"ios-scroll");this.N=F("div","loading",F("div","loading-spinner"));this.b().appendChild(this.N);P(this.N,l);this.gc=F("div","no-comments","Start the conversation.");this.b().appendChild(this.gc);this.z=F("div","comments tweets");this.b().appendChild(this.z);Q(Q(this.m(),window,"resize",wa(M,r(this.resize,this))),this.z,"click",r(this.hf,this));this.Ya.length?(u(this.Ya,function(a){this.Rb(a)},this),this.Pc=R(this.z).height):
this.Ue&&this.fb.length?(u(this.fb,function(a){this.tc(a)},this),this.Pc=R(this.z).height):P(this.N,j);this.Ue?(W("/_tweet/"+this.e.id+"?offset="+this.fb.length,r(function(a){P(this.N,l);a=vg(wg(a.target));a=Ma(a,function(a){a=new Fi(a);this.tc(a);return a},this);this.Pc=R(this.z).height;this.resize()},this)),this.e.subscribe("add-tweet",function(a){this.tc(a,j)},this)):(W("/_comment/"+this.e.id+"?offset="+this.Ya.length,r(function(a){P(this.N,l);a=vg(wg(a.target));a=Ma(a,function(a){a=new Ei(a);
this.Rb(a);return a},this);this.Pc=R(this.z).height;this.resize()},this)),this.e.subscribe(Hf,this.Rb,this),this.e.subscribe(If,this.eg,this));this.resize(41)};
m.tc=function(a,b){P(this.gc,l);var c=ji(a.text),c=c.replace(/#(\S+)/g,function(a,b){return'<a target="_blank" href="http://twitter.com/search?q=%23'+b+'">'+a+"</a>"}),c=c.replace(/@(\S+)/g,function(a,b){return'<a target="_blank" href="http://twitter.com/'+b+'">'+a+"</a>"}),c=H(Jh,{Mb:a,text:c,timestamp:Wc(a.time.getTime())});Xc(Vc.a(),a.time,D("timestamp",c));b?Wb(this.z,c,0):this.z.appendChild(c);this.resize();P($b(this.z),j)};
m.hf=function(a){var a=a.target,b=ic(a,k,"comment");if(b){var b=b.id.split("-")[1],c=this.Wb[b];A(a,"reply")?X.a().c("reply-comment",c.Z?this.Wb[c.Z]:c,c.j):A(a,"remove")&&this.e.c(If,b)}};m.eg=function(a){var a=C("listcomment-"+a),b=a.nextSibling;for(G(a);b&&A(b,"reply");)b=b.nextSibling,G(b)};
m.Rb=function(a){P(this.gc,l);this.Wb[a.id]=a;var b=H(Kh,{prefix:"listcomment",ib:a,text:ji(a.text),timestamp:Wc(a.time.getTime()),mi:a.j.id==V.a().q.id});Xc(Vc.a(),a.time,D("timestamp",b));this.z.appendChild(b);this.resize()};m.resize=function(a){this.lc=a||this.lc;Ld(this.b(),E().height-42-this.lc-(ic(this.b(),k,"tabbed")?30:0))};function Hi(a,b,c,d){S.call(this);this.e=this.r=a;this.Ya=b||[];this.fb=c||[];this.Ue=!!d;this.jf=new Gi(a,this.Ya);this.zg=new Gi(a,i,j,this.fb);this.k=new Ci;this.eb=["comments","tweets"]}t(Hi,S);m=Hi.prototype;m.H=function(a){Hi.d.H.call(this,a);x(a,"conversation");x(a,"ios-scroll");mc(a,Zh);x(a.firstChild,this.Ue?"tweets":"comments")};
m.v=function(){this.Fa=D("tabs",this.b());this.jf.h(D("comments-content",this.b()));this.zg.h(D("tweets-content",this.b()));Ae(this.k,this.b());Q(Q(Q(Q(Q(Q(Q(this.m(),this.Fa,"click",r(function(a){a=ic(a.target,"li");this.Eb(a)},this)),this.k,"add",r(this.Sc,this)),this.k,"resize",r(function(){A(this.b().firstChild,"comments")?this.jf.resize(41):this.zg.resize(41)},this)),window,"click",r(function(a){!ic(a.target,k,"comment-input")&&!this.k.L()&&(this.k.nb(l),this.k.collapse())},this)),D("no-comments",
this.b()),"click",r(this.ji,this)),Rb("no-comments",this.b())[1],"click",r(this.ji,this)),window,"click",r(function(a){!ic(a.target,k,"comment-input")&&!this.k.L()&&(this.k.nb(l),this.k.collapse())},this));this.jf.resize(41);this.zg.resize(41)};m.ji=function(a){a.preventDefault();a.stopPropagation();this.k.nb(j)};
m.Sc=function(a){W("/_comment",a.Qg,"POST","media_id="+this.e.id+"&text="+a.text+"&tweet="+a.Bg+"&facebook="+a.xd+(a.Z?"&parent_id="+a.Z:""));a.xd&&!a.Z&&(FB.api("/me/feed","POST",{message:a.text,name:this.e.name,link:this.e.link,picture:this.e.Ua,caption:"on XYLO",description:this.e.description},aa()),cf(this.k.ab,l))};m.Eb=function(a){u(this.eb,function(b){B(this.Fa.parentElement,b,A(a,b));this.F=A(a,b)?b:this.F},this)};function Wc(a){var b=s(),c=Math.floor((b-a)/6E4),b=l;0>c&&(b=j,c*=-1);if(60>c)return Ii(c,b,0);c=Math.floor(c/60);if(24>c)return Ii(c,b,1);c=new Date(s());c.setHours(0);c.setMinutes(0);c.setSeconds(0);c.setMilliseconds(0);c=Math.ceil((c.getTime()-a)/864E5);b&&(c*=-1);return 14>c?Ii(c,b,2):""}
function Ii(a,b,c){return!b&&0==c?(b=ya("{$num} minute ago",{num:a}),c=ya("{$num} minutes ago",{num:a}),1==a?b:c):b&&0==c?(b=ya("in {$num} minute",{num:a}),c=ya("in {$num} minutes",{num:a}),1==a?b:c):!b&&1==c?(b=ya("{$num} hour ago",{num:a}),c=ya("{$num} hours ago",{num:a}),1==a?b:c):b&&1==c?(b=ya("in {$num} hour",{num:a}),c=ya("in {$num} hours",{num:a}),1==a?b:c):!b&&2==c?(b=ya("{$num} day ago",{num:a}),c=ya("{$num} days ago",{num:a}),1==a?b:c):b&&2==c?(b=ya("in {$num} day",{num:a}),c=ya("in {$num} days",
{num:a}),1==a?b:c):""};function Ji(a,b,c,d){S.call(this);this.e=this.r=a;this.Ae=c||k;this.Uh=d||k;this.Eh=l;this.mh=!b;this.gd={};this.Ya=[];this.Wb={};this.Th={};this.fb=[];this.k=new Ci;this.Sd=new mf("Star");df(this.Sd,16,j);this.kh=new mf("Facebook");this.Qi=new mf("Twitter");this.Aa=new mf("Play");this.Uc=new mf("Plus");df(this.Uc,16,j);this.lc=0}t(Ji,S);m=Ji.prototype;m.J=function(){this.f=H(Hh,{media:this.e})};
m.H=function(a){Ji.d.H.call(this,a);var b=H(Hh,{media:this.e,description:this.e.description?ji(this.e.description):"",jc:Kf(this.e),Tj:this.Ae?this.Ae.id:k});a.innerHTML=b.innerHTML};
m.v=function(){Ji.d.v.call(this);this.Nb=D("viewers",this.b());var a=D("picture",this.b()),b=D("scrollable",this.b()),c=D("publisher",this.b()),d=D("title",this.b()),f=D("links",this.b());this.N=D("loading",this.b());var g=a.firstChild;this.km=D("tweet-holder",this.b());this.sb=D("tweets",this.b());this.Zb=D("dot-nav",this.b());this.z=D("comments",this.b());this.gc=D("no-comments",this.b());Ae(this.k,this.b());this.Sd.h(D("star",this.b()));this.kh.h(D("facebook",this.b()));this.Qi.h(D("twitter",this.b()));
this.Aa.h(D("play",this.b()));this.Uc.h(D("plus",this.b()));this.Ag=new Sc(5E3);!this.mh||this.e.nh?Ki(this,l,this.e.description,this.e.Me,this.e.Pi,this.e.vb):this.mh&&W("/_info/"+this.e.id,r(function(a){a=vg(wg(a.target));Ki(this,j,a.description,a.seen,a.tweets,a.comments)},this));Q(Q(Q(Q(Q(Q(Q(Q(Q(Q(Q(Q(Q(Q(Q(Q(Q(Q(Q(Q(Q(Q(Q(this.m(),window,"resize",wa(M,r(this.resize,this))),c,"click",r(function(){X.a().c("media-list",this.e.Ca.name,i,"/admin/_media/publisher/"+this.e.Ca.id,this.e.Ca.Q,this.e.Ca.description,
this.e.Ca.link,"/_publisher/"+this.e.Ca.id)},this)),this.Sd,"action",r(function(){Lf.a().c("star",this.e,Me(this.Sd));W("/_star",i,"POST","media_id="+this.e.id+(!Me(this.Sd)?"&delete=1":""))},this)),this.kh,"action",r(this.dk,this)),this.Qi,"action",r(this.tk,this)),this.Aa,"action",r(this.hk,this)),this.Uc,"action",r(this.kk,this)),this.Uc.b(),"mousedown",r(this.lk,this)),D("local",this.b()),"click",r(function(){P(D("link-select",this.b()),j);D("link-input",this.b()).select()},this)),this.k,"add",
r(this.Sc,this)),this.gc,"click",r(function(a){a.preventDefault();a.stopPropagation();this.k.nb(j)},this)),D("conv-link",this.b()),"click",r(function(a){a.preventDefault();a.stopPropagation();X.a().c("conversation",this.e,this.Ya,this.fb)},this)),D("tweets-link",this.b()),"click",r(function(a){a.preventDefault();a.stopPropagation();X.a().c("conversation",this.e,this.Ya,this.fb,j)},this)),this.k,"focus",r(function(){this.resize(25,j)},this)),this.k,"resize",r(function(a){this.resize(25+(a.target.xa-
41))},this)),this.Zb,"click",r(function(a){A(a.target,"dot")&&(Li(this,a.target),this.Ag.stop())},this)),this.Ag,Uc,r(function(){var a=this.rd&&Yb(this.rd)||D("dot",this.b());Li(this,a)},this)),window,"click",r(function(a){!ic(a.target,k,"comment-input")&&!this.k.L()&&(this.k.nb(l),this.k.collapse()&&this.resize(0))},this)),g,"load",function(){P(g,j);M(function(){R(g).height<R(a).height+50&&x(g,"fix-height");R(g).width>2*R(a).width?x(g,"pan-left"):R(g).height>2*R(a).height&&x(g,"pan-top");g.style.marginTop=
-R(g).height/2+"px";g.style.marginLeft=-R(g).width/2+"px";x(g,"show")})}),b,"scroll",r(function(){var h=(120-b.scrollTop)/100;Pd(c,Math.min(1,Math.max(h,0)));Pd(d,Math.min(1,Math.max(h,0)));Pd(f,Math.min(1,Math.max(h,0)));Pd(g,Math.min(0.5,Math.max(h,0.1)));B(a,"scrolled",10<b.scrollTop)},this)),this.z,"scroll",r(this.xi,this)),this.z,"click",r(this.hf,this)),D("desc-link",this.b()),"click",r(function(){var c=Db(a,"scrolled");(new se(b,[b.scrollLeft,b.scrollTop],[b.scrollLeft,c?170:0],300)).play()},
this));this.Ae&&Q(this.m(),D("prev-link",this.b()),"click",r(function(){X.a().c(pg,this.Ae,j,i,this.k.L())},this));this.Uh&&this.k.Ra(this.Uh);this.e.subscribe(Hf,function(a){this.Rb(a,j)},this);this.e.subscribe(If,this.eg,this);this.e.subscribe("add-tweet",function(a){this.tc(a,j)},this);this.e.subscribe(Jf,function(a,b,c){Mi(this,a,c)},this)};
function Ki(a,b,c,d,f,g){c?(a.e.description=c,D("description",a.b()).innerHTML=ji(c),P(D("scrollable",a.b()),j)):(P(D("desc-link",a.b()),l),P(D("scrollable",a.b()),l));c=Ma(d,function(a){var c=b?yg(V.a(),a):a;if(c.id!=V.a().q.id){P(this.Nb,j);this.Eh=j;var d=H(Ih,{j:c});this.Nb.appendChild(d);this.gd[a.id]=d;Q(this.m(),d,"click",function(){X.a().c(qg,a)})}return c},a);Gb(a.e.hc,function(a){Mi(this,a)},a);a.fb=Ma(f,function(a){a=b?new Fi(a):a;this.tc(a);this.rd=this.Zb.firstChild;x(this.rd,"selected");
return a},a);f.length&&a.Ag.start();a.z&&P(a.z.parentElement,j);P(a.gc,!g.length);g=Ma(g,function(a,c){var d=b?new Ei(a):a;d.Z||this.Rb(d,c==g.length-1);return d},a);P(a.N,l);a.resize();b&&(a.e.Pi=a.fb,a.e.vb=g,a.e.Me=c,a.e.nh=j)}m.zb=function(){return this.k.Ad()||!!this.k.qb||!!this.k.L()};
function Li(a,b){if(b){u(Xb(a.Zb),function(a){return z(a,"selected")});a.rd=b;x(a.rd,"selected");var c=Pa(Xb(a.Zb),function(a){return a==b});(new se(a.sb,[a.sb.scrollLeft,a.sb.scrollTop],[320*c,a.sb.scrollTop],200)).play();a.resize()}}
m.Sc=function(a){W("/_comment",a.Qg,"POST","media_id="+this.e.id+"&text="+a.text+"&tweet="+a.Bg+"&facebook="+a.xd+(a.Z?"&parent_id="+a.Z:""));a.xd&&!a.Z&&(FB.api("/me/feed","POST",{message:a.text,name:this.e.name,link:this.e.link,picture:this.e.Ua,caption:"on XYLO",description:this.e.description},aa()),cf(this.k.ab,l));Sf.a().ib(this.e.id,a.xd,a.Bg)};
m.tc=function(a,b){var c=ji(a.text),c=c.replace(/#(\S+)/g,function(a,b){return'<a target="_blank" href="http://twitter.com/search?q=%23'+b+'">'+a+"</a>"}),c=c.replace(/@(\S+)/g,function(a,b){return'<a target="_blank" href="http://twitter.com/'+b+'">'+a+"</a>"}),c=H(Jh,{Mb:a,text:c,timestamp:Wc(a.time.getTime())}),d=F("div","dot");Xc(Vc.a(),a.time,D("timestamp",c));b?(Wb(this.sb,c,0),Wb(this.Zb,d,0),10<Xb(this.sb).length&&(G(this.sb.lastChild),G(this.Zb.lastChild),Li(this,d))):(this.sb.appendChild(c),
this.Zb.appendChild(d));this.resize();P($b(this.sb),j)};
m.Rb=function(a,b){this.Ya.push(a);this.Wb[a.id]=a;P(this.gc,l);var c=H(Kh,{prefix:"infocomment",ib:a,text:ji(a.text),timestamp:Wc(a.time.getTime()),mi:a.j.id==V.a().q.id});Xc(Vc.a(),a.time,D("timestamp",c));if(a.Z){var d=this.Th[a.Z];d.parentNode&&d.parentNode.insertBefore(c,d.nextSibling)}else this.z.appendChild(c);this.Th[a.Z||a.id]=c;this.resize(this.k.Ad()?25:0,j);u(a.pi,function(a){this.Rb(a,b)},this);b&&this.e.hc[a.j.id]&&this.k.qi(a.Z||a.id,a.j)};
function Mi(a,b,c){c&&a.gd[b.id]?z(a.gd[b.id],"online"):b.id!=V.a().q.id&&(a.gd[b.id]||(c=H(Ih,{j:b}),a.gd[b.id]=c,Wb(a.Nb,c,1),Q(a.m(),c,"click",function(){X.a().c(qg,b)})),P(a.Nb,j),bc(a.Nb.firstChild,"WATCHING"+(a.Eh?" + SEEN":"")),x(a.gd[b.id],"online"))}m.hf=function(a){var a=a.target,b=ic(a,k,"comment");if(b){var b=b.id.split("-")[1],c=this.Wb[b];A(a,"reply")?X.a().c("reply-comment",c.Z?this.Wb[c.Z]:c,c.j):A(a,"remove")&&this.e.c(If,b)}};
m.eg=function(a){var b=C("infocomment-"+a),c=b.nextSibling;G(b);for(Sa(this.Ya,function(b){return b.id==a});c&&A(c,"reply");)c=c.nextSibling,G(c)};m.xi=function(){B(this.z.parentElement,"top-grad",!!this.z.scrollTop);var a=this.z.style.maxHeight,a=a.substring(0,a.length-2),b=R(this.z).height;B(this.z.parentElement,"bottom-grad",this.z.scrollTop<this.z.scrollHeight-a-5&&b>=a)};
m.resize=function(a,b){this.lc=a!=i?a:this.lc;this.z&&this.z.parentElement&&(zd(this.z,"max-height",E().height-Gd(this.z.parentElement).y-110-this.lc+"px"),this.xi());b&&M(r(function(){(new se(this.z,[this.z.scrollLeft,this.z.scrollTop],[this.z.scrollLeft,this.z.scrollHeight],400)).play()},this),0)};
m.dk=function(){P(C("overlay"),j);FB.ui({method:"feed",name:this.e.name,link:this.e.link,Q:this.e.Ua,caption:"on XYLO",description:this.e.description},function(){P(C("overlay"),l)});Ni(Sf.a(),this.e.id,j,l)};m.tk=function(){var a=window.open("https://twitter.com/share?url="+this.e.link+"&text=I'm watching "+this.e.name+" "+this.e.link,"Tweet","height=320,width=550");a.moveTo(screen.width/2-225,screen.height/2-150);a.focus();Ni(Sf.a(),this.e.id,l,j)};m.hk=function(){var a=Of(this.r);U.a().c(wf,a)};
m.lk=function(){if(!U.a().g()||!U.a().g().async)this.Aa.setActive(j),M(r(function(){this.Aa.setActive(l)},this),2E3)};m.kk=function(){if(!U.a().g()||!U.a().g().async){var a=Of(this.r);U.a().c(wf,a);this.Aa.setActive(l);cf(this.Uc,l)}else yf().c(Vf,this.r,Me(this.Uc)),Ef.a().c("flash","Added to queue",this.e.name,i,this.e.Ua)};function Oi(a,b,c,d,f,g){S.call(this);this.sa=of();this.$h=a||k;this.fd=b||k;this.Nf={};this.ug=c||k;this.Cc=d||k;this.ah=g||k;this.Vj=f||k;this.of=this.sa?new hi:k;this.Pc=this.Ih=0}t(Oi,S);
Oi.prototype.H=function(a){Oi.d.H.call(this,a);a.innerHTML="";a.scrollTop=0;x(this.b(),"ios-scroll");(this.Cc||this.ug)&&Pi(this);!this.Cc&&this.ah&&W(this.ah,r(function(a){a=Yf(a.target);a.description&&this.Hd?(D("description",this.Hd).innerHTML=ji(a.description),this.Ih=R(this.Hd).height,this.resize()):a.description&&Pi(this)},this));this.N=F("div","loading",F("div","loading-spinner"));this.b().appendChild(this.N);P(this.N,l);A(this.b(),"starred")&&(this.Rc=F("div","no-comments","Favorities will appear here."),
this.b().appendChild(this.Rc));this.Ce=F("div","medias");this.b().appendChild(this.Ce);Q(this.m(),window,"resize",wa(M,r(this.resize,this)));this.fd?(P(this.N,j),W(this.fd,r(function(a){P(this.N,l);a=vg(wg(a.target));a=Ma(a,function(a){return new Gf(a)});u(a,this.Xe,this);this.Pc=R(this.Ce).height;this.resize()},this))):this.$h&&(u(this.$h,this.Xe,this),this.Pc=R(this.Ce).height,this.resize())};
Oi.prototype.Xe=function(a){this.Rc&&P(this.Rc,l);var b=H($h,{media:a}),c=D("preview",b);this.Ce.appendChild(b);if(this.sa){var d=this.of,f=new gi(b,i);ii(d,f)}Q(Q(this.m(),b,"click",r(function(){X.a().c(pg,a)},this)),c,"click",r(function(b){b.stopPropagation();b=Of(a);U.a().c(wf,b);X.a().c(pg,a)},this));this.Nf[a.id]=b};Oi.prototype.resize=function(){Ld(this.b(),E().height-40-(ic(this.b(),k,"tabbed")?30:0))};
function Pi(a){a.Hd=H(Oh,{Ua:a.ug,description:a.Cc?ji(a.Cc):"",link:a.Vj});a.b().appendChild(a.Hd);a.Ih=R(a.Hd).height;a.resize()};function Qi(a){S.call(this);this.Fg=this.r=a;this.eb=["activity","starred"]}t(Qi,S);Qi.prototype.H=function(a){Qi.d.H.call(this,a);x(a,"profile");x(a,"ios-scroll");mc(a,Yh)};
Qi.prototype.v=function(){this.Fa=D("tabs",this.b());W("/_star/"+this.Fg.id,r(function(a){a=Yf(a.target);a=Ma(a,function(a){return new Gf(a)});this.Td=new Oi(a);this.Td.h(D("starred-content",this.b()))},this));W("/_activity/"+this.Fg.id,r(function(a){a=Yf(a.target);this.qg=new Ri(a,this.Fg.id);this.qg.h(D("activity-content",this.b()))},this));Q(this.m(),this.Fa,"click",r(function(a){a=ic(a.target,"li");this.Eb(a)},this));Lf.a().subscribe("star",function(a,b){if(b)this.Td.Xe(a);else{var c=this.Td,
d=c.Nf[a.id];d&&(tc(d),Kb(c.Nf,a.id))}},this)};Qi.prototype.Eb=function(a){u(this.eb,function(b){B(this.Fa.parentElement,b,A(a,b));this.F=A(a,b)?b:this.F},this)};function Ri(a,b){S.call(this);this.Yi=a;this.Yd=b||k;this.S=0;this.bc=l;this.oh=[];this.nd=[];this.Oc=[];this.Jg=[]}t(Ri,S);
Ri.prototype.H=function(a){Ri.d.H.call(this,a);a.innerHTML="";a.scrollTop=0;x(a,"stream");x(a,"ios-scroll");this.ld=F("div","activities");this.b().appendChild(this.ld);this.N=F("div","spinner");this.b().appendChild(this.N);P(this.N,l);this.Rc=F("div","no-comments",this.Yd?"Your activity will appear here.":"Friends' activity will appear here.");this.b().appendChild(this.Rc);Si(this,this.Yi);V.a().subscribe("new-activity",function(a){(this.Yd==a.user.id||!this.Yd&&a.user.id!=V.a().q.id)&&Ti(this,a,
i,i,j)},this);Q(Q(this.m(),this.b(),"scroll",r(function(){!this.bc&&this.b().scrollTop+E().height>this.b().scrollHeight-60&&Ui(this)},this)),window,"resize",wa(M,r(this.resize,this)));this.resize()};function Ui(a){P(a.N,j);W("/_activity"+(a.Yd?"/"+a.Yd:"")+"?offset="+a.S,r(function(a){this.oh[String(a.target.Fd)]||(this.oh[String(a.target.Fd)]=j,a=Yf(a.target),this.bc=!a.length,B(this.N,"finished",this.bc),P(this.N,this.bc),Si(this,a))},a))}
function Si(a,b){a.nd=[];a.Oc=[];u(b,function(a){this.S++;switch(a.type){case "session":var a=a.session,b=a.channel_id in this.nd?this.nd[a.channel_id]:[];b.push(a);this.nd[a.channel_id]=b;break;case "comment":a=a.comment,b=a.media.id in this.Oc?this.Oc[a.media.id]:[],b.push(a),this.Oc[a.media.id]=b}},a);Gb(a.nd,function(a){Ti(this,i,a,"session")},a);Gb(a.Oc,function(a){Ti(this,i,a,"comment")},a)}
function Ti(a,b,c,d,f){P(a.Rc,l);var b=b||k,c=c||k,g=b?b.type:d,h=[],n=b?[yg(V.a(),b.user)]:[],q=b?gd(b.time+"Z"):k;c&&u(c,function(a){Oa(n,function(b){return b.id==a.user.id})||n.push(yg(V.a(),a.user));var b=gd((a.time||a.tune_in)+"Z");q=q&&q.getTime()>b.getTime()?q:b;"session"==g&&u(a.media,function(a){!this.Oc[a.id]&&!Oa(h,function(b){return b.id==a.id})&&h.push(a)},this)},a);switch(g){case "session":var d=b?b.session:c[0],v=T.a().get(d.channel_id),h=b?b.session.media:h,b=H(Mh,{ia:n,V:v,time:Wc(q.getTime()),
Oi:!!d.tune_out});break;case "comment":var h=b?[b.comment.media]:[c[0].media],y=b?[new Ei(b.comment)]:[];c&&u(c,function(a){y.push(new Ei(a))});b=H(Nh,{vb:y.reverse().slice(0,3),ia:n,media:h[0]});break;default:return}if(h.length){Xc(Vc.a(),q,D("timestamp",b));d=Pa(a.Jg,function(a){return a.time<q.getTime()});Wa(a.Jg,d,0,{time:q,element:b});var J=D("medias",b);u(h,function(a){var b=new Gf(a),a=H($h,{media:b}),c=D("preview",a);D("thumb",a);J.appendChild(a);Q(Q(this.m(),a,"click",function(){X.a().c(pg,
b)}),c,"click",function(a){a.stopPropagation();a=Of(b);U.a().c(wf,a);X.a().c(pg,b)})},a);f?Wb(a.ld,b,0):c?Wb(a.ld,b,d):a.ld.appendChild(b);M(wa(x,b,"show"))}}Ri.prototype.resize=function(){var a=E().height-40-(ic(this.b(),k,"tabbed")?40:10);Ld(this.b(),a);R(this.ld).height<a&&Ui(this)};function Vi(){S.call(this);this.sa=of();this.aj=new Bi;this.eb={};this.Jb=[];this.Wc=[]}t(Vi,S);m=Vi.prototype;
m.v=function(){Vi.d.v.call(this);this.md=D("arrow",this.rc);this.lf=C("sidebar-content");this.Zh=C("media-list");this.$f=C("profile");this.Yg=C("conversation");this.rc=C("toolbar");this.Fa=D("tabs",this.b());var a=new Pe(document);u(Xb(this.Fa),function(a){var b=Cb(a)[0];this.eb[b]=a;this.Jb.push(b)},this);this.Rf();W("/_activity",r(function(a){a=Yf(a.target);this.qg=new Ri(a);this.qg.h(C("stream"))},this));this.Td=new Qi(V.a().q);this.Td.h(C("my-profile"));this.Y?(this.K=C("info"),this.F="info",
Wi(this,"info","info")):(this.K=C("stream"),this.F="stream",Wi(this,"info","stream"));var b="left";u(this.Jb,function(a){var c=D(a,this.lf);a==this.F?b="right":x(c,b)},this);this.Wc=[this.K,""];x(this.K,"current");if(this.sa){this.aj.h(C("admin"));var c=H(Ph,{name:"ADMIN",className:"admin"});this.Fa.appendChild(c);this.eb.admin=c;this.Jb.push("admin")}Xi(this);Q(Q(Q(Q(this.m(),D("back-button",this.rc),"click",r(function(a){var b=this.Wc.shift();this.navigate(b[0],j,b[1]);Xi(this);a.stopPropagation()},
this)),this.Fa,"click",r(function(a){var b=this.F,c=ic(a.target,"li"),h=Cb(c)[0];Wi(this,this.F,h);x(c,"selected");Xi(this);b!=this.F&&a.stopPropagation()},this)),this.rc,"click",r(function(a){((a=ic(a.target,"li"))&&Cb(a)[0]==this.F||!a)&&(new se(this.K,[this.K.scrollLeft,this.K.scrollTop],[this.K.scrollLeft,0],300)).play()},this)),a,"key",r(function(a){a.ctrlKey&&"68"==a.keyCode&&Db(this.b(),"dark")},this));O.a().subscribe(Zc,function(a){B(this.b(),"toggled",a);M(r(function(){B(this.b(),"collapsed",
!a)},this),!a?500:0)},this);X.a().subscribe("navigate",this.navigate,this);X.a().subscribe("conversation",this.Lk,this);X.a().subscribe("media-list",this.Ok,this);X.a().subscribe(pg,this.Nk,this);X.a().subscribe(qg,this.Pk,this);T.a().subscribe(vf,this.Rf,this);U.a().subscribe(wf,this.Rf,this);T.a().subscribe(tf,this.ck,this);O.a().subscribe("toggle-admin",function(a){B(this.b(),"admin",a);a?(O.a().c(Zc,j),Wi(this,this.F,"admin")):"admin"==this.F&&Wi(this,"admin","info")},this)};
m.Rf=function(a){if(a=a||T.a().l.g())if(this.zc=a.media,!this.Y||this.zc.id!=this.Y.r.id){var a=this.Y&&this.Y.k.L()?this.Y.k.L():k,b=this.Y?this.Y.e:k;tc(this.Y);this.Y=new Ji(this.zc,l,b,a);this.Y.h(C("info"))}};m.ck=function(a){a=a||T.a().l;if((this.zc=a.g()&&a.g().media)&&(!this.Y||this.zc.id!=this.Y.r.id))tc(this.Y),this.Y=new Ji(this.zc),this.Y.h(C("info"))};
function Wi(a,b,c){var d=D(c,a.lf),f=Ka(a.Jb,b),b=Ka(a.Jb,c),g=(f=f<b)?0:a.Jb.length-1,h=f?g<a.Jb.length:0<=g;for(g;h;g+=f?1:-1){var n=D(a.Jb[g],a.lf);if(f&&g>b||!f&&g<b)x(n,"right"),z(n,"left");else if(f&&g<b||!f&&g>b)B(n,"left",f),x(n,"right");else if(g==b){z(n,"right");z(n,"left");break}}a.F=c;Wa(a.Wc,0,0,[a.K,""]);z(a.K,"current");a.K=d;x(a.K,"current");Xi(a)}
m.navigate=function(a,b,c){if(a!=this.K){var d=A(this.K,"screen");b?(z(this.K,"on"),z(this.K,"current"),x(a,"current"),this.K=a):(B(this.K,"on",!d),b=[this.K,fc(D("back-title",this.rc))],Wa(this.Wc,0,0,b),z(this.K,"current"),this.K=a,x(this.K,"current"));B(this.rc,"back",A(this.K,"slide"));c&&bc(D("back-title",this.rc),c)}};m.Lk=function(a,b,c,d){(new Hi(a,b,c,d)).h(this.Yg);X.a().c("navigate",this.Yg,l,a.name)};
m.Ok=function(a,b,c,d,f,g,h){(new Oi(b,c,d,f,g,h)).h(this.Zh);X.a().c("navigate",this.Zh,l,a,d,f)};m.Nk=function(a,b,c,d){if(this.Y&&a.id==this.Y.r.id){z(this.rc,"back");for(a=this.Wc[0][0];a&&A(a,"slide");)a=this.Wc.shift();Wi(this,this.F,"info")}else{var f=C("media-info");(new Ji(a,b,c,d)).h(f);X.a().c("navigate",f,l,a.name)}O.a().c(Zc,j)};m.Pk=function(a){if(!this.ag||!(this.ag.r.id==a.id&&this.K==this.$f))this.ag=new Qi(a),this.ag.h(this.$f),X.a().c("navigate",this.$f,l,a.name),O.a().c(Zc,j)};
function Xi(a){var b=Math.round(R(a.eb[a.F]).width/2+Gd(a.eb[a.F]).x);a.md.style.transform="translate3d("+b+"px, 0,0)";a.md.style.msTransform="translate3d("+b+"px, 0,0)";a.md.style.WebkitTransform="translate3d("+b+"px, 0,0)";a.md.style.MozTransform="translate3d("+b+"px, 0,0)";a.md.style.pl="translate3d("+b+"px, 0,0)"};function Yi(a){return'<div class="main"><div id="stage" class="stage"><div id="ytplayer"></div><div id="stagecover"><div class="message"><span></span><div class="spinner" style="display:none"></div></div><div class="fullscreen"></div><div class="expand"></div><div class="play" style="display: none"><div></div></div><div class="pause" style="display: none"><div></div></div></div><div id="logo"></div></div><div id="guide" class="guide'+(a.sh?" toggled":" collapsed")+(a.sidebar?" sidebar-toggled":"")+
'"><div id="channels" class="channels"></div><div class="header" id="header"><div class="times"><div id="now-left" class="left browse">&#9664;<span> NOW</span></div><div id="now-right" class="right browse"><span>NOW </span>&#x25B6;</div></div></div><div id="my-ticker" class="my-ticker" style="display:none"><div class="me" style="background:'+I(a.j.color)+";border-color:"+I(a.j.color)+';"><img src="'+I(a.j.Q)+'"/></div></div><div id="ticker" class="ticker"><div id="go-live" class="go-live">GO LIVE</div></div><div class="pan-handle" id="pan-handle"></div></div><div id="controller" class="controller'+
(a.sh?" guide-toggled":" collapsed")+(a.sidebar?" sidebar-toggled":"")+'"><div class="background"></div><div class="left"><div id="guide-toggle" class="guide-toggle dark button">GUIDE</div><div class="controls"><div class="restart dark button"><div class="icon"></div></div><div class="play dark button"><div class="icon"></div></div><div class="volume dark button"><div class="icon"></div></div></div><div class="border"></div></div><div class="right"><div id="info-toggle" class="info-toggle dark button"><div class="icon"></div></div><div id="admin-toggle" class="admin-toggle dark button" style="display: none"><div class="icon"></div><div id="toggle-pending" class="pending" style="display:none"></div></div><div id="sidebar-toggle" class="sidebar-toggle dark button"><div class="icon"></div></div><div class="border"></div></div><div class="progress" style="display: none"><div class="elapsed animate"><div class="seek"></div></div><div class="title"></div><div class="current-time"></div><div class="duration"></div></div></div><div id="sidebar" class="'+
(a.sidebar?"toggled":"collapsed")+'"><div id="toolbar"><div class="back"><div class="back-button"><div>BACK</div></div><div class="back-title"></div></div><ul class="tabs"><li class="info tab selected"><div class="label">NOW</div></li><li class="stream tab"><div class="label">STREAM</div></li><li class="profile tab"><div class="label">ME</div></li></ul><div class="radial-grad"></div><div class="arrow"></div></div><div id="sidebar-content"><div id="info" class="screen info"><div class="no-info">Pick a channel or play a story.</div></div><div id="stream" class="screen stream"><div class="loading loading-activity"><div class="loading-spinner"></div></div></div><div id="my-profile" class="screen profile"></div><div id="admin" class="screen admin"></div><div id="media-list" class="slide media-list"></div><div id="conversation" class="slide"></div>'+
(a.Ye?'<div id="admin-col-list" class="slide admin"></div><div id="admin-list" class="slide admin-list"></div>':"")+'<div id="media-info" class="slide info"></div><div id="profile" class="slide profile"></div></div></div><div id="notify" class="notify"></div><div id="welcome" class="welcome" style="display:none"><div class="thanks"></div><div class="guide"></div><div class="friends"></div><div class="sidebar"></div><div class="close"></div></div></div>'};function Sf(){}ka(Sf);_gaq=[];Sf.prototype.init=function(){_gaq.push(["_setAccount","UA-38058655-1"]);_gaq.push(["_trackPageview"]);var a=document.createElement("script");a.type="text/javascript";a.async=j;a.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)};Sf.prototype.login=function(){_gaq.push(["_trackEvent","Users","Login",V.a().q.id])};
function Zf(a,b){_gaq.push(["_trackEvent","Media","Play",b.id]);_gaq.push(["_trackEvent","Users","Play",V.a().q.id])}Sf.prototype.Ub=function(a,b){a.C||(_gaq.push(["_trackEvent","Channel","OptOut",b.id]),_gaq.push(["_trackEvent","Channel","OptIn",a.id]))};
Sf.prototype.ib=function(a,b,c){_gaq.push(["_trackEvent","Media","Comment",a.id]);_gaq.push(["_trackEvent","Users","Comment",V.a().q.id]);b&&_gaq.push(["_trackEvent","Facebook","Comment",V.a().q.id]);c&&_gaq.push(["_trackEvent","Twitter","Comment",V.a().q.id])};
function Ni(a,b,c,d){_gaq.push(["_trackEvent","Media","Share",b.id]);_gaq.push(["_trackEvent","Users","Share",V.a().q.id]);c&&_gaq.push(["_trackEvent","Facebook","Share",V.a().q.id]);d&&_gaq.push(["_trackEvent","Twitter","Share",V.a().q.id]);W("/_share",ie(),"POST","facebook="+c+"&twitter="+d)}ga("_gaq",_gaq);function Zi(){N.call(this);this.Xh=l}t(Zi,N);ka(Zi);Zi.prototype.init=function(a){this.qb=a;a=(new appengine.Channel(unescape(a))).open();a.onmessage=r(this.gk,this);a.onclose=r(this.hi,this);window.onbeforeunload=r(this.hi,this);return this};
Zi.prototype.gk=function(a){var b=vg(a.data);switch(b.type){case "viewer_change":var a=yg(V.a(),b.user),c=gd(b.time+"Z");a.ke&&a.ke.end(c);if(b.last_channel_id){var d=T.a().get(b.last_channel_id);d.c("remove-viewer",a);a.sd&&a.sd.c(Jf,a,d,j)}var f=b.channel_id&&T.a().get(b.channel_id);f&&(c=new Rf(b.session_id,a,f,c),a.ke=c,f.c(Wf,c),(c=f.g())&&c.media.c(Jf,a,f));break;case "new_comment":a=new Ei(b.comment);if(a.j.id!=V.a().q.id&&(c=b.tweet?new Fi(b.tweet):k,d=Mf(Lf.a(),b.comment.media)))d.c(Hf,a),
c&&d.c("add-tweet",c);break;case "new_activity":V.a().c("new-activity",b.activity);break;case "update_programs":a=b.programs;f=T.a().get(b.channel_id);u(a,function(a){f.c(Xf,a)},this);break;case "new_programs":u(b.programs,r(function(a){var a=new Nf(a),c=T.a().get(b.channel_id);if(c&&(c.c(Uf,a),!T.a().l||!T.a().l.g()))T.a().c(tf,c),T.a().c(vf,a)},this));break;case "twitter_auth":V.a().q.c("twitter-auth")}};
Zi.prototype.hi=function(){if(!this.Xh){var a=T.a().l.C&&T.a().l.sd&&Math.floor(U.a().getCurrentTime());W("/_settings",ie(),"POST","show_guide="+O.a().Jc+"&show_sidebar="+O.a().Zc+(a?"&current_seek="+a:""));this.Xh=j}};function $i(){N.call(this);this.dm=[]}t($i,N);ka($i);$i.prototype.Jf=function(a){Gb(a,r(function(a,c){u(a,r(function(a){a=new Nf(a);T.a().wc[c]&&T.a().wc[c].Sb(a)},this))},this))};var aj=l;function bj(a){a.match(/[\d]+/g).length=3}
if(navigator.plugins&&navigator.plugins.length){var cj=navigator.plugins["Shockwave Flash"];cj&&(aj=j,cj.description&&bj(cj.description));navigator.plugins["Shockwave Flash 2.0"]&&(aj=j)}else if(navigator.mimeTypes&&navigator.mimeTypes.length){var dj=navigator.mimeTypes["application/x-shockwave-flash"];(aj=dj&&dj.enabledPlugin)&&bj(dj.enabledPlugin.description)}else try{var ej=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7"),aj=j;bj(ej.GetVariable("$version"))}catch(fj){try{ej=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6"),
aj=j}catch(gj){try{ej=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),aj=j,bj(ej.GetVariable("$version"))}catch(hj){}}};function ij(a,b,c,d,f,g,h,n){this.fd=a;this.cj=b;this.Cc=c;this.lm=d;this.am=f;this.Ul=g;this.Ga=h;this.xa=n;this.Zk=[];this.ef=[];this.Jl=[];this.gm=[]}ij.prototype.qh=ca("cj");ij.prototype.lg=function(a){this.w=a;return this};function jj(a){this.fd=a;this.Sk=k}function kj(a){this.fd=a;this.Sk=this.mm=k};function ug(a,b,c){ij.call(this,"http://www.youtube.com/watch?v="+encodeURIComponent(String(a)),b,c,"application/x-shockwave-flash");this.el=a;this.Zk=[new jj("http://i.ytimg.com/vi/"+a+"/default.jpg")];this.lg(new kj("http://www.youtube.com/v/"+encodeURIComponent(String(a))+"&hl=en&fs=1&autoplay=1"))}t(ug,ij);
var tg=RegExp("http://(?:[a-zA-Z]{2,3}\\.)?(?:youtube\\.com/watch)(?:\\?(?:[\\w=-]+&(?:amp;)?)*v=([\\w-]+)(?:&(?:amp;)?[\\w=-]+)*)?(?:#[!]?(?:(?:(?:[\\w=-]+&(?:amp;)?)*(?:v=([\\w-]+))(?:&(?:amp;)?[\\w=-]+)*)|(?:[\\w=&-]+)))?[^\\w-]?","i");function lj(a){S.call(this);this.il=IPAD||IPHONE?k:Zi.a().init(a);this.fj=new nh;this.uj=new nf;this.Rk=new Vi;this.w=new yh;this.ak=new uh}t(lj,S);lj.prototype.H=function(a){lj.d.H.call(this,a);var b=H(Yi,{j:V.a().q,Ye:of(),sh:V.a().q.Mk,sidebar:V.a().q.Qk});Wb(a,b,0)};
lj.prototype.v=function(){lj.d.v.call(this);this.fj.h(C("controller"));this.uj.h(C("guide"));this.Rk.h(C("sidebar"));this.w.h(C("stage"));this.ak.h(C("notify"));if(!V.a().q.fl){V.a();var a=C("welcome");P(a,j);Q(this.m(),a,"click",function(){P(a,l);W("/_welcomed",ie(),"POST")})}Q(this.m(),document.body,"touchmove",function(a){ic(a.target,"div","ios-scroll")||a.preventDefault()});Q(this.m(),window,"click",function(a){var c=ic(a.target,"a");if(c=c?c.href:k)if((c=c.match("#(.*):(.*)"))&&c.length)switch(a.preventDefault(),
a.stopPropagation(),c[1]){case "user":a=V.a().get(c[2]);X.a().c(qg,a);break;case "channel":a=T.a().get(c[2]);T.a().c(tf,a);break;case "info":a=Lf.a().get(c[2]),X.a().c(pg,a)}});O.a().subscribe("toggle-info",function(){var a=C("login"),c=C("static-content"),d=C("pages");z(a,"hide");x(a,"show");c.style.height=R(d).height+80+"px";mj(j)},this)};
function mj(a){var b=C("login"),c=C("static-content"),d=C("pages"),f=A(b,"app");B(b,"expanded",a);C("uvTab")&&B(C("uvTab"),"show",f&&a);a?(f?c.style.bottom=-R(d).height-80+"px":c.style.top=Math.max(10,E().height-280)+"px",a=f?Math.min(E().height-100,c.scrollHeight+80):Math.min(E().height-435,c.scrollHeight+190),!f||f&&!b.scrollTop?(f=new se(b,[b.scrollLeft,b.scrollTop],[b.scrollLeft,a],300),x(b,"scrolling"),f.play(),L(f,"end",function(){z(b,"scrolling")})):b.scrollTop=a):(c.style.top="",c.style.height=
"",f?M(function(){z(b,"show")},200):c.className="")}
function nj(){var a=C("fb-login"),b=C("static-content"),c=C("login");x(a,"disabled");x(a,"spin");W("/_session",function(a){if(200==mh(a.target)){var f=Yf(a.target);if(f.error)bc(C("error"),f.error),oj("error","Yikes...");else{var a=f.token,g=f.channels,h=f.programs,n=f.current_user,f=f.viewer_sessions;if(!Jb(n)){var q=V.a();q.q=yg(q,n)}T.a().Jf(g);$i.a().Jf(h);g=T.a();u(f,r(function(a){var b=yg(V.a(),a.user),c=V.a();Oa(c.Tf,function(a){return a.id==b.id})||c.Tf.push(b);var c=this.wc[a.channel_id],
d=gd(a.tune_in+"Z"),f=a.tune_out?gd(a.tune_out+"Z"):k,a=new Rf(a.id,b,c,d,f);b.ke=a;c&&(c.hd.push(a),c.c(Wf,a),(a=c.g())&&a.media.c(Jf,b,c))},g));g=T.a();g.l=g.wc[n.current_channel]||g.xc[0];g.l=zf(g)||g.l;g.l&&g.Cg(g.l.g());Vc.a().init();(new lj(a)).h(document.body);Sf.a().login();a=document.createElement("script");a.type="text/javascript";a.async=j;a.src=("https:"==document.location.protocol?"https://":"http://")+"widget.uservoice.com/WGHjF5nSR8jL1GxXyQNxWA.js";n=document.getElementsByTagName("script")[0];
n.parentNode.insertBefore(a,n);M(function(){M(function(){x(c,"hide");M(function(){P(C("homepage"),l);x(c,"app");x(b,"faq")},600)},600)},300)}}else 500==mh(a.target)?oj("error","Opps, check back later"):oj("wait")},"POST")}function oj(a,b){var c=C("fb-login");if(a){var d=D("power",c);x(d,a)}b&&(d=D("waitlist",c),bc(d,b));z(c,"spin");x(c,"disabled");P(c,j);x(c,"show");x(c,"waitlist")}
function oh(a){var b=parseInt(a,10),a=Math.floor(b/3600),c=Math.floor((b-3600*a)/60),b=b-3600*a-60*c;10>c&&(c=(a?"0":"")+c);10>b&&(b="0"+b);return(a?a+":":"")+(c?c+":":"")+b}
ga("brkn.Main.staticInit",function(){var a=C("fb-login"),b=C("homepage"),c=C("login"),d=C("static-content"),f=C("pages"),g=C("footer"),h=l;x(b,"hide");var n=F("img");n.src="/static/img/homepage.jpg";L(n,"load",function(){z(b,"hide");x(b,"show")});M(function(){P(a,j);M(wa(x,a,"show"),400)},100);L(c,"click",function(a){"static-scrollable"==a.target.id&&(a=A(c,"app"),h=l,a?mj(h):(a=new se(c,[c.scrollLeft,c.scrollTop],[c.scrollLeft,0],300),a.play(),L(a,"end",wa(mj,h))))});L(c,"scroll",function(){!A(c,
"scrolling")&&1>c.scrollTop&&(h=l,mj(h))});L(g,"click",function(a){var a=ic(a.target,k,"section"),b=A(c,"app");a&&(h=j,d.className=a.id,d.style.height=R(f).height+(b?80:220)+"px",mj(h))});L(window,"resize",wa(mj,h));Sf.a().init();var q=C("chord-1"),v=C("chord-2"),y=C("chord-3"),J=C("chord-4"),Z=C("mp3-1"),Y=C("mp3-2"),xa=C("mp3-3"),gb=C("mp3-4");Z.volume=0.5;Y.volume=0.5;xa.volume=0.5;gb.volume=0.5;L(q,"click",function(){Z.load();Z.play()});L(v,"click",function(){Y.load();Y.play()});L(y,"click",function(){xa.load();
xa.play()});L(J,"click",function(){gb.load();gb.play()});M(function(){x(q,"strike");Z.play()},500);M(function(){z(q,"strike");x(v,"strike");Y.play()},800);M(function(){z(v,"strike");x(y,"strike");xa.play()},1100);M(function(){z(y,"strike");x(J,"strike");gb.play()},1400);M(function(){z(J,"strike");x(y,"strike");xa.load();xa.play()},1700);M(function(){z(y,"strike");x(v,"strike");Y.load();Y.play()},2E3);M(function(){z(v,"strike");x(q,"strike");Z.load();Z.play()},2300);M(function(){z(q,"strike")},2600)});
ga("brkn.Main.auth",function(){FB.getLoginStatus(function(a){if("connected"===a.status)nj();else{var b=C("fb-login");L(b,"click",function(){x(b,"disabled");FB.login(function(a){a.authResponse?nj():z(b,"disabled")},{scope:"email"})})}})});