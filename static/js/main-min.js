function e(a){throw a;}var i=void 0,j=!0,k=null,l=!1;function aa(){return function(){}}function ba(a){return function(b){this[a]=b}}function ca(a){return function(){return this[a]}}function da(a){return function(){return a}}var n,ea=ea||{},fa=this;function ga(a,b){var c=a.split("."),d=fa;!(c[0]in d)&&d.execScript&&d.execScript("var "+c[0]);for(var f;c.length&&(f=c.shift());)!c.length&&ia(b)?d[f]=b:d=d[f]?d[f]:d[f]={}}
function ja(a){for(var a=a.split("."),b=fa,c;c=a.shift();)if(b[c]!=k)b=b[c];else return k;return b}function ka(){}function la(a){a.a=function(){return a.qi?a.qi:a.qi=new a}}
function ma(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function ia(a){return a!==i}function na(a){return"array"==ma(a)}function pa(a){var b=ma(a);return"array"==b||"object"==b&&"number"==typeof a.length}function p(a){return"string"==typeof a}function ra(a){return"number"==typeof a}function sa(a){return"function"==ma(a)}function ta(a){var b=typeof a;return"object"==b&&a!=k||"function"==b}function ua(a){return a[va]||(a[va]=++wa)}
var va="closure_uid_"+Math.floor(2147483648*Math.random()).toString(36),wa=0;function xa(a,b,c){return a.call.apply(a.bind,arguments)}function ya(a,b,c){a||e(Error());if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}
function r(a,b,c){r=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?xa:ya;return r.apply(k,arguments)}function za(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=Array.prototype.slice.call(arguments);b.unshift.apply(b,c);return a.apply(this,b)}}var s=Date.now||function(){return+new Date};function Aa(a,b){var c=b||{},d;for(d in c)var f=(""+c[d]).replace(/\$/g,"$$$$"),a=a.replace(RegExp("\\{\\$"+d+"\\}","gi"),f);return a}
function u(a,b){function c(){}c.prototype=b.prototype;a.e=b.prototype;a.prototype=new c;a.prototype.constructor=a};function Ba(a,b){for(var c=1;c<arguments.length;c++)var d=String(arguments[c]).replace(/\$/g,"$$$$"),a=a.replace(/\%s/,d);return a}function Ca(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")}function Da(a){if(!Ea.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(Fa,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(Ga,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(Ha,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(Ia,"&quot;"));return a}var Fa=/&/g,Ga=/</g,Ha=/>/g,Ia=/\"/g,Ea=/[&<>\"]/;
function Ja(a){var a=ia(i)?a.toFixed(i):String(a),b=a.indexOf(".");-1==b&&(b=a.length);b=Math.max(0,2-b);return Array(b+1).join("0")+a}function Ka(a){return String(a).replace(/\-([a-z])/g,function(a,c){return c.toUpperCase()})};var La=Array.prototype,Ma=La.indexOf?function(a,b,c){return La.indexOf.call(a,b,c)}:function(a,b,c){c=c==k?0:0>c?Math.max(0,a.length+c):c;if(p(a))return!p(b)||1!=b.length?-1:a.indexOf(b,c);for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},w=La.forEach?function(a,b,c){La.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,f=p(a)?a.split(""):a,g=0;g<d;g++)g in f&&b.call(c,f[g],g,a)},Na=La.filter?function(a,b,c){return La.filter.call(a,b,c)}:function(a,b,c){for(var d=a.length,f=[],g=0,h=
p(a)?a.split(""):a,m=0;m<d;m++)if(m in h){var q=h[m];b.call(c,q,m,a)&&(f[g++]=q)}return f},Oa=La.map?function(a,b,c){return La.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,f=Array(d),g=p(a)?a.split(""):a,h=0;h<d;h++)h in g&&(f[h]=b.call(c,g[h],h,a));return f},Pa=La.every?function(a,b,c){return La.every.call(a,b,c)}:function(a,b,c){for(var d=a.length,f=p(a)?a.split(""):a,g=0;g<d;g++)if(g in f&&!b.call(c,f[g],g,a))return l;return j};
function Qa(a,b){var c=Sa(a,b,i);return 0>c?k:p(a)?a.charAt(c):a[c]}function Sa(a,b,c){for(var d=a.length,f=p(a)?a.split(""):a,g=0;g<d;g++)if(g in f&&b.call(c,f[g],g,a))return g;return-1}function Ta(a,b){return 0<=Ma(a,b)}function Ua(a,b){var c=Ma(a,b);0<=c&&La.splice.call(a,c,1)}function Va(a,b,c){b=Sa(a,b,c);0<=b&&La.splice.call(a,b,1)}function Wa(a){return La.concat.apply(La,arguments)}function Xa(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]}
function Ya(a,b){for(var c=1;c<arguments.length;c++){var d=arguments[c],f;if(na(d)||(f=pa(d))&&d.hasOwnProperty("callee"))a.push.apply(a,d);else if(f)for(var g=a.length,h=d.length,m=0;m<h;m++)a[g+m]=d[m];else a.push(d)}}function $a(a,b,c,d){La.splice.apply(a,ab(arguments,1))}function ab(a,b,c){return 2>=arguments.length?La.slice.call(a,b):La.slice.call(a,b,c)};var bb,cb,db,eb,fb;function gb(){return fa.navigator?fa.navigator.userAgent:k}function hb(){return fa.navigator}eb=db=cb=bb=l;var ib;if(ib=gb()){var jb=hb();bb=0==ib.indexOf("Opera");cb=!bb&&-1!=ib.indexOf("MSIE");db=!bb&&-1!=ib.indexOf("WebKit");eb=!bb&&!db&&"Gecko"==jb.product}var kb=bb,x=cb,lb=eb,mb=db,nb=hb();fb=-1!=(nb&&nb.platform||"").indexOf("Mac");var ob=!!hb()&&-1!=(hb().appVersion||"").indexOf("X11"),pb;
a:{var qb="",rb;if(kb&&fa.opera)var sb=fa.opera.version,qb="function"==typeof sb?sb():sb;else if(lb?rb=/rv\:([^\);]+)(\)|;)/:x?rb=/MSIE\s+([^\);]+)(\)|;)/:mb&&(rb=/WebKit\/(\S+)/),rb)var tb=rb.exec(gb()),qb=tb?tb[1]:"";if(x){var ub,vb=fa.document;ub=vb?vb.documentMode:i;if(ub>parseFloat(qb)){pb=String(ub);break a}}pb=qb}var xb={};
function yb(a){var b;if(!(b=xb[a])){b=0;for(var c=Ca(String(pb)).split("."),d=Ca(String(a)).split("."),f=Math.max(c.length,d.length),g=0;0==b&&g<f;g++){var h=c[g]||"",m=d[g]||"",q=RegExp("(\\d*)(\\D*)","g"),t=RegExp("(\\d*)(\\D*)","g");do{var v=q.exec(h)||["","",""],A=t.exec(m)||["","",""];if(0==v[0].length&&0==A[0].length)break;b=((0==v[1].length?0:parseInt(v[1],10))<(0==A[1].length?0:parseInt(A[1],10))?-1:(0==v[1].length?0:parseInt(v[1],10))>(0==A[1].length?0:parseInt(A[1],10))?1:0)||((0==v[2].length)<
(0==A[2].length)?-1:(0==v[2].length)>(0==A[2].length)?1:0)||(v[2]<A[2]?-1:v[2]>A[2]?1:0)}while(0==b)}b=xb[a]=0<=b}return b}var zb={};function Ab(a){return zb[a]||(zb[a]=x&&!!document.documentMode&&document.documentMode>=a)};var Bb,Cb=!x||Ab(9),Db=!lb&&!x||x&&Ab(9)||lb&&yb("1.9.1"),Eb=x&&!yb("9"),Fb=x||kb||mb;function Gb(a){a=a.className;return p(a)&&a.match(/\S+/g)||[]}function y(a,b){for(var c=Gb(a),d=ab(arguments,1),f=c.length+d.length,g=c,h=0;h<d.length;h++)Ta(g,d[h])||g.push(d[h]);a.className=c.join(" ");return c.length==f}function z(a,b){var c=Gb(a),d=ab(arguments,1),f,g=d;f=Na(c,function(a){return!Ta(g,a)});a.className=f.join(" ");return f.length==c.length-d.length}function B(a,b){return Ta(Gb(a),b)}function C(a,b,c){c?y(a,b):z(a,b)}function Hb(a,b){var c=!B(a,b);C(a,b,c);return c};function Ib(a,b){this.x=ia(a)?a:0;this.y=ia(b)?b:0}Ib.prototype.clone=function(){return new Ib(this.x,this.y)};function Jb(a,b){return new Ib(a.x-b.x,a.y-b.y)};function Kb(a,b){this.width=a;this.height=b}Kb.prototype.clone=function(){return new Kb(this.width,this.height)};Kb.prototype.ceil=function(){this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};Kb.prototype.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};Kb.prototype.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};function Lb(a,b,c){for(var d in a)b.call(c,a[d],d,a)}function Mb(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function Nb(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}function Ob(a){for(var b in a)return l;return j}function Pb(a,b){b in a&&delete a[b]}function Qb(a,b,c){b in a&&e(Error('The object already contains the key "'+b+'"'));a[b]=c}var Rb="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");
function Sb(a,b){for(var c,d,f=1;f<arguments.length;f++){d=arguments[f];for(c in d)a[c]=d[c];for(var g=0;g<Rb.length;g++)c=Rb[g],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};function Tb(a){return a?new Ub(Vb(a)):Bb||(Bb=new Ub)}function D(a){return p(a)?document.getElementById(a):a}function Wb(a,b){var c=b||document;return c.querySelectorAll&&c.querySelector?c.querySelectorAll("."+a):c.getElementsByClassName?c.getElementsByClassName(a):Xb("*",a,b)}function E(a,b){var c=b||document,d=k;return(d=c.querySelectorAll&&c.querySelector?c.querySelector("."+a):Wb(a,b)[0])||k}
function Xb(a,b,c){var d=document,c=c||d,a=a&&"*"!=a?a.toUpperCase():"";if(c.querySelectorAll&&c.querySelector&&(a||b))return c.querySelectorAll(a+(b?"."+b:""));if(b&&c.getElementsByClassName){c=c.getElementsByClassName(b);if(a){for(var d={},f=0,g=0,h;h=c[g];g++)a==h.nodeName&&(d[f++]=h);d.length=f;return d}return c}c=c.getElementsByTagName(a||"*");if(b){d={};for(g=f=0;h=c[g];g++)a=h.className,"function"==typeof a.split&&Ta(a.split(/\s+/),b)&&(d[f++]=h);d.length=f;return d}return c}
var Yb={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function F(a){a=(a||window).document;a=Zb(a)?a.documentElement:a.body;return new Kb(a.clientWidth,a.clientHeight)}function G(a,b,c){return $b(document,arguments)}
function $b(a,b){var c=b[0],d=b[1];if(!Cb&&d&&(d.name||d.type)){c=["<",c];d.name&&c.push(' name="',Da(d.name),'"');if(d.type){c.push(' type="',Da(d.type),'"');var f={};Sb(f,d);delete f.type;d=f}c.push(">");c=c.join("")}var g=a.createElement(c);d&&(p(d)?g.className=d:na(d)?y.apply(k,[g].concat(d)):Lb(d,function(a,b){"style"==b?g.style.cssText=a:"class"==b?g.className=a:"for"==b?g.htmlFor=a:b in Yb?g.setAttribute(Yb[b],a):0==b.lastIndexOf("aria-",0)||0==b.lastIndexOf("data-",0)?g.setAttribute(b,a):
g[b]=a}));if(2<b.length){d=function(b){b&&g.appendChild(p(b)?a.createTextNode(b):b)};for(c=2;c<b.length;c++)if(f=b[c],pa(f)&&!(ta(f)&&0<f.nodeType)){var h=w,m;a:{if((m=f)&&"number"==typeof m.length){if(ta(m)){m="function"==typeof m.item||"string"==typeof m.item;break a}if(sa(m)){m="function"==typeof m.item;break a}}m=l}h(m?Xa(f):f,d)}else d(f)}return g}function Zb(a){return"CSS1Compat"==a.compatMode}function ac(a){for(var b;b=a.firstChild;)a.removeChild(b)}
function bc(a,b,c){a.insertBefore(b,a.childNodes[c]||k)}function cc(a){a&&a.parentNode&&a.parentNode.removeChild(a)}function dc(a){return Db&&a.children!=i?a.children:Na(a.childNodes,function(a){return 1==a.nodeType})}function ec(a){return a.nextElementSibling!=i?a.nextElementSibling:fc(a.nextSibling,j)}function fc(a,b){for(;a&&1!=a.nodeType;)a=b?a.nextSibling:a.previousSibling;return a}function gc(a){if(Fb)return a.parentElement;a=a.parentNode;return ta(a)&&1==a.nodeType?a:k}
function hc(a,b){if(a.contains&&1==b.nodeType)return a==b||a.contains(b);if("undefined"!=typeof a.compareDocumentPosition)return a==b||Boolean(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a}function Vb(a){return 9==a.nodeType?a:a.ownerDocument||a.document}
function ic(a,b){if("textContent"in a)a.textContent=b;else if(a.firstChild&&3==a.firstChild.nodeType){for(;a.lastChild!=a.firstChild;)a.removeChild(a.lastChild);a.firstChild.data=b}else ac(a),a.appendChild(Vb(a).createTextNode(b))}var jc={SCRIPT:1,STYLE:1,HEAD:1,IFRAME:1,OBJECT:1},kc={IMG:" ",BR:"\n"};function lc(a){var b=a.getAttributeNode("tabindex");return b&&b.specified?(a=a.tabIndex,ra(a)&&0<=a&&32768>a):l}
function mc(a){if(Eb&&"innerText"in a)a=a.innerText.replace(/(\r\n|\r|\n)/g,"\n");else{var b=[];nc(a,b,j);a=b.join("")}a=a.replace(/ \xAD /g," ").replace(/\xAD/g,"");a=a.replace(/\u200B/g,"");Eb||(a=a.replace(/ +/g," "));" "!=a&&(a=a.replace(/^\s*/,""));return a}function oc(a){var b=[];nc(a,b,l);return b.join("")}
function nc(a,b,c){if(!(a.nodeName in jc))if(3==a.nodeType)c?b.push(String(a.nodeValue).replace(/(\r\n|\r|\n)/g,"")):b.push(a.nodeValue);else if(a.nodeName in kc)b.push(kc[a.nodeName]);else for(a=a.firstChild;a;)nc(a,b,c),a=a.nextSibling}function pc(a,b,c){if(!b&&!c)return k;b=b?b.toUpperCase():k;a:{for(var d=0;a;){if((!b||a.nodeName==b)&&(!c||B(a,c))){c=a;break a}a=a.parentNode;d++}c=k}return c}function Ub(a){this.D=a||fa.document||document}n=Ub.prototype;n.Na=Tb;
n.b=function(a){return p(a)?this.D.getElementById(a):a};n.L=function(a,b,c){return $b(this.D,arguments)};n.createElement=function(a){return this.D.createElement(a)};n.createTextNode=function(a){return this.D.createTextNode(a)};function qc(a){return Zb(a.D)}function rc(a){var b=a.D,a=!mb&&Zb(b)?b.documentElement:b.body,b=b.parentWindow||b.defaultView;return new Ib(b.pageXOffset||a.scrollLeft,b.pageYOffset||a.scrollTop)}n.appendChild=function(a,b){a.appendChild(b)};n.Wh=dc;
function sc(a,b){return b.firstElementChild!=i?b.firstElementChild:fc(b.firstChild,j)}n.contains=hc;x&&yb(8);var tc={};function uc(a,b,c){a.innerHTML=b(c||tc,i,i)}function H(a,b){var c;a:if(c=(new Ub(i)||Tb()).createElement("DIV"),c.innerHTML=a(b||tc,i,i),1==c.childNodes.length){var d=c.firstChild;if(1==d.nodeType){c=d;break a}}return c}function I(a){return"object"===typeof a&&a&&0===a.Jm?a.content:String(a).replace(vc,wc)}
var xc={"\x00":"&#0;",'"':"&quot;","&":"&amp;","'":"&#39;","<":"&lt;",">":"&gt;","\t":"&#9;","\n":"&#10;","\x0B":"&#11;","\f":"&#12;","\r":"&#13;"," ":"&#32;","-":"&#45;","/":"&#47;","=":"&#61;","`":"&#96;","\u0085":"&#133;","\u00a0":"&#160;","\u2028":"&#8232;","\u2029":"&#8233;"};function wc(a){return xc[a]}var vc=/[\x00\x22\x26\x27\x3c\x3e]/g;function J(){0!=yc&&(this.Km=Error().stack,zc[ua(this)]=this)}var yc=0,zc={};J.prototype.Ee=l;J.prototype.$=function(){if(!this.Ee&&(this.Ee=j,this.n(),0!=yc)){var a=ua(this);delete zc[a]}};J.prototype.n=function(){this.Wj&&Ac.apply(k,this.Wj);if(this.Ri)for(;this.Ri.length;)this.Ri.shift()()};function Bc(a){a&&"function"==typeof a.$&&a.$()}function Ac(a){for(var b=0,c=arguments.length;b<c;++b){var d=arguments[b];pa(d)?Ac.apply(k,d):Bc(d)}};var Cc=!x||Ab(9),Dc=!x||Ab(9),Ec=x&&!yb("9");!mb||yb("528");lb&&yb("1.9b")||x&&yb("8")||kb&&yb("9.5")||mb&&yb("528");lb&&!yb("8")||x&&yb("9");function Fc(a,b){this.type=a;this.currentTarget=this.target=b}n=Fc.prototype;n.n=aa();n.$=aa();n.tc=l;n.defaultPrevented=l;n.df=j;n.stopPropagation=function(){this.tc=j};n.preventDefault=function(){this.defaultPrevented=j;this.df=l};function Gc(a){a.preventDefault()};function Hc(a){Hc[" "](a);return a}Hc[" "]=ka;function Ic(a,b){a&&this.init(a,b)}u(Ic,Fc);var Jc=[1,4,2];n=Ic.prototype;n.target=k;n.relatedTarget=k;n.offsetX=0;n.offsetY=0;n.clientX=0;n.clientY=0;n.screenX=0;n.screenY=0;n.button=0;n.keyCode=0;n.charCode=0;n.ctrlKey=l;n.altKey=l;n.shiftKey=l;n.metaKey=l;n.ug=l;n.ia=k;
n.init=function(a,b){var c=this.type=a.type;Fc.call(this,c);this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;if(d){if(lb){var f;a:{try{Hc(d.nodeName);f=j;break a}catch(g){}f=l}f||(d=k)}}else"mouseover"==c?d=a.fromElement:"mouseout"==c&&(d=a.toElement);this.relatedTarget=d;this.offsetX=mb||a.offsetX!==i?a.offsetX:a.layerX;this.offsetY=mb||a.offsetY!==i?a.offsetY:a.layerY;this.clientX=a.clientX!==i?a.clientX:a.pageX;this.clientY=a.clientY!==i?a.clientY:a.pageY;this.screenX=
a.screenX||0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||("keypress"==c?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.ug=fb?a.metaKey:a.ctrlKey;this.state=a.state;this.ia=a;a.defaultPrevented&&this.preventDefault();delete this.tc};function Kc(a){return(Cc?0==a.ia.button:"click"==a.type?j:!!(a.ia.button&Jc[0]))&&!(mb&&fb&&a.ctrlKey)}
n.stopPropagation=function(){Ic.e.stopPropagation.call(this);this.ia.stopPropagation?this.ia.stopPropagation():this.ia.cancelBubble=j};n.preventDefault=function(){Ic.e.preventDefault.call(this);var a=this.ia;if(a.preventDefault)a.preventDefault();else if(a.returnValue=l,Ec)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};n.ik=ca("ia");n.n=aa();function Lc(){}var Mc=0;n=Lc.prototype;n.key=0;n.vc=l;n.yf=l;n.init=function(a,b,c,d,f,g){sa(a)?this.si=j:a&&a.handleEvent&&sa(a.handleEvent)?this.si=l:e(Error("Invalid listener argument"));this.dd=a;this.proxy=b;this.src=c;this.type=d;this.capture=!!f;this.Pe=g;this.yf=l;this.key=++Mc;this.vc=l};n.handleEvent=function(a){return this.si?this.dd.call(this.Pe||this.src,a):this.dd.handleEvent.call(this.dd,a)};var Nc={},Oc={},Pc={},Qc={};
function K(a,b,c,d,f){if(b){if(na(b)){for(var g=0;g<b.length;g++)K(a,b[g],c,d,f);return k}var d=!!d,h=Oc;b in h||(h[b]={V:0,Ea:0});h=h[b];d in h||(h[d]={V:0,Ea:0},h.V++);var h=h[d],m=ua(a),q;h.Ea++;if(h[m]){q=h[m];for(g=0;g<q.length;g++)if(h=q[g],h.dd==c&&h.Pe==f){if(h.vc)break;return q[g].key}}else q=h[m]=[],h.V++;var t=Rc,v=Dc?function(a){return t.call(v.src,v.key,a)}:function(a){a=t.call(v.src,v.key,a);if(!a)return a},g=v;g.src=a;h=new Lc;h.init(c,g,a,b,d,f);c=h.key;g.key=c;q.push(h);Nc[c]=h;Pc[m]||
(Pc[m]=[]);Pc[m].push(h);a.addEventListener?(a==fa||!a.Fh)&&a.addEventListener(b,g,d):a.attachEvent(b in Qc?Qc[b]:Qc[b]="on"+b,g);return c}e(Error("Invalid event type"))}function Sc(a,b,c,d,f){if(na(b)){for(var g=0;g<b.length;g++)Sc(a,b[g],c,d,f);return k}a=K(a,b,c,d,f);Nc[a].yf=j;return a}function Tc(a,b,c,d,f){if(na(b))for(var g=0;g<b.length;g++)Tc(a,b[g],c,d,f);else if(d=!!d,a=Uc(a,b,d))for(g=0;g<a.length;g++)if(a[g].dd==c&&a[g].capture==d&&a[g].Pe==f){Vc(a[g].key);break}}
function Vc(a){if(!Nc[a])return l;var b=Nc[a];if(b.vc)return l;var c=b.src,d=b.type,f=b.proxy,g=b.capture;c.removeEventListener?(c==fa||!c.Fh)&&c.removeEventListener(d,f,g):c.detachEvent&&c.detachEvent(d in Qc?Qc[d]:Qc[d]="on"+d,f);c=ua(c);Pc[c]&&(f=Pc[c],Ua(f,b),0==f.length&&delete Pc[c]);b.vc=j;if(b=Oc[d][g][c])b.Pi=j,Wc(d,g,c,b);delete Nc[a];return j}
function Wc(a,b,c,d){if(!d.Ve&&d.Pi){for(var f=0,g=0;f<d.length;f++)d[f].vc?d[f].proxy.src=k:(f!=g&&(d[g]=d[f]),g++);d.length=g;d.Pi=l;0==g&&(delete Oc[a][b][c],Oc[a][b].V--,0==Oc[a][b].V&&(delete Oc[a][b],Oc[a].V--),0==Oc[a].V&&delete Oc[a])}}function Uc(a,b,c){var d=Oc;return b in d&&(d=d[b],c in d&&(d=d[c],a=ua(a),d[a]))?d[a]:k}
function Xc(a,b,c,d,f){var g=1,b=ua(b);if(a[b]){a.Ea--;a=a[b];a.Ve?a.Ve++:a.Ve=1;try{for(var h=a.length,m=0;m<h;m++){var q=a[m];q&&!q.vc&&(g&=Yc(q,f)!==l)}}finally{a.Ve--,Wc(c,d,b,a)}}return Boolean(g)}function Yc(a,b){a.yf&&Vc(a.key);return a.handleEvent(b)}
function Rc(a,b){if(!Nc[a])return j;var c=Nc[a],d=c.type,f=Oc;if(!(d in f))return j;var f=f[d],g,h;if(!Dc){g=b||ja("window.event");var m=j in f,q=l in f;if(m){if(0>g.keyCode||g.returnValue!=i)return j;a:{var t=l;if(0==g.keyCode)try{g.keyCode=-1;break a}catch(v){t=j}if(t||g.returnValue==i)g.returnValue=j}}t=new Ic;t.init(g,this);g=j;try{if(m){for(var A=[],T=t.currentTarget;T;T=T.parentNode)A.push(T);h=f[j];h.Ea=h.V;for(var V=A.length-1;!t.tc&&0<=V&&h.Ea;V--)t.currentTarget=A[V],g&=Xc(h,A[V],d,j,t);
if(q){h=f[l];h.Ea=h.V;for(V=0;!t.tc&&V<A.length&&h.Ea;V++)t.currentTarget=A[V],g&=Xc(h,A[V],d,l,t)}}else g=Yc(c,t)}finally{A&&(A.length=0)}return g}d=new Ic(b,this);return g=Yc(c,d)};function Zc(){J.call(this)}u(Zc,J);n=Zc.prototype;n.Fh=j;n.Ze=k;n.Lg=ba("Ze");n.addEventListener=function(a,b,c,d){K(this,a,b,c,d)};n.removeEventListener=function(a,b,c,d){Tc(this,a,b,c,d)};
n.dispatchEvent=function(a){var b=a.type||a,c=Oc;if(b in c){if(p(a))a=new Fc(a,this);else if(a instanceof Fc)a.target=a.target||this;else{var d=a,a=new Fc(b,this);Sb(a,d)}var d=1,f,c=c[b],b=j in c,g;if(b){f=[];for(g=this;g;g=g.Ze)f.push(g);g=c[j];g.Ea=g.V;for(var h=f.length-1;!a.tc&&0<=h&&g.Ea;h--)a.currentTarget=f[h],d&=Xc(g,f[h],a.type,j,a)&&a.df!=l}if(l in c)if(g=c[l],g.Ea=g.V,b)for(h=0;!a.tc&&h<f.length&&g.Ea;h++)a.currentTarget=f[h],d&=Xc(g,f[h],a.type,l,a)&&a.df!=l;else for(f=this;!a.tc&&f&&
g.Ea;f=f.Ze)a.currentTarget=f,d&=Xc(g,f,a.type,l,a)&&a.df!=l;a=Boolean(d)}else a=j;return a};n.n=function(){Zc.e.n.call(this);var a,b=0,c=a==k;a=!!a;if(this==k)Lb(Pc,function(d){for(var f=d.length-1;0<=f;f--){var g=d[f];if(c||a==g.capture)Vc(g.key),b++}});else{var d=ua(this);if(Pc[d])for(var d=Pc[d],f=d.length-1;0<=f;f--){var g=d[f];if(c||a==g.capture)Vc(g.key),b++}}this.Ze=k};function $c(a,b){J.call(this);this.P=a||1;this.me=b||ad;this.wf=r(this.Wg,this);this.dg=s()}u($c,Zc);$c.prototype.enabled=l;var ad=fa.window;n=$c.prototype;n.qa=k;n.Wg=function(){if(this.enabled){var a=s()-this.dg;0<a&&a<0.8*this.P?this.qa=this.me.setTimeout(this.wf,this.P-a):(this.dispatchEvent(bd),this.enabled&&(this.qa=this.me.setTimeout(this.wf,this.P),this.dg=s()))}};n.start=function(){this.enabled=j;this.qa||(this.qa=this.me.setTimeout(this.wf,this.P),this.dg=s())};
n.stop=function(){this.enabled=l;this.qa&&(this.me.clearTimeout(this.qa),this.qa=k)};n.n=function(){$c.e.n.call(this);this.stop();delete this.me};var bd="tick";function L(a,b,c){sa(a)?c&&(a=r(a,c)):a&&"function"==typeof a.handleEvent?a=r(a.handleEvent,a):e(Error("Invalid listener argument"));return 2147483647<b?-1:ad.setTimeout(a,b||0)};function M(){J.call(this);this.Ua=[];this.Wb={}}u(M,J);n=M.prototype;n.yi=1;n.af=0;n.subscribe=function(a,b,c){var d=this.Wb[a];d||(d=this.Wb[a]=[]);var f=this.yi;this.Ua[f]=a;this.Ua[f+1]=b;this.Ua[f+2]=c;this.yi=f+3;d.push(f);return f};n.Dj=function(a){if(0!=this.af)return this.$d||(this.$d=[]),this.$d.push(a),l;var b=this.Ua[a];if(b){var c=this.Wb[b];c&&Ua(c,a);delete this.Ua[a];delete this.Ua[a+1];delete this.Ua[a+2]}return!!b};
n.c=function(a,b){var c=this.Wb[a];if(c){this.af++;for(var d=ab(arguments,1),f=0,g=c.length;f<g;f++){var h=c[f];this.Ua[h+1].apply(this.Ua[h+2],d)}this.af--;if(this.$d&&0==this.af)for(;c=this.$d.pop();)this.Dj(c)}};n.clear=function(a){if(a){var b=this.Wb[a];b&&(w(b,this.Dj,this),delete this.Wb[a])}else this.Ua.length=0,this.Wb={}};n.n=function(){M.e.n.call(this);delete this.Ua;delete this.Wb;delete this.$d};function cd(){M.call(this);this.Dd=new $c(1E3);this.xj=new $c(3E4);this.yj=[];this.Nf=[]}u(cd,M);la(cd);cd.prototype.init=function(){this.Dd.start();this.xj.start();K(this.Dd,bd,r(function(){w(this.Nf,function(a,b){a.time<s()&&(a.callback(),La.splice.call(this.Nf,b,1))},this)},this));K(this.xj,bd,r(function(){w(this.yj,function(a){ic(a.element,dd(a.time.getTime()))},this)},this))};function ed(a,b,c){86400>(s()-b.getTime())/1E3&&a.yj.push({time:b,element:c})}
function fd(a,b,c){86400>(s()-b)/1E3&&a.Nf.push({time:b,callback:c})};function N(){M.call(this);this.xl=j;var a=D("controller");this.zc=!a||B(a,"sidebar-toggled");this.oc=a&&B(a,"guide-toggled");this.subscribe(gd,ba("zc"),this);this.subscribe(hd,ba("oc"),this);this.subscribe(id,ba("xl"),this)}u(N,M);la(N);function jd(a,b){var c=D("toggle-pending");ic(c,b);O(c,!!b)}var id="play",hd="toggle-guide",gd="toggle-sidebar";var kd={nm:["BC","AD"],mm:["Before Christ","Anno Domini"],pm:"JFMAMJJASOND".split(""),xm:"JFMAMJJASOND".split(""),om:"January February March April May June July August September October November December".split(" "),wm:"January February March April May June July August September October November December".split(" "),tm:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),zm:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),Dm:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),
Bm:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),vm:"Sun Mon Tue Wed Thu Fri Sat".split(" "),Am:"Sun Mon Tue Wed Thu Fri Sat".split(" "),qm:"SMTWTFS".split(""),ym:"SMTWTFS".split(""),um:["Q1","Q2","Q3","Q4"],sm:["1st quarter","2nd quarter","3rd quarter","4th quarter"],jm:["AM","PM"],lm:["EEEE, MMMM d, y","MMMM d, y","MMM d, y","M/d/yy"],Cm:["h:mm:ss a zzzz","h:mm:ss a z","h:mm:ss a","h:mm a"],Ij:6,Em:[5,6],Jj:5};var ld=/^(\d{4})(?:(?:-?(\d{2})(?:-?(\d{2}))?)|(?:-?(\d{3}))|(?:-?W(\d{2})(?:-?([1-7]))?))?$/,md=/^(\d{2})(?::?(\d{2})(?::?(\d{2})(\.\d+)?)?)?$/,nd=/Z|(?:([-+])(\d{2})(?::?(\d{2}))?)$/;
function od(a){var b=new pd(2E3),a=Ca(a),a=a.split(-1==a.indexOf("T")?" ":"T"),c;var d=a[0].match(ld);if(d){var f=Number(d[2]),g=Number(d[3]),h=Number(d[4]);c=Number(d[5]);var m=Number(d[6])||1;b.setFullYear(Number(d[1]));h?(b.setDate(1),b.setMonth(0),b.add(new qd(rd,h-1))):c?(b.setMonth(0),b.setDate(1),d=b.getDay()||7,b.add(new qd(rd,(4>=d?1-d:8-d)+(Number(m)+7*(Number(c)-1))-1))):(f&&(b.setDate(1),b.setMonth(f-1)),g&&b.setDate(g));c=j}else c=l;if(c&&!(c=2>a.length))a=a[1],c=a.match(nd),m=0,c&&("Z"!=
c[0]&&(m=60*c[2]+Number(c[3]),m*="-"==c[1]?1:-1),m-=b.getTimezoneOffset(),a=a.substr(0,a.length-c[0].length)),(c=a.match(md))?(b.setHours(Number(c[1])),b.setMinutes(Number(c[2])||0),b.setSeconds(Number(c[3])||0),b.setMilliseconds(c[4]?1E3*c[4]:0),0!=m&&b.setTime(b.getTime()+6E4*m),c=j):c=l;return c?b:k}
function qd(a,b,c,d,f,g){p(a)?(this.Ya=a==sd?b:0,this.Pa=a==td?b:0,this.La=a==rd?b:0,this.Ba=a==ud?b:0,this.Ca=a==vd?b:0,this.Fa=a==wd?b:0):(this.Ya=a||0,this.Pa=b||0,this.La=c||0,this.Ba=d||0,this.Ca=f||0,this.Fa=g||0)}
qd.prototype.ne=function(a){var b=Math.min(this.Ya,this.Pa,this.La,this.Ba,this.Ca,this.Fa),c=Math.max(this.Ya,this.Pa,this.La,this.Ba,this.Ca,this.Fa);if(0>b&&0<c)return k;if(!a&&0==b&&0==c)return"PT0S";c=[];0>b&&c.push("-");c.push("P");(this.Ya||a)&&c.push(Math.abs(this.Ya)+"Y");(this.Pa||a)&&c.push(Math.abs(this.Pa)+"M");(this.La||a)&&c.push(Math.abs(this.La)+"D");if(this.Ba||this.Ca||this.Fa||a)c.push("T"),(this.Ba||a)&&c.push(Math.abs(this.Ba)+"H"),(this.Ca||a)&&c.push(Math.abs(this.Ca)+"M"),
(this.Fa||a)&&c.push(Math.abs(this.Fa)+"S");return c.join("")};qd.prototype.clone=function(){return new qd(this.Ya,this.Pa,this.La,this.Ba,this.Ca,this.Fa)};var sd="y",td="m",rd="d",ud="h",vd="n",wd="s";qd.prototype.add=function(a){this.Ya+=a.Ya;this.Pa+=a.Pa;this.La+=a.La;this.Ba+=a.Ba;this.Ca+=a.Ca;this.Fa+=a.Fa};
function xd(a,b,c){ra(a)?(this.t=new Date(a,b||0,c||1),yd(this,c||1)):ta(a)?(this.t=new Date(a.getFullYear(),a.getMonth(),a.getDate()),yd(this,a.getDate())):(this.t=new Date(s()),this.t.setHours(0),this.t.setMinutes(0),this.t.setSeconds(0),this.t.setMilliseconds(0))}n=xd.prototype;n.Je=kd.Ij;n.Ke=kd.Jj;n.clone=function(){var a=new xd(this.t);a.Je=this.Je;a.Ke=this.Ke;return a};n.getFullYear=function(){return this.t.getFullYear()};n.getYear=function(){return this.getFullYear()};n.getMonth=function(){return this.t.getMonth()};
n.getDate=function(){return this.t.getDate()};n.getTime=function(){return this.t.getTime()};n.getDay=function(){return this.t.getDay()};n.getUTCHours=function(){return this.t.getUTCHours()};n.getTimezoneOffset=function(){return this.t.getTimezoneOffset()};function zd(a){a=a.getTimezoneOffset();if(0==a)a="Z";else var b=Math.abs(a)/60,c=Math.floor(b),b=60*(b-c),a=(0<a?"-":"+")+Ja(c)+":"+Ja(b);return a}n.set=function(a){this.t=new Date(a.getFullYear(),a.getMonth(),a.getDate())};n.setFullYear=function(a){this.t.setFullYear(a)};
n.setMonth=function(a){this.t.setMonth(a)};n.setDate=function(a){this.t.setDate(a)};n.setTime=function(a){this.t.setTime(a)};
n.add=function(a){if(a.Ya||a.Pa){var b=this.getMonth()+a.Pa+12*a.Ya,c=this.getYear()+Math.floor(b/12),b=b%12;0>b&&(b+=12);var d;a:{switch(b){case 1:d=0==c%4&&(0!=c%100||0==c%400)?29:28;break a;case 5:case 8:case 10:case 3:d=30;break a}d=31}d=Math.min(d,this.getDate());this.setDate(1);this.setFullYear(c);this.setMonth(b);this.setDate(d)}a.La&&(a=new Date((new Date(this.getYear(),this.getMonth(),this.getDate(),12)).getTime()+864E5*a.La),this.setDate(1),this.setFullYear(a.getFullYear()),this.setMonth(a.getMonth()),
this.setDate(a.getDate()),yd(this,a.getDate()))};n.ne=function(a,b){return[this.getFullYear(),Ja(this.getMonth()+1),Ja(this.getDate())].join(a?"-":"")+(b?zd(this):"")};n.toString=function(){return this.ne()};function yd(a,b){a.getDate()!=b&&a.t.setUTCHours(a.t.getUTCHours()+(a.getDate()<b?1:-1))}n.valueOf=function(){return this.t.valueOf()};function pd(a,b,c,d,f,g,h){this.t=ra(a)?new Date(a,b||0,c||1,d||0,f||0,g||0,h||0):new Date(a?a.getTime():s())}u(pd,xd);n=pd.prototype;n.getHours=function(){return this.t.getHours()};
n.getMinutes=function(){return this.t.getMinutes()};n.getSeconds=function(){return this.t.getSeconds()};n.getUTCHours=function(){return this.t.getUTCHours()};n.setHours=function(a){this.t.setHours(a)};n.setMinutes=function(a){this.t.setMinutes(a)};n.setSeconds=function(a){this.t.setSeconds(a)};n.setMilliseconds=function(a){this.t.setMilliseconds(a)};n.setUTCHours=function(a){this.t.setUTCHours(a)};
n.add=function(a){xd.prototype.add.call(this,a);a.Ba&&this.setHours(this.t.getHours()+a.Ba);a.Ca&&this.setMinutes(this.t.getMinutes()+a.Ca);a.Fa&&this.setSeconds(this.t.getSeconds()+a.Fa)};n.ne=function(a,b){var c=xd.prototype.ne.call(this,a);return a?c+" "+Ja(this.getHours())+":"+Ja(this.getMinutes())+":"+Ja(this.getSeconds())+(b?zd(this):""):c+"T"+Ja(this.getHours())+Ja(this.getMinutes())+Ja(this.getSeconds())+(b?zd(this):"")};n.toString=function(){return this.ne()};
n.clone=function(){var a=new pd(this.t);a.Je=this.Je;a.Ke=this.Ke;return a};function Ad(a){J.call(this);this.N=a;this.Q=[]}u(Ad,J);var Bd=[];function P(a,b,c,d,f){na(c)||(Bd[0]=c,c=Bd);for(var g=0;g<c.length;g++){var h=K(b,c[g],d||a,f||l,a.N||a);a.Q.push(h)}return a}function Cd(a,b,c,d,f,g){if(na(c))for(var h=0;h<c.length;h++)Cd(a,b,c[h],d,f,g);else b=Sc(b,c,d||a,f,g||a.N||a),a.Q.push(b)}
function Dd(a,b,c,d,f,g){if(na(c))for(var h=0;h<c.length;h++)Dd(a,b,c[h],d,f,g);else{a:{d=d||a;g=g||a.N||a;f=!!f;if(b=Uc(b,c,f))for(c=0;c<b.length;c++)if(!b[c].vc&&b[c].dd==d&&b[c].capture==f&&b[c].Pe==g){b=b[c];break a}b=k}b&&(b=b.key,Vc(b),Ua(a.Q,b))}return a}function Ed(a){w(a.Q,Vc);a.Q.length=0}Ad.prototype.n=function(){Ad.e.n.call(this);Ed(this)};Ad.prototype.handleEvent=function(){e(Error("EventHandler.handleEvent not implemented"))};function Fd(a,b,c,d){this.top=a;this.right=b;this.bottom=c;this.left=d}Fd.prototype.clone=function(){return new Fd(this.top,this.right,this.bottom,this.left)};Fd.prototype.contains=function(a){return!this||!a?l:a instanceof Fd?a.left>=this.left&&a.right<=this.right&&a.top>=this.top&&a.bottom<=this.bottom:a.x>=this.left&&a.x<=this.right&&a.y>=this.top&&a.y<=this.bottom};function Gd(a,b,c,d){this.left=a;this.top=b;this.width=c;this.height=d}Gd.prototype.clone=function(){return new Gd(this.left,this.top,this.width,this.height)};Gd.prototype.contains=function(a){return a instanceof Gd?this.left<=a.left&&this.left+this.width>=a.left+a.width&&this.top<=a.top&&this.top+this.height>=a.top+a.height:a.x>=this.left&&a.x<=this.left+this.width&&a.y>=this.top&&a.y<=this.top+this.height};function Hd(a,b,c){p(b)?Id(a,c,b):Lb(b,za(Id,a))}function Id(a,b,c){a.style[Ka(c)]=b}function Jd(a,b){var c=Vb(a);return c.defaultView&&c.defaultView.getComputedStyle&&(c=c.defaultView.getComputedStyle(a,k))?c[b]||c.getPropertyValue(b)||"":""}function Kd(a,b){return a.currentStyle?a.currentStyle[b]:k}function Ld(a,b){return Jd(a,b)||Kd(a,b)||a.style&&a.style[b]}function Md(a,b,c){var d,f=lb&&(fb||ob)&&yb("1.9");b instanceof Ib?(d=b.x,b=b.y):(d=b,b=c);a.style.left=Nd(d,f);a.style.top=Nd(b,f)}
function Od(a){return new Ib(a.offsetLeft,a.offsetTop)}function Pd(a){var b=a.getBoundingClientRect();x&&(a=a.ownerDocument,b.left-=a.documentElement.clientLeft+a.body.clientLeft,b.top-=a.documentElement.clientTop+a.body.clientTop);return b}
function Qd(a){if(x&&!Ab(8))return a.offsetParent;for(var b=Vb(a),c=Ld(a,"position"),d="fixed"==c||"absolute"==c,a=a.parentNode;a&&a!=b;a=a.parentNode)if(c=Ld(a,"position"),d=d&&"static"==c&&a!=b.documentElement&&a!=b.body,!d&&(a.scrollWidth>a.clientWidth||a.scrollHeight>a.clientHeight||"fixed"==c||"absolute"==c||"relative"==c))return a;return k}
function Rd(a){for(var b=new Fd(0,Infinity,Infinity,0),c=Tb(a),d=c.D.body,f=c.D.documentElement,g=!mb&&Zb(c.D)?c.D.documentElement:c.D.body;a=Qd(a);)if((!x||0!=a.clientWidth)&&(!mb||0!=a.clientHeight||a!=d)&&a!=d&&a!=f&&"visible"!=Ld(a,"overflow")){var h=Sd(a),m;m=a;if(lb&&!yb("1.9")){var q=parseFloat(Jd(m,"borderLeftWidth"));if(Td(m))var t=m.offsetWidth-m.clientWidth-q-parseFloat(Jd(m,"borderRightWidth")),q=q+t;m=new Ib(q,parseFloat(Jd(m,"borderTopWidth")))}else m=new Ib(m.clientLeft,m.clientTop);
h.x+=m.x;h.y+=m.y;b.top=Math.max(b.top,h.y);b.right=Math.min(b.right,h.x+a.clientWidth);b.bottom=Math.min(b.bottom,h.y+a.clientHeight);b.left=Math.max(b.left,h.x)}d=g.scrollLeft;g=g.scrollTop;b.left=Math.max(b.left,d);b.top=Math.max(b.top,g);c=F(c.D.parentWindow||c.D.defaultView);b.right=Math.min(b.right,d+c.width);b.bottom=Math.min(b.bottom,g+c.height);return 0<=b.top&&0<=b.left&&b.bottom>b.top&&b.right>b.left?b:k}
function Sd(a){var b,c=Vb(a),d=Ld(a,"position"),f=lb&&c.getBoxObjectFor&&!a.getBoundingClientRect&&"absolute"==d&&(b=c.getBoxObjectFor(a))&&(0>b.screenX||0>b.screenY),g=new Ib(0,0),h;b=c?Vb(c):document;h=x&&!Ab(9)&&!qc(Tb(b))?b.body:b.documentElement;if(a==h)return g;if(a.getBoundingClientRect)b=Pd(a),a=rc(Tb(c)),g.x=b.left+a.x,g.y=b.top+a.y;else if(c.getBoxObjectFor&&!f)b=c.getBoxObjectFor(a),a=c.getBoxObjectFor(h),g.x=b.screenX-a.screenX,g.y=b.screenY-a.screenY;else{b=a;do{g.x+=b.offsetLeft;g.y+=
b.offsetTop;b!=a&&(g.x+=b.clientLeft||0,g.y+=b.clientTop||0);if(mb&&"fixed"==Ld(b,"position")){g.x+=c.body.scrollLeft;g.y+=c.body.scrollTop;break}b=b.offsetParent}while(b&&b!=a);if(kb||mb&&"absolute"==d)g.y-=c.body.offsetTop;for(b=a;(b=Qd(b))&&b!=c.body&&b!=h;)if(g.x-=b.scrollLeft,!kb||"TR"!=b.tagName)g.y-=b.scrollTop}return g}function Ud(a,b){var c,d=Sd(a);b instanceof Ib&&(c=b.y,b=b.x);Md(a,a.offsetLeft+(b-d.x),a.offsetTop+(c-d.y))}
function Nd(a,b){"number"==typeof a&&(a=(b?Math.round(a):a)+"px");return a}function Vd(a,b){a.style.height=Nd(b,j)}function Wd(a,b){a.style.width=Nd(b,j)}function Q(a){if("none"!=Ld(a,"display"))return Xd(a);var b=a.style,c=b.display,d=b.visibility,f=b.position;b.visibility="hidden";b.position="absolute";b.display="inline";a=Xd(a);b.display=c;b.position=f;b.visibility=d;return a}
function Xd(a){var b=a.offsetWidth,c=a.offsetHeight,d=mb&&!b&&!c;return(!ia(b)||d)&&a.getBoundingClientRect?(a=Pd(a),new Kb(a.right-a.left,a.bottom-a.top)):new Kb(b,c)}function Yd(a){var b=Sd(a),a=Q(a);return new Gd(b.x,b.y,a.width,a.height)}function Zd(a,b){var c=a.style;"opacity"in c?c.opacity=b:"MozOpacity"in c?c.MozOpacity=b:"filter"in c&&(c.filter=""===b?"":"alpha(opacity="+100*b+")")}function O(a,b){a.style.display=b?"":"none"}function Td(a){return"rtl"==Ld(a,"direction")}
var $d=lb?"MozUserSelect":mb?"WebkitUserSelect":k;function ae(a,b){if(/^\d+px?$/.test(b))return parseInt(b,10);var c=a.style.left,d=a.runtimeStyle.left;a.runtimeStyle.left=a.currentStyle.left;a.style.left=b;var f=a.style.pixelLeft;a.style.left=c;a.runtimeStyle.left=d;return f}
function be(a,b){if(x){var c=ae(a,Kd(a,b+"Left")),d=ae(a,Kd(a,b+"Right")),f=ae(a,Kd(a,b+"Top")),g=ae(a,Kd(a,b+"Bottom"));return new Fd(f,d,g,c)}c=Jd(a,b+"Left");d=Jd(a,b+"Right");f=Jd(a,b+"Top");g=Jd(a,b+"Bottom");return new Fd(parseFloat(f),parseFloat(d),parseFloat(g),parseFloat(c))}var ce={thin:2,medium:4,thick:6};function de(a,b){if("none"==Kd(a,b+"Style"))return 0;var c=Kd(a,b+"Width");return c in ce?ce[c]:ae(a,c)}
function ee(a){if(x){var b=de(a,"borderLeft"),c=de(a,"borderRight"),d=de(a,"borderTop"),a=de(a,"borderBottom");return new Fd(d,c,a,b)}b=Jd(a,"borderLeftWidth");c=Jd(a,"borderRightWidth");d=Jd(a,"borderTopWidth");a=Jd(a,"borderBottomWidth");return new Fd(parseFloat(d),parseFloat(c),parseFloat(a),parseFloat(b))}var fe=/matrix\([0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, ([0-9\.\-]+)p?x?, ([0-9\.\-]+)p?x?\)/;function ge(a,b,c){J.call(this);this.target=a;this.handle=b||a;this.Di=c||new Gd(NaN,NaN,NaN,NaN);this.D=Vb(a);this.u=new Ad(this);K(this.handle,["touchstart","mousedown"],this.Bc,l,this)}u(ge,Zc);var he=x||lb&&yb("1.9.3");n=ge.prototype;n.clientX=0;n.clientY=0;n.screenX=0;n.screenY=0;n.sj=0;n.tj=0;n.Oc=0;n.Pc=0;n.Lf=j;n.sa=l;n.Uf=0;n.Rk=0;n.Hk=l;n.te=l;n.l=ca("u");n.Kg=function(a){this.Uf=Math.pow(a,2)};n.nj=ba("ef");n.ib=ba("Lf");
n.n=function(){ge.e.n.call(this);Tc(this.handle,["touchstart","mousedown"],this.Bc,l,this);Ed(this.u);he&&this.D.releaseCapture();this.u=this.handle=this.target=k};function ie(a){ia(a.Sa)||(a.Sa=Td(a.target));return a.Sa}
n.Bc=function(a){var b="mousedown"==a.type;if(this.Lf&&!this.sa&&(!b||Kc(a))){je(a);if(0==this.Uf)if(this.dispatchEvent(new ke("start",this,a.clientX,a.clientY,a)))this.sa=j,a.preventDefault();else return;else a.preventDefault();var b=this.D,c=b.documentElement,d=!he;P(this.u,b,["touchmove","mousemove"],this.Ck,d);P(this.u,b,["touchend","mouseup"],this.jc,d);he?(c.setCapture(l),P(this.u,c,"losecapture",this.jc)):P(this.u,b?b.parentWindow||b.defaultView:window,"blur",this.jc);x&&this.Hk&&P(this.u,
b,"dragstart",Gc);this.ef&&P(this.u,this.ef,"scroll",this.Xi,d);this.clientX=this.sj=a.clientX;this.clientY=this.tj=a.clientY;this.screenX=a.screenX;this.screenY=a.screenY;this.te?(a=this.target,b=a.offsetLeft,c=a.offsetParent,!c&&"fixed"==Ld(a,"position")&&(c=Vb(a).documentElement),c?(lb?(d=ee(c),b+=d.left):Ab(8)&&(d=ee(c),b-=d.left),a=Td(c)?c.clientWidth-(b+a.offsetWidth):b):a=b):a=this.target.offsetLeft;this.Oc=a;this.Pc=this.target.offsetTop;this.sg=rc(Tb(this.D));this.Rk=s()}else this.dispatchEvent("earlycancel")};
n.jc=function(a,b){Ed(this.u);he&&this.D.releaseCapture();if(this.sa){je(a);this.sa=l;var c=le(this,this.Oc),d=me(this,this.Pc);this.dispatchEvent(new ke("end",this,a.clientX,a.clientY,a,c,d,b||"touchcancel"==a.type))}else this.dispatchEvent("earlycancel");("touchend"==a.type||"touchcancel"==a.type)&&a.preventDefault()};
function je(a){var b=a.type;"touchstart"==b||"touchmove"==b?a.init(a.ia.targetTouches[0],a.currentTarget):("touchend"==b||"touchcancel"==b)&&a.init(a.ia.changedTouches[0],a.currentTarget)}
n.Ck=function(a){if(this.Lf){je(a);var b=(this.te&&ie(this)?-1:1)*(a.clientX-this.clientX),c=a.clientY-this.clientY;this.clientX=a.clientX;this.clientY=a.clientY;this.screenX=a.screenX;this.screenY=a.screenY;if(!this.sa){var d=this.sj-this.clientX,f=this.tj-this.clientY;if(d*d+f*f>this.Uf)if(this.dispatchEvent(new ke("start",this,a.clientX,a.clientY,a)))this.sa=j;else{this.Ee||this.jc(a);return}}c=ne(this,b,c);b=c.x;c=c.y;this.sa&&this.dispatchEvent(new ke("beforedrag",this,a.clientX,a.clientY,a,
b,c))&&(oe(this,a,b,c),a.preventDefault())}};function ne(a,b,c){var d=rc(Tb(a.D)),b=b+(d.x-a.sg.x),c=c+(d.y-a.sg.y);a.sg=d;a.Oc+=b;a.Pc+=c;b=le(a,a.Oc);a=me(a,a.Pc);return new Ib(b,a)}n.Xi=function(a){var b=ne(this,0,0);a.clientX=this.clientX;a.clientY=this.clientY;oe(this,a,b.x,b.y)};function oe(a,b,c,d){a.Hd(c,d);a.dispatchEvent(new ke("drag",a,b.clientX,b.clientY,b,c,d))}
function le(a,b){var c=a.Di,d=!isNaN(c.left)?c.left:k,c=!isNaN(c.width)?c.width:0;return Math.min(d!=k?d+c:Infinity,Math.max(d!=k?d:-Infinity,b))}function me(a,b){var c=a.Di,d=!isNaN(c.top)?c.top:k,c=!isNaN(c.height)?c.height:0;return Math.min(d!=k?d+c:Infinity,Math.max(d!=k?d:-Infinity,b))}n.Hd=function(a,b){this.te&&ie(this)?this.target.style.right=a+"px":this.target.style.left=a+"px";this.target.style.top=b+"px"};
function ke(a,b,c,d,f,g,h,m){Fc.call(this,a);this.clientX=c;this.clientY=d;this.xf=f;this.left=ia(g)?g:b.Oc;this.top=ia(h)?h:b.Pc;this.Zj=b;this.Xj=!!m}u(ke,Fc);function pe(){J.call(this);this.k=qe;this.Kd=this.startTime=k}u(pe,Zc);var qe=0;pe.prototype.Pb=function(){this.ra("begin")};pe.prototype.Qb=function(){this.ra("end")};pe.prototype.ra=function(a){this.dispatchEvent(a)};function re(a,b,c){J.call(this);this.Lb=a;this.P=b||0;this.N=c;this.zf=r(this.Id,this)}u(re,J);n=re.prototype;n.ma=0;n.n=function(){re.e.n.call(this);this.stop();delete this.Lb;delete this.N};n.start=function(a){this.stop();this.ma=L(this.zf,ia(a)?a:this.P)};n.stop=function(){this.Ib()&&ad.clearTimeout(this.ma);this.ma=0};n.Ie=function(){this.stop();this.Id()};n.Ib=function(){return 0!=this.ma};n.Id=function(){this.ma=0;this.Lb&&this.Lb.call(this.N)};var se;se=da(k);var te={},ue=k;function ve(a){a=ua(a);delete te[a];Ob(te)&&ue&&ue.stop()}function we(){ue||(ue=new re(function(){var a=s();Lb(te,function(c){xe(c,a)});Ob(te)||we()},20));var a=ue;a.Ib()||a.start()};function ye(a,b,c,d){pe.call(this);(!na(a)||!na(b))&&e(Error("Start and end parameters must be arrays"));a.length!=b.length&&e(Error("Start and end points must be the same length"));this.ke=a;this.bk=b;this.duration=c;this.kh=d;this.coords=[];this.te=l}u(ye,pe);n=ye.prototype;n.Uh=0;n.Da=0;n.bg=k;
n.play=function(a){if(a||this.k==qe)this.Da=0,this.coords=this.ke;else if(1==this.k)return l;ve(this);this.startTime=a=s();-1==this.k&&(this.startTime-=this.duration*this.Da);this.Kd=this.startTime+this.duration;this.bg=this.startTime;this.Da||this.Pb();this.ra("play");-1==this.k&&this.ra("resume");this.k=1;var b=ua(this);b in te||(te[b]=this);we();xe(this,a);return j};n.stop=function(a){ve(this);this.k=qe;a&&(this.Da=1);ze(this,this.Da);this.ra("stop");this.Qb()};n.Le=ca("Da");
n.n=function(){this.k==qe||this.stop(l);this.ra("destroy");ye.e.n.call(this)};function xe(a,b){a.Da=(b-a.startTime)/(a.Kd-a.startTime);1<=a.Da&&(a.Da=1);a.Uh=1E3/(b-a.bg);a.bg=b;ze(a,a.Da);1==a.Da?(a.k=qe,ve(a),a.ra("finish"),a.Qb()):1==a.k&&a.lg()}function ze(a,b){sa(a.kh)&&(b=a.kh(b));a.coords=Array(a.ke.length);for(var c=0;c<a.ke.length;c++)a.coords[c]=(a.bk[c]-a.ke[c])*b+a.ke[c]}n.lg=function(){this.ra("animate")};n.ra=function(a){this.dispatchEvent(new Ae(a,this))};
function Ae(a,b){Fc.call(this,a);this.coords=b.coords;this.x=b.coords[0];this.y=b.coords[1];this.wn=b.coords[2];this.duration=b.duration;this.Da=b.Le();this.Zm=b.Uh;this.state=b.k;this.Gm=b}u(Ae,Fc);function Be(a,b,c,d,f){ye.call(this,b,c,d,f);this.element=a}u(Be,ye);n=Be.prototype;n.se=ka;n.vi=function(){ia(this.Sa)||(this.Sa=Td(this.element));return this.Sa};n.lg=function(){this.se();Be.e.lg.call(this)};n.Qb=function(){this.se();Be.e.Qb.call(this)};n.Pb=function(){this.se();Be.e.Pb.call(this)};function Ce(a,b,c,d,f){(2!=b.length||2!=c.length)&&e(Error("Start and end points must be 2D"));Be.apply(this,arguments)}u(Ce,Be);
Ce.prototype.se=function(){if(this.te){var a=this.element,b=Math.round(this.coords[0]),b=Math.max(b,0);a.scrollLeft=Td(a)?lb?-b:!x||!yb("8")?a.scrollWidth-b-a.clientWidth:b:b}else this.element.scrollLeft=Math.round(this.coords[0]);this.element.scrollTop=Math.round(this.coords[1])};function De(a,b,c,d,f){ra(b)&&(b=[b]);ra(c)&&(c=[c]);Be.call(this,a,b,c,d,f);(1!=b.length||1!=c.length)&&e(Error("Start and end points must be 1D"))}u(De,Be);De.prototype.se=function(){Zd(this.element,this.coords[0])};
De.prototype.show=function(){this.element.style.display=""};De.prototype.hide=function(){this.element.style.display="none"};function Ee(a,b,c){De.call(this,a,1,0,b,c)}u(Ee,De);Ee.prototype.Pb=function(){this.show();Ee.e.Pb.call(this)};Ee.prototype.Qb=function(){this.hide();Ee.e.Qb.call(this)};function Fe(a,b,c){De.call(this,a,0,1,b,c)}u(Fe,De);Fe.prototype.Pb=function(){this.show();Fe.e.Pb.call(this)};function Ge(){}la(Ge);Ge.prototype.Wk=0;Ge.a();function S(a){J.call(this);this.hc=a||Tb();this.Sa=He}u(S,Zc);S.prototype.Gk=Ge.a();var He=k;function Ie(a,b){switch(a){case 1:return b?"disable":"enable";case 2:return b?"highlight":"unhighlight";case 4:return b?"activate":"deactivate";case 8:return b?"select":"unselect";case 16:return b?"check":"uncheck";case 32:return b?"focus":"blur";case 64:return b?"open":"close"}e(Error("Invalid component state"))}n=S.prototype;n.ma=k;n.Y=l;n.d=k;n.Sa=k;n.q=k;n.K=k;n.da=k;n.ha=k;n.Hj=l;
function Je(a){return a.ma||(a.ma=":"+(a.Gk.Wk++).toString(36))}n.b=ca("d");n.l=function(){return this.Xc||(this.Xc=new Ad(this))};n.gf=function(a){this==a&&e(Error("Unable to set parent component"));a&&(this.K&&this.ma&&this.K.ha&&this.ma&&(this.ma in this.K.ha&&this.K.ha[this.ma])&&this.K!=a)&&e(Error("Unable to set parent component"));this.K=a;S.e.Lg.call(this,a)};n.getParent=ca("K");n.Lg=function(a){this.K&&this.K!=a&&e(Error("Method not supported"));S.e.Lg.call(this,a)};n.Na=ca("hc");
n.L=function(){this.d=this.hc.createElement("div")};function Ke(a,b){a.Y&&e(Error("Component already rendered"));a.d||a.L();b?b.insertBefore(a.d,k):a.hc.D.body.appendChild(a.d);(!a.K||a.K.Y)&&a.w()}n.g=function(a){this.Y&&e(Error("Component already rendered"));if(a&&this.bc(a)){this.Hj=j;if(!this.hc||this.hc.D!=Vb(a))this.hc=Tb(a);this.H(a);this.w()}else e(Error("Invalid element to decorate"))};n.bc=da(j);n.H=ba("d");n.w=function(){this.Y=j;Le(this,function(a){!a.Y&&a.b()&&a.w()})};
n.kc=function(){Le(this,function(a){a.Y&&a.kc()});this.Xc&&Ed(this.Xc);this.Y=l};n.n=function(){S.e.n.call(this);this.Y&&this.kc();this.Xc&&(this.Xc.$(),delete this.Xc);Le(this,function(a){a.$()});!this.Hj&&this.d&&cc(this.d);this.K=this.q=this.d=this.ha=this.da=k};
function Me(a,b){var c=a.da?a.da.length:0;b.Y&&!a.Y&&e(Error("Component already rendered"));(0>c||c>(a.da?a.da.length:0))&&e(Error("Child component index out of bounds"));if(!a.ha||!a.da)a.ha={},a.da=[];if(b.getParent()==a){var d=Je(b);a.ha[d]=b;Ua(a.da,b)}else Qb(a.ha,Je(b),b);b.gf(a);$a(a.da,c,0,b);b.Y&&a.Y&&b.getParent()==a?(d=a.tb(),d.insertBefore(b.b(),d.childNodes[c]||k)):a.Y&&(!b.Y&&b.d&&b.d.parentNode)&&b.w()}n.tb=ca("d");
n.vi=function(){this.Sa==k&&(this.Sa=Td(this.Y?this.d:this.hc.D.body));return this.Sa};n.yc=function(a){this.Y&&e(Error("Component already rendered"));this.Sa=a};function Le(a,b){a.da&&w(a.da,b,i)}n.removeChild=function(a,b){if(a){var c=p(a)?a:Je(a),a=this.ha&&c?(c in this.ha?this.ha[c]:i)||k:k;c&&a&&(Pb(this.ha,c),Ua(this.da,a),b&&(a.kc(),a.d&&cc(a.d)),a.gf(k))}a||e(Error("Child is not in parent component"));return a};function Ne(a,b,c,d,f){if(!x&&(!mb||!yb("525")))return j;if(fb&&f)return Oe(a);if(f&&!d||!c&&(17==b||18==b)||x&&d&&b==a)return l;switch(a){case 13:return!(x&&Ab(9));case 27:return!mb}return Oe(a)}function Oe(a){if(48<=a&&57>=a||96<=a&&106>=a||65<=a&&90>=a||mb&&0==a)return j;switch(a){case 32:case 63:case 107:case 109:case 110:case 111:case 186:case 59:case 189:case 187:case 61:case 188:case 190:case 191:case 192:case 222:case 219:case 220:case 221:return j;default:return l}}
function Pe(a){switch(a){case 61:return 187;case 59:return 186;case 224:return 91;case 0:return 224;default:return a}};function Qe(){}var Re;la(Qe);n=Qe.prototype;n.Wc=aa();n.L=function(a){var b=a.Na().L("div",Se(this,a).join(" "),a.ab);Te(this,a,b);return b};n.tb=function(a){return a};n.Jd=function(a,b,c){if(a=a.b?a.b():a)if(x&&!yb("7")){var d=Ue(Gb(a),b);d.push(b);za(c?y:z,a).apply(k,d)}else C(a,b,c)};n.bc=da(j);
n.g=function(a,b){if(b.id){var c=b.id;a.K&&a.K.ha&&(Pb(a.K.ha,a.ma),Qb(a.K.ha,c,a));a.ma=c}(c=this.tb(b))&&c.firstChild?(c=c.firstChild.nextSibling?Xa(c.childNodes):c.firstChild,a.ab=c):a.ab=k;var d=0,f=this.la(),g=this.la(),h=l,m=l,c=l,q=Gb(b);w(q,function(a){if(!h&&a==f)h=j,g==f&&(m=j);else if(!m&&a==g)m=j;else{var b=d;if(!this.uj){this.ye||Ve(this);var c=this.ye,q={},t;for(t in c)q[c[t]]=t;this.uj=q}a=parseInt(this.uj[a],10);d=b|(isNaN(a)?0:a)}},this);a.k=d;h||(q.push(f),g==f&&(m=j));m||q.push(g);
var t=a.Ma;t&&q.push.apply(q,t);if(x&&!yb("7")){var v=Ue(q);0<v.length&&(q.push.apply(q,v),c=j)}if(!h||!m||t||c)b.className=q.join(" ");Te(this,a,b);return b};n.oi=function(a){a.vi()&&this.yc(a.b(),j);a.isEnabled()&&this.pd(a,a.fb())};function Te(a,b,c){b.isEnabled()||a.Xa(c,1,j);b.k&8&&a.Xa(c,8,j);b.ja&16&&a.Xa(c,16,We(b));b.ja&64&&a.Xa(c,64,!!(b.k&64))}
n.od=function(a,b){var c=!b,d=x||kb?a.getElementsByTagName("*"):k;if($d){if(c=c?"none":"",a.style[$d]=c,d)for(var f=0,g;g=d[f];f++)g.style[$d]=c}else if(x||kb)if(c=c?"on":"",a.setAttribute("unselectable",c),d)for(f=0;g=d[f];f++)g.setAttribute("unselectable",c)};n.yc=function(a,b){this.Jd(a,this.la()+"-rtl",b)};n.$f=function(a){var b;return a.ja&32&&(b=a.Gb())?lc(b):l};
n.pd=function(a,b){var c;if(a.ja&32&&(c=a.Gb())){if(!b&&a.Pd()){try{c.blur()}catch(d){}a.Pd()&&a.Yh()}lc(c)!=b&&(b?c.tabIndex=0:(c.tabIndex=-1,c.removeAttribute("tabIndex")))}};n.Sb=function(a,b){O(a,b)};n.pa=function(a,b,c){var d=a.b();if(d){var f=Xe(this,b);f&&this.Jd(a,f,c);this.Xa(d,b,c)}};n.Xa=function(a,b,c){Re||(Re={1:"disabled",8:"selected",16:"checked",64:"expanded"});(b=Re[b])&&a.setAttribute("aria-"+b,c)};
n.xc=function(a,b){var c=this.tb(a);if(c&&(ac(c),b))if(p(b))ic(c,b);else{var d=function(a){if(a){var b=Vb(c);c.appendChild(p(a)?b.createTextNode(a):a)}};na(b)?w(b,d):pa(b)&&!("nodeType"in b)?w(Xa(b),d):d(b)}};n.Gb=function(a){return a.b()};n.la=da("goog-control");function Se(a,b){var c=a.la(),d=[c],f=a.la();f!=c&&d.push(f);c=b.k;for(f=[];c;){var g=c&-c;f.push(Xe(a,g));c&=~g}d.push.apply(d,f);(c=b.Ma)&&d.push.apply(d,c);x&&!yb("7")&&d.push.apply(d,Ue(d));return d}
function Ue(a,b){var c=[];b&&(a=a.concat([b]));w([],function(d){Pa(d,za(Ta,a))&&(!b||Ta(d,b))&&c.push(d.join("_"))});return c}function Xe(a,b){a.ye||Ve(a);return a.ye[b]}function Ve(a){var b=a.la();a.ye={1:b+"-disabled",2:b+"-hover",4:b+"-active",8:b+"-selected",16:b+"-checked",32:b+"-focused",64:b+"-open"}};function Ye(){}u(Ye,Qe);la(Ye);n=Ye.prototype;n.Wc=da("button");n.Xa=function(a,b,c){16==b?a.setAttribute("aria-pressed",c):Ye.e.Xa.call(this,a,b,c)};n.L=function(a){var b=Ye.e.L.call(this,a),c=a.Md();c&&this.Ng(b,c);(c=a.I())&&this.Ga(b,c);a.ja&16&&this.Xa(b,16,We(a));return b};n.g=function(a,b){var b=Ye.e.g.call(this,a,b),c=this.I(b);a.hh=c;a.Xg=this.Md(b);a.ja&16&&this.Xa(b,16,We(a));return b};n.I=ka;n.Ga=ka;n.Md=function(a){return a.title};n.Ng=function(a,b){a&&(a.title=b||"")};n.la=da("goog-button");function Ze(a,b){J.call(this);a&&$e(this,a,b)}u(Ze,Zc);n=Ze.prototype;n.d=k;n.Se=k;n.ag=k;n.Te=k;n.Kb=-1;n.Jb=-1;n.vf=l;
var af={3:13,12:144,63232:38,63233:40,63234:37,63235:39,63236:112,63237:113,63238:114,63239:115,63240:116,63241:117,63242:118,63243:119,63244:120,63245:121,63246:122,63247:123,63248:44,63272:46,63273:36,63275:35,63276:33,63277:34,63289:144,63302:45},bf={Up:38,Down:40,Left:37,Right:39,Enter:13,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"U+007F":46,Home:36,End:35,PageUp:33,PageDown:34,Insert:45},cf=x||mb&&yb("525"),df=fb&&lb;n=Ze.prototype;
n.zk=function(a){if(mb&&(17==this.Kb&&!a.ctrlKey||18==this.Kb&&!a.altKey))this.Jb=this.Kb=-1;cf&&!Ne(a.keyCode,this.Kb,a.shiftKey,a.ctrlKey,a.altKey)?this.handleEvent(a):(this.Jb=lb?Pe(a.keyCode):a.keyCode,df&&(this.vf=a.altKey))};n.Bk=function(a){this.Jb=this.Kb=-1;this.vf=a.altKey};
n.handleEvent=function(a){var b=a.ia,c,d,f=b.altKey;x&&"keypress"==a.type?(c=this.Jb,d=13!=c&&27!=c?b.keyCode:0):mb&&"keypress"==a.type?(c=this.Jb,d=0<=b.charCode&&63232>b.charCode&&Oe(c)?b.charCode:0):kb?(c=this.Jb,d=Oe(c)?b.keyCode:0):(c=b.keyCode||this.Jb,d=b.charCode||0,df&&(f=this.vf),fb&&(63==d&&224==c)&&(c=191));var g=c,h=b.keyIdentifier;c?63232<=c&&c in af?g=af[c]:25==c&&a.shiftKey&&(g=9):h&&h in bf&&(g=bf[h]);a=g==this.Kb;this.Kb=g;b=new ef(g,d,a,b);b.altKey=f;this.dispatchEvent(b)};
n.b=ca("d");function $e(a,b,c){a.Te&&a.detach();a.d=b;a.Se=K(a.d,"keypress",a,c);a.ag=K(a.d,"keydown",a.zk,c,a);a.Te=K(a.d,"keyup",a.Bk,c,a)}n.detach=function(){this.Se&&(Vc(this.Se),Vc(this.ag),Vc(this.Te),this.Te=this.ag=this.Se=k);this.d=k;this.Jb=this.Kb=-1};n.n=function(){Ze.e.n.call(this);this.detach()};function ef(a,b,c,d){d&&this.init(d,i);this.type="key";this.keyCode=a;this.charCode=b;this.repeat=c}u(ef,Ic);function ff(a,b){a||e(Error("Invalid class name "+a));sa(b)||e(Error("Invalid decorator function "+b))}var gf={};function hf(a,b,c){S.call(this,c);if(!b){for(var b=this.constructor,d;b;){d=ua(b);if(d=gf[d])break;b=b.e?b.e.constructor:k}b=d?sa(d.a)?d.a():new d:k}this.J=b;this.ab=a}u(hf,S);n=hf.prototype;n.ab=k;n.k=0;n.ja=39;n.pb=255;n.Wl=0;n.pf=j;n.Ma=k;n.Tf=j;n.we=l;n.cj=k;function jf(a){a.Y&&l!=a.Tf&&kf(a,l);a.Tf=l}n.Gb=function(){return this.J.Gb(this)};
n.Jd=function(a,b){b?a&&(this.Ma?Ta(this.Ma,a)||this.Ma.push(a):this.Ma=[a],this.J.Jd(this,a,j)):a&&this.Ma&&(Ua(this.Ma,a),0==this.Ma.length&&(this.Ma=k),this.J.Jd(this,a,l))};n.L=function(){var a=this.J.L(this);this.d=a;var b=this.cj||this.J.Wc();b&&a.setAttribute("role",b);this.we||this.J.od(a,l);this.fb()||this.J.Sb(a,l)};n.tb=function(){return this.J.tb(this.b())};n.bc=function(a){return this.J.bc(a)};
n.H=function(a){this.d=a=this.J.g(this,a);var b=this.cj||this.J.Wc();b&&a.setAttribute("role",b);this.we||this.J.od(a,l);this.pf="none"!=a.style.display};n.w=function(){hf.e.w.call(this);this.J.oi(this);if(this.ja&-2&&(this.Tf&&kf(this,j),this.ja&32)){var a=this.Gb();if(a){var b=this.bd||(this.bd=new Ze);$e(b,a);P(P(P(this.l(),b,"key",this.Ak),a,"focus",this.xk),a,"blur",this.Yh)}}};
function kf(a,b){var c=a.l(),d=a.b();b?(P(P(P(P(c,d,"mouseover",a.di),d,"mousedown",a.bi),d,"mouseup",a.ei),d,"mouseout",a.ci),a.Oe!=ka&&P(c,d,"contextmenu",a.Oe),x&&P(c,d,"dblclick",a.Zh)):(Dd(Dd(Dd(Dd(c,d,"mouseover",a.di),d,"mousedown",a.bi),d,"mouseup",a.ei),d,"mouseout",a.ci),a.Oe!=ka&&Dd(c,d,"contextmenu",a.Oe),x&&Dd(c,d,"dblclick",a.Zh))}n.kc=function(){hf.e.kc.call(this);this.bd&&this.bd.detach();this.fb()&&this.isEnabled()&&this.J.pd(this,l)};
n.n=function(){hf.e.n.call(this);this.bd&&(this.bd.$(),delete this.bd);delete this.J;this.Ma=this.ab=k};n.xc=function(a){this.J.xc(this.b(),a);this.ab=a};n.Vh=function(){var a=this.ab;return!a?"":(p(a)?a:na(a)?Oa(a,oc).join(""):mc(a)).replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")};n.yc=function(a){hf.e.yc.call(this,a);var b=this.b();b&&this.J.yc(b,a)};n.od=function(a){this.we=a;var b=this.b();b&&this.J.od(b,a)};n.fb=ca("pf");
n.Sb=function(a,b){if(b||this.pf!=a&&this.dispatchEvent(a?"show":"hide")){var c=this.b();c&&this.J.Sb(c,a);this.isEnabled()&&this.J.pd(this,a);this.pf=a;return j}return l};n.isEnabled=function(){return!(this.k&1)};n.ib=function(a){var b=this.getParent();if((!b||"function"!=typeof b.isEnabled||b.isEnabled())&&lf(this,1,!a))a||(this.setActive(l),mf(this,l)),this.fb()&&this.J.pd(this,a),this.pa(1,!a)};function mf(a,b){lf(a,2,b)&&a.pa(2,b)}n.Ib=function(){return!!(this.k&4)};
n.setActive=function(a){lf(this,4,a)&&this.pa(4,a)};function We(a){return!!(a.k&16)}function nf(a,b){lf(a,16,b)&&a.pa(16,b)}n.Pd=function(){return!!(this.k&32)};n.Ta=function(a){lf(this,32,a)&&this.pa(32,a)};n.pa=function(a,b){this.ja&a&&b!=!!(this.k&a)&&(this.J.pa(this,a,b),this.k=b?this.k|a:this.k&~a)};function of(a,b,c){a.Y&&(a.k&b&&!c)&&e(Error("Component already rendered"));!c&&a.k&b&&a.pa(b,l);a.ja=c?a.ja|b:a.ja&~b}function pf(a,b){return!!(a.pb&b)&&!!(a.ja&b)}
function lf(a,b,c){return!!(a.ja&b)&&!!(a.k&b)!=c&&(!(a.Wl&b)||a.dispatchEvent(Ie(b,c)))&&!a.Ee}n.di=function(a){(!a.relatedTarget||!hc(this.b(),a.relatedTarget))&&(this.dispatchEvent("enter")&&this.isEnabled()&&pf(this,2))&&mf(this,j)};n.ci=function(a){if((!a.relatedTarget||!hc(this.b(),a.relatedTarget))&&this.dispatchEvent("leave"))pf(this,4)&&this.setActive(l),pf(this,2)&&mf(this,l)};n.Oe=ka;
n.bi=function(a){this.isEnabled()&&(pf(this,2)&&mf(this,j),Kc(a)&&(pf(this,4)&&this.setActive(j),this.J.$f(this)&&this.Gb().focus()));!this.we&&Kc(a)&&a.preventDefault()};n.ei=function(a){this.isEnabled()&&(pf(this,2)&&mf(this,j),this.Ib()&&(this.ae(a)&&pf(this,4))&&this.setActive(l))};n.Zh=function(a){this.isEnabled()&&this.ae(a)};
n.ae=function(a){pf(this,16)&&nf(this,!We(this));pf(this,8)&&lf(this,8,j)&&this.pa(8,j);if(pf(this,64)){var b=!(this.k&64);lf(this,64,b)&&this.pa(64,b)}b=new Fc("action",this);a&&(b.altKey=a.altKey,b.ctrlKey=a.ctrlKey,b.metaKey=a.metaKey,b.shiftKey=a.shiftKey,b.ug=a.ug);return this.dispatchEvent(b)};n.xk=function(){pf(this,32)&&this.Ta(j)};n.Yh=function(){pf(this,4)&&this.setActive(l);pf(this,32)&&this.Ta(l)};
n.Ak=function(a){return this.fb()&&this.isEnabled()&&this.Sf(a)?(a.preventDefault(),a.stopPropagation(),j):l};n.Sf=function(a){return 13==a.keyCode&&this.ae(a)};sa(hf)||e(Error("Invalid component class "+hf));sa(Qe)||e(Error("Invalid renderer class "+Qe));var qf=ua(hf);gf[qf]=Qe;ff("goog-control",function(){return new hf(k)});function rf(){}u(rf,Ye);la(rf);n=rf.prototype;n.Wc=aa();n.L=function(a){jf(a);a.pb&=-256;of(a,32,l);return a.Na().L("button",{"class":Se(this,a).join(" "),disabled:!a.isEnabled(),title:a.Md()||"",value:a.I()||""},a.Vh()||"")};n.bc=function(a){return"BUTTON"==a.tagName||"INPUT"==a.tagName&&("button"==a.type||"submit"==a.type||"reset"==a.type)};n.g=function(a,b){jf(a);a.pb&=-256;of(a,32,l);b.disabled&&y(b,Xe(this,1));return rf.e.g.call(this,a,b)};n.oi=function(a){P(a.l(),a.b(),"click",a.ae)};n.od=ka;
n.yc=ka;n.$f=function(a){return a.isEnabled()};n.pd=ka;n.pa=function(a,b,c){rf.e.pa.call(this,a,b,c);if((a=a.b())&&1==b)a.disabled=c};n.I=function(a){return a.value};n.Ga=function(a,b){a&&(a.value=b)};n.Xa=ka;function sf(a,b,c){hf.call(this,a,b||rf.a(),c)}u(sf,hf);n=sf.prototype;n.I=ca("hh");n.Ga=function(a){this.hh=a;this.J.Ga(this.b(),a)};n.Md=ca("Xg");n.Ng=function(a){this.Xg=a;this.J.Ng(this.b(),a)};n.n=function(){sf.e.n.call(this);delete this.hh;delete this.Xg};n.w=function(){sf.e.w.call(this);if(this.ja&32){var a=this.Gb();a&&P(this.l(),a,"keyup",this.Sf)}};n.Sf=function(a){return 13==a.keyCode&&"key"==a.type||32==a.keyCode&&"keyup"==a.type?this.ae(a):32==a.keyCode};ff("goog-button",function(){return new sf(k)});function tf(){}u(tf,Ye);la(tf);n=tf.prototype;n.L=function(a){var b={"class":"goog-inline-block "+Se(this,a).join(" "),title:a.Md()||""},b=a.Na().L("div",b,uf(this,a.ab,a.Na()));Te(this,a,b);return b};n.Wc=da("button");n.tb=function(a){return a&&a.firstChild.firstChild};function uf(a,b,c){return c.L("div","goog-inline-block "+(a.la()+"-outer-box"),c.L("div","goog-inline-block "+(a.la()+"-inner-box"),b))}n.bc=function(a){return"DIV"==a.tagName};
n.g=function(a,b){vf(b,j);vf(b,l);var c;a:{c=sc(a.Na(),b);var d=this.la()+"-outer-box";if(c&&B(c,d)&&(c=sc(a.Na(),c),d=this.la()+"-inner-box",c&&B(c,d))){c=j;break a}c=l}c||b.appendChild(uf(this,b.childNodes,a.Na()));y(b,"goog-inline-block",this.la());return tf.e.g.call(this,a,b)};n.la=da("goog-custom-button");
function vf(a,b){if(a)for(var c=b?a.firstChild:a.lastChild,d;c&&c.parentNode==a;){d=b?c.nextSibling:c.previousSibling;if(3==c.nodeType){var f=c.nodeValue;if(""==Ca(f))a.removeChild(c);else{c.nodeValue=b?f.replace(/^[\s\xa0]+/,""):f.replace(/[\s\xa0]+$/,"");break}}else break;c=d}};function wf(a,b,c){sf.call(this,a,b||tf.a(),c)}u(wf,sf);ff("goog-custom-button",function(){return new wf(k)});function xf(){S.call(this);this.Vb=2;this.P=5;this.kf=60*this.Vb*this.P;this.xh=[];this.vh={};this.ua=yf();this.za=0;this.kj=this.jj=l;this.Of=this.ob=j;this.sa=l;this.ea=[U.a().m,U.a().m.h()]}u(xf,S);n=xf.prototype;
n.w=function(){xf.e.w.call(this);this.sd=D("ticker");this.gn=D("my-ticker");var a=D("go-live");this.ji=D("header");this.Z=D("channels");this.li=1;this.Ia=Math.max(1280,F().width)*this.li;this.Ed=Q(D("controller")).height;N.a().subscribe(hd,function(a){this.nf(a)},this);N.a().subscribe(gd,function(a){C(this.b(),"sidebar-toggled",a);this.ga(l,i,j);zf(this)},this);this.nf(B(this.b(),"toggled"));this.Tb=new pd;for(var b=60;b>=this.Tb.getMinutes();)b-=this.P;this.Tb.setMinutes(b);this.R=this.Tb.clone();
this.R.add(new qd(0,0,0,0,0*-this.P));this.fg=this.R.clone();this.fg.add(new qd(0,0,0,0,this.P*(this.Vb+1)));Af(this,this.Vb,this.R);Wd(this.b(),this.Ia);this.ca=(this.Ia-200)/this.kf;this.bm=this.Ia/this.Vb;this.dc=document.createElement("style");this.dc.id="channel-name-offs";this.dc.type="text/css";document.getElementsByTagName("head")[0].appendChild(this.dc);this.dc.innerHTML="div#guide div.channels div.channel div.name{left:0 !important}";var c=0;w(U.a().Lc,r(function(a){if(!a.C){var b=new Bf(a,
this.kf,this.Tb,0,this.R);Ke(b,this.Z);this.xh.push(b);this.vh[a.id]=b;a.subscribe(Cf,function(){this.de()},this);var d=Wb("program",b.b());(d=d[d.length-1])&&(c=Math.max(c,Od(d).x+Q(d).width+170))}a.id==U.a().m.id&&b&&(y(b.b(),"current"),this.W=b,window.currentChannel=this.W);this.We=a.C?a:this.We},this));this.p=new ge(this.b());var d=this.dc,f=this.b();this.p.Hd=function(a){0>a&&a>-Q(f).width+F().width&&(window.currentChannel&&window.currentChannel.update(),this.target.style.left=a+"px",d.innerHTML=
"div#guide div.channels div.channel div.name{left:"+-a+"px !important}")};var b=D("now-left"),g=D("now-right");P(P(P(P(P(P(P(P(P(this.l(),cd.a().Dd,bd,r(this.Wg,this)),a,"click",r(function(){U.a().c(Df,this.W.q);N.a().c(id,j)},this)),window,"resize",r(this.ga,this)),this.sd,"click",r(this.ga,this,j,i,l)),b,"click",r(this.el,this)),g,"click",r(this.nl,this)),this.p,"beforedrag",r(function(){z(this.b(),"animate");y(this.b(),"drag");this.sa=j},this)),this.p,"end",r(function(){z(this.b(),"drag");y(this.b(),
"animate");this.ob=this.sa=l;zf(this)},this)),this.ji,"mousewheel",r(function(a){a.preventDefault();a.stopPropagation();a=a.ia;z(this.b(),"animate");y(this.b(),"drag");this.sa=j;a=Od(this.b()).x+(a.wheelDelta?a.wheelDelta:a.detail?-a.detail:0);0>a&&a>-1*this.Ia+F().width&&(Md(this.b(),a),this.W&&this.W.update(),this.dc.innerHTML="div#guide div.channels div.channel div.name{left:"+-a+"px !important}");z(this.b(),"drag");y(this.b(),"animate");this.ob=this.sa=l;zf(this)},this));U.a().subscribe(Ef,this.de,
this);U.a().subscribe(Df,this.cc,this);U.a().subscribe(Ff,r(function(){L(r(function(){this.ga(j)},this))},this));N.a().subscribe("toggle-admin",function(a){C(this.b(),"admin",a)},this);for(W.a().subscribe(Hf,this.vg,this);Q(this.b()).width<c;)If(this);this.de();this.ua&&P(this.l(),this.p,"beforedrag",r(function(a){a.xf.shiftKey&&a.preventDefault()},this))};
n.nf=function(a){z(this.b(),"animate");this.ga(j,i,l);y(this.b(),"animate");var b=Math.min(this.Z.scrollHeight,190);C(this.b(),"toggled",a);Vd(this.b(),a?b+this.Ed+19:this.Ed);this.W&&(this.Z.scrollTop=Od(this.W.b()).y);L(r(function(){Vd(this.Z,a?b:40);C(this.b(),"collapsed",!a);this.de();this.ga();if(this.W){var c=this.Z,d=Od(this.W.b()).y;c.scrollTop!=d&&(c.scrollTop=d)}},this),a?0:800);a&&this.de();this.p&&this.p.ib(a)};
function Af(a,b,c){for(var d=E("times",a.b()),f=0;f<=b;f++){var g=c.clone();g.add(new qd(0,0,0,0,a.P*f));var h=G,m={"class":"time",style:"width:"+(a.Ia-200)/a.Vb+"px"},q=i,t=g.getHours();ia(q)||(q=j);var v=12==t;12<t&&(t-=12,v=j);0==t&&q&&(t=12);t=String(t);t+=":"+Ja(g.getMinutes());q&&(g=Aa("am"),q=Aa("pm"),t+=v?q:g);h=h("div",m,t);d.appendChild(h)}}
n.cc=function(a){this.W&&z(this.W.b(),"current");this.W=this.vh[a.id]||k;if(window.currentChannel=this.W)y(this.W.b(),"current"),L(r(this.ga,this,j,i,l));this.ea[0]=a};n.vg=function(){this.We=this.We||Jf();U.a().c(Df,this.We);N.a().c(hd,l)};
function zf(a){var b=D("now-left"),c=D("now-right"),d=(s()-a.R.getTime())/1E3*a.ca,f=N.a().zc?320:0,g=F().width-f,f=Q(a.b()).width-f-200;((a.ea[0].C?a.ea[0].queue.length:a.ea[0].rb+(a.za+1||0)+1<a.ea[0].oa.length)?((a.ea[0].h(a.za+1).time.getTime()-s())/1E3+a.ea[0].h(a.za+1).media.duration)*a.ca+g:0)>f-d&&If(a);c.style.right=N.a().zc?"320px":0;C(c,"now",!!(-Od(a.sd).x<Od(a.b()).x-g));C(b,"now",!!(-Od(a.sd).x>Od(a.b()).x));d=-1;0<=a.ea[0].rb+(a.za||0)-1&&a.ea[0].h(a.za-1)&&(d=(a.ea[0].h(a.za-1).time.getTime()-
a.R.getTime())/1E3*a.ca);O(c,(a.ea[0].C?!!a.ea[0].queue.length:a.ea[0].rb+(a.za||0)+1<a.ea[0].oa.length)||B(c,"now"));O(b,0<d||B(b,"now"))}n.el=function(){B(D("now-left"),"now")?U.a().m.h()==W.a().h()?this.ga(j,i,i,j):this.ga(l,i,i,j):this.ga(l,-1)};n.nl=function(){B(D("now-right"),"now")?U.a().m.h()==W.a().h()?this.ga(j,i,i,j):this.ga(l,i,i,l):this.ga(l,1)};function If(a){var b=Math.ceil(a.Vb/a.li);Af(a,1,a.fg);a.Ia+=a.bm;Wd(a.b(),a.Ia);a.Vb++;a.fg.add(new qd(0,0,0,0,a.P*b));a.kf=60*a.Vb*a.P}
n.Wg=function(){if(N.a().oc||this.Of){var a=U.a().m&&U.a().m.C||l,b=U.a().m&&U.a().m.h(),c=W.a().h(),d=1E3*W.a().Le(),f=Math.round((s()-this.R.getTime())/1E3*this.ca),d=c&&d?Math.round((c.time.getTime()+d-this.R.getTime())/1E3*this.ca):f;zf(this);Md(this.sd,f);C(this.sd,"go-live",!a&&!!b&&!!c&&b.id!=c.id&&45<Math.abs(d-f));this.Of?(this.Of=l,this.ga(j,i,l),y(this.b(),"animate")):this.sa||this.ga()}};
n.ga=function(a,b,c,d){this.ob=a!=i?!!a:this.ob;this.jj=a!=i?!!c:this.ob;this.za=this.ob?0:b?this.za+b:this.za;a=U.a().m.h(this.za);d=U.a().m.C?(d=Kf(U.a(),j))&&d.h():d?a:this.ob?W.a().h():this.ea[0].h(this.za);this.ea[1]=d;this.ob||z(this.b(),"tick-along");if((this.ob||b)&&this.R){var c=W.a().h(),f=W.a().getCurrentTime(),a=(s()-this.R.getTime())/1E3*this.ca;for(c&&f&&Math.round((c.time.getTime()+f-this.R.getTime())/1E3*this.ca);a+F().width>this.Ia-(N.a().zc?320:0);)If(this);c=F().width-(N.a().zc?
320:0);f=0;d&&(f=-(d.time.getTime()-this.R.getTime())/1E3*this.ca+5);if(!d||!b&&N.a().oc&&a>-f+c-320)f=-Od(this.sd).x+c-200,y(this.b(),"tick-along");f=Math.max(f,-Q(this.b()).width+c);f=Math.min(f,0);Md(this.b(),f);this.dc.innerHTML="div#guide div.channels div.channel div.name{left:"+-f+"px !important}";if(!this.jj&&this.W){var g=Od(this.W.b()).y-Q(this.ji).height,h=new Ce(this.Z,[this.Z.scrollLeft,this.Z.scrollTop],[this.Z.scrollLeft,g],100*this.xh.length);P(this.l(),h,"end",r(function(){var a=this.Z;
a.scrollTop!=g&&(a.scrollTop=g);this.kj=l},this));L(r(function(){this.kj=j;h.play()},this),100)}}b&&zf(this)};n.de=function(){var a=Math.min(this.Z.scrollHeight,190);Vd(this.Z,B(this.b(),"toggled")?a:this.Ed);Vd(this.b(),B(this.b(),"collapsed")?this.Ed:a+this.Ed+19)};function Lf(a){return'\t<div class="channel"><div class="programs-container"><div class="programs"></div><div class="suggest"><div class="spinner">...</div><div class="select-program"><div class="select-header">SUGGESTION BOX <div class="close"></div></div><div class="select-content"><div class="page"><input type="text" class="program-input" placeholder="Paste YouTube link"/><div class="page2"></div></div></div></div></div></div><div class="graph"></div><div class="viewers"></div><div class="name"><div class="text">'+
I(a.name)+'</div><div class="suggest-program"><div class="add-program button dark">+</div></div></div></div>'}
function Mf(a){return'<div class="info"><div class="thumb'+(a.repeat?" repeat":"")+'" style="background-image:url('+I(a.Ag.media.Wa)+"); background-position: 50% "+I(a.Ag.media.rd)+'%"></div><div class="progress"></div><div class="title">'+I(a.Ag.media.name)+'</div><div class="stats"><div class="comment-count"><div class="icon"></div>'+I(a.media.Mc)+'</div><div class="like-count"><div class="icon"></div>'+I(a.media.Vl)+'</div></div><div class="viewers"></div>'+(a.tf?'<div class="remove"></div><div class="repos"></div>':
"")+"</div>"}function Nf(a){return'<div class="line"><div class="pic"><img src="'+I(a.i.S)+'"><a href="#channel:'+I(a.Sj)+'"><div class="watch-with"><div>JOIN '+I(a.Fb)+"</div></div></a></div></div>"}function Of(a){return'<div class="confirm-media"><div class="thumb" style="background-image:url('+I(a.Sg)+')"></div><div class="title">'+I(a.title)+'</div><div class="added">ADDED</div><div class="dark button">ADD</div></div>'};function Pf(){M.call(this)}u(Pf,M);la(Pf);function Qf(a){this.id=a.id;this.S=a.picture;this.name=a.name;this.description=a.description;this.link=a.link};function Rf(a){M.call(this);this.id=a.id;this.name=a.name;this.host="youtube";this.Zc=a.host_id;this.Fk="http://www.youtube.com/watch?v="+a.host_id;this.duration=a.duration;this.live=!!a.live;this.$k=[];this.yl=k;this.Sh=l;this.description=a.description;this.link=a.link||"xylocast.com/?m="+this.id;this.va=new Qf(a.publisher);this.uc=od(a.published+"Z");this.Wa="http://i.ytimg.com/vi/"+this.Zc+"/0.jpg";this.Ug="http://i.ytimg.com/vi/"+this.Zc+"/1.jpg";this.on="http://i.ytimg.com/vi/"+this.Zc+"/2.jpg";
this.pn="http://i.ytimg.com/vi/"+this.Zc+"/3.jpg";this.Tg=new Kb(480,360);this.rd=37;this.Db=[];this.Bj=[];this.Mc=a.comment_count||0;this.Vl=a.star_count||0;this.Ok=a.like_count||0;this.Qm=a.dislike_count||0;this.ff=[];this.vb={};this.Tj=a.collection_id;this.subscribe(Sf,this.Lj,this);this.subscribe(Tf,this.El,this);this.subscribe(Uf,this.Ic,this)}u(Rf,M);function Vf(a){return a.uc.getMonth()+1+"/"+a.uc.getDate()+"/"+a.uc.getYear()}var Sf="add-comment",Tf="remove-comment",Uf="watching";
Rf.prototype.Lj=function(a){this.Db.push(a);this.Mc+=1;a.i.id!=X.a().o.id&&Pf.a().c("show","commented on "+this.name,a.text,a.i,a.i.S,"#info:"+this.id)};Rf.prototype.El=function(a){Y("/_comment",se(),"POST","delete=true&id="+a);Va(this.Db,function(b){return b.id==a});this.Mc-=1};Rf.prototype.Ic=function(a,b,c){c?(Pb(this.vb,a.id),a.Gd=k):(this.vb[a.id]=a,a.Gd=this,a.id!=X.a().o.id&&Pf.a().c("flash","is watching "+(b?b.name:""),this.name,a,this.Ug,"#info:"+this.id))};function Wf(){M.call(this);this.ig={}}u(Wf,M);la(Wf);function Xf(a,b){var c=a.get(b.id);c||(c=new Rf(b),a.add(c));return c}Wf.prototype.get=function(a){return a in this.ig?this.ig[a]:i};Wf.prototype.add=function(a){this.ig[a.id]=a};function Yf(a,b){M.call(this);var c=b||k,d=a||k;this.id=d?d.id:c.id;this.media=d?Xf(Wf.a(),d.media):c;Wf.a().add(this.media);this.time=d?od(d.time+"Z"):new pd;this.async=d?d.async:j;this.seek=d?d.seek:k}u(Yf,M);function Zf(a){return new Yf(i,a)};function $f(a){M.call(this);this.id=a.id;this.name=a.name;this.url=a.profile_url;this.location=a.location||"";this.hm=a.welcomed;this.Pm=a.demo;this.rj=[];this.S=Ba("https://graph.facebook.com/%s/picture",this.id);for(this.color=Raphael.getColor();"#00bf85"==this.color||"#00bf2f"==this.color;)this.color=Raphael.getColor();this.rf=a.access_level;this.Fm=[];this.an=a.last_login?od(a.last_login+"Z"):k;this.ln=a.session_count;this.Hm=a.ave_session?a.ave_session.toFixed(2):k;this.Pl=a.show_guide!=i?a.show_guide:
j;this.Sl=a.show_sidebar!=i?a.show_sidebar:j;this.Al=a.post_facebook!=i?a.post_facebook:j;this.bj=a.post_twitter!=i?a.post_twitter:j;this.subscribe(ag,function(){this.bj=j},this)}u($f,M);function yf(){return X.a().o.rf==bg}$f.prototype.Fb=function(){var a=this.name.split(" ");return a&&a.length?a[0]:this.name};function cg(a,b){return Qa(a.rj,function(a){return a.id==b.id})}var ag="twitter-auth",bg=2;function dg(a,b,c,d,f){this.id=a;this.i=b;this.T=c;this.Zg=d;this.Ec=f||k;this.Ji=[]}dg.prototype.ff=function(a){this.Ji.push(a);this.T.C&&this.T.X&&(this.T.X.seek=k,this.T.X=k);Y("/_seen",se(),"POST","media_id="+a.id+"&session_id="+this.id+"&async="+this.T.C)};
dg.prototype.end=function(a){this.Ec=a;a=(this.Ec.getTime()-this.Zg.getTime())/1E3;if(this.i.id==X.a().o.id&&this.T){eg.a();var b=this.T,c=this.Ji.length;X.a().pg.length?_gaq.push(["_trackEvent","Users","SessionTimeWithFriends",X.a().o.id,Math.round(a)]):_gaq.push(["_trackEvent","Users","SessionTimeNoFriends",X.a().o.id,Math.round(a)]);_gaq.push(["_trackEvent","Users","SessionMediaCount",X.a().o.id,c]);_gaq.push(["_trackEvent","Users","Active",X.a().o.id,c]);_gaq.push(["_trackEvent","Users",b.id+
"-time",X.a().o.id,a]);_gaq.push(["_trackEvent","Users",b.id+"-medias",X.a().o.id,c]);b.C||(_gaq.push(["_trackEvent","Channel","SessionTime",b.id,a]),_gaq.push(["_trackEvent","Channel","SessionMediaCount",b.id,c]))}};function fg(a){M.call(this);this.id=a.id;this.name=a.name;this.C=a.my_channel;this.Gd=a.current_media?Xf(Wf.a(),a.current_media):k;this.Mm=a.current_seek;this.oa=[];this.Rb={};this.X=a.current_program&&new Yf(a.current_program);this.Fc=[];this.queue=[];this.gb=0;this.Yd=a.online!=i?a.online:k;this.subscribe(gg,this.Bb,this);this.subscribe(hg,this.Mj,this);this.subscribe(ig,this.Ic,this);this.subscribe(jg,this.eh,this)}u(fg,M);n=fg.prototype;
n.Bb=function(a){this.oa.push(a);this.Rb[a.id]=a;a.time.getTime()+1E3*a.media.duration>this.gb&&(this.gb=a.time.getTime()+1E3*a.media.duration-12E4,fd(cd.a(),this.gb,r(this.hg,this,this.gb)),fd(cd.a(),this.gb+6E4,r(this.hg,this,this.gb+6E4)))};n.hg=function(a){this.gb<=a&&!this.C&&Y("/_programming/"+this.id,r(function(a){a=kg(a.target);a.length||fd(cd.a(),s()+1E3,r(this.hg,this,s()+1E3));w(a,function(a){if(!this.Rb[a.id]){var b=this.Rb[a.id];b||(b=new Yf(a),this.Bb(b));this.c(gg,b)}},this)},this))};
n.Mj=function(a,b){b?(this.queue.push(a),Pf.a().c("flash","Added to queue",a.name,i,a.Ug,"#info:"+a.id),lg(eg.a(),a),Y("/_queue",se(),"POST","media_id="+a.id)):(Va(this.queue,function(b){return b.id==a.id},this),Y("/_queue",se(),"POST","media_id="+a.id+"&delete=1"))};n.Ic=function(a){this.Fc.push(a)};n.eh=function(a){var b=a.id in this.Rb?this.Rb[a.id]:i;b&&(b.time=od(a.time+"Z"))};
n.h=function(a){if(this.X&&this.X.async&&this.X.seek)return this.X;if(!this.oa.length)return k;var b=this.X;b||(b=this.oa[0],this.rb=0);if(a)return this.oa[this.rb+a];if(!this.C&&s()>=b.time.getTime()&&s()<b.time.getTime()+1E3*b.media.duration)return this.X=b;for(;s()>b.time.getTime()&&s()>=b.time.getTime()+1E3*b.media.duration;){this.X||(this.X=this.oa[0],this.rb=0);this.oa.length>=this.rb+1?(this.rb++,a=this.oa[this.rb],a=this.X=this.C?a&&a.seek?a:k:this.oa[this.rb]):a=k;if(this.C){if(a&&a.async&&
a.seek)return this.X=a;if(!a)if(this.queue.length){var a=this.queue.shift(),c=Zf(a);Jf().c(gg,c);Y("/_addprogram",se(),"POST","channel_id="+U.a().C.id+"&media_id="+a.id+"&now=true");a=c}else a=k}if(!a)break;b=a}return s()>=b.time.getTime()&&s()<b.time.getTime()+1E3*b.media.duration?this.X=b:k};var gg="add-program",hg="add-queue",ig="add-viewer",jg="update-program",Cf="online";function mg(){M.call(this)}u(mg,M);la(mg);function ng(){J.call(this);this.fa=[];this.Vc=[];this.Fe={};this.u=new Ad(this);this.Jk=this.ti=l;this.fh=j}u(ng,Zc);n=ng.prototype;n.Vf=0;n.Kg=ba("Vf");
n.init=function(){if(!this.ti){for(var a=0,b=this.fa.length;a<b;a++)for(var c=dc(this.fa[a]),d=0,f=c.length;d<f;++d){var g=c[d],h=g,m=ua(h);this.Fe[m]=g;this.Jh&&(P(this.u,g,"mouseover",this.tk),P(this.u,g,"mouseout",this.sk));this.Ih&&(P(this.u,h,"mouseover",this.rk),P(this.u,h,"mouseout",this.qk));this.Vc.push(g);P(this.u,h,["mousedown","touchstart"],this.fi)}this.ti=j}};
n.n=function(){this.u.$();for(var a=0,b=this.fa.length;a<b;a++){var c=this.fa[a];c.Hh=i;c.gc=i}this.fa.length=0;this.Vc.length=0;this.Fe=k;og(this);ng.e.n.call(this)};function pg(a,b){for(var c=0,d=a.fa.length;c<d;c++){var f=a.fa[c];f.Tc=Yd(f)}c=0;for(d=a.Vc.length;c<d;c++)f=a.Vc[c],f!=b&&(f.Tc=Yd(f))}
n.fi=function(a){var b=ua(a.currentTarget);this.r=this.Fe[b];this.B=this.Ae(this.r);this.Ge&&y(this.B,this.Ge);this.B.style.margin="0";this.B.style.position="absolute";this.B.style.visibility="hidden";Vb(this.r).body.appendChild(this.B);b=Sd(this.r);Ud(this.B,b);this.p=new ge(this.B);this.p.Kg(this.Vf);K(this.p,"start",this.ai,l,this);K(this.p,"end",this.$h,l,this);K(this.p,"earlycancel",this.ze,l,this);this.p.Bc(a)};
n.ai=function(a){if(this.dispatchEvent(new qg("beforedragstart",this,a.xf,this.r,k,k))){this.Ye=this.r.parentNode;this.Eh=this.qg=ec(this.r);this.Jf=this.Ye;this.If?y.apply(k,Wa(this.r,this.If)):this.r.style.visibility="hidden";var b=Q(this.B);this.B.nk=b.width/2;this.B.mk=b.height/2;this.B.style.visibility="";this.fh&&(this.r.style.display="none");pg(this,this.r);this.r.style.display="";K(this.p,"drag",this.uk,l,this);this.dispatchEvent(new qg("dragstart",this,a.xf,this.r,this.B,this.p))}else a.preventDefault(),
this.ze()};
n.uk=function(a){var b=Sd(this.B),b=new Ib(b.x+this.B.nk,b.y+this.B.mk),c;a:{c=k;if("none"!=this.r.style.display){c=this.r.parentNode;var d=Yd(c);if(rg(b,d))break a}for(var d=0,f=this.fa.length;d<f;d++){var g=this.fa[d];if(g!=c&&rg(b,g.Tc)){c=g;break a}}c=k}var h;if(c){c==k&&e(Error("getHoverNextItem_ called with null hoverList."));var m,q,d=l,f=i;switch(c.Hh){case 0:h=b.y;m=sg;q=tg;break;case 4:d=j;case 2:h=b.x;m=ug;q=tg;break;case 5:d=j;case 3:h=b.x,m=vg,q=wg}for(var g=k,t,v=dc(c),A=0,T=v.length;A<
T;A++){var V=v[A];if(V!=this.r){var qa=m(V.Tc);if(d){var Za=xg(V,b);ia(f)||(f=Za);if(q(h,qa)&&(t==i||Za<f||Za==f&&(q(qa,t)||qa==t)))g=V,t=qa;Za<f&&(f=Za)}else if(q(h,qa)&&(t==i||q(qa,t)))g=V,t=qa}}h=g!==k&&xg(g,b)>f?k:g}else h=k;if(!this.dispatchEvent(new qg("beforedragmove",this,a,this.r,this.B,this.p,b,c,h)))return l;if(c)this.fh?(this.r.parentNode!=c||ec(this.r)!=h)&&c.insertBefore(this.r,h):h&&(this.Eh=h),this.r.style.display="",c.gc&&y(c,c.gc);else{this.Jk||(this.r.style.display="none");m=0;
for(q=this.fa.length;m<q;m++)t=this.fa[m],t.gc&&z(t,t.gc)}c!=this.Jf&&(this.Jf=c,pg(this,this.r));this.dispatchEvent(new qg("dragmove",this,a,this.r,this.B,this.p,b,c,h));return l};n.ze=function(){og(this);this.p=this.B=this.qg=this.Ye=this.Jf=this.r=k;for(var a=0,b=this.fa.length;a<b;a++)this.fa[a].Tc=k;a=0;for(b=this.Vc.length;a<b;a++)this.Vc[a].Tc=k};
n.$h=function(a){if(!this.dispatchEvent(new qg("beforedragend",this,a,this.r,this.B,this.p)))return l;this.fh||this.Ye.insertBefore(this.r,this.Eh);og(this);this.dispatchEvent(new qg("dragend",this,a,this.r,this.B,this.p));this.ze();return j};function og(a){Bc(a.p);a.B&&cc(a.B);a.r&&"none"==a.r.style.display&&(a.Ye.insertBefore(a.r,a.qg),a.r.style.display="");a.If&&a.r?z.apply(k,Wa(a.r,a.If)):a.r&&(a.r.style.visibility="visible");for(var b=0,c=a.fa.length;b<c;b++){var d=a.fa[b];d.gc&&z(d,d.gc)}}
n.tk=function(a){y.apply(k,Wa(a.currentTarget,this.Jh))};n.sk=function(a){z.apply(k,Wa(a.currentTarget,this.Jh))};n.rk=function(a){y.apply(k,Wa(a.currentTarget,this.Ih))};n.qk=function(a){z.apply(k,Wa(a.currentTarget,this.Ih))};function rg(a,b){return a.x>b.left&&a.x<b.left+b.width&&a.y>b.top&&a.y<b.top+b.height}function xg(a,b){var c=a.Tc;return Math.abs(b.y-(c.top+(c.height-1)/2))}function sg(a){return a.top+a.height-1}function ug(a){return a.left+a.width-1}function vg(a){return a.left||0}
function tg(a,b){return a<b}function wg(a,b){return a>b}n.Ae=function(a){var b=a.cloneNode(j);switch(a.tagName.toLowerCase()){case "tr":return G("table",k,G("tbody",k,b));case "td":case "th":return G("table",k,G("tbody",k,G("tr",k,b)));default:return b}};function qg(a,b,c,d,f,g,h,m,q){Fc.call(this,a);this.Rm=b;this.event=c;this.Ja=d;this.$j=f;this.Zj=g;this.Kh=h;this.$m=m;this.Hb=q}u(qg,Fc);function Bf(a,b,c,d,f){S.call(this);this.q=a;this.ua=yf();this.pj=this.ve=l;this.td=b;this.Tb=c;this.R=f;this.mn=d;this.Yb={};this.md={};this.Eb=this.ua?new ng:k;this.Bf=6;this.Yd=j}u(Bf,S);n=Bf.prototype;n.L=function(){this.d=H(Lf,{name:this.q.name,Om:this.q.X,kf:this.td})};
n.w=function(){Bf.e.w.call(this);this.ce=E("programs",this.b());this.zb=E("viewers",this.b());this.Oi=E("name",this.b());this.Qf=E("graph",this.b());this.Va=E("suggest",this.b());if(this.q.C)O(this.Va,l);else{this.wa=new yg("Paste YouTube link");this.wa.g(E("program-input",this.b()));var a=new Ze(this.wa.b()),b=new zg(this.wa.b()),c=new Ag(r(this.og,this),1E3);P(P(P(this.l(),b,Bg,r(this.og,this)),a,"key",r(function(){c&&c.Ie()},this)),this.wa,"focus",r(this.og,this))}this.ca=(Q(this.ce).width-200)/
this.td;if(this.pj){var b=0,d=40;this.gg=0;this.Oh=[new Ib(b,d)];this.Ym=Math.floor((s()-this.R.getTime())/1E3);for(a=0;a<this.td/40;a++)this.Oh.push(new Ib(b+=40,d+=[-30,-5,15,10,25][Math.floor(5*Math.random())])),this.gg=Math.max(this.gg,d);this.kk=Raphael(this.Qf,"100%",60).path("M0,0").attr({stroke:"none",opacity:0.8,fill:"#5d5d5d"})}Hd(this.Oi,"background",Raphael.getColor());b=this.q.oa;for(a=0;a<b.length;a++)b[a].media.live?(window.console.log("LIVE"),this.Bb(b[a])):b[a].time.getTime()<this.Tb.getTime()&&
b[a].time.getTime()+1E3*b[a].media.duration>this.Tb.getTime()-1E3*this.td?this.Bb(b[a]):b[a].time.getTime()>this.Tb.getTime()&&this.Bb(b[a]);if(this.ua){a=this.Eb;b=this.ce;b.Hh=2;b.gc=i;a.fa.push(b);this.Eb.Ge="drag";var f=this.b();this.Eb.fi=function(a){var b=ua(a.currentTarget);this.r=this.Fe[b];this.B=this.Ae(this.r);this.Ge&&y(this.B,this.Ge);this.B.style.margin="0";this.B.style.position="absolute";this.B.style.visibility="hidden";f.appendChild(this.B);b=Sd(this.r);Ud(this.B,b);this.p=new ge(this.B);
this.p.Kg(this.Vf);K(this.p,"start",this.ai,l,this);K(this.p,"end",this.$h,l,this);K(this.p,"earlycancel",this.ze,l,this);this.p.Bc(a)};this.Eb.init();var g={},h,m,q,t,v,A=j;P(P(P(this.l(),this.Eb,"beforedragstart",r(function(a){(!this.ve||!a.event.shiftKey)&&a.preventDefault()},this)),this.Eb,"dragmove",function(a){q=q||a.Kh.x;t=t||Od(a.Ja).x;v=v||(a.Ja.previousElementSibling!=i?a.Ja.previousElementSibling:fc(a.Ja.previousSibling,l));A=A&&!!v;var b=v?Q(v).width:i,c=v?Od(v).x:i,d=a.Kh.x-q;10>Math.abs(d)||
(a.Hb&&!g[a.Hb.id]&&0<d?(b=Q(a.Ja).width,c=Od(a.Hb).x,h=c-b+Q(a.Hb).width,d=this.q.Rb[a.Hb.id],m=d.time.getTime()/1E3+d.media.duration-this.q.Rb[a.Ja.id].media.duration,Md(a.Ja,h),Md(a.Hb,c-b-1),g[a.Hb.id]=j,b=a.Hb,b.parentNode&&b.parentNode.insertBefore(a.Ja,b.nextSibling)):A&&(0>d&&t+d<c+b)&&(b=Q(a.Ja).width,h=c=Od(v).x,m=this.q.Rb[v.id].time.getTime()/1E3,Md(a.Ja,h),Md(v,c+b+1),b=v.previousElementSibling!=i?v.previousElementSibling:fc(v.previousSibling,l),v.parentNode&&v.parentNode.insertBefore(a.Ja,
v),v=b,A=!!b))}),this.Eb,"dragend",function(a){m&&(Y("/admin/_rescheduleprogram",i,"POST","program="+a.$j.id+"&time="+m),this.Eb.init(),m=i);g={};h=v=t=q=i;A=j})}for(var a=this.q.Fc,b=this.Ic,d=p(a)?a.split(""):a,T=a.length-1;0<=T;--T)T in d&&b.call(this,d[T],T,a);P(P(P(P(this.l(),this.Va,"click",r(this.pl,this)),E("close",this.Va),"click",r(function(a){a.preventDefault();a.stopPropagation();Cg(this)},this)),E("name",this.b()),"click",r(function(){this.q.id!=U.a().m.id&&this.q.h()&&U.a().c(Df,this.q)},
this)),cd.a().Dd,bd,r(this.update,this));this.q.subscribe(gg,this.Bb,this);this.q.subscribe(ig,this.Ic,this);this.q.subscribe("remove-viewer",this.Fl,this);this.q.subscribe(jg,this.eh,this);U.a().subscribe(Ff,this.Ej,this);U.a().subscribe(Df,function(){this.Bf=0;this.Ej()},this);N.a().subscribe("toggle-admin",ba("ve"),this);this.update()};
n.Ej=function(){if(this.s){z(this.md[this.s],"playing");var a=E("title",this.md[this.s]);a&&(a.style.left="")}this.s=k;if(a=U.a().m.h()){var b=this.md[a.id];b&&(this.s=a.id,y(b,"playing"))}};
n.Bb=function(a){var b=G("div",{"class":"program",id:a.id}),c=a.media.duration*this.ca,d=this.ua&&a.time.getTime()+1E3*a.media.duration>s();uc(b,Mf,{Ag:a,media:a.media,repeat:600<c,tf:d});this.md[a.id]=b;var f=U.a().m.h();f&&a.id==f.id&&(y(b,"playing"),this.s=a.id);var g=E("thumb",b);L(function(){a.media.Tg.height<Q(b).height+50?(y(g,"fix-height"),y(g,"pan-left")):y(g,"pan-top");m&&Wd(g,200);C(b,"stretched",360<a.media.Tg.height)});f=(a.time.getTime()-this.R.getTime())/1E3*this.ca;if(a.media.live)var h=
(s()-a.time.getTime())/1E3*this.ca-100,c=c-h,f=f+h;Wd(b,Math.ceil(c-1));Md(b,Math.floor(f));Md(this.Va,f+c);this.ce.appendChild(b);var m=120>c;C(b,"clipped",m);P(this.l(),b,"click",function(){Z.a().c(Dg,a.media)});var q=B(b,"clipped")?200:Q(b).width,c=E("title",b);Q(c);P(P(this.l(),b,"mouseover",function(){N.a().oc&&(this.ve||Hd(g,"background-position-y",a.media.rd+10*Math.max(a.media.Tg.width/q,1)+"%"))}),b,"mouseout",function(){N.a().oc&&(this.ve||Hd(g,"background-position-y",a.media.rd+"%"))});
d&&(d=new ge(E("repos",b)),d.Hd=function(a,b){var c=b-24;-50<=c&&50>=c&&Hd(g,"background-position-y",50-c+"%")},P(P(this.l(),d,"end",function(){var b=(g.style[Ka("background-position")]||"").split(" ")[1],b=b.substring(0,b.length-1);a.media.rd=b;Y("/admin/_posthumb",se(),"POST","media="+a.media.id+"&pos="+b)}),E("remove",b),"click",r(this.ml,this,a,b)))};n.eh=function(a){var b=this.md[a.id],a=(od(a.time+"Z").getTime()-this.R.getTime())/1E3*this.ca;Md(b,a)};
n.ml=function(a,b){cc(b);Y("/admin/_removeprogram",i,"POST","program="+a.id+"&media_id="+a.media.id+"&channel_id="+this.q.id);Y("admin/_media/collection",r(function(){alert("Disallowed on all channels.")},this),"POST","&media="+a.media.id+"&approve=false")};
n.Ic=function(a){if(X.a().o.id!=a.i.id){var b=this.Yb[a.i.id];b||(b=G("div","viewer"),this.zb.appendChild(b),this.Yb[a.i.id]=b);if(!a.Ec||a.Ec.getTime()>this.R.getTime()){var c=H(Nf,{i:a.i,Fb:a.i.Fb().toUpperCase(),Sj:a.T.id});b.appendChild(c);var b=E("watch-with",c),d=Math.max(a.Zg.getTime(),this.R.getTime()),f=(d-this.R.getTime())/1E3*this.ca+200,d=(s()-d)/1E3*this.ca;Wd(c,d);Md(c,f);Hd(c,"background",a.i.color);Hd(b,"margin-left",-Q(b).width/2+14+"px");P(this.l(),c,"click",function(b){pc(b.target,
k,"watch-with")||Z.a().c(Eg,a.i)})}}};n.Fl=function(a){this.Yb[a.id]&&(cc(this.Yb[a.id]),Pb(this.Yb,a.id),U.a().c(Ef))};n.pl=function(){if(!B(this.Va,"show")){Zd(E("select-program",this.Va),1);y(this.Va,"show");var a=this.wa,b=Fg(a);a.Xf=j;a.b().focus();!b&&!Gg&&(a.b().value=a.Oa);a.b().select();Gg||(a.u&&Cd(a.u,a.b(),"click",a.Rf),L(a.gk,10,a))}};function Cg(a){z(a.Va,"show");a.wa.Ga("");E("page2",a.b()).innerHTML=""}
n.og=function(){var a=E("select-content",this.b()),b=E("page2",this.b());if(!dc(b).length)try{var c=Hg(this.wa.I());Y(Ba("https://gdata.youtube.com/feeds/api/videos/%s?v=2&alt=json",c.ih),r(function(d){d=Ig(Jg(d.target)).entry;uc(b,Of,{title:d.title.$t,Sg:d.media$group.media$thumbnail[0].url});d=new wf("YES");d.g(E("button",b));(new Ce(a,[0,0],[160,0],300,Kg)).play();P(this.l(),d,"action",r(this.ol,this,c))},this))}catch(d){}};
n.ol=function(a){Y("/_addprogram",r(function(a){a=kg(a.target);a.id&&(a=new Yf(a),this.q.c(gg,a))},this),"POST","channel_id="+this.q.id+"&url="+a.vd);Zd(E("button",this.Va),0);O(E("added",this.Va),j);Zd(E("select-program",this.Va),0);L(r(function(){Cg(this)},this),3E3)};
n.update=function(){!this.Yd&&this.q.oa.length&&this.q.c(Cf,j);this.Yd=!!this.q.oa.length;C(this.b(),"offline",!this.Yd);if(this.q.oa.length){if(this.pj){var a="",b=Q(this.ce).width,c,d,f,g=(s()-this.R)/1E3,h=ab(this.Oh,0,Math.floor(g/40));w(h,function(m,q){c=m.x/this.td*b;d=60-60*(m.y/this.gg);q==h.length-1&&(c=g/this.td*b);c+=6;q?(a+="L"+[c-30,f],a+="C"+[c-20,f,c-10,d,c,d]):a+="M"+[c,d]+"R";f=d},this);this.kk.attr({path:a+"L"+c+",60 10,60z"})}if(this.s&&0<this.Bf){var m=this.md[this.s],q=Od(m).x+
Od(D("guide")).x,m=E("title",m);Md(m,200>q?-q+210:5)}else this.Bf++;Lb(this.q.Fc,function(a){if(this.q.h()&&!a.Ec&&this.Yb[a.i.id]){var b=Math.max(a.Zg.getTime(),this.R.getTime());Q(this.ce);var c=Math.floor((s()-b)/1E3*this.ca),d=W.a().h();a.i.id==X.a().o.id&&d&&(c=Math.floor((d.time.getTime()+1E3*W.a().Le()-b)/1E3*this.ca));this.Yb[a.i.id].lastChild&&Wd(this.Yb[a.i.id].lastChild,c)}},this);q=Q(this.Qf).height;m=Q(this.zb).height;q-=m;0>q&&Hd(this.Qf,"margin-top",-q+"px");Vd(this.Oi,Q(this.b()).height-
1)}};function X(){M.call(this);this.Fj={};this.pg=[]}u(X,M);la(X);X.prototype.add=function(a){this.Fj[a.id]=a};X.prototype.get=function(a){return this.Fj[a]};function Lg(a,b){var c=a.get(b.id);c||(c=new $f(b),a.add(c));return c};function Mg(a){if("function"==typeof a.Me)return a.Me();if(p(a))return a.split("");if(pa(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return Mb(a)}function Ng(a,b,c){if("function"==typeof a.forEach)a.forEach(b,c);else if(pa(a)||p(a))w(a,b,c);else{var d;if("function"==typeof a.Pf)d=a.Pf();else if("function"!=typeof a.Me)if(pa(a)||p(a)){d=[];for(var f=a.length,g=0;g<f;g++)d.push(g)}else d=Nb(a);else d=i;for(var f=Mg(a),g=f.length,h=0;h<g;h++)b.call(c,f[h],d&&d[h],a)}};function Og(a,b){this.Mb={};this.Q=[];var c=arguments.length;if(1<c){c%2&&e(Error("Uneven number of arguments"));for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else if(a){a instanceof Og?(c=a.Pf(),d=a.Me()):(c=Nb(a),d=Mb(a));for(var f=0;f<c.length;f++)this.set(c[f],d[f])}}n=Og.prototype;n.V=0;n.Gj=0;n.Me=function(){Pg(this);for(var a=[],b=0;b<this.Q.length;b++)a.push(this.Mb[this.Q[b]]);return a};n.Pf=function(){Pg(this);return this.Q.concat()};
n.clear=function(){this.Mb={};this.Gj=this.V=this.Q.length=0};function Pg(a){if(a.V!=a.Q.length){for(var b=0,c=0;b<a.Q.length;){var d=a.Q[b];Object.prototype.hasOwnProperty.call(a.Mb,d)&&(a.Q[c++]=d);b++}a.Q.length=c}if(a.V!=a.Q.length){for(var f={},c=b=0;b<a.Q.length;)d=a.Q[b],Object.prototype.hasOwnProperty.call(f,d)||(a.Q[c++]=d,f[d]=1),b++;a.Q.length=c}}n.get=function(a,b){return Object.prototype.hasOwnProperty.call(this.Mb,a)?this.Mb[a]:b};
n.set=function(a,b){Object.prototype.hasOwnProperty.call(this.Mb,a)||(this.V++,this.Q.push(a),this.Gj++);this.Mb[a]=b};n.clone=function(){return new Og(this)};function Qg(a){return Rg(a||arguments.callee.caller,[])}
function Rg(a,b){var c=[];if(Ta(b,a))c.push("[...circular reference...]");else if(a&&50>b.length){c.push(Sg(a)+"(");for(var d=a.arguments,f=0;f<d.length;f++){0<f&&c.push(", ");var g;g=d[f];switch(typeof g){case "object":g=g?"object":"null";break;case "string":break;case "number":g=String(g);break;case "boolean":g=g?"true":"false";break;case "function":g=(g=Sg(g))?g:"[fn]";break;default:g=typeof g}40<g.length&&(g=g.substr(0,40)+"...");c.push(g)}b.push(a);c.push(")\n");try{c.push(Rg(a.caller,b))}catch(h){c.push("[exception trying to get caller]\n")}}else a?
c.push("[...long stack...]"):c.push("[end]");return c.join("")}function Sg(a){if(Tg[a])return Tg[a];a=String(a);if(!Tg[a]){var b=/function ([^\(]+)/.exec(a);Tg[a]=b?b[1]:"[Anonymous]"}return Tg[a]}var Tg={};function Ug(a,b,c,d,f){this.reset(a,b,c,d,f)}Ug.prototype.Ll=0;Ug.prototype.Nh=k;Ug.prototype.Mh=k;var Vg=0;Ug.prototype.reset=function(a,b,c,d,f){this.Ll="number"==typeof f?f:Vg++;this.qn=d||s();this.Vd=a;this.Tk=b;this.cn=c;delete this.Nh;delete this.Mh};Ug.prototype.mj=ba("Vd");function Wg(a){this.Vk=a}Wg.prototype.K=k;Wg.prototype.Vd=k;Wg.prototype.da=k;Wg.prototype.gi=k;function Xg(a,b){this.name=a;this.value=b}Xg.prototype.toString=ca("name");var Yg=new Xg("SEVERE",1E3),Zg=new Xg("WARNING",900),$g=new Xg("INFO",800),ah=new Xg("CONFIG",700),bh=new Xg("FINE",500);n=Wg.prototype;n.getParent=ca("K");n.Wh=function(){this.da||(this.da={});return this.da};n.mj=ba("Vd");function ch(a){return a.Vd?a.Vd:a.K?ch(a.K):k}
n.log=function(a,b,c){if(a.value>=ch(this).value){a=this.jk(a,b,c);b="log:"+a.Tk;fa.console&&(fa.console.timeStamp?fa.console.timeStamp(b):fa.console.markTimeline&&fa.console.markTimeline(b));fa.msWriteProfilerMark&&fa.msWriteProfilerMark(b);for(b=this;b;){var c=b,d=a;if(c.gi)for(var f=0,g=i;g=c.gi[f];f++)g(d);b=b.getParent()}}};
n.jk=function(a,b,c){var d=new Ug(a,String(b),this.Vk);if(c){d.Nh=c;var f;var g=arguments.callee.caller;try{var h;var m=ja("window.location.href");if(p(c))h={message:c,name:"Unknown error",lineNumber:"Not available",fileName:m,stack:"Not available"};else{var q,t,v=l;try{q=c.lineNumber||c.bn||"Not available"}catch(A){q="Not available",v=j}try{t=c.fileName||c.filename||c.sourceURL||m}catch(T){t="Not available",v=j}h=v||!c.lineNumber||!c.fileName||!c.stack?{message:c.message,name:c.name,lineNumber:q,
fileName:t,stack:c.stack||"Not available"}:c}f="Message: "+Da(h.message)+'\nUrl: <a href="view-source:'+h.fileName+'" target="_new">'+h.fileName+"</a>\nLine: "+h.lineNumber+"\n\nBrowser stack:\n"+Da(h.stack+"-> ")+"[end]\n\nJS stack traversal:\n"+Da(Qg(g)+"-> ")}catch(V){f="Exception trying to expose exception! You win, we lose. "+V}d.Mh=f}return d};function dh(a,b){a.log(Yg,b,i)}n.info=function(a,b){this.log($g,a,b)};function eh(a,b){a.log(bh,b,i)}var fh={},gh=k;
function hh(a){gh||(gh=new Wg(""),fh[""]=gh,gh.mj(ah));var b;if(!(b=fh[a])){b=new Wg(a);var c=a.lastIndexOf("."),d=a.substr(c+1),c=hh(a.substr(0,c));c.Wh()[d]=b;b.K=c;fh[a]=b}return b};function Ig(a){a=String(a);if(/^\s*$/.test(a)?0:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x10-\x1f\x80-\x9f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,"")))try{return eval("("+a+")")}catch(b){}e(Error("Invalid JSON string: "+a))};function ih(){}ih.prototype.xe=k;var jh;function kh(){}u(kh,ih);function lh(a){return(a=mh(a))?new ActiveXObject(a):new XMLHttpRequest}function nh(a){var b={};mh(a)&&(b[0]=j,b[1]=j);return b}
function mh(a){if(!a.mi&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var b=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],c=0;c<b.length;c++){var d=b[c];try{return new ActiveXObject(d),a.mi=d}catch(f){}}e(Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed"))}return a.mi}jh=new kh;var oh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([\\w\\d\\-\\u0100-\\uffff.%]*)(?::([0-9]+))?)?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");function ph(a){J.call(this);this.headers=new Og;this.yd=a||k}u(ph,Zc);ph.prototype.F=hh("goog.net.XhrIo");var qh=/^https?$/i,rh=[];function Y(a,b,c,d){var f=new ph;rh.push(f);b&&K(f,"complete",b);K(f,"ready",za(sh,f));f.send(a,c,d,i)}function sh(a){a.$();Ua(rh,a)}n=ph.prototype;n.Ab=l;n.A=k;n.qf=k;n.Ud="";n.Ci="";n.Sd=0;n.Td="";n.Mf=l;n.Qe=l;n.Yf=l;n.pc=l;n.lf=0;n.Cc=k;n.cf="";n.im=l;
n.send=function(a,b,c,d){this.A&&e(Error("[goog.net.XhrIo] Object is active with another request"));b=b?b.toUpperCase():"GET";this.Ud=a;this.Td="";this.Sd=0;this.Ci=b;this.Mf=l;this.Ab=j;this.A=this.yd?lh(this.yd):lh(jh);this.qf=this.yd?this.yd.xe||(this.yd.xe=nh(this.yd)):jh.xe||(jh.xe=nh(jh));this.A.onreadystatechange=r(this.Wi,this);try{eh(this.F,th(this,"Opening Xhr")),this.Yf=j,this.A.open(b,a,j),this.Yf=l}catch(f){eh(this.F,th(this,"Error opening Xhr: "+f.message));uh(this,f);return}var a=c||
"",g=this.headers.clone();d&&Ng(d,function(a,b){g.set(b,a)});d=fa.FormData&&a instanceof fa.FormData;if(b="POST"==b)b=!Object.prototype.hasOwnProperty.call(g.Mb,"Content-Type")&&!d;b&&g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");Ng(g,function(a,b){this.A.setRequestHeader(b,a)},this);this.cf&&(this.A.responseType=this.cf);"withCredentials"in this.A&&(this.A.withCredentials=this.im);try{this.Cc&&(ad.clearTimeout(this.Cc),this.Cc=k),0<this.lf&&(eh(this.F,th(this,"Will abort after "+
this.lf+"ms if incomplete")),this.Cc=ad.setTimeout(r(this.am,this),this.lf)),eh(this.F,th(this,"Sending request")),this.Qe=j,this.A.send(a),this.Qe=l}catch(h){eh(this.F,th(this,"Send error: "+h.message)),uh(this,h)}};n.am=function(){"undefined"!=typeof ea&&this.A&&(this.Td="Timed out after "+this.lf+"ms, aborting",this.Sd=8,eh(this.F,th(this,this.Td)),this.dispatchEvent("timeout"),this.abort(8))};function uh(a,b){a.Ab=l;a.A&&(a.pc=j,a.A.abort(),a.pc=l);a.Td=b;a.Sd=5;vh(a);wh(a)}
function vh(a){a.Mf||(a.Mf=j,a.dispatchEvent("complete"),a.dispatchEvent("error"))}n.abort=function(a){this.A&&this.Ab&&(eh(this.F,th(this,"Aborting")),this.Ab=l,this.pc=j,this.A.abort(),this.pc=l,this.Sd=a||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),wh(this))};n.n=function(){this.A&&(this.Ab&&(this.Ab=l,this.pc=j,this.A.abort(),this.pc=l),wh(this,j));ph.e.n.call(this)};n.Wi=function(){!this.Yf&&!this.Qe&&!this.pc?this.ll():xh(this)};n.ll=function(){xh(this)};
function xh(a){if(a.Ab&&"undefined"!=typeof ea)if(a.qf[1]&&4==yh(a)&&2==zh(a))eh(a.F,th(a,"Local request error detected and ignored"));else if(a.Qe&&4==yh(a))ad.setTimeout(r(a.Wi,a),0);else if(a.dispatchEvent("readystatechange"),4==yh(a)){eh(a.F,th(a,"Request complete"));a.Ab=l;try{var b=zh(a),c,d;a:switch(b){case 200:case 201:case 202:case 204:case 304:case 1223:d=j;break a;default:d=l}if(!(c=d)){var f;if(f=0===b){var g=String(a.Ud).match(oh)[1]||k;if(!g&&self.location)var h=self.location.protocol,
g=h.substr(0,h.length-1);f=!qh.test(g?g.toLowerCase():"")}c=f}if(c)a.dispatchEvent("complete"),a.dispatchEvent("success");else{a.Sd=6;var m;try{m=2<yh(a)?a.A.statusText:""}catch(q){eh(a.F,"Can not get status: "+q.message),m=""}a.Td=m+" ["+zh(a)+"]";vh(a)}}finally{wh(a)}}}
function wh(a,b){if(a.A){var c=a.A,d=a.qf[0]?ka:k;a.A=k;a.qf=k;a.Cc&&(ad.clearTimeout(a.Cc),a.Cc=k);b||a.dispatchEvent("ready");try{c.onreadystatechange=d}catch(f){dh(a.F,"Problem encountered resetting onreadystatechange: "+f.message)}}}n.Ib=function(){return!!this.A};function yh(a){return a.A?a.A.readyState:0}function zh(a){try{return 2<yh(a)?a.A.status:-1}catch(b){return a.F.log(Zg,"Can not get status: "+b.message,i),-1}}function kg(a){if(a.A)return Ig(a.A.responseText)}
function Jg(a){try{if(!a.A)return k;if("response"in a.A)return a.A.response;switch(a.cf){case "":case "text":return a.A.responseText;case "arraybuffer":if("mozResponseArrayBuffer"in a.A)return a.A.mozResponseArrayBuffer}dh(a.F,"Response type "+a.cf+" is not supported on this browser");return k}catch(b){return eh(a.F,"Can not get response: "+b.message),k}}function th(a,b){return b+" ["+a.Ci+" "+a.Ud+" "+zh(a)+"]"};function U(){M.call(this);this.Lc=[];this.Kc={};this.subscribe(Df,this.cc,this);this.subscribe(Ff,this.dh,this)}u(U,M);la(U);U.prototype.get=function(a){return this.Kc[a]};function Kf(a,b){if(a.m&&a.m.h()&&(b&&!a.m.C||!b))return a.m;if(a.Rd&&a.Rd.h()&&(b&&!a.Rd.C||!b))return a.Rd;for(var c=k,d=k,f=0;!d&&f<a.Lc.length;)d=(c=!a.Lc[f].C?a.Lc[f]:k)&&c.h(),f++;return c}U.prototype.eg=function(a){Lb(a,r(function(a){var c=new fg(a);this.Lc.push(c);this.Kc[a.id]=c;c.C&&(this.C=c)},this))};
U.prototype.cc=function(a,b){if(a&&!this.m||a&&this.m&&this.m.id!=a.id){this.Rd=this.m;this.m=a;this.dh(a.h());var c=a.h(),c=c&&!Ob(c.media.vb);Y("/_changechannel",se(),"POST","channel="+a.id+"&friends="+c+(b?"&forced=true":""));eg.a().cc(a,this.Rd)}};U.prototype.dh=function(a){this.m&&(this.s&&w(this.m.Fc,function(a){Pb(this.s.media.vb,a.i.id)},this),a&&(this.s=a,w(this.m.Fc,function(b){b.Ec||(a.media.vb[b.i.id]=b.i)})))};
function Jf(){var a=U.a();if(!a.C){var b=X.a().o;a.C=new fg({id:b.id,name:b.name.split(" ")[0]+"'s Channel"})}return a.C}var Df="change-channel",Ff="next-program",Ef="resize";function Ah(){S.call(this);this.nc=new wf("Guide");of(this.nc,16,j);this.wb=new wf("Sidebar");of(this.wb,16,j);this.Fg=new wf("Restart");this.Qa=new wf("Play");of(this.Qa,16,j);this.xd=new wf("Volume");of(this.xd,16,j);this.Jc=new wf("Admin");of(this.Jc,16,j);this.Re=new wf("Info")}u(Ah,S);n=Ah.prototype;
n.w=function(){Ah.e.w.call(this);this.gj=E("right",this.b());this.Ra=E("progress",this.b());this.lj=E("seek",this.b());this.sb=E("elapsed",this.b());this.cm=E("title",this.b());this.Lh=E("duration",this.b());this.Nm=E("current-time",this.b());Me(this,this.nc);this.nc.g(D("guide-toggle"));nf(this.nc,B(this.b(),"guide-toggled"));Me(this,this.wb);this.wb.g(D("sidebar-toggle"));nf(this.wb,B(this.b(),"sidebar-toggled"));Me(this,this.Fg);this.Fg.g(E("restart",this.b()));Me(this,this.Qa);this.Qa.g(E("play",
this.b()));Me(this,this.xd);this.xd.g(E("volume",this.b()));Me(this,this.Re);this.Re.g(D("info-toggle"));O(this.Re.b(),X.a().o.rf!=bg);Me(this,this.Jc);this.Jc.g(D("admin-toggle"));O(this.Jc.b(),X.a().o.rf==bg);var a=new Ag(this.Zl,1E3,this);this.resize();this.p=new ge(this.lj);this.p.ib(l);var b=this.Ra,c=this.sb,d=this.Lh;this.p.Hd=function(a){if(0<a&&a<Q(b).width){this.target.style.left=a+"px";c.style.width=a+"px";var a=a/Q(b).width,g=W.a().h().media.duration;ic(d,Bh(Math.round(a*g).toString())+
" / "+Bh(g.toString()))}};P(P(P(P(P(P(P(P(P(P(P(P(this.l(),window,"resize",r(this.resize,this)),this.nc,"action",r(function(){a.Ie()},this)),this.wb,"action",r(function(a){a.stopPropagation();N.a().c(gd,We(this.wb))},this)),this.Fg,"action",r(function(a){a.stopPropagation();W.a().h()&&(a=Zf(W.a().h().media),W.a().c(Hf,a),this.resize())},this)),this.Qa,"action",r(function(a){a.stopPropagation();N.a().c(id,!We(this.Qa));this.resize()},this)),this.Re,"action",r(function(a){a.stopPropagation();N.a().c("toggle-info")},
this)),this.xd,"action",r(function(a){a.stopPropagation();N.a().c("mute",We(this.xd))},this)),this.Jc,"action",r(function(a){a.stopPropagation();N.a().c("toggle-admin",We(this.Jc));this.resize()},this)),cd.a().Dd,bd,r(function(){if(W.a().h()){var a=W.a().getCurrentTime()/W.a().h().media.duration;3>W.a().h().media.duration-W.a().getCurrentTime()&&W.a().c(Ch);U.a().m.C&&!B(this.Ra,"drag")&&(ic(this.Lh,(W.a().getCurrentTime()?Bh(W.a().getCurrentTime().toString())+" / ":"")+Bh(W.a().h().media.duration.toString())),
Wd(this.sb,this.Bg?a*this.Bg:0))}},this)),this.Ra,"click",r(function(a){!B(this.Ra,"drag")&&W.a().h()&&(a=a.offsetX/Q(this.Ra).width*W.a().h().media.duration,z(this.sb,"animate"),W.a().c(Dh,a),L(r(function(){y(this.sb,"animate")},this),1E3))},this)),this.p,"beforedrag",r(function(){y(this.Ra,"drag")},this)),this.p,"end",r(function(a){this.lj.style.left="";a=a.left/Q(this.Ra).width*W.a().h().media.duration;z(this.sb,"animate");W.a().c(Dh,a);L(r(function(){z(this.Ra,"drag");y(this.sb,"animate")},this),
1E3)},this));W.a().subscribe(Hf,function(a){Eh(this,a,j)},this);W.a().subscribe(Fh,function(){this.p.ib(j);this.resize()},this);U.a().subscribe(Df,function(){z(this.b(),"window");L(r(this.resize,this),1E3)},this);U.a().subscribe(Ff,function(){this.resize()},this);N.a().subscribe("mute",this.Uk,this);N.a().subscribe(hd,this.nf,this);N.a().subscribe(gd,function(a){nf(this.wb,a);C(this.b(),"sidebar-toggled",a);this.resize()},this);N.a().subscribe(id,function(a){nf(this.Qa,!a)},this);W.a().subscribe(Fh,
function(){U.a().m.C&&W.a().h()&&this.resize()},this)};function Eh(a,b,c){ic(a.cm,b.media.name.toUpperCase());c&&(z(a.sb,"animate"),Wd(a.sb,0),L(r(function(){y(this.sb,"animate")},a),1E3))}n.Uk=function(a){nf(this.xd,a)};n.Zl=function(){var a=We(this.nc);N.a().c(hd,a)};n.nf=function(a){nf(this.nc,a);a&&(z(this.b(),"window"),z(this.b(),"collapsed"),L(r(this.resize,this)));L(r(function(){C(this.b(),"guide-toggled",a);a||(U.a().m&&U.a().m.h(),y(this.b(),"collapsed"),this.resize())},this),a?0:600)};
n.resize=function(){if(U.a().m.C)W.a().h()&&(O(this.Ra,j),Eh(this,W.a().h()),this.Bg=F().width-(We(this.wb)?580:260)-50,Wd(this.Ra,this.Bg));else{O(this.Ra,l);var a=D("guide"),b=E("current",a),b=Wb("program",b),a=(b=b[b.length-1])?Od(a).x+Od(b).x+Q(b).width+210:9999999,a=Math.min(F().width-200,Math.max(100,F().width-a)),c=Math.max(100,We(this.wb)&&250<a?a-247:a+5),d=B(this.b(),"collapsed")&&!!b&&a<F().width-203;d&&this.Il!=c?(this.Il=c,Wd(this.gj,c)):this.gj.style.width="";L(r(function(){C(this.b(),
"window",d&&B(this.b(),"collapsed"))},this),400)}};function Gh(a){return(a.link?'<a href="'+I(a.link)+'">':"")+'<div class="note'+(a.Wf?" pic":"")+'">'+(a.Wf?'<div class="picture"><img class="image" src='+I(a.Wf)+' style="display: none"/></div>':"")+'<div class="action">'+(a.i?I(a.i.name)+" ":"")+I(a.action)+'</div><div class="content">'+I(a.content)+'</div><div class="close"></div></div>'+(a.link?"</a>":"")};function Hh(){S.call(this)}u(Hh,S);Hh.prototype.L=function(){this.d=G("div",{id:"notify"})};Hh.prototype.H=function(a){Hh.e.H.call(this,a);Pf.a().subscribe("flash",function(a,c,d,f,g){this.jf(j,a,c,d,f,g)},this);Pf.a().subscribe("show",function(a,c,d,f,g){this.jf(l,a,c,d,f,g)},this)};
Hh.prototype.jf=function(a,b,c,d,f,g){var h=H(Gh,{action:b,content:c,i:d,Wf:f,link:g}),m=E("image",h);E("close",h);P(P(P(this.l(),E("close",h),"click",function(a){a.preventDefault();a.stopPropagation();cc(h)}),h,"click",function(){cc(h)}),m,"load",function(){O(m,j);L(function(){m.style.marginLeft=-1*m.clientWidth/2+"px";m.style.marginTop=-1*m.clientHeight/2+"px"})});this.b().appendChild(h);var q=E("note",h);L(function(){q&&(y(q,"show"),a?L(function(){z(q,"show");y(q,"fade-out");L(function(){cc(h)},
5100)},3E3):y(q,"dim"))})};function W(){M.call(this);this.subscribe(Hf,function(a){Jf().c(gg,a);Y("/_addprogram",se(),"POST","channel_id="+U.a().C.id+"&media_id="+a.media.id+"&async=true");lg(eg.a(),a.media)},this);this.subscribe(Fh,function(a){Y("/_started",se(),"POST","media_id="+a.id)},this)}u(W,M);la(W);W.prototype.Mg=ba("v");W.prototype.h=ca("s");W.prototype.getCurrentTime=function(){return this.v&&this.v.getCurrentTime?this.v.getCurrentTime():0};
W.prototype.Le=function(){return this.v&&this.v.getCurrentTime?this.v.getCurrentTime():0};var Ch="before-end",Hf="play-async",Fh="playing",Dh="seek";function Ih(){pe.call(this);this.queue=[]}u(Ih,pe);Ih.prototype.add=function(a){Ta(this.queue,a)||(this.queue.push(a),K(a,"finish",this.Yk,l,this))};Ih.prototype.n=function(){w(this.queue,function(a){a.$()});this.queue.length=0;Ih.e.n.call(this)};function Jh(){Ih.call(this);this.Ka=0}u(Jh,Ih);
Jh.prototype.play=function(a){if(0==this.queue.length)return l;if(a||this.k==qe)this.Ka<this.queue.length&&this.queue[this.Ka].k!=qe&&this.queue[this.Ka].stop(l),this.Ka=0,this.Pb();else if(1==this.k)return l;this.ra("play");-1==this.k&&this.ra("resume");this.startTime=s();this.Kd=k;this.k=1;this.queue[this.Ka].play(a);return j};
Jh.prototype.stop=function(a){this.k=qe;this.Kd=s();if(a)for(a=this.Ka;a<this.queue.length;++a){var b=this.queue[a];b.k==qe&&b.play();b.k==qe||b.stop(j)}else this.Ka<this.queue.length&&this.queue[this.Ka].stop(l);this.ra("stop");this.Qb()};Jh.prototype.Yk=function(){1==this.k&&(this.Ka++,this.Ka<this.queue.length?this.queue[this.Ka].play():(this.Kd=s(),this.k=qe,this.ra("finish"),this.Qb()))};function Kh(a){return a*a*a}function Kg(a){return 1-Math.pow(1-a,3)};function Lh(){S.call(this)}u(Lh,S);n=Lh.prototype;
n.w=function(){Lh.e.w.call(this);(this.s=(this.W=U.a().m)&&this.W.h())&&s();this.mc=E("fullscreen",this.b());var a=E("expand",this.b());O(this.mc,this.vj());this.ie=D("stagecover");this.Ki=E("message",this.ie);this.O=E("spinner",this.ie);this.ee=E("restart",this.ie);this.jh=E("vote",this.b());this.cd=E("like",this.b());this.Rc=E("dislike",this.b());Mh(this);this.s?DESKTOP&&Nh(this,this.s):W.a().c("no-media");P(P(P(P(P(P(P(P(P(P(P(this.l(),window,"resize",r(this.resize,this)),document,"webkitfullscreenchange",
r(function(){Hb(this.mc,"full")},this)),document,"mozfullscreenchange",r(function(){Hb(this.mc,"full")},this)),document,"fullscreenchange",r(function(){Hb(this.mc,"full")},this)),this.mc,"click",r(function(a){if(B(this.mc,"full"))document.Pj&&document.Pj(),document.webkitCancelFullScreen&&document.webkitCancelFullScreen(),document.mozCancelFullScreen&&document.mozCancelFullScreen();else{var c=E("main");c.fj&&c.fj();c.webkitRequestFullScreen&&c.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT);
c.mozRequestFullScreen&&c.mozRequestFullScreen()}a.stopPropagation();a.preventDefault()},this)),this.ee,"click",r(function(a){a.preventDefault();a.stopPropagation();this.s&&Nh(this,this.s)},this)),a,"click",r(this.dm,this)),this.cd,"click",r(this.Ui,this,this.cd,j)),this.Rc,"click",r(this.Ui,this,this.Rc,l)),this.b(),"mousemove",r(function(a){var c=a.offsetX/this.Aa,a=a.offsetY/this.Ia;if(0.7<c&&1>c&&0.7<a&&1>a&&(this.be==YT.PlayerState.PLAYING||this.be==YT.PlayerState.PAUSED))y(this.ie,"click-through"),
L(r(function(){z(this.ie,"click-through")},this),500)},this)),this.b(),"click",r(function(a){if(!(a.offsetX>Q(this.b()).width/2&&a.offsetY>Q(this.b()).height/2)&&this.v&&this.v.getPlayerState&&DESKTOP)switch(this.v.getPlayerState()){case YT.PlayerState.PLAYING:N.a().c(id,l);break;case YT.PlayerState.PAUSED:N.a().c(id,j)}},this));U.a().subscribe(Df,this.cc,this);U.a().subscribe(Ff,function(a){this.s=a;Nh(this,a);Mh(this)},this);W.a().subscribe(Hf,this.vg,this);W.a().subscribe(Dh,this.Kl,this);W.a().subscribe(Ch,
function(){Mh(this,j)},this);DESKTOP&&(N.a().subscribe(gd,function(a){this.resize(a)},this),N.a().subscribe(hd,function(){L(r(this.resize,this))},this),N.a().subscribe(id,function(a){a?this.v.playVideo():this.v.pauseVideo();var a=E(a?"play":"pause",this.b()),c=new Jh;c.add(new Fe(a,250,Kg));c.add(new Ee(a,250,Kh));c.play()},this),N.a().subscribe("mute",function(a){this.v&&(a?this.v.mute():this.v.unMute())},this),N.a().subscribe("restart",function(){this.v.seekTo(0)},this));this.resize()};
n.vj=function(){var a=E("main");return!(!a.fj&&!a.webkitRequestFullScreen&&!a.mozRequestFullScreen)};n.dm=function(a){a.preventDefault();a.stopPropagation();Z.a();a=!B(D("sidebar"),"toggled");DESKTOP&&(N.a().c(gd,a),N.a().c(hd,a))};
function Nh(a,b){W.a().s=b;a.Mk!=b.id&&(Pf.a().c("flash","Now playing",b.media.name,i,b.media.Ug,"#info:"+b.media.id),a.Mk=b.id);a.play(b.media);Y("/_like/"+b.media.id,r(function(a){a=kg(a.target);C(this.cd,"checked",a.liked||B(this.cd,"checked"));C(this.Rc,"checked",a.disliked||B(this.Rc,"checked"))},a))}
n.play=function(a,b){!this.v||!this.v.loadVideoById?(this.v=new YT.Player("ytplayer",{height:F().height-40,width:F().width,videoId:a.Zc,playerVars:{controls:0,showinfo:0,iv_load_policy:3,modestbranding:1,wmode:"opaque",origin:HOST_URL,enablejsapi:1},events:{onStateChange:r(this.wl,this),onReady:r(this.il,this),onError:r(this.hl,this)}}),W.a().Mg(this.v)):(this.v.cueVideoById(a.Zc),L(r(function(){var c=b||0;!this.v.getPlayerState()&&4>c?this.play(a,++c):4<=c&&Mh(this,i,j)},this),1E3))};
n.resize=function(){var a=D("stagecover"),b=E("message",a),c=D("guide").style.height,c=c.substring(0,c.length-2),c=N.a().oc?c:40,d=N.a().zc?320:0;this.Ia=F().height-c;this.Aa=F().width-d;Vd(this.b(),F().height-c);Wd(this.b(),F().width-d);Vd(a,F().height-c);Wd(a,F().width-d);a=Q(b);Hd(b,{"margin-left":-a.width/2+"px","margin-top":-a.height/2+"px"});C(this.mc,"full",this.vj&&(document.fullScreen||document.webkitIsFullScreen||document.en))};n.cc=function(a){if(a=a.h())this.s=a,Nh(this,a);Mh(this)};
n.Ui=function(a,b,c){c.preventDefault();c.stopPropagation();this.s&&(a=Hb(a,"checked"),(c=b&&B(this.Rc,"checked")||!b&&B(this.cd,"checked"))&&z(b?this.Rc:this.cd,"checked"),Y(b?"/_like":"/_dislike",i,"POST","media_id="+this.s.media.id+(!a?"&delete=1":"")+(c?"&flip=1":"")))};n.vg=function(a){this.s=a;Nh(this,a);Mh(this);Y("/_optin",se(),"POST","media_id="+this.s.media.id)};n.Kl=function(a){this.v.seekTo&&this.v.seekTo(a,j)};
n.wl=function(a){this.be=a.data;Mh(this);switch(a.data){case YT.PlayerState.CUED:a=this.s.async?this.s.seek:(s()-this.s.time.getTime())/1E3;this.v.seekTo(a);this.v.playVideo();N.a().c(id,j);break;case YT.PlayerState.PLAYING:W.a().c(Fh,this.s.media);break;case YT.PlayerState.ENDED:X.a().o.De.ff(this.s.media),(a=U.a().m.h())?U.a().c(Ff,a):(W.a().s=k,U.a().c(Df,Kf(U.a()),j))}};
n.il=function(){L(r(function(){if(this.v&&(!this.v.getPlayerState||!this.v.getPlayerState()))Nh(this,this.s);else if(this.v.getPlayerState()){var a=this.s.async?this.s.seek:(s()-this.s.time.getTime())/1E3;this.v.seekTo(a);this.v.playVideo();DESKTOP&&N.a().c("mute",this.v.isMuted())}},this),1E3)};n.hl=function(){W.a().c("no-media");Mh(this,i,j)};
function Mh(a,b,c){var d=D("stagecover"),f=a.s?W.a().getCurrentTime():0;c?(O(a.O,l),O(a.ee,j),y(d,"covered")):(!a.s||a.s&&f>a.s.media.duration?(W.a().c("no-media"),ic(a.Ki.firstChild,Oh),O(a.O,l),O(a.ee,l),O(a.jh,l),y(d,"covered")):a.be!=YT.PlayerState.PLAYING&&a.be!=YT.PlayerState.PAUSED||b?(ic(a.Ki.firstChild,Ph),O(a.O,j),O(a.ee,l),O(a.jh,l),y(d,"covered")):(O(a.O,l),O(a.ee,l),z(d,"covered"),O(a.jh,j)),Zd(d,a.be==YT.PlayerState.BUFFERING?0.9:1),a.resize())}
var Oh="THIS CHANNEL IS CURRENTLY OFFLINE",Ph="LOADING STORY";function yg(a,b){S.call(this,b);this.Oa=a||""}u(yg,S);yg.prototype.eb=k;var Gg="placeholder"in document.createElement("input");n=yg.prototype;n.Nd=l;n.L=function(){this.d=this.Na().L("input",{type:"text"})};n.H=function(a){yg.e.H.call(this,a);this.Oa||(this.Oa=a.getAttribute("label")||"");var b;a:{var c=Vb(a);try{b=c&&c.activeElement;break a}catch(d){}b=k}b==a&&(this.Nd=j,z(this.b(),this.zd));Gg?this.b().placeholder=this.Oa:this.b().setAttribute("aria-label",this.Oa)};
n.w=function(){yg.e.w.call(this);var a=new Ad(this);P(a,this.b(),"focus",this.Rf);P(a,this.b(),"blur",this.pk);Gg?this.u=a:(lb&&P(a,this.b(),["keypress","keydown","keyup"],this.vk),P(a,Vb(this.b())?Vb(this.b()).parentWindow||Vb(this.b()).defaultView:window,"load",this.Dk),this.u=a,Qh(this));Rh(this);this.b().Kk=this};n.kc=function(){yg.e.kc.call(this);this.u&&(this.u.$(),this.u=k);this.b().Kk=k};function Qh(a){!a.hk&&(a.u&&a.b().form)&&(P(a.u,a.b().form,"submit",a.yk),a.hk=j)}
n.n=function(){yg.e.n.call(this);this.u&&(this.u.$(),this.u=k)};n.zd="label-input-label";n.Rf=function(){this.Nd=j;z(this.b(),this.zd);if(!Gg&&!Fg(this)&&!this.Xf){var a=this,b=function(){a.b().value=""};x?L(b,10):b()}};n.pk=function(){Gg||(Dd(this.u,this.b(),"click",this.Rf),this.eb=k);this.Nd=l;Rh(this)};n.vk=function(a){27==a.keyCode&&("keydown"==a.type?this.eb=this.b().value:"keypress"==a.type?this.b().value=this.eb:"keyup"==a.type&&(this.eb=k),a.preventDefault())};
n.yk=function(){Fg(this)||(this.b().value="",L(this.ok,10,this))};n.ok=function(){Fg(this)||(this.b().value=this.Oa)};n.Dk=function(){Rh(this)};function Fg(a){return!!a.b()&&""!=a.b().value&&a.b().value!=a.Oa}n.clear=function(){this.b().value="";this.eb!=k&&(this.eb="")};n.reset=function(){Fg(this)&&(this.clear(),Rh(this))};n.Ga=function(a){this.eb!=k&&(this.eb=a);this.b().value=a;Rh(this)};n.I=function(){return this.eb!=k?this.eb:Fg(this)?this.b().value:""};
function Rh(a){Gg?a.b().placeholder!=a.Oa&&(a.b().placeholder=a.Oa):(Qh(a),a.b().setAttribute("aria-label",a.Oa));Fg(a)?z(a.b(),a.zd):(!a.Xf&&!a.Nd&&y(a.b(),a.zd),Gg||L(a.Hl,10,a))}n.ib=function(a){this.b().disabled=!a;C(this.b(),this.zd+"-disabled",!a)};n.isEnabled=function(){return!this.b().disabled};n.gk=function(){this.Xf=l};n.Hl=function(){this.b()&&(!Fg(this)&&!this.Nd)&&(this.b().value=this.Oa)};function Sh(a,b,c,d,f,g,h,m,q){var t,v;if(t=c.offsetParent){var A="HTML"==t.tagName||"BODY"==t.tagName;if(!A||"static"!=Ld(t,"position"))v=Sd(t),A||(A=(A=Td(t))&&lb?-t.scrollLeft:A&&(!x||!yb("8"))?t.scrollWidth-t.clientWidth-t.scrollLeft:t.scrollLeft,v=Jb(v,new Ib(A,t.scrollTop)))}t=v||new Ib;v=Yd(a);if(A=Rd(a)){var T=new Gd(A.left,A.top,A.right-A.left,A.bottom-A.top),A=Math.max(v.left,T.left),V=Math.min(v.left+v.width,T.left+T.width);if(A<=V){var qa=Math.max(v.top,T.top),T=Math.min(v.top+v.height,
T.top+T.height);qa<=T&&(v.left=A,v.top=qa,v.width=V-A,v.height=T-qa)}}A=Tb(a);qa=Tb(c);if(A.D!=qa.D){var V=A.D.body,qa=qa.D.parentWindow||qa.D.defaultView,T=new Ib(0,0),Za=Vb(V)?Vb(V).parentWindow||Vb(V).defaultView:window,Gf=V;do{var ha;if(Za==qa)ha=Sd(Gf);else{ha=Gf;var wb=new Ib;if(1==ha.nodeType){if(ha.getBoundingClientRect){var oa=Pd(ha);wb.x=oa.left;wb.y=oa.top}else{var oa=rc(Tb(ha)),Ra=Sd(ha);wb.x=Ra.x-oa.x;wb.y=Ra.y-oa.y}lb&&!yb(12)&&(oa=i,oa=i,x?oa="-ms-transform":mb?oa="-webkit-transform":
kb?oa="-o-transform":lb&&(oa="-moz-transform"),Ra=i,oa&&(Ra=Ld(ha,oa)),Ra||(Ra=Ld(ha,"transform")),Ra?(ha=Ra.match(fe),oa=!ha?new Ib(0,0):new Ib(parseFloat(ha[1]),parseFloat(ha[2]))):oa=new Ib(0,0),wb=new Ib(wb.x+oa.x,wb.y+oa.y))}else oa=sa(ha.ik),Ra=ha,ha.targetTouches?Ra=ha.targetTouches[0]:oa&&ha.ia.targetTouches&&(Ra=ha.ia.targetTouches[0]),wb.x=Ra.clientX,wb.y=Ra.clientY;ha=wb}T.x+=ha.x;T.y+=ha.y}while(Za&&Za!=qa&&(Gf=Za.frameElement)&&(Za=Za.parent));V=Jb(T,Sd(V));x&&!qc(A)&&(V=Jb(V,rc(A)));
v.left+=V.x;v.top+=V.y}a=(b&4&&Td(a)?b^2:b)&-5;b=new Ib(a&2?v.left+v.width:v.left,a&1?v.top+v.height:v.top);b=Jb(b,t);f&&(b.x+=(a&2?-1:1)*f.x,b.y+=(a&1?-1:1)*f.y);var R;if(h)if(q)R=q;else if(R=Rd(c))R.top-=t.y,R.right-=t.x,R.bottom-=t.y,R.left-=t.x;a:{q=b.clone();f=0;a=(d&4&&Td(c)?d^2:d)&-5;d=Q(c);m=m?m.clone():d.clone();if(g||0!=a)a&2?q.x-=m.width+(g?g.right:0):g&&(q.x+=g.left),a&1?q.y-=m.height+(g?g.bottom:0):g&&(q.y+=g.top);if(h){if(R){g=q;f=0;if(65==(h&65)&&(g.x<R.left||g.x>=R.right))h&=-2;if(132==
(h&132)&&(g.y<R.top||g.y>=R.bottom))h&=-5;g.x<R.left&&h&1&&(g.x=R.left,f|=1);g.x<R.left&&(g.x+m.width>R.right&&h&16)&&(m.width=Math.max(m.width-(g.x+m.width-R.right),0),f|=4);g.x+m.width>R.right&&h&1&&(g.x=Math.max(R.right-m.width,R.left),f|=1);h&2&&(f|=(g.x<R.left?16:0)|(g.x+m.width>R.right?32:0));g.y<R.top&&h&4&&(g.y=R.top,f|=2);g.y>=R.top&&(g.y+m.height>R.bottom&&h&32)&&(m.height=Math.max(m.height-(g.y+m.height-R.bottom),0),f|=8);g.y+m.height>R.bottom&&h&4&&(g.y=Math.max(R.bottom-m.height,R.top),
f|=2);h&8&&(f|=(g.y<R.top?64:0)|(g.y+m.height>R.bottom?128:0));h=f}else h=256;f=h;if(f&496){c=f;break a}}Md(c,q);if(!(d==m||(!d||!m?0:d.width==m.width&&d.height==m.height)))g=qc(Tb(Vb(c))),x&&(!g||!yb("8"))?(h=c.style,g?(g=be(c,"padding"),c=ee(c),h.pixelWidth=m.width-c.left-g.left-g.right-c.right,h.pixelHeight=m.height-c.top-g.top-g.bottom-c.bottom):(h.pixelWidth=m.width,h.pixelHeight=m.height)):(c=c.style,lb?c.MozBoxSizing="border-box":mb?c.WebkitBoxSizing="border-box":c.boxSizing="border-box",c.width=
Math.max(m.width,0)+"px",c.height=Math.max(m.height,0)+"px");c=f}return c};function Th(){}Th.prototype.hb=aa();function Uh(a,b,c){this.element=a;this.Hf=b;this.ul=c}u(Uh,Th);Uh.prototype.hb=function(a,b,c){Sh(this.element,this.Hf,a,b,i,c,this.ul)};function Vh(a,b,c,d){Uh.call(this,a,b);this.Nk=c?5:0;this.rg=d||i}u(Vh,Uh);Vh.prototype.hb=function(a,b,c,d){var f=Sh(this.element,this.Hf,a,b,k,c,10,d,this.rg);if(f&496){var g=Wh(f,this.Hf),b=Wh(f,b),f=Sh(this.element,g,a,b,k,c,10,d,this.rg);f&496&&(g=Wh(f,g),b=Wh(f,b),Sh(this.element,g,a,b,k,c,this.Nk,d,this.rg))}};function Wh(a,b){a&48&&(b^=2);a&192&&(b^=1);return b};function Xh(a,b){J.call(this);this.N=new Ad(this);this.ad&&e(Error("Can not change this state of the popup while showing."));this.d=a||k;b&&this.oj(b)}u(Xh,Zc);n=Xh.prototype;n.d=k;n.Oj=j;n.sh=k;n.ad=l;n.Ml=l;n.cg=-1;n.Ai=-1;n.Ek=l;n.ak=j;n.Xb="toggle_display";n.oj=ba("Xb");n.b=ca("d");n.fb=ca("ad");n.Sb=function(a){this.he&&this.he.stop();this.Od&&this.Od.stop();a?this.jf():this.Yc()};n.hb=ka;
n.jf=function(){if(!this.ad&&this.dispatchEvent("beforeshow")){this.d||e(Error("Caller must call setElement before trying to show the popup"));this.hb();var a=Vb(this.d);this.Ek&&P(this.N,a,"keydown",this.al,j);if(this.Oj)if(P(this.N,a,"mousedown",this.Ti,j),x){var b;try{b=a.activeElement}catch(c){}for(;b&&"IFRAME"==b.nodeName;){try{var d=b.contentDocument||b.contentWindow.document}catch(f){break}a=d;b=a.activeElement}P(this.N,a,"mousedown",this.Ti,j);P(this.N,a,"deactivate",this.Si)}else P(this.N,
a,"blur",this.Si);"toggle_display"==this.Xb?(this.d.style.visibility="visible",O(this.d,j)):"move_offscreen"==this.Xb&&this.hb();this.ad=j;this.he?(Sc(this.he,"end",this.Yi,l,this),this.he.play()):this.Yi()}};n.Yc=function(a){if(!this.ad||!this.dispatchEvent({type:"beforehide",target:a}))return l;this.N&&Ed(this.N);this.ad=l;this.Ai=s();this.Od?(Sc(this.Od,"end",za(this.Ch,a),l,this),this.Od.play()):this.Ch(a);return j};
n.Ch=function(a){"toggle_display"==this.Xb?this.Ml?L(this.ki,0,this):this.ki():"move_offscreen"==this.Xb&&(this.d.style.top="-10000px");this.dispatchEvent({type:"hide",target:a})};n.ki=function(){this.d.style.visibility="hidden";O(this.d,l)};n.Yi=function(){this.cg=s();this.Ai=-1;this.dispatchEvent("show")};n.Ti=function(a){a=a.target;!hc(this.d,a)&&((!this.sh||hc(this.sh,a))&&!(150>s()-this.cg))&&this.Yc(a)};n.al=function(a){27==a.keyCode&&this.Yc(a.target)&&(a.preventDefault(),a.stopPropagation())};
n.Si=function(a){if(this.ak){var b=Vb(this.d);if(x||kb){if(a=b.activeElement,!a||hc(this.d,a)||"BODY"==a.tagName)return}else if(a.target!=b)return;150>s()-this.cg||this.Yc()}};n.n=function(){Xh.e.n.call(this);this.N.$();Bc(this.he);Bc(this.Od);delete this.d;delete this.N};function Yh(a,b){this.aj=4;this.xg=b||i;Xh.call(this,a)}u(Yh,Xh);Yh.prototype.hb=function(){if(this.xg){var a=!this.fb()&&"move_offscreen"!=this.Xb,b=this.b();a&&(b.style.visibility="hidden",O(b,j));this.xg.hb(b,this.aj,this.Qk);a&&O(b,l)}};function Zh(a,b,c){J.call(this);this.Lb=a;this.P=b;this.N=c;this.zf=r(this.rl,this)}u(Zh,J);var Ag=Zh;n=Zh.prototype;n.hf=l;n.$i=0;n.qa=k;n.Ie=function(){!this.qa&&!this.$i?this.Id():this.hf=j};n.stop=function(){this.qa&&(ad.clearTimeout(this.qa),this.qa=k,this.hf=l)};n.n=function(){Zh.e.n.call(this);this.stop()};n.rl=function(){this.qa=k;this.hf&&!this.$i&&(this.hf=l,this.Id())};n.Id=function(){this.qa=L(this.zf,this.P);this.Lb.call(this.N)};function $h(a,b){J.call(this);this.Lb=a;this.N=b;this.bb=new re(r(this.ql,this),0,this)}u($h,J);n=$h.prototype;n.P=0;n.Gg=0;n.ri=l;n.n=function(){this.bb.$();delete this.Lb;delete this.N;$h.e.n.call(this)};n.start=function(a,b){this.stop();this.ri=l;var c=b||0;this.P=Math.max(a||0,0);this.Gg=0>c?-1:s()+c;this.bb.start(0>c?this.P:Math.min(this.P,c))};n.stop=function(){this.bb.stop()};n.Ib=function(){return this.bb.Ib()};
n.ql=function(){if(this.Lb.call(this.N))this.ri=j;else if(0>this.Gg)this.bb.start(this.P);else{var a=this.Gg-s();0>=a||this.bb.start(Math.min(this.P,a))}};function zg(a){J.call(this);this.d=a;this.Xd=this.d.value;this.u=new Ad(this);this.gb=s();mb||x||lb&&yb("1.9")?P(this.u,a,"paste",this.Sc):P(this.u,a,["keydown","blur","focus","mouseover","input"],this.wk);this.bb=new $h(r(this.yh,this))}u(zg,Zc);var Bg="after_paste";n=zg.prototype;n.k="init";n.F=hh("goog.events.PasteHandler");n.n=function(){zg.e.n.call(this);this.u.$();this.u=k;this.bb.$();this.bb=k};
n.yh=function(){if(this.Xd==this.d.value)return l;this.F.info("detected textchange after paste");this.dispatchEvent(Bg);return j};n.Sc=function(a){a=new Ic(a.ia);a.type="paste";this.dispatchEvent(a);L(function(){this.yh()||this.bb.start(50,200)},0,this)};
n.wk=function(a){switch(this.k){case "init":switch(a.type){case "blur":this.k="init";break;case "focus":this.k="focused";break;case "mouseover":this.k="init";this.d.value!=this.Xd&&(this.F.info("paste by dragdrop while on init!"),this.Sc(a));break;default:dh(this.F,"unexpected event "+a.type+"during init")}break;case "focused":switch(a.type){case "input":var b=this.gb+400;if(s()>b||"focus"==this.Bl)this.F.info("paste by textchange while focused!"),this.Sc(a);break;case "blur":this.k="init";break;
case "keydown":this.F.info("key down ... looking for ctrl+v");if(fb&&kb&&0==a.keyCode||fb&&kb&&17==a.keyCode)break;this.k="typing";break;case "mouseover":this.d.value!=this.Xd&&(this.F.info("paste by dragdrop while focused!"),this.Sc(a));break;default:dh(this.F,"unexpected event "+a.type+" during focused")}break;case "typing":switch(a.type){case "input":this.k="focused";break;case "blur":this.k="init";break;case "keydown":if(a.ctrlKey&&86==a.keyCode||a.shiftKey&&45==a.keyCode||a.metaKey&&86==a.keyCode)this.F.info("paste by ctrl+v while keypressed!"),
this.Sc(a);break;case "mouseover":this.d.value!=this.Xd&&(this.F.info("paste by dragdrop while keypressed!"),this.Sc(a));break;default:dh(this.F,"unexpected event "+a.type+" during keypressed")}break;default:dh(this.F,"invalid "+this.k+" state")}this.gb=s();this.Xd=this.d.value;this.F.info(a.type+" -> "+this.k);this.Bl=a.type};function ai(){return'<div class="popup" id="popup" style="visibility: hidden; display: none;"><div class="content"></div><div id="tailarrow"></div></div>'}function bi(){return'<div class="select-program"><div class="select-header">Suggest a Program</div><div class="select-content"><div class="page"><input type="text" class="program-input" placeholder="paste a youtube link"/><div class="page2"></div></div></div></div>'}
function ci(a){return'<div class="confirm-media"><img src="'+I(a.Sg)+'" /><div class="title">'+I(a.title)+'</div><div class="dark button">Yes</div></div>'};function di(){var a=D("popup");a||(a=H(ai),document.body.appendChild(a));Yh.call(this,a);K(window,"resize",r(this.Sb,this,l));K(this,"hide",this.dl);this.q=mg.a();this.q.subscribe("select-program",this.Ol,this);this.q.subscribe("hide",this.Yc,this)}u(di,Yh);la(di);n=di.prototype;n.dl=function(){this.Yc();this.q.c("on-hide")};n.tb=function(){return E("content",this.b())};
n.Ol=function(a,b){this.Sb(l);this.aj=0;this.fb()&&this.hb();var c=-1*(Q(this.b()).height-Q(a).height)/2;this.Qk=c==k||c instanceof Fd?c:new Fd(c,0,0,5);this.fb()&&this.hb();this.xg=new Vh(a,6)||i;this.fb()&&this.hb();y(this.b(),"left");uc(this.tb(),bi);this.wa=new yg("paste a YouTube link");this.wa.g(E("program-input",this.b()));var c=new Ze(this.wa.b()),d=new zg(this.wa.b()),f=new Ag(r(this.ng,this,b),1E3);this.Sb(j);P(P(P(this.N,d,Bg,r(this.ng,this,b)),c,"key",r(function(){f&&f.Ie()},this)),this.wa.b(),
"focus",r(this.ng,this,b))};n.ng=function(a){var b=E("select-content",this.b());try{var c=Hg(this.wa.I());Y(Ba("https://gdata.youtube.com/feeds/api/videos/%s?v=2&alt=json",c.ih),r(function(d){var g=Ig(Jg(d.target)).entry,d=g.title.$t,h=g.media$group.media$thumbnail[0].url,g=E("page2",this.b());uc(g,ci,{title:d,Sg:h});d=new wf("Yes");d.g(E("button",g));(new Ce(b,[0,0],[260,0],300,Kg)).play();P(this.N,d,"action",r(this.kg,this,a,c))},this))}catch(d){}};
n.kg=function(a,b){Y("/_addprogram",r(function(b){b=Ig(Jg(b.target));b=new Yf(b);a.c(gg,b);this.Sb(l)},this),"POST","channel="+a.id+"&youtube_id="+b.ih)};function Z(){M.call(this)}u(Z,M);la(Z);var Dg="media-info",Eg="profile";function ei(a){return'<div class="info"><div class="picture"><img src="'+I(a.media.Wa)+'" class="thumb"><div class="publisher"><img src="'+I(a.media.va.S)+'"><div class="name">'+I(a.media.va.name)+'</div></div><div class="links"><div class="local"></div><a target="_blank" href="'+a.media.Fk+'"><div class="host"></div></a></div><div class="link-select" style="display:none"><input onClick="this.select();" class="link-input" type="text" value="'+a.media.link+'" readonly="readonly"/></div><div class="title"><div class="text">'+
I(a.media.name)+'</div></div><div class="scrollable ios-scroll" '+(!a.description?'style="display:none"':"")+'><div class="desc-link"><a href="#">DESCRIPTION</a><div class="published">'+I(a.uc)+'</div></div><div class="description">'+a.description+'</div></div><div class="button play"><div class="icon"></div></div><div class="options"><div class="button star"><div class="icon"></div></div><div class="button facebook"><div class="icon"></div></div><div class="button twitter"><div class="icon"></div></div><div class="button plus"><div class="icon"></div></div></div></div><div class="info-contents"><div class="scrollable ios-scroll"><div class="tweet-holder" style="display:none"><div class="label"><div class="globe-icon"></div><a class="tweets-link">LATEST TWEETS</a></div><div class="tweets"></div><div class="dot-nav"></div></div><div class="viewers" style="display: none"><div class="label"><div class="friends-icon"></div><div class="status">SEEN</div></div></div><div class="comments-holder ios-scroll" style="display:none"><div class="label"><div class="friends-icon"></div><a class="conv-link">CONVERSATION</a>'+
(a.Lk?'<a class="prev-link">&#10218; LAST PROGRAM</a>':"")+'</div><div class="no-comments" style="display:none">Start the conversation with friends.</div><div class="comments"></div><div class="top-grad"></div><div class="bottom-grad"></div></div></div></div><div class="loading loading-activity"><div class="loading-spinner"></div></div><div class="overlay" style="display: none"><div class="leaving"><div>This program is over. Carry on?</div><div class="button dark no">Not yet</div><div class="button dark yes">Let\'s go</div></div></div></div>'}
function fi(a){return'<div class="viewer" name="'+I(a.Fb)+'"><img src="'+I(a.i.S)+'"></div>'}
function gi(a){return'<div class="tweet" id="'+I(a.prefix)+"-"+I(a.yb.id)+'">'+(a.yb.i?'<a href="#user:'+I(a.yb.i.id)+'"><img src="'+I(a.yb.S)+'"/></a>':'<img src="'+I(a.yb.S)+'"/>')+'<div class="text"><a class="handle" target="_blank" href="http://www.twitter.com/'+I(a.yb.handle)+"/status/"+I(a.yb.id)+'">'+I(a.yb.handle)+"</a> "+a.text+'</div><div class="timestamp">'+I(a.timestamp)+'</div><div class="tweet-options"><div class="reply"></div></div></div>'}
function hi(a){return'<div class="comment'+(a.qb.ba?" reply":"")+'" id="'+I(a.prefix)+"-"+I(a.qb.id)+'"><a href="#user:'+I(a.qb.i.id)+'"><img src="'+I(a.qb.i.S)+'"/></a><div class="text"><a class="username" href="#user:'+I(a.qb.i.id)+'">'+I(a.qb.i.name)+"</a> "+a.text+'</div><div class="timestamp">'+I(a.timestamp)+'</div><div class="comment-options">'+(a.Zi?'<div class="remove"></div> ':"")+'<div class="reply"></div></div></div>'}
function ii(){return'<div class="comment-input"><div class="comment-controls"><div class="comment-button tweet-toggle"><div class="icon"></div>tweet<div class="check"></div></div><div class="comment-button fb-toggle"><div class="icon"></div>post<div class="check"></div></div><div class="comment-button add-comment"><div class="return">&#8618;</div>add</div></div><div class="input-holder"><textarea class="comment-textarea" rows="1" placeholder="Add to the conversation..."></textarea></div></div>'}
function ji(a){var b='<div class="activity'+(1<a.ka.length?" digest":"")+'">';if(1<a.ka.length){for(var b=b+('<div class="text"><span>'+I(a.ka.length)+" friends </span>"+(a.Aj?"watched":"are watching")+(a.T?' <a href="#channel:'+I(a.T.id)+'">'+I(a.T.name)+"</a>":"")+'<div class="timestamp">'+I(a.time)+'</div></div><div class="users">'),c=a.ka,d=c.length,f=0;f<d;f++)var g=c[f],b=b+('<a href="#user:'+I(g.id)+'"><div class="picture" style="background:'+I(g.color)+'"><img src="'+I(g.S)+'"/></div></a>');
b+="</div>"}return b+=(1==a.ka.length?'<a href="#user:'+I(a.ka[0].id)+'"><div class="picture" style="background:'+I(a.ka[0].color)+'"><img src="'+I(a.ka[0].S)+'"/></div></a><div class="text"><a class="user" href="#user:'+I(a.ka[0].id)+'">'+I(a.ka[0].name)+"</a> "+(a.Aj?"watched":"is watching")+(a.T?' <a href="#channel:'+I(a.T.id)+'">'+I(a.T.name)+"</a>":"")+'<div class="timestamp">'+I(a.time)+"</div></div>":"")+'<div class="medias"></div></div>'}
function ki(a){for(var b='<div class="comment activity'+(1<a.Db.length?" digest":"")+'">'+(1<a.Db.length?'<div class="text">'+(1==a.ka.length?'<a class="user" href="#user:'+I(a.ka[0].id)+'">'+I(a.ka[0].name)+' </a> discussed <a class="title" href="#info:'+I(a.media.id)+'">'+I(a.media.name)+"</a>.":"<span>"+I(a.ka.length)+' friends </span> discussed <a class="title" href="#info:'+I(a.media.id)+'"> '+I(a.media.name)+"</a>.")+"</div>":""),a=a.Db,c=a.length,d=0;d<c;d++)var f=a[d],b=b+('<div class="comment"><a href="#user:'+
I(f.i.id)+'"><div class="picture" style="background:'+I(f.i.color)+'"><img src="'+I(f.i.S)+'"/></div></a><div class="text"><a class="user" href="#user:'+I(f.i.id)+'">'+I(f.i.name)+'</a>  "'+I(f.text)+'"<div class="timestamp">'+I(f.Dl)+"</div></div></div>");return b+'<div class="medias"></div></div>'}
function li(a){return'<div class="list-info"><div class="picture-cell" '+(a.Wa?'style="display:table-cell"':"")+">"+(a.link?'<a href="'+I(a.link)+'" target="_blank">':"")+'<div class="picture"><img class="thumb" src="'+I(a.Wa)+'"></div>'+(a.link?"</a>":"")+'</div><div class="description" style="display:table-cell">'+a.description+"</div></div>"}function mi(a){return'<li class="'+I(a.className)+' tab"><div class="label">'+I(a.name)+"</div></li>"}
function ni(a){return'<div class="admin"><div class="scrollable ios-scroll"><div class="search"><input type="text" class="input" '+(a.pi?'placeholder="'+I(a.pi)+'"':"")+'/></div><div class="results"></div><div class="section" style="display:none"><div class="label">CHANNELS</div><div class="admin-channels"></div></div><div class="section" style="display:none"><div class="label">CURRENT TOPICS</div><div class="topics"></div></div><div class="section" style="display:none"><div class="label">COLLECTIONS</div><div class="collections"></div></div><div class="scroll-area"></div>'}
function oi(){return'<div class="admin-list admin"><div class="search"><input class="input" type="text" placeholder="Paste video or playlist link" /></div><div class="tabbed pending"><ul class="tabs"><li class="tab pending"><div class="label">PENDING</div></li><li class="tab all"><div class="label">ALL</div></li><li class="tab playlists"><div class="label">PLAYLISTS</div></li><li class="tab publishers"><div class="label">PUBLISHERS</div></li><li class="tab categories"><div class="label">CATEGORIES</div></li></ul><div class="pending-content content pending"></div><div class="all-content content all"></div><div class="playlists-content content playlists"></div><div class="publishers-content content publishers"></div><div class="categories-content content categories"><div class="label">GUIDE CATEGORIES</div><div class="categories-list"></div><div class="label">FEED IDS</div><div class="feed-ids"></div><div class="label">FEED CATEGORIES</div><div class="feed-cats"></div></div><div class="spinner" style="display:none"></div></div>'}
function pi(a){return'<div class="playlist"><div class="title">'+I(a.name)+'</div><div class="controls"><div class="remove dark button">x</div></div></div>'}function qi(a){return'<div class="category button">'+I(a.name)+"</div>"}function ri(a){return'<div class="publisher">'+(a.S?'<img src="'+I(a.S)+'"/>':"")+'<div class="title">'+I(a.name)+'</div><div class="controls"><div class="remove dark button">x</div></div></div>'}
function si(a){return'<div class="channel '+(a.T.Yd?"on":"off")+'"><div class="title">'+I(a.T.name)+'</div><div class="controls"><div class="fetch dark button">FETCH</div><div class="program dark button">PROG.</div><div class="remove dark button">x</div><div class="on dark button">ON</div><div class="off dark button">OFF</div></div>'+(a.T.kd?'<div class="pending">'+I(a.T.kd)+"</div>":"")+"</div>"}
function ti(a){return'<div class="collection"><div class="title">'+I(a.Cf.name)+'</div><div class="controls">'+(a.Cf.kd?'<div class="pending">'+I(a.Cf.kd)+"</div>":"")+'<div class="fetch dark button">FETCH</div><div class="button dark remove">x</div></div></div>'}function ui(a){return'<div class="topic"><div class="title">'+I(a.em)+'</div><div class="controls">'+(a.kd?'<div class="pending">'+I(a.kd)+"</div>":"")+"</div></div>"}
function vi(){return'<div class="tabbed activity"><ul class="tabs"><li class="tab activity"><div class="label">ACTIVITY</div></li><li class="tab starred"><div class="label"><div class="heart"></div>\'d</div></li></ul><div class="activity-content content activity"><div class="loading loading-activity"><div class="loading-spinner"></div></div></div><div class="starred-content content starred"><div class="loading loading-starred"><div class="loading-spinner"></div></div></div><div class="spinner" style="display:none"></div></div>'}
function wi(){return'<div class="tabbed"><ul class="tabs"><li class="tab comments"><div class="label">CONVERSATION</div></li><li class="tab tweets"><div class="label">TWEETS</div></li></ul><div class="comments-content content comments-holder"><div class="loading loading-activity"><div class="loading-spinner"></div></div></div><div class="tweets-content content tweet-holder"><div class="loading loading-starred"><div class="loading-spinner"></div></div></div></div>'}
function xi(a){return'<div class="list-media show"><div class="media"><div class="preview"><div class="thumb" style="background-image:url('+I(a.media.Wa)+"); background-position: 50% "+I(a.media.rd)+'%"></div><div class="list-play"><div class="icon"></div></div><div class="title">'+I(a.media.name)+'</div></div></div><div class="publisher"><img src="'+I(a.media.va.S)+'"><div class="name">'+I(a.media.va.name)+'</div></div><div class="stats"><div class="comment-count"><div class="icon"></div>'+I(a.media.Mc)+
'</div><div class="like-count"><div class="icon"></div>'+I(a.media.Ok)+"</div></div></div>"}
function yi(a){return'<div class="admin-media list-media"><div class="media"><div class="preview"><div class="thumb" style="background-image:url('+I(a.media.Wa)+"); background-position: 50% "+I(a.media.rd)+'%"></div><div class="title">'+I(a.media.name)+'</div><div class="published">'+I(a.uc)+'</div><div class="play"></div><div class="approve"></div><div class="remove"></div><div class="repos"></div></div></div><div class="publisher"><img src="'+I(a.media.va.S)+'"><div class="name">'+I(a.media.va.name)+
'</div><div class="duration">'+I(a.media.duration)+' seconds</div></div><div class="description">'+I(a.media.description)+"</div></div>"};function zi(){J.call(this);this.Qd=[];this.Yl=[];this.ge=[]}u(zi,Zc);n=zi.prototype;n.wi=l;n.xi=l;n.Zf=l;n.nj=ba("ef");n.init=function(){if(!this.Zf){for(var a,b=0;a=this.Qd[b];b++)Ai(this,a);this.Zf=j}};function Ai(a,b){a.wi&&(K(b.element,"mousedown",b.Mi,l,b),a.Og&&y(b.element,a.Og));a.xi&&a.Rg&&y(b.element,a.Rg)}
n.Bc=function(a,b){if(!this.ya)if(this.ya=b,this.dispatchEvent(new Bi("dragstart",this,this.ya))==l)this.ya=k;else{var c=b.Nc,d=this.Ae(c);this.Yj&&y(d,this.Yj);this.Uc=d;d=Vb(c);d.body.appendChild(this.Uc);var f=this.Uc,g=Sd(c),c=be(c,"margin");g.x-=2*(c.left||0);g.y-=2*(c.top||0);f.style.position="absolute";f.style.left=g.x+"px";f.style.top=g.y+"px";this.p=new ge(f);this.p.nj(this.ef);K(this.p,"drag",this.Ni,l,this);K(this.p,"end",this.jc,l,this);K(d.body,"selectstart",this.wj);this.qd=[];for(d=
0;c=this.Yl[d];d++)for(var h,f=0;h=c.Qd[f];f++)for(var g=c,m=[h.element],q=this.qd,t=0;t<m.length;t++){var v=m[t],A=Sd(v),T=Q(v),A=new Fd(A.y,A.x+T.width,A.y+T.height,A.x);q.push(new Ci(A,g,h,v));Di(this,A)}this.xb||(this.xb=new Fd(0,0,0,0));for(d=0;c=this.ge[d];d++)c.Ff=[],c.hj=c.d.scrollLeft,c.ij=c.d.scrollTop,f=Sd(c.d),g=Q(c.d),c.U=new Fd(f.y,f.x+g.width,f.y+g.height,f.x);for(d=0;g=this.qd[d];d++)for(f=0;c=this.ge[f];f++)hc(c.d,g.d)&&(c.Ff.push(g),g.fe=c);this.Zb=k;for(d=0;c=this.ge[d];d++)K(c.d,
"scroll",this.Bh,l,this);this.p.Bc(a);a.preventDefault()}};
n.jc=function(a){var b=a.Xj?k:this.Zb;if(b&&b.xa){var c=a.clientX,a=a.clientY,d=rc(Tb(this.Uc)),f=c+d.x,d=a+d.y,g;this.le&&(g=this.le(b.ub,b.U,f,d));this.dispatchEvent(new Bi("drag",this,this.ya,b.xa,b.ub,b.d,c,a,f,d));b.xa.dispatchEvent(new Bi("drop",this,this.ya,b.xa,b.ub,b.d,c,a,f,d,g))}this.dispatchEvent(new Bi("dragend",this,this.ya));Tc(this.p,"drag",this.Ni,l,this);Tc(this.p,"end",this.jc,l,this);Tc(Vb(this.ya.Nc).body,"selectstart",this.wj);for(b=0;c=this.ge[b];b++)Tc(c.d,"scroll",this.Bh,
l,this),c.Ff=[];this.p.$();cc(this.Uc);delete this.ya;delete this.Uc;delete this.p;delete this.qd;delete this.Zb};
n.Ni=function(a){var b,c=rc(Tb(this.Uc));b=new Ib(a.clientX+c.x,a.clientY+c.y);var c=b.x,d=b.y,f=this.Zb,g;if(f){this.le&&f.xa&&(g=this.le(f.ub,f.U,c,d));if(f.U.contains(b)&&g==this.lh)return;f.xa&&(this.dispatchEvent(new Bi("dragout",this,this.ya,f.xa,f.ub,f.d)),f.xa.dispatchEvent(new Bi("dragout",this,this.ya,f.xa,f.ub,f.d,i,i,i,i,this.lh)));this.lh=g;this.Zb=k}if(this.xb.contains(b)){a:{for(var h=0;f=this.qd[h];h++)if(f.U.contains(b))if(f.fe){if(f.fe.U.contains(b)){b=f;break a}}else{b=f;break a}b=
k}if((f=this.Zb=b)&&f.xa)this.le&&(g=this.le(f.ub,f.U,c,d)),c=new Bi("dragover",this,this.ya,f.xa,f.ub,f.d),c.Xl=g,this.dispatchEvent(c),f.xa.dispatchEvent(new Bi("dragover",this,this.ya,f.xa,f.ub,f.d,a.clientX,a.clientY,i,i,g));else if(!f){this.ta||(this.ta=new Ci(this.xb.clone()));a=this.ta.U;a.top=this.xb.top;a.right=this.xb.right;a.bottom=this.xb.bottom;a.left=this.xb.left;for(g=0;f=this.qd[g];g++)b=f.U,f.fe&&(f=f.fe.U,b=new Fd(Math.max(b.top,f.top),Math.min(b.right,f.right),Math.min(b.bottom,
f.bottom),Math.max(b.left,f.left))),f=k,c>=b.right?f=b.right>a.left?b.right:a.left:c<b.left&&(f=b.left<a.right?b.left:a.right),h=k,d>=b.bottom?h=b.bottom>a.top?b.bottom:a.top:d<b.top&&(h=b.top<a.bottom?b.top:a.bottom),f!==k&&h!==k&&(Math.abs(f-c)>Math.abs(h-d)?h=k:f=k),f===k?h!==k&&(h<=d?a.top=h:a.bottom=h):f<=c?a.left=f:a.right=f;this.Zb=10<=(a.right-a.left)*(a.bottom-a.top)?this.ta:k}}};n.wj=da(l);
n.Bh=function(a){for(var b=0,c;c=this.ge[b];b++)if(a.target==c.d){var d=c.ij-c.d.scrollTop,f=c.hj-c.d.scrollLeft;c.ij=c.d.scrollTop;c.hj=c.d.scrollLeft;this.ta&&this.Zb==this.ta&&(0<d?this.ta.U.top+=d:this.ta.U.bottom+=d,0<f?this.ta.U.left+=f:this.ta.U.right+=f);for(var g=0,h;h=c.Ff[g];g++)h=h.U,h.top+=d,h.left+=f,h.bottom+=d,h.right+=f,Di(this,h)}this.p.Xi(a)};
n.Ae=function(a){var b=a.cloneNode(j);switch(a.tagName.toLowerCase()){case "tr":return G("table",k,G("tbody",k,b));case "td":case "th":return G("table",k,G("tbody",k,G("tr",k,b)));default:return b}};function Di(a,b){if(1==a.qd.length)a.xb=new Fd(b.top,b.right,b.bottom,b.left);else{var c=a.xb;c.left=Math.min(b.left,c.left);c.right=Math.max(b.right,c.right);c.top=Math.min(b.top,c.top);c.bottom=Math.max(b.bottom,c.bottom)}}
n.n=function(){zi.e.n.call(this);for(var a,b=0;a=this.Qd[b];b++)this.wi&&(Tc(a.element,"mousedown",a.Mi,l,a),this.Og&&z(a.element,this.Og)),this.xi&&this.Rg&&z(a.element,this.Rg),a.$();this.Qd.length=0};function Bi(a,b,c,d,f,g,h,m,q,t,v){Fc.call(this,a);this.Sm=b;this.Tm=c;this.Um=d;this.Wm=f;this.Vm=g;this.clientX=h;this.clientY=m;this.tn=q;this.un=t;this.Xl=v}u(Bi,Fc);Bi.prototype.n=aa();
function Ei(a,b){J.call(this);this.element=D(a);this.data=b;this.K=k;this.element||e(Error("Invalid argument"))}u(Ei,Zc);n=Ei.prototype;n.Nc=k;n.Mi=function(a){if(Kc(a)){var b=a.target;b&&(K(b,"mousemove",this.gd,l,this),K(b,"mouseout",this.gd,l,this),K(b,"mouseup",this.jg,l,this),this.Nc=b,this.Pg=new Ib(a.clientX,a.clientY),a.preventDefault())}};n.gf=ba("K");
n.gd=function(a){var b=this.Nc,c="mouseout"==a.type&&a.target==b;if(5<Math.abs(a.clientX-this.Pg.x)+Math.abs(a.clientY-this.Pg.y)||c)Tc(b,"mousemove",this.gd,l,this),Tc(b,"mouseout",this.gd,l,this),Tc(b,"mouseup",this.jg,l,this),this.K.Bc(a,this)};n.jg=function(){var a=this.Nc;Tc(a,"mousemove",this.gd,l,this);Tc(a,"mouseout",this.gd,l,this);Tc(a,"mouseup",this.jg,l,this);delete this.Pg;this.Nc=k};function Ci(a,b,c,d){this.U=a;this.xa=b;this.ub=c;this.d=d}Ci.prototype.fe=k;function Fi(){zi.call(this)}u(Fi,zi);function Gi(a,b){b.gf(a);a.Qd.push(b);a.Zf&&Ai(a,b)};function Hi(a){var b={};"rel"in b||(b.rel="nofollow");"target"in b||(b.target="_blank");var c=[],d;for(d in b)b.hasOwnProperty(d)&&b[d]&&c.push(Da(d),'="',Da(b[d]),'" ');var f=c.join("");return a.replace(Ii,function(a,b,c,d,t){a=[Da(b)];if(!c)return a[0];a.push("<a ",f,'href="');d?(a.push("mailto:"),c=d,d=""):(t||a.push("http://"),(d=c.match(Ji))?(c=d[1],d=d[2]):d="");c=Da(c);d=Da(d);a.push(c,'">',c,"</a>",d);return a.join("")})}
var Ji=/^(.*)([:;,\.?\[\]])$/,Ii=RegExp("([\\S\\s]*?)(\\b(?:mailto:)?([\\w.+-]+@[A-Za-z0-9.-]+\\.(?:com|org|net|edu|gov|aero|biz|cat|coop|info|int|jobs|mobi|museum|name|pro|travel|arpa|asia|xxx|[a-z][a-z])\\b)|\\b(?:(https?|ftp)://+|www\\.)\\w[:;,\\.?\\[\\]\\w/~%&=+#-@!]*|$)","g");function Ki(){}u(Ki,Qe);la(Ki);n=Ki.prototype;n.Wc=aa();n.g=function(a,b){jf(a);a.pb&=-256;of(a,32,l);Ki.e.g.call(this,a,b);a.xc(b.value);return b};n.L=function(a){jf(a);a.pb&=-256;of(a,32,l);return a.Na().L("textarea",{"class":Se(this,a).join(" "),disabled:!a.isEnabled()},a.ab||"")};n.bc=function(a){return"TEXTAREA"==a.tagName};n.yc=ka;n.$f=function(a){return a.isEnabled()};n.pd=ka;n.pa=function(a,b,c){Ki.e.pa.call(this,a,b,c);if((a=a.b())&&1==b)a.disabled=c};n.Xa=ka;
n.xc=function(a,b){a&&(a.value=b)};n.la=da("goog-textarea");function Li(a,b,c){hf.call(this,a,b||Ki.a(),c);jf(this);this.od(j);a||(this.ab="")}u(Li,hf);var Mi=lb||mb;n=Li.prototype;n.$c=l;n.Aa=0;n.Gi=0;n.Li=0;n.hi=l;n.Xe=l;n.Jg=l;n.Ig=l;function Ni(a){return a.Zd.top+a.Zd.bottom+a.th.top+a.th.bottom}function Oi(a){var b=a.Li,c=a.b();b&&(c&&a.Xe)&&(b-=Ni(a));return b}function Pi(a){var b=a.Gi,c=a.b();b&&(c&&a.Xe)&&(b-=Ni(a));return b}n.Ga=function(a){this.xc(String(a))};n.I=function(){return this.b().value};n.xc=function(a){Li.e.xc.call(this,a);this.resize()};
n.ib=function(a){Li.e.ib.call(this,a);this.b().disabled=!a};n.resize=function(){this.b()&&this.Ne()};n.w=function(){Li.e.w.call(this);var a=this.b();Hd(a,{overflowY:"hidden",overflowX:"auto",boxSizing:"border-box",MsBoxSizing:"border-box",WebkitBoxSizing:"border-box",MozBoxSizing:"border-box"});this.Zd=be(a,"padding");this.th=ee(a);P(P(P(P(this.l(),a,"scroll",this.Ne),a,"focus",this.Ne),a,"keyup",this.Ne),a,"mouseup",this.Sk);this.resize()};
function Qi(a){if(!a.hi){var b=a.b().cloneNode(l);Hd(b,{position:"absolute",height:"auto",top:"-9999px",margin:"0",padding:"1px",border:"1px solid #000",overflow:"hidden"});a.Na().D.body.appendChild(b);var c=b.scrollHeight;b.style.padding="10px";var d=b.scrollHeight;a.Jg=d>c;b.style.borderWidth="10px";a.Ig=b.scrollHeight>d;b.style.height="100px";100!=b.offsetHeight&&(a.Xe=j);cc(b);a.hi=j}var b=a.b(),c=a.b().scrollHeight,f=a.b(),d=f.offsetHeight-f.clientHeight;if(!a.Jg)var g=a.Zd,d=d-(g.top+g.bottom);
a.Ig||(f=ee(f),d-=f.top+f.bottom);c+=0<d?d:0;a.Xe?c-=Ni(a):(a.Jg||(d=a.Zd,c+=d.top+d.bottom),a.Ig||(a=ee(b),c+=a.top+a.bottom));return c}function Ri(a,b){a.Aa!=b&&(a.Aa=b,a.b().style.height=b+"px")}function Si(a){a=a.b();a.style.height="auto";var b=a.value.match(/\n/g)||[];a.rows=b.length+1}
n.Ne=function(){if(!this.$c){var a=l;this.$c=j;var b=this.b(),c=this.Aa;if(b.scrollHeight){var d=l,f=l,g=Qi(this),h=b.offsetHeight,m=Oi(this),q=Pi(this);m&&g<m?(Ri(this,m),d=j):q&&g>q?(Ri(this,q),b.style.overflowY="",f=j):h!=g?Ri(this,g):this.Aa||(this.Aa=g);!d&&(!f&&Mi)&&(a=j)}else Si(this);this.$c=l;a&&(a=this.b(),this.$c||(this.$c=j,b=l,a.value||(a.value=" ",b=j),(f=a.scrollHeight)?(g=Qi(this),d=Oi(this),h=Pi(this),!(d&&g<=d)&&!(h&&g>=h)&&(h=this.Zd,a.style.paddingBottom=h.bottom+1+"px",Qi(this)==
g&&(a.style.paddingBottom=h.bottom+f+"px",a.scrollTop=0,f=Qi(this)-f,f>=d?Ri(this,f):Ri(this,d)),a.style.paddingBottom=h.bottom+"px")):Si(this),b&&(a.value=""),this.$c=l));c!=this.Aa&&this.dispatchEvent("resize")}};n.Sk=function(){var a=this.b(),b=a.offsetHeight;a.filters&&a.filters.length&&(a=a.filters.item("DXImageTransform.Microsoft.DropShadow"))&&(b-=a.offX);b!=this.Aa&&(this.Aa=this.Li=b)};function Ti(a,b,c,d,f,g,h){S.call(this);this.ua=yf();this.Za=a;this.$e=b;this.wg=c;this.Cg=d;this.Af=f.categories;this.dk=f.feed_categories;this.fk=f.feed_id;this.Vg=g||k;this.Qc=h||k;this.Kf=this.ua?new Fi:k;this.lc={pending:l,all:l};this.jb=["pending","all","playlists","publishers","categories"]}u(Ti,S);var Ui="top_rated top_favorites most_shared most_recent most_discussed most_responded recently_featured on_the_web most_viewed".split(" "),Vi="All Film Autos Music Animals Sports Travel Games Videoblog People Comedy Entertainment News Howto Education Tech Nonprofit Movies Shows Shortmov".split(" ");
n=Ti.prototype;
n.H=function(a){Ti.e.H.call(this,a);a.innerHTML="";a.scrollTop=0;uc(a,oi);var b=E("pending-content",a);w(this.$e,function(a){this.ac(b,a)},this);this.zl=E("playlists-content",a);w(this.wg,this.ph,this);this.Cl=E("publishers-content",a);w(this.Cg,this.qh,this);this.Rj=E("categories-list",a);this.Qh=E("feed-ids",a);this.ek=E("feed-cats",a);Y("/admin/_categories",r(function(a){a=kg(a.target);w(a,function(a){Wi(this,a,"category",Ta(this.Af,a.id)||!this.Af.length)},this)},this));w(Vi,function(a){Wi(this,a,
"feed_category",Ta(this.dk,a))},this);w(Ui,function(a){Wi(this,a,"feed_id",this.fk==a)},this);this.resize()};
n.w=function(){Ti.e.w.call(this);this.na=E("input",this.b());var a=new Ze(this.na),b=new zg(this.na);this.Ha=E("tabs",this.b());this.G="pending";var c=l;P(P(P(P(this.l(),window,"resize",za(L,r(this.resize,this))),a,"key",r(function(a){"13"==a.keyCode&&Xi(this,this.na.value)},this)),b,Bg,r(function(){Xi(this,this.na.value)},this)),this.Ha,"click",r(function(a){a=pc(a.target,"li");this.Ob(a)},this));P(this.l(),this.b(),"scroll",r(function(){if(this.Za&&!c&&!this.lc[this.G]&&("pending"==this.G||"all"==
this.G)&&this.b().scrollTop+F().height>this.b().scrollHeight-this.b().clientTop){c=j;var a=E("spinner",this.b());O(a,j);var b="pending"==this.G?this.$e:this.uf;Y("/admin/_media/collection/"+this.Za+"?offset="+b.length+("pending"==this.G?"&pending=1":""),r(function(g){c=l;g=Ig(Jg(g.target)).medias;g=Oa(g,function(a){return new Rf(a)});Ya(b,g);var h=E(this.G+"-content",this.b());w(g,function(a){this.ac(h,a)},this);this.lc[this.G]=!g.length;C(a,"finished",!g.length)},this))}},this));this.resize()};
n.resize=function(){Vd(this.b(),F().height-40)};
function Xi(a,b){var c;c=b.match("(?:(https?|ftp)://+|www\\.)\\w[:;,\\.?\\[\\]\\w/~%&=+#-@!]*");c=c!=k?c[0]:"";a.Za&&c&&(a.na.disabled="disabled",Y("admin/_add/collection/"+a.Za,r(function(a){this.na.value="";this.na.disabled="";a=kg(a.target);if("media"==a.type){var b=Xf(Wf.a(),a.data);Qa(this.$e,function(a){return a.id==b.id})||(this.$e.push(b),a=E("pending-content",this.b()),this.ac(a,b,j),this.Ob(Xb("li","pending",i)[0]))}else if("playlist"==a.type){var c=a.data;Qa(this.wg,function(a){return a.id==
c.id})||(this.wg.push(c),this.ph(c),this.Ob(Xb("li","playlists",i)[0]))}else if("publisher"==a.type){var h=a.data;h&&!Qa(this.Cg,function(a){return a.id==h.id})&&(this.Cg.push(h),this.qh(h),this.Ob(Xb("li","publishers",i)[0]))}},a),"POST","url="+c))}
n.Ob=function(a){w(this.jb,function(b){C(this.Ha.parentElement,b,B(a,b));this.G=B(a,b)?b:this.G},this);this.Za&&!this.uf&&Y("/admin/_media/collection/"+this.Za,r(function(a){a=Ig(Jg(a.target)).medias;this.uf=Oa(a,function(a){return new Rf(a)});var c=E("all-content",this.b());w(this.uf,function(a){this.ac(c,a)},this)},this))};
n.ph=function(a){var b=H(pi,{name:a.name});this.zl.appendChild(b);var c=E("remove",b);P(this.l(),c,"click",function(){Y("admin/_remove/collection/"+this.Za,r(function(){cc(b)},this),"POST","pub_id="+a.id)})};n.qh=function(a){var b=H(ri,{name:a.name||a.id,S:a.picture});this.Cl.appendChild(b);var c=E("remove",b);P(this.l(),c,"click",function(){Y("admin/_remove/collection/"+this.Za,r(function(){cc(b)},this),"POST","pub_id="+a.id)})};
function Wi(a,b,c,d){if("category"==c){var f=H(qi,{name:b.name,id:b.id});a.Rj.appendChild(f)}else f=H(qi,{name:b,id:b}),("feed_id"==c?a.Qh:a.ek).appendChild(f);C(f,"enabled",!!d);var g="category"==c?"cat_id="+b.id:"feed_id"==c?"feed_id="+b:"feed_cat="+b;P(a.l(),f,"click",function(){"feed_id"==c&&w(dc(this.Qh),function(a){z(a,"enabled")});var a=Hb(f,"enabled");Y("admin/_edit/collection/"+this.Za,se(),"POST",g+"&enabled="+a)})}
n.ac=function(a,b,c){var d=H(yi,{media:b,uc:Vf(b)});c?bc(a,d,0):a.appendChild(d);this.ua&&(a=this.Kf,c=new Ei(d,i),Gi(a,c));var a=new ge(E("repos",d)),f=E("thumb",d),c=E("play",d),g=E("approve",d),h=E("remove",d);a.Hd=function(a,b){var c=b-24;-50<=c&&50>=c&&Hd(f,"background-position-y",50-c+"%")};P(P(P(P(this.l(),a,"end",function(){var a=(f.style[Ka("background-position")]||"").split(" ")[1],a=a.substring(0,a.length-1);Y("/admin/_posthumb",se(),"POST","media="+b.id+"&pos="+a)}),c,"click",r(this.vl,
this,b)),g,"click",r(this.rh,this,b,j,d)),h,"click",r(this.rh,this,b,l,d));L(za(y,d,"show"))};n.kg=function(a,b){Y("/admin/_addprogram",r(function(b){b=Ig(Jg(b.target));b=new Yf(b);a.c(gg,b)},this),"POST","channel="+a.id+"&media="+b.id)};n.rh=function(a,b,c){var d=a.Tj||this.Za;Y("admin/_media/collection",r(function(){y(c,"remove");L(function(){cc(c)},300);N.a();var b;N.a();b=mc(D("toggle-pending"));jd(0,b-1);Z.a().c("approved",a,d)},this),"POST","col="+d+"&media="+a.id+"&approve="+b)};
n.vl=function(a){a=Zf(a);W.a().c(Hf,a)};function Yi(a){S.call(this);this.Cb=a||k;this.ud=this.wh=this.zj=this.Ah=0}u(Yi,S);n=Yi.prototype;n.L=function(){this.d=H(ni)};n.H=function(a){Yi.e.H.call(this,a);var b=H(ni,{pi:this.Cb?"Add a collection":"Add a Channel"});a.innerHTML=b.innerHTML};
n.w=function(){Yi.e.w.call(this);this.na=E("input",this.b());var a=new Ze(this.na);this.Jl=E("scrollable",this.b());this.Z=E("admin-channels",this.b());this.Yg=E("topics",this.b());this.Be=E("collections",this.b());this.zh=D("admin-col-list");this.ue=D("admin-list");U.a();this.Cb?(Y("/admin/_topicmedias/"+this.Cb,r(function(a){a=kg(a.target);Lb(a,function(a,b){O(this.Yg.parentElement,j);if(a&&a.length){var f=H(ui,{em:b,kd:a.length});this.Yg.appendChild(f);K(f,"click",r(function(){a=Oa(a,function(a){return new Rf(a)});
(new Ti("",a,[],[],[])).g(this.ue);Z.a().c("navigate",this.ue,l,b)},this));Z.a().subscribe("approved",function(b){if(Qa(a,function(a){return a.id==b.id})){var d=E("pending",f),m=mc(d)-1;0>=m?(cc(f),Bc(f)):ic(d,m)}},this)}},this);this.ud&&jd(N.a(),this.ud);this.zj=Q(this.Yg.parentElement).height;this.resize()},this)),Y("/admin/_collections/"+this.Cb,r(function(a){a=kg(a.target);O(this.Be.parentElement,!!a.length);w(a,this.oh,this);this.ud&&jd(N.a(),this.ud);this.Ah=Q(this.Be.parentElement).height;
this.resize()},this))):Y("/admin/_channels",r(function(a){a=kg(a.target);O(this.Z.parentElement,!!a.length);w(a,this.nh,this);this.wh=Q(this.Z.parentElement).height;this.resize()},this));P(this.l(),a,"key",r(function(a){"13"==a.keyCode&&this.na.value&&(a=this.na.value,this.na.disabled="disabled",Y(this.Cb?"/admin/_collections":"/admin/_channels",r(function(a){a=kg(a.target);this.Cb?(O(this.Be.parentElement,!!a),this.oh(a)):(O(this.Z.parentElement,!!a),this.nh(a));this.na.disabled="";this.na.value=
""},this),"POST","name="+a+(this.Cb?"&cid="+this.Cb:"")))},this))};
n.nh=function(a){var b=new fg(a),c=H(si,{T:b});this.Z.appendChild(c);K(c,"click",r(function(a){B(a.target,"on")||B(a.target,"off")?(C(c,"on",B(a.target,"on")),C(c,"off",!B(a.target,"on")),Y("/admin/_channel/online/"+b.id,r(function(a){a.target.disabled="";a=kg(a.target);C(c,"on",a.online);C(c,"off",!a.online)},this),"POST","online="+B(a.target,"on"))):B(a.target,"program")?Y("/admin/_program",se(),"POST","channel_id="+b.id):B(a.target,"fetch")?Y("/admin/_fetch",function(){alert("Fetch began, but give it some time.")},
"POST","channel_id="+b.id):B(a.target,"remove")&&confirm("Remove "+b.name+"?")?(O(c,l),Y("/admin/_channels/"+b.id,function(a){kg(a.target).deleted?cc(c):O(c,j)},"DELETE")):((new Yi(b.id)).g(this.zh),Z.a().c("navigate",this.zh,l,b.name))},this))};
n.oh=function(a){var b=H(ti,{Cf:a});this.ud+=a.pending;this.Be.appendChild(b);K(b,"click",r(function(c){B(c.target,"remove")&&confirm("Remove "+a.name+"?")?(O(b,l),Y("/admin/_collections/"+a.id,function(a){kg(a.target).deleted?cc(b):O(b,j)},"DELETE")):B(c.target,"fetch")?Y("/admin/_fetch",function(){alert("Fetch began, but give it some time.")},"POST","col_id="+a.id):Y("/admin/_media/collection/"+a.id+"?pending=1",r(function(b){var b=Ig(Jg(b.target)),c=b.medias,c=Oa(c,function(a){return new Rf(a)});
(new Ti(a.id,c,b.playlists,b.publishers,b.categories)).g(this.ue);Z.a().c("navigate",this.ue,l,a.name)},this))},this));Z.a().subscribe("approved",function(c,d){if(d==a.id){var f=E("pending",b),g=mc(f)-1;0>=g?(cc(b),Bc(b)):ic(f,g)}},this)};n.resize=function(){Vd(this.Jl,this.wh+this.zj+this.Ah+110)};function Zi(){S.call(this);this.j=new Li("Add to the conversation.");this.lb=new wf("tweet");of(this.lb,16,j);this.cb=new wf("post");of(this.cb,16,j);var a=X.a().o;this.He=a.Al;this.of=a.bj;this.Gc=new wf("add");this.tg=this.kb=this.bf=k}u(Zi,S);n=Zi.prototype;n.L=function(){this.d=H(ii)};
n.w=function(){Zi.e.w.call(this);this.j.g(E("comment-textarea",this.b()));var a=this.j;a.Gi=70;a.resize();a=new Ze(this.j.Gb());this.Ce=E("comment-controls",this.b());this.Ik=E("input-holder",this.b());Me(this,this.lb);this.lb.g(E("tweet-toggle",this.b()));Y("/_twitter",r(function(a){a=kg(a.target);this.of=this.of&&a.auth;this.gm=a.auth_url;nf(this.lb,this.of)},this));Me(this,this.cb);this.cb.g(E("fb-toggle",this.b()));FB.api("/me/permissions",r(function(a){this.He=this.He&&!!a.data[0].publish_stream;
nf(this.cb,this.He)},this));Me(this,this.Gc);this.Gc.g(E("add-comment",this.b()));this.Gc.ib(l);P(P(P(P(P(P(this.l(),this.j.b(),"focus",r(function(){Md(this.Ce,0,0);this.dispatchEvent("focus")},this)),a,"key",r(function(a){this.Gc.ib(this.j.I());"13"==a.keyCode?(a.preventDefault(),a.stopPropagation(),this.Gc.setActive(this.j.I()),this.jd(a)):"8"==a.keyCode&&(!this.I()&&this.kb)&&$i(this)},this)),this.j,"resize",r(function(a){this.dispatchEvent(a)},this)),this.cb,"action",r(this.cl,this)),this.lb,
"action",r(this.tl,this)),this.Gc,"action",r(this.jd,this));Z.a().subscribe("reply-comment",this.ej,this);Z.a().subscribe("reply-tweet",this.Gl,this);X.a().o.subscribe(ag,function(){nf(this.lb,j)},this)};n.ej=function(a,b){this.kb&&$i(this);this.bf=b;this.tg=a.id?a.id:a.toString();this.kb=G("div","token","@"+b.Fb());this.Ik.appendChild(this.kb);this.Ta(j);this.j.b().style.paddingLeft=Q(this.kb).width+5+"px"};
n.Gl=function(a){this.kb&&$i(this);this.hn=a.id;this.Ga((this.I()?this.I()+" ":"")+"@"+a.handle+" ");this.Ta(j);this.lb.ib(j);this.Ta(j);a=this.I().length;this.setSelectionRange(a,a)};function $i(a){a.bf=k;a.tg=k;cc(a.kb);a.kb=k;a.j.b().style.paddingLeft=""}
n.setSelectionRange=function(a,b){if(this.j.b().setSelectionRange)this.j.b().focus(),this.j.b().setSelectionRange(a,b);else if(this.j.b().createTextRange){var c=this.j.b().createTextRange();c.collapse(j);c.moveEnd("character",b);c.moveStart("character",a);c.select()}};n.I=function(){return this.j.I()};n.Ga=function(a){return this.j.Ga(a)};n.collapse=function(){return 25!=Od(this.Ce).y?(Md(this.Ce,0,25),j):l};n.Pd=function(){return B(this.b(),"focused")};
n.Ta=function(a){a&&(this.j.b().focus(),L(r(function(){Md(this.Ce,0,0)},this)));return C(this.b(),"focused",a)};n.jd=function(){this.j.I()&&(this.dispatchEvent({type:"add",uh:r(function(a){var b=kg(a.target),a=new aj(b.comment),c=b.tweet?new bj(b.tweet):k;if(b=Xf(Wf.a(),b.comment.media))b.c(Sf,a),c&&b.c("add-tweet",c)},this),Ld:We(this.cb),bh:We(this.lb),text:this.j.I(),ba:this.tg,mf:this.bf&&this.bf.id}),this.j.Ga(""),$i(this))};
n.cl=function(){!this.He&&We(this.cb)&&(O(D("overlay"),j),FB.login(r(function(a){O(D("overlay"),l);this.ck=!!a.authResponse;nf(this.cb,this.ck)},this),{scope:"publish_stream"}))};n.tl=function(){if(!this.of&&We(this.lb)){nf(this.lb,l);var a=window.open(this.gm,"Twitter Login","height=300,width=550");a.moveTo(screen.width/2-225,screen.height/2-150);a.focus()}};function aj(a){this.id=a.id;this.i=Lg(X.a(),a.user);this.text=a.text;this.time=od(a.time+"Z");this.Dl=dd(this.time.getTime());this.ba=a.parent_id;this.dj=[];w(a.replies,function(a){a=new aj(a);this.dj.push(a)},this)};function bj(a){this.id=a.id;this.i=a.user&&Lg(X.a(),a.user);this.handle=a.handle;this.S=a.picture;this.text=a.text;this.time=od(a.time+"Z")};function cj(a,b,c,d){S.call(this);this.f=a;this.$a=b||[];this.ec={};this.qe=!!c;this.nb=d||[];this.pe={};this.wc=this.Im=0}u(cj,S);n=cj.prototype;
n.H=function(a){cj.e.H.call(this,a);a.innerHTML="";a.scrollTop=0;y(this.b(),"ios-scroll");this.O=G("div","loading",G("div","loading-spinner"));this.b().appendChild(this.O);O(this.O,l);this.sc=G("div","no-comments","Start the conversation.");this.b().appendChild(this.sc);this.z=G("div","comments tweets");this.b().appendChild(this.z);P(P(this.l(),window,"resize",za(L,r(this.resize,this))),this.z,"click",r(this.Df,this));this.$a.length?(w(this.$a,function(a){this.$b(a)},this),this.fd=Q(this.z).height):
this.qe&&this.nb.length?(w(this.nb,function(a){this.Hc(a)},this),this.fd=Q(this.z).height):O(this.O,j);this.qe?(Y("/_tweet/"+this.f.id+"?offset="+this.nb.length,r(function(a){O(this.O,l);a=Ig(Jg(a.target));a=Oa(a,function(a){a=new bj(a);this.Hc(a);return a},this);this.fd=Q(this.z).height;this.resize()},this)),this.f.subscribe("add-tweet",function(a){this.Hc(a,j)},this)):(Y("/_comment/"+this.f.id+"?offset="+this.$a.length,r(function(a){O(this.O,l);a=Ig(Jg(a.target));a=Oa(a,function(a){a=new aj(a);
this.$b(a);return a},this);this.fd=Q(this.z).height;this.resize()},this)),this.f.subscribe(Sf,this.$b,this),this.f.subscribe(Tf,this.Eg,this));this.resize(41)};
n.Hc=function(a,b){this.pe[a.id]=a;O(this.sc,l);var c=Hi(a.text),c=c.replace(/#(\S+)/g,function(a,b){return'<a target="_blank" href="http://twitter.com/search?q=%23'+b+'">'+a+"</a>"}),c=c.replace(/@(\S+)/g,function(a,b){return'<a target="_blank" href="http://twitter.com/'+b+'">'+a+"</a>"}),c=H(gi,{yb:a,text:c,timestamp:dd(a.time.getTime())});ed(cd.a(),a.time,E("timestamp",c));b?bc(this.z,c,0):this.z.appendChild(c);this.resize();O(gc(this.z),j)};
n.Df=function(a){a=a.target;if(this.qe){var b=pc(a,k,"tweet");b&&(b=this.pe[b.id.split("-")[1]],B(a,"reply")&&Z.a().c("reply-tweet",b))}else if(b=pc(a,k,"comment")){var b=b.id.split("-")[1],c=this.ec[b];B(a,"reply")?Z.a().c("reply-comment",c.ba?this.ec[c.ba]:c,c.i):B(a,"remove")&&this.f.c(Tf,b)}};n.Eg=function(a){var a=D("listcomment-"+a),b=a.nextSibling;for(cc(a);b&&B(b,"reply");)b=b.nextSibling,cc(b)};
n.$b=function(a){O(this.sc,l);this.ec[a.id]=a;var b=H(hi,{prefix:"listcomment",qb:a,text:Hi(a.text),timestamp:dd(a.time.getTime()),Zi:a.i.id==X.a().o.id});ed(cd.a(),a.time,E("timestamp",b));this.z.appendChild(b);this.resize()};n.resize=function(a){this.wc=a||this.wc;Vd(this.b(),F().height-42-this.wc-(pc(this.b(),k,"tabbed")?30:0))};function dj(a,b,c,d){S.call(this);this.f=this.q=a;this.$a=b||[];this.nb=c||[];this.qe=!!d;this.Ef=new cj(a,this.$a);this.$g=new cj(a,i,j,this.nb);this.j=new Zi;this.jb=["comments","tweets"]}u(dj,S);n=dj.prototype;n.H=function(a){dj.e.H.call(this,a);y(a,"conversation");y(a,"ios-scroll");uc(a,wi);y(a.firstChild,this.qe?"tweets":"comments")};
n.w=function(){this.Ha=E("tabs",this.b());this.Ef.g(E("comments-content",this.b()));this.$g.g(E("tweets-content",this.b()));Ke(this.j,this.b());P(P(P(P(P(P(P(this.l(),this.Ha,"click",r(function(a){a=pc(a.target,"li");this.Ob(a)},this)),this.j,"add",r(this.jd,this)),this.j,"resize",r(function(){B(this.b().firstChild,"comments")?this.Ef.resize(41):this.$g.resize(41)},this)),window,"click",r(function(a){!pc(a.target,k,"comment-input")&&!this.j.I()&&(this.j.Ta(l),this.j.collapse())},this)),E("no-comments",
this.b()),"click",r(this.Vi,this)),Wb("no-comments",this.b())[1],"click",r(this.Vi,this)),window,"click",r(function(a){!pc(a.target,k,"comment-input")&&!this.j.I()&&(this.j.Ta(l),this.j.collapse())},this));this.Ef.resize(41);this.$g.resize(41)};n.Vi=function(a){a.preventDefault();a.stopPropagation();this.j.Ta(j)};
n.jd=function(a){Y("/_comment",a.uh,"POST","media_id="+this.f.id+"&text="+a.text+"&tweet="+a.bh+"&facebook="+a.Ld+(a.ba?"&parent_id="+a.ba:"")+(a.mf?"&to_user_id="+a.mf:""));a.Ld&&!a.ba&&(FB.api("/me/feed","POST",{message:a.text,name:this.f.name,link:this.f.link,picture:this.f.Wa,caption:"on XYLO",description:this.f.description},aa()),nf(this.j.cb,l))};n.Ob=function(a){w(this.jb,function(b){C(this.Ha.parentElement,b,B(a,b));this.G=B(a,b)?b:this.G},this)};function dd(a){var b=s(),c=Math.floor((b-a)/6E4),b=l;0>c&&(b=j,c*=-1);if(60>c)return ej(c,b,0);c=Math.floor(c/60);if(24>c)return ej(c,b,1);c=new Date(s());c.setHours(0);c.setMinutes(0);c.setSeconds(0);c.setMilliseconds(0);c=Math.ceil((c.getTime()-a)/864E5);b&&(c*=-1);return 14>c?ej(c,b,2):""}
function ej(a,b,c){return!b&&0==c?(b=Aa("{$num} minute ago",{num:a}),c=Aa("{$num} minutes ago",{num:a}),1==a?b:c):b&&0==c?(b=Aa("in {$num} minute",{num:a}),c=Aa("in {$num} minutes",{num:a}),1==a?b:c):!b&&1==c?(b=Aa("{$num} hour ago",{num:a}),c=Aa("{$num} hours ago",{num:a}),1==a?b:c):b&&1==c?(b=Aa("in {$num} hour",{num:a}),c=Aa("in {$num} hours",{num:a}),1==a?b:c):!b&&2==c?(b=Aa("{$num} day ago",{num:a}),c=Aa("{$num} days ago",{num:a}),1==a?b:c):b&&2==c?(b=Aa("in {$num} day",{num:a}),c=Aa("in {$num} days",
{num:a}),1==a?b:c):""};function fj(a,b,c,d){S.call(this);w(a.$k,function(a){var b=a.h();b&&b.media.id==this.id?(this.yl=a,w(a.Fc,function(a){a.Ec||(this.vb[a.i.id]=a.i)})):this.vb={}},a);this.f=this.q=a;this.Ue=c||k;this.Bi=d||k;this.ii=l;this.Rh=!b;this.wd={};this.$a=[];this.ec={};this.zi={};this.nb=[];this.pe={};this.j=new Zi;this.Ac=new wf("Star");of(this.Ac,16,j);this.Ph=new wf("Facebook");this.Cj=new wf("Twitter");this.Qa=new wf("Play");this.ld=new wf("Plus");of(this.ld,16,j);this.wc=0}u(fj,S);n=fj.prototype;
n.L=function(){this.d=H(ei,{media:this.f})};n.H=function(a){fj.e.H.call(this,a);var b=H(ei,{media:this.f,description:this.f.description?Hi(this.f.description):"",uc:Vf(this.f),Lk:this.Ue?this.Ue.id:k});a.innerHTML=b.innerHTML};
n.w=function(){fj.e.w.call(this);this.zb=E("viewers",this.b());var a=E("picture",this.b()),b=E("scrollable",this.b()),c=E("publisher",this.b()),d=E("title",this.b()),f=E("links",this.b());this.O=E("loading",this.b());var g=a.firstChild;this.Uj=E("info-contents",this.b());this.rn=E("tweet-holder",this.b());this.mb=E("tweets",this.b());this.ic=E("dot-nav",this.b());this.z=E("comments",this.b());this.sc=E("no-comments",this.b());Ke(this.j,this.b());this.Ac.g(E("star",this.b()));nf(this.Ac,cg(X.a().o,
this.f));this.Ph.g(E("facebook",this.b()));this.Cj.g(E("twitter",this.b()));this.Qa.g(E("play",this.b()));this.ld.g(E("plus",this.b()));this.ah=new $c(5E3);this.vn=E("watch-with",this.b());!this.Rh||this.f.Sh?gj(this,l,this.f.description,this.f.ff,this.f.Bj,this.f.Db):this.Rh&&Y("/_info/"+this.f.id,r(function(a){a=Ig(Jg(a.target));gj(this,j,a.description,a.seen,a.tweets,a.comments)},this));P(P(P(P(P(P(P(P(P(P(P(P(P(P(P(P(P(P(P(P(P(P(P(P(this.l(),window,"resize",za(L,r(this.resize,this))),c,"click",
r(function(){Z.a().c("media-list",this.f.va.name,i,"/admin/_media/publisher/"+this.f.va.id,this.f.va.S,this.f.va.description,this.f.va.link,"/_publisher/"+this.f.va.id)},this)),this.Ac,"action",r(function(){Wf.a().c("star",this.f,We(this.Ac));Y("/_star",i,"POST","media_id="+this.f.id+(!We(this.Ac)?"&delete=1":""))},this)),this.Ph,"action",r(this.bl,this)),this.Cj,"action",r(this.sl,this)),this.Qa,"action",r(this.gl,this)),this.ld,"action",r(this.jl,this)),this.ld.b(),"mousedown",r(this.kl,this)),
E("local",this.b()),"click",r(function(){O(E("link-select",this.b()),j);E("link-input",this.b()).select()},this)),this.j,"add",r(this.jd,this)),this.sc,"click",r(function(a){a.preventDefault();a.stopPropagation();this.j.Ta(j)},this)),E("conv-link",this.b()),"click",r(function(a){a.preventDefault();a.stopPropagation();Z.a().c("conversation",this.f,this.$a,this.nb)},this)),E("tweets-link",this.b()),"click",r(function(a){a.preventDefault();a.stopPropagation();Z.a().c("conversation",this.f,this.$a,this.nb,
j)},this)),this.j,"focus",r(function(){this.resize(25,j)},this)),this.j,"resize",r(function(a){this.resize(25+(a.target.Aa-41))},this)),this.ic,"click",r(function(a){B(a.target,"dot")&&(hj(this,a.target),this.ah.stop())},this)),this.ah,bd,r(function(){var a=this.Fd&&ec(this.Fd)||E("dot",this.b());L(r(function(){hj(this,a)},this))},this)),window,"click",r(function(a){!pc(a.target,k,"comment-input")&&!this.j.I()&&(this.j.Ta(l),this.j.collapse()&&this.resize(0))},this)),g,"load",function(){O(g,j);L(function(){Q(g).height<
Q(a).height+50&&y(g,"fix-height");Q(g).width>2*Q(a).width?y(g,"pan-left"):Q(g).height>2*Q(a).height&&y(g,"pan-top");g.style.marginTop=-Q(g).height/2+"px";g.style.marginLeft=-Q(g).width/2+"px";y(g,"show")})}),b,"scroll",r(function(){var h=(120-b.scrollTop)/100;Zd(c,Math.min(1,Math.max(h,0)));Zd(d,Math.min(1,Math.max(h,0)));Zd(f,Math.min(1,Math.max(h,0)));Zd(g,Math.min(0.5,Math.max(h,0.1)));C(a,"scrolled",10<b.scrollTop)},this)),this.z,"scroll",r(this.Hg,this)),this.z,"click",r(this.Df,this)),this.mb,
"click",r(this.fm,this)),E("desc-link",this.b()),"click",r(function(){var c=Hb(a,"scrolled");(new Ce(b,[b.scrollLeft,b.scrollTop],[b.scrollLeft,c?170:0],300)).play()},this));this.Ue&&P(this.l(),E("prev-link",this.b()),"click",r(function(){Z.a().c(Dg,this.Ue,j,i,this.j.I())},this));this.Bi&&this.j.Ga(this.Bi);this.f.subscribe(Sf,function(a){this.$b(a,j)},this);this.f.subscribe(Tf,this.Eg,this);this.f.subscribe("add-tweet",function(a){this.Hc(a,j)},this);this.f.subscribe(Uf,function(a,b,c){ij(this,
a,c)},this);X.a().o.subscribe("set-starred",function(){nf(this.Ac,cg(X.a().o,this.f))},this);Jf().subscribe(hg,function(a,b){nf(this.ld,b)},this)};
function gj(a,b,c,d,f,g){c?(a.f.description=c,E("description",a.b()).innerHTML=Hi(c),O(E("scrollable",a.b()),j)):(O(E("desc-link",a.b()),l),O(E("scrollable",a.b()),l));c=Oa(d,function(a){var c=b?Lg(X.a(),a):a;if(c.id!=X.a().o.id){O(this.zb,j);this.ii=j;var d=H(fi,{i:c,Fb:c.Fb});this.zb.appendChild(d);this.wd[a.id]=d;P(this.l(),d,"click",function(){Z.a().c(Eg,a)})}return c},a);Lb(a.f.vb,function(a){ij(this,a)},a);a.nb=Oa(f,function(a){a=b?new bj(a):a;this.Hc(a);this.Fd=this.ic.firstChild;y(this.Fd,
"selected");return a},a);f.length&&a.ah.start();a.z&&O(a.z.parentElement,j);O(a.sc,!g.length);g=Oa(g,function(a,c){var d=b?new aj(a):a;d.ba||this.$b(d,c==g.length-1);return d},a);O(a.O,l);a.resize();b&&(a.f.Bj=a.nb,a.f.Db=g,a.f.ff=c,a.f.Sh=j)}n.Ib=function(){return this.j.Pd()||!!this.j.kb||!!this.j.I()};
function hj(a,b){if(b){w(dc(a.ic),function(a){return z(a,"selected")});a.Fd=b;y(a.Fd,"selected");var c=Sa(dc(a.ic),function(a){return a==b});(new Ce(a.mb,[a.mb.scrollLeft,a.mb.scrollTop],[320*c,a.mb.scrollTop],200)).play();a.resize()}}
n.jd=function(a){Y("/_comment",a.uh,"POST","media_id="+this.f.id+"&text="+a.text+"&tweet="+a.bh+"&facebook="+a.Ld+(a.ba?"&parent_id="+a.ba:"")+(a.mf?"&to_user_id="+a.mf:""));a.Ld&&!a.ba&&(FB.api("/me/feed","POST",{message:a.text,name:this.f.name,link:this.f.link,picture:this.f.Wa,caption:"on XYLO",description:this.f.description},aa()),nf(this.j.cb,l));eg.a().qb(this.f.id,a.Ld,a.bh)};
n.Hc=function(a,b){this.pe[a.id]=a;var c=Hi(a.text),c=c.replace(/#(\S+)/g,function(a,b){return'<a target="_blank" href="http://twitter.com/search?q=%23'+b+'">'+a+"</a>"}),c=c.replace(/@(\S+)/g,function(a,b){return'<a target="_blank" href="http://twitter.com/'+b+'">'+a+"</a>"}),c=H(gi,{yb:a,text:c,timestamp:dd(a.time.getTime()),prefix:"infotweet"}),d=G("div","dot");ed(cd.a(),a.time,E("timestamp",c));b?(bc(this.mb,c,0),bc(this.ic,d,0),10<dc(this.mb).length&&(cc(this.mb.lastChild),cc(this.ic.lastChild),
hj(this,d))):(this.mb.appendChild(c),this.ic.appendChild(d));this.resize();O(gc(this.mb),j)};
n.$b=function(a,b){this.$a.push(a);this.ec[a.id]=a;O(this.sc,l);var c=H(hi,{prefix:"infocomment",qb:a,text:Hi(a.text),timestamp:dd(a.time.getTime()),Zi:a.i.id==X.a().o.id});ed(cd.a(),a.time,E("timestamp",c));if(a.ba){var d=this.zi[a.ba];d.parentNode&&d.parentNode.insertBefore(c,d.nextSibling)}else this.z.appendChild(c);this.zi[a.ba||a.id]=c;this.resize(this.j.Pd()?25:0,j);w(a.dj,function(a){this.$b(a,b)},this);b&&this.f.vb[a.i.id]&&this.j.ej(a.ba||a.id,a.i)};
function ij(a,b,c){if(c&&a.wd[b.id])z(a.wd[b.id],"online");else if(b.id!=X.a().o.id){if(!a.wd[b.id]){var d=H(fi,{i:b});a.wd[b.id]=d;bc(a.zb,d,1);P(P(P(a.l(),d,"click",function(){Z.a().c(Eg,b)}),d,"mouseover",function(){var a=Od(d),c=Od(this.zb),h=D("hovercard");ic(h,b.Fb()+(B(d,"online")?" is watching":" saw this"));var m=Q(h);h.style.right=320-c.x-a.x-m.width/2-12+"px";h.style.top=c.y+a.y+210+"px";O(h,j)}),d,"mouseout",function(){O(D("hovercard"),l)})}O(a.zb,j);ic(E("status",a.zb),"WATCHING"+(a.ii?
" + SEEN":""));y(a.wd[b.id],"online")}}n.fm=function(a){var a=a.target,b=pc(a,k,"tweet");b&&(b=this.pe[b.id.split("-")[1]],B(a,"reply")&&Z.a().c("reply-tweet",b))};n.Df=function(a){var a=a.target,b=pc(a,k,"comment");if(b){var b=b.id.split("-")[1],c=this.ec[b];B(a,"reply")?Z.a().c("reply-comment",c.ba?this.ec[c.ba]:c,c.i):B(a,"remove")&&this.f.c(Tf,b)}};n.Eg=function(a){var b=D("infocomment-"+a),c=b.nextSibling;cc(b);for(Va(this.$a,function(b){return b.id==a});c&&B(c,"reply");)c=c.nextSibling,cc(c)};
n.Hg=function(){C(this.z.parentElement,"top-grad",!!this.z.scrollTop);var a=this.z.style.maxHeight,b=F().height,a=a.substring(0,a.length-2),c=Q(this.z).height;C(this.z.parentElement,"bottom-grad",this.z.scrollTop<this.z.scrollHeight-a-5&&c>=a&&640<b)};
n.resize=function(a,b){this.wc=a!=i?a:this.wc;var c=F().height;Vd(this.Uj,c-283);640<c&&this.z&&this.z.parentElement?(Hd(this.z,"max-height",c-Od(this.z.parentElement).y-313-this.wc+"px"),this.Hg()):640>c&&(Hd(this.z,"max-height",""),this.Hg());b&&L(r(function(){(new Ce(this.z,[this.z.scrollLeft,this.z.scrollTop],[this.z.scrollLeft,this.z.scrollHeight],400)).play()},this),0)};
n.bl=function(){O(D("overlay"),j);FB.ui({method:"feed",name:this.f.name,link:this.f.link,S:this.f.Wa,caption:"on XYLO",description:this.f.description},function(){O(D("overlay"),l)});jj(eg.a(),this.f.id,j,l)};n.sl=function(){var a=window.open("https://twitter.com/share?url="+this.f.link+"&text=I'm watching "+this.f.name+" "+this.f.link,"Tweet","height=320,width=550");a.moveTo(screen.width/2-225,screen.height/2-150);a.focus();jj(eg.a(),this.f.id,l,j)};n.gl=function(){var a=Zf(this.q);W.a().c(Hf,a)};
n.kl=function(){if(!W.a().h()||!W.a().h().async)this.Qa.setActive(j),L(r(function(){this.Qa.setActive(l)},this),2E3)};n.jl=function(){Jf().c(hg,this.q,We(this.ld));Pf.a().c("flash","Added to queue",this.f.name,i,this.f.Wa)};function kj(a,b,c,d,f,g){S.call(this);this.ua=yf();this.Ii=a||k;this.vd=b||k;this.Nb={};this.Vg=c||k;this.Qc=d||k;this.Gh=g||k;this.Pk=f||k;this.Kf=this.ua?new Fi:k;this.fd=this.ni=0}u(kj,S);
kj.prototype.H=function(a){kj.e.H.call(this,a);a.innerHTML="";a.scrollTop=0;y(this.b(),"ios-scroll");(this.Qc||this.Vg)&&lj(this);!this.Qc&&this.Gh&&Y(this.Gh,r(function(a){a=kg(a.target);a.description&&this.Wd?(E("description",this.Wd).innerHTML=Hi(a.description),this.ni=Q(this.Wd).height,this.resize()):a.description&&lj(this)},this));this.O=G("div","loading",G("div","loading-spinner"));this.b().appendChild(this.O);O(this.O,l);B(this.b(),"starred")&&(this.hd=G("div","no-comments","Favorities will appear here."),
this.b().appendChild(this.hd));this.rc=G("div","medias");this.b().appendChild(this.rc);P(this.l(),window,"resize",za(L,r(this.resize,this)));this.vd?(O(this.O,j),Y(this.vd,r(function(a){O(this.O,l);a=Ig(Jg(a.target));a=Oa(a,function(a){return new Rf(a)});w(a,this.sf,this);this.fd=Q(this.rc).height;this.resize()},this))):this.Ii&&(w(this.Ii,this.sf,this),this.fd=Q(this.rc).height,this.resize())};
kj.prototype.sf=function(a){this.hd&&O(this.hd,l);var b=H(xi,{media:a}),c=E("list-play",b);this.rc.appendChild(b);if(this.ua){var d=this.Kf,f=new Ei(b,i);Gi(d,f)}P(P(this.l(),b,"click",r(function(){Z.a().c(Dg,a)},this)),c,"click",r(function(b){b.stopPropagation();b=Zf(a);W.a().c(Hf,b);Z.a().c(Dg,a)},this));this.Nb[a.id]=b};kj.prototype.resize=function(){Vd(this.b(),F().height-40-(pc(this.b(),k,"tabbed")?30:0))};
function lj(a){a.Wd=H(li,{Wa:a.Vg,description:a.Qc?Hi(a.Qc):"",link:a.Pk});a.b().appendChild(a.Wd);a.ni=Q(a.Wd).height;a.resize()}kj.prototype.kg=function(a,b){Y("/admin/_addprogram",r(function(b){b=Ig(Jg(b.target));b=new Yf(b);a.c(gg,b)},this),"POST","channel="+a.id+"&media="+b.id)};function mj(a){S.call(this);this.gh=this.q=a;this.jb=["activity","starred"]}u(mj,S);mj.prototype.H=function(a){mj.e.H.call(this,a);y(a,"profile");y(a,"ios-scroll");uc(a,vi)};
mj.prototype.w=function(){this.Ha=E("tabs",this.b());Y("/_star/"+this.gh.id,r(function(a){var a=kg(a.target),a=Oa(a,function(a){return new Rf(a)}),b=X.a().o;b.rj=a;b.c("set-starred");this.je=new kj(a);this.je.g(E("starred-content",this.b()))},this));Y("/_activity/"+this.gh.id,r(function(a){a=kg(a.target);this.Qg=new nj(a,this.gh.id);this.Qg.g(E("activity-content",this.b()))},this));P(this.l(),this.Ha,"click",r(function(a){a=pc(a.target,"li");this.Ob(a)},this));Wf.a().subscribe("star",function(a,b){if(b)this.je.sf(a);
else{var c=this.je,d=c.Nb[a.id];d&&(Bc(d),Pb(c.Nb,a.id))}},this)};mj.prototype.Ob=function(a){w(this.jb,function(b){C(this.Ha.parentElement,b,B(a,b));this.G=B(a,b)?b:this.G},this)};function nj(a,b){S.call(this);this.Kj=a;this.re=b||k;this.V=0;this.lc=l;this.Th=[];this.Cd=[];this.ed=[];this.mh=[]}u(nj,S);
nj.prototype.H=function(a){nj.e.H.call(this,a);a.innerHTML="";a.scrollTop=0;y(a,"stream");y(a,"ios-scroll");this.Ad=G("div","activities");this.b().appendChild(this.Ad);this.O=G("div","spinner");this.b().appendChild(this.O);O(this.O,l);this.hd=G("div","no-comments",this.re?"Your activity will appear here.":"Friends' activity will appear here.");this.b().appendChild(this.hd);oj(this,this.Kj);X.a().subscribe("new-activity",function(a){(this.re==a.user.id||!this.re&&a.user.id!=X.a().o.id)&&pj(this,a,
i,i,j)},this);P(P(this.l(),this.b(),"scroll",r(function(){!this.lc&&this.b().scrollTop+F().height>this.b().scrollHeight-60&&qj(this)},this)),window,"resize",za(L,r(this.resize,this)));this.resize()};function qj(a){O(a.O,j);Y("/_activity"+(a.re?"/"+a.re:"")+"?offset="+a.V,r(function(a){this.Th[String(a.target.Ud)]||(this.Th[String(a.target.Ud)]=j,a=kg(a.target),this.lc=!a.length,C(this.O,"finished",this.lc),O(this.O,this.lc),oj(this,a))},a))}
function oj(a,b){a.Cd=[];a.ed=[];w(b,function(a){this.V++;switch(a.type){case "session":var a=a.session,b=a.channel_id in this.Cd?this.Cd[a.channel_id]:[];b.push(a);this.Cd[a.channel_id]=b;break;case "comment":a=a.comment,b=a.media.id in this.ed?this.ed[a.media.id]:[],b.push(a),this.ed[a.media.id]=b}},a);Lb(a.Cd,function(a){pj(this,i,a,"session")},a);Lb(a.ed,function(a){pj(this,i,a,"comment")},a)}
function pj(a,b,c,d,f){O(a.hd,l);var b=b||k,c=c||k,g=b?b.type:d,h=[],m=b?[Lg(X.a(),b.user)]:[],q=b?od(b.time+"Z"):k;c&&w(c,function(a){Qa(m,function(b){return b.id==a.user.id})||m.push(Lg(X.a(),a.user));var b=od((a.time||a.tune_in)+"Z");q=q&&q.getTime()>b.getTime()?q:b;"session"==g&&w(a.media,function(a){!this.ed[a.id]&&!Qa(h,function(b){return b.id==a.id})&&h.push(a)},this)},a);switch(g){case "session":var d=b?b.session:c[0],t=U.a().get(d.channel_id),h=b?b.session.media:h,b=H(ji,{ka:m,T:t,time:dd(q.getTime()),
Aj:!!d.tune_out});break;case "comment":var h=b?[b.comment.media]:[c[0].media],v=b?[new aj(b.comment)]:[];c&&w(c,function(a){v.push(new aj(a))});b=H(ki,{Db:v.reverse().slice(0,3),ka:m,media:h[0]});break;default:return}if(h.length){ed(cd.a(),q,E("timestamp",b));d=Sa(a.mh,function(a){return a.time<q.getTime()});$a(a.mh,d,0,{time:q,element:b});var A=E("medias",b);w(h,function(a){var b=new Rf(a),a=H(xi,{media:b}),c=E("list-play",a);E("thumb",a);A.appendChild(a);P(P(this.l(),a,"click",function(){Z.a().c(Dg,
b)}),c,"click",function(a){a.stopPropagation();a=Zf(b);W.a().c(Hf,a);Z.a().c(Dg,b)})},a);f?bc(a.Ad,b,0):c?bc(a.Ad,b,d):a.Ad.appendChild(b);L(za(y,b,"show"))}}nj.prototype.resize=function(){var a=F().height-40-(pc(this.b(),k,"tabbed")?40:10);Vd(this.b(),a);Q(this.Ad).height<a&&qj(this)};function rj(){S.call(this);this.ua=yf();this.Nj=new Yi;this.jb={};this.Ub=[];this.nd=[]}u(rj,S);n=rj.prototype;
n.w=function(){rj.e.w.call(this);this.Bd=E("arrow",this.Dc);this.Gf=D("sidebar-content");this.Hi=D("media-list");this.yg=D("profile");this.Dh=D("conversation");this.Dc=D("toolbar");this.Ha=E("tabs",this.b());var a=new Ze(document);w(dc(this.Ha),function(a){var b=Gb(a)[0];this.jb[b]=a;this.Ub.push(b)},this);this.mg();Y("/_activity",r(function(a){a=kg(a.target);this.Qg=new nj(a);this.Qg.g(D("stream"))},this));this.je=new mj(X.a().o);this.je.g(D("my-profile"));this.aa?(this.M=D("info"),this.G="info",
sj(this,"info","info")):(this.M=D("stream"),this.G="stream",sj(this,"info","stream"));var b="left";w(this.Ub,function(a){var c=E(a,this.Gf);a==this.G?b="right":y(c,b)},this);this.nd=[this.M,""];y(this.M,"current");if(this.ua){this.Nj.g(D("admin"));var c=H(mi,{name:"ADMIN",className:"admin"});this.Ha.appendChild(c);this.jb.admin=c;this.Ub.push("admin")}tj(this);P(P(P(P(this.l(),E("back-button",this.Dc),"click",r(function(a){var b=this.nd.shift();this.navigate(b[0],j,b[1]);tj(this);a.stopPropagation()},
this)),this.Ha,"click",r(function(a){var b=this.G,c=pc(a.target,"li"),h=Gb(c)[0];sj(this,this.G,h);y(c,"selected");tj(this);b!=this.G&&a.stopPropagation()},this)),this.Dc,"click",r(function(a){((a=pc(a.target,"li"))&&Gb(a)[0]==this.G||!a)&&(new Ce(this.M,[this.M.scrollLeft,this.M.scrollTop],[this.M.scrollLeft,0],300)).play()},this)),a,"key",r(function(a){a.ctrlKey&&"68"==a.keyCode&&Hb(this.b(),"dark")},this));DESKTOP&&N.a().subscribe(gd,function(a){C(this.b(),"toggled",a);L(r(function(){C(this.b(),
"collapsed",!a)},this),!a?500:0)},this);Z.a().subscribe("navigate",this.navigate,this);Z.a().subscribe("conversation",this.Nl,this);Z.a().subscribe("media-list",this.Ql,this);Z.a().subscribe(Dg,this.qj,this);Z.a().subscribe(Eg,this.Rl,this);U.a().subscribe(Ff,this.mg,this);W.a().subscribe(Hf,this.mg,this);U.a().subscribe(Df,this.Zk,this);DESKTOP&&N.a().subscribe("toggle-admin",function(a){C(this.b(),"admin",a);a?(N.a().c(gd,j),sj(this,this.G,"admin")):"admin"==this.G&&sj(this,"admin","info")},this)};
n.mg=function(a){if(a=a||U.a().m.h())if(this.fc=a.media,!this.aa||this.fc.id!=this.aa.q.id){var a=this.aa&&this.aa.j.I()?this.aa.j.I():k,b=this.aa?this.aa.f:k;Bc(this.aa);this.aa=new fj(this.fc,l,b,a);this.aa.g(D("info"))}};n.Zk=function(a){a=a||U.a().m;if((this.fc=a.h()&&a.h().media)&&(!this.aa||this.fc.id!=this.aa.q.id))Bc(this.aa),this.aa=new fj(this.fc),this.aa.g(D("info")),this.qj(this.fc)};
function sj(a,b,c){var d=E(c,a.Gf),f=Ma(a.Ub,b),b=Ma(a.Ub,c),g=(f=f<b)?0:a.Ub.length-1,h=f?g<a.Ub.length:0<=g;for(g;h;g+=f?1:-1){var m=E(a.Ub[g],a.Gf);if(f&&g>b||!f&&g<b)y(m,"right"),z(m,"left");else if(f&&g<b||!f&&g>b)C(m,"left",f),y(m,"right");else if(g==b){z(m,"right");z(m,"left");break}}a.G=c;$a(a.nd,0,0,[a.M,""]);z(a.M,"current");a.M=d;y(a.M,"current");tj(a)}
n.navigate=function(a,b,c){if(a!=this.M){var d=B(this.M,"screen");b?(z(this.M,"on"),z(this.M,"current"),y(a,"current"),this.M=a):(C(this.M,"on",!d),b=[this.M,mc(E("back-title",this.Dc))],$a(this.nd,0,0,b),z(this.M,"current"),this.M=a,y(this.M,"current"));C(this.Dc,"back",B(this.M,"slide"))}c&&ic(E("back-title",this.Dc),c)};n.Nl=function(a,b,c,d){(new dj(a,b,c,d)).g(this.Dh);Z.a().c("navigate",this.Dh,l,a.name)};
n.Ql=function(a,b,c,d,f,g,h){(new kj(b,c,d,f,g,h)).g(this.Hi);Z.a().c("navigate",this.Hi,l,a,d,f)};n.qj=function(a,b,c,d){if(this.aa&&a.id==this.aa.q.id){z(this.Dc,"back");for(a=this.nd[0][0];a&&B(a,"slide");)a=this.nd.shift();sj(this,this.G,"info")}else{var f=D("media-info");(new fj(a,b,c,d)).g(f);Z.a().c("navigate",f,l,a.name)}DESKTOP&&N.a().c(gd,j)};
n.Rl=function(a){if(!this.zg||!(this.zg.q.id==a.id&&this.M==this.yg))this.zg=new mj(a),this.zg.g(this.yg),Z.a().c("navigate",this.yg,l,a.name),DESKTOP&&N.a().c(gd,j)};function tj(a){var b=Math.round(Q(a.jb[a.G]).width/2+Od(a.jb[a.G]).x);a.Bd.style.transform="translate3d("+b+"px, 0,0)";a.Bd.style.msTransform="translate3d("+b+"px, 0,0)";a.Bd.style.WebkitTransform="translate3d("+b+"px, 0,0)";a.Bd.style.MozTransform="translate3d("+b+"px, 0,0)";a.Bd.style.rm="translate3d("+b+"px, 0,0)"};function uj(a){return'<div class="queue-media"><div class="pic"><img src="'+I(a.media.va.S)+'"></div><div class="title">'+I(a.media.name)+'</div><div class="play"></div><div class="remove"></div></div>'};function vj(){S.call(this);this.Nb={};this.qc=0;this.oe=new wf("Queue");of(this.oe,16,j)}u(vj,S);
vj.prototype.H=function(a){vj.e.H.call(this,a);this.oe.g(E("queue-toggle",this.b()));this.Ei=E("queue-list",this.b());this.rc=E("medias",this.b());P(P(this.l(),this.oe.b(),"click",r(function(a){a.preventDefault();a.stopPropagation();O(this.Ei,We(this.oe))},this)),this.Ei,"click",r(function(a){a.preventDefault();a.stopPropagation()},this));Jf().subscribe(hg,this.ac,this);Jf();var b=r(function(a){w(a,function(a){this.ac(a,j)},this)},this);Y("/_queue",function(a){a=kg(a.target);this.Dg=Oa(a,function(a){return Xf(Wf.a(),
a)},this);b&&b(this.Dg)})};
vj.prototype.ac=function(a,b){if(b){f=H(uj,{media:a});this.Nb[a.id]=f;this.qc+=1;var c=E("play",f),d=E("remove",f);this.rc.appendChild(f);P(P(P(this.l(),f,"click",r(function(b){b.preventDefault();b.stopPropagation();Z.a().c(Dg,a)},this)),c,"click",r(function(b){b.preventDefault();b.stopPropagation();b=Zf(a);W.a().c(Hf,b);Jf().c(hg,a,l)},this)),d,"click",r(function(b){b.preventDefault();b.stopPropagation();Jf().c(hg,a,l)},this))}else if(a.id in this.Nb&&this.Nb[a.id]){var f=this.Nb[a.id];cc(f);this.qc-=
1}C(this.rc,"no-medias",!this.qc);ic(this.oe.b().firstChild,0<this.qc?this.qc.toString():"")};function wj(a){return'<div class="main"><div id="stage" class="stage"><div id="ytplayer"></div><div id="stagecover"><div class="message"><span></span><div class="spinner" style="display:none"></div><div class="restart" style="display:none">TRY AGAIN</div></div><div class="fullscreen"></div><div class="expand"></div><div class="play" style="display: none"><div></div></div><div class="pause" style="display: none"><div></div></div></div><div class="vote" style="display:none"><div class="like"></div><div class="dislike"></div></div><div id="logo"></div><div id="notify" class="notify"></div><div id="queue" class="queue"><div class="queue-toggle"><span></span></div><div class="queue-list" style="display: none"><div class="label">QUEUE</div><div class="medias-container"><div class="medias no-medias"><div class="no-medias">CLICK <span class="plus"></span> TO ADD VIDEOS</div></div></div></div></div></div><div id="guide" class="guide'+
(a.Xh?" toggled":" collapsed")+(a.sidebar?" sidebar-toggled":"")+'"><div id="channels" class="channels"></div><div class="header" id="header"><div class="times"><div id="now-left" class="left browse">&#9664;<span> NOW</span></div><div id="now-right" class="right browse"><span>NOW </span>&#x25B6;</div></div></div><div id="my-ticker" class="my-ticker" style="display:none"><div class="me" style="background:'+I(a.i.color)+";border-color:"+I(a.i.color)+';"><img src="'+I(a.i.S)+'"/></div></div><div id="ticker" class="ticker"><div id="go-live" class="go-live">GO LIVE</div></div><div class="pan-handle" id="pan-handle"></div></div><div id="controller" class="controller'+
(a.Xh?" guide-toggled":" collapsed")+(a.sidebar?" sidebar-toggled":"")+'"><div class="background"></div><div class="left"><div id="guide-toggle" class="guide-toggle dark button">GUIDE</div><div class="controls"><div class="restart dark button"><div class="icon"></div></div><div class="play dark button"><div class="icon"></div></div><div class="volume dark button"><div class="icon"></div></div></div><div class="border"></div></div><div class="right"><div id="info-toggle" class="info-toggle dark button"><div class="icon"></div></div><div id="admin-toggle" class="admin-toggle dark button" style="display: none"><div class="icon"></div><div id="toggle-pending" class="pending" style="display:none"></div></div><div id="sidebar-toggle" class="sidebar-toggle dark button"><div class="icon"></div></div><div class="border"></div></div><div class="progress" style="display: none"><div class="elapsed animate"><div class="seek"></div></div><div class="title"></div><div class="current-time"></div><div class="duration"></div></div></div><div id="sidebar" class="'+
(a.sidebar?"toggled":"collapsed")+'"><div id="toolbar"><div class="back"><div class="back-button"><div>BACK</div></div><div class="back-title"></div></div><ul class="tabs"><li class="info tab selected"><div class="label">NOW</div></li><li class="stream tab"><div class="label">STREAM</div></li><li class="profile tab"><div class="label">ME</div></li></ul><div class="radial-grad"></div><div class="arrow"></div></div><div id="sidebar-content"><div id="info" class="screen info"><div class="no-info">Pick a channel or play a story.</div></div><div id="stream" class="screen stream"><div class="loading loading-activity"><div class="loading-spinner"></div></div></div><div id="my-profile" class="screen profile"></div><div id="admin" class="screen admin"></div><div id="media-list" class="slide media-list"></div><div id="conversation" class="slide"></div>'+
(a.tf?'<div id="admin-col-list" class="slide admin"></div><div id="admin-list" class="slide admin-list"></div>':"")+'<div id="media-info" class="slide info"></div><div id="profile" class="slide profile"></div></div></div><div id="hovercard" class="watch-with" style="display: none"></div><div id="welcome" class="welcome" style="display:none"><div class="thanks"></div><div class="guide"></div><div class="friends"></div><div class="sidebar"></div><div class="close"></div></div></div>'};function eg(){}la(eg);_gaq=[];eg.prototype.init=function(){_gaq.push(["_setAccount","UA-38058655-1"]);_gaq.push(["_trackPageview"]);var a=document.createElement("script");a.type="text/javascript";a.async=j;a.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)};eg.prototype.login=function(){_gaq.push(["_trackEvent","Users","Login",X.a().o.id])};
function lg(a,b){_gaq.push(["_trackEvent","Media","Play",b.id]);_gaq.push(["_trackEvent","Users","Play",X.a().o.id])}eg.prototype.cc=function(a,b){a.C||(_gaq.push(["_trackEvent","Channel","OptOut",b.id]),_gaq.push(["_trackEvent","Channel","OptIn",a.id]))};
eg.prototype.qb=function(a,b,c){_gaq.push(["_trackEvent","Media","Comment",a.id]);_gaq.push(["_trackEvent","Users","Comment",X.a().o.id]);b&&_gaq.push(["_trackEvent","Facebook","Comment",X.a().o.id]);c&&_gaq.push(["_trackEvent","Twitter","Comment",X.a().o.id])};
function jj(a,b,c,d){_gaq.push(["_trackEvent","Media","Share",b.id]);_gaq.push(["_trackEvent","Users","Share",X.a().o.id]);c&&_gaq.push(["_trackEvent","Facebook","Share",X.a().o.id]);d&&_gaq.push(["_trackEvent","Twitter","Share",X.a().o.id]);Y("/_share",se(),"POST","facebook="+c+"&twitter="+d)}ga("_gaq",_gaq);function xj(){M.call(this);this.Fi=l}u(xj,M);la(xj);xj.prototype.init=function(a){this.kb=a;a=(new appengine.Channel(unescape(a))).open();a.onmessage=r(this.fl,this);a.onclose=r(this.Qi,this);window.onbeforeunload=r(this.Qi,this);return this};
xj.prototype.fl=function(a){var b=Ig(a.data);switch(b.type){case "viewer_change":var c=Lg(X.a(),b.user),d=b.time&&od(b.time+"Z");c.De&&d&&c.De.end(d);if(a=b.last_channel_id&&U.a().get(b.last_channel_id))a.c("remove-viewer",c),c.Gd&&c.Gd.c(Uf,c,a,j);var f=b.channel_id&&U.a().get(b.channel_id),a=b.media&&Xf(Wf.a(),b.media);f&&(d=d||new pd,d=new dg(b.session_id,c,f,d),c.De=d,f.c(ig,d),a=(d=f.h())?d.media:a);a&&a.c(Uf,c,f);break;case "new_comment":c=new aj(b.comment);if(c.i.id!=X.a().o.id&&(d=b.tweet?
new bj(b.tweet):k,a=Xf(Wf.a(),b.comment.media)))a.c(Sf,c),d&&a.c("add-tweet",d);break;case "new_activity":X.a().c("new-activity",b.activity);break;case "update_programs":a=b.programs;f=U.a().get(b.channel_id);w(a,function(a){f.c(jg,a)},this);break;case "new_programs":w(b.programs,r(function(a){var a=new Yf(a),c=U.a().get(b.channel_id);if(c&&(c.c(gg,a),!U.a().m||!U.a().m.h()))U.a().c(Df,c),U.a().c(Ff,a)},this));break;case "twitter_auth":X.a().o.c(ag)}};
xj.prototype.Qi=function(){if(!this.Fi){var a=U.a().m.C&&U.a().m.Gd&&Math.floor(W.a().getCurrentTime());DESKTOP&&Y("/_settings",se(),"POST","show_guide="+N.a().oc+"&show_sidebar="+N.a().zc+(a?"&current_seek="+a:""));this.Fi=j}};function yj(){M.call(this);this.kn=[]}u(yj,M);la(yj);yj.prototype.eg=function(a){Lb(a,r(function(a,c){w(a,r(function(a){a=new Yf(a);U.a().Kc[c]&&U.a().Kc[c].Bb(a)},this))},this))};var zj=l;function Aj(a){a.match(/[\d]+/g).length=3}
if(navigator.plugins&&navigator.plugins.length){var Bj=navigator.plugins["Shockwave Flash"];Bj&&(zj=j,Bj.description&&Aj(Bj.description));navigator.plugins["Shockwave Flash 2.0"]&&(zj=j)}else if(navigator.mimeTypes&&navigator.mimeTypes.length){var Cj=navigator.mimeTypes["application/x-shockwave-flash"];(zj=Cj&&Cj.enabledPlugin)&&Aj(Cj.enabledPlugin.description)}else try{var Dj=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7"),zj=j;Aj(Dj.GetVariable("$version"))}catch(Ej){try{Dj=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6"),
zj=j}catch(Fj){try{Dj=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),zj=j,Aj(Dj.GetVariable("$version"))}catch(Gj){}}};function Hj(a,b,c,d,f,g,h,m){this.vd=a;this.Qj=b;this.Qc=c;this.Xb=d;this.dn=f;this.Xm=g;this.Ia=h;this.Aa=m;this.$l=[];this.Af=[];this.Lm=[];this.nn=[]}Hj.prototype.Vh=ca("Qj");Hj.prototype.oj=function(a){this.Xb=a;return this};Hj.prototype.Mg=function(a){this.v=a;return this};function Ij(a){this.vd=a;this.Ul=k}function Jj(a){this.vd=a;this.Ul=this.sn=k};function Kj(a,b,c){Hj.call(this,"http://www.youtube.com/watch?v="+encodeURIComponent(String(a)),b,c,"application/x-shockwave-flash");this.ih=a;this.$l=[new Ij("http://i.ytimg.com/vi/"+a+"/default.jpg")];this.Mg(new Jj("http://www.youtube.com/v/"+encodeURIComponent(String(a))+"&hl=en&fs=1&autoplay=1"))}u(Kj,Hj);
var Lj=RegExp("http://(?:[a-zA-Z]{2,3}\\.)?(?:youtube\\.com/watch)(?:\\?(?:[\\w=-]+&(?:amp;)?)*v=([\\w-]+)(?:&(?:amp;)?[\\w=-]+)*)?(?:#[!]?(?:(?:(?:[\\w=-]+&(?:amp;)?)*(?:v=([\\w-]+))(?:&(?:amp;)?[\\w=-]+)*)|(?:[\\w=&-]+)))?[^\\w-]?","i");function Hg(a){var b=Lj.exec(a);if(b)return new Kj(b[1]||b[2],i,i);e(Error("failed to parse video id from youtube url: "+a))};function Mj(a){S.call(this);this.km=IPAD||IPHONE?k:xj.a().init(a);this.Vj=new Ah;this.lk=new xf;this.Tl=new rj;this.v=new Lh;this.Xk=new Hh;this.Dg=new vj}u(Mj,S);Mj.prototype.H=function(a){Mj.e.H.call(this,a);var b=H(wj,{i:X.a().o,tf:yf(),Xh:X.a().o.Pl&&!U.a().m.C,sidebar:X.a().o.Sl});bc(a,b,0)};
Mj.prototype.w=function(){Mj.e.w.call(this);this.Vj.g(D("controller"));this.lk.g(D("guide"));this.Tl.g(D("sidebar"));this.v.g(D("stage"));this.Xk.g(D("notify"));this.Dg.g(D("queue"));this.jn=new di;if(!X.a().o.hm){X.a();var a=D("welcome");O(a,j);P(this.l(),a,"click",function(){O(a,l);Y("/_welcomed",se(),"POST")})}P(this.l(),document.body,"touchmove",function(a){pc(a.target,"div","ios-scroll")||a.preventDefault()});P(this.l(),window,"click",function(a){var c=pc(a.target,"a");if(c=c?c.href:k)if((c=
c.match("#(.*):(.*)"))&&c.length)switch(a.preventDefault(),a.stopPropagation(),c[1]){case "user":a=X.a().get(c[2]);Z.a().c(Eg,a);break;case "channel":a=U.a().get(c[2]);U.a().c(Df,a);break;case "info":a=Wf.a().get(c[2]),Z.a().c(Dg,a)}});N.a().subscribe("toggle-info",function(){var a=D("login"),c=D("static-content"),d=D("pages");z(a,"hide");y(a,"show");c.style.height=Q(d).height+80+"px";Nj(j)},this)};
function Nj(a){var b=D("login"),c=D("static-content"),d=D("pages"),f=B(b,"app");C(b,"expanded",a);D("uvTab")&&C(D("uvTab"),"show",f&&a);a?(f?c.style.bottom=-Q(d).height-80+"px":c.style.top=Math.max(10,F().height-280)+"px",a=f?Math.min(F().height-100,c.scrollHeight+80):Math.min(F().height-435,c.scrollHeight+190),!f||f&&!b.scrollTop?(f=new Ce(b,[b.scrollLeft,b.scrollTop],[b.scrollLeft,a],300),y(b,"scrolling"),f.play(),K(f,"end",function(){z(b,"scrolling")})):b.scrollTop=a):(c.style.top="",c.style.height=
"",f?L(function(){z(b,"show")},200):c.className="")}
function Oj(){var a=D("fb-login"),b=D("static-content"),c=D("login");y(a,"disabled");y(a,"spin");Y("/_session",function(a){if(200==zh(a.target)){var f=kg(a.target);if(f.error)ic(D("error"),f.error),Pj("error","Yikes...");else if(f.message)ic(D("message"),f.message);else{z(document.body,"login");L(function(){L(function(){y(c,"hide");L(function(){O(D("homepage"),l);y(c,"app");y(b,"faq")},600)},600)},300);var a=f.token,g=f.channels,h=f.programs,m=f.current_user,f=f.viewer_sessions;if(!Ob(m)){var q=X.a();
q.o=Lg(q,m)}U.a().eg(g);yj.a().eg(h);g=U.a();w(f,r(function(a){var b=Lg(X.a(),a.user),c=X.a();Qa(c.pg,function(a){return a.id==b.id})||c.pg.push(b);var c=this.Kc[a.channel_id],d=od(a.tune_in+"Z"),f=a.tune_out?od(a.tune_out+"Z"):k,a=new dg(a.id,b,c,d,f);b.De=a;c&&(c.Fc.push(a),c.c(ig,a),(a=c.h())&&a.media.c(Uf,b,c))},g));g=U.a();g.m=g.Kc[m.current_channel]||g.Lc[0];g.m=Kf(g)||g.m;g.m&&g.dh(g.m.h());cd.a().init();(new Mj(a)).g(document.body);eg.a().login();a=document.createElement("script");a.type=
"text/javascript";a.async=j;a.src=("https:"==document.location.protocol?"https://":"http://")+"widget.uservoice.com/WGHjF5nSR8jL1GxXyQNxWA.js";m=document.getElementsByTagName("script")[0];m.parentNode.insertBefore(a,m)}}else 500==zh(a.target)?Pj("error","Opps, check back later"):Pj("wait")},"POST")}function Pj(a,b){var c=D("fb-login");if(a){var d=E("power",c);y(d,a)}b&&(d=E("waitlist",c),ic(d,b));z(c,"spin");y(c,"disabled");O(c,j);y(c,"show");y(c,"waitlist")}
function Bh(a){var b=parseInt(a,10),a=Math.floor(b/3600),c=Math.floor((b-3600*a)/60),b=b-3600*a-60*c;10>c&&(c=(a?"0":"")+c);10>b&&(b="0"+b);return(a?a+":":"")+(c?c+":":"")+b}
ga("brkn.Main.staticInit",function(){var a=D("fb-login"),b=D("homepage"),c=D("login"),d=D("static-content"),f=D("pages"),g=D("footer"),h=l;y(b,"hide");var m=G("img");m.src="/static/img/homepage.jpg";K(m,"load",function(){z(b,"hide");y(b,"show")});L(function(){O(a,j);L(za(y,a,"show"),400)},100);K(c,"click",function(a){"static-scrollable"==a.target.id&&(a=B(c,"app"),h=l,a?Nj(h):(a=new Ce(c,[c.scrollLeft,c.scrollTop],[c.scrollLeft,0],300),a.play(),K(a,"end",za(Nj,h))))});K(c,"scroll",function(){!B(c,
"scrolling")&&1>c.scrollTop&&(h=l,Nj(h))});K(g,"click",function(a){var a=pc(a.target,k,"section"),b=B(c,"app");a&&(h=j,d.className=a.id,d.style.height=Q(f).height+(b?80:220)+"px",Nj(h))});K(window,"resize",za(Nj,h));eg.a().init();IPHONE&&(y(document.body,"iphone"),y(document.body,"login"),window.onload=function(){L(function(){window.scrollTo(0,1)},1E3)})});
ga("brkn.Main.auth",function(){FB.getLoginStatus(function(a){if("connected"===a.status)Oj();else{var b=D("fb-login");K(b,"click",function(){y(b,"disabled");FB.login(function(a){if(a.authResponse)Oj();else{z(b,"disabled");var d=D("chord-1"),f=D("chord-2"),g=D("chord-3"),h=D("chord-4"),m=D("mp3-1"),q=D("mp3-2"),t=D("mp3-3"),v=D("mp3-4");m.volume=0.5;q.volume=0.5;t.volume=0.5;v.volume=0.5;m.load();q.load();t.load();v.load();K(d,"click",function(){m.load();m.play()});K(f,"click",function(){q.load();q.play()});
K(g,"click",function(){t.load();t.play()});K(h,"click",function(){v.load();v.play()});L(function(){y(d,"strike");m.play()},500);L(function(){z(d,"strike");y(f,"strike");q.play()},800);L(function(){z(f,"strike");y(g,"strike");t.play()},1100);L(function(){z(g,"strike");y(h,"strike");v.play()},1400);L(function(){z(h,"strike");y(g,"strike");t.load();t.play()},1700);L(function(){z(g,"strike");y(f,"strike");q.load();q.play()},2E3);L(function(){z(f,"strike");y(d,"strike");m.load();m.play()},2300);L(function(){z(d,
"strike")},2600)}},{scope:"email"})})}})});