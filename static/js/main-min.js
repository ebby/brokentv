function f(a){throw a;}var i=void 0,j=!0,k=null,l=!1;function aa(){return function(){}}function ba(a){return function(b){this[a]=b}}function ca(a){return function(){return this[a]}}function da(a){return function(){return a}}var m,ea=ea||{},fa=this;function ga(a,b){var c=a.split("."),d=fa;!(c[0]in d)&&d.execScript&&d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&ha(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}
function ia(a){for(var a=a.split("."),b=fa,c;c=a.shift();)if(b[c]!=k)b=b[c];else return k;return b}function ja(){}function ka(a){a.a=function(){return a.Lj?a.Lj:a.Lj=new a}}
function la(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function ha(a){return a!==i}function ma(a){return"array"==la(a)}function oa(a){var b=la(a);return"array"==b||"object"==b&&"number"==typeof a.length}function pa(a){return"string"==typeof a}function qa(a){return"number"==typeof a}function ra(a){return"function"==la(a)}function sa(a){var b=typeof a;return"object"==b&&a!=k||"function"==b}function ta(a){return a[ua]||(a[ua]=++wa)}
var ua="closure_uid_"+Math.floor(2147483648*Math.random()).toString(36),wa=0;function ya(a,b,c){return a.call.apply(a.bind,arguments)}function za(a,b,c){a||f(Error());if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}
function n(a,b,c){n=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ya:za;return n.apply(k,arguments)}function Aa(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=Array.prototype.slice.call(arguments);b.unshift.apply(b,c);return a.apply(this,b)}}var r=Date.now||function(){return+new Date};function Ba(a,b){var c=b||{},d;for(d in c)var e=(""+c[d]).replace(/\$/g,"$$$$"),a=a.replace(RegExp("\\{\\$"+d+"\\}","gi"),e);return a}
function s(a,b){function c(){}c.prototype=b.prototype;a.e=b.prototype;a.prototype=new c;a.prototype.constructor=a};function Ca(a,b){for(var c=1;c<arguments.length;c++)var d=String(arguments[c]).replace(/\$/g,"$$$$"),a=a.replace(/\%s/,d);return a}function Da(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")}function Ea(a,b){var c=String(a).toLowerCase(),d=String(b).toLowerCase();return c<d?-1:c==d?0:1}
function Fa(a){if(!Ga.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(Ha,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(Ia,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(Ja,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(Ka,"&quot;"));return a}var Ha=/&/g,Ia=/</g,Ja=/>/g,Ka=/\"/g,Ga=/[&<>\"]/;function La(a){var a=ha(i)?a.toFixed(i):String(a),b=a.indexOf(".");-1==b&&(b=a.length);b=Math.max(0,2-b);return Array(b+1).join("0")+a}
function Ma(a){return String(a).replace(/\-([a-z])/g,function(a,c){return c.toUpperCase()})};var Na=Array.prototype,Oa=Na.indexOf?function(a,b,c){return Na.indexOf.call(a,b,c)}:function(a,b,c){c=c==k?0:0>c?Math.max(0,a.length+c):c;if(pa(a))return!pa(b)||1!=b.length?-1:a.indexOf(b,c);for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},t=Na.forEach?function(a,b,c){Na.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=pa(a)?a.split(""):a,g=0;g<d;g++)g in e&&b.call(c,e[g],g,a)};function Pa(a,b,c){for(var d=pa(a)?a.split(""):a,e=a.length-1;0<=e;--e)e in d&&b.call(c,d[e],e,a)}
var Qa=Na.filter?function(a,b,c){return Na.filter.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=[],g=0,h=pa(a)?a.split(""):a,p=0;p<d;p++)if(p in h){var q=h[p];b.call(c,q,p,a)&&(e[g++]=q)}return e},Ra=Na.map?function(a,b,c){return Na.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),g=pa(a)?a.split(""):a,h=0;h<d;h++)h in g&&(e[h]=b.call(c,g[h],h,a));return e},Sa=Na.every?function(a,b,c){return Na.every.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=pa(a)?a.split(""):a,g=0;g<d;g++)if(g in
e&&!b.call(c,e[g],g,a))return l;return j};function Ta(a,b,c){b=Ua(a,b,c);return 0>b?k:pa(a)?a.charAt(b):a[b]}function Ua(a,b,c){for(var d=a.length,e=pa(a)?a.split(""):a,g=0;g<d;g++)if(g in e&&b.call(c,e[g],g,a))return g;return-1}function Va(a,b){return 0<=Oa(a,b)}function Wa(a,b){var c=Oa(a,b);0<=c&&Na.splice.call(a,c,1)}function Xa(a,b,c){b=Ua(a,b,c);return 0<=b?(Na.splice.call(a,b,1),j):l}function Ya(a){return Na.concat.apply(Na,arguments)}
function Za(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]}function ab(a,b){for(var c=1;c<arguments.length;c++){var d=arguments[c],e;if(ma(d)||(e=oa(d))&&d.hasOwnProperty("callee"))a.push.apply(a,d);else if(e)for(var g=a.length,h=d.length,p=0;p<h;p++)a[g+p]=d[p];else a.push(d)}}function bb(a,b,c,d){Na.splice.apply(a,cb(arguments,1))}function cb(a,b,c){return 2>=arguments.length?Na.slice.call(a,b):Na.slice.call(a,b,c)}function db(a,b){return a>b?1:a<b?-1:0};var eb,fb,gb,ib,jb;function kb(){return fa.navigator?fa.navigator.userAgent:k}function lb(){return fa.navigator}ib=gb=fb=eb=l;var mb;if(mb=kb()){var nb=lb();eb=0==mb.indexOf("Opera");fb=!eb&&-1!=mb.indexOf("MSIE");gb=!eb&&-1!=mb.indexOf("WebKit");ib=!eb&&!gb&&"Gecko"==nb.product}var ob=eb,u=fb,pb=ib,qb=gb,rb=lb();jb=-1!=(rb&&rb.platform||"").indexOf("Mac");var sb=!!lb()&&-1!=(lb().appVersion||"").indexOf("X11"),tb;
a:{var ub="",vb;if(ob&&fa.opera)var wb=fa.opera.version,ub="function"==typeof wb?wb():wb;else if(pb?vb=/rv\:([^\);]+)(\)|;)/:u?vb=/MSIE\s+([^\);]+)(\)|;)/:qb&&(vb=/WebKit\/(\S+)/),vb)var xb=vb.exec(kb()),ub=xb?xb[1]:"";if(u){var yb,zb=fa.document;yb=zb?zb.documentMode:i;if(yb>parseFloat(ub)){tb=String(yb);break a}}tb=ub}var Ab={};
function Bb(a){var b;if(!(b=Ab[a])){b=0;for(var c=Da(String(tb)).split("."),d=Da(String(a)).split("."),e=Math.max(c.length,d.length),g=0;0==b&&g<e;g++){var h=c[g]||"",p=d[g]||"",q=RegExp("(\\d*)(\\D*)","g"),w=RegExp("(\\d*)(\\D*)","g");do{var G=q.exec(h)||["","",""],L=w.exec(p)||["","",""];if(0==G[0].length&&0==L[0].length)break;b=((0==G[1].length?0:parseInt(G[1],10))<(0==L[1].length?0:parseInt(L[1],10))?-1:(0==G[1].length?0:parseInt(G[1],10))>(0==L[1].length?0:parseInt(L[1],10))?1:0)||((0==G[2].length)<
(0==L[2].length)?-1:(0==G[2].length)>(0==L[2].length)?1:0)||(G[2]<L[2]?-1:G[2]>L[2]?1:0)}while(0==b)}b=Ab[a]=0<=b}return b}var Cb={};function Db(a){return Cb[a]||(Cb[a]=u&&!!document.documentMode&&document.documentMode>=a)};var Eb,Fb=!u||Db(9),Gb=!pb&&!u||u&&Db(9)||pb&&Bb("1.9.1"),Hb=u&&!Bb("9"),Ib=u||ob||qb;function Jb(a){a=a.className;return pa(a)&&a.match(/\S+/g)||[]}function v(a,b){for(var c=Jb(a),d=cb(arguments,1),e=c.length+d.length,g=c,h=0;h<d.length;h++)Va(g,d[h])||g.push(d[h]);a.className=c.join(" ");return c.length==e}function x(a,b){var c=Jb(a),d=cb(arguments,1),e,g=d;e=Qa(c,function(a){return!Va(g,a)});a.className=e.join(" ");return e.length==c.length-d.length}function y(a,b){return Va(Jb(a),b)}function z(a,b,c){c?v(a,b):x(a,b)}function Lb(a,b){var c=!y(a,b);z(a,b,c);return c};function Mb(a,b){this.x=ha(a)?a:0;this.y=ha(b)?b:0}Mb.prototype.clone=function(){return new Mb(this.x,this.y)};function Nb(a,b){return new Mb(a.x-b.x,a.y-b.y)};function Ob(a,b){this.width=a;this.height=b}Ob.prototype.clone=function(){return new Ob(this.width,this.height)};Ob.prototype.ceil=function(){this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};Ob.prototype.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};Ob.prototype.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};function Pb(a,b,c){for(var d in a)b.call(c,a[d],d,a)}function Qb(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function Rb(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}function Sb(a){for(var b in a)return l;return j}function Tb(a,b){b in a&&delete a[b]}function Ub(a,b,c){b in a&&f(Error('The object already contains the key "'+b+'"'));a[b]=c}function Vb(a,b,c){return b in a?a[b]:c}var Wb="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");
function Xb(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var g=0;g<Wb.length;g++)c=Wb[g],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};function Yb(a){return a?new Zb($b(a)):Eb||(Eb=new Zb)}function A(a){return pa(a)?document.getElementById(a):a}function ac(a,b){var c=b||document;return c.querySelectorAll&&c.querySelector?c.querySelectorAll("."+a):c.getElementsByClassName?c.getElementsByClassName(a):bc("*",a,b)}function B(a,b){var c=b||document,d=k;return(d=c.querySelectorAll&&c.querySelector?c.querySelector("."+a):ac(a,b)[0])||k}
function bc(a,b,c){var d=document,c=c||d,a=a&&"*"!=a?a.toUpperCase():"";if(c.querySelectorAll&&c.querySelector&&(a||b))return c.querySelectorAll(a+(b?"."+b:""));if(b&&c.getElementsByClassName){c=c.getElementsByClassName(b);if(a){for(var d={},e=0,g=0,h;h=c[g];g++)a==h.nodeName&&(d[e++]=h);d.length=e;return d}return c}c=c.getElementsByTagName(a||"*");if(b){d={};for(g=e=0;h=c[g];g++)a=h.className,"function"==typeof a.split&&Va(a.split(/\s+/),b)&&(d[e++]=h);d.length=e;return d}return c}
var cc={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function C(a){a=(a||window).document;a=dc(a)?a.documentElement:a.body;return new Ob(a.clientWidth,a.clientHeight)}function D(a,b,c){return ec(document,arguments)}
function ec(a,b){var c=b[0],d=b[1];if(!Fb&&d&&(d.name||d.type)){c=["<",c];d.name&&c.push(' name="',Fa(d.name),'"');if(d.type){c.push(' type="',Fa(d.type),'"');var e={};Xb(e,d);delete e.type;d=e}c.push(">");c=c.join("")}var g=a.createElement(c);d&&(pa(d)?g.className=d:ma(d)?v.apply(k,[g].concat(d)):Pb(d,function(a,b){"style"==b?g.style.cssText=a:"class"==b?g.className=a:"for"==b?g.htmlFor=a:b in cc?g.setAttribute(cc[b],a):0==b.lastIndexOf("aria-",0)||0==b.lastIndexOf("data-",0)?g.setAttribute(b,a):
g[b]=a}));if(2<b.length){d=function(b){b&&g.appendChild(pa(b)?a.createTextNode(b):b)};for(c=2;c<b.length;c++)if(e=b[c],oa(e)&&!(sa(e)&&0<e.nodeType)){var h=t,p;a:{if((p=e)&&"number"==typeof p.length){if(sa(p)){p="function"==typeof p.item||"string"==typeof p.item;break a}if(ra(p)){p="function"==typeof p.item;break a}}p=l}h(p?Za(e):e,d)}else d(e)}return g}function dc(a){return"CSS1Compat"==a.compatMode}function fc(a){for(var b;b=a.firstChild;)a.removeChild(b)}
function gc(a,b,c){a.insertBefore(b,a.childNodes[c]||k)}function hc(a){a&&a.parentNode&&a.parentNode.removeChild(a)}function ic(a){return Gb&&a.children!=i?a.children:Qa(a.childNodes,function(a){return 1==a.nodeType})}function jc(a){return a.nextElementSibling!=i?a.nextElementSibling:kc(a.nextSibling,j)}function kc(a,b){for(;a&&1!=a.nodeType;)a=b?a.nextSibling:a.previousSibling;return a}function lc(a){if(Ib)return a.parentElement;a=a.parentNode;return sa(a)&&1==a.nodeType?a:k}
function mc(a,b){if(a.contains&&1==b.nodeType)return a==b||a.contains(b);if("undefined"!=typeof a.compareDocumentPosition)return a==b||Boolean(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a}function $b(a){return 9==a.nodeType?a:a.ownerDocument||a.document}
function nc(a,b){if("textContent"in a)a.textContent=b;else if(a.firstChild&&3==a.firstChild.nodeType){for(;a.lastChild!=a.firstChild;)a.removeChild(a.lastChild);a.firstChild.data=b}else fc(a),a.appendChild($b(a).createTextNode(b))}var oc={SCRIPT:1,STYLE:1,HEAD:1,IFRAME:1,OBJECT:1},pc={IMG:" ",BR:"\n"};function qc(a){var b=a.getAttributeNode("tabindex");return b&&b.specified?(a=a.tabIndex,qa(a)&&0<=a&&32768>a):l}
function rc(a){if(Hb&&"innerText"in a)a=a.innerText.replace(/(\r\n|\r|\n)/g,"\n");else{var b=[];sc(a,b,j);a=b.join("")}a=a.replace(/ \xAD /g," ").replace(/\xAD/g,"");a=a.replace(/\u200B/g,"");Hb||(a=a.replace(/ +/g," "));" "!=a&&(a=a.replace(/^\s*/,""));return a}function tc(a){var b=[];sc(a,b,l);return b.join("")}
function sc(a,b,c){if(!(a.nodeName in oc))if(3==a.nodeType)c?b.push(String(a.nodeValue).replace(/(\r\n|\r|\n)/g,"")):b.push(a.nodeValue);else if(a.nodeName in pc)b.push(pc[a.nodeName]);else for(a=a.firstChild;a;)sc(a,b,c),a=a.nextSibling}function uc(a,b,c){if(!b&&!c)return k;b=b?b.toUpperCase():k;a:{for(var d=0;a;){if((!b||a.nodeName==b)&&(!c||y(a,c))){c=a;break a}a=a.parentNode;d++}c=k}return c}function vc(a,b){return uc(a,k,b)}function Zb(a){this.H=a||fa.document||document}m=Zb.prototype;m.gb=Yb;
m.b=function(a){return pa(a)?this.H.getElementById(a):a};m.Q=function(a,b,c){return ec(this.H,arguments)};m.createElement=function(a){return this.H.createElement(a)};m.createTextNode=function(a){return this.H.createTextNode(a)};function wc(a){return dc(a.H)}function xc(a){var b=a.H,a=!qb&&dc(b)?b.documentElement:b.body,b=b.parentWindow||b.defaultView;return new Mb(b.pageXOffset||a.scrollLeft,b.pageYOffset||a.scrollTop)}m.appendChild=function(a,b){a.appendChild(b)};m.rj=ic;
function yc(a,b){return b.firstElementChild!=i?b.firstElementChild:kc(b.firstChild,j)}m.contains=mc;u&&Bb(8);var zc={};function Ac(a,b,c){a.innerHTML=b(c||zc,i,i)}function E(a,b){var c;a:if(c=(new Zb(i)||Yb()).createElement("DIV"),c.innerHTML=a(b||zc,i,i),1==c.childNodes.length){var d=c.firstChild;if(1==d.nodeType){c=d;break a}}return c}function F(a){return"object"===typeof a&&a&&0===a.uo?a.content:String(a).replace(Bc,Cc)}
var Dc={"\x00":"&#0;",'"':"&quot;","&":"&amp;","'":"&#39;","<":"&lt;",">":"&gt;","\t":"&#9;","\n":"&#10;","\x0B":"&#11;","\f":"&#12;","\r":"&#13;"," ":"&#32;","-":"&#45;","/":"&#47;","=":"&#61;","`":"&#96;","\u0085":"&#133;","\u00a0":"&#160;","\u2028":"&#8232;","\u2029":"&#8233;"};function Cc(a){return Dc[a]}var Bc=/[\x00\x22\x26\x27\x3c\x3e]/g;function H(){0!=Ec&&(this.vo=Error().stack,Fc[ta(this)]=this)}var Ec=0,Fc={};H.prototype.vf=l;H.prototype.ea=function(){if(!this.vf&&(this.vf=j,this.p(),0!=Ec)){var a=ta(this);delete Fc[a]}};H.prototype.p=function(){this.pl&&Gc.apply(k,this.pl);if(this.mk)for(;this.mk.length;)this.mk.shift()()};function Hc(a){a&&"function"==typeof a.ea&&a.ea()}function Gc(a){for(var b=0,c=arguments.length;b<c;++b){var d=arguments[b];oa(d)?Gc.apply(k,d):Hc(d)}};var Ic=!u||Db(9),Jc=!u||Db(9),Kc=u&&!Bb("9");!qb||Bb("528");pb&&Bb("1.9b")||u&&Bb("8")||ob&&Bb("9.5")||qb&&Bb("528");pb&&!Bb("8")||u&&Bb("9");function Lc(a,b){this.type=a;this.currentTarget=this.target=b}m=Lc.prototype;m.p=aa();m.ea=aa();m.cd=l;m.defaultPrevented=l;m.gg=j;m.stopPropagation=function(){this.cd=j};m.preventDefault=function(){this.defaultPrevented=j;this.gg=l};function Mc(a){a.preventDefault()};function Nc(a){Nc[" "](a);return a}Nc[" "]=ja;function Oc(a,b){a&&this.init(a,b)}s(Oc,Lc);var Pc=[1,4,2];m=Oc.prototype;m.target=k;m.relatedTarget=k;m.offsetX=0;m.offsetY=0;m.clientX=0;m.clientY=0;m.screenX=0;m.screenY=0;m.button=0;m.keyCode=0;m.charCode=0;m.ctrlKey=l;m.altKey=l;m.shiftKey=l;m.metaKey=l;m.Mh=l;m.la=k;
m.init=function(a,b){var c=this.type=a.type;Lc.call(this,c);this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;if(d){if(pb){var e;a:{try{Nc(d.nodeName);e=j;break a}catch(g){}e=l}e||(d=k)}}else"mouseover"==c?d=a.fromElement:"mouseout"==c&&(d=a.toElement);this.relatedTarget=d;this.offsetX=qb||a.offsetX!==i?a.offsetX:a.layerX;this.offsetY=qb||a.offsetY!==i?a.offsetY:a.layerY;this.clientX=a.clientX!==i?a.clientX:a.pageX;this.clientY=a.clientY!==i?a.clientY:a.pageY;this.screenX=
a.screenX||0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||("keypress"==c?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.Mh=jb?a.metaKey:a.ctrlKey;this.state=a.state;this.la=a;a.defaultPrevented&&this.preventDefault();delete this.cd};function Qc(a){return(Ic?0==a.la.button:"click"==a.type?j:!!(a.la.button&Pc[0]))&&!(qb&&jb&&a.ctrlKey)}
m.stopPropagation=function(){Oc.e.stopPropagation.call(this);this.la.stopPropagation?this.la.stopPropagation():this.la.cancelBubble=j};m.preventDefault=function(){Oc.e.preventDefault.call(this);var a=this.la;if(a.preventDefault)a.preventDefault();else if(a.returnValue=l,Kc)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};m.Dl=ca("la");m.p=aa();function Rc(){}var Sc=0;m=Rc.prototype;m.key=0;m.dd=l;m.Cg=l;m.init=function(a,b,c,d,e,g){ra(a)?this.Nj=j:a&&a.handleEvent&&ra(a.handleEvent)?this.Nj=l:f(Error("Invalid listener argument"));this.Gd=a;this.proxy=b;this.src=c;this.type=d;this.capture=!!e;this.Gf=g;this.Cg=l;this.key=++Sc;this.dd=l};m.handleEvent=function(a){return this.Nj?this.Gd.call(this.Gf||this.src,a):this.Gd.handleEvent.call(this.Gd,a)};var Tc={},Uc={},Vc={},Wc={};
function I(a,b,c,d,e){if(b){if(ma(b)){for(var g=0;g<b.length;g++)I(a,b[g],c,d,e);return k}var d=!!d,h=Uc;b in h||(h[b]={ba:0,Va:0});h=h[b];d in h||(h[d]={ba:0,Va:0},h.ba++);var h=h[d],p=ta(a),q;h.Va++;if(h[p]){q=h[p];for(g=0;g<q.length;g++)if(h=q[g],h.Gd==c&&h.Gf==e){if(h.dd)break;return q[g].key}}else q=h[p]=[],h.ba++;var w=Xc,G=Jc?function(a){return w.call(G.src,G.key,a)}:function(a){a=w.call(G.src,G.key,a);if(!a)return a},g=G;g.src=a;h=new Rc;h.init(c,g,a,b,d,e);c=h.key;g.key=c;q.push(h);Tc[c]=
h;Vc[p]||(Vc[p]=[]);Vc[p].push(h);a.addEventListener?(a==fa||!a.$i)&&a.addEventListener(b,g,d):a.attachEvent(b in Wc?Wc[b]:Wc[b]="on"+b,g);return c}f(Error("Invalid event type"))}function Yc(a,b,c,d,e){if(ma(b))for(var g=0;g<b.length;g++)Yc(a,b[g],c,d,e);else a=I(a,b,c,d,e),Tc[a].Cg=j}function Zc(a,b,c,d,e){if(ma(b))for(var g=0;g<b.length;g++)Zc(a,b[g],c,d,e);else if(d=!!d,a=$c(a,b,d))for(g=0;g<a.length;g++)if(a[g].Gd==c&&a[g].capture==d&&a[g].Gf==e){ad(a[g].key);break}}
function ad(a){if(!Tc[a])return l;var b=Tc[a];if(b.dd)return l;var c=b.src,d=b.type,e=b.proxy,g=b.capture;c.removeEventListener?(c==fa||!c.$i)&&c.removeEventListener(d,e,g):c.detachEvent&&c.detachEvent(d in Wc?Wc[d]:Wc[d]="on"+d,e);c=ta(c);Vc[c]&&(e=Vc[c],Wa(e,b),0==e.length&&delete Vc[c]);b.dd=j;if(b=Uc[d][g][c])b.hk=j,bd(d,g,c,b);delete Tc[a];return j}
function bd(a,b,c,d){if(!d.Pf&&d.hk){for(var e=0,g=0;e<d.length;e++)d[e].dd?d[e].proxy.src=k:(e!=g&&(d[g]=d[e]),g++);d.length=g;d.hk=l;0==g&&(delete Uc[a][b][c],Uc[a][b].ba--,0==Uc[a][b].ba&&(delete Uc[a][b],Uc[a].ba--),0==Uc[a].ba&&delete Uc[a])}}function $c(a,b,c){var d=Uc;return b in d&&(d=d[b],c in d&&(d=d[c],a=ta(a),d[a]))?d[a]:k}
function cd(a,b,c,d,e){var g=1,b=ta(b);if(a[b]){a.Va--;a=a[b];a.Pf?a.Pf++:a.Pf=1;try{for(var h=a.length,p=0;p<h;p++){var q=a[p];q&&!q.dd&&(g&=dd(q,e)!==l)}}finally{a.Pf--,bd(c,d,b,a)}}return Boolean(g)}function dd(a,b){a.Cg&&ad(a.key);return a.handleEvent(b)}
function Xc(a,b){if(!Tc[a])return j;var c=Tc[a],d=c.type,e=Uc;if(!(d in e))return j;var e=e[d],g,h;if(!Jc){g=b||ia("window.event");var p=j in e,q=l in e;if(p){if(0>g.keyCode||g.returnValue!=i)return j;a:{var w=l;if(0==g.keyCode)try{g.keyCode=-1;break a}catch(G){w=j}if(w||g.returnValue==i)g.returnValue=j}}w=new Oc;w.init(g,this);g=j;try{if(p){for(var L=[],Z=w.currentTarget;Z;Z=Z.parentNode)L.push(Z);h=e[j];h.Va=h.ba;for(var S=L.length-1;!w.cd&&0<=S&&h.Va;S--)w.currentTarget=L[S],g&=cd(h,L[S],d,j,w);
if(q){h=e[l];h.Va=h.ba;for(S=0;!w.cd&&S<L.length&&h.Va;S++)w.currentTarget=L[S],g&=cd(h,L[S],d,l,w)}}else g=dd(c,w)}finally{L&&(L.length=0)}return g}d=new Oc(b,this);return g=dd(c,d)};function ed(){H.call(this)}s(ed,H);m=ed.prototype;m.$i=j;m.Zf=k;m.ci=ba("Zf");m.addEventListener=function(a,b,c,d){I(this,a,b,c,d)};m.removeEventListener=function(a,b,c,d){Zc(this,a,b,c,d)};
m.dispatchEvent=function(a){var b=a.type||a,c=Uc;if(b in c){if(pa(a))a=new Lc(a,this);else if(a instanceof Lc)a.target=a.target||this;else{var d=a,a=new Lc(b,this);Xb(a,d)}var d=1,e,c=c[b],b=j in c,g;if(b){e=[];for(g=this;g;g=g.Zf)e.push(g);g=c[j];g.Va=g.ba;for(var h=e.length-1;!a.cd&&0<=h&&g.Va;h--)a.currentTarget=e[h],d&=cd(g,e[h],a.type,j,a)&&a.gg!=l}if(l in c)if(g=c[l],g.Va=g.ba,b)for(h=0;!a.cd&&h<e.length&&g.Va;h++)a.currentTarget=e[h],d&=cd(g,e[h],a.type,l,a)&&a.gg!=l;else for(e=this;!a.cd&&
e&&g.Va;e=e.Zf)a.currentTarget=e,d&=cd(g,e,a.type,l,a)&&a.gg!=l;a=Boolean(d)}else a=j;return a};m.p=function(){ed.e.p.call(this);var a,b=0,c=a==k;a=!!a;if(this==k)Pb(Vc,function(d){for(var e=d.length-1;0<=e;e--){var g=d[e];if(c||a==g.capture)ad(g.key),b++}});else{var d=ta(this);if(Vc[d])for(var d=Vc[d],e=d.length-1;0<=e;e--){var g=d[e];if(c||a==g.capture)ad(g.key),b++}}this.Zf=k};function fd(a,b){H.call(this);this.W=a||1;this.Xe=b||gd;this.Bg=n(this.pi,this);this.rh=r()}s(fd,ed);fd.prototype.enabled=l;var gd=fa.window;m=fd.prototype;m.za=k;m.pi=function(){if(this.enabled){var a=r()-this.rh;0<a&&a<0.8*this.W?this.za=this.Xe.setTimeout(this.Bg,this.W-a):(this.dispatchEvent(hd),this.enabled&&(this.za=this.Xe.setTimeout(this.Bg,this.W),this.rh=r()))}};m.start=function(){this.enabled=j;this.za||(this.za=this.Xe.setTimeout(this.Bg,this.W),this.rh=r())};
m.stop=function(){this.enabled=l;this.za&&(this.Xe.clearTimeout(this.za),this.za=k)};m.p=function(){fd.e.p.call(this);this.stop();delete this.Xe};var hd="tick";function J(a,b,c){ra(a)?c&&(a=n(a,c)):a&&"function"==typeof a.handleEvent?a=n(a.handleEvent,a):f(Error("Invalid listener argument"));return 2147483647<b?-1:gd.setTimeout(a,b||0)};function K(){H.call(this);this.ob=[];this.zc={}}s(K,H);m=K.prototype;m.Sj=1;m.bg=0;m.subscribe=function(a,b,c){var d=this.zc[a];d||(d=this.zc[a]=[]);var e=this.Sj;this.ob[e]=a;this.ob[e+1]=b;this.ob[e+2]=c;this.Sj=e+3;d.push(e);return e};m.al=function(a){if(0!=this.bg)return this.He||(this.He=[]),this.He.push(a),l;var b=this.ob[a];if(b){var c=this.zc[b];c&&Wa(c,a);delete this.ob[a];delete this.ob[a+1];delete this.ob[a+2]}return!!b};
m.c=function(a,b){var c=this.zc[a];if(c){this.bg++;for(var d=cb(arguments,1),e=0,g=c.length;e<g;e++){var h=c[e];this.ob[h+1].apply(this.ob[h+2],d)}this.bg--;if(this.He&&0==this.bg)for(;c=this.He.pop();)this.al(c)}};m.clear=function(a){if(a){var b=this.zc[a];b&&(t(b,this.al,this),delete this.zc[a])}else this.ob.length=0,this.zc={}};m.p=function(){K.e.p.call(this);delete this.ob;delete this.zc;delete this.He};function id(){K.call(this);this.ge=new fd(1E3);this.Uk=new fd(3E4);this.Vk=[];this.Ug=[]}s(id,K);ka(id);id.prototype.init=function(){this.ge.start();this.Uk.start();I(this.ge,hd,n(function(){t(this.Ug,function(a,b){a.time<r()&&(a.callback(),Na.splice.call(this.Ug,b,1))},this)},this));I(this.Uk,hd,n(function(){t(this.Vk,function(a){nc(a.element,jd(a.time.getTime()))},this)},this))};function kd(a,b,c){86400>(r()-b.getTime())/1E3&&a.Vk.push({time:b,element:c})}
function ld(a,b,c){86400>(r()-b)/1E3&&a.Ug.push({time:b,callback:c})};function M(){K.call(this);this.Vm=j;var a=A("controller");this.hd=!a||y(a,"sidebar-toggled");this.Tc=a&&y(a,"guide-toggled");a=A("guide");this.Za=!!a&&y(a,"timeless");this.subscribe(md,ba("hd"),this);this.subscribe(nd,ba("Tc"),this);this.subscribe(od,ba("Vm"),this)}s(M,K);ka(M);function pd(a,b){var c=A("toggle-pending");nc(c,b);N(c,!!b)}var od="play",nd="toggle-guide",md="toggle-sidebar";var qd={Wn:["BC","AD"],Vn:["Before Christ","Anno Domini"],Yn:"JFMAMJJASOND".split(""),ho:"JFMAMJJASOND".split(""),Xn:"January February March April May June July August September October November December".split(" "),fo:"January February March April May June July August September October November December".split(" "),bo:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),jo:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),no:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),
lo:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),eo:"Sun Mon Tue Wed Thu Fri Sat".split(" "),ko:"Sun Mon Tue Wed Thu Fri Sat".split(" "),Zn:"SMTWTFS".split(""),io:"SMTWTFS".split(""),co:["Q1","Q2","Q3","Q4"],ao:["1st quarter","2nd quarter","3rd quarter","4th quarter"],Tn:["AM","PM"],Un:["EEEE, MMMM d, y","MMMM d, y","MMM d, y","M/d/yy"],mo:["h:mm:ss a zzzz","h:mm:ss a z","h:mm:ss a","h:mm a"],gl:6,oo:[5,6],hl:5};var rd=/^(\d{4})(?:(?:-?(\d{2})(?:-?(\d{2}))?)|(?:-?(\d{3}))|(?:-?W(\d{2})(?:-?([1-7]))?))?$/,sd=/^(\d{2})(?::?(\d{2})(?::?(\d{2})(\.\d+)?)?)?$/,td=/Z|(?:([-+])(\d{2})(?::?(\d{2}))?)$/;
function ud(a){var b=new vd(2E3),a=Da(a),a=a.split(-1==a.indexOf("T")?" ":"T"),c;var d=a[0].match(rd);if(d){var e=Number(d[2]),g=Number(d[3]),h=Number(d[4]);c=Number(d[5]);var p=Number(d[6])||1;b.setFullYear(Number(d[1]));h?(b.setDate(1),b.setMonth(0),b.add(new wd(xd,h-1))):c?(b.setMonth(0),b.setDate(1),d=b.getDay()||7,b.add(new wd(xd,(4>=d?1-d:8-d)+(Number(p)+7*(Number(c)-1))-1))):(e&&(b.setDate(1),b.setMonth(e-1)),g&&b.setDate(g));c=j}else c=l;if(c&&!(c=2>a.length))a=a[1],c=a.match(td),p=0,c&&("Z"!=
c[0]&&(p=60*c[2]+Number(c[3]),p*="-"==c[1]?1:-1),p-=b.getTimezoneOffset(),a=a.substr(0,a.length-c[0].length)),(c=a.match(sd))?(b.setHours(Number(c[1])),b.setMinutes(Number(c[2])||0),b.setSeconds(Number(c[3])||0),b.setMilliseconds(c[4]?1E3*c[4]:0),0!=p&&b.setTime(b.getTime()+6E4*p),c=j):c=l;return c?b:k}
function wd(a,b,c,d,e,g){pa(a)?(this.qb=a==yd?b:0,this.jb=a==zd?b:0,this.eb=a==xd?b:0,this.Qa=a==Ad?b:0,this.Sa=a==Bd?b:0,this.Xa=a==Cd?b:0):(this.qb=a||0,this.jb=b||0,this.eb=c||0,this.Qa=d||0,this.Sa=e||0,this.Xa=g||0)}
wd.prototype.Ye=function(a){var b=Math.min(this.qb,this.jb,this.eb,this.Qa,this.Sa,this.Xa),c=Math.max(this.qb,this.jb,this.eb,this.Qa,this.Sa,this.Xa);if(0>b&&0<c)return k;if(!a&&0==b&&0==c)return"PT0S";c=[];0>b&&c.push("-");c.push("P");(this.qb||a)&&c.push(Math.abs(this.qb)+"Y");(this.jb||a)&&c.push(Math.abs(this.jb)+"M");(this.eb||a)&&c.push(Math.abs(this.eb)+"D");if(this.Qa||this.Sa||this.Xa||a)c.push("T"),(this.Qa||a)&&c.push(Math.abs(this.Qa)+"H"),(this.Sa||a)&&c.push(Math.abs(this.Sa)+"M"),
(this.Xa||a)&&c.push(Math.abs(this.Xa)+"S");return c.join("")};wd.prototype.clone=function(){return new wd(this.qb,this.jb,this.eb,this.Qa,this.Sa,this.Xa)};var yd="y",zd="m",xd="d",Ad="h",Bd="n",Cd="s";wd.prototype.add=function(a){this.qb+=a.qb;this.jb+=a.jb;this.eb+=a.eb;this.Qa+=a.Qa;this.Sa+=a.Sa;this.Xa+=a.Xa};
function Dd(a,b,c){qa(a)?(this.t=new Date(a,b||0,c||1),Ed(this,c||1)):sa(a)?(this.t=new Date(a.getFullYear(),a.getMonth(),a.getDate()),Ed(this,a.getDate())):(this.t=new Date(r()),this.t.setHours(0),this.t.setMinutes(0),this.t.setSeconds(0),this.t.setMilliseconds(0))}m=Dd.prototype;m.Af=qd.gl;m.Bf=qd.hl;m.clone=function(){var a=new Dd(this.t);a.Af=this.Af;a.Bf=this.Bf;return a};m.getFullYear=function(){return this.t.getFullYear()};m.getYear=function(){return this.getFullYear()};m.getMonth=function(){return this.t.getMonth()};
m.getDate=function(){return this.t.getDate()};m.getTime=function(){return this.t.getTime()};m.getDay=function(){return this.t.getDay()};m.getUTCHours=function(){return this.t.getUTCHours()};m.getTimezoneOffset=function(){return this.t.getTimezoneOffset()};function Fd(a){a=a.getTimezoneOffset();if(0==a)a="Z";else var b=Math.abs(a)/60,c=Math.floor(b),b=60*(b-c),a=(0<a?"-":"+")+La(c)+":"+La(b);return a}m.set=function(a){this.t=new Date(a.getFullYear(),a.getMonth(),a.getDate())};m.setFullYear=function(a){this.t.setFullYear(a)};
m.setMonth=function(a){this.t.setMonth(a)};m.setDate=function(a){this.t.setDate(a)};m.setTime=function(a){this.t.setTime(a)};
m.add=function(a){if(a.qb||a.jb){var b=this.getMonth()+a.jb+12*a.qb,c=this.getYear()+Math.floor(b/12),b=b%12;0>b&&(b+=12);var d;a:{switch(b){case 1:d=0==c%4&&(0!=c%100||0==c%400)?29:28;break a;case 5:case 8:case 10:case 3:d=30;break a}d=31}d=Math.min(d,this.getDate());this.setDate(1);this.setFullYear(c);this.setMonth(b);this.setDate(d)}a.eb&&(a=new Date((new Date(this.getYear(),this.getMonth(),this.getDate(),12)).getTime()+864E5*a.eb),this.setDate(1),this.setFullYear(a.getFullYear()),this.setMonth(a.getMonth()),
this.setDate(a.getDate()),Ed(this,a.getDate()))};m.Ye=function(a,b){return[this.getFullYear(),La(this.getMonth()+1),La(this.getDate())].join(a?"-":"")+(b?Fd(this):"")};m.toString=function(){return this.Ye()};function Ed(a,b){a.getDate()!=b&&a.t.setUTCHours(a.t.getUTCHours()+(a.getDate()<b?1:-1))}m.valueOf=function(){return this.t.valueOf()};function vd(a,b,c,d,e,g,h){this.t=qa(a)?new Date(a,b||0,c||1,d||0,e||0,g||0,h||0):new Date(a?a.getTime():r())}s(vd,Dd);m=vd.prototype;m.getHours=function(){return this.t.getHours()};
m.getMinutes=function(){return this.t.getMinutes()};m.getSeconds=function(){return this.t.getSeconds()};m.getUTCHours=function(){return this.t.getUTCHours()};m.setHours=function(a){this.t.setHours(a)};m.setMinutes=function(a){this.t.setMinutes(a)};m.setSeconds=function(a){this.t.setSeconds(a)};m.setMilliseconds=function(a){this.t.setMilliseconds(a)};m.setUTCHours=function(a){this.t.setUTCHours(a)};
m.add=function(a){Dd.prototype.add.call(this,a);a.Qa&&this.setHours(this.t.getHours()+a.Qa);a.Sa&&this.setMinutes(this.t.getMinutes()+a.Sa);a.Xa&&this.setSeconds(this.t.getSeconds()+a.Xa)};m.Ye=function(a,b){var c=Dd.prototype.Ye.call(this,a);return a?c+" "+La(this.getHours())+":"+La(this.getMinutes())+":"+La(this.getSeconds())+(b?Fd(this):""):c+"T"+La(this.getHours())+La(this.getMinutes())+La(this.getSeconds())+(b?Fd(this):"")};m.toString=function(){return this.Ye()};
m.clone=function(){var a=new vd(this.t);a.Af=this.Af;a.Bf=this.Bf;return a};function Gd(a){H.call(this);this.S=a;this.$=[]}s(Gd,H);var Hd=[];function O(a,b,c,d,e){ma(c)||(Hd[0]=c,c=Hd);for(var g=0;g<c.length;g++){var h=I(b,c[g],d||a,e||l,a.S||a);a.$.push(h)}return a}function Id(a,b,c,d,e,g){if(ma(c))for(var h=0;h<c.length;h++)Id(a,b,c[h],d,e,g);else{a:{d=d||a;g=g||a.S||a;e=!!e;if(b=$c(b,c,e))for(c=0;c<b.length;c++)if(!b[c].dd&&b[c].Gd==d&&b[c].capture==e&&b[c].Gf==g){b=b[c];break a}b=k}b&&(b=b.key,ad(b),Wa(a.$,b))}return a}function Jd(a){t(a.$,ad);a.$.length=0}
Gd.prototype.p=function(){Gd.e.p.call(this);Jd(this)};Gd.prototype.handleEvent=function(){f(Error("EventHandler.handleEvent not implemented"))};function Kd(a,b,c,d){this.top=a;this.right=b;this.bottom=c;this.left=d}Kd.prototype.clone=function(){return new Kd(this.top,this.right,this.bottom,this.left)};Kd.prototype.contains=function(a){return!this||!a?l:a instanceof Kd?a.left>=this.left&&a.right<=this.right&&a.top>=this.top&&a.bottom<=this.bottom:a.x>=this.left&&a.x<=this.right&&a.y>=this.top&&a.y<=this.bottom};function Ld(a,b,c,d){this.left=a;this.top=b;this.width=c;this.height=d}Ld.prototype.clone=function(){return new Ld(this.left,this.top,this.width,this.height)};Ld.prototype.contains=function(a){return a instanceof Ld?this.left<=a.left&&this.left+this.width>=a.left+a.width&&this.top<=a.top&&this.top+this.height>=a.top+a.height:a.x>=this.left&&a.x<=this.left+this.width&&a.y>=this.top&&a.y<=this.top+this.height};function Md(a,b,c){pa(b)?Nd(a,c,b):Pb(b,Aa(Nd,a))}function Nd(a,b,c){a.style[Ma(c)]=b}function Od(a,b){var c=$b(a);return c.defaultView&&c.defaultView.getComputedStyle&&(c=c.defaultView.getComputedStyle(a,k))?c[b]||c.getPropertyValue(b)||"":""}function Pd(a,b){return a.currentStyle?a.currentStyle[b]:k}function Qd(a,b){return Od(a,b)||Pd(a,b)||a.style&&a.style[b]}function Rd(a,b,c){var d,e=pb&&(jb||sb)&&Bb("1.9");b instanceof Mb?(d=b.x,b=b.y):(d=b,b=c);a.style.left=Sd(d,e);a.style.top=Sd(b,e)}
function Td(a){return new Mb(a.offsetLeft,a.offsetTop)}function Ud(a){var b=a.getBoundingClientRect();u&&(a=a.ownerDocument,b.left-=a.documentElement.clientLeft+a.body.clientLeft,b.top-=a.documentElement.clientTop+a.body.clientTop);return b}
function Vd(a){if(u&&!Db(8))return a.offsetParent;for(var b=$b(a),c=Qd(a,"position"),d="fixed"==c||"absolute"==c,a=a.parentNode;a&&a!=b;a=a.parentNode)if(c=Qd(a,"position"),d=d&&"static"==c&&a!=b.documentElement&&a!=b.body,!d&&(a.scrollWidth>a.clientWidth||a.scrollHeight>a.clientHeight||"fixed"==c||"absolute"==c||"relative"==c))return a;return k}
function Wd(a){for(var b=new Kd(0,Infinity,Infinity,0),c=Yb(a),d=c.H.body,e=c.H.documentElement,g=!qb&&dc(c.H)?c.H.documentElement:c.H.body;a=Vd(a);)if((!u||0!=a.clientWidth)&&(!qb||0!=a.clientHeight||a!=d)&&a!=d&&a!=e&&"visible"!=Qd(a,"overflow")){var h=Xd(a),p;p=a;if(pb&&!Bb("1.9")){var q=parseFloat(Od(p,"borderLeftWidth"));if(Yd(p))var w=p.offsetWidth-p.clientWidth-q-parseFloat(Od(p,"borderRightWidth")),q=q+w;p=new Mb(q,parseFloat(Od(p,"borderTopWidth")))}else p=new Mb(p.clientLeft,p.clientTop);
h.x+=p.x;h.y+=p.y;b.top=Math.max(b.top,h.y);b.right=Math.min(b.right,h.x+a.clientWidth);b.bottom=Math.min(b.bottom,h.y+a.clientHeight);b.left=Math.max(b.left,h.x)}d=g.scrollLeft;g=g.scrollTop;b.left=Math.max(b.left,d);b.top=Math.max(b.top,g);c=C(c.H.parentWindow||c.H.defaultView);b.right=Math.min(b.right,d+c.width);b.bottom=Math.min(b.bottom,g+c.height);return 0<=b.top&&0<=b.left&&b.bottom>b.top&&b.right>b.left?b:k}
function Xd(a){var b,c=$b(a),d=Qd(a,"position"),e=pb&&c.getBoxObjectFor&&!a.getBoundingClientRect&&"absolute"==d&&(b=c.getBoxObjectFor(a))&&(0>b.screenX||0>b.screenY),g=new Mb(0,0),h;b=c?$b(c):document;h=u&&!Db(9)&&!wc(Yb(b))?b.body:b.documentElement;if(a==h)return g;if(a.getBoundingClientRect)b=Ud(a),a=xc(Yb(c)),g.x=b.left+a.x,g.y=b.top+a.y;else if(c.getBoxObjectFor&&!e)b=c.getBoxObjectFor(a),a=c.getBoxObjectFor(h),g.x=b.screenX-a.screenX,g.y=b.screenY-a.screenY;else{b=a;do{g.x+=b.offsetLeft;g.y+=
b.offsetTop;b!=a&&(g.x+=b.clientLeft||0,g.y+=b.clientTop||0);if(qb&&"fixed"==Qd(b,"position")){g.x+=c.body.scrollLeft;g.y+=c.body.scrollTop;break}b=b.offsetParent}while(b&&b!=a);if(ob||qb&&"absolute"==d)g.y-=c.body.offsetTop;for(b=a;(b=Vd(b))&&b!=c.body&&b!=h;)if(g.x-=b.scrollLeft,!ob||"TR"!=b.tagName)g.y-=b.scrollTop}return g}function Zd(a,b){var c,d=Xd(a);b instanceof Mb&&(c=b.y,b=b.x);Rd(a,a.offsetLeft+(b-d.x),a.offsetTop+(c-d.y))}
function Sd(a,b){"number"==typeof a&&(a=(b?Math.round(a):a)+"px");return a}function $d(a,b){a.style.height=Sd(b,j)}function ae(a,b){a.style.width=Sd(b,j)}function P(a){if("none"!=Qd(a,"display"))return be(a);var b=a.style,c=b.display,d=b.visibility,e=b.position;b.visibility="hidden";b.position="absolute";b.display="inline";a=be(a);b.display=c;b.position=e;b.visibility=d;return a}
function be(a){var b=a.offsetWidth,c=a.offsetHeight,d=qb&&!b&&!c;return(!ha(b)||d)&&a.getBoundingClientRect?(a=Ud(a),new Ob(a.right-a.left,a.bottom-a.top)):new Ob(b,c)}function ce(a){var b=Xd(a),a=P(a);return new Ld(b.x,b.y,a.width,a.height)}function de(a,b){var c=a.style;"opacity"in c?c.opacity=b:"MozOpacity"in c?c.MozOpacity=b:"filter"in c&&(c.filter=""===b?"":"alpha(opacity="+100*b+")")}function N(a,b){a.style.display=b?"":"none"}function Yd(a){return"rtl"==Qd(a,"direction")}
var ee=pb?"MozUserSelect":qb?"WebkitUserSelect":k;function fe(a,b){if(/^\d+px?$/.test(b))return parseInt(b,10);var c=a.style.left,d=a.runtimeStyle.left;a.runtimeStyle.left=a.currentStyle.left;a.style.left=b;var e=a.style.pixelLeft;a.style.left=c;a.runtimeStyle.left=d;return e}
function ge(a,b){if(u){var c=fe(a,Pd(a,b+"Left")),d=fe(a,Pd(a,b+"Right")),e=fe(a,Pd(a,b+"Top")),g=fe(a,Pd(a,b+"Bottom"));return new Kd(e,d,g,c)}c=Od(a,b+"Left");d=Od(a,b+"Right");e=Od(a,b+"Top");g=Od(a,b+"Bottom");return new Kd(parseFloat(e),parseFloat(d),parseFloat(g),parseFloat(c))}var he={thin:2,medium:4,thick:6};function ie(a,b){if("none"==Pd(a,b+"Style"))return 0;var c=Pd(a,b+"Width");return c in he?he[c]:fe(a,c)}
function je(a){if(u){var b=ie(a,"borderLeft"),c=ie(a,"borderRight"),d=ie(a,"borderTop"),a=ie(a,"borderBottom");return new Kd(d,c,a,b)}b=Od(a,"borderLeftWidth");c=Od(a,"borderRightWidth");d=Od(a,"borderTopWidth");a=Od(a,"borderBottomWidth");return new Kd(parseFloat(d),parseFloat(c),parseFloat(a),parseFloat(b))}var ke=/matrix\([0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, ([0-9\.\-]+)p?x?, ([0-9\.\-]+)p?x?\)/;function le(a,b,c){H.call(this);this.target=a;this.handle=b||a;this.Xj=c||new Ld(NaN,NaN,NaN,NaN);this.H=$b(a);this.A=new Gd(this);I(this.handle,["touchstart","mousedown"],this.jd,l,this)}s(le,ed);var me=u||pb&&Bb("1.9.3");m=le.prototype;m.clientX=0;m.clientY=0;m.screenX=0;m.screenY=0;m.Pk=0;m.Qk=0;m.sd=0;m.td=0;m.Sg=j;m.ka=l;m.gh=0;m.nm=0;m.bm=l;m.cf=l;m.g=ca("A");m.bi=function(a){this.gh=Math.pow(a,2)};m.Kk=ba("hg");m.Z=ba("Sg");
m.p=function(){le.e.p.call(this);Zc(this.handle,["touchstart","mousedown"],this.jd,l,this);Jd(this.A);me&&this.H.releaseCapture();this.A=this.handle=this.target=k};function ne(a){ha(a.nb)||(a.nb=Yd(a.target));return a.nb}
m.jd=function(a){var b="mousedown"==a.type;if(this.Sg&&!this.ka&&(!b||Qc(a))){oe(a);if(0==this.gh)if(this.dispatchEvent(new pe("start",this,a.clientX,a.clientY,a)))this.ka=j,a.preventDefault();else return;else a.preventDefault();var b=this.H,c=b.documentElement,d=!me;O(this.A,b,["touchmove","mousemove"],this.Wl,d);O(this.A,b,["touchend","mouseup"],this.Pc,d);me?(c.setCapture(l),O(this.A,c,"losecapture",this.Pc)):O(this.A,b?b.parentWindow||b.defaultView:window,"blur",this.Pc);u&&this.bm&&O(this.A,
b,"dragstart",Mc);this.hg&&O(this.A,this.hg,"scroll",this.sk,d);this.clientX=this.Pk=a.clientX;this.clientY=this.Qk=a.clientY;this.screenX=a.screenX;this.screenY=a.screenY;this.cf?(a=this.target,b=a.offsetLeft,c=a.offsetParent,!c&&"fixed"==Qd(a,"position")&&(c=$b(a).documentElement),c?(pb?(d=je(c),b+=d.left):Db(8)&&(d=je(c),b-=d.left),a=Yd(c)?c.clientWidth-(b+a.offsetWidth):b):a=b):a=this.target.offsetLeft;this.sd=a;this.td=this.target.offsetTop;this.Kh=xc(Yb(this.H));this.nm=r()}else this.dispatchEvent("earlycancel")};
m.Pc=function(a,b){Jd(this.A);me&&this.H.releaseCapture();if(this.ka){oe(a);this.ka=l;var c=qe(this,this.sd),d=re(this,this.td);this.dispatchEvent(new pe("end",this,a.clientX,a.clientY,a,c,d,b||"touchcancel"==a.type))}else this.dispatchEvent("earlycancel");("touchend"==a.type||"touchcancel"==a.type)&&a.preventDefault()};
function oe(a){var b=a.type;"touchstart"==b||"touchmove"==b?a.init(a.la.targetTouches[0],a.currentTarget):("touchend"==b||"touchcancel"==b)&&a.init(a.la.changedTouches[0],a.currentTarget)}
m.Wl=function(a){if(this.Sg){oe(a);var b=(this.cf&&ne(this)?-1:1)*(a.clientX-this.clientX),c=a.clientY-this.clientY;this.clientX=a.clientX;this.clientY=a.clientY;this.screenX=a.screenX;this.screenY=a.screenY;if(!this.ka){var d=this.Pk-this.clientX,e=this.Qk-this.clientY;if(d*d+e*e>this.gh)if(this.dispatchEvent(new pe("start",this,a.clientX,a.clientY,a)))this.ka=j;else{this.vf||this.Pc(a);return}}c=se(this,b,c);b=c.x;c=c.y;this.ka&&this.dispatchEvent(new pe("beforedrag",this,a.clientX,a.clientY,a,
b,c))&&(te(this,a,b,c),a.preventDefault())}};function se(a,b,c){var d=xc(Yb(a.H)),b=b+(d.x-a.Kh.x),c=c+(d.y-a.Kh.y);a.Kh=d;a.sd+=b;a.td+=c;b=qe(a,a.sd);a=re(a,a.td);return new Mb(b,a)}m.sk=function(a){var b=se(this,0,0);a.clientX=this.clientX;a.clientY=this.clientY;te(this,a,b.x,b.y)};function te(a,b,c,d){a.me(c,d);a.dispatchEvent(new pe("drag",a,b.clientX,b.clientY,b,c,d))}
function qe(a,b){var c=a.Xj,d=!isNaN(c.left)?c.left:k,c=!isNaN(c.width)?c.width:0;return Math.min(d!=k?d+c:Infinity,Math.max(d!=k?d:-Infinity,b))}function re(a,b){var c=a.Xj,d=!isNaN(c.top)?c.top:k,c=!isNaN(c.height)?c.height:0;return Math.min(d!=k?d+c:Infinity,Math.max(d!=k?d:-Infinity,b))}m.me=function(a,b){this.cf&&ne(this)?this.target.style.right=a+"px":this.target.style.left=a+"px";this.target.style.top=b+"px"};
function pe(a,b,c,d,e,g,h,p){Lc.call(this,a);this.clientX=c;this.clientY=d;this.mf=e;this.left=ha(g)?g:b.sd;this.top=ha(h)?h:b.td;this.sl=b;this.ql=!!p}s(pe,Lc);function ue(){H.call(this);this.n=ve;this.pe=this.startTime=k}s(ue,ed);var ve=0;ue.prototype.nc=function(){this.Da("begin")};ue.prototype.oc=function(){this.Da("end")};ue.prototype.Da=function(a){this.dispatchEvent(a)};function we(a,b,c){H.call(this);this.gc=a;this.W=b||0;this.S=c;this.Dg=n(this.ne,this)}s(we,H);m=we.prototype;m.Ga=0;m.p=function(){we.e.p.call(this);this.stop();delete this.gc;delete this.S};m.start=function(a){this.stop();this.Ga=J(this.Dg,ha(a)?a:this.W)};m.stop=function(){this.dc()&&gd.clearTimeout(this.Ga);this.Ga=0};m.zf=function(){this.stop();this.ne()};m.dc=function(){return 0!=this.Ga};m.ne=function(){this.Ga=0;this.gc&&this.gc.call(this.S)};var xe;xe=da(k);var ye={},ze=k;function Ae(a){a=ta(a);delete ye[a];Sb(ye)&&ze&&ze.stop()}function Be(){ze||(ze=new we(function(){var a=r();Pb(ye,function(c){Ce(c,a)});Sb(ye)||Be()},20));var a=ze;a.dc()||a.start()};function De(a,b,c,d){ue.call(this);(!ma(a)||!ma(b))&&f(Error("Start and end parameters must be arrays"));a.length!=b.length&&f(Error("Start and end points must be the same length"));this.Se=a;this.vl=b;this.duration=c;this.Di=d;this.coords=[];this.cf=l}s(De,ue);m=De.prototype;m.nj=0;m.Ua=0;m.ph=k;
m.play=function(a){if(a||this.n==ve)this.Ua=0,this.coords=this.Se;else if(1==this.n)return l;Ae(this);this.startTime=a=r();-1==this.n&&(this.startTime-=this.duration*this.Ua);this.pe=this.startTime+this.duration;this.ph=this.startTime;this.Ua||this.nc();this.Da("play");-1==this.n&&this.Da("resume");this.n=1;var b=ta(this);b in ye||(ye[b]=this);Be();Ce(this,a);return j};m.stop=function(a){Ae(this);this.n=ve;a&&(this.Ua=1);Ee(this,this.Ua);this.Da("stop");this.oc()};m.Cf=ca("Ua");
m.p=function(){this.n==ve||this.stop(l);this.Da("destroy");De.e.p.call(this)};function Ce(a,b){a.Ua=(b-a.startTime)/(a.pe-a.startTime);1<=a.Ua&&(a.Ua=1);a.nj=1E3/(b-a.ph);a.ph=b;Ee(a,a.Ua);1==a.Ua?(a.n=ve,Ae(a),a.Da("finish"),a.oc()):1==a.n&&a.Dh()}function Ee(a,b){ra(a.Di)&&(b=a.Di(b));a.coords=Array(a.Se.length);for(var c=0;c<a.Se.length;c++)a.coords[c]=(a.vl[c]-a.Se[c])*b+a.Se[c]}m.Dh=function(){this.Da("animate")};m.Da=function(a){this.dispatchEvent(new Fe(a,this))};
function Fe(a,b){Lc.call(this,a);this.coords=b.coords;this.x=b.coords[0];this.y=b.coords[1];this.hp=b.coords[2];this.duration=b.duration;this.Ua=b.Cf();this.Io=b.nj;this.state=b.n;this.qo=b}s(Fe,Lc);function Ge(a,b,c,d,e){De.call(this,b,c,d,e);this.element=a}s(Ge,De);m=Ge.prototype;m.af=ja;m.Pj=function(){ha(this.nb)||(this.nb=Yd(this.element));return this.nb};m.Dh=function(){this.af();Ge.e.Dh.call(this)};m.oc=function(){this.af();Ge.e.oc.call(this)};m.nc=function(){this.af();Ge.e.nc.call(this)};function He(a,b,c,d,e){(2!=b.length||2!=c.length)&&f(Error("Start and end points must be 2D"));Ge.apply(this,arguments)}s(He,Ge);
He.prototype.af=function(){if(this.cf){var a=this.element,b=Math.round(this.coords[0]),b=Math.max(b,0);a.scrollLeft=Yd(a)?pb?-b:!u||!Bb("8")?a.scrollWidth-b-a.clientWidth:b:b}else this.element.scrollLeft=Math.round(this.coords[0]);this.element.scrollTop=Math.round(this.coords[1])};function Ie(a,b,c,d,e){qa(b)&&(b=[b]);qa(c)&&(c=[c]);Ge.call(this,a,b,c,d,e);(1!=b.length||1!=c.length)&&f(Error("Start and end points must be 1D"))}s(Ie,Ge);Ie.prototype.af=function(){de(this.element,this.coords[0])};
Ie.prototype.show=function(){this.element.style.display=""};Ie.prototype.hide=function(){this.element.style.display="none"};function Je(a,b,c){Ie.call(this,a,1,0,b,c)}s(Je,Ie);Je.prototype.nc=function(){this.show();Je.e.nc.call(this)};Je.prototype.oc=function(){this.hide();Je.e.oc.call(this)};function Ke(a,b,c){Ie.call(this,a,0,1,b,c)}s(Ke,Ie);Ke.prototype.nc=function(){this.show();Ke.e.nc.call(this)};function Le(){}ka(Le);Le.prototype.tm=0;Le.a();function Q(a){H.call(this);this.Nc=a||Yb();this.nb=Me}s(Q,ed);Q.prototype.am=Le.a();var Me=k;function Ne(a,b){switch(a){case 1:return b?"disable":"enable";case 2:return b?"highlight":"unhighlight";case 4:return b?"activate":"deactivate";case 8:return b?"select":"unselect";case 16:return b?"check":"uncheck";case 32:return b?"focus":"blur";case 64:return b?"open":"close"}f(Error("Invalid component state"))}m=Q.prototype;m.Ga=k;m.da=l;m.f=k;m.nb=k;m.o=k;m.T=k;m.ia=k;m.Ba=k;m.el=l;
function Oe(a){return a.Ga||(a.Ga=":"+(a.am.tm++).toString(36))}m.b=ca("f");m.g=function(){return this.Ad||(this.Ad=new Gd(this))};m.jg=function(a){this==a&&f(Error("Unable to set parent component"));a&&(this.T&&this.Ga&&this.T.Ba&&this.Ga&&Vb(this.T.Ba,this.Ga)&&this.T!=a)&&f(Error("Unable to set parent component"));this.T=a;Q.e.ci.call(this,a)};m.getParent=ca("T");m.ci=function(a){this.T&&this.T!=a&&f(Error("Method not supported"));Q.e.ci.call(this,a)};m.gb=ca("Nc");m.Q=function(){this.f=this.Nc.createElement("div")};
function Pe(a,b){a.da&&f(Error("Component already rendered"));a.f||a.Q();b?b.insertBefore(a.f,k):a.Nc.H.body.appendChild(a.f);(!a.T||a.T.da)&&a.w()}m.k=function(a){this.da&&f(Error("Component already rendered"));if(a&&this.Fc(a)){this.el=j;if(!this.Nc||this.Nc.H!=$b(a))this.Nc=Yb(a);this.u(a);this.w()}else f(Error("Invalid element to decorate"))};m.Fc=da(j);m.u=ba("f");m.w=function(){this.da=j;Qe(this,function(a){!a.da&&a.b()&&a.w()})};
m.Qc=function(){Qe(this,function(a){a.da&&a.Qc()});this.Ad&&Jd(this.Ad);this.da=l};m.p=function(){Q.e.p.call(this);this.da&&this.Qc();this.Ad&&(this.Ad.ea(),delete this.Ad);Qe(this,function(a){a.ea()});!this.el&&this.f&&hc(this.f);this.T=this.o=this.f=this.Ba=this.ia=k};
function Re(a,b){var c=a.ia?a.ia.length:0;b.da&&!a.da&&f(Error("Component already rendered"));(0>c||c>(a.ia?a.ia.length:0))&&f(Error("Child component index out of bounds"));if(!a.Ba||!a.ia)a.Ba={},a.ia=[];if(b.getParent()==a){var d=Oe(b);a.Ba[d]=b;Wa(a.ia,b)}else Ub(a.Ba,Oe(b),b);b.jg(a);bb(a.ia,c,0,b);b.da&&a.da&&b.getParent()==a?(d=a.Pa(),d.insertBefore(b.b(),d.childNodes[c]||k)):a.da&&(!b.da&&b.f&&b.f.parentNode)&&b.w()}m.Pa=ca("f");
m.Pj=function(){this.nb==k&&(this.nb=Yd(this.da?this.f:this.Nc.H.body));return this.nb};m.gd=function(a){this.da&&f(Error("Component already rendered"));this.nb=a};function Qe(a,b){a.ia&&t(a.ia,b,i)}m.removeChild=function(a,b){if(a){var c=pa(a)?a:Oe(a),a=this.Ba&&c?Vb(this.Ba,c)||k:k;c&&a&&(Tb(this.Ba,c),Wa(this.ia,a),b&&(a.Qc(),a.f&&hc(a.f)),a.jg(k))}a||f(Error("Child is not in parent component"));return a};function Se(a,b,c,d,e){if(!u&&(!qb||!Bb("525")))return j;if(jb&&e)return Te(a);if(e&&!d||!c&&(17==b||18==b)||u&&d&&b==a)return l;switch(a){case 13:return!(u&&Db(9));case 27:return!qb}return Te(a)}function Te(a){if(48<=a&&57>=a||96<=a&&106>=a||65<=a&&90>=a||qb&&0==a)return j;switch(a){case 32:case 63:case 107:case 109:case 110:case 111:case 186:case 59:case 189:case 187:case 61:case 188:case 190:case 191:case 192:case 222:case 219:case 220:case 221:return j;default:return l}}
function Ue(a){switch(a){case 61:return 187;case 59:return 186;case 224:return 91;case 0:return 224;default:return a}};function Ve(){}var We;ka(Ve);m=Ve.prototype;m.zd=aa();m.Q=function(a){var b=a.gb().Q("div",Xe(this,a).join(" "),a.ub);Ye(this,a,b);return b};m.Pa=function(a){return a};m.oe=function(a,b,c){if(a=a.b?a.b():a)if(u&&!Bb("7")){var d=Ze(Jb(a),b);d.push(b);Aa(c?v:x,a).apply(k,d)}else z(a,b,c)};m.Fc=da(j);
m.k=function(a,b){if(b.id){var c=b.id;a.T&&a.T.Ba&&(Tb(a.T.Ba,a.Ga),Ub(a.T.Ba,c,a));a.Ga=c}(c=this.Pa(b))&&c.firstChild?(c=c.firstChild.nextSibling?Za(c.childNodes):c.firstChild,a.ub=c):a.ub=k;var d=0,e=this.ta(),g=this.ta(),h=l,p=l,c=l,q=Jb(b);t(q,function(a){if(!h&&a==e)h=j,g==e&&(p=j);else if(!p&&a==g)p=j;else{var b=d;if(!this.Rk){this.rf||$e(this);var c=this.rf,q={},w;for(w in c)q[c[w]]=w;this.Rk=q}a=parseInt(this.Rk[a],10);d=b|(isNaN(a)?0:a)}},this);a.n=d;h||(q.push(e),g==e&&(p=j));p||q.push(g);
var w=a.fb;w&&q.push.apply(q,w);if(u&&!Bb("7")){var G=Ze(q);0<G.length&&(q.push.apply(q,G),c=j)}if(!h||!p||w||c)b.className=q.join(" ");Ye(this,a,b);return b};m.Jj=function(a){a.Pj()&&this.gd(a.b(),j);a.isEnabled()&&this.Td(a,a.yb())};function Ye(a,b,c){b.isEnabled()||a.pb(c,1,j);b.n&8&&a.pb(c,8,j);b.oa&16&&a.pb(c,16,af(b));b.oa&64&&a.pb(c,64,!!(b.n&64))}
m.Sd=function(a,b){var c=!b,d=u||ob?a.getElementsByTagName("*"):k;if(ee){if(c=c?"none":"",a.style[ee]=c,d)for(var e=0,g;g=d[e];e++)g.style[ee]=c}else if(u||ob)if(c=c?"on":"",a.setAttribute("unselectable",c),d)for(e=0;g=d[e];e++)g.setAttribute("unselectable",c)};m.gd=function(a,b){this.oe(a,this.ta()+"-rtl",b)};m.nh=function(a){var b;return a.oa&32&&(b=a.$b())?qc(b):l};
m.Td=function(a,b){var c;if(a.oa&32&&(c=a.$b())){if(!b&&a.Kf()){try{c.blur()}catch(d){}a.Kf()&&a.tj()}qc(c)!=b&&(b?c.tabIndex=0:(c.tabIndex=-1,c.removeAttribute("tabIndex")))}};m.ya=function(a,b){N(a,b)};m.wa=function(a,b,c){var d=a.b();if(d){var e=bf(this,b);e&&this.oe(a,e,c);this.pb(d,b,c)}};m.pb=function(a,b,c){We||(We={1:"disabled",8:"selected",16:"checked",64:"expanded"});(b=We[b])&&a.setAttribute("aria-"+b,c)};
m.fd=function(a,b){var c=this.Pa(a);if(c&&(fc(c),b))if(pa(b))nc(c,b);else{var d=function(a){if(a){var b=$b(c);c.appendChild(pa(a)?b.createTextNode(a):a)}};ma(b)?t(b,d):oa(b)&&!("nodeType"in b)?t(Za(b),d):d(b)}};m.$b=function(a){return a.b()};m.ta=da("goog-control");function Xe(a,b){var c=a.ta(),d=[c],e=a.ta();e!=c&&d.push(e);c=b.n;for(e=[];c;){var g=c&-c;e.push(bf(a,g));c&=~g}d.push.apply(d,e);(c=b.fb)&&d.push.apply(d,c);u&&!Bb("7")&&d.push.apply(d,Ze(d));return d}
function Ze(a,b){var c=[];b&&(a=a.concat([b]));t([],function(d){Sa(d,Aa(Va,a))&&(!b||Va(d,b))&&c.push(d.join("_"))});return c}function bf(a,b){a.rf||$e(a);return a.rf[b]}function $e(a){var b=a.ta();a.rf={1:b+"-disabled",2:b+"-hover",4:b+"-active",8:b+"-selected",16:b+"-checked",32:b+"-focused",64:b+"-open"}};function cf(){}s(cf,Ve);ka(cf);m=cf.prototype;m.zd=da("button");m.pb=function(a,b,c){16==b?a.setAttribute("aria-pressed",c):cf.e.pb.call(this,a,b,c)};m.Q=function(a){var b=cf.e.Q.call(this,a),c=a.se();c&&this.ei(b,c);(c=a.v())&&this.xa(b,c);a.oa&16&&this.pb(b,16,af(a));return b};m.k=function(a,b){var b=cf.e.k.call(this,a,b),c=this.v(b);a.Bi=c;a.ri=this.se(b);a.oa&16&&this.pb(b,16,af(a));return b};m.v=ja;m.xa=ja;m.se=function(a){return a.title};m.ei=function(a,b){a&&(a.title=b||"")};m.ta=da("goog-button");function df(a,b){H.call(this);a&&ef(this,a,b)}s(df,ed);m=df.prototype;m.f=k;m.Lf=k;m.oh=k;m.Mf=k;m.fc=-1;m.ec=-1;m.Ag=l;
var ff={3:13,12:144,63232:38,63233:40,63234:37,63235:39,63236:112,63237:113,63238:114,63239:115,63240:116,63241:117,63242:118,63243:119,63244:120,63245:121,63246:122,63247:123,63248:44,63272:46,63273:36,63275:35,63276:33,63277:34,63289:144,63302:45},gf={Up:38,Down:40,Left:37,Right:39,Enter:13,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"U+007F":46,Home:36,End:35,PageUp:33,PageDown:34,Insert:45},hf=u||qb&&Bb("525"),jf=jb&&pb;m=df.prototype;
m.Tl=function(a){if(qb&&(17==this.fc&&!a.ctrlKey||18==this.fc&&!a.altKey))this.ec=this.fc=-1;hf&&!Se(a.keyCode,this.fc,a.shiftKey,a.ctrlKey,a.altKey)?this.handleEvent(a):(this.ec=pb?Ue(a.keyCode):a.keyCode,jf&&(this.Ag=a.altKey))};m.Vl=function(a){this.ec=this.fc=-1;this.Ag=a.altKey};
m.handleEvent=function(a){var b=a.la,c,d,e=b.altKey;u&&"keypress"==a.type?(c=this.ec,d=13!=c&&27!=c?b.keyCode:0):qb&&"keypress"==a.type?(c=this.ec,d=0<=b.charCode&&63232>b.charCode&&Te(c)?b.charCode:0):ob?(c=this.ec,d=Te(c)?b.keyCode:0):(c=b.keyCode||this.ec,d=b.charCode||0,jf&&(e=this.Ag),jb&&(63==d&&224==c)&&(c=191));var g=c,h=b.keyIdentifier;c?63232<=c&&c in ff?g=ff[c]:25==c&&a.shiftKey&&(g=9):h&&h in gf&&(g=gf[h]);a=g==this.fc;this.fc=g;b=new kf(g,d,a,b);b.altKey=e;this.dispatchEvent(b)};
m.b=ca("f");function ef(a,b,c){a.Mf&&a.detach();a.f=b;a.Lf=I(a.f,"keypress",a,c);a.oh=I(a.f,"keydown",a.Tl,c,a);a.Mf=I(a.f,"keyup",a.Vl,c,a)}m.detach=function(){this.Lf&&(ad(this.Lf),ad(this.oh),ad(this.Mf),this.Mf=this.oh=this.Lf=k);this.f=k;this.ec=this.fc=-1};m.p=function(){df.e.p.call(this);this.detach()};function kf(a,b,c,d){d&&this.init(d,i);this.type="key";this.keyCode=a;this.charCode=b;this.repeat=c}s(kf,Oc);function lf(a,b){a||f(Error("Invalid class name "+a));ra(b)||f(Error("Invalid decorator function "+b))}var mf={};function nf(a,b,c){Q.call(this,c);if(!b){for(var b=this.constructor,d;b;){d=ta(b);if(d=mf[d])break;b=b.e?b.e.constructor:k}b=d?ra(d.a)?d.a():new d:k}this.O=b;this.ub=a}s(nf,Q);m=nf.prototype;m.ub=k;m.n=0;m.oa=39;m.Jb=255;m.Cn=0;m.sg=j;m.fb=k;m.bh=j;m.kf=l;m.zk=k;function of(a){a.da&&l!=a.bh&&pf(a,l);a.bh=l}m.$b=function(){return this.O.$b(this)};
m.oe=function(a,b){b?a&&(this.fb?Va(this.fb,a)||this.fb.push(a):this.fb=[a],this.O.oe(this,a,j)):a&&this.fb&&(Wa(this.fb,a),0==this.fb.length&&(this.fb=k),this.O.oe(this,a,l))};m.Q=function(){var a=this.O.Q(this);this.f=a;var b=this.zk||this.O.zd();b&&a.setAttribute("role",b);this.kf||this.O.Sd(a,l);this.yb()||this.O.ya(a,l)};m.Pa=function(){return this.O.Pa(this.b())};m.Fc=function(a){return this.O.Fc(a)};
m.u=function(a){this.f=a=this.O.k(this,a);var b=this.zk||this.O.zd();b&&a.setAttribute("role",b);this.kf||this.O.Sd(a,l);this.sg="none"!=a.style.display};m.w=function(){nf.e.w.call(this);this.O.Jj(this);if(this.oa&-2&&(this.bh&&pf(this,j),this.oa&32)){var a=this.$b();if(a){var b=this.Fd||(this.Fd=new df);ef(b,a);O(O(O(this.g(),b,"key",this.Ul),a,"focus",this.Rl),a,"blur",this.tj)}}};
function pf(a,b){var c=a.g(),d=a.b();b?(O(O(O(O(c,d,"mouseover",a.Aj),d,"mousedown",a.yj),d,"mouseup",a.Bj),d,"mouseout",a.zj),a.Ff!=ja&&O(c,d,"contextmenu",a.Ff),u&&O(c,d,"dblclick",a.uj)):(Id(Id(Id(Id(c,d,"mouseover",a.Aj),d,"mousedown",a.yj),d,"mouseup",a.Bj),d,"mouseout",a.zj),a.Ff!=ja&&Id(c,d,"contextmenu",a.Ff),u&&Id(c,d,"dblclick",a.uj))}m.Qc=function(){nf.e.Qc.call(this);this.Fd&&this.Fd.detach();this.yb()&&this.isEnabled()&&this.O.Td(this,l)};
m.p=function(){nf.e.p.call(this);this.Fd&&(this.Fd.ea(),delete this.Fd);delete this.O;this.fb=this.ub=k};m.fd=function(a){this.O.fd(this.b(),a);this.ub=a};m.qj=function(){var a=this.ub;return!a?"":(pa(a)?a:ma(a)?Ra(a,tc).join(""):rc(a)).replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")};m.gd=function(a){nf.e.gd.call(this,a);var b=this.b();b&&this.O.gd(b,a)};m.Sd=function(a){this.kf=a;var b=this.b();b&&this.O.Sd(b,a)};m.yb=ca("sg");
m.ya=function(a,b){if(b||this.sg!=a&&this.dispatchEvent(a?"show":"hide")){var c=this.b();c&&this.O.ya(c,a);this.isEnabled()&&this.O.Td(this,a);this.sg=a;return j}return l};m.isEnabled=function(){return!(this.n&1)};m.Z=function(a){var b=this.getParent();if((!b||"function"!=typeof b.isEnabled||b.isEnabled())&&qf(this,1,!a))a||(this.setActive(l),rf(this,l)),this.yb()&&this.O.Td(this,a),this.wa(1,!a)};function rf(a,b){qf(a,2,b)&&a.wa(2,b)}m.dc=function(){return!!(this.n&4)};
m.setActive=function(a){qf(this,4,a)&&this.wa(4,a)};function af(a){return!!(a.n&16)}function sf(a,b){qf(a,16,b)&&a.wa(16,b)}m.Kf=function(){return!!(this.n&32)};m.Ia=function(a){qf(this,32,a)&&this.wa(32,a)};m.wa=function(a,b){this.oa&a&&b!=!!(this.n&a)&&(this.O.wa(this,a,b),this.n=b?this.n|a:this.n&~a)};function tf(a,b,c){a.da&&(a.n&b&&!c)&&f(Error("Component already rendered"));!c&&a.n&b&&a.wa(b,l);a.oa=c?a.oa|b:a.oa&~b}function uf(a,b){return!!(a.Jb&b)&&!!(a.oa&b)}
function qf(a,b,c){return!!(a.oa&b)&&!!(a.n&b)!=c&&(!(a.Cn&b)||a.dispatchEvent(Ne(b,c)))&&!a.vf}m.Aj=function(a){(!a.relatedTarget||!mc(this.b(),a.relatedTarget))&&(this.dispatchEvent("enter")&&this.isEnabled()&&uf(this,2))&&rf(this,j)};m.zj=function(a){if((!a.relatedTarget||!mc(this.b(),a.relatedTarget))&&this.dispatchEvent("leave"))uf(this,4)&&this.setActive(l),uf(this,2)&&rf(this,l)};m.Ff=ja;
m.yj=function(a){this.isEnabled()&&(uf(this,2)&&rf(this,j),Qc(a)&&(uf(this,4)&&this.setActive(j),this.O.nh(this)&&this.$b().focus()));!this.kf&&Qc(a)&&a.preventDefault()};m.Bj=function(a){this.isEnabled()&&(uf(this,2)&&rf(this,j),this.dc()&&(this.Ie(a)&&uf(this,4))&&this.setActive(l))};m.uj=function(a){this.isEnabled()&&this.Ie(a)};
m.Ie=function(a){uf(this,16)&&sf(this,!af(this));uf(this,8)&&qf(this,8,j)&&this.wa(8,j);if(uf(this,64)){var b=!(this.n&64);qf(this,64,b)&&this.wa(64,b)}b=new Lc("action",this);a&&(b.altKey=a.altKey,b.ctrlKey=a.ctrlKey,b.metaKey=a.metaKey,b.shiftKey=a.shiftKey,b.Mh=a.Mh);return this.dispatchEvent(b)};m.Rl=function(){uf(this,32)&&this.Ia(j)};m.tj=function(){uf(this,4)&&this.setActive(l);uf(this,32)&&this.Ia(l)};
m.Ul=function(a){return this.yb()&&this.isEnabled()&&this.ah(a)?(a.preventDefault(),a.stopPropagation(),j):l};m.ah=function(a){return 13==a.keyCode&&this.Ie(a)};ra(nf)||f(Error("Invalid component class "+nf));ra(Ve)||f(Error("Invalid renderer class "+Ve));var vf=ta(nf);mf[vf]=Ve;lf("goog-control",function(){return new nf(k)});function wf(){}s(wf,cf);ka(wf);m=wf.prototype;m.zd=aa();m.Q=function(a){of(a);a.Jb&=-256;tf(a,32,l);return a.gb().Q("button",{"class":Xe(this,a).join(" "),disabled:!a.isEnabled(),title:a.se()||"",value:a.v()||""},a.qj()||"")};m.Fc=function(a){return"BUTTON"==a.tagName||"INPUT"==a.tagName&&("button"==a.type||"submit"==a.type||"reset"==a.type)};m.k=function(a,b){of(a);a.Jb&=-256;tf(a,32,l);b.disabled&&v(b,bf(this,1));return wf.e.k.call(this,a,b)};m.Jj=function(a){O(a.g(),a.b(),"click",a.Ie)};m.Sd=ja;
m.gd=ja;m.nh=function(a){return a.isEnabled()};m.Td=ja;m.wa=function(a,b,c){wf.e.wa.call(this,a,b,c);if((a=a.b())&&1==b)a.disabled=c};m.v=function(a){return a.value};m.xa=function(a,b){a&&(a.value=b)};m.pb=ja;function xf(a,b,c){nf.call(this,a,b||wf.a(),c)}s(xf,nf);m=xf.prototype;m.v=ca("Bi");m.xa=function(a){this.Bi=a;this.O.xa(this.b(),a)};m.se=ca("ri");m.ei=function(a){this.ri=a;this.O.ei(this.b(),a)};m.p=function(){xf.e.p.call(this);delete this.Bi;delete this.ri};m.w=function(){xf.e.w.call(this);if(this.oa&32){var a=this.$b();a&&O(this.g(),a,"keyup",this.ah)}};m.ah=function(a){return 13==a.keyCode&&"key"==a.type||32==a.keyCode&&"keyup"==a.type?this.Ie(a):32==a.keyCode};lf("goog-button",function(){return new xf(k)});function yf(){}s(yf,cf);ka(yf);m=yf.prototype;m.Q=function(a){var b={"class":"goog-inline-block "+Xe(this,a).join(" "),title:a.se()||""},b=a.gb().Q("div",b,zf(this,a.ub,a.gb()));Ye(this,a,b);return b};m.zd=da("button");m.Pa=function(a){return a&&a.firstChild.firstChild};function zf(a,b,c){return c.Q("div","goog-inline-block "+(a.ta()+"-outer-box"),c.Q("div","goog-inline-block "+(a.ta()+"-inner-box"),b))}m.Fc=function(a){return"DIV"==a.tagName};
m.k=function(a,b){Af(b,j);Af(b,l);var c;a:{c=yc(a.gb(),b);var d=this.ta()+"-outer-box";if(c&&y(c,d)&&(c=yc(a.gb(),c),d=this.ta()+"-inner-box",c&&y(c,d))){c=j;break a}c=l}c||b.appendChild(zf(this,b.childNodes,a.gb()));v(b,"goog-inline-block",this.ta());return yf.e.k.call(this,a,b)};m.ta=da("goog-custom-button");
function Af(a,b){if(a)for(var c=b?a.firstChild:a.lastChild,d;c&&c.parentNode==a;){d=b?c.nextSibling:c.previousSibling;if(3==c.nodeType){var e=c.nodeValue;if(""==Da(e))a.removeChild(c);else{c.nodeValue=b?e.replace(/^[\s\xa0]+/,""):e.replace(/[\s\xa0]+$/,"");break}}else break;c=d}};function Bf(a,b,c){xf.call(this,a,b||yf.a(),c)}s(Bf,xf);lf("goog-custom-button",function(){return new Bf(k)});function Cf(){Q.call(this);this.wc=2;this.W=5;this.qi=60*this.wc*this.W;this.Qi=[];this.qf={};this.Ha=Df();this.ua=0;this.Hk=this.Gk=l;this.Wg=this.rb=j;this.ka=l;this.vb=[R.a().l,R.a().l.d()];this.th=0;this.Sm=201}s(Cf,Q);m=Cf.prototype;
m.w=function(){Cf.e.w.call(this);this.Xd=A("ticker");this.Qo=A("my-ticker");var a=A("go-live");this.Bd=A("header");this.Aa=A("channels");this.Wa=B("channel-scrollable",this.b());this.na=B("channel-h-scrollable",this.b());this.Gj=1;this.ra=Math.max(1280,C().width)*this.Gj;this.je=P(A("controller")).height;M.a().subscribe(nd,function(a){this.og(a)},this);M.a().subscribe(md,function(a){z(this.b(),"sidebar-toggled",a);this.ha(l,i,j);Ef(this)},this);this.og(y(this.b(),"toggled"));this.Te=new vd;for(var b=
60;b>=this.Te.getMinutes();)b-=this.W;this.Te.setMinutes(b);this.ca=this.Te.clone();this.ca.add(new wd(0,0,0,0,0*-this.W));this.uh=this.ca.clone();this.uh.add(new wd(0,0,0,0,this.W*(this.wc+1)));Ff(this,this.wc,this.ca);ae(this.Aa,this.ra);ae(this.Bd,this.ra);this.pc=(this.ra-200)/this.qi;this.Kn=this.ra/this.wc;this.Gg=document.createElement("style");this.Gg.id="channel-name-offs";this.Gg.type="text/css";document.getElementsByTagName("head")[0].appendChild(this.Gg);t(R.a().Ic,n(function(a){this.Dc(a)},
this));this.q=new le(this.na);var c=this.Wa,d=this.Bd,e,g,h=0;this.q.me=function(a,b){this.target&&(this.target.scrollLeft-=a-h,h=a,y(this.target,"channel-h-scrollable")&&(d.style.left=-this.target.scrollLeft+"px"));e=e||b;c.scrollTop-=b-(g||e);g=b};var b=A("now-left"),p=A("now-right");O(O(O(O(O(O(O(O(O(O(O(this.g(),id.a().ge,hd,n(this.pi,this)),a,"click",n(function(){R.a().l.Uf=l;R.a().c(Gf,R.a().l)},this)),window,"resize",n(this.ha,this)),this.Xd,"click",n(this.ha,this,j,i,l)),b,"click",n(this.Cm,
this)),p,"click",n(this.Jm,this)),this.q,"beforedrag",n(function(a){!this.ka&&M.a().Za?(a=a.mf,a=vc(a.target,"channel")||B("channel",a.target),B("programs",a).style.paddingRight=C().width-400+"px",this.q.target=a):this.ka||(this.q.target=this.na);x(this.b(),"animate");v(this.b(),"drag");this.ka=j},this)),this.q,"end",n(function(){J(n(function(){x(this.b(),"drag")},this));v(this.b(),"animate");this.rb=this.ka=l;e=i;h=g=0;Ef(this)},this)),this.Aa,"mousewheel",n(function(a){a.preventDefault();a.stopPropagation();
a=a.la;this.Wa.scrollTop-=a.wheelDelta?a.wheelDelta:a.detail?-a.detail:0},this)),this.Bd,"mousewheel",n(function(a){a.preventDefault();a.stopPropagation();a=a.la;x(this.b(),"animate");v(this.b(),"drag");this.ka=j;this.na.scrollLeft+=a.wheelDelta?a.wheelDelta:a.detail?-a.detail:0;x(this.b(),"drag");v(this.b(),"animate");this.rb=this.ka=l;Ef(this)},this)),B("switcher",this.b()),"click",n(function(){x(this.b(),"animate");M.a().Za=!M.a().Za;M.a().Za?(v(this.b(),"timeless"),J(n(function(){v(this.b(),"position-hack");
v(this.b(),"animate")},this))):(x(this.b(),"timeless"),J(n(function(){x(this.b(),"position-hack");v(this.b(),"animate")},this)));this.ha(j,i,l)},this));window.onbeforeunload=da("Leaving so soon?");R.a().subscribe(Hf,this.rc,this);R.a().subscribe(If,this.Dc,this);R.a().subscribe(Gf,this.Gc,this);R.a().subscribe(Jf,n(function(){this.ka||J(n(function(){this.ha(j)},this))},this));M.a().subscribe("toggle-admin",function(a){z(this.b(),"admin",a)},this);for(T.a().subscribe(Kf,this.Nh,this);this.ra<this.th;)Lf(this);
this.rc();this.Ha&&O(this.g(),this.q,"beforedrag",n(function(a){a.mf.shiftKey&&a.preventDefault()},this))};m.Dc=function(a){if(!this.qf[a.id]){if(!a.G){var b=new Mf(a,this.qi,this.Te,0,this.ca);Pe(b,this.Aa);this.Qi.push(b);this.qf[a.id]=b;a.subscribe(Nf,function(){J(n(function(){this.rc()},this))},this);b.update();var c=ac("program",b.b());if(c=c[c.length-1])this.th=Math.max(this.th,Td(c).x+P(c).width)}a.id==R.a().l.id&&b&&(Of(b,j),this.ma=b);this.Qf=a.G?a:this.Qf}};
m.og=function(a){x(this.b(),"animate");this.ha(j,i,l);v(this.b(),"animate");var b=Math.min(this.Aa.scrollHeight,210);z(this.b(),"toggled",a);$d(this.b(),a?b+this.je:this.je);this.ma&&(this.Wa.scrollTop=Td(this.ma.b()).y);J(n(function(){$d(this.Wa,a?b:40);$d(this.na,P(this.Aa).height+22);z(this.b(),"collapsed",!a);this.rc();this.ha();if(this.ma){var c=this.Wa,d=Td(this.ma.b()).y;c.scrollTop!=d&&(c.scrollTop=d)}},this),a?0:800);a&&this.rc();this.q&&this.q.Z(a)};
function Ff(a,b,c){for(var d=B("times",a.b()),e=0;e<=b;e++){var g=c.clone();g.add(new wd(0,0,0,0,a.W*e));var h=D,p={"class":"time",style:"width:"+(a.ra-200)/a.wc+"px"},q=i,w=g.getHours();ha(q)||(q=j);var G=12==w;12<w&&(w-=12,G=j);0==w&&q&&(w=12);w=String(w);w+=":"+La(g.getMinutes());q&&(g=Ba("am"),q=Ba("pm"),w+=G?q:g);h=h("div",p,w);d.appendChild(h)}}m.Gc=function(a){if(a){this.ma&&Of(this.ma,l);if(this.ma=this.qf[a.id]||k)Of(this.ma,j),J(n(this.ha,this,j,i,l));this.vb[0]=a}};
m.Nh=function(){this.Qf=this.Qf||Pf();R.a().c(Gf,this.Qf)};
function Ef(a){var b=A("now-left"),c=A("now-right"),d=(r()-a.ca.getTime())/1E3*a.pc,e=M.a().hd?320:0,e=C().width-e;(Qf(a.vb[0],a.ua+1)?((a.vb[0].d(a.ua+1).time.getTime()-r())/1E3+a.vb[0].d(a.ua+1).media.duration)*a.pc+e:0)>a.ra-d&&Lf(a);c.style.right=M.a().hd?"320px":0;M.a().Za?(z(c,"now",0>a.ua),z(b,"now",0<a.ua)):(z(c,"now",!!(-Td(a.Xd).x<-a.na.scrollLeft-e)),z(b,"now",!!(-Td(a.Xd).x>-a.na.scrollLeft)));d=-1;0<=a.vb[0].Na+(a.ua||0)-1&&a.vb[0].d(a.ua-1)&&(d=(a.vb[0].d(a.ua-1).time.getTime()-a.ca.getTime())/
1E3*a.pc);N(c,Qf(a.vb[0],a.ua)||y(c,"now"));N(b,0<d||y(b,"now"))}m.Cm=function(){y(A("now-left"),"now")?R.a().l.d()==T.a().d()?this.ha(j,i,i,j):this.ha(l,i,i,j):this.ha(l,-1);Ef(this)};m.Jm=function(){y(A("now-right"),"now")?R.a().l.d()==T.a().d()?this.ha(j,i,i,j):this.ha(l,i,i,l):this.ha(l,1);Ef(this)};function Lf(a){var b=Math.ceil(a.wc/a.Gj);Ff(a,1,a.uh);a.ra+=a.Kn;ae(a.Aa,a.ra);ae(a.Bd,a.ra);a.wc++;a.uh.add(new wd(0,0,0,0,a.W*b));a.qi=60*a.wc*a.W}
m.pi=function(){if(M.a().Tc&&!M.a().Za||this.Wg){var a=R.a().l&&R.a().l.G||l,b=R.a().l&&R.a().l.d(),c=T.a().d(),d=1E3*T.a().Cf(),e=Math.round((r()-this.ca.getTime())/1E3*this.pc),d=c&&d?Math.round((c.time.getTime()+d-this.ca.getTime())/1E3*this.pc):e;Ef(this);Rd(this.Xd,e);z(this.Xd,"go-live",!a&&(!!b&&!!c&&b.id!=c.id&&45<Math.abs(d-e)||120<Math.abs(d-e)));this.Wg?(this.Wg=l,this.ha(j,i,l),v(this.b(),"animate")):this.ka||this.ha()}};
m.ha=function(a,b,c,d){this.rb=a!=i?!!a:this.rb;this.Gk=a!=i?!!c:this.rb;this.ua=this.rb?0:b?this.ua+b:this.ua;var c=Rf(R.a().l),e;e=R.a().l.G?(e=Sf(R.a(),j))&&e.d():d?c:this.rb?T.a().d():this.vb[0].d(this.ua);this.vb[1]=e;this.rb||x(this.b(),"tick-along");if((this.rb||b)&&this.ca){var g=T.a().d(),h=T.a().getCurrentTime(),p=(r()-this.ca.getTime())/1E3*this.pc;g&&h&&Math.round((g.time.getTime()+h-this.ca.getTime())/1E3*this.pc);g=C().width-(M.a().hd?320:0);if(M.a().Za)t(R.a().Ic,function(a){var b=
this.qf[a.id];if(b){a.d();var a=((a.Na||0)+this.ua)*this.Sm,c=B("channel",b.b());B("programs",b.b()).style.paddingRight=C().width-200+"px";a!=c.scrollLeft&&(new He(c,[c.scrollLeft,c.scrollTop],[a,c.scrollTop],300)).play()}},this);else{for(;p+C().width>this.ra-(M.a().hd?320:0);)Lf(this);h=0;e&&(h=(e.time.getTime()-this.ca.getTime())/1E3*this.pc+5);if(!e||!b&&M.a().Tc&&p>h+g-320)h=Td(this.Xd).x-g+200,v(this.b(),"tick-along");h=Math.max(h,0);h=Math.min(h,this.na.scrollWidth-this.na.clientWidth);if(b||
a){var q=new He(this.na,[this.na.scrollLeft,this.na.scrollTop],[h-5,this.na.scrollTop],300);q.play()}else this.na.scrollLeft=h-5;this.Bd.style.left=-h+"px"}if(!this.Gk&&this.ma){var w=Td(this.ma.b()).y-P(this.Bd).height,q=new He(this.Wa,[this.Wa.scrollLeft,this.Wa.scrollTop],[this.Wa.scrollLeft,w],100*this.Qi.length);O(this.g(),q,"end",n(function(){var a=this.Wa;a.scrollTop!=w&&(a.scrollTop=w);this.Hk=l},this));J(n(function(){this.Hk=j;q.play()},this),100)}}b&&Ef(this);if(!M.a().Za&&d&&(!c||!T.a().d()||
c.id!=T.a().d().id))this.rb=l};m.rc=function(){var a=Math.min(this.Aa.scrollHeight,210)+22;$d(this.Wa,y(this.b(),"toggled")?a:this.je);$d(this.na,P(this.Aa).height+22);$d(this.b(),y(this.b(),"collapsed")?this.je:a+this.je)};function Tf(){return'\t<div class="channel"><div class="programs-container"><div class="programs"></div></div><div class="graph"></div><div class="viewers"></div></div>'}function Uf(a){return'<div class="name"><div class="text">'+F(a.name)+"</div></div>"}
function Vf(a){return'<div class="info"><div class="thumb'+(a.repeat?" repeat":"")+'" style="background-image:url('+F(a.Rh.media.Fb)+"); background-position: 50% "+F(a.Rh.media.Wd)+'%"></div><div class="progress"></div><div class="title">'+F(a.Rh.media.name)+'</div><div class="stats"><div class="comment-count"><div class="icon"></div>'+F(a.media.qd)+'</div><div class="like-count"><div class="icon"></div>'+F(a.media.Bn)+'</div></div><div class="program-play"><div class="icon"></div></div><div class="program-plus"><div class="icon"></div></div><div class="viewers"></div>'+
(a.yg?'<div class="remove"></div><div class="repos"></div>':"")+"</div>"}function Wf(a){return'<div class="line"><div class="pic"><img src="'+F(a.m.L)+'"></div></div>'};function Xf(){K.call(this)}s(Xf,K);ka(Xf);function Yf(a){this.id=a.id;this.L=a.picture;this.name=a.name;this.description=a.description;this.link=a.link};function Zf(a){K.call(this);this.id=a.id;this.name=a.name;this.host="youtube";this.bc=a.host_id;this.$l="http://www.youtube.com/watch?v="+a.host_id;this.duration=a.duration;this.live=!!a.live;this.Eh=[];this.Wm=k;this.lj=l;this.description=a.description;this.link=a.link||"xylocast.com/?m="+this.id;this.va=a.publisher&&new Yf(a.publisher);this.qc=a.published&&ud(a.published+"Z");this.Fb="http://i.ytimg.com/vi/"+this.bc+"/0.jpg";this.ni="http://i.ytimg.com/vi/"+this.bc+"/1.jpg";this.Zo="http://i.ytimg.com/vi/"+
this.bc+"/2.jpg";this.$o="http://i.ytimg.com/vi/"+this.bc+"/3.jpg";this.mi=new Ob(480,360);this.Wd=37;this.tb=[];this.Zk=[];this.qd=a.comment_count||0;this.Bn=a.star_count||0;this.im=a.like_count||0;this.Ao=a.dislike_count||0;this.Pe=[];this.Od={};this.nl=a.collection_id;this.subscribe($f,this.Yb,this);this.subscribe(ag,this.dn,this);this.subscribe(bg,this.nd,this)}s(Zf,K);function cg(a){return a.qc.getMonth()+1+"/"+a.qc.getDate()+"/"+a.qc.getYear()}var $f="add-comment",ag="remove-comment",bg="watching";
Zf.prototype.hf=function(a){Ta(this.Eh,function(b){return a.id==b.id})||this.Eh.push(a)};Zf.prototype.Yb=function(a){if(a.K){var b=Ta(this.tb,function(b){return b.id==a.K});b&&b.Le.push(a)}else this.tb.push(a);this.qd+=1};Zf.prototype.dn=function(a){U("/_comment",xe(),"POST","delete=true&id="+a.id);if(a.K){var b=Ta(this.tb,function(b){return b.id==a.K});b&&Xa(b.Le,function(b){return b.id==a.id})}else Xa(this.tb,function(b){return b.id==a.id});this.qd-=1};
Zf.prototype.nd=function(a,b,c){if(c)Tb(this.Od,a.id);else if(this.Od[a.id]=a,a.Lb=this,a.id!=V.a().h.id&&(!b||b&&R.a().l&&b.id!=R.a().l.id))Xf.a().c("flash","is watching "+(b?b.name:""),this.name,a,this.ni,"#info:"+this.id)};function dg(){K.call(this);this.Id={}}s(dg,K);ka(dg);function eg(a,b){var c=a.get(b.id);c||(c=new Zf(b),a.add(c));return c}dg.prototype.get=function(a){return Vb(this.Id,a)};dg.prototype.add=function(a){this.Id[a.id]=a};function fg(a,b){K.call(this);var c=b||k,d=a||k;this.id=d?d.id:c.id;this.media=d?eg(dg.a(),d.media):c;dg.a().add(this.media);this.time=d?ud(d.time+"Z"):new vd;this.async=d?d.async:j;this.seek=d?d.seek:b?0:k;this.ended=l}s(fg,K);function gg(a){return new fg(i,a)};function jd(a){var b=r(),c=Math.floor((b-a)/6E4),b=l;0>c&&(b=j,c*=-1);if(60>c)return hg(c,b,0);c=Math.floor(c/60);if(24>c)return hg(c,b,1);c=new Date(r());c.setHours(0);c.setMinutes(0);c.setSeconds(0);c.setMilliseconds(0);c=Math.ceil((c.getTime()-a)/864E5);b&&(c*=-1);return 14>c?hg(c,b,2):""}
function hg(a,b,c){return!b&&0==c?(b=Ba("{$num} minute ago",{num:a}),c=Ba("{$num} minutes ago",{num:a}),1==a?b:c):b&&0==c?(b=Ba("in {$num} minute",{num:a}),c=Ba("in {$num} minutes",{num:a}),1==a?b:c):!b&&1==c?(b=Ba("{$num} hour ago",{num:a}),c=Ba("{$num} hours ago",{num:a}),1==a?b:c):b&&1==c?(b=Ba("in {$num} hour",{num:a}),c=Ba("in {$num} hours",{num:a}),1==a?b:c):!b&&2==c?(b=Ba("{$num} day ago",{num:a}),c=Ba("{$num} days ago",{num:a}),1==a?b:c):b&&2==c?(b=Ba("in {$num} day",{num:a}),c=Ba("in {$num} days",
{num:a}),1==a?b:c):""};function ig(a){K.call(this);this.id=a.id;this.name=a.name;this.url=a.profile_url;this.location=a.location||"";this.fl=a.welcomed;this.kb=a.online;this.zo=a.demo;this.Lb=a.last_seen?eg(dg.a(),a.last_seen):k;this.history=[];this.Ok=[];this.L=Ca("https://graph.facebook.com/%s/picture",this.id);for(this.color=Raphael.getColor();"#00bf85"==this.color||"#00bf2f"==this.color;)this.color=Raphael.getColor();this.ug=a.access_level;this.po=[];this.F=a.last_login?ud(a.last_login+"Z"):k;this.Wo=a.session_count;
this.ro=a.ave_session_time?a.ave_session_time.toFixed(2):k;this.tn=a.show_guide!=i?a.show_guide:j;this.xn=a.show_sidebar!=i?a.show_sidebar:j;this.$m=a.post_facebook!=i?a.post_facebook:j;this.yk=a.post_twitter!=i?a.post_twitter:j;this.Hf=a.has_twitter;this.dh=l;this.Fn=a.temp;this.subscribe(jg,function(){this.yk=j},this)}s(ig,K);function Df(){return V.a().h.ug==kg}ig.prototype.re=function(){var a=this.name.split(" ");return a&&a.length?a[0]:this.name};
function lg(a,b){return Ta(a.Ok,function(a){return a.id==b.id})}var jg="twitter-auth",kg=2;function mg(a,b,c,d,e){this.id=a;this.m=b;this.U=c;this.si=d;this.Yd=e||k;this.ck=[]}mg.prototype.Pe=function(a){this.ck.push(a);this.U&&(this.U.G&&this.U.R)&&(this.U.R.seek=k,this.U.R=k);U("/_seen",xe(),"POST","media_id="+a.id+"&session_id="+this.id+"&async="+(this.U?this.U.G:l))};
mg.prototype.end=function(a){this.Yd=a;a=(this.Yd.getTime()-this.si.getTime())/1E3;if(this.m.id==V.a().h.id&&this.U){ng.a();var b=this.U,c=this.ck.length;V.a().Wf.length?_gaq.push(["_trackEvent","Users","SessionTimeWithFriends",V.a().h.id,Math.round(a)]):_gaq.push(["_trackEvent","Users","SessionTimeNoFriends",V.a().h.id,Math.round(a)]);_gaq.push(["_trackEvent","Users","SessionMediaCount",V.a().h.id,c]);_gaq.push(["_trackEvent","Users","Active",V.a().h.id,c]);_gaq.push(["_trackEvent","Users",b.id+
"-time",V.a().h.id,a]);_gaq.push(["_trackEvent","Users",b.id+"-medias",V.a().h.id,c]);b.G||(_gaq.push(["_trackEvent","Channel","SessionTime",b.id,a]),_gaq.push(["_trackEvent","Channel","SessionMediaCount",b.id,c]))}};function og(a){K.call(this);this.id=a.id;this.name=a.name;this.G=a.my_channel;this.Uf=j;this.Lb=a.current_media?eg(dg.a(),a.current_media):k;this.xo=a.current_seek;this.Y=[];this.bd={};this.R=a.current_program&&new fg(a.current_program);this.ff=[];this.queue=[];this.Ab=0;this.kb=a.online!=i?a.online:k;this.subscribe(pg,this.ld,this);this.subscribe(qg,this.il,this);this.subscribe(sg,this.nd,this);this.subscribe(tg,this.yi,this);this.R||(this.Na=0,this.R=this.Y[0])}s(og,K);m=og.prototype;
m.ld=function(a){this.Y.push(a);this.bd[a.id]=a;a.async&&(this.Na=this.Y.length-1,this.R=a);a.time.getTime()+1E3*a.media.duration>this.Ab&&(this.Ab=a.time.getTime()+1E3*a.media.duration-12E4,ld(id.a(),this.Ab,n(this.vh,this,this.Ab)),ld(id.a(),this.Ab+6E4,n(this.vh,this,this.Ab+6E4)))};
m.vh=function(a){this.Ab<=a&&!this.G&&U("/_programming/"+this.id,n(function(a){a=X(a.target);a.length||ld(id.a(),r()+1E3,n(this.vh,this,r()+1E3));t(a,function(a){if(!this.bd[a.id]){var b=this.bd[a.id];b||(b=new fg(a),this.ld(b));this.c(pg,b)}},this)},this))};
m.il=function(a,b){b?(this.queue.push(a),Xf.a().c("flash","Added to queue",a.name,i,a.ni,"#info:"+a.id),ug(ng.a(),a),U("/_queue",xe(),"POST","media_id="+a.id)):(Xa(this.queue,function(b){return b.id==a.id},this),U("/_queue",xe(),"POST","media_id="+a.id+"&delete=1"))};m.nd=function(a){this.ff.push(a)};m.yi=function(a){var b=Vb(this.bd,a.id);b&&(b.time=ud(a.time+"Z"))};
m.d=function(a){if(this.R&&this.R.async&&this.R.seek!=k&&!this.R.ended)return this.R;if(!this.Y.length)return k;if(a)return this.Y[this.Na+a];if(this.Uf&&this.R){if(this.R.ended){a=this.Na;if(this.Y[a+1])a=this.Y[a+1];else if(this.G)if(this.queue.length){a=this.queue[0];this.c(qg,a,l);var b=gg(a);Pf().c(pg,b);U("/_addprogram",xe(),"POST","channel_id="+R.a().G.id+"&media_id="+a.id+"&now=true");a=b}else a=k;else a=k;this.R=a}}else this.G||(this.R=Rf(this));this.R&&(!this.Y[this.Na]||this.Y[this.Na].id!=
this.R.id)?(a=Ua(this.Y,n(function(a){return a.id==this.R.id},this)),this.Na=Math.max(a,0)):this.R||(this.Na=this.Y.length);return this.R};function Rf(a){var b=a.R,c=a.Na;if(b&&r()>=b.time.getTime()&&r()<b.time.getTime()+1E3*b.media.duration)return a.R=b,a.R;if(!b||b.time.getTime()>=r())c=0,b=a.Y[0];for(;c<a.Y.length;c++){var d=a.Y[c];if(r()>=d.time.getTime()&&r()<d.time.getTime()+1E3*d.media.duration)return d}return b}
function Qf(a,b){var c=a.Na||0,d=b||0;return a.G?c+d+1<a.Y.length||!!a.queue.length:c+d+1<a.Y.length}var pg="add-program",qg="add-queue",sg="add-viewer",tg="update-program",Nf="online";function vg(){K.call(this)}s(vg,K);ka(vg);function wg(){H.call(this);this.ja=[];this.yd=[];this.wf={};this.A=new Gd(this);this.dm=this.Oj=l;this.zi=j}s(wg,ed);m=wg.prototype;m.hh=0;m.bi=ba("hh");
m.init=function(){if(!this.Oj){for(var a=0,b=this.ja.length;a<b;a++)for(var c=ic(this.ja[a]),d=0,e=c.length;d<e;++d){var g=c[d],h=g,p=ta(h);this.wf[p]=g;this.ej&&(O(this.A,g,"mouseover",this.Nl),O(this.A,g,"mouseout",this.Ml));this.dj&&(O(this.A,h,"mouseover",this.Ll),O(this.A,h,"mouseout",this.Kl));this.yd.push(g);O(this.A,h,["mousedown","touchstart"],this.Cj)}this.Oj=j}};
m.p=function(){this.A.ea();for(var a=0,b=this.ja.length;a<b;a++){var c=this.ja[a];c.bj=i;c.Mc=i}this.ja.length=0;this.yd.length=0;this.wf=k;xg(this);wg.e.p.call(this)};function yg(a,b){for(var c=0,d=a.ja.length;c<d;c++){var e=a.ja[c];e.wd=ce(e)}c=0;for(d=a.yd.length;c<d;c++)e=a.yd[c],e!=b&&(e.wd=ce(e))}
m.Cj=function(a){var b=ta(a.currentTarget);this.r=this.wf[b];this.D=this.tf(this.r);this.xf&&v(this.D,this.xf);this.D.style.margin="0";this.D.style.position="absolute";this.D.style.visibility="hidden";$b(this.r).body.appendChild(this.D);b=Xd(this.r);Zd(this.D,b);this.q=new le(this.D);this.q.bi(this.hh);I(this.q,"start",this.wj,l,this);I(this.q,"end",this.vj,l,this);I(this.q,"earlycancel",this.sf,l,this);this.q.jd(a)};
m.wj=function(a){if(this.dispatchEvent(new zg("beforedragstart",this,a.mf,this.r,k,k))){this.Yf=this.r.parentNode;this.Zi=this.Ih=jc(this.r);this.Pg=this.Yf;this.Og?v.apply(k,Ya(this.r,this.Og)):this.r.style.visibility="hidden";var b=P(this.D);this.D.Hl=b.width/2;this.D.Gl=b.height/2;this.D.style.visibility="";this.zi&&(this.r.style.display="none");yg(this,this.r);this.r.style.display="";I(this.q,"drag",this.Ol,l,this);this.dispatchEvent(new zg("dragstart",this,a.mf,this.r,this.D,this.q))}else a.preventDefault(),
this.sf()};
m.Ol=function(a){var b=Xd(this.D),b=new Mb(b.x+this.D.Hl,b.y+this.D.Gl),c;a:{c=k;if("none"!=this.r.style.display){c=this.r.parentNode;var d=ce(c);if(Ag(b,d))break a}for(var d=0,e=this.ja.length;d<e;d++){var g=this.ja[d];if(g!=c&&Ag(b,g.wd)){c=g;break a}}c=k}var h;if(c){c==k&&f(Error("getHoverNextItem_ called with null hoverList."));var p,q,d=l,e=i;switch(c.bj){case 0:h=b.y;p=Bg;q=Cg;break;case 4:d=j;case 2:h=b.x;p=Dg;q=Cg;break;case 5:d=j;case 3:h=b.x,p=Eg,q=Fg}for(var g=k,w,G=ic(c),L=0,Z=G.length;L<
Z;L++){var S=G[L];if(S!=this.r){var xa=p(S.wd);if(d){var hb=Gg(S,b);ha(e)||(e=hb);if(q(h,xa)&&(w==i||hb<e||hb==e&&(q(xa,w)||xa==w)))g=S,w=xa;hb<e&&(e=hb)}else if(q(h,xa)&&(w==i||q(xa,w)))g=S,w=xa}}h=g!==k&&Gg(g,b)>e?k:g}else h=k;if(!this.dispatchEvent(new zg("beforedragmove",this,a,this.r,this.D,this.q,b,c,h)))return l;if(c)this.zi?(this.r.parentNode!=c||jc(this.r)!=h)&&c.insertBefore(this.r,h):h&&(this.Zi=h),this.r.style.display="",c.Mc&&v(c,c.Mc);else{this.dm||(this.r.style.display="none");p=0;
for(q=this.ja.length;p<q;p++)w=this.ja[p],w.Mc&&x(w,w.Mc)}c!=this.Pg&&(this.Pg=c,yg(this,this.r));this.dispatchEvent(new zg("dragmove",this,a,this.r,this.D,this.q,b,c,h));return l};m.sf=function(){xg(this);this.q=this.D=this.Ih=this.Yf=this.Pg=this.r=k;for(var a=0,b=this.ja.length;a<b;a++)this.ja[a].wd=k;a=0;for(b=this.yd.length;a<b;a++)this.yd[a].wd=k};
m.vj=function(a){if(!this.dispatchEvent(new zg("beforedragend",this,a,this.r,this.D,this.q)))return l;this.zi||this.Yf.insertBefore(this.r,this.Zi);xg(this);this.dispatchEvent(new zg("dragend",this,a,this.r,this.D,this.q));this.sf();return j};function xg(a){Hc(a.q);a.D&&hc(a.D);a.r&&"none"==a.r.style.display&&(a.Yf.insertBefore(a.r,a.Ih),a.r.style.display="");a.Og&&a.r?x.apply(k,Ya(a.r,a.Og)):a.r&&(a.r.style.visibility="visible");for(var b=0,c=a.ja.length;b<c;b++){var d=a.ja[b];d.Mc&&x(d,d.Mc)}}
m.Nl=function(a){v.apply(k,Ya(a.currentTarget,this.ej))};m.Ml=function(a){x.apply(k,Ya(a.currentTarget,this.ej))};m.Ll=function(a){v.apply(k,Ya(a.currentTarget,this.dj))};m.Kl=function(a){x.apply(k,Ya(a.currentTarget,this.dj))};function Ag(a,b){return a.x>b.left&&a.x<b.left+b.width&&a.y>b.top&&a.y<b.top+b.height}function Gg(a,b){var c=a.wd;return Math.abs(b.y-(c.top+(c.height-1)/2))}function Bg(a){return a.top+a.height-1}function Dg(a){return a.left+a.width-1}function Eg(a){return a.left||0}
function Cg(a,b){return a<b}function Fg(a,b){return a>b}m.tf=function(a){var b=a.cloneNode(j);switch(a.tagName.toLowerCase()){case "tr":return D("table",k,D("tbody",k,b));case "td":case "th":return D("table",k,D("tbody",k,D("tr",k,b)));default:return b}};function zg(a,b,c,d,e,g,h,p,q){Lc.call(this,a);this.Bo=b;this.event=c;this.ab=d;this.tl=e;this.sl=g;this.fj=h;this.Jo=p;this.cc=q}s(zg,Lc);function Mf(a,b,c,d,e){Q.call(this);this.o=a;this.Ha=Df();this.jf=l;this.In=b;this.Te=c;this.ca=e;this.Xo=d;this.La={};this.Qd={};this.Zb=this.Ha?new wg:k;this.Fg=6;this.kb=j}s(Mf,Q);m=Mf.prototype;m.Q=function(){this.f=E(Tf);this.Ld=E(Uf,{name:this.o.name});A("channel-names").appendChild(this.Ld)};
m.w=function(){Mf.e.w.call(this);this.Sh=B("programs",this.b());this.gf=B("viewers",this.b());var a=R.a(),b=(P(this.b()).width-200)/this.In;a.Qb=a.Qb||b;Md(this.Ld,"background",Raphael.getColor());a=this.o.Y;for(b=0;b<a.length;b++)this.ld(a[b]);if(this.Ha){a=this.Zb;b=this.Sh;b.bj=2;b.Mc=i;a.ja.push(b);this.Zb.xf="drag";var c=this.b();this.Zb.Cj=function(a){var b=ta(a.currentTarget);this.r=this.wf[b];this.D=this.tf(this.r);this.xf&&v(this.D,this.xf);this.D.style.margin="0";this.D.style.position="absolute";
this.D.style.visibility="hidden";c.appendChild(this.D);b=Xd(this.r);Zd(this.D,b);this.q=new le(this.D);this.q.bi(this.hh);I(this.q,"start",this.wj,l,this);I(this.q,"end",this.vj,l,this);I(this.q,"earlycancel",this.sf,l,this);this.q.jd(a)};this.Zb.init();var d={},e,g,h,p,q,w=j;O(O(O(this.g(),this.Zb,"beforedragstart",n(function(a){(!this.jf||!a.event.shiftKey)&&a.preventDefault()},this)),this.Zb,"dragmove",function(a){h=h||a.fj.x;p=p||Td(a.ab).x;q=q||(a.ab.previousElementSibling!=i?a.ab.previousElementSibling:
kc(a.ab.previousSibling,l));w=w&&!!q;var b=q?P(q).width:i,c=q?Td(q).x:i,S=a.fj.x-h;10>Math.abs(S)||(a.cc&&!d[a.cc.id]&&0<S?(b=P(a.ab).width,c=Td(a.cc).x,e=c-b+P(a.cc).width,S=this.o.bd[a.cc.id],g=S.time.getTime()/1E3+S.media.duration-this.o.bd[a.ab.id].media.duration,Rd(a.ab,e),Rd(a.cc,c-b-1),d[a.cc.id]=j,b=a.cc,b.parentNode&&b.parentNode.insertBefore(a.ab,b.nextSibling)):w&&(0>S&&p+S<c+b)&&(b=P(a.ab).width,e=c=Td(q).x,g=this.o.bd[q.id].time.getTime()/1E3,Rd(a.ab,e),Rd(q,c+b+1),b=q.previousElementSibling!=
i?q.previousElementSibling:kc(q.previousSibling,l),q.parentNode&&q.parentNode.insertBefore(a.ab,q),q=b,w=!!b))}),this.Zb,"dragend",function(a){g&&(U("/admin/_rescheduleprogram",i,"POST","program="+a.tl.id+"&time="+g),this.Zb.init(),g=i);d={};e=q=p=h=i;w=j})}Pa(this.o.ff,this.nd,this);O(O(this.g(),this.Ld,"click",n(function(){this.o.id!=R.a().l.id&&Rf(this.o)&&(this.o.d()||(this.o.Uf=j),R.a().c(Gf,this.o))},this)),id.a().ge,hd,n(this.update,this));this.o.subscribe(pg,this.ld,this);this.o.subscribe(sg,
this.nd,this);this.o.subscribe("remove-viewer",this.en,this);this.o.subscribe(tg,this.yi,this);R.a().subscribe(Jf,this.bl,this);R.a().subscribe(Gf,function(){this.Fg=0;this.bl()},this);M.a().subscribe("toggle-admin",ba("jf"),this);this.update()};m.bl=function(){if(this.bb){x(this.Qd[this.bb],"playing");var a=B("title",this.Qd[this.bb]);a&&(a.style.left="")}this.bb=k;if(a=R.a().l.d()){var b=this.Qd[a.id];b&&(this.bb=a.id,v(b,"playing"))}};
m.ld=function(a){var b=D("div",{"class":"program",id:a.id}),c=a.media.duration*R.a().Qb,d=this.Ha&&a.time.getTime()+1E3*a.media.duration>r();Ac(b,Vf,{Rh:a,media:a.media,repeat:600<c,yg:d});this.Qd[a.id]=b;var e=R.a().l.d();e&&a.id==e.id&&(v(b,"playing"),this.bb=a.id);var g=B("thumb",b);J(function(){a.media.mi.height<P(b).height+50?(v(g,"fix-height"),v(g,"pan-left")):v(g,"pan-top");p&&ae(g,200);z(b,"stretched",360<a.media.mi.height)});e=(a.time.getTime()-this.ca.getTime())/1E3*R.a().Qb;if(a.media.live)var h=
(r()-a.time.getTime())/1E3*R.a().Qb-100,c=c-h,e=e+h;ae(b,Math.ceil(c-1));Rd(b,Math.floor(e));this.Sh.appendChild(b);var p=120>c;z(b,"clipped",p);O(this.g(),b,"click",function(){y(A("guide"),"drag")||Y.a().c(Hg,a.media)});var q=y(b,"clipped")?200:P(b).width,c=B("title",b),e=B("program-play",b),h=B("program-plus",b);P(c);O(O(O(O(this.g(),b,"mouseover",function(){M.a().Tc&&(this.jf||Md(g,"background-position-y",a.media.Wd+10*Math.max(a.media.mi.width/q,1)+"%"))}),b,"mouseout",function(){M.a().Tc&&(this.jf||
Md(g,"background-position-y",a.media.Wd+"%"))}),e,"click",function(b){b.preventDefault();b.stopPropagation();b=gg(a.media);T.a().c(Kf,b)}),h,"click",function(b){b.preventDefault();b.stopPropagation();Pf().c(qg,a.media,j)});d&&(d=new le(B("repos",b)),d.me=function(a,b){var c=b-24;-50<=c&&50>=c&&Md(g,"background-position-y",50-c+"%")},O(O(this.g(),d,"end",function(){var b=(g.style[Ma("background-position")]||"").split(" ")[1],b=b.substring(0,b.length-1);a.media.Wd=b;U("/admin/_posthumb",xe(),"POST",
"media="+a.media.id+"&pos="+b)}),B("remove",b),"click",n(this.Im,this,a,b)))};m.yi=function(a){var b=this.Qd[a.id],a=(ud(a.time+"Z").getTime()-this.ca.getTime())/1E3*R.a().Qb;Rd(b,a)};m.Im=function(a,b){hc(b);U("/admin/_removeprogram",i,"POST","program="+a.id+"&media_id="+a.media.id+"&channel_id="+this.o.id);U("admin/_media/collection",n(function(){alert("Disallowed on all channels.")},this),"POST","&media="+a.media.id+"&approve=false")};
m.nd=function(a){if(V.a().h.id!=a.m.id){var b=this.La[a.m.id];b||(b=D("div","viewer"),this.gf.appendChild(b),this.La[a.m.id]=b);if(!a.Yd||a.Yd.getTime()>this.ca.getTime()){var c=E(Wf,{m:a.m});b.appendChild(c);var d=Math.max(a.si.getTime(),this.ca.getTime()),b=(d-this.ca.getTime())/1E3*R.a().Qb+200,d=(r()-d)/1E3*R.a().Qb;ae(c,d);Rd(c,b);Md(c,"background",a.m.color);O(this.g(),c,"click",function(b){vc(b.target,"watch-with")||Y.a().c(Ig,a.m)});DESKTOP&&!IPAD&&Jg(Kg.a(),B("pic",c),"top",{text:"JOIN "+
a.m.re().toUpperCase(),link:"#channel:"+a.U.id})}}};function Of(a,b){z(a.b(),"current",b);z(a.Ld,"current",b)}m.en=function(a){this.La[a.id]&&(hc(this.La[a.id]),Tb(this.La,a.id),R.a().c(Hf))};
m.update=function(){!this.kb&&this.o.Y.length&&this.o.c(Nf,j);this.kb=!!this.o.Y.length;z(this.b(),"offline",!this.kb);N(this.Ld,this.kb);if(this.o.Y.length&&!M.a().Za){if(this.bb&&0<this.Fg){var a=this.Qd[this.bb],b=Td(a).x+Td(A("guide")).x,a=B("title",a);Rd(a,200>b?-b+210:5)}else this.Fg++;Pb(this.o.ff,function(a){if(this.o.d()&&!a.Yd&&this.La[a.m.id]){var b=Math.max(a.si.getTime(),this.ca.getTime());P(this.Sh);var e=Math.floor((r()-b)/1E3*R.a().Qb),g=T.a().d();a.m.id==V.a().h.id&&g&&(e=Math.floor((g.time.getTime()+
1E3*T.a().Cf()-b)/1E3*R.a().Qb));this.La[a.m.id].lastChild&&ae(this.La[a.m.id].lastChild,e)}},this);$d(this.Ld,P(this.b()).height-1)}};function V(){K.call(this);this.df={};this.pj=l;this.Zg=[];this.wl={};this.Wf=[];this.subscribe(Lg,function(a,b){a.kb=b},this)}s(V,K);ka(V);V.prototype.add=function(a){this.df[a.id]=a};V.prototype.get=function(a){return this.df[a]};function Mg(a,b){var c=a.get(b.id);if(!c||c.Fn)c=new ig(b),a.add(c);b.online==l&&c.kb==j&&(c.F=new vd);c.kb=b.online||!!Ta(a.Wf,function(a){return a.id==c.id},a);c.Lb=b.last_seen?eg(dg.a(),b.last_seen):c.Lb;return c}
V.prototype.search=function(a){var b=Qa(Qb(this.df),function(b){return b.name&&0==Ea(a,b.name.substr(0,a.length))},this);Qa(Qb(this.wl),function(b){return 0==Ea(a,b.substr(0,a.length))},this);return b};var Lg="online";function Ng(a){if("function"==typeof a.Df)return a.Df();if(pa(a))return a.split("");if(oa(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return Qb(a)}function Og(a,b,c){if("function"==typeof a.forEach)a.forEach(b,c);else if(oa(a)||pa(a))t(a,b,c);else{var d;if("function"==typeof a.$g)d=a.$g();else if("function"!=typeof a.Df)if(oa(a)||pa(a)){d=[];for(var e=a.length,g=0;g<e;g++)d.push(g)}else d=Rb(a);else d=i;for(var e=Ng(a),g=e.length,h=0;h<g;h++)b.call(c,e[h],d&&d[h],a)}};function Pg(a,b){this.hc={};this.$=[];var c=arguments.length;if(1<c){c%2&&f(Error("Uneven number of arguments"));for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else if(a){a instanceof Pg?(c=a.$g(),d=a.Df()):(c=Rb(a),d=Qb(a));for(var e=0;e<c.length;e++)this.set(c[e],d[e])}}m=Pg.prototype;m.ba=0;m.cl=0;m.Df=function(){Qg(this);for(var a=[],b=0;b<this.$.length;b++)a.push(this.hc[this.$[b]]);return a};m.$g=function(){Qg(this);return this.$.concat()};
m.clear=function(){this.hc={};this.cl=this.ba=this.$.length=0};function Qg(a){if(a.ba!=a.$.length){for(var b=0,c=0;b<a.$.length;){var d=a.$[b];Object.prototype.hasOwnProperty.call(a.hc,d)&&(a.$[c++]=d);b++}a.$.length=c}if(a.ba!=a.$.length){for(var e={},c=b=0;b<a.$.length;)d=a.$[b],Object.prototype.hasOwnProperty.call(e,d)||(a.$[c++]=d,e[d]=1),b++;a.$.length=c}}m.get=function(a,b){return Object.prototype.hasOwnProperty.call(this.hc,a)?this.hc[a]:b};
m.set=function(a,b){Object.prototype.hasOwnProperty.call(this.hc,a)||(this.ba++,this.$.push(a),this.cl++);this.hc[a]=b};m.clone=function(){return new Pg(this)};function Rg(a){return Sg(a||arguments.callee.caller,[])}
function Sg(a,b){var c=[];if(Va(b,a))c.push("[...circular reference...]");else if(a&&50>b.length){c.push(Tg(a)+"(");for(var d=a.arguments,e=0;e<d.length;e++){0<e&&c.push(", ");var g;g=d[e];switch(typeof g){case "object":g=g?"object":"null";break;case "string":break;case "number":g=String(g);break;case "boolean":g=g?"true":"false";break;case "function":g=(g=Tg(g))?g:"[fn]";break;default:g=typeof g}40<g.length&&(g=g.substr(0,40)+"...");c.push(g)}b.push(a);c.push(")\n");try{c.push(Sg(a.caller,b))}catch(h){c.push("[exception trying to get caller]\n")}}else a?
c.push("[...long stack...]"):c.push("[end]");return c.join("")}function Tg(a){if(Ug[a])return Ug[a];a=String(a);if(!Ug[a]){var b=/function ([^\(]+)/.exec(a);Ug[a]=b?b[1]:"[Anonymous]"}return Ug[a]}var Ug={};function Vg(a,b,c,d,e){this.reset(a,b,c,d,e)}Vg.prototype.mn=0;Vg.prototype.ij=k;Vg.prototype.hj=k;var Wg=0;Vg.prototype.reset=function(a,b,c,d,e){this.mn="number"==typeof e?e:Wg++;this.ap=d||r();this.Be=a;this.pm=b;this.No=c;delete this.ij;delete this.hj};Vg.prototype.Jk=ba("Be");function Xg(a){this.rm=a}Xg.prototype.T=k;Xg.prototype.Be=k;Xg.prototype.ia=k;Xg.prototype.Dj=k;function Yg(a,b){this.name=a;this.value=b}Yg.prototype.toString=ca("name");var Zg=new Yg("SEVERE",1E3),$g=new Yg("WARNING",900),ah=new Yg("INFO",800),bh=new Yg("CONFIG",700),ch=new Yg("FINE",500);m=Xg.prototype;m.getParent=ca("T");m.rj=function(){this.ia||(this.ia={});return this.ia};m.Jk=ba("Be");function dh(a){return a.Be?a.Be:a.T?dh(a.T):k}
m.log=function(a,b,c){if(a.value>=dh(this).value){a=this.El(a,b,c);b="log:"+a.pm;fa.console&&(fa.console.timeStamp?fa.console.timeStamp(b):fa.console.markTimeline&&fa.console.markTimeline(b));fa.msWriteProfilerMark&&fa.msWriteProfilerMark(b);for(b=this;b;){var c=b,d=a;if(c.Dj)for(var e=0,g=i;g=c.Dj[e];e++)g(d);b=b.getParent()}}};
m.El=function(a,b,c){var d=new Vg(a,String(b),this.rm);if(c){d.ij=c;var e;var g=arguments.callee.caller;try{var h;var p=ia("window.location.href");if(pa(c))h={message:c,name:"Unknown error",lineNumber:"Not available",fileName:p,stack:"Not available"};else{var q,w,G=l;try{q=c.lineNumber||c.Mo||"Not available"}catch(L){q="Not available",G=j}try{w=c.fileName||c.filename||c.sourceURL||p}catch(Z){w="Not available",G=j}h=G||!c.lineNumber||!c.fileName||!c.stack?{message:c.message,name:c.name,lineNumber:q,
fileName:w,stack:c.stack||"Not available"}:c}e="Message: "+Fa(h.message)+'\nUrl: <a href="view-source:'+h.fileName+'" target="_new">'+h.fileName+"</a>\nLine: "+h.lineNumber+"\n\nBrowser stack:\n"+Fa(h.stack+"-> ")+"[end]\n\nJS stack traversal:\n"+Fa(Rg(g)+"-> ")}catch(S){e="Exception trying to expose exception! You win, we lose. "+S}d.hj=e}return d};function eh(a,b){a.log(Zg,b,i)}m.info=function(a,b){this.log(ah,a,b)};function fh(a,b){a.log(ch,b,i)}var gh={},hh=k;
function ih(a){hh||(hh=new Xg(""),gh[""]=hh,hh.Jk(bh));var b;if(!(b=gh[a])){b=new Xg(a);var c=a.lastIndexOf("."),d=a.substr(c+1),c=ih(a.substr(0,c));c.rj()[d]=b;b.T=c;gh[a]=b}return b};function jh(a){a=String(a);if(/^\s*$/.test(a)?0:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x10-\x1f\x80-\x9f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,"")))try{return eval("("+a+")")}catch(b){}f(Error("Invalid JSON string: "+a))};function kh(){}kh.prototype.nf=k;var lh;function mh(){}s(mh,kh);function nh(a){return(a=oh(a))?new ActiveXObject(a):new XMLHttpRequest}function ph(a){var b={};oh(a)&&(b[0]=j,b[1]=j);return b}
function oh(a){if(!a.Hj&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var b=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],c=0;c<b.length;c++){var d=b[c];try{return new ActiveXObject(d),a.Hj=d}catch(e){}}f(Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed"))}return a.Hj}lh=new mh;var qh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([\\w\\d\\-\\u0100-\\uffff.%]*)(?::([0-9]+))?)?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");function rh(a){H.call(this);this.headers=new Pg;this.be=a||k}s(rh,ed);rh.prototype.I=ih("goog.net.XhrIo");var sh=/^https?$/i,th=[];function U(a,b,c,d){var e=new rh;th.push(e);b&&I(e,"complete",b);I(e,"ready",Aa(uh,e));e.send(a,c,d,i)}function uh(a){a.ea();Wa(th,a)}m=rh.prototype;m.Xb=l;m.B=k;m.tg=k;m.Ae="";m.Wj="";m.xe=0;m.ye="";m.Tg=l;m.If=l;m.jh=l;m.Uc=l;m.ng=0;m.kd=k;m.dg="";m.Sn=l;
m.send=function(a,b,c,d){this.B&&f(Error("[goog.net.XhrIo] Object is active with another request"));b=b?b.toUpperCase():"GET";this.Ae=a;this.ye="";this.xe=0;this.Wj=b;this.Tg=l;this.Xb=j;this.B=this.be?nh(this.be):nh(lh);this.tg=this.be?this.be.nf||(this.be.nf=ph(this.be)):lh.nf||(lh.nf=ph(lh));this.B.onreadystatechange=n(this.rk,this);try{fh(this.I,vh(this,"Opening Xhr")),this.jh=j,this.B.open(b,a,j),this.jh=l}catch(e){fh(this.I,vh(this,"Error opening Xhr: "+e.message));wh(this,e);return}var a=c||
"",g=this.headers.clone();d&&Og(d,function(a,b){g.set(b,a)});d=fa.FormData&&a instanceof fa.FormData;if(b="POST"==b)b=!Object.prototype.hasOwnProperty.call(g.hc,"Content-Type")&&!d;b&&g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");Og(g,function(a,b){this.B.setRequestHeader(b,a)},this);this.dg&&(this.B.responseType=this.dg);"withCredentials"in this.B&&(this.B.withCredentials=this.Sn);try{this.kd&&(gd.clearTimeout(this.kd),this.kd=k),0<this.ng&&(fh(this.I,vh(this,"Will abort after "+
this.ng+"ms if incomplete")),this.kd=gd.setTimeout(n(this.Jn,this),this.ng)),fh(this.I,vh(this,"Sending request")),this.If=j,this.B.send(a),this.If=l}catch(h){fh(this.I,vh(this,"Send error: "+h.message)),wh(this,h)}};m.Jn=function(){"undefined"!=typeof ea&&this.B&&(this.ye="Timed out after "+this.ng+"ms, aborting",this.xe=8,fh(this.I,vh(this,this.ye)),this.dispatchEvent("timeout"),this.abort(8))};function wh(a,b){a.Xb=l;a.B&&(a.Uc=j,a.B.abort(),a.Uc=l);a.ye=b;a.xe=5;xh(a);yh(a)}
function xh(a){a.Tg||(a.Tg=j,a.dispatchEvent("complete"),a.dispatchEvent("error"))}m.abort=function(a){this.B&&this.Xb&&(fh(this.I,vh(this,"Aborting")),this.Xb=l,this.Uc=j,this.B.abort(),this.Uc=l,this.xe=a||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),yh(this))};m.p=function(){this.B&&(this.Xb&&(this.Xb=l,this.Uc=j,this.B.abort(),this.Uc=l),yh(this,j));rh.e.p.call(this)};m.rk=function(){!this.jh&&!this.If&&!this.Uc?this.Hm():zh(this)};m.Hm=function(){zh(this)};
function zh(a){if(a.Xb&&"undefined"!=typeof ea)if(a.tg[1]&&4==Ah(a)&&2==Bh(a))fh(a.I,vh(a,"Local request error detected and ignored"));else if(a.If&&4==Ah(a))gd.setTimeout(n(a.rk,a),0);else if(a.dispatchEvent("readystatechange"),4==Ah(a)){fh(a.I,vh(a,"Request complete"));a.Xb=l;try{var b=Bh(a),c,d;a:switch(b){case 200:case 201:case 202:case 204:case 304:case 1223:d=j;break a;default:d=l}if(!(c=d)){var e;if(e=0===b){var g=String(a.Ae).match(qh)[1]||k;if(!g&&self.location)var h=self.location.protocol,
g=h.substr(0,h.length-1);e=!sh.test(g?g.toLowerCase():"")}c=e}if(c)a.dispatchEvent("complete"),a.dispatchEvent("success");else{a.xe=6;var p;try{p=2<Ah(a)?a.B.statusText:""}catch(q){fh(a.I,"Can not get status: "+q.message),p=""}a.ye=p+" ["+Bh(a)+"]";xh(a)}}finally{yh(a)}}}
function yh(a,b){if(a.B){var c=a.B,d=a.tg[0]?ja:k;a.B=k;a.tg=k;a.kd&&(gd.clearTimeout(a.kd),a.kd=k);b||a.dispatchEvent("ready");try{c.onreadystatechange=d}catch(e){eh(a.I,"Problem encountered resetting onreadystatechange: "+e.message)}}}m.dc=function(){return!!this.B};function Ah(a){return a.B?a.B.readyState:0}function Bh(a){try{return 2<Ah(a)?a.B.status:-1}catch(b){return a.I.log($g,"Can not get status: "+b.message,i),-1}}function X(a){if(a.B)return jh(a.B.responseText)}
function Ch(a){try{if(!a.B)return k;if("response"in a.B)return a.B.response;switch(a.dg){case "":case "text":return a.B.responseText;case "arraybuffer":if("mozResponseArrayBuffer"in a.B)return a.B.mozResponseArrayBuffer}eh(a.I,"Response type "+a.dg+" is not supported on this browser");return k}catch(b){return fh(a.I,"Can not get response: "+b.message),k}}function vh(a,b){return b+" ["+a.Wj+" "+a.Ae+" "+Bh(a)+"]"};function R(){K.call(this);this.Ic=[];this.pd={};this.subscribe(Gf,this.Gc,this);this.subscribe(Jf,this.Qn,this)}s(R,K);ka(R);m=R.prototype;m.get=function(a){return this.pd[a]};function Sf(a,b){if(a.l&&a.l.d()&&!a.l.d().ended&&(b&&!a.l.G||!b))return a.l;if(a.we&&a.we.d()&&(b&&!a.we.G||!b))return a.we;for(var c=k,d=k,e=0;!d&&e<a.Ic.length;)d=(c=!a.Ic[e].G?a.Ic[e]:k)&&c.d(),e++;return c}m.sh=function(a){Pb(a,n(function(a){this.hf(a)},this))};
m.hf=function(a){var b=new og(a);this.Ic.push(b);this.pd[a.id]=b;b.G&&(this.G=b);this.c(If,b);return b};m.Gc=function(a,b){if(a&&!this.l||a&&this.l&&this.l.id!=a.id){this.we=this.l;this.l=a;a.d();var c=a.d(),d=c&&!Sb(c.media.Od);U("/_changechannel",xe(),"POST","channel="+a.id+"&friends="+d+"&media_id"+c.media.id+(b?"&forced=true":""));ng.a().Gc(a,this.we)}};m.Qn=aa();function Pf(){var a=R.a();if(!a.G){var b=V.a().h;a.G=new og({id:b.id,name:b.name.split(" ")[0]+"'s Channel",G:j})}return a.G}
var Gf="change-channel",Jf="next-program",If="add-channel",Hf="resize";function Dh(){Q.call(this);this.ac=new Bf("Guide");tf(this.ac,16,j);this.tc=new Bf("Sidebar");tf(this.tc,16,j);this.mc=new Bf("Next");this.Ta=new Bf("Play");tf(this.Ta,16,j);this.ae=new Bf("Volume");tf(this.ae,16,j);this.od=new Bf("Admin");tf(this.od,16,j);this.Jf=new Bf("Info")}s(Dh,Q);m=Dh.prototype;
m.w=function(){Dh.e.w.call(this);this.Vo=B("right",this.b());this.lb=B("progress",this.b());this.Ik=B("seek",this.b());this.Fa=B("elapsed",this.b());this.Ln=B("title",this.b());this.gj=B("duration",this.b());this.yo=B("current-time",this.b());Re(this,this.ac);this.ac.k(A("guide-toggle"));sf(this.ac,y(this.b(),"guide-toggled"));Re(this,this.tc);this.tc.k(A("sidebar-toggle"));sf(this.tc,y(this.b(),"sidebar-toggled"));Re(this,this.mc);this.mc.k(B("next",this.b()));Re(this,this.Ta);this.Ta.k(B("play",
this.b()));Re(this,this.ae);this.ae.k(B("volume",this.b()));Re(this,this.Jf);this.Jf.k(A("info-toggle"));N(this.Jf.b(),V.a().h.ug!=kg);Re(this,this.od);this.od.k(A("admin-toggle"));N(this.od.b(),V.a().h.ug==kg);var a=new Eh(this.Gn,1E3,this);this.resize();this.q=new le(this.Ik);this.q.Z(l);var b=this.lb,c=this.Fa,d=this.gj;this.q.me=function(a){if(0<a&&a<P(b).width){this.target.style.left=a+"px";c.style.width=a+"px";var a=a/P(b).width,g=T.a().d().media.duration;nc(d,Fh(Math.round(a*g).toString())+
" / "+Fh(g.toString()))}};O(O(O(O(O(O(O(O(O(O(O(O(this.g(),window,"resize",n(this.resize,this)),this.ac,"action",n(function(b){IPAD&&(b.preventDefault(),b.stopPropagation(),alert("The guide is not available yet on iPads."));a.zf()},this)),this.tc,"action",n(function(a){a.stopPropagation();M.a().c(md,af(this.tc))},this)),this.mc,"action",n(function(a){a.stopPropagation();R.a().l.Uf=j;if(a=T.a().d())a.ended=j;(a=R.a().l.d())?R.a().c(Jf,a):R.a().c(Gf,Sf(R.a()),j);this.mc.Z(Qf(R.a().l))},this)),this.Ta,
"action",n(function(a){a.stopPropagation();M.a().c(od,!af(this.Ta));this.resize()},this)),this.Jf,"action",n(function(a){a.stopPropagation();M.a().c("toggle-info")},this)),this.ae,"action",n(function(a){a.stopPropagation();M.a().c("mute",af(this.ae))},this)),this.od,"action",n(function(a){a.stopPropagation();M.a().c("toggle-admin",af(this.od));this.resize()},this)),id.a().ge,hd,n(function(){if(T.a().d()){var a=T.a().getCurrentTime()/T.a().d().media.duration;2>T.a().d().media.duration-T.a().getCurrentTime()&&
T.a().c(Gh);y(this.lb,"drag")||(nc(this.gj,(T.a().getCurrentTime()?Fh(T.a().getCurrentTime().toString())+" / ":"")+Fh(T.a().d().media.duration.toString())),ae(this.Fa,this.Th?a*this.Th:0))}},this)),this.lb,"click",n(function(a){!y(this.lb,"drag")&&T.a().d()&&(a=a.offsetX/P(this.lb).width*T.a().d().media.duration,x(this.Fa,"animate"),T.a().c(Hh,a),J(n(function(){v(this.Fa,"animate")},this),1E3))},this)),this.q,"beforedrag",n(function(){v(this.lb,"drag")},this)),this.q,"end",n(function(a){this.Ik.style.left=
"";a=a.left/P(this.lb).width*T.a().d().media.duration;x(this.Fa,"animate");T.a().c(Hh,a);J(n(function(){x(this.lb,"drag");v(this.Fa,"animate")},this),1E3)},this));IPAD&&this.ac.Z(l);T.a().subscribe(Kf,function(a){x(this.Fa,"animate");Ih(this,a,j)},this);R.a().subscribe(Gf,function(){x(this.Fa,"animate");x(this.b(),"window");J(n(this.resize,this),1E3);this.mc.Z(Qf(R.a().l));R.a().l.d()&&Ih(this,R.a().l.d(),j)},this);R.a().subscribe(Jf,function(a){this.resize();x(this.Fa,"animate");this.mc.Z(Qf(R.a().l));
Ih(this,a,j)},this);M.a().subscribe("mute",this.qm,this);M.a().subscribe(nd,this.og,this);M.a().subscribe(md,function(a){sf(this.tc,a);z(this.b(),"sidebar-toggled",a);this.resize()},this);M.a().subscribe(od,function(a){sf(this.Ta,!a)},this);T.a().subscribe(Jh,function(){R.a().l.G&&T.a().d()&&this.mc.Z(Qf(R.a().l));this.q.Z(j);v(this.Fa,"animate");this.resize()},this);Pf().subscribe(qg,function(){this.mc.Z(Qf(R.a().l))},this)};
function Ih(a,b,c){nc(a.Ln,b.media.name.toUpperCase());c&&(x(a.Fa,"animate"),ae(a.Fa,0),J(n(function(){v(this.Fa,"animate")},a),1E3))}m.qm=function(a){sf(this.ae,a)};m.Gn=function(){var a=af(this.ac);M.a().c(nd,a)};m.og=function(a){sf(this.ac,a);a&&(x(this.b(),"window"),x(this.b(),"collapsed"),J(n(this.resize,this)));J(n(function(){z(this.b(),"guide-toggled",a);a||(R.a().l&&R.a().l.d(),v(this.b(),"collapsed"),this.resize())},this),a?0:600)};
m.resize=function(){if(!R.a().l.G&&!M.a().Za){N(this.lb,l);var a=A("guide"),b=B("current",a),b=ac("program",b),a=(b=b[b.length-1])?Td(a).x+Td(b).x+P(b).width+210:9999999,a=Math.min(C().width-200,Math.max(100,C().width-a)),c=y(this.b(),"collapsed")&&!!b&&a<C().width-203;J(n(function(){z(this.b(),"window",c&&y(this.b(),"collapsed"))},this),400)}T.a().d()&&(N(this.lb,j),Ih(this,T.a().d()),this.Th=C().width-(af(this.tc)?580:260)-50,ae(this.lb,this.Th))};function Kh(a){return(a.link?'<a href="'+F(a.link)+'">':"")+'<div class="note'+(a.ih?" pic":"")+'">'+(a.ih?'<div class="picture"><img class="image" src='+F(a.ih)+' style="display: none"/></div>':"")+'<div class="action">'+(a.m?F(a.m.name)+" ":"")+F(a.action)+'</div><div class="content">'+F(a.content)+'</div><div class="close"></div></div>'+(a.link?"</a>":"")};function Lh(){Q.call(this)}s(Lh,Q);Lh.prototype.Q=function(){this.f=D("div",{id:"notify"})};Lh.prototype.u=function(a){Lh.e.u.call(this,a);Xf.a().subscribe("flash",function(a,c,d,e,g){this.mg(j,a,c,d,e,g)},this);Xf.a().subscribe("show",function(a,c,d,e,g){this.mg(l,a,c,d,e,g)},this)};
Lh.prototype.mg=function(a,b,c,d,e,g){var h=E(Kh,{action:b,content:c,m:d,ih:e,link:g}),p=B("image",h);B("close",h);O(O(this.g(),B("close",h),"click",function(a){a.preventDefault();a.stopPropagation();hc(h)}),p,"load",function(){N(p,j);J(function(){p.style.marginLeft=-1*p.clientWidth/2+"px";p.style.marginTop=-1*p.clientHeight/2+"px"})});this.b().appendChild(h);var q=B("note",h);J(function(){q&&(v(q,"show"),a?J(function(){x(q,"show");v(q,"fade-out");J(function(){hc(h)},5100)},3E3):J(function(){v(q,
"dim")},3E3))})};function T(){K.call(this);this.subscribe(Kf,function(a){Pf().c(pg,a);U("/_addprogram",xe(),"POST","channel_id="+R.a().G.id+"&media_id="+a.media.id+"&async=true");ug(ng.a(),a.media)},this);this.subscribe(Jh,function(a){U("/_started",xe(),"POST","media_id="+a.id)},this)}s(T,K);ka(T);T.prototype.di=ba("z");T.prototype.d=ca("bb");T.prototype.getCurrentTime=function(){return this.z&&this.z.getCurrentTime?this.z.getCurrentTime():0};
T.prototype.Cf=function(){return this.z&&this.z.getCurrentTime?this.z.getCurrentTime():0};var Gh="before-end",Kf="play-async",Jh="playing",Hh="seek";function Mh(){ue.call(this);this.queue=[]}s(Mh,ue);Mh.prototype.add=function(a){Va(this.queue,a)||(this.queue.push(a),I(a,"finish",this.vm,l,this))};Mh.prototype.p=function(){t(this.queue,function(a){a.ea()});this.queue.length=0;Mh.e.p.call(this)};function Nh(){Mh.call(this);this.cb=0}s(Nh,Mh);
Nh.prototype.play=function(a){if(0==this.queue.length)return l;if(a||this.n==ve)this.cb<this.queue.length&&this.queue[this.cb].n!=ve&&this.queue[this.cb].stop(l),this.cb=0,this.nc();else if(1==this.n)return l;this.Da("play");-1==this.n&&this.Da("resume");this.startTime=r();this.pe=k;this.n=1;this.queue[this.cb].play(a);return j};
Nh.prototype.stop=function(a){this.n=ve;this.pe=r();if(a)for(a=this.cb;a<this.queue.length;++a){var b=this.queue[a];b.n==ve&&b.play();b.n==ve||b.stop(j)}else this.cb<this.queue.length&&this.queue[this.cb].stop(l);this.Da("stop");this.oc()};Nh.prototype.vm=function(){1==this.n&&(this.cb++,this.cb<this.queue.length?this.queue[this.cb].play():(this.pe=r(),this.n=ve,this.Da("finish"),this.oc()))};function Oh(a){return a*a*a}function Ph(a){return 1-Math.pow(1-a,3)};function Qh(){Q.call(this);this.jk=l}s(Qh,Q);m=Qh.prototype;
m.w=function(){Qh.e.w.call(this);this.ma=R.a().l;var a=T.a(),b=this.ma&&this.ma.d();a.bb=b;T.a().d()&&(r(),T.a().d());this.Sc=B("fullscreen",this.b());a=B("expand",this.b());N(this.Sc,this.Sk());this.Ud=A("stagecover");this.dk=B("message",this.Ud);this.C=B("spinner",this.Ud);this.Me=B("restart",this.Ud);this.Ci=B("vote",this.b());this.Xc=B("like",this.b());this.Lc=B("dislike",this.b());b=new df(document);Rh(this);T.a().d()?(DESKTOP||this.ma.G)&&Sh(this,T.a().d()):T.a().c("no-media");O(O(O(O(O(O(O(O(O(this.g(),
window,"resize",n(this.resize,this)),document,"webkitfullscreenchange",n(function(){Lb(this.Sc,"full")},this)),document,"mozfullscreenchange",n(function(){Lb(this.Sc,"full")},this)),document,"fullscreenchange",n(function(){Lb(this.Sc,"full")},this)),this.Sc,"click",n(function(a){if(y(this.Sc,"full"))document.kl&&document.kl(),document.webkitCancelFullScreen&&document.webkitCancelFullScreen(),document.mozCancelFullScreen&&document.mozCancelFullScreen();else{var b=B("main");b.Ck&&b.Ck();b.webkitRequestFullScreen&&
b.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT);b.mozRequestFullScreen&&b.mozRequestFullScreen()}a.stopPropagation();a.preventDefault()},this)),a,"click",n(this.Nn,this)),this.b(),"mousemove",n(function(a){var b=a.offsetX/this.hb,a=a.offsetY/this.ra;if(0.6<b&&1>b&&0.7<a&&1>a&&(this.Pd==YT.PlayerState.PLAYING||this.Pd==YT.PlayerState.PAUSED))v(this.Ud,"click-through"),J(n(function(){x(this.Ud,"click-through")},this),500)},this)),b,"key",n(function(a){"32"==a.keyCode&&("INPUT"!=a.target.tagName&&
"TEXTAREA"!=a.target.tagName)&&Th(this)},this)),this.Ud,"click",n(function(a){!y(A("queue"),"show")&&(!y(A("search"),"show")&&!vc(a.target,"queue")&&!vc(a.target,"search"))&&Th(this)},this));R.a().subscribe(Gf,this.Gc,this);R.a().subscribe(Jf,function(a){Sh(this,a);Rh(this);U("/_play",xe(),"POST","media_id="+a.media.id+"&channel_id="+R.a().l.id)},this);T.a().subscribe(Kf,this.Nh,this);T.a().subscribe(Hh,this.ln,this);T.a().subscribe(Gh,function(){Rh(this,j);V.a().h.Kc&&T.a().d()&&V.a().h.Kc.Pe(T.a().d().media);
Uh(this);T.a().d().ended=j;Vh(this)},this);DESKTOP&&(O(O(O(this.g(),this.Me,"click",n(function(a){a.preventDefault();a.stopPropagation();T.a().d()&&Sh(this,T.a().d())},this)),this.Xc,"click",n(this.pk,this,this.Xc,j)),this.Lc,"click",n(this.pk,this,this.Lc,l)),M.a().subscribe(md,function(a){this.resize(a)},this),M.a().subscribe(nd,function(){J(n(this.resize,this))},this),M.a().subscribe(od,function(a){a?this.z.playVideo():this.z.pauseVideo();var a=B(a?"play":"pause",this.b()),b=new Nh;b.add(new Ke(a,
250,Ph));b.add(new Je(a,250,Oh));b.play()},this),M.a().subscribe("mute",function(a){this.z&&(a?this.z.mute():this.z.unMute())},this),M.a().subscribe("restart",function(){this.z.seekTo(0)},this));this.resize()};function Th(a){if(a.z&&a.z.getPlayerState&&DESKTOP)switch(a.z.getPlayerState()){case YT.PlayerState.PLAYING:M.a().c(od,l);break;case YT.PlayerState.PAUSED:M.a().c(od,j)}}m.Sk=function(){var a=B("main");return!(!a.Ck&&!a.webkitRequestFullScreen&&!a.mozRequestFullScreen)};
m.Nn=function(a){a.preventDefault();a.stopPropagation();Y.a();a=!y(A("sidebar"),"toggled");DESKTOP&&(M.a().c(md,a),M.a().c(nd,a))};function Sh(a,b){T.a().bb=b;a.gm!=b.id&&(Xf.a().c("flash","Now playing",b.media.name,i,b.media.ni,"#info:"+b.media.id),a.gm=b.id);a.play(b.media);DESKTOP&&U("/_like/"+b.media.id,n(function(a){a=X(a.target);z(this.Xc,"checked",a.liked||y(this.Xc,"checked"));z(this.Lc,"checked",a.disliked||y(this.Lc,"checked"))},a))}
m.play=function(a,b){T.a().d().async?T.a().d():(r(),T.a().d());!this.z||!this.z.loadVideoById?(this.z=new YT.Player("ytplayer",{height:C().height-40,width:C().width,videoId:a?a.bc:k,playerVars:{controls:0,showinfo:0,iv_load_policy:3,modestbranding:1,wmode:"opaque",origin:HOST_URL,enablejsapi:1,rel:0,html5:HTML5?1:0},events:{onStateChange:n(this.Um,this),onReady:n(this.Gm,this),onError:n(this.Fm,this)}}),T.a().di(this.z)):a?this.z.cueVideoById(a.bc,i,"large"):b&&this.z.cuePlaylist(Ra(b.Y,function(a){return a.media.bc}),
b.Na)};m.resize=function(){if(IPHONE)ae(this.b(),C().width-320);else{var a=A("stagecover"),b=B("message",a),c=A("guide").style.height,c=c.substring(0,c.length-2),c=M.a().Tc?c:40,d=M.a().hd?320:0;this.ra=C().height-c;this.hb=C().width-d;$d(this.b(),C().height-c);ae(this.b(),C().width-d);$d(a,C().height-c);ae(a,C().width-d);a=P(b);Md(b,{"margin-left":-a.width/2+"px","margin-top":-a.height/2+"px"});z(this.Sc,"full",this.Sk&&(document.fullScreen||document.webkitIsFullScreen||document.Po))}};
m.Gc=function(a){if(a=a.d())Sh(this,a),U("/_play",xe(),"POST","media_id="+a.media.id+"&channel_id="+R.a().l.id);Rh(this)};function Uh(a){z(a.Xc,"checked",l);z(a.Lc,"checked",l)}m.pk=function(a,b,c){c.preventDefault();c.stopPropagation();T.a().d()&&(a=Lb(a,"checked"),(c=b&&y(this.Lc,"checked")||!b&&y(this.Xc,"checked"))&&x(b?this.Lc:this.Xc,"checked"),U(b?"/_like":"/_dislike",i,"POST","media_id="+T.a().d().media.id+(!a?"&delete=1":"")+(c?"&flip=1":"")))};
m.Nh=function(a){Sh(this,a);Rh(this);U("/_play",xe(),"POST","media_id="+a.media.id+"&channel_id="+R.a().l.id);U("/_optin",xe(),"POST","media_id="+a.media.id)};m.ln=function(a){this.z.seekTo&&this.z.seekTo(a,j)};
m.Um=function(a){this.Pd=a.data;Rh(this);switch(a.data){case YT.PlayerState.CUED:a=T.a().d().async?T.a().d().seek:M.a().Za?0:(r()-T.a().d().time.getTime())/1E3;DESKTOP&&this.z.seekTo(a);this.z.playVideo();M.a().c(od,j);break;case YT.PlayerState.PLAYING:this.jk=l;T.a().c(Jh,T.a().d().media);break;case YT.PlayerState.ENDED:V.a().h.Kc&&T.a().d()&&V.a().h.Kc.Pe(T.a().d().media),Uh(this),T.a().d().ended=j,Vh(this)}};
m.Gm=function(){this.z.setPlaybackQuality("large");var a=T.a().d().async?T.a().d().seek:M.a().Za?0:(r()-T.a().d().time.getTime())/1E3;this.z.seekTo(a);this.z.playVideo();M.a().c("mute",this.z.isMuted())};m.Fm=function(a){100==a?Vh(this):(T.a().c("no-media"),Rh(this,i,j))};
function Rh(a,b,c){if(!IPHONE){var d=A("stagecover"),e=T.a().d()?T.a().getCurrentTime():0;if(c)N(a.C,l),N(a.Me,j),v(d,"covered");else{if(!T.a().d()||T.a().d()&&e>T.a().d().media.duration)T.a().c("no-media"),nc(a.dk.firstChild,Wh),N(a.C,l),N(a.Me,l),N(a.Ci,l),v(d,"covered");(a.Pd==YT.PlayerState.PLAYING&&0<a.z.getCurrentTime()||a.Pd==YT.PlayerState.PAUSED&&0<a.z.getCurrentTime())&&!b?(N(a.C,l),N(a.Me,l),x(d,"covered"),N(a.Ci,j)):(nc(a.dk.firstChild,Xh),N(a.C,j),N(a.Me,l),N(a.Ci,j),v(d,"covered"),a.Pd==
YT.PlayerState.PLAYING&&J(n(function(){Rh(this)},a),500));de(d,a.Pd==YT.PlayerState.BUFFERING?0.9:1);a.resize()}}}function Vh(a){if(!a.Ro){var b=R.a().l.d();b?R.a().c(Jf,b):(T.a().bb=k,R.a().c(Gf,Sf(R.a()),j));a.jk=j}}var Wh="THIS CHANNEL IS CURRENTLY OFFLINE",Xh="LOADING STORY";function Yh(a,b){Q.call(this,b);this.zb=a||""}s(Yh,Q);Yh.prototype.xb=k;var Zh="placeholder"in document.createElement("input");m=Yh.prototype;m.te=l;m.Q=function(){this.f=this.gb().Q("input",{type:"text"})};m.u=function(a){Yh.e.u.call(this,a);this.zb||(this.zb=a.getAttribute("label")||"");var b;a:{var c=$b(a);try{b=c&&c.activeElement;break a}catch(d){}b=k}b==a&&(this.te=j,x(this.b(),this.ce));Zh?this.b().placeholder=this.zb:this.b().setAttribute("aria-label",this.zb)};
m.w=function(){Yh.e.w.call(this);var a=new Gd(this);O(a,this.b(),"focus",this.xj);O(a,this.b(),"blur",this.Jl);Zh?this.A=a:(pb&&O(a,this.b(),["keypress","keydown","keyup"],this.Pl),O(a,$b(this.b())?$b(this.b()).parentWindow||$b(this.b()).defaultView:window,"load",this.Xl),this.A=a,$h(this));ai(this);this.b().em=this};m.Qc=function(){Yh.e.Qc.call(this);this.A&&(this.A.ea(),this.A=k);this.b().em=k};function $h(a){!a.Cl&&(a.A&&a.b().form)&&(O(a.A,a.b().form,"submit",a.Sl),a.Cl=j)}
m.p=function(){Yh.e.p.call(this);this.A&&(this.A.ea(),this.A=k)};m.ce="label-input-label";m.xj=function(){this.te=j;x(this.b(),this.ce);if(!Zh&&!bi(this)&&!this.cm){var a=this,b=function(){a.b().value=""};u?J(b,10):b()}};m.Jl=function(){Zh||(Id(this.A,this.b(),"click",this.xj),this.xb=k);this.te=l;ai(this)};m.Pl=function(a){27==a.keyCode&&("keydown"==a.type?this.xb=this.b().value:"keypress"==a.type?this.b().value=this.xb:"keyup"==a.type&&(this.xb=k),a.preventDefault())};
m.Sl=function(){bi(this)||(this.b().value="",J(this.Il,10,this))};m.Il=function(){bi(this)||(this.b().value=this.zb)};m.Xl=function(){ai(this)};function bi(a){return!!a.b()&&""!=a.b().value&&a.b().value!=a.zb}m.clear=function(){this.b().value="";this.xb!=k&&(this.xb="")};m.reset=function(){bi(this)&&(this.clear(),ai(this))};m.xa=function(a){this.xb!=k&&(this.xb=a);this.b().value=a;ai(this)};m.v=function(){return this.xb!=k?this.xb:bi(this)?this.b().value:""};
function ai(a){Zh?a.b().placeholder!=a.zb&&(a.b().placeholder=a.zb):($h(a),a.b().setAttribute("aria-label",a.zb));bi(a)?x(a.b(),a.ce):(!a.cm&&!a.te&&v(a.b(),a.ce),Zh||J(a.hn,10,a))}m.Z=function(a){this.b().disabled=!a;z(this.b(),this.ce+"-disabled",!a)};m.isEnabled=function(){return!this.b().disabled};m.hn=function(){this.b()&&(!bi(this)&&!this.te)&&(this.b().value=this.zb)};function ci(a,b,c,d,e,g,h,p,q){var w,G;if(w=c.offsetParent){var L="HTML"==w.tagName||"BODY"==w.tagName;if(!L||"static"!=Qd(w,"position"))G=Xd(w),L||(L=(L=Yd(w))&&pb?-w.scrollLeft:L&&(!u||!Bb("8"))?w.scrollWidth-w.clientWidth-w.scrollLeft:w.scrollLeft,G=Nb(G,new Mb(L,w.scrollTop)))}w=G||new Mb;G=ce(a);if(L=Wd(a)){var Z=new Ld(L.left,L.top,L.right-L.left,L.bottom-L.top),L=Math.max(G.left,Z.left),S=Math.min(G.left+G.width,Z.left+Z.width);if(L<=S){var xa=Math.max(G.top,Z.top),Z=Math.min(G.top+G.height,
Z.top+Z.height);xa<=Z&&(G.left=L,G.top=xa,G.width=S-L,G.height=Z-xa)}}L=Yb(a);xa=Yb(c);if(L.H!=xa.H){var S=L.H.body,xa=xa.H.parentWindow||xa.H.defaultView,Z=new Mb(0,0),hb=$b(S)?$b(S).parentWindow||$b(S).defaultView:window,rg=S;do{var na;if(hb==xa)na=Xd(rg);else{na=rg;var Kb=new Mb;if(1==na.nodeType){if(na.getBoundingClientRect){var va=Ud(na);Kb.x=va.left;Kb.y=va.top}else{var va=xc(Yb(na)),$a=Xd(na);Kb.x=$a.x-va.x;Kb.y=$a.y-va.y}pb&&!Bb(12)&&(va=i,va=i,u?va="-ms-transform":qb?va="-webkit-transform":
ob?va="-o-transform":pb&&(va="-moz-transform"),$a=i,va&&($a=Qd(na,va)),$a||($a=Qd(na,"transform")),$a?(na=$a.match(ke),va=!na?new Mb(0,0):new Mb(parseFloat(na[1]),parseFloat(na[2]))):va=new Mb(0,0),Kb=new Mb(Kb.x+va.x,Kb.y+va.y))}else va=ra(na.Dl),$a=na,na.targetTouches?$a=na.targetTouches[0]:va&&na.la.targetTouches&&($a=na.la.targetTouches[0]),Kb.x=$a.clientX,Kb.y=$a.clientY;na=Kb}Z.x+=na.x;Z.y+=na.y}while(hb&&hb!=xa&&(rg=hb.frameElement)&&(hb=hb.parent));S=Nb(Z,Xd(S));u&&!wc(L)&&(S=Nb(S,xc(L)));
G.left+=S.x;G.top+=S.y}a=(b&4&&Yd(a)?b^2:b)&-5;b=new Mb(a&2?G.left+G.width:G.left,a&1?G.top+G.height:G.top);b=Nb(b,w);e&&(b.x+=(a&2?-1:1)*e.x,b.y+=(a&1?-1:1)*e.y);var W;if(h)if(q)W=q;else if(W=Wd(c))W.top-=w.y,W.right-=w.x,W.bottom-=w.y,W.left-=w.x;a:{q=b.clone();e=0;a=(d&4&&Yd(c)?d^2:d)&-5;d=P(c);p=p?p.clone():d.clone();if(g||0!=a)a&2?q.x-=p.width+(g?g.right:0):g&&(q.x+=g.left),a&1?q.y-=p.height+(g?g.bottom:0):g&&(q.y+=g.top);if(h){if(W){g=q;e=0;if(65==(h&65)&&(g.x<W.left||g.x>=W.right))h&=-2;if(132==
(h&132)&&(g.y<W.top||g.y>=W.bottom))h&=-5;g.x<W.left&&h&1&&(g.x=W.left,e|=1);g.x<W.left&&(g.x+p.width>W.right&&h&16)&&(p.width=Math.max(p.width-(g.x+p.width-W.right),0),e|=4);g.x+p.width>W.right&&h&1&&(g.x=Math.max(W.right-p.width,W.left),e|=1);h&2&&(e|=(g.x<W.left?16:0)|(g.x+p.width>W.right?32:0));g.y<W.top&&h&4&&(g.y=W.top,e|=2);g.y>=W.top&&(g.y+p.height>W.bottom&&h&32)&&(p.height=Math.max(p.height-(g.y+p.height-W.bottom),0),e|=8);g.y+p.height>W.bottom&&h&4&&(g.y=Math.max(W.bottom-p.height,W.top),
e|=2);h&8&&(e|=(g.y<W.top?64:0)|(g.y+p.height>W.bottom?128:0));h=e}else h=256;e=h;if(e&496){c=e;break a}}Rd(c,q);if(!(d==p||(!d||!p?0:d.width==p.width&&d.height==p.height)))g=wc(Yb($b(c))),u&&(!g||!Bb("8"))?(h=c.style,g?(g=ge(c,"padding"),c=je(c),h.pixelWidth=p.width-c.left-g.left-g.right-c.right,h.pixelHeight=p.height-c.top-g.top-g.bottom-c.bottom):(h.pixelWidth=p.width,h.pixelHeight=p.height)):(c=c.style,pb?c.MozBoxSizing="border-box":qb?c.WebkitBoxSizing="border-box":c.boxSizing="border-box",c.width=
Math.max(p.width,0)+"px",c.height=Math.max(p.height,0)+"px");c=e}return c};function di(){}di.prototype.Cb=aa();function ei(a,b,c){this.element=a;this.Ng=b;this.Qm=c}s(ei,di);ei.prototype.Cb=function(a,b,c){ci(this.element,this.Ng,a,b,i,c,this.Qm)};function fi(a,b,c,d){ei.call(this,a,b);this.hm=c?5:0;this.Jh=d||i}s(fi,ei);fi.prototype.Cb=function(a,b,c,d){var e=ci(this.element,this.Ng,a,b,k,c,10,d,this.Jh);if(e&496){var g=gi(e,this.Ng),b=gi(e,b),e=ci(this.element,g,a,b,k,c,10,d,this.Jh);e&496&&(g=gi(e,g),b=gi(e,b),ci(this.element,g,a,b,k,c,this.hm,d,this.Jh))}};function gi(a,b){a&48&&(b^=2);a&192&&(b^=1);return b};function hi(a,b){H.call(this);this.S=new Gd(this);var c=a||k;ii(this);this.f=c;b&&this.Lk(b)}s(hi,ed);m=hi.prototype;m.f=k;m.lf=j;m.Li=k;m.Ed=l;m.on=l;m.qh=-1;m.Tj=-1;m.Zl=l;m.ul=j;m.Ac="toggle_display";m.Lk=ba("Ac");m.b=ca("f");function ii(a){a.Ed&&f(Error("Can not change this state of the popup while showing."))}m.yb=ca("Ed");m.ya=function(a){this.Qe&&this.Qe.stop();this.ue&&this.ue.stop();a?this.mg():this.Cd()};m.Cb=ja;
m.mg=function(){if(!this.Ed&&this.dispatchEvent("beforeshow")){this.f||f(Error("Caller must call setElement before trying to show the popup"));this.Cb();var a=$b(this.f);this.Zl&&O(this.S,a,"keydown",this.ym,j);if(this.lf)if(O(this.S,a,"mousedown",this.ok,j),u){var b;try{b=a.activeElement}catch(c){}for(;b&&"IFRAME"==b.nodeName;){try{var d=b.contentDocument||b.contentWindow.document}catch(e){break}a=d;b=a.activeElement}O(this.S,a,"mousedown",this.ok,j);O(this.S,a,"deactivate",this.nk)}else O(this.S,
a,"blur",this.nk);"toggle_display"==this.Ac?(this.f.style.visibility="visible",N(this.f,j)):"move_offscreen"==this.Ac&&this.Cb();this.Ed=j;this.Qe?(Yc(this.Qe,"end",this.tk,l,this),this.Qe.play()):this.tk()}};m.Cd=function(a){if(!this.Ed||!this.dispatchEvent({type:"beforehide",target:a}))return l;this.S&&Jd(this.S);this.Ed=l;this.Tj=r();this.ue?(Yc(this.ue,"end",Aa(this.Xi,a),l,this),this.ue.play()):this.Xi(a);return j};
m.Xi=function(a){"toggle_display"==this.Ac?this.on?J(this.Fj,0,this):this.Fj():"move_offscreen"==this.Ac&&(this.f.style.top="-10000px");this.dispatchEvent({type:"hide",target:a})};m.Fj=function(){this.f.style.visibility="hidden";N(this.f,l)};m.tk=function(){this.qh=r();this.Tj=-1;this.dispatchEvent("show")};m.ok=function(a){a=a.target;!mc(this.f,a)&&((!this.Li||mc(this.Li,a))&&!(150>r()-this.qh))&&this.Cd(a)};m.ym=function(a){27==a.keyCode&&this.Cd(a.target)&&(a.preventDefault(),a.stopPropagation())};
m.nk=function(a){if(this.ul){var b=$b(this.f);if(u||ob){if(a=b.activeElement,!a||mc(this.f,a)||"BODY"==a.tagName)return}else if(a.target!=b)return;150>r()-this.qh||this.Cd()}};m.p=function(){hi.e.p.call(this);this.S.ea();Hc(this.Qe);Hc(this.ue);delete this.f;delete this.S};function ji(a,b){this.xk=4;this.Ph=b||i;hi.call(this,a)}s(ji,hi);function ki(a,b){a.xk=b;a.yb()&&a.Cb()}function li(a,b){a.Ph=b||i;a.yb()&&a.Cb()}function mi(a,b,c,d,e){a.mm=b==k||b instanceof Kd?b:new Kd(b,c,d,e);a.yb()&&a.Cb()}ji.prototype.Cb=function(){if(this.Ph){var a=!this.yb()&&"move_offscreen"!=this.Ac,b=this.b();a&&(b.style.visibility="hidden",N(b,j));this.Ph.Cb(b,this.xk,this.mm);a&&N(b,l)}};function ni(a,b,c){H.call(this);this.gc=a;this.W=b;this.S=c;this.Dg=n(this.Nm,this)}s(ni,H);var Eh=ni;m=ni.prototype;m.lg=l;m.wk=0;m.za=k;m.zf=function(){!this.za&&!this.wk?this.ne():this.lg=j};m.stop=function(){this.za&&(gd.clearTimeout(this.za),this.za=k,this.lg=l)};m.p=function(){ni.e.p.call(this);this.stop()};m.Nm=function(){this.za=k;this.lg&&!this.wk&&(this.lg=l,this.ne())};m.ne=function(){this.za=J(this.Dg,this.W);this.gc.call(this.S)};function oi(a,b){H.call(this);this.gc=a;this.S=b;this.wb=new we(n(this.Mm,this),0,this)}s(oi,H);m=oi.prototype;m.W=0;m.Yh=0;m.Mj=l;m.p=function(){this.wb.ea();delete this.gc;delete this.S;oi.e.p.call(this)};m.start=function(a,b){this.stop();this.Mj=l;var c=b||0;this.W=Math.max(a||0,0);this.Yh=0>c?-1:r()+c;this.wb.start(0>c?this.W:Math.min(this.W,c))};m.stop=function(){this.wb.stop()};m.dc=function(){return this.wb.dc()};
m.Mm=function(){if(this.gc.call(this.S))this.Mj=j;else if(0>this.Yh)this.wb.start(this.W);else{var a=this.Yh-r();0>=a||this.wb.start(Math.min(this.W,a))}};function pi(a){H.call(this);this.f=a;this.Fe=this.f.value;this.A=new Gd(this);this.Ab=r();qb||u||pb&&Bb("1.9")?O(this.A,a,"paste",this.vd):O(this.A,a,["keydown","blur","focus","mouseover","input"],this.Ql);this.wb=new oi(n(this.Ri,this))}s(pi,ed);m=pi.prototype;m.n="init";m.I=ih("goog.events.PasteHandler");m.p=function(){pi.e.p.call(this);this.A.ea();this.A=k;this.wb.ea();this.wb=k};
m.Ri=function(){if(this.Fe==this.f.value)return l;this.I.info("detected textchange after paste");this.dispatchEvent("after_paste");return j};m.vd=function(a){a=new Oc(a.la);a.type="paste";this.dispatchEvent(a);J(function(){this.Ri()||this.wb.start(50,200)},0,this)};
m.Ql=function(a){switch(this.n){case "init":switch(a.type){case "blur":this.n="init";break;case "focus":this.n="focused";break;case "mouseover":this.n="init";this.f.value!=this.Fe&&(this.I.info("paste by dragdrop while on init!"),this.vd(a));break;default:eh(this.I,"unexpected event "+a.type+"during init")}break;case "focused":switch(a.type){case "input":var b=this.Ab+400;if(r()>b||"focus"==this.an)this.I.info("paste by textchange while focused!"),this.vd(a);break;case "blur":this.n="init";break;
case "keydown":this.I.info("key down ... looking for ctrl+v");if(jb&&ob&&0==a.keyCode||jb&&ob&&17==a.keyCode)break;this.n="typing";break;case "mouseover":this.f.value!=this.Fe&&(this.I.info("paste by dragdrop while focused!"),this.vd(a));break;default:eh(this.I,"unexpected event "+a.type+" during focused")}break;case "typing":switch(a.type){case "input":this.n="focused";break;case "blur":this.n="init";break;case "keydown":if(a.ctrlKey&&86==a.keyCode||a.shiftKey&&45==a.keyCode||a.metaKey&&86==a.keyCode)this.I.info("paste by ctrl+v while keypressed!"),
this.vd(a);break;case "mouseover":this.f.value!=this.Fe&&(this.I.info("paste by dragdrop while keypressed!"),this.vd(a));break;default:eh(this.I,"unexpected event "+a.type+" during keypressed")}break;default:eh(this.I,"invalid "+this.n+" state")}this.Ab=r();this.Fe=this.f.value;this.I.info(a.type+" -> "+this.n);this.an=a.type};function qi(){return'<div class="popup" id="popup" style="visibility: hidden; display: none;"><div class="content"></div><div id="tailarrow"></div></div>'}function ri(a){return(a.link?'<a href="'+F(a.link)+'">':"")+'<div class="tooltip">'+a.text+"</div>"+(a.link?"</a>":"")}
function si(){return'<div class="comment-oob">Click <div class="fb-icon"></div> and <div class="twitter-icon"></div> for instant sharing<div class="on-off"><div class="off">OFF <div class="twitter-icon"></div></div> &#8594; <div class="on">ON <div class="twitter-icon on"></div></div></div></div>'}
function ti(){return'<div class="create-poll"><div class="label">CREATE A USER POLL</div><input type="text" placeholder="Title" class="poll-title"/><div class="label">OPTIONS</div><input type="text" placeholder="Option 1" class="option-input"/><input type="text" placeholder="Option 2" class="option-input"/><div class="add-option button">ADD OPTION</div><div class="submit-poll button">CREATE</div></div>'}
function ui(){return'<div class="select-program"><div class="select-header">Suggest a Program</div><div class="select-content"><div class="page"><input type="text" class="program-input" placeholder="paste a youtube link"/><div class="page2"></div></div></div></div>'}function vi(a){return'<div class="confirm-media"><img src="'+F(a.li)+'" /><div class="title">'+F(a.title)+'</div><div class="dark button">Yes</div></div>'};function Kg(){var a=A("popup");a||(a=E(qi),document.body.appendChild(a));ji.call(this,a);I(window,"resize",n(this.ya,this,l));I(this,"hide",this.Bm);this.cj=this.fi=this.fh=l;this.o=vg.a();this.o.subscribe("tooltip",this.yn,this);this.o.subscribe("oob",this.vn,this);this.o.subscribe("create-poll",this.qn,this);this.o.subscribe("select-program",this.rn,this);this.o.subscribe("hide",this.Cd,this);I(this.b(),"mouseover",n(function(){this.fh=j},this));I(this.b(),"mouseout",n(function(){this.fh=l;this.fi&&
this.o.c("hide")},this))}s(Kg,ji);ka(Kg);function Jg(a,b,c,d){I(b,"mouseover",n(function(){this.Si&&gd.clearTimeout(this.Si);this.fi=l;this.o.c("tooltip",b,c,d)},a));I(b,"mouseout",n(function(){this.Si=J(n(function(){this.fh?this.fi=j:this.o.c("hide")},this),100)},a))}
function wi(a,b,c){"top"==c?(ki(a,1),c=-1*(P(a.b()).width-P(b).width)/2,mi(a,0,0,6,c),li(a,new fi(b,4)),a.b().className="popup",v(a.b(),"top")):"left"==c?(ki(a,0),c=-1*(P(a.b()).height-P(b).height)/2,mi(a,c,6,0,0),li(a,new fi(b,6)),a.b().className="popup",v(a.b(),"left")):"right"==c&&(ki(a,0),c=-1*(P(a.b()).height-P(b).height)/2,mi(a,c,0,0,6),li(a,new fi(b,6)),a.b().className="popup",v(a.b(),"right"))}m=Kg.prototype;m.Bm=function(){this.cj||(this.Cd(),this.o.c("on-hide"))};
m.Pa=function(){return B("content",this.b())};m.yn=function(a,b,c,d){this.ya(l);wi(this,a,b);Ac(this.Pa(),ri,{text:"function"==typeof c.text?c.text():c.text,link:c.link});d&&(ii(this),this.lf=l);this.ya(j)};m.vn=function(a,b,c){this.ya(l);wi(this,a,b);a=-1*(P(this.b()).width-P(a).width)/2;mi(this,0,0,36,a);Ac(this.Pa(),si,{text:c.html,link:c.link});ii(this);this.lf=l;this.ya(j);O(this.S,this.b(),"click",n(function(){this.o.c("hide")},this))};
m.qn=function(a){this.ya(l);ki(this,2);li(this,new fi(a,7));this.b().className="popup";v(this.b(),"top");a=-1*(P(this.b()).width-P(a).width)/2;mi(this,0,0,36,a);Ac(this.Pa(),ti,{});ii(this);this.lf=l;this.ya(j);this.cj=j};
m.rn=function(a,b){this.ya(l);ki(this,0);var c=-1*(P(this.b()).height-P(a).height)/2;mi(this,c,0,0,5);li(this,new fi(a,6));v(this.b(),"left");Ac(this.Pa(),ui);this.Ve=new Yh("paste a YouTube link");this.Ve.k(B("program-input",this.b()));var c=new df(this.Ve.b()),d=new pi(this.Ve.b()),e=new Eh(n(this.Gh,this,b),1E3);this.ya(j);O(O(O(this.S,d,"after_paste",n(this.Gh,this,b)),c,"key",n(function(){e&&e.zf()},this)),this.Ve.b(),"focus",n(this.Gh,this,b))};
m.Gh=function(a){var b=B("select-content",this.b());try{var c;var d=this.Ve.v(),e=xi.exec(d);e?c=new yi(e[1]||e[2],i,i):f(Error("failed to parse video id from youtube url: "+d));U(Ca("https://gdata.youtube.com/feeds/api/videos/%s?v=2&alt=json",c.dl),n(function(d){var e=jh(Ch(d.target)).entry,d=e.title.$t,g=e.media$group.media$thumbnail[0].url,e=B("page2",this.b());Ac(e,vi,{title:d,li:g});d=new Bf("Yes");d.k(B("button",e));(new He(b,[0,0],[260,0],300,Ph)).play();O(this.S,d,"action",n(this.Ch,this,
a,c))},this))}catch(g){}};m.Ch=function(a,b){U("/_addprogram",n(function(b){b=jh(Ch(b.target));b=new fg(b);a.c(pg,b);this.ya(l)},this),"POST","channel="+a.id+"&youtube_id="+b.dl)};function zi(){K.call(this);this.Oi=[];this.Dk=[]}s(zi,K);ka(zi);
zi.prototype.search=function(a,b){U("https://gdata.youtube.com/feeds/api/videos?q="+a+"&max-results=10&v=2&alt=json",n(function(a){a=X(a.target);this.Dk=Ra(a.feed.entry,function(a){var b=new Zf({id:"youtube"+a.media$group.yt$videoid.$t,name:a.title.$t,host_id:a.media$group.yt$videoid.$t,description:a.media$group.media$description.$t,duration:a.media$group.yt$duration.seconds,publisher:{name:a.author[0].name.$t,id:"youtube"+a.author[0].name.$t,picture:"https://i4.ytimg.com/i/"+a.author[0].yt$userId.$t+
"/1.jpg"}});b.qc=ud(a.published.$t);return b},this);b&&b(this.Dk)},this))};function Ai(a){return'<div class="search-channel"><div class="pic"><img src="'+F(a.li)+'"></div><div class="title">'+F(a.name)+'</div><div class="loading loading-channel"><div class="loading-spinner"></div></div></div>'};function Bi(a){return'<div class="info"><div class="picture"><img src="'+F(a.media.Fb)+'" class="thumb"><div class="ytvideo"></div><div class="publisher"><img src="'+F(a.media.va.L)+'"><div class="name">'+F(a.media.va.name)+'</div></div><div class="links"><div class="local"></div><a target="_blank" href="'+a.media.$l+'"><div class="host"></div></a></div><div class="link-select" style="display:none"><input onClick="this.select();" class="link-input" type="text" value="'+a.media.link+'" readonly="readonly"/></div><div class="title"><div class="text">'+
F(a.media.name)+'</div></div><div class="scrollable ios-scroll" '+(!a.description?'style="display:none"':"")+'><div class="desc-link"><a href="#">DESCRIPTION</a><div class="published">'+F(a.qc)+'</div></div><div class="description">'+a.description+'</div></div><div class="button play"><div class="icon"></div><div class="loading-icon"></div></div><div class="options"><div class="button star"><div class="icon"></div></div><div class="button facebook"><div class="icon"></div></div><div class="button twitter"><div class="icon"></div></div><div class="button send"><div class="icon"></div></div></div></div><div class="viewers" style="display: none"><div class="label"><div class="eye-icon"></div></div></div><div class="info-contents"><div class="scrollable ios-scroll"><div class="user-poll" style="display: none"><div class="label"><div class="poll-icon"></div><div class="status">VOTE</div></div><div class="poll-options"></div></div><div class="tweet-holder" style="display:none"><div class="label"><div class="globe-icon"></div><a class="tweets-link">LATEST TWEETS</a></div><div class="tweets"></div><div class="dot-nav"></div></div><div class="comments-holder ios-scroll" style="display:none"><div class="label"><div class="friends-icon"></div><a class="conv-link">CONVERSATION</a>'+
(a.fm?'<a class="prev-link">&#10218; LAST PROGRAM</a>':"")+'</div><div class="no-comments" style="display:none">Start the conversation with friends.</div><div class="comments"></div><div class="top-grad"></div><div class="bottom-grad"></div></div><div class="create-poll-button" style="display:none">+ POLL</div><div class="create-poll popup" style="display:none"><div class="label">CREATE A USER POLL</div><input type="text" placeholder="Title" class="poll-title"/><div class="label" style="margin-top: 5px;">OPTIONS</div><div class="option-inputs"><input type="text" placeholder="Option 1" class="option-input option-input-1"/><input type="text" placeholder="Option 2" class="option-input option-input-2"/></div><div class="add-option button">ADD OPTION</div><div class="submit-poll button">CREATE</div><div class="close"></div></div></div></div><div class="send-media popup" style="display:none"><div class="label">SEND TO A FRIEND</div><div class="recipients"><textarea placeholder="To"></textarea></div><div class="label">ADD A MESSAGE:</div><div class="send-message"><textarea placeholder="Optional"></textarea><div class="add-comment button">SEND</div></div><div class="close"></div></div><div class="loading loading-activity"><div class="loading-spinner"></div></div><div class="overlay" style="display: none"><div class="leaving"><div>This program is over. Carry on?</div><div class="button dark no">Not yet</div><div class="button dark yes">Let\'s go</div></div></div></div>'}
function Ci(a){return'<div class="viewer" name="'+F(a.re)+'"><img src="'+F(a.m.L)+'"></div>'}
function Di(a){return'<div class="tweet" id="'+F(a.prefix)+"-"+F(a.Wb.id)+'">'+(a.Wb.m?'<a href="#user:'+F(a.Wb.m.id)+'"><img src="'+F(a.Wb.L)+'"/></a>':'<img src="'+F(a.Wb.L)+'"/>')+'<div class="text"><a class="handle" target="_blank" href="http://www.twitter.com/'+F(a.Wb.handle)+"/status/"+F(a.Wb.id)+'">'+F(a.Wb.handle)+"</a> "+a.text+'</div><div class="timestamp">'+F(a.timestamp)+'</div><div class="tweet-options"><div class="reply"></div></div></div>'}
function Ei(a){return'<div class="comment'+(a.V.K?" reply":"")+'" '+(a.V.id?'id="'+F(a.prefix)+"-"+F(a.V.id)+'"':"")+">"+(!a.V.K?'<a href="#user:'+F(a.V.m.id)+'"><div class="user-picture" style="background:'+F(a.V.m.color)+'"><img src="'+F(a.V.m.L)+'"/></div></a>':"")+'<div class="template"><a class="user" href="#user:'+F(a.V.m.id)+'">'+F(a.V.m.name)+'</a>  <div class="text">'+a.text+'<div class="comment-options">'+(a.uk?'<div class="remove"></div> ':"")+'<div class="reply"></div></div></div><div class="timestamp">'+
F(a.V.Sb)+'</div><div class="replies"></div>'+(!a.V.K?'<div class="reply-input"><textarea class="reply-textarea" rows="1" placeholder="reply..."></textarea></div>':"")+"</div></div>"}
function Fi(){return'<div class="comment-input"><div class="textarea-holder"><div class="input-holder"><div class="highlighter"></div><textarea class="comment-textarea" rows="1" placeholder="Add to the conversation..."></textarea><div class="suggestions" style="display:none"></div></div></div><div class="comment-controls"><div class="comment-toggle tweet-toggle"><div class="icon"></div></div><div class="comment-toggle fb-toggle"><div class="icon"></div></div></div><div class="comment-button add-comment">ADD</div><div class="popup top" style="display:none"><div class="comment-oob">Click <div class="fb-icon"></div> and <div class="twitter-icon"></div> for instant sharing<div class="on-off"><div class="off">OFF <div class="twitter-icon"></div></div> &#8594; <div class="on">ON <div class="twitter-icon on"></div></div></div></div></div></div>'}
function Gi(a){var b='<div class="activity'+(1<a.M.length?" digest":"")+'">';if(1<a.M.length){for(var b=b+('<div class="template"><span>'+F(a.M.length)+" friends </span>"+(a.Yk?"watched":"are watching")+(a.U?' <a href="#channel:'+F(a.U.id)+'">'+F(a.U.name)+"</a>":"")+'<div class="timestamp">'+F(a.time)+'</div></div><div class="users">'),c=a.M,d=c.length,e=0;e<d;e++)var g=c[e],b=b+('<a href="#user:'+F(g.id)+'"><div class="picture" style="background:'+F(g.color)+'"><img src="'+F(g.L)+'"/></div></a>');
b+="</div>"}return b+=(1==a.M.length?'<a href="#user:'+F(a.M[0].id)+'"><div class="picture" style="background:'+F(a.M[0].color)+'"><img src="'+F(a.M[0].L)+'"/></div></a><div class="template"><a class="user" href="#user:'+F(a.M[0].id)+'">'+F(a.M[0].name)+"</a> "+(a.Yk?"watched":"is watching")+(a.U?' <a href="#channel:'+F(a.U.id)+'">'+F(a.U.name)+"</a>":"")+'<div class="timestamp">'+F(a.time)+"</div></div>":"")+'<div class="medias"></div></div>'}
function Hi(a){for(var b='<div class="comment activity'+(1<a.tb.length?" digest":"")+'">'+(1<a.tb.length?'<div class="template">'+(1==a.M.length?'<a class="user" href="#user:'+F(a.M[0].id)+'">'+F(a.M[0].name)+' </a> discussed <a class="title" href="#info:'+F(a.media.id)+'">'+F(a.media.name)+"</a>.":"<span>"+F(a.M.length)+' friends </span> discussed <a class="title" href="#info:'+F(a.media.id)+'"> '+F(a.media.name)+"</a>.")+"</div>":""),a=a.tb,c=a.length,d=0;d<c;d++)var e=a[d],b=b+('<div class="comment"><a href="#user:'+
F(e.m.id)+'"><div class="picture" style="background:'+F(e.m.color)+'"><img src="'+F(e.m.L)+'"/></div></a><div class="template"><a class="user" href="#user:'+F(e.m.id)+'">'+F(e.m.name)+'</a>  <div class="text">'+e.text+'</div><div class="timestamp">'+F(e.Sb)+"</div></div></div>");return b+'<div class="medias"></div></div>'}
function Ii(a){var b='<div class="like activity'+(1<a.M.length?" digest":"")+'">';if(1<a.M.length){for(var b=b+('<div class="template"><span>'+F(a.M.length)+' friends </span>liked<div class="timestamp">'+F(a.time)+'</div></div><div class="users">'),c=a.M,d=c.length,e=0;e<d;e++)var g=c[e],b=b+('<a href="#user:'+F(g.id)+'"><div class="picture" style="background:'+F(g.color)+'"><img src="'+F(g.L)+'"/></div></a>');b+="</div>"}return b+=(1==a.M.length?'<a href="#user:'+F(a.M[0].id)+'"><div class="picture" style="background:'+
F(a.M[0].color)+'"><img src="'+F(a.M[0].L)+'"/></div></a><div class="template" style="top:10px;margin-bottom:30px"><a class="user" href="#user:'+F(a.M[0].id)+'">'+F(a.M[0].name)+"</a> liked "+(1<a.bk?F(a.bk)+" stories":"")+'<div class="timestamp">'+F(a.time)+"</div></div>":"")+'<div class="medias"></div></div>'}
function Ji(a){return'<div class="list-info"><div class="picture-cell" '+(a.Fb?'style="display:table-cell"':"")+">"+(a.link?'<a href="'+F(a.link)+'" target="_blank">':"")+'<div class="picture"><img class="thumb" src="'+F(a.Fb)+'"></div>'+(a.link?"</a>":"")+'</div><div class="description" style="display:table-cell">'+a.description+"</div></div>"}function Ki(a){return'<li class="'+F(a.className)+' tab"><div class="label">'+F(a.name)+"</div></li>"}
function Li(a){return'<div class="admin"><div class="scrollable ios-scroll"><div class="search"><input type="text" class="input" '+(a.Kj?'placeholder="'+F(a.Kj)+'"':"")+'/></div><div class="results"></div><div class="section" style="display:none"><div class="label">CHANNELS</div><div class="admin-channels"></div></div><div class="section" style="display:none"><div class="label">CURRENT TOPICS</div><div class="topics"></div></div><div class="section" style="display:none"><div class="label">COLLECTIONS</div><div class="collections"></div></div><div class="scroll-area"></div>'}
function Mi(){return'<div class="admin-list admin"><div class="search"><input class="input" type="text" placeholder="Paste video or playlist link" /></div><div class="tabbed pending"><ul class="tabs"><li class="tab pending"><div class="label">PENDING</div></li><li class="tab all"><div class="label">ALL</div></li><li class="tab playlists"><div class="label">PLAYLISTS</div></li><li class="tab publishers"><div class="label">PUBLISHERS</div></li><li class="tab categories"><div class="label">CATEGORIES</div></li></ul><div class="pending-content content pending"></div><div class="all-content content all"></div><div class="playlists-content content playlists"></div><div class="publishers-content content publishers"></div><div class="categories-content content categories"><div class="label">GUIDE CATEGORIES</div><div class="categories-list"></div><div class="label">FEED IDS</div><div class="feed-ids"></div><div class="label">FEED CATEGORIES</div><div class="feed-cats"></div></div><div class="spinner" style="display:none"></div></div>'}
function Ni(a){return'<div class="playlist"><div class="title">'+F(a.name)+'</div><div class="controls"><div class="remove dark button">x</div></div></div>'}function Oi(a){return'<div class="category button">'+F(a.name)+"</div>"}function Pi(a){return'<div class="publisher">'+(a.L?'<img src="'+F(a.L)+'"/>':"")+'<div class="title">'+F(a.name)+'</div><div class="controls"><div class="remove dark button">x</div></div></div>'}
function Qi(a){return'<div class="channel '+(a.U.kb?"on":"off")+'"><div class="title">'+F(a.U.name)+'</div><div class="controls"><div class="fetch dark button">FETCH</div><div class="program dark button">PROG.</div><div class="remove dark button">x</div><div class="on dark button">ON</div><div class="off dark button">OFF</div></div>'+(a.U.Lh?'<div class="pending">'+F(a.U.Lh)+"</div>":"")+"</div>"}
function Ri(a){return'<div class="collection"><div class="title">'+F(a.Ig.name)+'</div><div class="controls">'+(a.Ig.Lh?'<div class="pending">'+F(a.Ig.Lh)+"</div>":"")+'<div class="fetch dark button">FETCH</div><div class="button dark remove">x</div></div></div>'}
function Si(a){return'<div class="tabbed '+(a.yh?"inbox":"messages")+'"><ul class="tabs">'+(a.yh?'<li class="tab inbox"><div class="label">INBOX</div></li>':'<li class="tab messages"><div class="label">MESSAGES</div></li>')+'<li class="tab activity"><div class="label">ACTIVITY</div></li><li class="tab starred"><div class="label"><div class="heart"></div>\'d</div></li></ul>'+(a.yh?'<div class="inbox-content content inbox"><div class="label">NOTIFICATIONS</div><div class="notifications-content content notifications"><div class="loading loading-activity"><div class="loading-spinner"></div></div></div><div class="label messages-label">MESSAGES<div class="label show-all"><a href="#friendlist:1">ALL FRIENDS &gt;</a></div></div><div class="messages-content content messages"><div class="loading loading-activity"><div class="loading-spinner"></div></div></div></div>':
'<div class="messages-content content messages"><div class="loading loading-activity"><div class="loading-spinner"></div></div></div>')+'<div class="activity-content content activity"><div class="loading loading-activity"><div class="loading-spinner"></div></div></div><div class="starred-content content starred"><div class="loading loading-starred"><div class="loading-spinner"></div></div></div><div class="spinner" style="display:none"></div></div>'}
function Ti(){return'<div class="tabbed"><ul class="tabs"><li class="tab comments"><div class="label">CONVERSATION</div></li><li class="tab tweets"><div class="label">TWEETS</div></li></ul><div class="comments-content content comments-holder"><div class="loading loading-activity"><div class="loading-spinner"></div></div></div><div class="tweets-content content tweet-holder"><div class="loading loading-starred"><div class="loading-spinner"></div></div></div></div>'}
function Ui(a){return'<div class="list-media show"><div class="media"><div class="preview"><div class="thumb" style="background-image:url('+F(a.media.Fb)+"); background-position: 50% "+F(a.media.Wd)+'%"></div><div class="title">'+F(a.media.name)+'</div><div class="stats"><div class="comment-count"><div class="icon"></div>'+F(a.media.qd)+'</div><div class="like-count"><div class="icon"></div>'+F(a.media.im)+'</div></div></div></div><div class="publisher">'+(a.media.va?'<img src="'+F(a.media.va.L)+
'"><div class="name">'+F(a.media.va.name)+"</div>":"")+'<div class="list-play"><div class="icon"></div></div><div class="list-plus"><div class="icon"></div></div></div></div>'}
function Vi(a){return'<div class="admin-media list-media"><div class="media"><div class="preview"><div class="thumb" style="background-image:url('+F(a.media.Fb)+"); background-position: 50% "+F(a.media.Wd)+'%"></div><div class="title">'+F(a.media.name)+'</div><div class="published">'+F(a.qc)+'</div><div class="play"></div><div class="approve"></div><div class="remove"></div><div class="repos"></div></div></div><div class="publisher"><img src="'+F(a.media.va.L)+'"><div class="name">'+F(a.media.va.name)+
'</div><div class="duration">'+F(a.media.duration)+' seconds</div></div><div class="description">'+F(a.media.description)+"</div></div>"}function Wi(a){return'<div class="option"><div class="percent"></div><div class="name">'+F(a.name)+'</div><div class="percent-number">'+F(a.Rm)+"</div></div>"};function Xi(){Q.call(this);this.ic={};this.jc=0;this.Mb=l;this.X=new Yh("Search");this.pa=new Bf("Search");tf(this.pa,16,j)}s(Xi,Q);m=Xi.prototype;
m.u=function(a){Xi.e.u.call(this,a);this.X.k(A("search-input"));this.pa.k(A("search-icon"));this.ig=A("search-results");this.fg=B("result-medias",this.b());this.eg=B("result-channels",this.b());this.Hg=A("clear-icon");var a=new df(this.X.b()),b=new Eh(function(){if(this.X.v()){var a=zi.a(),b=this.X.v(),e=n(this.xm,this);U("https://www.googleapis.com/youtube/v3/search?q="+b+"&type=channel,playlist&part=snippet&maxResults=3&key=AIzaSyAUF3ESL0wYUuSWmOezgZclQFpNGZNBePw",n(function(a){a=X(a.target);this.Oi=
Ra(a.items,function(a){return{playlist_id:a.id.playlistId,channel_id:a.id.channelId,name:a.snippet.title,thumbnail:a.snippet.thumbnails["default"].url}},this);e&&e(this.Oi)},a));zi.a().search(this.X.v(),n(this.Km,this));N(this.Hg,j);v(this.b(),"show")}else this.fg.innerHTML="",this.eg.innerHTML="",this.Mb=l,z(this.ig,"no-medias",j)},1E3,this);O(O(O(O(this.g(),this.b(),"click",n(function(){sf(this.pa,j);this.Mb&&v(this.b(),"show")},this)),a,"key",n(function(a){a.stopPropagation();b.zf()},this)),this.Hg,
"click",n(function(){this.X.xa("");x(this.b(),"show");sf(this.pa,l);N(this.Hg,l);this.fg.innerHTML="";this.eg.innerHTML="";this.Mb=l;z(this.ig,"no-medias",j)},this)),window,"click",n(function(a){af(this.pa)&&(vc(a.target,"search")||J(n(function(){x(this.b(),"show");sf(this.pa,l)},this)))},this))};m.xm=function(a){this.eg.innerHTML="";this.Mb=!!a.length||this.Mb;z(this.ig,"no-medias",!this.Mb);t(a,function(a){this.Dc(a)},this)};
m.Km=function(a){this.fg.innerHTML="";this.Mb=!!a.length||this.Mb;z(this.ig,"no-medias",!this.Mb);t(a,function(a){this.Ib(a)},this)};
m.Ib=function(a){var b=E(Ui,{media:a}),c=B("list-play",b),d=B("list-plus",b);this.fg.appendChild(b);O(O(O(this.g(),b,"click",n(function(b){b.preventDefault();b.stopPropagation();Y.a().c(Hg,a)},this)),c,"click",n(function(b){b.preventDefault();b.stopPropagation();x(this.b(),"show");b=gg(a);T.a().c(Kf,b)},this)),d,"click",function(b){b.preventDefault();b.stopPropagation();Pf().c(qg,a,j)})};
m.Dc=function(a){var b=E(Ai,{name:a.name,li:a.thumbnail});this.eg.appendChild(b);O(this.g(),b,"click",n(function(c){c.preventDefault();c.stopPropagation();v(b,"loading");U("/_ytchannel",n(function(c){c=X(c.target);a=R.a().hf(c.channel);c=new fg(c.program);a.c(pg,c);R.a().c(Gf,a);x(b,"loading")},this),"POST","&name="+a.name+(a.channel_id?"&channel_id="+a.channel_id:"")+(a.playlist_id?"&playlist_id="+a.playlist_id:""))},this))};function Y(){K.call(this)}s(Y,K);ka(Y);var Hg="media-info",Ig="profile";function Yi(){H.call(this);this.ve=[];this.En=[];this.Oe=[]}s(Yi,ed);m=Yi.prototype;m.Qj=l;m.Rj=l;m.lh=l;m.Kk=ba("hg");m.init=function(){if(!this.lh){for(var a,b=0;a=this.ve[b];b++)Zi(this,a);this.lh=j}};function Zi(a,b){a.Qj&&(I(b.element,"mousedown",b.fk,l,b),a.hi&&v(b.element,a.hi));a.Rj&&a.ki&&v(b.element,a.ki)}
m.jd=function(a,b){if(!this.Oa)if(this.Oa=b,this.dispatchEvent(new $i("dragstart",this,this.Oa))==l)this.Oa=k;else{var c=b.rd,d=this.tf(c);this.rl&&v(d,this.rl);this.xd=d;d=$b(c);d.body.appendChild(this.xd);var e=this.xd,g=Xd(c),c=ge(c,"margin");g.x-=2*(c.left||0);g.y-=2*(c.top||0);e.style.position="absolute";e.style.left=g.x+"px";e.style.top=g.y+"px";this.q=new le(e);this.q.Kk(this.hg);I(this.q,"drag",this.gk,l,this);I(this.q,"end",this.Pc,l,this);I(d.body,"selectstart",this.Tk);this.Vd=[];for(d=
0;c=this.En[d];d++)for(var h,e=0;h=c.ve[e];e++)for(var g=c,p=[h.element],q=this.Vd,w=0;w<p.length;w++){var G=p[w],L=Xd(G),Z=P(G),L=new Kd(L.y,L.x+Z.width,L.y+Z.height,L.x);q.push(new aj(L,g,h,G));bj(this,L)}this.Ub||(this.Ub=new Kd(0,0,0,0));for(d=0;c=this.Oe[d];d++)c.Kg=[],c.Ek=c.f.scrollLeft,c.Fk=c.f.scrollTop,e=Xd(c.f),g=P(c.f),c.aa=new Kd(e.y,e.x+g.width,e.y+g.height,e.x);for(d=0;g=this.Vd[d];d++)for(e=0;c=this.Oe[e];e++)mc(c.f,g.f)&&(c.Kg.push(g),g.Ne=c);this.Cc=k;for(d=0;c=this.Oe[d];d++)I(c.f,
"scroll",this.Wi,l,this);this.q.jd(a);a.preventDefault()}};
m.Pc=function(a){var b=a.ql?k:this.Cc;if(b&&b.Ka){var c=a.clientX,a=a.clientY,d=xc(Yb(this.xd)),e=c+d.x,d=a+d.y,g;this.Ue&&(g=this.Ue(b.Ob,b.aa,e,d));this.dispatchEvent(new $i("drag",this,this.Oa,b.Ka,b.Ob,b.f,c,a,e,d));b.Ka.dispatchEvent(new $i("drop",this,this.Oa,b.Ka,b.Ob,b.f,c,a,e,d,g))}this.dispatchEvent(new $i("dragend",this,this.Oa));Zc(this.q,"drag",this.gk,l,this);Zc(this.q,"end",this.Pc,l,this);Zc($b(this.Oa.rd).body,"selectstart",this.Tk);for(b=0;c=this.Oe[b];b++)Zc(c.f,"scroll",this.Wi,
l,this),c.Kg=[];this.q.ea();hc(this.xd);delete this.Oa;delete this.xd;delete this.q;delete this.Vd;delete this.Cc};
m.gk=function(a){var b,c=xc(Yb(this.xd));b=new Mb(a.clientX+c.x,a.clientY+c.y);var c=b.x,d=b.y,e=this.Cc,g;if(e){this.Ue&&e.Ka&&(g=this.Ue(e.Ob,e.aa,c,d));if(e.aa.contains(b)&&g==this.Ei)return;e.Ka&&(this.dispatchEvent(new $i("dragout",this,this.Oa,e.Ka,e.Ob,e.f)),e.Ka.dispatchEvent(new $i("dragout",this,this.Oa,e.Ka,e.Ob,e.f,i,i,i,i,this.Ei)));this.Ei=g;this.Cc=k}if(this.Ub.contains(b)){a:{for(var h=0;e=this.Vd[h];h++)if(e.aa.contains(b))if(e.Ne){if(e.Ne.aa.contains(b)){b=e;break a}}else{b=e;break a}b=
k}if((e=this.Cc=b)&&e.Ka)this.Ue&&(g=this.Ue(e.Ob,e.aa,c,d)),c=new $i("dragover",this,this.Oa,e.Ka,e.Ob,e.f),c.Dn=g,this.dispatchEvent(c),e.Ka.dispatchEvent(new $i("dragover",this,this.Oa,e.Ka,e.Ob,e.f,a.clientX,a.clientY,i,i,g));else if(!e){this.Ea||(this.Ea=new aj(this.Ub.clone()));a=this.Ea.aa;a.top=this.Ub.top;a.right=this.Ub.right;a.bottom=this.Ub.bottom;a.left=this.Ub.left;for(g=0;e=this.Vd[g];g++)b=e.aa,e.Ne&&(e=e.Ne.aa,b=new Kd(Math.max(b.top,e.top),Math.min(b.right,e.right),Math.min(b.bottom,
e.bottom),Math.max(b.left,e.left))),e=k,c>=b.right?e=b.right>a.left?b.right:a.left:c<b.left&&(e=b.left<a.right?b.left:a.right),h=k,d>=b.bottom?h=b.bottom>a.top?b.bottom:a.top:d<b.top&&(h=b.top<a.bottom?b.top:a.bottom),e!==k&&h!==k&&(Math.abs(e-c)>Math.abs(h-d)?h=k:e=k),e===k?h!==k&&(h<=d?a.top=h:a.bottom=h):e<=c?a.left=e:a.right=e;this.Cc=10<=(a.right-a.left)*(a.bottom-a.top)?this.Ea:k}}};m.Tk=da(l);
m.Wi=function(a){for(var b=0,c;c=this.Oe[b];b++)if(a.target==c.f){var d=c.Fk-c.f.scrollTop,e=c.Ek-c.f.scrollLeft;c.Fk=c.f.scrollTop;c.Ek=c.f.scrollLeft;this.Ea&&this.Cc==this.Ea&&(0<d?this.Ea.aa.top+=d:this.Ea.aa.bottom+=d,0<e?this.Ea.aa.left+=e:this.Ea.aa.right+=e);for(var g=0,h;h=c.Kg[g];g++)h=h.aa,h.top+=d,h.left+=e,h.bottom+=d,h.right+=e,bj(this,h)}this.q.sk(a)};
m.tf=function(a){var b=a.cloneNode(j);switch(a.tagName.toLowerCase()){case "tr":return D("table",k,D("tbody",k,b));case "td":case "th":return D("table",k,D("tbody",k,D("tr",k,b)));default:return b}};function bj(a,b){if(1==a.Vd.length)a.Ub=new Kd(b.top,b.right,b.bottom,b.left);else{var c=a.Ub;c.left=Math.min(b.left,c.left);c.right=Math.max(b.right,c.right);c.top=Math.min(b.top,c.top);c.bottom=Math.max(b.bottom,c.bottom)}}
m.p=function(){Yi.e.p.call(this);for(var a,b=0;a=this.ve[b];b++)this.Qj&&(Zc(a.element,"mousedown",a.fk,l,a),this.hi&&x(a.element,this.hi)),this.Rj&&this.ki&&x(a.element,this.ki),a.ea();this.ve.length=0};function $i(a,b,c,d,e,g,h,p,q,w,G){Lc.call(this,a);this.Co=b;this.Do=c;this.Eo=d;this.Go=e;this.Fo=g;this.clientX=h;this.clientY=p;this.ep=q;this.fp=w;this.Dn=G}s($i,Lc);$i.prototype.p=aa();
function cj(a,b){H.call(this);this.element=A(a);this.data=b;this.T=k;this.element||f(Error("Invalid argument"))}s(cj,ed);m=cj.prototype;m.rd=k;m.fk=function(a){if(Qc(a)){var b=a.target;b&&(I(b,"mousemove",this.Kd,l,this),I(b,"mouseout",this.Kd,l,this),I(b,"mouseup",this.xh,l,this),this.rd=b,this.ii=new Mb(a.clientX,a.clientY),a.preventDefault())}};m.jg=ba("T");
m.Kd=function(a){var b=this.rd,c="mouseout"==a.type&&a.target==b;if(5<Math.abs(a.clientX-this.ii.x)+Math.abs(a.clientY-this.ii.y)||c)Zc(b,"mousemove",this.Kd,l,this),Zc(b,"mouseout",this.Kd,l,this),Zc(b,"mouseup",this.xh,l,this),this.T.jd(a,this)};m.xh=function(){var a=this.rd;Zc(a,"mousemove",this.Kd,l,this);Zc(a,"mouseout",this.Kd,l,this);Zc(a,"mouseup",this.xh,l,this);delete this.ii;this.rd=k};function aj(a,b,c,d){this.aa=a;this.Ka=b;this.Ob=c;this.f=d}aj.prototype.Ne=k;function dj(){Yi.call(this)}s(dj,Yi);function ej(a,b){b.jg(a);a.ve.push(b);a.lh&&Zi(a,b)};function fj(a){var b={};"rel"in b||(b.rel="nofollow");"target"in b||(b.target="_blank");var c=[],d;for(d in b)b.hasOwnProperty(d)&&b[d]&&c.push(Fa(d),'="',Fa(b[d]),'" ');var e=c.join("");return a.replace(gj,function(a,b,c,d,w){a=[Fa(b)];if(!c)return a[0];a.push("<a ",e,'href="');d?(a.push("mailto:"),c=d,d=""):(w||a.push("http://"),(d=c.match(hj))?(c=d[1],d=d[2]):d="");c=Fa(c);d=Fa(d);a.push(c,'">',c,"</a>",d);return a.join("")})}
var hj=/^(.*)([:;,\.?\[\]])$/,gj=RegExp("([\\S\\s]*?)(\\b(?:mailto:)?([\\w.+-]+@[A-Za-z0-9.-]+\\.(?:com|org|net|edu|gov|aero|biz|cat|coop|info|int|jobs|mobi|museum|name|pro|travel|arpa|asia|xxx|[a-z][a-z])\\b)|\\b(?:(https?|ftp)://+|www\\.)\\w[:;,\\.?\\[\\]\\w/~%&=+#-@!]*|$)","g");function ij(){}s(ij,Ve);ka(ij);m=ij.prototype;m.zd=aa();m.k=function(a,b){of(a);a.Jb&=-256;tf(a,32,l);ij.e.k.call(this,a,b);a.fd(b.value);return b};m.Q=function(a){of(a);a.Jb&=-256;tf(a,32,l);return a.gb().Q("textarea",{"class":Xe(this,a).join(" "),disabled:!a.isEnabled()},a.ub||"")};m.Fc=function(a){return"TEXTAREA"==a.tagName};m.gd=ja;m.nh=function(a){return a.isEnabled()};m.Td=ja;m.wa=function(a,b,c){ij.e.wa.call(this,a,b,c);if((a=a.b())&&1==b)a.disabled=c};m.pb=ja;
m.fd=function(a,b){a&&(a.value=b)};m.ta=da("goog-textarea");function jj(a,b,c){nf.call(this,a,b||ij.a(),c);of(this);this.Sd(j);a||(this.ub="")}s(jj,nf);var kj=pb||qb;m=jj.prototype;m.Dd=l;m.hb=0;m.Zj=0;m.ek=0;m.Ej=l;m.Sf=l;m.ai=l;m.$h=l;function lj(a){return a.Ge.top+a.Ge.bottom+a.Mi.top+a.Mi.bottom}function mj(a){var b=a.ek,c=a.b();b&&(c&&a.Sf)&&(b-=lj(a));return b}function nj(a){var b=a.Zj,c=a.b();b&&(c&&a.Sf)&&(b-=lj(a));return b}m.xa=function(a){this.fd(String(a))};m.v=function(){return this.b().value};m.fd=function(a){jj.e.fd.call(this,a);this.resize()};
m.Z=function(a){jj.e.Z.call(this,a);this.b().disabled=!a};m.resize=function(){this.b()&&this.Ef()};m.w=function(){jj.e.w.call(this);var a=this.b();Md(a,{overflowY:"hidden",overflowX:"auto",boxSizing:"border-box",MsBoxSizing:"border-box",WebkitBoxSizing:"border-box",MozBoxSizing:"border-box"});this.Ge=ge(a,"padding");this.Mi=je(a);O(O(O(O(this.g(),a,"scroll",this.Ef),a,"focus",this.Ef),a,"keyup",this.Ef),a,"mouseup",this.om);this.resize()};
function oj(a){if(!a.Ej){var b=a.b().cloneNode(l);Md(b,{position:"absolute",height:"auto",top:"-9999px",margin:"0",padding:"1px",border:"1px solid #000",overflow:"hidden"});a.gb().H.body.appendChild(b);var c=b.scrollHeight;b.style.padding="10px";var d=b.scrollHeight;a.ai=d>c;b.style.borderWidth="10px";a.$h=b.scrollHeight>d;b.style.height="100px";100!=b.offsetHeight&&(a.Sf=j);hc(b);a.Ej=j}var b=a.b(),c=a.b().scrollHeight,e=a.b(),d=e.offsetHeight-e.clientHeight;if(!a.ai)var g=a.Ge,d=d-(g.top+g.bottom);
a.$h||(e=je(e),d-=e.top+e.bottom);c+=0<d?d:0;a.Sf?c-=lj(a):(a.ai||(d=a.Ge,c+=d.top+d.bottom),a.$h||(a=je(b),c+=a.top+a.bottom));return c}function pj(a,b){a.hb!=b&&(a.hb=b,a.b().style.height=b+"px")}function qj(a){a=a.b();a.style.height="auto";var b=a.value.match(/\n/g)||[];a.rows=b.length+1}
m.Ef=function(){if(!this.Dd){var a=l;this.Dd=j;var b=this.b(),c=this.hb;if(b.scrollHeight){var d=l,e=l,g=oj(this),h=b.offsetHeight,p=mj(this),q=nj(this);p&&g<p?(pj(this,p),d=j):q&&g>q?(pj(this,q),b.style.overflowY="",e=j):h!=g?pj(this,g):this.hb||(this.hb=g);!d&&(!e&&kj)&&(a=j)}else qj(this);this.Dd=l;a&&(a=this.b(),this.Dd||(this.Dd=j,b=l,a.value||(a.value=" ",b=j),(e=a.scrollHeight)?(g=oj(this),d=mj(this),h=nj(this),!(d&&g<=d)&&!(h&&g>=h)&&(h=this.Ge,a.style.paddingBottom=h.bottom+1+"px",oj(this)==
g&&(a.style.paddingBottom=h.bottom+e+"px",a.scrollTop=0,e=oj(this)-e,e>=d?pj(this,e):pj(this,d)),a.style.paddingBottom=h.bottom+"px")):qj(this),b&&(a.value=""),this.Dd=l));c!=this.hb&&this.dispatchEvent("resize")}};m.om=function(){var a=this.b(),b=a.offsetHeight;a.filters&&a.filters.length&&(a=a.filters.item("DXImageTransform.Microsoft.DropShadow"))&&(b-=a.offX);b!=this.hb&&(this.hb=this.ek=b)};function rj(a,b,c,d,e,g,h){Q.call(this);this.Ha=Df();this.sb=a;this.$f=b;this.Oh=c;this.Uh=d;this.Eg=e.categories;this.yl=e.feed_categories;this.Al=e.feed_id;this.oi=g||k;this.ud=h||k;this.Rg=this.Ha?new dj:k;this.Rc={pending:l,all:l};this.Eb=["pending","all","playlists","publishers","categories"]}s(rj,Q);var sj="top_rated top_favorites most_shared most_recent most_discussed most_responded recently_featured on_the_web most_viewed".split(" "),tj="All Film Autos Music Animals Sports Travel Games Videoblog People Comedy Entertainment News Howto Education Tech Nonprofit Movies Shows Shortmov".split(" ");
m=rj.prototype;
m.u=function(a){rj.e.u.call(this,a);a.innerHTML="";a.scrollTop=0;Ac(a,Mi);var b=B("pending-content",a);t(this.$f,function(a){this.Ib(b,a)},this);this.Xm=B("playlists-content",a);t(this.Oh,this.Hi,this);this.bn=B("publishers-content",a);t(this.Uh,this.Ii,this);this.ml=B("categories-list",a);this.jj=B("feed-ids",a);this.zl=B("feed-cats",a);U("/admin/_categories",n(function(a){a=X(a.target);t(a,function(a){uj(this,a,"category",Va(this.Eg,a.id)||!this.Eg.length)},this)},this));t(tj,function(a){uj(this,a,
"feed_category",Va(this.yl,a))},this);t(sj,function(a){uj(this,a,"feed_id",this.Al==a)},this);this.resize()};
m.w=function(){rj.e.w.call(this);this.X=B("input",this.b());var a=new df(this.X),b=new pi(this.X);this.Ya=B("tabs",this.b());this.J="pending";var c=l;O(O(O(O(this.g(),window,"resize",Aa(J,n(this.resize,this))),a,"key",n(function(a){"13"==a.keyCode&&vj(this,this.X.value)},this)),b,"after_paste",n(function(){vj(this,this.X.value)},this)),this.Ya,"click",n(function(a){a=uc(a.target,"li");this.lc(a)},this));O(this.g(),this.b(),"scroll",n(function(){if(this.sb&&!c&&!this.Rc[this.J]&&("pending"==this.J||
"all"==this.J)&&this.b().scrollTop+C().height>this.b().scrollHeight-this.b().clientTop){c=j;var a=B("spinner",this.b());N(a,j);var b="pending"==this.J?this.$f:this.zg;U("/admin/_media/collection/"+this.sb+"?offset="+b.length+("pending"==this.J?"&pending=1":""),n(function(g){c=l;g=jh(Ch(g.target)).medias;g=Ra(g,function(a){return new Zf(a)});ab(b,g);var h=B(this.J+"-content",this.b());t(g,function(a){this.Ib(h,a)},this);this.Rc[this.J]=!g.length;z(a,"finished",!g.length)},this))}},this));this.resize()};
m.resize=function(){$d(this.b(),C().height-40)};
function vj(a,b){var c;c=b.match("(?:(https?|ftp)://+|www\\.)\\w[:;,\\.?\\[\\]\\w/~%&=+#-@!]*");c=c!=k?c[0]:"";a.sb&&c&&(a.X.disabled="disabled",U("admin/_add/collection/"+a.sb,n(function(a){this.X.value="";this.X.disabled="";a=X(a.target);if("media"==a.type){var b=eg(dg.a(),a.data);Ta(this.$f,function(a){return a.id==b.id})||(this.$f.push(b),a=B("pending-content",this.b()),this.Ib(a,b,j),this.lc(bc("li","pending",i)[0]))}else if("playlist"==a.type){var c=a.data;Ta(this.Oh,function(a){return a.id==
c.id})||(this.Oh.push(c),this.Hi(c),this.lc(bc("li","playlists",i)[0]))}else if("publisher"==a.type){var h=a.data;h&&!Ta(this.Uh,function(a){return a.id==h.id})&&(this.Uh.push(h),this.Ii(h),this.lc(bc("li","publishers",i)[0]))}},a),"POST","url="+c))}
m.lc=function(a){t(this.Eb,function(b){z(this.Ya.parentElement,b,y(a,b));this.J=y(a,b)?b:this.J},this);this.sb&&!this.zg&&U("/admin/_media/collection/"+this.sb,n(function(a){a=jh(Ch(a.target)).medias;this.zg=Ra(a,function(a){return new Zf(a)});var c=B("all-content",this.b());t(this.zg,function(a){this.Ib(c,a)},this)},this))};
m.Hi=function(a){var b=E(Ni,{name:a.name});this.Xm.appendChild(b);var c=B("remove",b);O(this.g(),c,"click",function(){U("admin/_remove/collection/"+this.sb,n(function(){hc(b)},this),"POST","pub_id="+a.id)})};m.Ii=function(a){var b=E(Pi,{name:a.name||a.id,L:a.picture});this.bn.appendChild(b);var c=B("remove",b);O(this.g(),c,"click",function(){U("admin/_remove/collection/"+this.sb,n(function(){hc(b)},this),"POST","pub_id="+a.id)})};
function uj(a,b,c,d){if("category"==c){var e=E(Oi,{name:b.name,id:b.id});a.ml.appendChild(e)}else e=E(Oi,{name:b,id:b}),("feed_id"==c?a.jj:a.zl).appendChild(e);z(e,"enabled",!!d);var g="category"==c?"cat_id="+b.id:"feed_id"==c?"feed_id="+b:"feed_cat="+b;O(a.g(),e,"click",function(){"feed_id"==c&&t(ic(this.jj),function(a){x(a,"enabled")});var a=Lb(e,"enabled");U("admin/_edit/collection/"+this.sb,xe(),"POST",g+"&enabled="+a)})}
m.Ib=function(a,b,c){var d=E(Vi,{media:b,qc:cg(b)});c?gc(a,d,0):a.appendChild(d);this.Ha&&(a=this.Rg,c=new cj(d,i),ej(a,c));var a=new le(B("repos",d)),e=B("thumb",d),c=B("play",d),g=B("approve",d),h=B("remove",d);a.me=function(a,b){var c=b-24;-50<=c&&50>=c&&Md(e,"background-position-y",50-c+"%")};O(O(O(O(this.g(),a,"end",function(){var a=(e.style[Ma("background-position")]||"").split(" ")[1],a=a.substring(0,a.length-1);U("/admin/_posthumb",xe(),"POST","media="+b.id+"&pos="+a)}),c,"click",n(this.Tm,
this,b)),g,"click",n(this.Ki,this,b,j,d)),h,"click",n(this.Ki,this,b,l,d));J(Aa(v,d,"show"))};m.Ch=function(a,b){U("/admin/_addprogram",n(function(b){b=jh(Ch(b.target));b=new fg(b);a.c(pg,b)},this),"POST","channel="+a.id+"&media="+b.id)};m.Ki=function(a,b,c){var d=a.nl||this.sb;U("admin/_media/collection",n(function(){v(c,"remove");J(function(){hc(c)},300);M.a();var b;M.a();b=rc(A("toggle-pending"));pd(0,b-1);Y.a().c("approved",a,d)},this),"POST","col="+d+"&media="+a.id+"&approve="+b)};
m.Tm=function(a){a=gg(a);T.a().c(Kf,a)};function wj(a){Q.call(this);this.Hc=a||k;this.pg=this.Pi=this.On=this.Ui=0}s(wj,Q);m=wj.prototype;m.Q=function(){this.f=E(Li)};m.u=function(a){wj.e.u.call(this,a);var b=E(Li,{Kj:this.Hc?"Add a collection":"Add a Channel"});a.innerHTML=b.innerHTML};
m.w=function(){wj.e.w.call(this);this.X=B("input",this.b());var a=new df(this.X);this.jn=B("scrollable",this.b());this.Aa=B("admin-channels",this.b());this.bp=B("topics",this.b());this.uf=B("collections",this.b());this.Ti=A("admin-col-list");this.Ji=A("admin-list");R.a();this.Hc?U("/admin/_collections/"+this.Hc,n(function(a){a=X(a.target);N(this.uf.parentElement,!!a.length);t(a,this.Gi,this);this.pg&&pd(M.a(),this.pg);this.Ui=P(this.uf.parentElement).height;this.resize()},this)):U("/admin/_channels",
n(function(a){a=X(a.target);N(this.Aa.parentElement,!!a.length);t(a,this.Dc,this);this.Pi=P(this.Aa.parentElement).height;this.resize()},this));O(this.g(),a,"key",n(function(a){"13"==a.keyCode&&this.X.value&&(a=this.X.value,this.X.disabled="disabled",U(this.Hc?"/admin/_collections":"/admin/_channels",n(function(a){a=X(a.target);this.Hc?(N(this.uf.parentElement,!!a),this.Gi(a)):(N(this.Aa.parentElement,!!a),this.Dc(a));this.X.disabled="";this.X.value=""},this),"POST","name="+a+(this.Hc?"&cid="+this.Hc:
"")))},this))};
m.Dc=function(a){var b=new og(a),c=E(Qi,{U:b});this.Aa.appendChild(c);I(c,"click",n(function(a){y(a.target,"on")||y(a.target,"off")?(z(c,"on",y(a.target,"on")),z(c,"off",!y(a.target,"on")),U("/admin/_channel/online/"+b.id,n(function(a){a.target.disabled="";a=X(a.target);z(c,"on",a.online);z(c,"off",!a.online)},this),"POST","online="+y(a.target,"on"))):y(a.target,"program")?U("/admin/_program",xe(),"POST","channel_id="+b.id):y(a.target,"fetch")?U("/admin/_fetch",function(){alert("Fetch began, but give it some time.")},"POST",
"channel_id="+b.id):y(a.target,"remove")&&confirm("Remove "+b.name+"?")?(N(c,l),U("/admin/_channels/"+b.id,function(a){X(a.target).deleted?hc(c):N(c,j)},"DELETE")):((new wj(b.id)).k(this.Ti),Y.a().c("navigate",this.Ti,l,b.name))},this))};
m.Gi=function(a){var b=E(Ri,{Ig:a});this.pg+=a.pending;this.uf.appendChild(b);I(b,"click",n(function(c){y(c.target,"remove")&&confirm("Remove "+a.name+"?")?(N(b,l),U("/admin/_collections/"+a.id,function(a){X(a.target).deleted?hc(b):N(b,j)},"DELETE")):y(c.target,"fetch")?U("/admin/_fetch",function(){alert("Fetch began, but give it some time.")},"POST","col_id="+a.id):U("/admin/_media/collection/"+a.id+"?pending=1",n(function(b){var b=jh(Ch(b.target)),c=b.medias,c=Ra(c,function(a){return new Zf(a)});
(new rj(a.id,c,b.playlists,b.publishers,b.categories)).k(this.Ji);Y.a().c("navigate",this.Ji,l,a.name)},this))},this));Y.a().subscribe("approved",function(c,d){if(d==a.id){var e=B("pending",b),g=rc(e)-1;0>=g?(hc(b),Hc(b)):nc(e,g)}},this)};m.resize=function(){$d(this.jn,this.Pi+this.On+this.Ui+110)};function xj(a,b,c,d,e){Q.call(this);this.gi=!!a;this.xc=!!d;this.mh=!!e;this.of=!!b;this.Bk=!!c;this.value="";this.j=new jj(this.Bk?"reply...":"Add to the conversation.");this.qa=new Bf("tweet");tf(this.qa,16,j);this.sa=new Bf("post");tf(this.sa,16,j);a=V.a().h;this.yf=a.$m;this.qg=a.yk;this.Ec=new Bf("add");this.Xh=k;this.Vb={};this.Ja=[];this.Ca=-1;this.ze=0;this.vk=this.Xk=k}s(xj,Q);var yj=/@(\w+\s?\w*)/,zj=/(\w+\s?\w*)/;m=xj.prototype;m.Q=function(){this.f=E(Fi)};
m.u=function(a){xj.e.u.call(this,a);v(a,"decorated");var b=D("div","suggestions");a.appendChild(b);b=D("div","highlighter");a.appendChild(b)};
m.w=function(){xj.e.w.call(this);this.j.k(bc("textarea",i,this.b())[0]);var a=this.j;a.Zj=70;a.resize();var a=new df(this.j.$b()),b=B("popup",this.b());if(!this.Bk&&!this.xc&&(Re(this,this.Ec),this.Ec.k(B("add-comment",this.b())),this.Ec.Z(this.mh),O(this.g(),this.Ec,"action",n(this.Bb,this)),this.Vi=B("comment-controls",this.b())))N(this.Vi,this.gi),z(this.b(),"show-controls",this.gi),this.Lo=B("input-holder",this.b()),Re(this,this.qa),this.qa.k(B("tweet-toggle",this.b())),V.a().h.Hf||U("/_twitter",
n(function(a){a=X(a.target);this.qg=this.qg&&a.auth;this.$k=a.auth_url;sf(this.qa,this.qg)},this)),Re(this,this.sa),this.sa.k(B("fb-toggle",this.b())),FB.api("/me/permissions",n(function(a){this.yf=this.yf&&!!a.data[0].publish_stream;sf(this.sa,this.yf)},this)),O(O(this.g(),this.sa,"action",n(this.Am,this)),this.qa,"action",n(this.Pm,this)),DESKTOP&&!IPAD&&(Jg(Kg.a(),this.qa.b(),"top",{text:n(function(){return"Share on Twitter: "+(af(this.qa)?"ON":"OFF")},this)}),Jg(Kg.a(),this.sa.b(),"top",{text:n(function(){return"Share on Facebook: "+
(af(this.sa)?"ON":"OFF")},this)})),V.a().h.subscribe(jg,function(){sf(this.qa,j);V.a().h.Hf=j},this);this.Db=B("suggestions",this.b());this.eh=B("highlighter",this.b());b&&N(b,!V.a().h.dh&&!V.a().h.Hf&&this.gi);O(O(O(this.g(),this.j.b(),"focus",n(function(){b&&N(b,l);!V.a().h.fl&&!this.xc&&vg.a().c("tooltip",this.j.b(),"top",{text:"Mention friends using @"});this.dispatchEvent("focus")},this)),a,"key",n(function(a){a.stopPropagation();vg.a().c("hide");if("13"==a.keyCode||("32"==a.keyCode||"9"==a.keyCode)&&
-1<this.Ca){if(this.Ja.length&&this.Ja.reverse()[this.Ca]){a.preventDefault();var b=this.j.v().slice(this.xc?this.ze:0,this.j.b().selectionStart),b=b.split(" "),b=1<b.length?b[b.length-2]+" "+b[b.length-1]:b.pop(),e=this.Ja[this.Ca];this.Vb[e.id]=e;this.xc?Aj(this,b.match(zj)[0]):Aj(this,b.match(yj)[0]);this.j.b().focus();N(this.Db,l);this.Ja=[];this.Ca=-1;b=this.j.v().length;this.setSelectionRange(b,b)}else"13"==a.keyCode&&(a.preventDefault(),this.Ec.setActive(this.j.v()),this.Bb(a));this.of&&Aj(this)}else"27"==
a.keyCode&&this.Ja.length?(N(this.Db,l),this.Ja=[],b=this.j.v().length,this.setSelectionRange(b,b),this.Ca=-1,this.Vb={}):("38"==a.keyCode||"40"==a.keyCode)&&this.Ja.length?(a.preventDefault(),b=Array.prototype.slice.call(ic(this.Db)),b.reverse()[this.Ca]&&x(b[this.Ca],"selected"),this.Ca="38"==a.keyCode?Math.min(this.Ca+1,this.Ja.length-1):Math.max(this.Ca-1,-1),-1!=this.Ca&&v(b[this.Ca],"selected")):J(n(function(){this.Ec.Z(this.mh||!!this.j.v());var b=this.j.v().slice(this.xc?this.ze:0,this.j.b().selectionStart),
b=b.split(" "),b=1<b.length?b[b.length-2]+" "+b[b.length-1]:b.pop(),d=this.xc&&zj.test(b)||this.of&&yj.test(b);N(this.Db,d);if("8"==a.keyCode)this.eh.innerHTML.match('<div class="token">.*</div>$');else if(d&&(b=this.xc?b.match(zj):b.match(yj),this.Ja=V.a().search(b[1]),this.Ja.length)){var d=this.Ja,e=b[0];this.Db.innerHTML="";N(this.Db,j);t(d.slice(0,5),function(a){var b=D("div","suggestion",a.name);this.Db.appendChild(b);O(this.g(),b,"click",n(function(){this.Vb[a.id]=a;Aj(this,e);this.j.b().focus();
var b=this.j.v().length;this.setSelectionRange(b,b);N(this.Db,l);this.Ja=[];this.Ca=-1},this))},this)}this.j.v()||this.clear();this.of&&Aj(this)},this))},this)),this.j,"resize",n(function(a){this.dispatchEvent(a)},this));b&&O(this.g(),b,"click",n(function(){N(b,l)},this));Y.a().subscribe("reply-comment",this.Wh,this);Y.a().subscribe("reply-tweet",this.gn,this)};
function Aj(a,b){var c=a.j.v(),d=c,e=c,g=Rb(a.Vb);t(Qb(a.Vb),function(a){var p=b&&0==Ea(b,((this.xc?"":"@")+a.name).substr(0,b.length))?b:a.name;d=d.replace(RegExp(p,"g"),'<div class="token">'+a.name+"</div> ");this.eh.innerHTML=d;this.value=e=e.replace(RegExp(p,"g"),"@["+a.id+":"+a.name+"]");var q=RegExp(p,"g").exec(c);q&&(Wa(g,a.id),this.ze=Math.max(q.index+q[0].length,this.ze));c=c.replace(RegExp(p,"g"),a.name)+" ";b&&this.j.xa(c)},a);t(g,function(a){Tb(this.Vb,a)},a)}
m.Wh=function(a,b){this.vk=a.id?a.id:a.toString();this.Xh=b};m.gn=function(a){this.So=a.id;this.xa((this.v()?this.v()+" ":"")+"@"+a.handle+" ");this.Ia(j);this.qa.Z(j);this.Ia(j);a=this.j.v().length;this.setSelectionRange(a,a)};m.setSelectionRange=function(a,b){if(this.j.b().setSelectionRange)this.j.b().focus(),this.j.b().setSelectionRange(a,b);else if(this.j.b().createTextRange){var c=this.j.b().createTextRange();c.collapse(j);c.moveEnd("character",b);c.moveStart("character",a);c.select()}};
m.v=function(){this.of&&Qb(this.Vb).length?Aj(this):this.value=this.j.v();return this.value};m.xa=function(a,b,c){sf(this.sa,!!b);sf(this.qa,!!c);this.j.xa(a);this.value=a;this.Ec.Z(!!a)};m.clear=function(){this.j.xa("");this.Vb={};this.Ja=[];this.eh.innerHTML="";this.Db.innerHTML="";N(this.Db,l);this.j.resize();this.ze=0};m.Kf=function(){return y(this.b(),"focused")};m.Ia=function(a){a&&this.j.b().focus();return z(this.b(),"focused",a)};
m.Bb=function(){if(this.v()||this.mh)this.dispatchEvent({type:"add",Ni:n(function(a){var b=X(a.target);if(b.comment){var a=new Bj(b.comment),c=b.tweet?new Cj(b.tweet):k;if(b=eg(dg.a(),b.comment.media))b.c($f,a),c&&b.c("add-tweet",c)}},this),qe:af(this.sa),wi:af(this.qa),text:this.v(),K:this.vk,Wk:this.Xh&&this.Xh.id}),this.clear()};
m.Am=function(){vg.a().c("tooltip",this.sa.b(),"top",{text:n(function(){return"Share on Facebook: "+(af(this.sa)?"ON":"OFF")},this)});!V.a().h.dh&&(!this.yf&&af(this.sa))&&(N(A("overlay"),j),FB.login(n(function(a){N(A("overlay"),l);this.xl=!!a.authResponse;sf(this.sa,this.xl)},this),{scope:"publish_stream"}))};
m.Pm=function(){vg.a().c("tooltip",this.qa.b(),"top",{text:n(function(){return"Share on Twitter: "+(af(this.qa)?"ON":"OFF")},this)});if(!V.a().h.Hf&&!this.qg&&af(this.qa))if(sf(this.qa,l),IPHONE||IPAD){var a=document.createElement("a");a.setAttribute("href",this.$k);a.setAttribute("target","_blank");var b=document.createEvent("HTMLEvents");b.initEvent("click",j,j);a.dispatchEvent(b)}else a=window.open(this.$k,"Twitter Login","height=300,width=550"),a.moveTo(screen.width/2-225,screen.height/2-150),
a.focus()};function Bj(a){this.id=a.id;this.m=a.user?Mg(V.a(),a.user):k;this.text=a.text;this.media=a.media?eg(dg.a(),a.media):k;this.time=a.time?ud(a.time+"Z"):new vd;this.Sb=jd(this.time.getTime());this.K=a.parent_id;this.Le=[];this.mb=l;a.replies&&t(a.replies,function(a){a=new Bj(a);this.Le.push(a)},this)}
function Dj(a,b,c,d,e,g,h,p){var q=new Bj({text:c,parentId:g});q.m=a;q.K=g||k;dg.a().get(b).Yb(q);U("/_comment",n(function(a){a=X(a.target);q.id=a.comment.id;p&&p(q)},this),"POST","media_id="+b+"&text="+c+"&tweet="+e+"&facebook="+d+(g?"&parent_id="+g:"")+(h?"&to_user_id="+h:""));return q};function Cj(a){this.id=a.id;this.m=a.user&&Mg(V.a(),a.user);this.handle=a.handle;this.L=a.picture;this.text=a.text;this.time=ud(a.time+"Z")};function Ej(a,b,c,d){Q.call(this);this.i=a;this.Ma=b||[];this.ie={};this.$e=!!c;this.Hb=d||[];this.Ze={};this.ga=this.to=0;this.Vc={}}s(Ej,Q);m=Ej.prototype;
m.u=function(a){Ej.e.u.call(this,a);a.innerHTML="";a.scrollTop=0;v(this.b(),"ios-scroll");this.C=D("div","loading",D("div","loading-spinner"));this.b().appendChild(this.C);N(this.C,l);this.Zc=D("div","no-comments","Start the conversation.");this.b().appendChild(this.Zc);this.s=D("div","comments tweets");this.b().appendChild(this.s);O(O(this.g(),window,"resize",Aa(J,n(this.resize,this))),this.s,"click",n(this.Jg,this));this.Ma.length?(t(this.Ma,function(a){this.Yb(a)},this),this.Jd=P(this.s).height):
this.$e&&this.Hb.length?(t(this.Hb,function(a){this.md(a)},this),this.Jd=P(this.s).height):N(this.C,j);this.$e?(U("/_tweet/"+this.i.id+"?offset="+this.Hb.length,n(function(a){N(this.C,l);a=jh(Ch(a.target));a=Ra(a,function(a){a=new Cj(a);this.md(a);return a},this);this.Jd=P(this.s).height;this.resize()},this)),this.i.subscribe("add-tweet",function(a){this.md(a,j)},this)):(U("/_comment/"+this.i.id+"?offset="+this.Ma.length,n(function(a){N(this.C,l);a=jh(Ch(a.target));a=Ra(a,function(a){a=new Bj(a);
this.Yb(a);return a},this);this.Jd=P(this.s).height;this.resize()},this)),this.i.subscribe($f,this.Yb,this),this.i.subscribe(ag,this.Vh,this));this.resize(41)};
m.md=function(a,b){this.Ze[a.id]=a;N(this.Zc,l);var c=fj(a.text),c=c.replace(/#(\S+)/g,function(a,b){return'<a target="_blank" href="http://twitter.com/search?q=%23'+b+'">'+a+"</a>"}),c=c.replace(/@(\S+)/g,function(a,b){return'<a target="_blank" href="http://twitter.com/'+b+'">'+a+"</a>"}),c=E(Di,{Wb:a,text:c,timestamp:jd(a.time.getTime())});kd(id.a(),a.time,B("timestamp",c));b?gc(this.s,c,0):this.s.appendChild(c);this.resize();N(lc(this.s),j)};
m.Jg=function(a){a=a.target;if(this.$e){var b=vc(a,"tweet");b&&(b=this.Ze[b.id.split("-")[1]],y(a,"reply")&&Y.a().c("reply-tweet",b))}else if(b=vc(a,"comment"))b=this.ie[b.id.split("-")[1]],y(a,"reply")?B("reply-textarea",this.Vc[b.K?b.K:b.id]).focus():y(a,"remove")&&this.i.c(ag,b)};m.Vh=function(a){hc(A("listcomment-"+a.id));Xa(this.Ma,function(b){return b.id==a.id})};
m.Yb=function(a){this.Ma.push(a);N(this.Zc,l);var b=fj(a.text),b=b.replace(/@\[(\d+):([a-zA-z\s]+)\]/g,function(a,b,e){return'<a href="#user:'+b+'">'+e+"</a>"}),b=E(Ei,{prefix:"listcomment",V:a,text:b,uk:a.m.id==V.a().h.id});kd(id.a(),a.time,B("timestamp",b));a.K?B("replies",this.Vc[a.K]).appendChild(b):this.s.appendChild(b);a.id&&Fj(this,a,b);t(a.Le,function(a){this.Yb(a)},this);a.K||(this.s.scrollTop=this.s.scrollHeight);return b};
function Fj(a,b,c){a.ie[b.id]=b;c.id="listcomment-"+b.id;if(!b.K){a.Vc[b.id]=c;var d=B("reply-input",c),c=B("reply-textarea",c);O(a.g(),c,"click",n(function(){if(!y(d,"decorated")){var a=new xj(l,j,j);a.k(d);a.Wh(b,b.m);O(this.g(),a,"add",n(function(a){this.Bb(a)},this))}},a))}}m.resize=function(a){this.ga=a||this.ga;$d(this.b(),C().height-42-this.ga-(vc(this.b(),"tabbed")?30:0))};function Gj(a,b,c,d){Q.call(this);this.i=this.o=a;this.Ma=b||[];this.Hb=c||[];this.$e=!!d;this.he=new Ej(a,this.Ma);this.ti=new Ej(a,i,j,this.Hb);this.j=new xj(j,j);this.Eb=["comments","tweets"];this.We={}}s(Gj,Q);m=Gj.prototype;m.u=function(a){Gj.e.u.call(this,a);v(a,"conversation");v(a,"ios-scroll");Ac(a,Ti);v(a.firstChild,this.$e?"tweets":"comments")};
m.w=function(){this.Ya=B("tabs",this.b());this.he.k(B("comments-content",this.b()));this.ti.k(B("tweets-content",this.b()));Pe(this.j,this.b());O(O(O(O(O(O(O(this.g(),this.Ya,"click",n(function(a){a=uc(a.target,"li");this.lc(a)},this)),this.j,"add",n(this.Bb,this)),this.j,"resize",n(function(){y(this.b().firstChild,"comments")?this.he.resize(41):this.ti.resize(41)},this)),window,"click",n(function(a){!vc(a.target,"comment-input")&&!this.j.v()&&this.j.Ia(l)},this)),B("no-comments",this.b()),"click",
n(this.qk,this)),ac("no-comments",this.b())[1],"click",n(this.qk,this)),window,"click",n(function(a){!vc(a.target,"comment-input")&&!this.j.v()&&this.j.Ia(l)},this));this.he.resize(41);this.ti.resize(41)};m.qk=function(a){a.preventDefault();a.stopPropagation();this.j.Ia(j)};
m.Bb=function(a){var b=Dj(V.a().h,this.i.id,a.text,a.qe,a.wi,a.K,a.Wk,n(function(a){var b=this.We[a.time.getTime()];b.id="infocomment-"+a.id;Fj(this.he,a,b)},this)),c=this.he.Yb(b);this.We[b.time.getTime()]=c;a.qe&&!a.K&&(FB.api("/me/feed","POST",{message:a.text,name:this.i.name,link:this.i.link,picture:this.i.Fb,caption:"on XYLO",description:this.i.description},aa()),sf(this.j.sa,l))};m.lc=function(a){t(this.Eb,function(b){z(this.Ya.parentElement,b,y(a,b));this.J=y(a,b)?b:this.J},this)};function Hj(a,b,c,d,e){Q.call(this);t(a.Eh,function(a){var b=a.d();b&&b.media.id==this.id?(this.Wm=a,t(a.ff,function(a){a.Yd||(this.Od[a.m.id]=a.m)})):this.Od={}},a);this.i=this.o=a;this.Nf=c||k;this.Uj=d||k;this.Yl=l;this.kj=!b;this.De=EMBED||!!e;this.La=[];this.ef={};this.Ma=[];this.ie={};this.Vc={};this.We={};this.Hb=[];this.Ze={};this.j=new xj(j,j);this.uc=new Bf("Star");tf(this.uc,16,j);this.Vg=new Bf("Facebook");this.xi=new Bf("Twitter");this.Ta=new Bf("Play");this.ed=new Bf("Send");tf(this.ed,
16,j);this.ke=new Bf("Create Poll");this.ga=0}s(Hj,Q);m=Hj.prototype;m.Q=function(){this.f=E(Bi,{media:this.i})};m.u=function(a){Hj.e.u.call(this,a);var b=E(Bi,{media:this.i,description:this.i.description?fj(this.i.description):"",qc:cg(this.i),fm:this.Nf?this.Nf.id:k});a.innerHTML=b.innerHTML};
m.w=function(){Hj.e.w.call(this);this.gf=B("viewers",this.b());var a=B("picture",this.b()),b=B("ytvideo",this.b()),c=B("scrollable",this.b()),d=B("publisher",this.b()),e=B("title",this.b()),g=B("links",this.b());this.C=B("loading",this.b());var h=a.firstChild;this.Mg=B("info-contents",this.b());this.Bc=B("user-poll",this.b());this.cp=B("tweet-holder",this.b());this.Gb=B("tweets",this.b());this.Oc=B("dot-nav",this.b());this.s=B("comments",this.b());this.Zc=B("no-comments",this.b());Pe(this.j,this.b());
this.uc.k(B("star",this.b()));sf(this.uc,lg(V.a().h,this.i));this.Vg.k(B("facebook",this.b()));this.xi.k(B("twitter",this.b()));this.Ta.k(B("play",this.b()));this.ed.k(B("send",this.b()));this.ke.k(B("create-poll-button",this.b()));this.vi=new fd(5E3);this.gp=B("watch-with",this.b());this.Kb=B("create-poll",this.b());this.sc=B("send-media",this.b());z(this.b(),"mini",this.De);!this.kj||this.i.lj?Ij(this,l,this.i.description,this.i.Pe,this.i.Zk,this.i.tb,this.i.Ym):this.kj&&U("/_info/"+this.i.id,n(function(a){a=
jh(Ch(a.target));Ij(this,j,a.description,a.seen,a.tweets,a.comments,a.poll)},this));O(O(O(O(O(O(O(O(O(O(O(O(O(O(O(O(O(O(O(O(O(O(O(O(this.g(),window,"resize",Aa(J,n(this.resize,this))),d,"click",n(function(){Y.a().c("media-list",this.i.va.name,i,"/admin/_media/publisher/"+this.i.va.id,this.i.va.L,this.i.va.description,this.i.va.link,"/_publisher/"+this.i.va.id)},this)),this.uc,"action",n(function(){dg.a().c("star",this.i,af(this.uc));U("/_star",i,"POST","media_id="+this.i.id+(!af(this.uc)?"&delete=1":
""))},this)),this.Vg,"action",n(this.zm,this)),this.xi,"action",n(this.Om,this)),this.Ta,"action",n(this.Em,this)),this.ed,"action",n(this.Lm,this)),B("local",this.b()),"click",n(function(){N(B("link-select",this.b()),j);B("link-input",this.b()).select()},this)),this.ke,"action",n(this.nn,this)),this.j,"add",n(this.Bb,this)),this.Zc,"click",n(function(a){a.preventDefault();a.stopPropagation();this.j.Ia(j)},this)),B("conv-link",this.b()),"click",n(function(a){a.preventDefault();a.stopPropagation();
Y.a().c("conversation",this.i,this.Ma,this.Hb)},this)),B("tweets-link",this.b()),"click",n(function(a){a.preventDefault();a.stopPropagation();Y.a().c("conversation",this.i,this.Ma,this.Hb,j)},this)),this.j,"focus",n(function(){this.resize(0,j)},this)),this.j,"resize",n(function(){this.resize()},this)),this.Oc,"click",n(function(a){y(a.target,"dot")&&(Jj(this,a.target),this.vi.stop())},this)),this.vi,hd,n(function(){var a=this.le&&jc(this.le)||B("dot",this.b());J(n(function(){Jj(this,a)},this))},this)),
window,"click",n(function(a){!vc(a.target,"comment-input")&&!this.j.v()&&(this.j.Ia(l),this.resize(0))},this)),h,"load",function(){N(h,j);J(function(){P(h).height<P(a).height+50&&v(h,"fix-height");P(h).width>2*P(a).width?v(h,"pan-left"):P(h).height>2*P(a).height&&v(h,"pan-top");h.style.marginTop=-P(h).height/2+"px";h.style.marginLeft=-P(h).width/2+"px";v(h,"show")})}),c,"scroll",n(function(){var p=B("ytvideo",this.b()),q=IPHONE&&10<c.scrollTop?0:((this.De?100:120)-c.scrollTop)/100;de(d,Math.min(1,
Math.max(q,0)));de(e,Math.min(1,Math.max(q,0)));de(g,Math.min(1,Math.max(q,0)));de(h,Math.min(0.5,Math.max(q,0.1)));p&&de(p,Math.min(0.5,Math.max(q,0.1)));de(b,Math.min(0.5,Math.max(q,0.1)));z(a,"scrolled",10<c.scrollTop)},this)),this.s,"scroll",n(this.Zh,this)),this.s,"click",n(this.Jg,this)),this.Gb,"click",n(this.Pn,this)),B("desc-link",this.b()),"click",n(function(){var b=Lb(a,"scrolled");(new He(c,[c.scrollLeft,c.scrollTop],[c.scrollLeft,b?this.De?70:170:0],300)).play()},this));this.Nf&&O(this.g(),
B("prev-link",this.b()),"click",n(function(){Y.a().c(Hg,this.Nf,j,i,this.j.v())},this));this.Uj&&this.j.xa(this.Uj);DESKTOP&&!IPAD&&(Jg(Kg.a(),this.ed.b(),"left",{text:"Send"}),Jg(Kg.a(),this.Vg.b(),"left",{text:"Post to Facebook"}),Jg(Kg.a(),this.xi.b(),"left",{text:"Tweet"}),Jg(Kg.a(),this.uc.b(),"left",{text:"Save"}),Jg(Kg.a(),B("eye-icon",this.b()),"left",{text:"Seen by"}),Jg(Kg.a(),B("friends-icon",this.b()),"right",{text:"Visible by only your Facebook friends"}));IPHONE&&new YT.Player(b,{height:"100%",
width:"100%",videoId:this.i.bc,playerVars:{controls:0,showinfo:0}});this.i.subscribe($f,function(a){Kj(this,a,j)},this);this.i.subscribe(ag,this.Vh,this);this.i.subscribe("add-tweet",function(a){this.md(a,j)},this);this.i.subscribe(bg,function(a,b,c){Lj(this,a,!c)},this);T.a().subscribe(Jh,function(){x(this.Ta.b(),"play-loading")},this);T.a().subscribe("no-media",function(){x(this.Ta.b(),"play-loading")},this);V.a().h.subscribe("set-starred",function(){sf(this.uc,lg(V.a().h,this.i))},this);this.resize()};
function Ij(a,b,c,d,e,g,h){c?(a.i.description=c,B("description",a.b()).innerHTML=fj(c),N(B("scrollable",a.b()),j)):(N(B("desc-link",a.b()),l),N(B("scrollable",a.b()),l));a.La=Ra(d,function(a){a=b?Mg(V.a(),a):a;a.id!=V.a().h.id&&(N(this.gf,j),this.Yl=j,Lj(this,a,l));return a},a);Pb(a.i.Od,function(a){Lj(this,a,j)},a);a.Hb=Ra(e,function(a){a=b?new Cj(a):a;this.md(a);this.le=this.Oc.firstChild;v(this.le,"selected");return a},a);e.length&&a.vi.start();a.s&&N(a.s.parentElement,j);N(a.Zc,!g.length);g=Ra(g,
function(a){a=b?new Bj(a):a;a.K||Kj(this,a);return a},a);N(a.C,l);h?(Mj(a,h),a.i.Ym=h):N(a.ke.b(),j);a.resize();b&&(a.i.Zk=a.Hb,a.i.tb=g,a.i.Pe=a.La,a.i.lj=j)}
m.nn=function(){N(this.Kb,j);if(!this.Zm){var a=new Bf("CREATE");a.k(B("submit-poll",this.b()));a.Z(l);var b=B("poll-title",this.Kb),c=B("option-input-1",this.Kb),d=B("option-input-2",this.Kb),e=B("option-inputs",this.Kb);O(O(O(O(O(O(this.g(),a,"action",n(function(){N(this.Kb,l);var a;a=e.children;var c=function(a,b){var c=a+(b.value?b.value+"|":"");b.value="";return c},d=this;if(a.reduce)a=d?a.reduce(n(c,d),""):a.reduce(c,"");else{var q="";t(a,function(a){q=c.call(d,q,a)});a=q}b.value&&a&&(U("/_poll",
n(function(a){a=X(a.target);Mj(this,a)},this),"POST","media_id="+this.i.id+"&title="+b.value+"&options="+a),b.value="",N(this.ke.b(),l))},this)),new df(b),"key",n(function(){J(n(function(){a.Z(b.value&&c.value&&d.value)},this))},this)),new df(c),"key",n(function(){J(n(function(){a.Z(b.value&&c.value&&d.value)},this))},this)),new df(d),"key",n(function(){J(n(function(){a.Z(b.value&&c.value&&d.value)},this))},this)),B("add-option",this.Kb),"click",n(function(){var a=D("input",{type:"text",placeholder:"Option "+
(e.children.length+1)});e.appendChild(a)},this)),B("close",this.Kb),"click",n(function(){N(this.Kb,l)},this));this.Zm=j}};
function Mj(a,b){N(a.ke.b(),l);var c=B("status",a.Bc),d=B("poll-options",a.Bc);a.Bc.id=b.id;nc(c,b.title.toUpperCase()+" ("+b.vote_count+" VOTES)");t(b.options,function(a){var g=E(Wi,{name:a.name,Rm:a.percent+"%"});d.appendChild(g);a.voted?Nj(this,b,g):O(this.g(),g,"click",n(function(){y(this.Bc,"voted")||(a.vote_count+=1,b.vote_count+=1,Nj(this,b,g),nc(c,b.title.toUpperCase()+" ("+b.vote_count+" VOTES)"),U("/_poll",i,"POST","id="+a.id),this.j.xa("I voted: "+a.name+" (on "+b.title+")",j,j),this.j.Ia(j))},
this))},a);N(a.Bc,j)}function Nj(a,b,c){B("status",a.Bc);var d=B("poll-options",a.Bc);v(a.Bc,"voted");rc(B("name",c));v(c,"selected");t(ic(d),function(a,c){var d=parseInt(100*(b.options[c].vote_count/b.vote_count),10)+"%";nc(B("percent-number",a),d);B("percent",a).style.width=d},a)}m.dc=function(){return this.j.Kf()||!!this.j.Xk||!!this.j.v()};
function Jj(a,b){if(b){t(ic(a.Oc),function(a){return x(a,"selected")});a.le=b;v(a.le,"selected");var c=Ua(ic(a.Oc),function(a){return a==b});(new He(a.Gb,[a.Gb.scrollLeft,a.Gb.scrollTop],[320*c,a.Gb.scrollTop],200)).play();a.resize()}}
m.Bb=function(a){var b=Dj(V.a().h,this.i.id,a.text,a.qe,a.wi,a.K,a.Wk,n(function(a){var b=this.We[a.time.getTime()];b.id="infocomment-"+a.id;Oj(this,a,b)},this)),c=Kj(this,b);this.We[b.time.getTime()]=c;a.qe&&!a.K&&FB.api("/me/feed","POST",{message:a.text,name:this.i.name,link:this.i.link,picture:this.i.Fb,caption:"on XYLO",description:this.i.description},aa());ng.a().V(this.i.id,a.qe,a.wi)};
m.md=function(a,b){this.Ze[a.id]=a;var c=fj(a.text),c=c.replace(/#(\S+)/g,function(a,b){return'<a target="_blank" href="http://twitter.com/search?q=%23'+b+'">'+a+"</a>"}),c=c.replace(/@(\S+)/g,function(a,b){return'<a target="_blank" href="http://twitter.com/'+b+'">'+a+"</a>"}),c=E(Di,{Wb:a,text:c,timestamp:jd(a.time.getTime()),prefix:"infotweet"}),d=D("div","dot");kd(id.a(),a.time,B("timestamp",c));b?(gc(this.Gb,c,0),gc(this.Oc,d,0),10<ic(this.Gb).length&&(hc(this.Gb.lastChild),hc(this.Oc.lastChild),
Jj(this,d))):(this.Gb.appendChild(c),this.Oc.appendChild(d));this.resize();N(lc(this.Gb),j)};
function Kj(a,b,c){a.Ma.push(b);N(a.Zc,l);var d=fj(b.text),d=d.replace(/@\[(\d+):([a-zA-z\s]+)\]/g,function(a,b,c){return'<a href="#user:'+b+'">'+c+"</a>"}),d=E(Ei,{prefix:"infocomment",V:b,text:d,uk:b.m.id==V.a().h.id});kd(id.a(),b.time,B("timestamp",d));b.K?B("replies",a.Vc[b.K]).appendChild(d):a.s.appendChild(d);b.id&&Oj(a,b,d);t(b.Le,function(a){Kj(this,a,c)},a);!b.K&&c&&(a.s.scrollTop=a.s.scrollHeight,a.Mg.firstChild.scrollTop=a.Mg.firstChild.scrollHeight);return d}
function Oj(a,b,c){a.ie[b.id]=b;c.id="infocomment-"+b.id;if(!b.K){a.Vc[b.id]=c;var d=B("reply-input",c),c=B("reply-textarea",c);O(a.g(),c,"click",n(function(){if(!y(d,"decorated")){var a=new xj(l,j,j);a.k(d);a.Wh(b,b.m);O(this.g(),a,"add",n(function(a){this.Bb(a)},this))}},a))}}
function Lj(a,b,c){if(!c&&a.ef[b.id])x(a.ef[b.id],"online");else if(b.id!=V.a().h.id){if(!a.ef[b.id]){var d=E(Ci,{m:b});a.ef[b.id]=d;gc(a.gf,d,1);O(a.g(),d,"click",function(){Y.a().c(Ig,b)});DESKTOP&&!IPAD&&Jg(Kg.a(),d,"top",{text:n(function(){return b.re()+(y(d,"online")?" is watching":" saw this")},a)})}N(a.gf,j);z(a.ef[b.id],"online",c)}}m.Pn=function(a){var a=a.target,b=vc(a,"tweet");b&&(b=this.Ze[b.id.split("-")[1]],y(a,"reply")&&Y.a().c("reply-tweet",b))};
m.Jg=function(a){var a=a.target,b=vc(a,"comment");b&&(b=this.ie[b.id.split("-")[1]],y(a,"reply")?B("reply-textarea",this.Vc[b.K?b.K:b.id]).focus():y(a,"remove")&&this.i.c(ag,b))};m.Vh=function(a){hc(A("infocomment-"+a.id));Xa(this.Ma,function(b){return b.id==a.id})};
m.Zh=function(){z(this.s.parentElement,"top-grad",!!this.s.scrollTop);var a=this.s.style.maxHeight,b=C().height,a=a.substring(0,a.length-2),c=P(this.s).height;z(this.s.parentElement,"bottom-grad",this.s.scrollTop<this.s.scrollHeight-a-5&&c>=a&&640<b)};
m.resize=function(a,b){this.ga=a!=i?a:this.ga;var c=C().height;if(this.b()){var d=C().height+(IPHONE&&SAFARI?61:0)-41-this.ga-(vc(this.b(),"tabbed")?30:0);$d(this.b(),d);$d(this.Mg,d-(this.De?143:243)+(IPHONE?50:0)-(this.La.length?38:0));640<c&&this.s&&this.s.parentElement?(Md(this.s,"max-height",c-Td(this.s.parentElement).y-(this.De?213:313)-(this.La.length?38:0)-this.ga+"px"),this.Zh()):640>c&&(Md(this.s,"max-height",""),this.Zh());b&&J(n(function(){(new He(this.s,[this.s.scrollLeft,this.s.scrollTop],
[this.s.scrollLeft,this.s.scrollHeight],400)).play()},this),0)}};m.zm=function(){N(A("overlay"),j);FB.ui({method:"feed",name:this.i.name,link:this.i.link,L:this.i.Fb,caption:"on XYLO",description:this.i.description},function(){N(A("overlay"),l)});Pj(ng.a(),this.i.id,j,l)};
m.Om=function(){var a="https://twitter.com/share?url="+this.i.link+"&text=I'm watching "+this.i.name+" "+this.i.link;if(IPHONE||IPAD){var b=document.createElement("a");b.setAttribute("href",a);b.setAttribute("target","_blank");a=document.createEvent("HTMLEvents");a.initEvent("click",j,j);b.dispatchEvent(a)}else b=window.open(a,"Tweet","height=320,width=550"),b.moveTo(screen.width/2-225,screen.height/2-150),b.focus(),Pj(ng.a(),this.i.id,l,j)};
m.Em=function(){v(this.Ta.b(),"play-loading");var a=gg(this.o);T.a().c(Kf,a)};
m.Lm=function(){if(!y(this.sc,"decorated")){var a=new xj(l,j,l,j);a.k(B("recipients",this.sc));var b=new xj(l,l,l,l,j);b.k(B("send-message",this.sc));O(O(this.g(),b,"add",n(function(c){var d=Qb(a.Vb);d.length&&(t(d,function(a){var b=new Qj({from_user:V.a().h,to_user:a.id,text:c.text||"Sent you a video!",media:this.o});b.time=new vd;b.Sb=jd(b.time.getTime());V.a().c("new-message",b);U("/_message",c.Ni,"POST","from_id="+V.a().h.id+"&to_id="+a.id+"&text="+b.text+"&media_id="+this.o.id)},this),a.clear(),
b.clear(),sf(this.ed,l),N(this.sc,l))},this)),B("close",this.sc),"click",n(function(){N(this.sc,l);sf(this.ed,l)},this));v(this.sc,"decorated")}N(this.sc,af(this.ed))};function Rj(a,b,c,d,e,g){Q.call(this);this.Ha=Df();this.ak=a||k;this.bf=b||k;this.ic={};this.oi=c||k;this.ud=d||k;this.aj=g||k;this.jm=e||k;this.Rg=this.Ha?new dj:k;this.Jd=this.Ij=0}s(Rj,Q);
Rj.prototype.u=function(a){Rj.e.u.call(this,a);a.innerHTML="";a.scrollTop=0;v(this.b(),"ios-scroll");(this.ud||this.oi)&&Sj(this);!this.ud&&this.aj&&U(this.aj,n(function(a){a=X(a.target);a.description&&this.Ce?(B("description",this.Ce).innerHTML=fj(a.description),this.Ij=P(this.Ce).height,this.resize()):a.description&&Sj(this)},this));this.C=D("div","loading",D("div","loading-spinner"));this.b().appendChild(this.C);N(this.C,l);y(this.b(),"starred")&&(this.Md=D("div","no-comments","Favorities will appear here."),
this.b().appendChild(this.Md));this.Yc=D("div","medias");this.b().appendChild(this.Yc);O(this.g(),window,"resize",Aa(J,n(this.resize,this)));this.bf?(N(this.C,j),U(this.bf,n(function(a){N(this.C,l);a=jh(Ch(a.target));a=Ra(a,function(a){return new Zf(a)});t(a,this.xg,this);this.Jd=P(this.Yc).height;this.resize()},this))):this.ak&&(t(this.ak,this.xg,this),this.Jd=P(this.Yc).height,this.resize())};
Rj.prototype.xg=function(a){this.Md&&N(this.Md,l);var b=E(Ui,{media:a}),c=B("list-play",b),d=B("list-plus",b);this.Yc.appendChild(b);if(this.Ha){var e=this.Rg,g=new cj(b,i);ej(e,g)}O(O(O(this.g(),b,"click",n(function(){Y.a().c(Hg,a)},this)),c,"click",n(function(b){b.preventDefault();b.stopPropagation();b=gg(a);T.a().c(Kf,b)},this)),d,"click",function(b){b.preventDefault();b.stopPropagation();Pf().c(qg,a,j)});this.ic[a.id]=b};
Rj.prototype.resize=function(){$d(this.b(),C().height+(IPHONE&&SAFARI?61:0)-(DESKTOP?40:0)-(vc(this.b(),"tabbed")?30:0))};function Sj(a){a.Ce=E(Ji,{Fb:a.oi,description:a.ud?fj(a.ud):"",link:a.jm});a.b().appendChild(a.Ce);a.Ij=P(a.Ce).height;a.resize()}Rj.prototype.Ch=function(a,b){U("/admin/_addprogram",n(function(b){b=jh(Ch(b.target));b=new fg(b);a.c(pg,b)},this),"POST","channel="+a.id+"&media="+b.id)};function Qj(a){this.id=a.id;this.N=Mg(V.a(),a.from_user);this.Mn=Mg(V.a(),a.to_user);this.text=a.text;this.media=a.media?"brkn.model.Media"==la(a.media)?a.media:eg(dg.a(),a.media):k;this.mb=a.read;this.Sb=(this.time=a.time?ud(a.time+"Z"):k)?jd(this.time.getTime()):k}Qj.prototype.kg=function(){U("/_message",xe(),"POST","id="+this.id+"&read=1");this.mb=j;V.a().h.c("read-message",this.N.id)};function Tj(a){return'<div class="message'+(a.Bl?" flip":"")+'"><a href="#user:'+F(a.message.N.id)+'"><div class="picture" style="background:'+F(a.message.N.color)+'"><img src="'+F(a.message.N.L)+'"/></div></a><div class="body"><a class="user" href="#user:'+F(a.message.N.id)+'">'+F(a.message.N.name)+'</a>  <div class="texts"><div class="text">'+F(a.message.text)+'<div class="timestamp">'+F(a.message.Sb)+"</div></div></div></div></div>"}
function Uj(a){return'<div class="text">'+F(a.message.text)+'<div class="timestamp">'+F(a.message.Sb)+"</div></div>"};function Vj(a,b){Q.call(this);this.$a=a||k;this.Ra=b||k;this.wh={};this.j=new xj(l);this.ga=0;this.ib=this.$a.id==V.a().h.id}s(Vj,Q);
Vj.prototype.u=function(a){Vj.e.u.call(this,a);a.innerHTML="";a.scrollTop=0;this.kc=D("div","messages");this.b().appendChild(this.kc);z(this.kc,"inbox",this.ib);this.C=D("div","spinner");this.kc.appendChild(this.C);N(this.C,l);this.Tf=D("div","no-comments",this.ib?"No Messages":"Start a private conversation.");this.kc.appendChild(this.Tf);this.Pb=D("div","no-comments","Load previous messages");this.kc.appendChild(this.Pb);N(this.Pb,!this.ib&&10<=this.Ra.length);N(this.Tf,j);this.ib?(this.Ra=this.Ra.reverse(),
V.a().h.subscribe("read-message",function(a){if((a=this.wh[a])&&y(a,"unread"))x(a,"unread"),Y.a().c("new-messages",-1)},this)):(Pe(this.j,this.b()),O(O(O(O(O(this.g(),window,"click",n(function(a){!vc(a.target,"comment-input")&&!this.j.v()&&(this.j.Ia(l),this.resize(0))},this)),this.Tf,"click",n(function(a){a.preventDefault();a.stopPropagation();this.j.Ia(j)},this)),this.Pb,"click",n(this.lm,this)),this.j,"add",n(this.Bb,this)),window,"resize",Aa(J,n(this.resize,this))));Pa(this.Ra,function(a){Wj(this,
a)},this);V.a().subscribe("new-message",function(a){if(a.N.id!=V.a().h.id&&(a.N.id==this.$a.id||a.Mn.id==this.$a.id)){if(this.ib){var c=j,d=this.wh[a.N.id];d&&(c=!y(d,"unread"),hc(d));c&&Y.a().c("new-messages",1)}Wj(this,a,this.ib);this.resize()}},this);this.resize()};
Vj.prototype.lm=function(){this.Pb&&N(this.Pb,l);N(this.C,j);U("/_message/"+this.$a.id+"?offset="+this.Ra.length,n(function(a){a=X(a.target);if(a.length){this.Of=k;var b=D("div","separator");gc(this.kc,b,3)}N(this.C,l);this.Pb&&N(this.Pb,!!a.length);Pa(a,function(a){a=new Qj(a);this.Ra.push(a);Wj(this,a,j);return a},this);a.length&&(this.b().scrollTop=0,this.Of=k,this.b().scrollTop=b.offsetHeight)},this))};
function Wj(a,b,c){N(a.Tf,l);a.Pb&&N(a.Pb,!a.ib&&10<=a.Ra.length);var d,e;if(!a.ib&&a.Of&&a.Of.N.id==b.N.id)d=E(Uj,{message:b}),B("texts",a.Vj).appendChild(d),b.media&&(e=E(Ui,{media:b.media}),B("texts",a.Vj).appendChild(e)),d=B("timestamp",d);else{var g=E(Tj,{message:b,Bl:b.N.id==V.a().h.id});a.Of=b;a.Vj=g;c?gc(a.kc,g,3):a.kc.appendChild(g);d=B("timestamp",g);z(g,"unread",!b.mb);if(a.ib){if(a.wh[b.N.id]=g,O(a.g(),g,"click",n(function(){b.mb||(b.kg(),x(g,"unread"),Y.a().c("new-messages",-1));Y.a().c(Ig,
b.N)},a)),c){var h=A("mp3-1");h.load();h.play()}}else b.media&&(e=E(Ui,{media:b.media}),B("texts",g).appendChild(e))}kd(id.a(),b.time,d);c||(a.b().scrollTop=a.b().scrollHeight);!a.ib&&(!b.mb&&b.id&&Y.a().Qg==b.N.id)&&b.kg();e&&(c=B("list-play",e),d=B("list-plus",e),O(O(O(a.g(),e,"click",n(function(){Y.a().c(Hg,b.media)},a)),c,"click",n(function(a){a.preventDefault();a.stopPropagation();a=gg(b.media);T.a().c(Kf,a)},a)),d,"click",function(a){a.preventDefault();a.stopPropagation();Pf().c(qg,b.media,
j)}))}Vj.prototype.Bb=function(a){var b=new Qj({from_user:V.a().h,to_user:Mg(V.a(),this.$a),text:a.text});b.time=new vd;b.Sb=jd(b.time.getTime());Wj(this,b);U("/_message",a.Ni,"POST","from_id="+V.a().h.id+"&to_id="+this.$a.id+"&text="+a.text)};Vj.prototype.resize=function(a){this.ib?this.dispatchEvent("resize"):(this.ga=a||this.ga,$d(this.b(),C().height+(IPHONE&&SAFARI?61:0)-(DESKTOP?40:0)-42-this.ga-(vc(this.b(),"tabbed")?30:0)))};function Xj(a){this.id=a.id;this.m=Mg(V.a(),a.user);this.type=a.type;this.V=a.comment?new Bj(a.comment):k;this.mb=a.read;this.Sb=(this.time=a.time?ud(a.time+"Z"):k)?jd(this.time.getTime()):k}Xj.prototype.kg=function(){U("/_notification",xe(),"POST","id="+this.id+"&read=1");this.mb=j};function Yj(a){return'<div class="notification"><a href="#user:'+F(a.N.id)+'"><div class="picture" style="background:'+F(a.N.color)+'"><img src="'+F(a.N.L)+'"/></div></a><div class="body"><div class="type"><a class="user" href="#user:'+F(a.N.id)+'">'+F(a.N.name)+"</a> "+("reply"==a.Ah.type?"replied to your comment":"")+("mention"==a.Ah.type?"mentioned you in a comment":"")+'</div><div class="texts"><div class="text">'+F(a.text)+'<div class="timestamp">'+F(a.Ah.Sb)+"</div></div></div></div></div>"}
;function Zj(a){Q.call(this);this.$c=a;this.kk={};this.Id={};this.ga=0}s(Zj,Q);
Zj.prototype.u=function(a){Zj.e.u.call(this,a);a.innerHTML="";a.scrollTop=0;this.Ee=D("div","notifications");this.b().appendChild(this.Ee);this.C=D("div","spinner");this.Ee.appendChild(this.C);N(this.C,l);this.zh=D("div","no-comments","No Notifications");this.Ee.appendChild(this.zh);N(this.zh,!this.$c.length);t(this.$c,function(a){$j(this,a)},this);this.dispatchEvent("resize");V.a().subscribe("new-notification",function(a){$j(this,a,j);Y.a().c("new-messages",1);this.dispatchEvent("resize")},this)};
function $j(a,b,c){if(b.V){N(a.zh,l);var d,e=b.V.text.replace(/@\[(\d+):([a-zA-z\s]+)\]/g,function(a,b,c){return c}),e=E(Yj,{Ah:b,text:e,N:b.V.m});c?gc(a.Ee,e,2):a.Ee.appendChild(e);a.kk[b.id]=e;d=a.Id[b.V.media.id]||[];d.push(b);a.Id[b.V.media.id]=d;d=B("timestamp",e);z(e,"unread",!b.mb);O(a.g(),e,"click",n(function(){b.mb||t(this.Id[b.V.media.id]||[],function(a){a.kg();Y.a().c("new-messages",-1);(a=this.kk[a.id])&&x(a,"unread")},this);Y.a().c(Hg,b.V.media)},a));kd(id.a(),b.time,d);c?(a=A("mp3-4"),
a.load(),a.play()):a.b().scrollTop=a.b().scrollHeight}};function ak(a){return'<div class="user'+(a.media?" media":"")+'"><div class="name">'+F(a.m.name)+'</div><div class="picture" style="background:'+F(a.m.color)+'"><img src="'+F(a.m.L)+'"/></div>'+(a.timestamp?'<div class="timestamp">'+F(a.timestamp)+"</div>":"")+(a.media?'<div class="media"><div class="watched">LAST WATCHED </div><div class="watching">NOW WATCHING </div><a class="media-link">'+F(a.media.name)+"</a></div>":"")+"</div>"};function bk(a,b){Q.call(this);this.$d=a||k;this.rg={};this.ad=[];this.Nd=[];this.Rb=[];this.Tb=!!b;this.ga=0}s(bk,Q);
bk.prototype.u=function(a){bk.e.u.call(this,a);a.innerHTML="";a.scrollTop=0;v(a,"friendlist");v(a,"ios-scroll");this.Tb||(a=D("div","label show-all",D("a",{href:"#friendlist:1"},"ALL FRIENDS >")),this.b().appendChild(a));this.Xf=D("div","label online-friends-label",this.Tb?"ONLINE FRIENDS":D("a",{href:"#friendlist:1"},"ONLINE FRIENDS"));N(this.Xf,l);this.b().appendChild(this.Xf);this.Hh=D("div","online-friends");this.b().appendChild(this.Hh);this.Ke=D("div","label",this.Tb?"RECENTLY ONLINE":D("a",
{href:"#friendlist:1"},"RECENTLY ONLINE"));N(this.Ke,l);this.b().appendChild(this.Ke);this.Je=D("div","recent-friends");this.b().appendChild(this.Je);this.Tb&&(this.Vf=D("div","label","OFFLINE FRIENDS"),N(this.Vf,l),this.b().appendChild(this.Vf),this.Bh=D("div","offline-friends"),this.b().appendChild(this.Bh),this.Tb&&this.resize(),O(this.g(),window,"resize",n(function(){this.Tb&&J(n(function(){this.resize()},this))},this)));if(this.$d)Na.sort.call(this.$d,function(a,b){return a.F&&!b.F?1:!a.F&&b.F?
-1:!a.F&&!b.F?0:a.F.getTime()<b.F.getTime()?1:-1}||db),t(this.$d,function(a){ck(this,a)},this),N(this.b(),j);else{var a=V.a(),b=n(function(a){this.$d=a;Na.sort.call(this.$d,function(a,b){return a.F&&!b.F?1:!a.F&&b.F?-1:!a.F&&!b.F?0:a.F.getTime()<b.F.getTime()?1:-1}||db);t(this.$d,function(a){ck(this,a)},this);N(this.b(),j)},this);a.pj?b&&b(a.Zg):U("/_friends",n(function(a){a=X(a.target);this.Zg=Ra(a,function(a){return Mg(this,a)},this);this.pj=j;b&&b(this.Zg)},a))}V.a().subscribe(Lg,this.Rn,this)};
function ck(a,b){if(!a.rg[b.id]){var c=l,d=b.F?jd(b.F.getTime()):k,e=E(ak,{m:b,timestamp:d,media:b.Lb});b.F&&432E5>r()-b.F.getTime()&&kd(id.a(),b.F,B("timestamp",e));b.kb?(N(a.Xf,j),v(e,"online"),t(a.ad,function(a,d){a.re()>b.re()&&(gc(this.Hh,e,d),bb(this.ad,d,0,b),c=j)},a),c||(a.Hh.appendChild(e),a.ad.push(b))):d&&(3>a.Rb.length||a.Tb)?(t(a.Rb,function(a,d){a.F&&(b.F&&a.F.getTime()<b.F.getTime())&&(gc(this.Je,e,d),bb(this.Rb,d,0,b),c=j)},a),c||(a.Je.appendChild(e),a.Rb.push(b)),N(a.Ke,j),N(a.Je,
j)):a.Tb&&(!Ta(a.Rb,function(a){return b.id==a.id})&&!Ta(a.Nd,function(a){return b.id==a.id}))&&(N(a.Vf,j),t(a.Nd,function(a,d){a.F&&(b.F&&a.F.getTime()<b.F.getTime())&&(gc(this.Bh,e,d),bb(this.Nd,d,0,b),c=j)},a),c||(a.Bh.appendChild(e),a.Nd.push(b)));a.Tb||(N(a.Ke,!a.ad.length&&a.Rb.length),N(a.Je,!a.ad.length&&a.Rb.length));a.rg[b.id]=e;d=B("media-link",e);O(a.g(),e,"click",n(function(){Y.a().c(Ig,b)},a));d&&O(a.g(),d,"click",n(function(a){a.stopPropagation();a.preventDefault();Y.a().c(Hg,b.Lb)},
a))}}bk.prototype.Rn=function(a){var b=this.rg[a.id];b&&(hc(b),Tb(this.rg,a.id),Xa(this.Nd,function(b){return b.id==a.id})&&N(this.Vf,!!this.Nd.length),Xa(this.ad,function(b){return b.id==a.id})&&N(this.Xf,!!this.ad.length),Xa(this.Rb,function(b){return b.id==a.id})&&N(this.Ke,!!this.Rb.length));ck(this,a)};bk.prototype.resize=function(a){this.ga=a||this.ga;$d(this.b(),C().height+(IPHONE&&SAFARI?61:0)-42-this.ga-(vc(this.b(),"tabbed")?30:0))};function dk(a,b){Q.call(this);this.wg=a;this.Zd=b||k;this.ba=0;this.Mk=!b;this.Rc=l;this.mj={};this.pf={};this.Hd={};this.Wc={};this.Ai={};this.Ak={};this.Fi=[]}s(dk,Q);
dk.prototype.u=function(a){dk.e.u.call(this,a);a.innerHTML="";a.scrollTop=0;v(a,"stream");v(a,"ios-scroll");this.Mk&&(this.Yg=D("div","friendlist"),N(this.Yg,l),this.b().appendChild(this.Yg),a=D("div","label","ACTIVITY"),this.b().appendChild(a));this.ee=D("div","activities");this.b().appendChild(this.ee);this.C=D("div","spinner");this.b().appendChild(this.C);N(this.C,l);this.Md=D("div","no-comments",this.Zd==V.a().h.id?"Your activity will appear here.":"Friends' activity will appear here.");this.b().appendChild(this.Md);
this.wg&&this.wg.length&&ek(this,this.wg);this.Mk&&(this.Xg=new bk(i,l),this.Xg.k(this.Yg));V.a().subscribe("new-activity",function(a){(this.Zd==a.user.id||!this.Zd&&a.user.id!=V.a().h.id)&&fk(this,a,i,i,j)},this);O(O(this.g(),this.b(),"scroll",n(function(){!this.Rc&&this.b().scrollTop+C().height>this.b().scrollHeight-60&&gk(this)},this)),window,"resize",Aa(J,n(this.resize,this)));this.resize()};
function gk(a){N(a.C,j);U("/_activity"+(a.Zd?"/"+a.Zd:"")+"?offset="+a.ba,n(function(a){this.mj[String(a.target.Ae)]||(this.mj[String(a.target.Ae)]=j,a=X(a.target).activities,this.Rc=!a.length,z(this.C,"finished",this.Rc),N(this.C,this.Rc),ek(this,a))},a))}
function ek(a,b){a.pf=[];a.Hd=[];a.Wc=[];t(b,function(a){this.ba++;switch(a.type){case "session":var a=a.session,b=Vb(this.pf,a.channel_id,[]);b.push(a);this.pf[a.channel_id]=b;break;case "liked":this.Hd[a.media.id]||(b=Vb(this.Wc,a.media.id,[]),b.push(a),this.Wc[a.media.id]=b,b=Vb(this.Ai,a.user.id,[]),b.push(a),this.Ai[a.user.id]=b);break;case "comment":a=a.comment,b=Vb(this.Hd,a.media.id,[]),b.push(a),this.Hd[a.media.id]=b,this.Wc[a.media.id]&&Tb(this.Wc,a.media.id)}},a);Pb(a.pf,function(a){fk(this,
i,a,"session")},a);Pb(a.Hd,function(a){fk(this,i,a,"comment")},a);Pb(a.Wc,function(a){1<a.length&&fk(this,i,a,"liked")},a);Pb(a.Ai,function(a){fk(this,i,a,"liked")},a)}
function fk(a,b,c,d,e){N(a.Md,l);var b=b||k,c=c||k,g=b?b.type:d,h=[],p=b?[Mg(V.a(),b.user)]:[],q=b?ud(b.time+"Z"):k;c&&t(c,function(a){Ta(p,function(b){return b.id==a.user.id})||p.push(Mg(V.a(),a.user));var b=ud((a.time||a.tune_in)+"Z");q=q&&q.getTime()>b.getTime()?q:b;"session"==g?t(a.media,function(a){!this.Hd[a.id]&&(!this.Wc[a.id]&&!Ta(h,function(b){return b.id==a.id}))&&h.push(a)},this):"liked"==g&&!this.Ak[a.media.id]&&(h.push(a.media),this.Ak[a.media.id]=j)},a);switch(g){case "session":if(!a.Zd&&
2>p.length)return;var d=b?b.session:c[0],w=R.a().get(d.channel_id),h=b?b.session.media:h;3<h.length&&(h=h.slice(0,3));b=E(Gi,{M:p,U:w,time:jd(q.getTime()),Yk:!!d.tune_out});break;case "comment":h=b?[b.comment.media]:[eg(dg.a(),c[0].media)];b=Ra(b?[b.comment]:c,function(a){a=new Bj(a);a.text=fj(a.text);a.text=a.text.replace(/@\[(\d+):([a-zA-z\s]+)\]/g,function(a,b,c){return'<a href="#user:'+b+'">'+c+"</a>"});return a});b=E(Hi,{tb:b.reverse().slice(0,3),M:p,media:h[0]});break;case "liked":h=b?[b.media]:
h;b=E(Ii,{M:p,bk:h.length,time:jd(q.getTime())});break;default:return}if(h.length){kd(id.a(),q,B("timestamp",b));d=Ua(a.Fi,function(a){return a.time<q.getTime()});bb(a.Fi,d,0,{time:q,element:b});var G=B("medias",b);t(h,function(a){var b=eg(dg.a(),a),a=E(Ui,{media:b}),c=B("list-play",a),d=B("list-plus",a);B("thumb",a);G.appendChild(a);O(O(O(this.g(),a,"click",function(){Y.a().c(Hg,b)}),c,"click",function(a){a.preventDefault();a.stopPropagation();a=gg(b);T.a().c(Kf,a)}),d,"click",function(a){a.preventDefault();
a.stopPropagation();Pf().c(qg,b,j)})},a);e?gc(a.ee,b,0):c?gc(a.ee,b,d):a.ee.appendChild(b);J(Aa(v,b,"show"))}}dk.prototype.resize=function(){var a=C().height+(IPHONE&&SAFARI?61:0)-40-(vc(this.b(),"tabbed")?40:10);$d(this.b(),a);P(this.ee).height<a&&gk(this)};function hk(a){Q.call(this);this.$a=this.o=a;this.Rf=a.id==V.a().h.id;this.Eb=[this.Rf?"inbox":"messages","activity","starred"]}s(hk,Q);m=hk.prototype;m.u=function(a){hk.e.u.call(this,a);v(a,"profile");v(a,"ios-scroll");Ac(a,Si,{yh:this.Rf})};
m.w=function(){this.Ya=B("tabs",this.b());this.Rf&&(U("/_notification",n(function(a){var a=X(a.target),a=Qa(a,function(a){return!!a}),b=0,a=Ra(a,function(a){a=new Xj(a);b+=!a.mb?1:0;return a},this);Y.a().c("new-messages",b);this.$c=new Zj(a);O(this.g(),this.$c,"resize",Aa(J,n(this.cg,this)));this.$c.k(B("notifications-content",this.b()))},this)),this.Ko=B("inbox-content",this.b()),O(this.g(),window,"resize",Aa(J,n(this.cg,this))));U("/_message/"+this.$a.id,n(function(a){var a=X(a.target),b=0,a=Ra(a,
function(a){a=new Qj(a);b+=!a.mb?1:0;return a},this);this.Rf&&Y.a().c("new-messages",b);this.Ra=new Vj(this.$a,a);O(this.g(),this.Ra,"resize",Aa(J,n(this.cg,this)));this.Ra.k(B("messages-content",this.b()))},this));U("/_star/"+this.$a.id,n(function(a){var a=X(a.target),a=Ra(a,function(a){return new Zf(a)}),b=V.a().h;b.Ok=a;b.c("set-starred");this.Re=new Rj(a);this.Re.k(B("starred-content",this.b()))},this));U("/_activity/"+this.$a.id,n(function(a){a=X(a.target).activities;this.ji=new dk(a,this.$a.id);
this.ji.k(B("activity-content",this.b()))},this));O(this.g(),this.Ya,"click",n(function(a){a=uc(a.target,"li");this.lc(a)},this));dg.a().subscribe("star",function(a,b){if(b)this.Re.xg(a);else{var c=this.Re,d=c.ic[a.id];d&&(Hc(d),Tb(c.ic,a.id))}},this);O(this.g(),window,"resize",Aa(J,n(this.rc,this)));this.rc()};m.lc=function(a){t(this.Eb,function(b){z(this.Ya.parentElement,b,y(a,b));this.J=y(a,b)?b:this.J},this)};
m.rc=function(){var a=C().height+(IPHONE&&SAFARI?61:0)-41-(vc(this.b(),"tabbed")?30:0);$d(this.b(),a);this.cg()};m.cg=function(){var a=P(this.b()).height-80;this.$c&&$d(this.$c.b(),Math.floor(a/2));this.Ra&&$d(this.Ra.b(),Math.ceil(a/2))};function ik(){Q.call(this);this.Ha=Df();this.jl=new wj;this.Eb={};this.vc=[];this.Rd=[];this.Nb=this.de=0}s(ik,Q);m=ik.prototype;
m.w=function(){ik.e.w.call(this);this.fe=B("arrow",this.yc);this.Lg=A("sidebar-content");this.$j=A("media-list");this.ag=A("profile");this.oj=A("friendlist");this.Yi=A("conversation");this.yc=A("toolbar");this.Ya=B("tabs",this.b());this.vg=B("activities-count",this.b());this.kh=B("inbox-count",this.b());var a=new df(document);t(ic(this.Ya),function(a){var b=Jb(a)[0];this.Eb[b]=a;this.vc.push(b)},this);this.Fh();U("/_activity",n(function(a){a=X(a.target);this.ji=new dk(a.activities);this.ji.k(A("stream"));
Y.a().c("new-activites",parseInt(a.new_count,10))},this));this.Re=new hk(V.a().h);this.Re.k(A("my-profile"));this.fa&&(DESKTOP||R.a().l.G&&R.a().l.d())?(this.P=A("info"),this.J="info",jk(this,"info","info")):(this.P=A("stream"),this.J="stream",jk(this,"info","stream"));var b="left";t(this.vc,function(a){var c=B(a,this.Lg);a==this.J?b="right":v(c,b)},this);this.Rd=[this.P,""];v(this.P,"current");if(this.Ha){this.jl.k(A("admin"));var c=E(Ki,{name:"ADMIN",className:"admin"});this.Ya.appendChild(c);this.Eb.admin=
c;this.vc.push("admin")}kk(this);O(O(O(O(this.g(),B("back-button",this.yc),"click",n(function(a){var b=this.Rd.shift();this.navigate(b[0],j,b[1]);kk(this);a.stopPropagation()},this)),this.Ya,"click",n(function(a){var b=this.J,c=uc(a.target,"li"),h=Jb(c)[0];jk(this,this.J,h);v(c,"selected");kk(this);b!=this.J&&a.stopPropagation();"stream"==h&&this.ik(0,j)},this)),this.yc,"click",n(function(a){((a=uc(a.target,"li"))&&Jb(a)[0]==this.J||!a)&&(new He(this.P,[this.P.scrollLeft,this.P.scrollTop],[this.P.scrollLeft,
0],300)).play()},this)),a,"key",n(function(a){a.ctrlKey&&"68"==a.keyCode&&Lb(this.b(),"dark")},this));DESKTOP&&M.a().subscribe(md,function(a){z(this.b(),"toggled",a);J(n(function(){z(this.b(),"collapsed",!a)},this),!a?500:0)},this);Y.a().subscribe("navigate",this.navigate,this);Y.a().subscribe("new-activites",this.ik,this);Y.a().subscribe("new-messages",this.sm,this);Y.a().subscribe("conversation",this.pn,this);Y.a().subscribe("media-list",this.un,this);Y.a().subscribe(Hg,this.Nk,this);Y.a().subscribe("friend-list",
this.sn,this);Y.a().subscribe(Ig,this.wn,this);R.a().subscribe(Jf,this.Fh,this);T.a().subscribe(Kf,this.Fh,this);R.a().subscribe(Gf,this.wm,this);DESKTOP&&M.a().subscribe("toggle-admin",function(a){z(this.b(),"admin",a);a?(M.a().c(md,j),jk(this,this.J,"admin")):"admin"==this.J&&jk(this,"admin","info")},this)};m.ik=function(a,b){b&&(this.de=0,N(this.vg,l));this.de+=a;nc(this.vg,this.de.toString());N(this.vg,!!this.de)};
m.sm=function(a,b){b&&(this.Nb=0,N(this.kh,l));this.Nb+=a;this.Nb=Math.max(this.Nb,0);nc(this.kh,this.Nb.toString());document.title=0<this.Nb?"("+this.Nb.toString()+") XYLO":"XYLO";N(this.kh,!!this.Nb)};m.Fh=function(a){if(a=a||R.a().l.d())if(this.Jc=a.media,!this.fa||this.Jc.id!=this.fa.o.id){var a=this.fa&&this.fa.j.v()?this.fa.j.v():k,b=this.fa?this.fa.i:k;Hc(this.fa);this.fa=new Hj(this.Jc,l,b,a);this.fa.k(A("info"))}};
m.wm=function(a){a=a||R.a().l;if((this.Jc=a.d()&&a.d().media)&&(!this.fa||this.Jc.id!=this.fa.o.id))Hc(this.fa),this.fa=new Hj(this.Jc),this.fa.k(A("info")),this.Nk(this.Jc)};
function jk(a,b,c){var d=B(c,a.Lg),e=Oa(a.vc,b),b=Oa(a.vc,c),g=(e=e<b)?0:a.vc.length-1,h=e?g<a.vc.length:0<=g;for(g;h;g+=e?1:-1){var p=B(a.vc[g],a.Lg);if(e&&g>b||!e&&g<b)v(p,"right"),x(p,"left");else if(e&&g<b||!e&&g>b)z(p,"left",e),v(p,"right");else if(g==b){x(p,"right");x(p,"left");break}}a.J=c;bb(a.Rd,0,0,[a.P,""]);x(a.P,"current");a.P=d;v(a.P,"current");kk(a)}
m.navigate=function(a,b,c){if(a==this.P)c&&nc(B("back-title",this.yc),c);else{var d=y(this.P,"screen");b?(x(this.P,"on"),x(this.P,"current"),v(a,"current"),this.P=a):(z(this.P,"on",!d),b=[this.P,rc(B("back-title",this.yc))],bb(this.Rd,0,0,b),x(this.P,"current"),this.P=a,v(this.P,"current"));z(this.yc,"back",y(this.P,"slide"));c&&nc(B("back-title",this.yc),c);this.P!=this.ag&&(Y.a().Qg=k)}};m.pn=function(a,b,c,d){(new Gj(a,b,c,d)).k(this.Yi);Y.a().c("navigate",this.Yi,l,a.name)};
m.un=function(a,b,c,d,e,g,h){(new Rj(b,c,d,e,g,h)).k(this.$j);Y.a().c("navigate",this.$j,l,a,d,e)};m.sn=function(){this.Xg=new bk(i,j);this.Xg.k(this.oj);Y.a().c("navigate",this.oj,l,"Friends")};m.Nk=function(a,b,c,d){if(this.fa&&a.id==this.fa.o.id){x(this.yc,"back");for(a=this.Rd[0][0];a&&y(a,"slide");)a=this.Rd.shift();jk(this,this.J,"info")}else{var e=A("media-info");(new Hj(a,b,c,d)).k(e);Y.a().c("navigate",e,l,a.name)}DESKTOP&&M.a().c(md,j)};
m.wn=function(a){if(!this.Qh||!(this.Qh.o.id==a.id&&this.P==this.ag))Y.a().Qg=a.id,this.Qh=new hk(a),this.Qh.k(this.ag),Y.a().c("navigate",this.ag,l,a.name),DESKTOP&&M.a().c(md,j)};function kk(a){var b=Math.round(P(a.Eb[a.J]).width/2+Td(a.Eb[a.J]).x);a.fe.style.transform="translate3d("+b+"px, 0,0)";a.fe.style.msTransform="translate3d("+b+"px, 0,0)";a.fe.style.WebkitTransform="translate3d("+b+"px, 0,0)";a.fe.style.MozTransform="translate3d("+b+"px, 0,0)";a.fe.style.$n="translate3d("+b+"px, 0,0)"};function lk(a){return'<div class="queue-media"><div class="pic"><img src="'+F(a.media.va.L)+'"></div><div class="title">'+F(a.media.name)+'</div><div class="play"></div><div class="remove"></div></div>'};function mk(){Q.call(this);this.ic={};this.jc=0;this.pa=new Bf("Queue");tf(this.pa,16,j)}s(mk,Q);
mk.prototype.u=function(a){mk.e.u.call(this,a);this.pa.k(B("queue-toggle",this.b()));this.km=B("queue-list",this.b());this.Yc=B("medias",this.b());O(O(O(this.g(),this.pa.b(),"click",n(function(){z(this.b(),"show",af(this.pa))},this)),this.km,"click",n(function(a){a.preventDefault();a.stopPropagation()},this)),window,"click",n(function(a){af(this.pa)&&(vc(a.target,"queue")||J(n(function(){x(this.b(),"show");sf(this.pa,l)},this)))},this));Pf().subscribe(qg,this.Ib,this);var a=Pf(),b=n(function(a){t(a,
function(a){this.Ib(a,j)},this)},this);U("/_queue",n(function(a){a=X(a.target);this.queue=Ra(a,function(a){return eg(dg.a(),a)},this);b&&b(this.queue)},a))};
mk.prototype.Ib=function(a,b){if(b){e=E(lk,{media:a});this.ic[a.id]=e;this.jc+=1;var c=B("play",e),d=B("remove",e);this.Yc.appendChild(e);O(O(O(this.g(),e,"click",n(function(b){b.preventDefault();b.stopPropagation();Y.a().c(Hg,a)},this)),c,"click",n(function(b){b.preventDefault();b.stopPropagation();x(this.b(),"show");sf(this.pa,l);b=gg(a);T.a().c(Kf,b);Pf().c(qg,a,l)},this)),d,"click",n(function(b){b.preventDefault();b.stopPropagation();Pf().c(qg,a,l)},this))}else if(Vb(this.ic,a.id)){var e=this.ic[a.id];
hc(e);this.jc-=1}z(this.Yc,"no-medias",!this.jc);nc(this.pa.b().firstChild,0<this.jc?this.jc.toString():"")};function nk(a){return'<div class="main"><div id="stage" class="stage"><div id="ytplayer"></div><div id="stagecover"><div class="message"><span></span><div class="spinner" style="display:none"></div><div class="restart" style="display:none">TRY AGAIN</div></div><div class="fullscreen"></div><div class="expand"></div><div class="play" style="display: none"><div></div></div><div class="pause" style="display: none"><div></div></div></div><div id="vote" class="vote" style="display:none"><div class="like"></div><div class="dislike"></div></div><div id="logo"></div><div id="notify" class="notify"></div><div id="search" class="search"><div class="search-box"><div id="search-icon" class="search-icon"></div><input type="text" id="search-input" class="search-input" /><div id="clear-icon" class="clear-icon" style="display:none"></div></div><div class="search-results no-medias" id="search-results"><div class="label">SEARCH</div><div class="no-medias">NO RESULTS</div><div class="no-overflow"><div class="results"><div class="subtitle subtitle-channels">CHANNELS</div><div class="result-channels"></div><div class="subtitle subtitle-medias">VIDEOS</div><div class="result-medias"></div></div></div></div></div><div id="queue" class="queue"><div class="queue-toggle"><span></span></div><div class="queue-list"><div class="label">QUEUE</div><div class="medias-container"><div class="medias no-medias"><div class="no-medias">CLICK <span class="plus"></span> TO ADD VIDEOS</div></div></div></div></div></div><div id="guide" class="guide timeless position-hack'+
(a.sj?" toggled":" collapsed")+(a.sidebar?" sidebar-toggled":"")+'"><div class="channel-scrollable"><div id="channel-names" class="channel-names"></div><div class="channel-h-scrollable"><div id="channels" class="channels"></div></div></div><div class="header" id="header"><div class="times"><div id="schedule-toggle" class="schedule-toggle"><div class="fader"><div class="timeless"></div><div class="switcher"><div class="switch"></div></div><div class="scheduled"></div></div></div><div id="now-left" class="left browse">&#9664;<span> NOW</span></div><div id="now-right" class="right browse"><span>NOW </span>&#x25B6;</div></div><div id="ticker" class="ticker"><div id="go-live" class="go-live">GO LIVE</div></div><div id="my-ticker" class="my-ticker" style="display:none"><div class="me" style="background:'+
F(a.m.color)+";border-color:"+F(a.m.color)+';"><img src="'+F(a.m.L)+'"/></div></div></div><div class="pan-handle" id="pan-handle"></div></div><div id="controller" class="controller'+(a.sj?" guide-toggled":" collapsed")+(a.sidebar?" sidebar-toggled":"")+'"><div class="background"></div><div class="left"><div id="guide-toggle" class="guide-toggle dark button">GUIDE</div><div class="controls"><div class="play dark button"><div class="icon"></div></div><div class="next dark button"><div class="icon"></div></div><div class="volume dark button"><div class="icon"></div></div></div><div class="border"></div></div><div class="right"><div id="info-toggle" class="info-toggle dark button"><div class="icon"></div></div><div id="admin-toggle" class="admin-toggle dark button" style="display: none"><div class="icon"></div><div id="toggle-pending" class="pending" style="display:none"></div></div><div id="sidebar-toggle" class="sidebar-toggle dark button"><div class="icon"></div></div><div class="border"></div></div><div class="progress" style="display: none"><div class="elapsed animate"><div class="seek"></div></div><div class="title"></div><div class="current-time"></div><div class="duration"></div></div></div><div id="sidebar" class="'+
(a.sidebar?"toggled":"collapsed")+'"><div id="toolbar"><div class="back"><div class="back-button"><div>BACK</div></div><div class="back-title"></div></div><ul class="tabs"><li class="info tab selected"><div class="label">NOW</div></li><li class="stream tab"><div class="label">STREAM<div class="activities-count" style="display:none"></div></div></li><li class="profile tab"><div class="label">HOME<div class="inbox-count" style="display:none"></div></div></li></ul><div class="radial-grad"></div><div class="arrow"></div></div><div id="sidebar-content"><div id="info" class="screen info"><div class="no-info">Pick a channel or play a story.</div></div><div id="stream" class="screen stream"><div class="loading loading-activity"><div class="loading-spinner"></div></div></div><div id="my-profile" class="screen profile"></div><div id="admin" class="screen admin"></div><div id="media-list" class="slide media-list"></div><div id="friendlist" class="slide friendlist"></div><div id="conversation" class="slide"></div>'+
(a.yg?'<div id="admin-col-list" class="slide admin"></div><div id="admin-list" class="slide admin-list"></div>':"")+'<div id="media-info" class="slide info"></div><div id="profile" class="slide profile"></div></div></div><div id="hovercard" class="watch-with" style="display: none"></div><div id="welcome" class="welcome" style="display:none"><div class="search"></div><div class="thanks"></div><div class="guide"></div><div class="sidebar"></div><div class="drag"></div><div class="close"></div></div></div>'}
;function ng(){}ka(ng);_gaq=[];ng.prototype.init=function(){_gaq.push(["_setAccount","UA-38058655-1"]);_gaq.push(["_trackPageview"]);var a=document.createElement("script");a.type="text/javascript";a.async=j;a.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)};ng.prototype.login=function(){_gaq.push(["_trackEvent","Users","Login",V.a().h.id])};
function ug(a,b){_gaq.push(["_trackEvent","Media","Play",b.id]);_gaq.push(["_trackEvent","Users","Play",V.a().h.id])}ng.prototype.Gc=function(a,b){a.G||(_gaq.push(["_trackEvent","Channel","OptOut",b.id]),_gaq.push(["_trackEvent","Channel","OptIn",a.id]))};
ng.prototype.V=function(a,b,c){_gaq.push(["_trackEvent","Media","Comment",a.id]);_gaq.push(["_trackEvent","Users","Comment",V.a().h.id]);b&&_gaq.push(["_trackEvent","Facebook","Comment",V.a().h.id]);c&&_gaq.push(["_trackEvent","Twitter","Comment",V.a().h.id])};
function Pj(a,b,c,d){_gaq.push(["_trackEvent","Media","Share",b.id]);_gaq.push(["_trackEvent","Users","Share",V.a().h.id]);c&&_gaq.push(["_trackEvent","Facebook","Share",V.a().h.id]);d&&_gaq.push(["_trackEvent","Twitter","Share",V.a().h.id]);U("/_share",xe(),"POST","facebook="+c+"&twitter="+d)}ga("_gaq",_gaq);function ok(){K.call(this);this.Yj=l}s(ok,K);ka(ok);ok.prototype.init=function(a){this.Xk=a;a=(new appengine.Channel(unescape(a))).open();a.onmessage=n(this.Dm,this);a.onclose=n(this.lk,this);I(window,"onbeforeunload",n(this.lk,this));return this};
ok.prototype.Dm=function(a){var b=jh(a.data);switch(b.type){case "viewer_change":var c=Mg(V.a(),b.user),d=b.time&&ud(b.time+"Z");c.Kc&&d&&c.Kc.end(d);(a=b.last_channel_id&&R.a().get(b.last_channel_id))&&a.c("remove-viewer",c);c.Lb&&c.Lb.c(bg,c,a,j);var e=b.channel_id&&R.a().get(b.channel_id),a=b.media&&eg(dg.a(),b.media);e&&(d=d||new vd,d=new mg(b.session_id,c,e,d),c.Kc=d,e.c(sg,d));a&&a.c(bg,c,e,b.online!=j);V.a().c(Lg,c,b.online);break;case "notification":a=new Xj(b.notification);V.a().c("new-notification",
a);break;case "new_comment":c=new Bj(b.comment);if(c.m.id!=V.a().h.id&&(d=b.tweet?new Cj(b.tweet):k,a=eg(dg.a(),b.comment.media)))a.c($f,c),d&&a.c("add-tweet",d);break;case "new_message":a=new Qj(b.message);V.a().c("new-message",a);Y.a().Qg!=a.N.id&&Xf.a().c("flash","messaged you",a.text,a.N,a.N.L,"#user:"+a.N.id);break;case "new_activity":V.a().c("new-activity",b.activity);b.activity.user.id!=V.a().h.id&&"session"!=b.activity.type&&Y.a().c("new-activites",1);break;case "update_programs":a=b.programs;
e=R.a().get(b.channel_id);t(a,function(a){e.c(tg,a)},this);break;case "new_programs":b.channel&&(e=R.a().hf(b.channel));t(b.programs,n(function(a){a=new fg(a);if(e=e||R.a().get(b.channel_id))e.c(pg,a),R.a().l&&R.a().l.d(),T.a().d()||(R.a().c(Gf,e),R.a().c(Jf,a))},this));break;case "twitter_auth":V.a().h.c(jg)}};
ok.prototype.lk=function(){if(!this.Yj){var a=R.a().l.G&&R.a().l.Lb&&Math.floor(T.a().getCurrentTime());DESKTOP&&U("/_settings",xe(),"POST","show_guide="+M.a().Tc+"&show_sidebar="+M.a().hd+(a?"&current_seek="+a:""));this.Yj=j}};function pk(){K.call(this);this.Uo=[]}s(pk,K);ka(pk);pk.prototype.sh=function(a){Pb(a,n(function(a,c){t(a,n(function(a){a=new fg(a);R.a().pd[c]&&R.a().pd[c].ld(a)},this))},this))};var qk=l;function rk(a){a.match(/[\d]+/g).length=3}
if(navigator.plugins&&navigator.plugins.length){var sk=navigator.plugins["Shockwave Flash"];sk&&(qk=j,sk.description&&rk(sk.description));navigator.plugins["Shockwave Flash 2.0"]&&(qk=j)}else if(navigator.mimeTypes&&navigator.mimeTypes.length){var tk=navigator.mimeTypes["application/x-shockwave-flash"];(qk=tk&&tk.enabledPlugin)&&rk(tk.enabledPlugin.description)}else try{var uk=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7"),qk=j;rk(uk.GetVariable("$version"))}catch(vk){try{uk=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6"),
qk=j}catch(wk){try{uk=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),qk=j,rk(uk.GetVariable("$version"))}catch(xk){}}};function yk(a,b,c,d,e,g,h,p){this.bf=a;this.ll=b;this.ud=c;this.Ac=d;this.Oo=e;this.Ho=g;this.ra=h;this.hb=p;this.Hn=[];this.Eg=[];this.wo=[];this.Yo=[]}yk.prototype.qj=ca("ll");yk.prototype.Lk=function(a){this.Ac=a;return this};yk.prototype.di=function(a){this.z=a;return this};function zk(a){this.bf=a;this.An=k}function Ak(a){this.bf=a;this.An=this.dp=k};function yi(a,b,c){yk.call(this,"http://www.youtube.com/watch?v="+encodeURIComponent(String(a)),b,c,"application/x-shockwave-flash");this.dl=a;this.Hn=[new zk("http://i.ytimg.com/vi/"+a+"/default.jpg")];this.di(new Ak("http://www.youtube.com/v/"+encodeURIComponent(String(a))+"&hl=en&fs=1&autoplay=1"))}s(yi,yk);
var xi=RegExp("http://(?:[a-zA-Z]{2,3}\\.)?(?:youtube\\.com/watch)(?:\\?(?:[\\w=-]+&(?:amp;)?)*v=([\\w-]+)(?:&(?:amp;)?[\\w=-]+)*)?(?:#[!]?(?:(?:(?:[\\w=-]+&(?:amp;)?)*(?:v=([\\w-]+))(?:&(?:amp;)?[\\w=-]+)*)|(?:[\\w=&-]+)))?[^\\w-]?","i");function Bk(){Q.call(this);this.ol=new Dh;this.Fl=new Cf;this.zn=new ik;this.z=new Qh;this.um=new Lh;this.cn=new mk;this.kn=new Xi}var Ck,Dk,Ek,Fk,Gk,Hk,Ik,Jk;s(Bk,Q);Bk.prototype.u=function(a){Bk.e.u.call(this,a);var b=E(nk,{m:V.a().h,yg:Df(),sj:V.a().h.tn&&!R.a().l.G&&!IPAD,sidebar:V.a().h.xn});gc(a,b,0)};
Bk.prototype.w=function(){Bk.e.w.call(this);this.ol.k(A("controller"));IPAD||this.Fl.k(A("guide"));this.zn.k(A("sidebar"));this.z.k(A("stage"));this.um.k(A("notify"));this.cn.k(A("queue"));this.kn.k(A("search"));this.To=new Kg;if(!V.a().h.fl){V.a();var a=A("welcome");N(a,j);O(this.g(),a,"click",function(){N(a,l);U("/_welcomed",xe(),"POST")})}O(this.g(),document.body,"touchmove",function(a){uc(a.target,"div","ios-scroll")||a.preventDefault()});O(this.g(),window,"click",function(a){var c=uc(a.target,
"a");if(c=c?c.href:k)if((c=c.match("#(.*):(.*)"))&&c.length)switch(a.preventDefault(),a.stopPropagation(),c[1]){case "user":a=V.a().get(c[2]);Y.a().c(Ig,a);break;case "channel":a=R.a().get(c[2]);R.a().c(Gf,a);break;case "info":a=dg.a().get(c[2]);Y.a().c(Hg,a);break;case "friendlist":Y.a().c("friend-list")}});window.onload=function(){window.onbeforeunload=da("Leaving so soon?")};U("/_presence",n(function(a){a=X(a.target);this.so=ok.a().init(a.token);var c=R.a();t(a.viewer_sessions,n(function(a){var b=
Mg(V.a(),a.user),c=V.a();Ta(c.Wf,function(a){return a.id==b.id})||c.Wf.push(b);var c=this.pd[a.channel_id],h=a.media[0]?eg(dg.a(),a.media[0]):k,p=ud(a.tune_in+"Z"),q=a.tune_out?ud(a.tune_out+"Z"):k,a=new mg(a.id,b,c,p,q);b.Kc=a;if(c){c.ff.push(a);c.c(sg,a);var w=c.d()}else h&&(w=gg(h));b.id!=V.a().h.id&&(w&&w.media.c(bg,b,c),V.a().c(Lg,b,j))},c))},this));M.a().subscribe("toggle-info",function(){var a=A("login"),c=A("static-content"),d=A("pages");x(a,"hide");v(a,"show");c.style.height=P(d).height+
80+"px";Kk(j)},this)};
function Kk(a){var b=A("login"),c=A("static-content"),d=A("pages"),e=y(b,"app");z(b,"expanded",a);A("uvTab")&&z(A("uvTab"),"show",e&&a);a?(e?c.style.bottom=-P(d).height-80+"px":c.style.top=Math.max(10,C().height-280)+"px",a=e?Math.min(C().height-100,c.scrollHeight+80):Math.min(C().height-435,c.scrollHeight+190),!e||e&&!b.scrollTop?(e=new He(b,[b.scrollLeft,b.scrollTop],[b.scrollLeft,a],300),v(b,"scrolling"),e.play(),I(e,"end",function(){x(b,"scrolling")})):b.scrollTop=a):(c.style.top="",c.style.height=
"",e?J(function(){x(b,"show")},200):c.className="")}
function Lk(){var a=A("fb-login"),b=A("static-content"),c=A("login");v(a,"disabled");v(a,"spin");U("/_session",function(a){if(200==Bh(a.target)){var e=X(a.target);if(e.error)nc(A("error"),e.error),Mk("error","Yikes...");else if(e.message)a=A("message"),nc(a,e.message),v(a,"show");else{x(document.body,"login");J(function(){J(function(){v(c,"hide");J(function(){N(A("homepage"),l);v(c,"app");v(b,"faq")},600)},600)});var a=e.channels,g=e.programs,e=e.current_user;if(!Sb(e)){var h=V.a();h.h=Mg(h,e);FB.api("/me/permissions",
n(function(a){this.h.dh=a.data[0].publish_stream},h));FB.api("/me/friends",n(function(a){a&&a.data&&t(a.data,function(a){this.df[a.id]||(this.df[a.id]=new ig({id:a.id,name:a.name,temp:j}))},this)},h))}R.a().sh(a);pk.a().sh(g);a=R.a();a.l=a.pd[e.current_channel]||a.Ic[0];a.l=Sf(a)||a.l;a.l&&a.l.d();id.a().init();(new Bk).k(document.body);ng.a().login()}}else 500==Bh(a.target)?Mk("error","Oops, check back later"):Mk("wait"),J(function(){v(Gk,"strike");Ck.play()},500),J(function(){x(Gk,"strike");v(Hk,
"strike");Dk.play()},800),J(function(){x(Hk,"strike");v(Ik,"strike");Ek.play()},1100),J(function(){x(Ik,"strike");v(Jk,"strike");Fk.play()},1400),J(function(){x(Jk,"strike");v(Ik,"strike");Ek.load();Ek.play()},1700),J(function(){x(Ik,"strike");v(Hk,"strike");Dk.load();Dk.play()},2E3),J(function(){x(Hk,"strike");v(Gk,"strike");Ck.load();Ck.play()},2300),J(function(){x(Gk,"strike")},2600)},"POST")}
function Mk(a,b){var c=A("fb-login");if(a){var d=B("power",c);v(d,a)}b&&(d=B("waitlist",c),nc(d,b));x(c,"spin");v(c,"disabled");N(c,j);v(c,"show");v(c,"waitlist")}function Fh(a){var b=parseInt(a,10),a=Math.floor(b/3600),c=Math.floor((b-3600*a)/60),b=b-3600*a-60*c;10>c&&(c=(a?"0":"")+c);10>b&&(b="0"+b);return(a?a+":":"")+(c?c+":":"")+b}
ga("brkn.Main.staticInit",function(){var a=A("fb-login"),b=A("homepage"),c=A("login"),d=A("static-content"),e=A("pages"),g=A("footer"),h=l;v(b,"hide");var p=D("img");p.src="/static/img/homepage.jpg";I(p,"load",function(){x(b,"hide");v(b,"show")});J(function(){N(a,j);J(Aa(v,a,"show"),400)},100);I(c,"click",function(a){"static-scrollable"==a.target.id&&(a=y(c,"app"),h=l,a?Kk(h):(a=new He(c,[c.scrollLeft,c.scrollTop],[c.scrollLeft,0],300),a.play(),I(a,"end",Aa(Kk,h))))});I(c,"scroll",function(){!y(c,
"scrolling")&&1>c.scrollTop&&(h=l,Kk(h))});I(g,"click",function(a){var a=vc(a.target,"section"),b=y(c,"app");a&&(h=j,d.className=a.id,d.style.height=P(e).height+(b?80:220)+"px",Kk(h))});I(window,"resize",Aa(Kk,h));ng.a().init();IPHONE&&(v(document.body,"iphone"),v(document.body,"login"),window.onload=function(){J(function(){window.scrollTo(0,1)},1E3)});Gk=A("chord-1");Hk=A("chord-2");Ik=A("chord-3");Jk=A("chord-4");Ck=A("mp3-1");Dk=A("mp3-2");Ek=A("mp3-3");Fk=A("mp3-4");Ck.volume=0.5;Dk.volume=0.5;
Ek.volume=0.5;Fk.volume=0.5;Ck.load();Dk.load();Ek.load();Fk.load();I(Gk,"click",function(){Ck.load();Ck.play()});I(Hk,"click",function(){Dk.load();Dk.play()});I(Ik,"click",function(){Ek.load();Ek.play()});I(Jk,"click",function(){Fk.load();Fk.play()})});
ga("brkn.Main.auth",function(){FB.getLoginStatus(function(a){if("connected"===a.status)Lk();else{var b=A("fb-login");J(function(){v(A("message"),"show")},500);I(b,"click",function(){v(b,"disabled");if(IPAD)return window.location.href="https://m.facebook.com/dialog/oauth?client_id="+FB_APP_ID+"&response_type=code&redirect_uri="+HOST_URL+"&scope=email",l;FB.login(function(a){a.authResponse?Lk():x(b,"disabled")},{scope:"email"})})}})});