function f(a){throw a;}var h=void 0,j=!0,k=null,l=!1;function aa(){return function(){}}function ca(a){return function(b){this[a]=b}}function da(a){return function(){return this[a]}}function ea(a){return function(){return a}}var m,fa=fa||{},p=this;function ga(a,b){var c=a.split("."),d=p;!(c[0]in d)&&d.execScript&&d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&ha(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}
function ia(a){for(var a=a.split("."),b=p,c;c=a.shift();)if(b[c]!=k)b=b[c];else return k;return b}function ja(){}function ka(a){a.a=function(){return a.pk?a.pk:a.pk=new a}}
function la(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function ha(a){return a!==h}function ma(a){return"array"==la(a)}function na(a){var b=la(a);return"array"==b||"object"==b&&"number"==typeof a.length}function q(a){return"string"==typeof a}function oa(a){return"number"==typeof a}function pa(a){return"function"==la(a)}function qa(a){var b=typeof a;return"object"==b&&a!=k||"function"==b}function sa(a){return a[ta]||(a[ta]=++ua)}
var ta="closure_uid_"+Math.floor(2147483648*Math.random()).toString(36),ua=0;function va(a,b,c){return a.call.apply(a.bind,arguments)}function xa(a,b,c){a||f(Error());if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}
function s(a,b,c){s=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?va:xa;return s.apply(k,arguments)}function za(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=Array.prototype.slice.call(arguments);b.unshift.apply(b,c);return a.apply(this,b)}}var t=Date.now||function(){return+new Date};function Aa(a,b){var c=b||{},d;for(d in c)var e=(""+c[d]).replace(/\$/g,"$$$$"),a=a.replace(RegExp("\\{\\$"+d+"\\}","gi"),e);return a}
function u(a,b){function c(){}c.prototype=b.prototype;a.f=b.prototype;a.prototype=new c;a.prototype.constructor=a};function Ba(a){Error.captureStackTrace?Error.captureStackTrace(this,Ba):this.stack=Error().stack||"";a&&(this.message=String(a))}u(Ba,Error);Ba.prototype.name="CustomError";function Ca(a,b){for(var c=1;c<arguments.length;c++)var d=String(arguments[c]).replace(/\$/g,"$$$$"),a=a.replace(/\%s/,d);return a}function Da(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")}function Ea(a,b){var c=String(a).toLowerCase(),d=String(b).toLowerCase();return c<d?-1:c==d?0:1}
function Fa(a){if(!Ga.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(Ha,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(Ia,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(Ja,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(Ka,"&quot;"));return a}var Ha=/&/g,Ia=/</g,Ja=/>/g,Ka=/\"/g,Ga=/[&<>\"]/;function La(a){var a=ha(h)?a.toFixed(h):String(a),b=a.indexOf(".");-1==b&&(b=a.length);b=Math.max(0,2-b);return Array(b+1).join("0")+a}
function Ma(a){return String(a).replace(/\-([a-z])/g,function(a,c){return c.toUpperCase()})};var Na=Array.prototype,Oa=Na.indexOf?function(a,b,c){return Na.indexOf.call(a,b,c)}:function(a,b,c){c=c==k?0:0>c?Math.max(0,a.length+c):c;if(q(a))return!q(b)||1!=b.length?-1:a.indexOf(b,c);for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},v=Na.forEach?function(a,b,c){Na.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=q(a)?a.split(""):a,g=0;g<d;g++)g in e&&b.call(c,e[g],g,a)};function Pa(a,b,c){for(var d=q(a)?a.split(""):a,e=a.length-1;0<=e;--e)e in d&&b.call(c,d[e],e,a)}
var Qa=Na.filter?function(a,b,c){return Na.filter.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=[],g=0,i=q(a)?a.split(""):a,n=0;n<d;n++)if(n in i){var r=i[n];b.call(c,r,n,a)&&(e[g++]=r)}return e},Ra=Na.map?function(a,b,c){return Na.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),g=q(a)?a.split(""):a,i=0;i<d;i++)i in g&&(e[i]=b.call(c,g[i],i,a));return e},Sa=Na.some?function(a,b,c){return Na.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=q(a)?a.split(""):a,g=0;g<d;g++)if(g in
e&&b.call(c,e[g],g,a))return j;return l},Ta=Na.every?function(a,b,c){return Na.every.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=q(a)?a.split(""):a,g=0;g<d;g++)if(g in e&&!b.call(c,e[g],g,a))return l;return j};function Ua(a,b,c){b=Va(a,b,c);return 0>b?k:q(a)?a.charAt(b):a[b]}function Va(a,b,c){for(var d=a.length,e=q(a)?a.split(""):a,g=0;g<d;g++)if(g in e&&b.call(c,e[g],g,a))return g;return-1}function Wa(a,b){return 0<=Oa(a,b)}
function Xa(a,b){var c=Oa(a,b),d;(d=0<=c)&&Na.splice.call(a,c,1);return d}function Ya(a,b,c){b=Va(a,b,c);return 0<=b?(Na.splice.call(a,b,1),j):l}function Za(a){return Na.concat.apply(Na,arguments)}function $a(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]}
function ab(a,b){for(var c=1;c<arguments.length;c++){var d=arguments[c],e;if(ma(d)||(e=na(d))&&d.hasOwnProperty("callee"))a.push.apply(a,d);else if(e)for(var g=a.length,i=d.length,n=0;n<i;n++)a[g+n]=d[n];else a.push(d)}}function cb(a,b,c,d){Na.splice.apply(a,db(arguments,1))}function db(a,b,c){return 2>=arguments.length?Na.slice.call(a,b):Na.slice.call(a,b,c)}function eb(a,b){return a>b?1:a<b?-1:0};var fb,gb,hb,ib,jb;function lb(){return p.navigator?p.navigator.userAgent:k}function mb(){return p.navigator}ib=hb=gb=fb=l;var nb;if(nb=lb()){var ob=mb();fb=0==nb.indexOf("Opera");gb=!fb&&-1!=nb.indexOf("MSIE");hb=!fb&&-1!=nb.indexOf("WebKit");ib=!fb&&!hb&&"Gecko"==ob.product}var pb=fb,w=gb,qb=ib,rb=hb,sb=mb();jb=-1!=(sb&&sb.platform||"").indexOf("Mac");var tb=!!mb()&&-1!=(mb().appVersion||"").indexOf("X11"),ub;
a:{var vb="",wb;if(pb&&p.opera)var xb=p.opera.version,vb="function"==typeof xb?xb():xb;else if(qb?wb=/rv\:([^\);]+)(\)|;)/:w?wb=/MSIE\s+([^\);]+)(\)|;)/:rb&&(wb=/WebKit\/(\S+)/),wb)var yb=wb.exec(lb()),vb=yb?yb[1]:"";if(w){var zb,Ab=p.document;zb=Ab?Ab.documentMode:h;if(zb>parseFloat(vb)){ub=String(zb);break a}}ub=vb}var Bb={};
function Cb(a){var b;if(!(b=Bb[a])){b=0;for(var c=Da(String(ub)).split("."),d=Da(String(a)).split("."),e=Math.max(c.length,d.length),g=0;0==b&&g<e;g++){var i=c[g]||"",n=d[g]||"",r=RegExp("(\\d*)(\\D*)","g"),x=RegExp("(\\d*)(\\D*)","g");do{var F=r.exec(i)||["","",""],I=x.exec(n)||["","",""];if(0==F[0].length&&0==I[0].length)break;b=((0==F[1].length?0:parseInt(F[1],10))<(0==I[1].length?0:parseInt(I[1],10))?-1:(0==F[1].length?0:parseInt(F[1],10))>(0==I[1].length?0:parseInt(I[1],10))?1:0)||((0==F[2].length)<
(0==I[2].length)?-1:(0==F[2].length)>(0==I[2].length)?1:0)||(F[2]<I[2]?-1:F[2]>I[2]?1:0)}while(0==b)}b=Bb[a]=0<=b}return b}var Db={};function Eb(a){return Db[a]||(Db[a]=w&&!!document.documentMode&&document.documentMode>=a)};var Fb,Gb=!w||Eb(9),Hb=!qb&&!w||w&&Eb(9)||qb&&Cb("1.9.1"),Ib=w&&!Cb("9"),Jb=w||pb||rb;function Kb(a){a=a.className;return q(a)&&a.match(/\S+/g)||[]}function y(a,b){for(var c=Kb(a),d=db(arguments,1),e=c.length+d.length,g=c,i=0;i<d.length;i++)Wa(g,d[i])||g.push(d[i]);a.className=c.join(" ");return c.length==e}function z(a,b){var c=Kb(a),d=db(arguments,1),e,g=d;e=Qa(c,function(a){return!Wa(g,a)});a.className=e.join(" ");return e.length==c.length-d.length}function A(a,b){return Wa(Kb(a),b)}function B(a,b,c){c?y(a,b):z(a,b)}function Mb(a,b){var c=!A(a,b);B(a,b,c);return c};function Nb(a,b){this.x=ha(a)?a:0;this.y=ha(b)?b:0}Nb.prototype.clone=function(){return new Nb(this.x,this.y)};function Ob(a,b){return new Nb(a.x-b.x,a.y-b.y)};function Pb(a,b){this.width=a;this.height=b}Pb.prototype.clone=function(){return new Pb(this.width,this.height)};Pb.prototype.ceil=function(){this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};Pb.prototype.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};Pb.prototype.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};function Qb(a,b,c){for(var d in a)b.call(c,a[d],d,a)}function Rb(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function Sb(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}function Tb(a){for(var b in a)return l;return j}function Ub(a,b){b in a&&delete a[b]}function Vb(a,b,c){b in a&&f(Error('The object already contains the key "'+b+'"'));a[b]=c}function Wb(a,b,c){return b in a?a[b]:c}var Xb="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");
function Yb(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var g=0;g<Xb.length;g++)c=Xb[g],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};function Zb(a){return a?new $b(ac(a)):Fb||(Fb=new $b)}function C(a){return q(a)?document.getElementById(a):a}function bc(a,b){var c=b||document;return c.querySelectorAll&&c.querySelector?c.querySelectorAll("."+a):c.getElementsByClassName?c.getElementsByClassName(a):cc("*",a,b)}function D(a,b){var c=b||document,d=k;return(d=c.querySelectorAll&&c.querySelector?c.querySelector("."+a):bc(a,b)[0])||k}
function cc(a,b,c){var d=document,c=c||d,a=a&&"*"!=a?a.toUpperCase():"";if(c.querySelectorAll&&c.querySelector&&(a||b))return c.querySelectorAll(a+(b?"."+b:""));if(b&&c.getElementsByClassName){c=c.getElementsByClassName(b);if(a){for(var d={},e=0,g=0,i;i=c[g];g++)a==i.nodeName&&(d[e++]=i);d.length=e;return d}return c}c=c.getElementsByTagName(a||"*");if(b){d={};for(g=e=0;i=c[g];g++)a=i.className,"function"==typeof a.split&&Wa(a.split(/\s+/),b)&&(d[e++]=i);d.length=e;return d}return c}
function dc(a,b){Qb(b,function(b,d){"style"==d?a.style.cssText=b:"class"==d?a.className=b:"for"==d?a.htmlFor=b:d in ec?a.setAttribute(ec[d],b):0==d.lastIndexOf("aria-",0)||0==d.lastIndexOf("data-",0)?a.setAttribute(d,b):a[d]=b})}var ec={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};
function E(a){a=(a||window).document;a=fc(a)?a.documentElement:a.body;return new Pb(a.clientWidth,a.clientHeight)}function G(a,b,c){return gc(document,arguments)}
function gc(a,b){var c=b[0],d=b[1];if(!Gb&&d&&(d.name||d.type)){c=["<",c];d.name&&c.push(' name="',Fa(d.name),'"');if(d.type){c.push(' type="',Fa(d.type),'"');var e={};Yb(e,d);delete e.type;d=e}c.push(">");c=c.join("")}var g=a.createElement(c);d&&(q(d)?g.className=d:ma(d)?y.apply(k,[g].concat(d)):dc(g,d));if(2<b.length){d=function(b){b&&g.appendChild(q(b)?a.createTextNode(b):b)};for(c=2;c<b.length;c++)if(e=b[c],na(e)&&!(qa(e)&&0<e.nodeType)){var i=v,n;a:{if((n=e)&&"number"==typeof n.length){if(qa(n)){n=
"function"==typeof n.item||"string"==typeof n.item;break a}if(pa(n)){n="function"==typeof n.item;break a}}n=l}i(n?$a(e):e,d)}else d(e)}return g}function fc(a){return"CSS1Compat"==a.compatMode}function hc(a){for(var b;b=a.firstChild;)a.removeChild(b)}function ic(a,b,c){a.insertBefore(b,a.childNodes[c]||k)}function jc(a){a&&a.parentNode&&a.parentNode.removeChild(a)}function kc(a){return Hb&&a.children!=h?a.children:Qa(a.childNodes,function(a){return 1==a.nodeType})}
function lc(a){return a.nextElementSibling!=h?a.nextElementSibling:mc(a.nextSibling,j)}function mc(a,b){for(;a&&1!=a.nodeType;)a=b?a.nextSibling:a.previousSibling;return a}function nc(a){if(Jb)return a.parentElement;a=a.parentNode;return qa(a)&&1==a.nodeType?a:k}function oc(a,b){if(a.contains&&1==b.nodeType)return a==b||a.contains(b);if("undefined"!=typeof a.compareDocumentPosition)return a==b||Boolean(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a}
function ac(a){return 9==a.nodeType?a:a.ownerDocument||a.document}function pc(a,b){if("textContent"in a)a.textContent=b;else if(a.firstChild&&3==a.firstChild.nodeType){for(;a.lastChild!=a.firstChild;)a.removeChild(a.lastChild);a.firstChild.data=b}else hc(a),a.appendChild(ac(a).createTextNode(b))}var qc={SCRIPT:1,STYLE:1,HEAD:1,IFRAME:1,OBJECT:1},rc={IMG:" ",BR:"\n"};function sc(a){var b=a.getAttributeNode("tabindex");return b&&b.specified?(a=a.tabIndex,oa(a)&&0<=a&&32768>a):l}
function tc(a){if(Ib&&"innerText"in a)a=a.innerText.replace(/(\r\n|\r|\n)/g,"\n");else{var b=[];uc(a,b,j);a=b.join("")}a=a.replace(/ \xAD /g," ").replace(/\xAD/g,"");a=a.replace(/\u200B/g,"");Ib||(a=a.replace(/ +/g," "));" "!=a&&(a=a.replace(/^\s*/,""));return a}function vc(a){var b=[];uc(a,b,l);return b.join("")}
function uc(a,b,c){if(!(a.nodeName in qc))if(3==a.nodeType)c?b.push(String(a.nodeValue).replace(/(\r\n|\r|\n)/g,"")):b.push(a.nodeValue);else if(a.nodeName in rc)b.push(rc[a.nodeName]);else for(a=a.firstChild;a;)uc(a,b,c),a=a.nextSibling}function wc(a,b,c){if(!b&&!c)return k;b=b?b.toUpperCase():k;a:{for(var d=0;a;){if((!b||a.nodeName==b)&&(!c||A(a,c))){c=a;break a}a=a.parentNode;d++}c=k}return c}function xc(a,b){return wc(a,k,b)}function $b(a){this.I=a||p.document||document}m=$b.prototype;m.kb=Zb;
m.b=function(a){return q(a)?this.I.getElementById(a):a};m.T=function(a,b,c){return gc(this.I,arguments)};m.createElement=function(a){return this.I.createElement(a)};m.createTextNode=function(a){return this.I.createTextNode(a)};function yc(a){return fc(a.I)}function zc(a){var b=a.I,a=!rb&&fc(b)?b.documentElement:b.body,b=b.parentWindow||b.defaultView;return new Nb(b.pageXOffset||a.scrollLeft,b.pageYOffset||a.scrollTop)}m.appendChild=function(a,b){a.appendChild(b)};m.Wj=kc;
function Ac(a,b){return b.firstElementChild!=h?b.firstElementChild:mc(b.firstChild,j)}m.contains=oc;w&&Cb(8);var Bc={};function Cc(a,b,c){a.innerHTML=b(c||Bc,h,h)}function H(a,b){var c;a:if(c=(new $b(h)||Zb()).createElement("DIV"),c.innerHTML=a(b||Bc,h,h),1==c.childNodes.length){var d=c.firstChild;if(1==d.nodeType){c=d;break a}}return c}function J(a){return"object"===typeof a&&a&&0===a.gp?a.content:String(a).replace(Dc,Ec)}
var Fc={"\x00":"&#0;",'"':"&quot;","&":"&amp;","'":"&#39;","<":"&lt;",">":"&gt;","\t":"&#9;","\n":"&#10;","\x0B":"&#11;","\f":"&#12;","\r":"&#13;"," ":"&#32;","-":"&#45;","/":"&#47;","=":"&#61;","`":"&#96;","\u0085":"&#133;","\u00a0":"&#160;","\u2028":"&#8232;","\u2029":"&#8233;"};function Ec(a){return Fc[a]}var Dc=/[\x00\x22\x26\x27\x3c\x3e]/g;function Gc(){0!=Hc&&(this.hp=Error().stack,Ic[sa(this)]=this)}var Hc=0,Ic={};Gc.prototype.Rf=l;Gc.prototype.ia=function(){if(!this.Rf&&(this.Rf=j,this.p(),0!=Hc)){var a=sa(this);delete Ic[a]}};Gc.prototype.p=function(){this.am&&Jc.apply(k,this.am);if(this.Sk)for(;this.Sk.length;)this.Sk.shift()()};function Kc(a){a&&"function"==typeof a.ia&&a.ia()}function Jc(a){for(var b=0,c=arguments.length;b<c;++b){var d=arguments[b];na(d)?Jc.apply(k,d):Kc(d)}};var Lc=!w||Eb(9),Mc=!w||Eb(9),Nc=w&&!Cb("9");!rb||Cb("528");qb&&Cb("1.9b")||w&&Cb("8")||pb&&Cb("9.5")||rb&&Cb("528");qb&&!Cb("8")||w&&Cb("9");function Oc(a,b){this.type=a;this.currentTarget=this.target=b}m=Oc.prototype;m.p=aa();m.ia=aa();m.md=l;m.defaultPrevented=l;m.Fg=j;m.stopPropagation=function(){this.md=j};m.preventDefault=function(){this.defaultPrevented=j;this.Fg=l};function Pc(a){a.preventDefault()};function Qc(a){Qc[" "](a);return a}Qc[" "]=ja;function Rc(a,b){a&&this.init(a,b)}u(Rc,Oc);var Sc=[1,4,2];m=Rc.prototype;m.target=k;m.relatedTarget=k;m.offsetX=0;m.offsetY=0;m.clientX=0;m.clientY=0;m.screenX=0;m.screenY=0;m.button=0;m.keyCode=0;m.charCode=0;m.ctrlKey=l;m.altKey=l;m.shiftKey=l;m.metaKey=l;m.li=l;m.oa=k;
m.init=function(a,b){var c=this.type=a.type;Oc.call(this,c);this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;if(d){if(qb){var e;a:{try{Qc(d.nodeName);e=j;break a}catch(g){}e=l}e||(d=k)}}else"mouseover"==c?d=a.fromElement:"mouseout"==c&&(d=a.toElement);this.relatedTarget=d;this.offsetX=rb||a.offsetX!==h?a.offsetX:a.layerX;this.offsetY=rb||a.offsetY!==h?a.offsetY:a.layerY;this.clientX=a.clientX!==h?a.clientX:a.pageX;this.clientY=a.clientY!==h?a.clientY:a.pageY;this.screenX=
a.screenX||0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||("keypress"==c?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.li=jb?a.metaKey:a.ctrlKey;this.state=a.state;this.oa=a;a.defaultPrevented&&this.preventDefault();delete this.md};function Tc(a){return(Lc?0==a.oa.button:"click"==a.type?j:!!(a.oa.button&Sc[0]))&&!(rb&&jb&&a.ctrlKey)}
m.stopPropagation=function(){Rc.f.stopPropagation.call(this);this.oa.stopPropagation?this.oa.stopPropagation():this.oa.cancelBubble=j};m.preventDefault=function(){Rc.f.preventDefault.call(this);var a=this.oa;if(a.preventDefault)a.preventDefault();else if(a.returnValue=l,Nc)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};m.om=da("oa");m.p=aa();function Uc(){}var Vc=0;m=Uc.prototype;m.key=0;m.nd=l;m.eh=l;m.init=function(a,b,c,d,e,g){pa(a)?this.rk=j:a&&a.handleEvent&&pa(a.handleEvent)?this.rk=l:f(Error("Invalid listener argument"));this.Vd=a;this.proxy=b;this.src=c;this.type=d;this.capture=!!e;this.bg=g;this.eh=l;this.key=++Vc;this.nd=l};m.handleEvent=function(a){return this.rk?this.Vd.call(this.bg||this.src,a):this.Vd.handleEvent.call(this.Vd,a)};var Wc={},Xc={},Yc={},Zc={};
function K(a,b,c,d,e){if(b){if(ma(b)){for(var g=0;g<b.length;g++)K(a,b[g],c,d,e);return k}var d=!!d,i=Xc;b in i||(i[b]={B:0,Ya:0});i=i[b];d in i||(i[d]={B:0,Ya:0},i.B++);var i=i[d],n=sa(a),r;i.Ya++;if(i[n]){r=i[n];for(g=0;g<r.length;g++)if(i=r[g],i.Vd==c&&i.bg==e){if(i.nd)break;return r[g].key}}else r=i[n]=[],i.B++;var x=$c,F=Mc?function(a){return x.call(F.src,F.key,a)}:function(a){a=x.call(F.src,F.key,a);if(!a)return a},g=F;g.src=a;i=new Uc;i.init(c,g,a,b,d,e);c=i.key;g.key=c;r.push(i);Wc[c]=i;Yc[n]||
(Yc[n]=[]);Yc[n].push(i);a.addEventListener?(a==p||!a.Ej)&&a.addEventListener(b,g,d):a.attachEvent(b in Zc?Zc[b]:Zc[b]="on"+b,g);return c}f(Error("Invalid event type"))}function ad(a,b,c,d,e){if(ma(b))for(var g=0;g<b.length;g++)ad(a,b[g],c,d,e);else a=K(a,b,c,d,e),Wc[a].eh=j}function bd(a,b,c,d,e){if(ma(b))for(var g=0;g<b.length;g++)bd(a,b[g],c,d,e);else if(d=!!d,a=cd(a,b,d))for(g=0;g<a.length;g++)if(a[g].Vd==c&&a[g].capture==d&&a[g].bg==e){dd(a[g].key);break}}
function dd(a){if(!Wc[a])return l;var b=Wc[a];if(b.nd)return l;var c=b.src,d=b.type,e=b.proxy,g=b.capture;c.removeEventListener?(c==p||!c.Ej)&&c.removeEventListener(d,e,g):c.detachEvent&&c.detachEvent(d in Zc?Zc[d]:Zc[d]="on"+d,e);c=sa(c);Yc[c]&&(e=Yc[c],Xa(e,b),0==e.length&&delete Yc[c]);b.nd=j;if(b=Xc[d][g][c])b.Nk=j,ed(d,g,c,b);delete Wc[a];return j}
function ed(a,b,c,d){if(!d.lg&&d.Nk){for(var e=0,g=0;e<d.length;e++)d[e].nd?d[e].proxy.src=k:(e!=g&&(d[g]=d[e]),g++);d.length=g;d.Nk=l;0==g&&(delete Xc[a][b][c],Xc[a][b].B--,0==Xc[a][b].B&&(delete Xc[a][b],Xc[a].B--),0==Xc[a].B&&delete Xc[a])}}function cd(a,b,c){var d=Xc;return b in d&&(d=d[b],c in d&&(d=d[c],a=sa(a),d[a]))?d[a]:k}
function fd(a,b,c,d,e){var g=1,b=sa(b);if(a[b]){a.Ya--;a=a[b];a.lg?a.lg++:a.lg=1;try{for(var i=a.length,n=0;n<i;n++){var r=a[n];r&&!r.nd&&(g&=gd(r,e)!==l)}}finally{a.lg--,ed(c,d,b,a)}}return Boolean(g)}function gd(a,b){a.eh&&dd(a.key);return a.handleEvent(b)}
function $c(a,b){if(!Wc[a])return j;var c=Wc[a],d=c.type,e=Xc;if(!(d in e))return j;var e=e[d],g,i;if(!Mc){g=b||ia("window.event");var n=j in e,r=l in e;if(n){if(0>g.keyCode||g.returnValue!=h)return j;a:{var x=l;if(0==g.keyCode)try{g.keyCode=-1;break a}catch(F){x=j}if(x||g.returnValue==h)g.returnValue=j}}x=new Rc;x.init(g,this);g=j;try{if(n){for(var I=[],ba=x.currentTarget;ba;ba=ba.parentNode)I.push(ba);i=e[j];i.Ya=i.B;for(var T=I.length-1;!x.md&&0<=T&&i.Ya;T--)x.currentTarget=I[T],g&=fd(i,I[T],d,
j,x);if(r){i=e[l];i.Ya=i.B;for(T=0;!x.md&&T<I.length&&i.Ya;T++)x.currentTarget=I[T],g&=fd(i,I[T],d,l,x)}}else g=gd(c,x)}finally{I&&(I.length=0)}return g}d=new Rc(b,this);return g=gd(c,d)};function hd(){Gc.call(this)}u(hd,Gc);m=hd.prototype;m.Ej=j;m.vg=k;m.Hi=ca("vg");m.addEventListener=function(a,b,c,d){K(this,a,b,c,d)};m.removeEventListener=function(a,b,c,d){bd(this,a,b,c,d)};
m.dispatchEvent=function(a){var b=a.type||a,c=Xc;if(b in c){if(q(a))a=new Oc(a,this);else if(a instanceof Oc)a.target=a.target||this;else{var d=a,a=new Oc(b,this);Yb(a,d)}var d=1,e,c=c[b],b=j in c,g;if(b){e=[];for(g=this;g;g=g.vg)e.push(g);g=c[j];g.Ya=g.B;for(var i=e.length-1;!a.md&&0<=i&&g.Ya;i--)a.currentTarget=e[i],d&=fd(g,e[i],a.type,j,a)&&a.Fg!=l}if(l in c)if(g=c[l],g.Ya=g.B,b)for(i=0;!a.md&&i<e.length&&g.Ya;i++)a.currentTarget=e[i],d&=fd(g,e[i],a.type,l,a)&&a.Fg!=l;else for(e=this;!a.md&&e&&
g.Ya;e=e.vg)a.currentTarget=e,d&=fd(g,e,a.type,l,a)&&a.Fg!=l;a=Boolean(d)}else a=j;return a};m.p=function(){hd.f.p.call(this);var a,b=0,c=a==k;a=!!a;if(this==k)Qb(Yc,function(d){for(var e=d.length-1;0<=e;e--){var g=d[e];if(c||a==g.capture)dd(g.key),b++}});else{var d=sa(this);if(Yc[d])for(var d=Yc[d],e=d.length-1;0<=e;e--){var g=d[e];if(c||a==g.capture)dd(g.key),b++}}this.vg=k};function id(a,b){Gc.call(this);this.$=a||1;this.tf=b||jd;this.bh=s(this.Ti,this);this.Rh=t()}u(id,hd);id.prototype.enabled=l;var jd=p.window;m=id.prototype;m.za=k;m.Ti=function(){if(this.enabled){var a=t()-this.Rh;0<a&&a<0.8*this.$?this.za=this.tf.setTimeout(this.bh,this.$-a):(this.dispatchEvent(kd),this.enabled&&(this.za=this.tf.setTimeout(this.bh,this.$),this.Rh=t()))}};m.start=function(){this.enabled=j;this.za||(this.za=this.tf.setTimeout(this.bh,this.$),this.Rh=t())};
m.stop=function(){this.enabled=l;this.za&&(this.tf.clearTimeout(this.za),this.za=k)};m.p=function(){id.f.p.call(this);this.stop();delete this.tf};var kd="tick";function L(a,b,c){pa(a)?c&&(a=s(a,c)):a&&"function"==typeof a.handleEvent?a=s(a.handleEvent,a):f(Error("Invalid listener argument"));return 2147483647<b?-1:jd.setTimeout(a,b||0)};function M(){Gc.call(this);this.tb=[];this.Ic={}}u(M,Gc);m=M.prototype;m.wk=1;m.Ag=0;m.subscribe=function(a,b,c){var d=this.Ic[a];d||(d=this.Ic[a]=[]);var e=this.wk;this.tb[e]=a;this.tb[e+1]=b;this.tb[e+2]=c;this.wk=e+3;d.push(e);return e};m.Il=function(a){if(0!=this.Ag)return this.bf||(this.bf=[]),this.bf.push(a),l;var b=this.tb[a];if(b){var c=this.Ic[b];c&&Xa(c,a);delete this.tb[a];delete this.tb[a+1];delete this.tb[a+2]}return!!b};
m.c=function(a,b){var c=this.Ic[a];if(c){this.Ag++;for(var d=db(arguments,1),e=0,g=c.length;e<g;e++){var i=c[e];this.tb[i+1].apply(this.tb[i+2],d)}this.Ag--;if(this.bf&&0==this.Ag)for(;c=this.bf.pop();)this.Il(c)}};m.clear=function(a){if(a){var b=this.Ic[a];b&&(v(b,this.Il,this),delete this.Ic[a])}else this.tb.length=0,this.Ic={}};m.p=function(){M.f.p.call(this);delete this.tb;delete this.Ic;delete this.bf};function ld(){M.call(this);this.xe=new id(1E3);this.Cl=new id(3E4);this.Dl=[];this.wh=[]}u(ld,M);ka(ld);ld.prototype.init=function(){this.xe.start();this.Cl.start();K(this.xe,kd,s(function(){v(this.wh,function(a,b){a.time<t()&&(a.callback(),Na.splice.call(this.wh,b,1))},this)},this));K(this.Cl,kd,s(function(){v(this.Dl,function(a){pc(a.element,md(a.time.getTime()))},this)},this))};function nd(a,b,c){86400>(t()-b.getTime())/1E3&&a.Dl.push({time:b,element:c})}
function od(a,b,c){86400>(t()-b)/1E3&&a.wh.push({time:b,callback:c})};function N(){M.call(this);this.Jn=j;var a=C("controller");this.rd=!a||A(a,"sidebar-toggled");this.bd=a&&A(a,"guide-toggled");a=C("guide");this.Mb=!!a&&A(a,"timeless");this.subscribe(pd,ca("rd"),this);this.subscribe(qd,ca("bd"),this);this.subscribe(rd,ca("Jn"),this)}u(N,M);ka(N);function sd(a,b){var c=C("toggle-pending");pc(c,b);O(c,!!b)}var rd="play",qd="toggle-guide",pd="toggle-sidebar";var td={Ko:["BC","AD"],Jo:["Before Christ","Anno Domini"],Mo:"JFMAMJJASOND".split(""),Uo:"JFMAMJJASOND".split(""),Lo:"January February March April May June July August September October November December".split(" "),To:"January February March April May June July August September October November December".split(" "),Qo:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),Wo:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),$o:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),
Yo:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),So:"Sun Mon Tue Wed Thu Fri Sat".split(" "),Xo:"Sun Mon Tue Wed Thu Fri Sat".split(" "),No:"SMTWTFS".split(""),Vo:"SMTWTFS".split(""),Ro:["Q1","Q2","Q3","Q4"],Po:["1st quarter","2nd quarter","3rd quarter","4th quarter"],Ho:["AM","PM"],Io:["EEEE, MMMM d, y","MMMM d, y","MMM d, y","M/d/yy"],Zo:["h:mm:ss a zzzz","h:mm:ss a z","h:mm:ss a","h:mm a"],Ml:6,ap:[5,6],Nl:5};var ud=/^(\d{4})(?:(?:-?(\d{2})(?:-?(\d{2}))?)|(?:-?(\d{3}))|(?:-?W(\d{2})(?:-?([1-7]))?))?$/,vd=/^(\d{2})(?::?(\d{2})(?::?(\d{2})(\.\d+)?)?)?$/,wd=/Z|(?:([-+])(\d{2})(?::?(\d{2}))?)$/;
function xd(a){var b=new yd(2E3),a=Da(a),a=a.split(-1==a.indexOf("T")?" ":"T"),c;var d=a[0].match(ud);if(d){var e=Number(d[2]),g=Number(d[3]),i=Number(d[4]);c=Number(d[5]);var n=Number(d[6])||1;b.setFullYear(Number(d[1]));i?(b.setDate(1),b.setMonth(0),b.add(new zd(Ad,i-1))):c?(b.setMonth(0),b.setDate(1),d=b.getDay()||7,b.add(new zd(Ad,(4>=d?1-d:8-d)+(Number(n)+7*(Number(c)-1))-1))):(e&&(b.setDate(1),b.setMonth(e-1)),g&&b.setDate(g));c=j}else c=l;if(c&&!(c=2>a.length))a=a[1],c=a.match(wd),n=0,c&&("Z"!=
c[0]&&(n=60*c[2]+Number(c[3]),n*="-"==c[1]?1:-1),n-=b.getTimezoneOffset(),a=a.substr(0,a.length-c[0].length)),(c=a.match(vd))?(b.setHours(Number(c[1])),b.setMinutes(Number(c[2])||0),b.setSeconds(Number(c[3])||0),b.setMilliseconds(c[4]?1E3*c[4]:0),0!=n&&b.setTime(b.getTime()+6E4*n),c=j):c=l;return c?b:k}
function zd(a,b,c,d,e,g){q(a)?(this.vb=a==Bd?b:0,this.nb=a==Cd?b:0,this.hb=a==Ad?b:0,this.Sa=a==Dd?b:0,this.Va=a==Ed?b:0,this.$a=a==Fd?b:0):(this.vb=a||0,this.nb=b||0,this.hb=c||0,this.Sa=d||0,this.Va=e||0,this.$a=g||0)}
zd.prototype.uf=function(a){var b=Math.min(this.vb,this.nb,this.hb,this.Sa,this.Va,this.$a),c=Math.max(this.vb,this.nb,this.hb,this.Sa,this.Va,this.$a);if(0>b&&0<c)return k;if(!a&&0==b&&0==c)return"PT0S";c=[];0>b&&c.push("-");c.push("P");(this.vb||a)&&c.push(Math.abs(this.vb)+"Y");(this.nb||a)&&c.push(Math.abs(this.nb)+"M");(this.hb||a)&&c.push(Math.abs(this.hb)+"D");if(this.Sa||this.Va||this.$a||a)c.push("T"),(this.Sa||a)&&c.push(Math.abs(this.Sa)+"H"),(this.Va||a)&&c.push(Math.abs(this.Va)+"M"),
(this.$a||a)&&c.push(Math.abs(this.$a)+"S");return c.join("")};zd.prototype.clone=function(){return new zd(this.vb,this.nb,this.hb,this.Sa,this.Va,this.$a)};var Bd="y",Cd="m",Ad="d",Dd="h",Ed="n",Fd="s";zd.prototype.add=function(a){this.vb+=a.vb;this.nb+=a.nb;this.hb+=a.hb;this.Sa+=a.Sa;this.Va+=a.Va;this.$a+=a.$a};
function Gd(a,b,c){oa(a)?(this.t=new Date(a,b||0,c||1),Hd(this,c||1)):qa(a)?(this.t=new Date(a.getFullYear(),a.getMonth(),a.getDate()),Hd(this,a.getDate())):(this.t=new Date(t()),this.t.setHours(0),this.t.setMinutes(0),this.t.setSeconds(0),this.t.setMilliseconds(0))}m=Gd.prototype;m.Wf=td.Ml;m.Xf=td.Nl;m.clone=function(){var a=new Gd(this.t);a.Wf=this.Wf;a.Xf=this.Xf;return a};m.getFullYear=function(){return this.t.getFullYear()};m.getYear=function(){return this.getFullYear()};m.getMonth=function(){return this.t.getMonth()};
m.getDate=function(){return this.t.getDate()};m.getTime=function(){return this.t.getTime()};m.getDay=function(){return this.t.getDay()};m.getUTCHours=function(){return this.t.getUTCHours()};m.getTimezoneOffset=function(){return this.t.getTimezoneOffset()};function Id(a){a=a.getTimezoneOffset();if(0==a)a="Z";else var b=Math.abs(a)/60,c=Math.floor(b),b=60*(b-c),a=(0<a?"-":"+")+La(c)+":"+La(b);return a}m.set=function(a){this.t=new Date(a.getFullYear(),a.getMonth(),a.getDate())};m.setFullYear=function(a){this.t.setFullYear(a)};
m.setMonth=function(a){this.t.setMonth(a)};m.setDate=function(a){this.t.setDate(a)};m.setTime=function(a){this.t.setTime(a)};
m.add=function(a){if(a.vb||a.nb){var b=this.getMonth()+a.nb+12*a.vb,c=this.getYear()+Math.floor(b/12),b=b%12;0>b&&(b+=12);var d;a:{switch(b){case 1:d=0==c%4&&(0!=c%100||0==c%400)?29:28;break a;case 5:case 8:case 10:case 3:d=30;break a}d=31}d=Math.min(d,this.getDate());this.setDate(1);this.setFullYear(c);this.setMonth(b);this.setDate(d)}a.hb&&(a=new Date((new Date(this.getYear(),this.getMonth(),this.getDate(),12)).getTime()+864E5*a.hb),this.setDate(1),this.setFullYear(a.getFullYear()),this.setMonth(a.getMonth()),
this.setDate(a.getDate()),Hd(this,a.getDate()))};m.uf=function(a,b){return[this.getFullYear(),La(this.getMonth()+1),La(this.getDate())].join(a?"-":"")+(b?Id(this):"")};m.toString=function(){return this.uf()};function Hd(a,b){a.getDate()!=b&&a.t.setUTCHours(a.t.getUTCHours()+(a.getDate()<b?1:-1))}m.valueOf=function(){return this.t.valueOf()};function yd(a,b,c,d,e,g,i){this.t=oa(a)?new Date(a,b||0,c||1,d||0,e||0,g||0,i||0):new Date(a?a.getTime():t())}u(yd,Gd);m=yd.prototype;m.getHours=function(){return this.t.getHours()};
m.getMinutes=function(){return this.t.getMinutes()};m.getSeconds=function(){return this.t.getSeconds()};m.getUTCHours=function(){return this.t.getUTCHours()};m.setHours=function(a){this.t.setHours(a)};m.setMinutes=function(a){this.t.setMinutes(a)};m.setSeconds=function(a){this.t.setSeconds(a)};m.setMilliseconds=function(a){this.t.setMilliseconds(a)};m.setUTCHours=function(a){this.t.setUTCHours(a)};
m.add=function(a){Gd.prototype.add.call(this,a);a.Sa&&this.setHours(this.t.getHours()+a.Sa);a.Va&&this.setMinutes(this.t.getMinutes()+a.Va);a.$a&&this.setSeconds(this.t.getSeconds()+a.$a)};m.uf=function(a,b){var c=Gd.prototype.uf.call(this,a);return a?c+" "+La(this.getHours())+":"+La(this.getMinutes())+":"+La(this.getSeconds())+(b?Id(this):""):c+"T"+La(this.getHours())+La(this.getMinutes())+La(this.getSeconds())+(b?Id(this):"")};m.toString=function(){return this.uf()};
m.clone=function(){var a=new yd(this.t);a.Wf=this.Wf;a.Xf=this.Xf;return a};function Jd(a){Gc.call(this);this.V=a;this.aa=[]}u(Jd,Gc);var Kd=[];function P(a,b,c,d,e){ma(c)||(Kd[0]=c,c=Kd);for(var g=0;g<c.length;g++){var i=K(b,c[g],d||a,e||l,a.V||a);a.aa.push(i)}return a}function Ld(a,b,c,d,e,g){if(ma(c))for(var i=0;i<c.length;i++)Ld(a,b,c[i],d,e,g);else{a:{d=d||a;g=g||a.V||a;e=!!e;if(b=cd(b,c,e))for(c=0;c<b.length;c++)if(!b[c].nd&&b[c].Vd==d&&b[c].capture==e&&b[c].bg==g){b=b[c];break a}b=k}b&&(b=b.key,dd(b),Xa(a.aa,b))}return a}function Md(a){v(a.aa,dd);a.aa.length=0}
Jd.prototype.p=function(){Jd.f.p.call(this);Md(this)};Jd.prototype.handleEvent=function(){f(Error("EventHandler.handleEvent not implemented"))};function Nd(a,b,c,d){this.top=a;this.right=b;this.bottom=c;this.left=d}Nd.prototype.clone=function(){return new Nd(this.top,this.right,this.bottom,this.left)};Nd.prototype.contains=function(a){return!this||!a?l:a instanceof Nd?a.left>=this.left&&a.right<=this.right&&a.top>=this.top&&a.bottom<=this.bottom:a.x>=this.left&&a.x<=this.right&&a.y>=this.top&&a.y<=this.bottom};function Od(a,b,c,d){this.left=a;this.top=b;this.width=c;this.height=d}Od.prototype.clone=function(){return new Od(this.left,this.top,this.width,this.height)};Od.prototype.contains=function(a){return a instanceof Od?this.left<=a.left&&this.left+this.width>=a.left+a.width&&this.top<=a.top&&this.top+this.height>=a.top+a.height:a.x>=this.left&&a.x<=this.left+this.width&&a.y>=this.top&&a.y<=this.top+this.height};function Pd(a,b,c){q(b)?Qd(a,c,b):Qb(b,za(Qd,a))}function Qd(a,b,c){a.style[Ma(c)]=b}function Rd(a,b){var c=ac(a);return c.defaultView&&c.defaultView.getComputedStyle&&(c=c.defaultView.getComputedStyle(a,k))?c[b]||c.getPropertyValue(b)||"":""}function Sd(a,b){return a.currentStyle?a.currentStyle[b]:k}function Td(a,b){return Rd(a,b)||Sd(a,b)||a.style&&a.style[b]}function Ud(a,b,c){var d,e=qb&&(jb||tb)&&Cb("1.9");b instanceof Nb?(d=b.x,b=b.y):(d=b,b=c);a.style.left=Vd(d,e);a.style.top=Vd(b,e)}
function Wd(a){return new Nb(a.offsetLeft,a.offsetTop)}function Xd(a){var b=a.getBoundingClientRect();w&&(a=a.ownerDocument,b.left-=a.documentElement.clientLeft+a.body.clientLeft,b.top-=a.documentElement.clientTop+a.body.clientTop);return b}
function Yd(a){if(w&&!Eb(8))return a.offsetParent;for(var b=ac(a),c=Td(a,"position"),d="fixed"==c||"absolute"==c,a=a.parentNode;a&&a!=b;a=a.parentNode)if(c=Td(a,"position"),d=d&&"static"==c&&a!=b.documentElement&&a!=b.body,!d&&(a.scrollWidth>a.clientWidth||a.scrollHeight>a.clientHeight||"fixed"==c||"absolute"==c||"relative"==c))return a;return k}
function Zd(a){for(var b=new Nd(0,Infinity,Infinity,0),c=Zb(a),d=c.I.body,e=c.I.documentElement,g=!rb&&fc(c.I)?c.I.documentElement:c.I.body;a=Yd(a);)if((!w||0!=a.clientWidth)&&(!rb||0!=a.clientHeight||a!=d)&&a!=d&&a!=e&&"visible"!=Td(a,"overflow")){var i=$d(a),n;n=a;if(qb&&!Cb("1.9")){var r=parseFloat(Rd(n,"borderLeftWidth"));if(ae(n))var x=n.offsetWidth-n.clientWidth-r-parseFloat(Rd(n,"borderRightWidth")),r=r+x;n=new Nb(r,parseFloat(Rd(n,"borderTopWidth")))}else n=new Nb(n.clientLeft,n.clientTop);
i.x+=n.x;i.y+=n.y;b.top=Math.max(b.top,i.y);b.right=Math.min(b.right,i.x+a.clientWidth);b.bottom=Math.min(b.bottom,i.y+a.clientHeight);b.left=Math.max(b.left,i.x)}d=g.scrollLeft;g=g.scrollTop;b.left=Math.max(b.left,d);b.top=Math.max(b.top,g);c=E(c.I.parentWindow||c.I.defaultView);b.right=Math.min(b.right,d+c.width);b.bottom=Math.min(b.bottom,g+c.height);return 0<=b.top&&0<=b.left&&b.bottom>b.top&&b.right>b.left?b:k}
function $d(a){var b,c=ac(a),d=Td(a,"position"),e=qb&&c.getBoxObjectFor&&!a.getBoundingClientRect&&"absolute"==d&&(b=c.getBoxObjectFor(a))&&(0>b.screenX||0>b.screenY),g=new Nb(0,0),i;b=c?ac(c):document;i=w&&!Eb(9)&&!yc(Zb(b))?b.body:b.documentElement;if(a==i)return g;if(a.getBoundingClientRect)b=Xd(a),a=zc(Zb(c)),g.x=b.left+a.x,g.y=b.top+a.y;else if(c.getBoxObjectFor&&!e)b=c.getBoxObjectFor(a),a=c.getBoxObjectFor(i),g.x=b.screenX-a.screenX,g.y=b.screenY-a.screenY;else{b=a;do{g.x+=b.offsetLeft;g.y+=
b.offsetTop;b!=a&&(g.x+=b.clientLeft||0,g.y+=b.clientTop||0);if(rb&&"fixed"==Td(b,"position")){g.x+=c.body.scrollLeft;g.y+=c.body.scrollTop;break}b=b.offsetParent}while(b&&b!=a);if(pb||rb&&"absolute"==d)g.y-=c.body.offsetTop;for(b=a;(b=Yd(b))&&b!=c.body&&b!=i;)if(g.x-=b.scrollLeft,!pb||"TR"!=b.tagName)g.y-=b.scrollTop}return g}function be(a,b){var c,d=$d(a);b instanceof Nb&&(c=b.y,b=b.x);Ud(a,a.offsetLeft+(b-d.x),a.offsetTop+(c-d.y))}
function Vd(a,b){"number"==typeof a&&(a=(b?Math.round(a):a)+"px");return a}function ce(a,b){a.style.height=Vd(b,j)}function de(a,b){a.style.width=Vd(b,j)}function Q(a){if("none"!=Td(a,"display"))return ee(a);var b=a.style,c=b.display,d=b.visibility,e=b.position;b.visibility="hidden";b.position="absolute";b.display="inline";a=ee(a);b.display=c;b.position=e;b.visibility=d;return a}
function ee(a){var b=a.offsetWidth,c=a.offsetHeight,d=rb&&!b&&!c;return(!ha(b)||d)&&a.getBoundingClientRect?(a=Xd(a),new Pb(a.right-a.left,a.bottom-a.top)):new Pb(b,c)}function fe(a){var b=$d(a),a=Q(a);return new Od(b.x,b.y,a.width,a.height)}function ge(a,b){var c=a.style;"opacity"in c?c.opacity=b:"MozOpacity"in c?c.MozOpacity=b:"filter"in c&&(c.filter=""===b?"":"alpha(opacity="+100*b+")")}function O(a,b){a.style.display=b?"":"none"}function ae(a){return"rtl"==Td(a,"direction")}
var he=qb?"MozUserSelect":rb?"WebkitUserSelect":k;function ie(a,b){if(/^\d+px?$/.test(b))return parseInt(b,10);var c=a.style.left,d=a.runtimeStyle.left;a.runtimeStyle.left=a.currentStyle.left;a.style.left=b;var e=a.style.pixelLeft;a.style.left=c;a.runtimeStyle.left=d;return e}
function je(a,b){if(w){var c=ie(a,Sd(a,b+"Left")),d=ie(a,Sd(a,b+"Right")),e=ie(a,Sd(a,b+"Top")),g=ie(a,Sd(a,b+"Bottom"));return new Nd(e,d,g,c)}c=Rd(a,b+"Left");d=Rd(a,b+"Right");e=Rd(a,b+"Top");g=Rd(a,b+"Bottom");return new Nd(parseFloat(e),parseFloat(d),parseFloat(g),parseFloat(c))}var ke={thin:2,medium:4,thick:6};function le(a,b){if("none"==Sd(a,b+"Style"))return 0;var c=Sd(a,b+"Width");return c in ke?ke[c]:ie(a,c)}
function me(a){if(w){var b=le(a,"borderLeft"),c=le(a,"borderRight"),d=le(a,"borderTop"),a=le(a,"borderBottom");return new Nd(d,c,a,b)}b=Rd(a,"borderLeftWidth");c=Rd(a,"borderRightWidth");d=Rd(a,"borderTopWidth");a=Rd(a,"borderBottomWidth");return new Nd(parseFloat(d),parseFloat(c),parseFloat(a),parseFloat(b))}var ne=/matrix\([0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, ([0-9\.\-]+)p?x?, ([0-9\.\-]+)p?x?\)/;function oe(a,b,c){Gc.call(this);this.target=a;this.handle=b||a;this.Bk=c||new Od(NaN,NaN,NaN,NaN);this.I=ac(a);this.A=new Jd(this);K(this.handle,["touchstart","mousedown"],this.td,l,this)}u(oe,hd);var pe=w||qb&&Cb("1.9.3");m=oe.prototype;m.clientX=0;m.clientY=0;m.screenX=0;m.screenY=0;m.yl=0;m.zl=0;m.Ed=0;m.Fd=0;m.uh=j;m.na=l;m.Gh=0;m.an=0;m.Nm=l;m.zf=l;m.h=da("A");m.Fi=function(a){this.Gh=Math.pow(a,2)};m.sl=ca("Gg");m.ca=ca("uh");
m.p=function(){oe.f.p.call(this);bd(this.handle,["touchstart","mousedown"],this.td,l,this);Md(this.A);pe&&this.I.releaseCapture();this.A=this.handle=this.target=k};function qe(a){ha(a.sb)||(a.sb=ae(a.target));return a.sb}
m.td=function(a){var b="mousedown"==a.type;if(this.uh&&!this.na&&(!b||Tc(a))){re(a);if(0==this.Gh)if(this.dispatchEvent(new se("start",this,a.clientX,a.clientY,a)))this.na=j,a.preventDefault();else return;else a.preventDefault();var b=this.I,c=b.documentElement,d=!pe;P(this.A,b,["touchmove","mousemove"],this.Hm,d);P(this.A,b,["touchend","mouseup"],this.Zc,d);pe?(c.setCapture(l),P(this.A,c,"losecapture",this.Zc)):P(this.A,b?b.parentWindow||b.defaultView:window,"blur",this.Zc);w&&this.Nm&&P(this.A,
b,"dragstart",Pc);this.Gg&&P(this.A,this.Gg,"scroll",this.Yk,d);this.clientX=this.yl=a.clientX;this.clientY=this.zl=a.clientY;this.screenX=a.screenX;this.screenY=a.screenY;this.zf?(a=this.target,b=a.offsetLeft,c=a.offsetParent,!c&&"fixed"==Td(a,"position")&&(c=ac(a).documentElement),c?(qb?(d=me(c),b+=d.left):Eb(8)&&(d=me(c),b-=d.left),a=ae(c)?c.clientWidth-(b+a.offsetWidth):b):a=b):a=this.target.offsetLeft;this.Ed=a;this.Fd=this.target.offsetTop;this.ji=zc(Zb(this.I));this.an=t()}else this.dispatchEvent("earlycancel")};
m.Zc=function(a,b){Md(this.A);pe&&this.I.releaseCapture();if(this.na){re(a);this.na=l;var c=te(this,this.Ed),d=ue(this,this.Fd);this.dispatchEvent(new se("end",this,a.clientX,a.clientY,a,c,d,b||"touchcancel"==a.type))}else this.dispatchEvent("earlycancel");("touchend"==a.type||"touchcancel"==a.type)&&a.preventDefault()};
function re(a){var b=a.type;"touchstart"==b||"touchmove"==b?a.init(a.oa.targetTouches[0],a.currentTarget):("touchend"==b||"touchcancel"==b)&&a.init(a.oa.changedTouches[0],a.currentTarget)}
m.Hm=function(a){if(this.uh){re(a);var b=(this.zf&&qe(this)?-1:1)*(a.clientX-this.clientX),c=a.clientY-this.clientY;this.clientX=a.clientX;this.clientY=a.clientY;this.screenX=a.screenX;this.screenY=a.screenY;if(!this.na){var d=this.yl-this.clientX,e=this.zl-this.clientY;if(d*d+e*e>this.Gh)if(this.dispatchEvent(new se("start",this,a.clientX,a.clientY,a)))this.na=j;else{this.Rf||this.Zc(a);return}}c=ve(this,b,c);b=c.x;c=c.y;this.na&&this.dispatchEvent(new se("beforedrag",this,a.clientX,a.clientY,a,
b,c))&&(we(this,a,b,c),a.preventDefault())}};function ve(a,b,c){var d=zc(Zb(a.I)),b=b+(d.x-a.ji.x),c=c+(d.y-a.ji.y);a.ji=d;a.Ed+=b;a.Fd+=c;b=te(a,a.Ed);a=ue(a,a.Fd);return new Nb(b,a)}m.Yk=function(a){var b=ve(this,0,0);a.clientX=this.clientX;a.clientY=this.clientY;we(this,a,b.x,b.y)};function we(a,b,c,d){a.Ee(c,d);a.dispatchEvent(new se("drag",a,b.clientX,b.clientY,b,c,d))}
function te(a,b){var c=a.Bk,d=!isNaN(c.left)?c.left:k,c=!isNaN(c.width)?c.width:0;return Math.min(d!=k?d+c:Infinity,Math.max(d!=k?d:-Infinity,b))}function ue(a,b){var c=a.Bk,d=!isNaN(c.top)?c.top:k,c=!isNaN(c.height)?c.height:0;return Math.min(d!=k?d+c:Infinity,Math.max(d!=k?d:-Infinity,b))}m.Ee=function(a,b){this.zf&&qe(this)?this.target.style.right=a+"px":this.target.style.left=a+"px";this.target.style.top=b+"px"};
function se(a,b,c,d,e,g,i,n){Oc.call(this,a);this.clientX=c;this.clientY=d;this.If=e;this.left=ha(g)?g:b.Ed;this.top=ha(i)?i:b.Fd;this.dm=b;this.bm=!!n}u(se,Oc);function xe(){Gc.call(this);this.n=ye;this.Ie=this.startTime=k}u(xe,hd);var ye=0;xe.prototype.xc=function(){this.Ea("begin")};xe.prototype.yc=function(){this.Ea("end")};xe.prototype.Ea=function(a){this.dispatchEvent(a)};function ze(a,b,c){Gc.call(this);this.rc=a;this.$=b||0;this.V=c;this.fh=s(this.Fe,this)}u(ze,Gc);m=ze.prototype;m.va=0;m.p=function(){ze.f.p.call(this);this.stop();delete this.rc;delete this.V};m.start=function(a){this.stop();this.va=L(this.fh,ha(a)?a:this.$)};m.stop=function(){this.oc()&&jd.clearTimeout(this.va);this.va=0};m.Vf=function(){this.stop();this.Fe()};m.oc=function(){return 0!=this.va};m.Fe=function(){this.va=0;this.rc&&this.rc.call(this.V)};var Ae;Ae=ea(k);var Be={},Ce=k;function De(a){a=sa(a);delete Be[a];Tb(Be)&&Ce&&Ce.stop()}function Ee(){Ce||(Ce=new ze(function(){var a=t();Qb(Be,function(c){Fe(c,a)});Tb(Be)||Ee()},20));var a=Ce;a.oc()||a.start()};function Ge(a,b,c,d){xe.call(this);(!ma(a)||!ma(b))&&f(Error("Start and end parameters must be arrays"));a.length!=b.length&&f(Error("Start and end points must be the same length"));this.of=a;this.gm=b;this.duration=c;this.hj=d;this.coords=[];this.zf=l}u(Ge,xe);m=Ge.prototype;m.Sj=0;m.Xa=0;m.Ph=k;
m.play=function(a){if(a||this.n==ye)this.Xa=0,this.coords=this.of;else if(1==this.n)return l;De(this);this.startTime=a=t();-1==this.n&&(this.startTime-=this.duration*this.Xa);this.Ie=this.startTime+this.duration;this.Ph=this.startTime;this.Xa||this.xc();this.Ea("play");-1==this.n&&this.Ea("resume");this.n=1;var b=sa(this);b in Be||(Be[b]=this);Ee();Fe(this,a);return j};m.stop=function(a){De(this);this.n=ye;a&&(this.Xa=1);He(this,this.Xa);this.Ea("stop");this.yc()};m.Zf=da("Xa");
m.p=function(){this.n==ye||this.stop(l);this.Ea("destroy");Ge.f.p.call(this)};function Fe(a,b){a.Xa=(b-a.startTime)/(a.Ie-a.startTime);1<=a.Xa&&(a.Xa=1);a.Sj=1E3/(b-a.Ph);a.Ph=b;He(a,a.Xa);1==a.Xa?(a.n=ye,De(a),a.Ea("finish"),a.yc()):1==a.n&&a.ci()}function He(a,b){pa(a.hj)&&(b=a.hj(b));a.coords=Array(a.of.length);for(var c=0;c<a.of.length;c++)a.coords[c]=(a.gm[c]-a.of[c])*b+a.of[c]}m.ci=function(){this.Ea("animate")};m.Ea=function(a){this.dispatchEvent(new Ie(a,this))};
function Ie(a,b){Oc.call(this,a);this.coords=b.coords;this.x=b.coords[0];this.y=b.coords[1];this.Zp=b.coords[2];this.duration=b.duration;this.Xa=b.Zf();this.vp=b.Sj;this.state=b.n;this.cp=b}u(Ie,Oc);function Je(a,b,c,d,e){Ge.call(this,b,c,d,e);this.element=a}u(Je,Ge);m=Je.prototype;m.xf=ja;m.tk=function(){ha(this.sb)||(this.sb=ae(this.element));return this.sb};m.ci=function(){this.xf();Je.f.ci.call(this)};m.yc=function(){this.xf();Je.f.yc.call(this)};m.xc=function(){this.xf();Je.f.xc.call(this)};function Ke(a,b,c,d,e){(2!=b.length||2!=c.length)&&f(Error("Start and end points must be 2D"));Je.apply(this,arguments)}u(Ke,Je);
Ke.prototype.xf=function(){if(this.zf){var a=this.element,b=Math.round(this.coords[0]),b=Math.max(b,0);a.scrollLeft=ae(a)?qb?-b:!w||!Cb("8")?a.scrollWidth-b-a.clientWidth:b:b}else this.element.scrollLeft=Math.round(this.coords[0]);this.element.scrollTop=Math.round(this.coords[1])};function Le(a,b,c,d,e){oa(b)&&(b=[b]);oa(c)&&(c=[c]);Je.call(this,a,b,c,d,e);(1!=b.length||1!=c.length)&&f(Error("Start and end points must be 1D"))}u(Le,Je);Le.prototype.xf=function(){ge(this.element,this.coords[0])};
Le.prototype.show=function(){this.element.style.display=""};Le.prototype.hide=function(){this.element.style.display="none"};function Me(a,b,c){Le.call(this,a,1,0,b,c)}u(Me,Le);Me.prototype.xc=function(){this.show();Me.f.xc.call(this)};Me.prototype.yc=function(){this.hide();Me.f.yc.call(this)};function Ne(a,b,c){Le.call(this,a,0,1,b,c)}u(Ne,Le);Ne.prototype.xc=function(){this.show();Ne.f.xc.call(this)};function Oe(){}ka(Oe);Oe.prototype.hn=0;Oe.a();function R(a){Gc.call(this);this.Xc=a||Zb();this.sb=Pe}u(R,hd);R.prototype.Mm=Oe.a();var Pe=k;function Qe(a,b){switch(a){case 1:return b?"disable":"enable";case 2:return b?"highlight":"unhighlight";case 4:return b?"activate":"deactivate";case 8:return b?"select":"unselect";case 16:return b?"check":"uncheck";case 32:return b?"focus":"blur";case 64:return b?"open":"close"}f(Error("Invalid component state"))}m=R.prototype;m.va=k;m.ga=l;m.g=k;m.sb=k;m.o=k;m.N=k;m.la=k;m.Ca=k;m.Ll=l;
function Re(a){return a.va||(a.va=":"+(a.Mm.hn++).toString(36))}m.b=da("g");m.h=function(){return this.Pd||(this.Pd=new Jd(this))};m.Ig=function(a){this==a&&f(Error("Unable to set parent component"));a&&(this.N&&this.va&&this.N.Ca&&this.va&&Wb(this.N.Ca,this.va)&&this.N!=a)&&f(Error("Unable to set parent component"));this.N=a;R.f.Hi.call(this,a)};m.getParent=da("N");m.Hi=function(a){this.N&&this.N!=a&&f(Error("Method not supported"));R.f.Hi.call(this,a)};m.kb=da("Xc");m.T=function(){this.g=this.Xc.createElement("div")};
function Se(a,b){a.ga&&f(Error("Component already rendered"));a.g||a.T();b?b.insertBefore(a.g,k):a.Xc.I.body.appendChild(a.g);(!a.N||a.N.ga)&&a.z()}m.j=function(a){this.ga&&f(Error("Component already rendered"));if(a&&this.Qc(a)){this.Ll=j;if(!this.Xc||this.Xc.I!=ac(a))this.Xc=Zb(a);this.u(a);this.z()}else f(Error("Invalid element to decorate"))};m.Qc=ea(j);m.u=ca("g");m.z=function(){this.ga=j;Te(this,function(a){!a.ga&&a.b()&&a.z()})};
m.$c=function(){Te(this,function(a){a.ga&&a.$c()});this.Pd&&Md(this.Pd);this.ga=l};m.p=function(){R.f.p.call(this);this.ga&&this.$c();this.Pd&&(this.Pd.ia(),delete this.Pd);Te(this,function(a){a.ia()});!this.Ll&&this.g&&jc(this.g);this.N=this.o=this.g=this.Ca=this.la=k};
function Ue(a,b){var c=a.la?a.la.length:0;b.ga&&!a.ga&&f(Error("Component already rendered"));(0>c||c>(a.la?a.la.length:0))&&f(Error("Child component index out of bounds"));if(!a.Ca||!a.la)a.Ca={},a.la=[];if(b.getParent()==a){var d=Re(b);a.Ca[d]=b;Xa(a.la,b)}else Vb(a.Ca,Re(b),b);b.Ig(a);cb(a.la,c,0,b);b.ga&&a.ga&&b.getParent()==a?(d=a.Qa(),d.insertBefore(b.b(),d.childNodes[c]||k)):a.ga&&(!b.ga&&b.g&&b.g.parentNode)&&b.z()}m.Qa=da("g");
m.tk=function(){this.sb==k&&(this.sb=ae(this.ga?this.g:this.Xc.I.body));return this.sb};m.qd=function(a){this.ga&&f(Error("Component already rendered"));this.sb=a};function Te(a,b){a.la&&v(a.la,b,h)}m.removeChild=function(a,b){if(a){var c=q(a)?a:Re(a),a=this.Ca&&c?Wb(this.Ca,c)||k:k;c&&a&&(Ub(this.Ca,c),Xa(this.la,a),b&&(a.$c(),a.g&&jc(a.g)),a.Ig(k))}a||f(Error("Child is not in parent component"));return a};function Ve(a,b,c,d,e){if(!w&&(!rb||!Cb("525")))return j;if(jb&&e)return We(a);if(e&&!d||!c&&(17==b||18==b)||w&&d&&b==a)return l;switch(a){case 13:return!(w&&Eb(9));case 27:return!rb}return We(a)}function We(a){if(48<=a&&57>=a||96<=a&&106>=a||65<=a&&90>=a||rb&&0==a)return j;switch(a){case 32:case 63:case 107:case 109:case 110:case 111:case 186:case 59:case 189:case 187:case 61:case 188:case 190:case 191:case 192:case 222:case 219:case 220:case 221:return j;default:return l}}
function Xe(a){switch(a){case 61:return 187;case 59:return 186;case 224:return 91;case 0:return 224;default:return a}};function Ye(){}var Ze;ka(Ye);m=Ye.prototype;m.Nd=aa();m.T=function(a){var b=a.kb().T("div",$e(this,a).join(" "),a.Ab);af(this,a,b);return b};m.Qa=function(a){return a};m.He=function(a,b,c){if(a=a.b?a.b():a)if(w&&!Cb("7")){var d=bf(Kb(a),b);d.push(b);za(c?y:z,a).apply(k,d)}else B(a,b,c)};m.Qc=ea(j);
m.j=function(a,b){if(b.id){var c=b.id;a.N&&a.N.Ca&&(Ub(a.N.Ca,a.va),Vb(a.N.Ca,c,a));a.va=c}(c=this.Qa(b))&&c.firstChild?(c=c.firstChild.nextSibling?$a(c.childNodes):c.firstChild,a.Ab=c):a.Ab=k;var d=0,e=this.ua(),g=this.ua(),i=l,n=l,c=l,r=Kb(b);v(r,function(a){if(!i&&a==e)i=j,g==e&&(n=j);else if(!n&&a==g)n=j;else{var b=d;if(!this.Al){this.Nf||cf(this);var c=this.Nf,r={},x;for(x in c)r[c[x]]=x;this.Al=r}a=parseInt(this.Al[a],10);d=b|(isNaN(a)?0:a)}},this);a.n=d;i||(r.push(e),g==e&&(n=j));n||r.push(g);
var x=a.ib;x&&r.push.apply(r,x);if(w&&!Cb("7")){var F=bf(r);0<F.length&&(r.push.apply(r,F),c=j)}if(!i||!n||x||c)b.className=r.join(" ");af(this,a,b);return b};m.nk=function(a){a.tk()&&this.qd(a.b(),j);a.isEnabled()&&this.ie(a,a.Eb())};function af(a,b,c){b.isEnabled()||a.ub(c,1,j);b.n&8&&a.ub(c,8,j);b.qa&16&&a.ub(c,16,df(b));b.qa&64&&a.ub(c,64,!!(b.n&64))}
m.he=function(a,b){var c=!b,d=w||pb?a.getElementsByTagName("*"):k;if(he){if(c=c?"none":"",a.style[he]=c,d)for(var e=0,g;g=d[e];e++)g.style[he]=c}else if(w||pb)if(c=c?"on":"",a.setAttribute("unselectable",c),d)for(e=0;g=d[e];e++)g.setAttribute("unselectable",c)};m.qd=function(a,b){this.He(a,this.ua()+"-rtl",b)};m.Nh=function(a){var b;return a.qa&32&&(b=a.lc())?sc(b):l};
m.ie=function(a,b){var c;if(a.qa&32&&(c=a.lc())){if(!b&&a.gg()){try{c.blur()}catch(d){}a.gg()&&a.Yj()}sc(c)!=b&&(b?c.tabIndex=0:(c.tabIndex=-1,c.removeAttribute("tabIndex")))}};m.ya=function(a,b){O(a,b)};m.xa=function(a,b,c){var d=a.b();if(d){var e=ef(this,b);e&&this.He(a,e,c);this.ub(d,b,c)}};m.ub=function(a,b,c){Ze||(Ze={1:"disabled",8:"selected",16:"checked",64:"expanded"});(b=Ze[b])&&a.setAttribute("aria-"+b,c)};
m.pd=function(a,b){var c=this.Qa(a);if(c&&(hc(c),b))if(q(b))pc(c,b);else{var d=function(a){if(a){var b=ac(c);c.appendChild(q(a)?b.createTextNode(a):a)}};ma(b)?v(b,d):na(b)&&!("nodeType"in b)?v($a(b),d):d(b)}};m.lc=function(a){return a.b()};m.ua=ea("goog-control");function $e(a,b){var c=a.ua(),d=[c],e=a.ua();e!=c&&d.push(e);c=b.n;for(e=[];c;){var g=c&-c;e.push(ef(a,g));c&=~g}d.push.apply(d,e);(c=b.ib)&&d.push.apply(d,c);w&&!Cb("7")&&d.push.apply(d,bf(d));return d}
function bf(a,b){var c=[];b&&(a=a.concat([b]));v([],function(d){Ta(d,za(Wa,a))&&(!b||Wa(d,b))&&c.push(d.join("_"))});return c}function ef(a,b){a.Nf||cf(a);return a.Nf[b]}function cf(a){var b=a.ua();a.Nf={1:b+"-disabled",2:b+"-hover",4:b+"-active",8:b+"-selected",16:b+"-checked",32:b+"-focused",64:b+"-open"}};function ff(){}u(ff,Ye);ka(ff);m=ff.prototype;m.Nd=ea("button");m.ub=function(a,b,c){16==b?a.setAttribute("aria-pressed",c):ff.f.ub.call(this,a,b,c)};m.T=function(a){var b=ff.f.T.call(this,a),c=a.Le();c&&this.Ji(b,c);(c=a.v())&&this.Ka(b,c);a.qa&16&&this.ub(b,16,df(a));return b};m.j=function(a,b){var b=ff.f.j.call(this,a,b),c=this.v(b);a.fj=c;a.Wi=this.Le(b);a.qa&16&&this.ub(b,16,df(a));return b};m.v=ja;m.Ka=ja;m.Le=function(a){return a.title};m.Ji=function(a,b){a&&(a.title=b||"")};m.ua=ea("goog-button");function gf(a,b){Gc.call(this);a&&hf(this,a,b)}u(gf,hd);m=gf.prototype;m.g=k;m.hg=k;m.Oh=k;m.ig=k;m.qc=-1;m.pc=-1;m.ah=l;
var jf={3:13,12:144,63232:38,63233:40,63234:37,63235:39,63236:112,63237:113,63238:114,63239:115,63240:116,63241:117,63242:118,63243:119,63244:120,63245:121,63246:122,63247:123,63248:44,63272:46,63273:36,63275:35,63276:33,63277:34,63289:144,63302:45},kf={Up:38,Down:40,Left:37,Right:39,Enter:13,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"U+007F":46,Home:36,End:35,PageUp:33,PageDown:34,Insert:45},lf=w||rb&&Cb("525"),mf=jb&&qb;m=gf.prototype;
m.Em=function(a){if(rb&&(17==this.qc&&!a.ctrlKey||18==this.qc&&!a.altKey))this.pc=this.qc=-1;lf&&!Ve(a.keyCode,this.qc,a.shiftKey,a.ctrlKey,a.altKey)?this.handleEvent(a):(this.pc=qb?Xe(a.keyCode):a.keyCode,mf&&(this.ah=a.altKey))};m.Gm=function(a){this.pc=this.qc=-1;this.ah=a.altKey};
m.handleEvent=function(a){var b=a.oa,c,d,e=b.altKey;w&&"keypress"==a.type?(c=this.pc,d=13!=c&&27!=c?b.keyCode:0):rb&&"keypress"==a.type?(c=this.pc,d=0<=b.charCode&&63232>b.charCode&&We(c)?b.charCode:0):pb?(c=this.pc,d=We(c)?b.keyCode:0):(c=b.keyCode||this.pc,d=b.charCode||0,mf&&(e=this.ah),jb&&(63==d&&224==c)&&(c=191));var g=c,i=b.keyIdentifier;c?63232<=c&&c in jf?g=jf[c]:25==c&&a.shiftKey&&(g=9):i&&i in kf&&(g=kf[i]);a=g==this.qc;this.qc=g;b=new nf(g,d,a,b);b.altKey=e;this.dispatchEvent(b)};
m.b=da("g");function hf(a,b,c){a.ig&&a.detach();a.g=b;a.hg=K(a.g,"keypress",a,c);a.Oh=K(a.g,"keydown",a.Em,c,a);a.ig=K(a.g,"keyup",a.Gm,c,a)}m.detach=function(){this.hg&&(dd(this.hg),dd(this.Oh),dd(this.ig),this.ig=this.Oh=this.hg=k);this.g=k;this.pc=this.qc=-1};m.p=function(){gf.f.p.call(this);this.detach()};function nf(a,b,c,d){d&&this.init(d,h);this.type="key";this.keyCode=a;this.charCode=b;this.repeat=c}u(nf,Rc);function of(a,b){a||f(Error("Invalid class name "+a));pa(b)||f(Error("Invalid decorator function "+b))}var pf={};function qf(a,b,c){R.call(this,c);if(!b){for(var b=this.constructor,d;b;){d=sa(b);if(d=pf[d])break;b=b.f?b.f.constructor:k}b=d?pa(d.a)?d.a():new d:k}this.R=b;this.Ab=a}u(qf,R);m=qf.prototype;m.Ab=k;m.n=0;m.qa=39;m.Qb=255;m.po=0;m.Tg=j;m.ib=k;m.Dh=j;m.Gf=l;m.gl=k;function rf(a){a.ga&&l!=a.Dh&&sf(a,l);a.Dh=l}m.lc=function(){return this.R.lc(this)};
m.He=function(a,b){b?a&&(this.ib?Wa(this.ib,a)||this.ib.push(a):this.ib=[a],this.R.He(this,a,j)):a&&this.ib&&(Xa(this.ib,a),0==this.ib.length&&(this.ib=k),this.R.He(this,a,l))};m.T=function(){var a=this.R.T(this);this.g=a;var b=this.gl||this.R.Nd();b&&a.setAttribute("role",b);this.Gf||this.R.he(a,l);this.Eb()||this.R.ya(a,l)};m.Qa=function(){return this.R.Qa(this.b())};m.Qc=function(a){return this.R.Qc(a)};
m.u=function(a){this.g=a=this.R.j(this,a);var b=this.gl||this.R.Nd();b&&a.setAttribute("role",b);this.Gf||this.R.he(a,l);this.Tg="none"!=a.style.display};m.z=function(){qf.f.z.call(this);this.R.nk(this);if(this.qa&-2&&(this.Dh&&sf(this,j),this.qa&32)){var a=this.lc();if(a){var b=this.Ud||(this.Ud=new gf);hf(b,a);P(P(P(this.h(),b,"key",this.Fm),a,"focus",this.Cm),a,"blur",this.Yj)}}};
function sf(a,b){var c=a.h(),d=a.b();b?(P(P(P(P(c,d,"mouseover",a.ek),d,"mousedown",a.ck),d,"mouseup",a.fk),d,"mouseout",a.dk),a.ag!=ja&&P(c,d,"contextmenu",a.ag),w&&P(c,d,"dblclick",a.Zj)):(Ld(Ld(Ld(Ld(c,d,"mouseover",a.ek),d,"mousedown",a.ck),d,"mouseup",a.fk),d,"mouseout",a.dk),a.ag!=ja&&Ld(c,d,"contextmenu",a.ag),w&&Ld(c,d,"dblclick",a.Zj))}m.$c=function(){qf.f.$c.call(this);this.Ud&&this.Ud.detach();this.Eb()&&this.isEnabled()&&this.R.ie(this,l)};
m.p=function(){qf.f.p.call(this);this.Ud&&(this.Ud.ia(),delete this.Ud);delete this.R;this.ib=this.Ab=k};m.pd=function(a){this.R.pd(this.b(),a);this.Ab=a};m.Vj=function(){var a=this.Ab;return!a?"":(q(a)?a:ma(a)?Ra(a,vc).join(""):tc(a)).replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")};m.qd=function(a){qf.f.qd.call(this,a);var b=this.b();b&&this.R.qd(b,a)};m.he=function(a){this.Gf=a;var b=this.b();b&&this.R.he(b,a)};m.Eb=da("Tg");
m.ya=function(a,b){if(b||this.Tg!=a&&this.dispatchEvent(a?"show":"hide")){var c=this.b();c&&this.R.ya(c,a);this.isEnabled()&&this.R.ie(this,a);this.Tg=a;return j}return l};m.isEnabled=function(){return!(this.n&1)};m.ca=function(a){var b=this.getParent();if((!b||"function"!=typeof b.isEnabled||b.isEnabled())&&tf(this,1,!a))a||(this.setActive(l),uf(this,l)),this.Eb()&&this.R.ie(this,a),this.xa(1,!a)};function uf(a,b){tf(a,2,b)&&a.xa(2,b)}m.oc=function(){return!!(this.n&4)};
m.setActive=function(a){tf(this,4,a)&&this.xa(4,a)};function df(a){return!!(a.n&16)}function vf(a,b){tf(a,16,b)&&a.xa(16,b)}m.gg=function(){return!!(this.n&32)};m.ab=function(a){tf(this,32,a)&&this.xa(32,a)};m.xa=function(a,b){this.qa&a&&b!=!!(this.n&a)&&(this.R.xa(this,a,b),this.n=b?this.n|a:this.n&~a)};function wf(a,b,c){a.ga&&(a.n&b&&!c)&&f(Error("Component already rendered"));!c&&a.n&b&&a.xa(b,l);a.qa=c?a.qa|b:a.qa&~b}function xf(a,b){return!!(a.Qb&b)&&!!(a.qa&b)}
function tf(a,b,c){return!!(a.qa&b)&&!!(a.n&b)!=c&&(!(a.po&b)||a.dispatchEvent(Qe(b,c)))&&!a.Rf}m.ek=function(a){(!a.relatedTarget||!oc(this.b(),a.relatedTarget))&&(this.dispatchEvent("enter")&&this.isEnabled()&&xf(this,2))&&uf(this,j)};m.dk=function(a){if((!a.relatedTarget||!oc(this.b(),a.relatedTarget))&&this.dispatchEvent("leave"))xf(this,4)&&this.setActive(l),xf(this,2)&&uf(this,l)};m.ag=ja;
m.ck=function(a){this.isEnabled()&&(xf(this,2)&&uf(this,j),Tc(a)&&(xf(this,4)&&this.setActive(j),this.R.Nh(this)&&this.lc().focus()));!this.Gf&&Tc(a)&&a.preventDefault()};m.fk=function(a){this.isEnabled()&&(xf(this,2)&&uf(this,j),this.oc()&&(this.cf(a)&&xf(this,4))&&this.setActive(l))};m.Zj=function(a){this.isEnabled()&&this.cf(a)};
m.cf=function(a){xf(this,16)&&vf(this,!df(this));xf(this,8)&&tf(this,8,j)&&this.xa(8,j);if(xf(this,64)){var b=!(this.n&64);tf(this,64,b)&&this.xa(64,b)}b=new Oc("action",this);a&&(b.altKey=a.altKey,b.ctrlKey=a.ctrlKey,b.metaKey=a.metaKey,b.shiftKey=a.shiftKey,b.li=a.li);return this.dispatchEvent(b)};m.Cm=function(){xf(this,32)&&this.ab(j)};m.Yj=function(){xf(this,4)&&this.setActive(l);xf(this,32)&&this.ab(l)};
m.Fm=function(a){return this.Eb()&&this.isEnabled()&&this.Ch(a)?(a.preventDefault(),a.stopPropagation(),j):l};m.Ch=function(a){return 13==a.keyCode&&this.cf(a)};pa(qf)||f(Error("Invalid component class "+qf));pa(Ye)||f(Error("Invalid renderer class "+Ye));var yf=sa(qf);pf[yf]=Ye;of("goog-control",function(){return new qf(k)});function zf(){}u(zf,ff);ka(zf);m=zf.prototype;m.Nd=aa();m.T=function(a){rf(a);a.Qb&=-256;wf(a,32,l);return a.kb().T("button",{"class":$e(this,a).join(" "),disabled:!a.isEnabled(),title:a.Le()||"",value:a.v()||""},a.Vj()||"")};m.Qc=function(a){return"BUTTON"==a.tagName||"INPUT"==a.tagName&&("button"==a.type||"submit"==a.type||"reset"==a.type)};m.j=function(a,b){rf(a);a.Qb&=-256;wf(a,32,l);b.disabled&&y(b,ef(this,1));return zf.f.j.call(this,a,b)};m.nk=function(a){P(a.h(),a.b(),"click",a.cf)};m.he=ja;
m.qd=ja;m.Nh=function(a){return a.isEnabled()};m.ie=ja;m.xa=function(a,b,c){zf.f.xa.call(this,a,b,c);if((a=a.b())&&1==b)a.disabled=c};m.v=function(a){return a.value};m.Ka=function(a,b){a&&(a.value=b)};m.ub=ja;function Af(a,b,c){qf.call(this,a,b||zf.a(),c)}u(Af,qf);m=Af.prototype;m.v=da("fj");m.Ka=function(a){this.fj=a;this.R.Ka(this.b(),a)};m.Le=da("Wi");m.Ji=function(a){this.Wi=a;this.R.Ji(this.b(),a)};m.p=function(){Af.f.p.call(this);delete this.fj;delete this.Wi};m.z=function(){Af.f.z.call(this);if(this.qa&32){var a=this.lc();a&&P(this.h(),a,"keyup",this.Ch)}};m.Ch=function(a){return 13==a.keyCode&&"key"==a.type||32==a.keyCode&&"keyup"==a.type?this.cf(a):32==a.keyCode};of("goog-button",function(){return new Af(k)});function Bf(){}u(Bf,ff);ka(Bf);m=Bf.prototype;m.T=function(a){var b={"class":"goog-inline-block "+$e(this,a).join(" "),title:a.Le()||""},b=a.kb().T("div",b,Cf(this,a.Ab,a.kb()));af(this,a,b);return b};m.Nd=ea("button");m.Qa=function(a){return a&&a.firstChild.firstChild};function Cf(a,b,c){return c.T("div","goog-inline-block "+(a.ua()+"-outer-box"),c.T("div","goog-inline-block "+(a.ua()+"-inner-box"),b))}m.Qc=function(a){return"DIV"==a.tagName};
m.j=function(a,b){Df(b,j);Df(b,l);var c;a:{c=Ac(a.kb(),b);var d=this.ua()+"-outer-box";if(c&&A(c,d)&&(c=Ac(a.kb(),c),d=this.ua()+"-inner-box",c&&A(c,d))){c=j;break a}c=l}c||b.appendChild(Cf(this,b.childNodes,a.kb()));y(b,"goog-inline-block",this.ua());return Bf.f.j.call(this,a,b)};m.ua=ea("goog-custom-button");
function Df(a,b){if(a)for(var c=b?a.firstChild:a.lastChild,d;c&&c.parentNode==a;){d=b?c.nextSibling:c.previousSibling;if(3==c.nodeType){var e=c.nodeValue;if(""==Da(e))a.removeChild(c);else{c.nodeValue=b?e.replace(/^[\s\xa0]+/,""):e.replace(/[\s\xa0]+$/,"");break}}else break;c=d}};function Ef(a,b,c){Af.call(this,a,b||Bf.a(),c)}u(Ef,Af);of("goog-custom-button",function(){return new Ef(k)});function Ff(){R.call(this);this.ne=2;this.$=5;this.Ui=60*this.ne*this.$;this.uj=[];this.Mf={};this.Ja=!!S.a().d&&Gf(S.a().d);this.Ra=0;this.pl=this.ol=l;this.yh=this.wb=j;this.na=l;this.Bb=[U.a().l,U.a().l.e()];this.Th=0;this.Gn=251}u(Ff,R);m=Ff.prototype;
m.z=function(){Ff.f.z.call(this);this.Mg=C("ticker");this.Dp=C("my-ticker");var a=C("go-live");this.Qd=C("header");this.Ba=C("channels");this.Wl=C("channel-names");this.Za=D("channel-scrollable",this.b());this.Ia=D("channel-h-scrollable",this.b());this.kk=1;this.Aa=Math.max(1280,E().width)*this.kk;this.Be=Q(C("controller")).height;N.a().subscribe(qd,function(a){this.Og(a)},this);N.a().subscribe(pd,function(a){B(this.b(),"sidebar-toggled",a);this.ka(l,h,j);Hf(this)},this);this.Og(A(this.b(),"toggled"));
O(this.Wl,!EMBED);this.pf=new yd;for(var b=60;b>=this.pf.getMinutes();)b-=this.$;this.pf.setMinutes(b);this.ha=this.pf.clone();this.ha.add(new zd(0,0,0,0,0*-this.$));this.Ek=this.ha.clone();this.Ek.add(new zd(0,0,0,0,this.$*(this.ne+1)));de(this.Ba,this.Aa);de(this.Qd,this.Aa);this.zc=(this.Aa-(EMBED?0:200))/this.Ui;this.xo=this.Aa/this.ne;this.ih=document.createElement("style");this.ih.id="channel-name-offs";this.ih.type="text/css";document.getElementsByTagName("head")[0].appendChild(this.ih);v(U.a().Tc,
s(function(a){this.Oc(a)},this));this.q=new oe(this.Ia);var c=this.Za,d=this.Qd,e,g,i=0;this.q.Ee=function(a,b){this.target&&(this.target.scrollLeft-=a-i,i=a,A(this.target,"channel-h-scrollable")&&(d.style.left=-this.target.scrollLeft+"px"));e=e||b;c.scrollTop-=b-(g||e);g=b};var b=C("now-left"),n=C("now-right");P(P(P(P(P(P(P(P(P(P(P(this.h(),ld.a().xe,kd,s(this.Ti,this)),a,"click",s(function(){U.a().l.qg=l;U.a().c(If,U.a().l)},this)),window,"resize",s(this.ka,this)),this.Mg,"click",s(this.ka,this,
j,h,l)),b,"click",s(this.qn,this)),n,"click",s(this.xn,this)),this.q,"beforedrag",s(function(a){!this.na&&N.a().Mb?(a=a.If,a=xc(a.target,"channel")||D("channel",a.target),D("programs",a).style.paddingRight=E().width-400+"px",this.q.target=a):this.na||(this.q.target=this.Ia);z(this.b(),"animate");y(this.b(),"drag");this.na=j},this)),this.q,"end",s(function(){L(s(function(){z(this.b(),"drag")},this));y(this.b(),"animate");this.wb=this.na=l;e=h;i=g=0;Hf(this)},this)),this.Ba,"mousewheel",s(function(a){a.preventDefault();
a.stopPropagation();a=a.oa;this.Za.scrollTop-=a.wheelDelta?a.wheelDelta:a.detail?-a.detail:0},this)),this.Qd,"mousewheel",s(function(a){a.preventDefault();a.stopPropagation();a=a.oa;z(this.b(),"animate");y(this.b(),"drag");this.na=j;this.Ia.scrollLeft+=a.wheelDelta?a.wheelDelta:a.detail?-a.detail:0;z(this.b(),"drag");y(this.b(),"animate");this.wb=this.na=l;Hf(this)},this)),D("switcher",this.b()),"click",s(function(){z(this.b(),"animate");N.a().Mb=!N.a().Mb;N.a().Mb?(y(this.b(),"timeless"),L(s(function(){y(this.b(),
"position-hack");y(this.b(),"animate")},this))):(z(this.b(),"timeless"),L(s(function(){z(this.b(),"position-hack");y(this.b(),"animate")},this)));this.ka(j,h,l)},this));U.a().subscribe(Jf,this.Cc,this);U.a().subscribe(Kf,this.Oc,this);U.a().subscribe(If,this.Rc,this);U.a().subscribe(Lf,s(function(){this.na||L(s(function(){this.ka(j)},this))},this));N.a().subscribe("toggle-admin",function(a){B(this.b(),"admin",a)},this);for(V.a().subscribe(Mf,this.mi,this);this.Aa<this.Th;)Nf(this);this.Cc();this.Ja&&
P(this.h(),this.q,"beforedrag",s(function(a){a.If.shiftKey&&a.preventDefault()},this))};m.Oc=function(a){if(!this.Mf[a.id]){if(!a.J){var b=new Of(a,this.Ui,this.pf,0,this.ha);Se(b,this.Ba);this.uj.push(b);this.Mf[a.id]=b;a.subscribe(Pf,function(){L(s(function(){this.Cc()},this))},this);b.update();var c=bc("program",b.b());if(c=c[c.length-1])this.Th=Math.max(this.Th,Wd(c).x+Q(c).width)}a.id==U.a().l.id&&b&&(Qf(b,j),this.pa=b);this.mg=a.J?a:this.mg}};
m.Og=function(a){z(this.b(),"animate");this.ka(j,h,l);y(this.b(),"animate");var b=Math.min(this.Ba.scrollHeight,210);B(this.b(),"toggled",a);ce(this.b(),a?b+this.Be:this.Be);this.pa&&(this.Za.scrollTop=Wd(this.pa.b()).y);L(s(function(){ce(this.Za,a?b:40);ce(this.Ia,Q(this.Ba).height+11);B(this.b(),"collapsed",!a);this.Cc();this.ka();if(this.pa){var c=this.Za,d=Wd(this.pa.b()).y;c.scrollTop!=d&&(c.scrollTop=d)}},this),a?0:800);a&&this.Cc();this.q&&this.q.ca(a)};
m.Rc=function(a){if(a){this.pa&&Qf(this.pa,l);if(this.pa=this.Mf[a.id]||k)Qf(this.pa,j),L(s(this.ka,this,j,h,l));this.Bb[0]=a}};m.mi=function(){this.mg=this.mg||Rf();U.a().c(If,this.mg)};
function Hf(a){var b=C("now-left"),c=C("now-right"),d=(t()-a.ha.getTime())/1E3*a.zc,e=N.a().rd?320:0,e=E().width-e;(Sf(a.Bb[0],a.Ra+1)?((a.Bb[0].e(a.Ra+1).time.getTime()-t())/1E3+a.Bb[0].e(a.Ra+1).media.duration)*a.zc+e:0)>a.Aa-d&&Nf(a);c.style.right=N.a().rd?"320px":0;d=-1;0<=a.Bb[0].Oa+(a.Ra||0)-1&&a.Bb[0].e(a.Ra-1)&&(d=(a.Bb[0].e(a.Ra-1).time.getTime()-a.ha.getTime())/1E3*a.zc);B(c,"show",Sf(a.Bb[0],a.Ra)||A(c,"now"));B(b,"show",0<d||A(b,"now"))}
m.qn=function(){A(C("now-left"),"now")?U.a().l.e()==V.a().e()?this.ka(j,h,h,j):this.ka(l,h,h,j):this.ka(l,-1);Hf(this)};m.xn=function(){A(C("now-right"),"now")?U.a().l.e()==V.a().e()?this.ka(j,h,h,j):this.ka(l,h,h,l):this.ka(l,1);Hf(this)};function Nf(a){var b=Math.ceil(a.ne/a.kk);a.Aa+=a.xo;de(a.Ba,a.Aa);de(a.Qd,a.Aa);a.ne++;a.Ek.add(new zd(0,0,0,0,a.$*b));a.Ui=60*a.ne*a.$}
m.Ti=function(){if(N.a().bd&&!N.a().Mb||this.yh){var a=U.a().l&&U.a().l.J||l,b=U.a().l&&U.a().l.e(),c=V.a().e(),d=1E3*V.a().Zf(),e=Math.round((t()-this.ha.getTime())/1E3*this.zc),d=c&&d?Math.round((c.time.getTime()+d-this.ha.getTime())/1E3*this.zc):e;Hf(this);Ud(this.Mg,e);B(this.Mg,"go-live",!a&&(!!b&&!!c&&b.id!=c.id&&45<Math.abs(d-e)||120<Math.abs(d-e)));this.yh?(this.yh=l,this.ka(j,h,l),y(this.b(),"animate")):this.na||this.ka()}};
m.ka=function(a,b,c,d){this.wb=a!=h?!!a:this.wb;this.ol=a!=h?!!c:this.wb;this.Ra=this.wb?0:b?this.Ra+b:this.Ra;var c=Tf(U.a().l),e;e=U.a().l.J?(e=Uf(U.a(),j))&&e.e():d?c:this.wb?V.a().e():this.Bb[0].e(this.Ra);this.Bb[1]=e;this.wb||z(this.b(),"tick-along");if((this.wb||b)&&this.ha){var g=V.a().e(),i=V.a().getCurrentTime(),n=(t()-this.ha.getTime())/1E3*this.zc;g&&i&&Math.round((g.time.getTime()+i-this.ha.getTime())/1E3*this.zc);g=E().width-(N.a().rd?320:0);if(N.a().Mb)v(U.a().Tc,function(a){var b=
this.Mf[a.id];if(b){a.e();var a=((a.Oa||0)+this.Ra)*this.Gn,c=D("channel",b.b());D("programs",b.b()).style.paddingRight=E().width-250+"px";a!=c.scrollLeft&&(new Ke(c,[c.scrollLeft,c.scrollTop],[a,c.scrollTop],300)).play()}},this);else{for(;n+E().width>this.Aa-(N.a().rd?320:0);)Nf(this);i=0;e&&(i=(e.time.getTime()-this.ha.getTime())/1E3*this.zc+5);if(!e||!b&&N.a().bd&&n>i+g-320)i=Wd(this.Mg).x-g+(EMBED?0:200),y(this.b(),"tick-along");i=Math.max(i,0);i=Math.min(i,this.Ia.scrollWidth-this.Ia.clientWidth);
if(b||a){var r=new Ke(this.Ia,[this.Ia.scrollLeft,this.Ia.scrollTop],[i-5,this.Ia.scrollTop],300);r.play()}else this.Ia.scrollLeft=i-5;this.Qd.style.left=-i+"px"}if(!this.ol&&this.pa){var x=Wd(this.pa.b()).y-Q(this.Qd).height,r=new Ke(this.Za,[this.Za.scrollLeft,this.Za.scrollTop],[this.Za.scrollLeft,x],100*this.uj.length);P(this.h(),r,"end",s(function(){var a=this.Za;a.scrollTop!=x&&(a.scrollTop=x);this.pl=l},this));L(s(function(){this.pl=j;r.play()},this),100)}}b&&Hf(this);if(!N.a().Mb&&d&&(!c||
!V.a().e()||c.id!=V.a().e().id))this.wb=l};m.Cc=function(){var a=Math.min(this.Ba.scrollHeight,210)+12;ce(this.Za,A(this.b(),"toggled")?a:this.Be);ce(this.Ia,Q(this.Ba).height+12);ce(this.b(),A(this.b(),"collapsed")?this.Be:a+this.Be)};function Vf(){return'\t<div class="channel"><div class="programs-container"><div class="programs"></div></div><div class="graph"></div><div class="viewers"></div></div>'}function Wf(a){return'<div class="name"><div class="text">'+J(a.name)+"</div></div>"}
function Xf(a){return'<div class="info"><div class="thumb'+(a.repeat?" repeat":"")+'" style="background-image:url('+J(a.qi.media.Lb)+"); background-position: 50% "+J(a.qi.media.le)+'%"></div><div class="progress"></div><div class="title">'+J(a.qi.media.name)+'</div><div class="stats"><div class="comment-count"><div class="icon"></div>'+J(a.media.Bd)+'</div><div class="like-count"><div class="icon"></div>'+J(a.media.oo)+'</div></div><div class="program-play"><div class="icon"></div></div><div class="program-plus" '+
(a.kc?'style="display:none"':"")+'><div class="icon"></div></div><div class="viewers"></div>'+(a.Zg?'<div class="remove"></div><div class="repos"></div>':"")+"</div>"}function Yf(a){return'<div class="line"><div class="pic"><img src="'+J(a.m.O)+'"></div></div>'};function Zf(){M.call(this)}u(Zf,M);ka(Zf);function $f(a){this.id=a.id;this.O=a.picture;this.name=a.name;this.description=a.description;this.link=a.link};function ag(a){M.call(this);this.id=a.id;this.name=a.name;this.host="youtube";this.Xb=a.host_id;this.Lm="http://www.youtube.com/watch?v="+a.host_id;this.ff=a.reddit_id;this.duration=a.duration;this.live=!!a.live;this.di=[];this.Kn=k;this.Qj=l;this.description=a.description;this.link=a.link||"xylocast.com/?m="+this.id;this.wa=a.publisher&&new $f(a.publisher);this.Ac=a.published&&xd(a.published+"Z");this.Lb="http://i.ytimg.com/vi/"+this.Xb+"/0.jpg";this.Ri="http://i.ytimg.com/vi/"+this.Xb+"/1.jpg";
this.Op="http://i.ytimg.com/vi/"+this.Xb+"/2.jpg";this.Pp="http://i.ytimg.com/vi/"+this.Xb+"/3.jpg";this.Qi=new Pb(480,360);this.le=37;this.yb=[];this.Gl=[];this.Bd=a.comment_count||0;this.oo=a.star_count||0;this.Vm=a.like_count||0;this.np=a.dislike_count||0;this.lf=[];this.ce={};this.Yl=a.collection_id;this.subscribe(bg,this.ic,this);this.subscribe(cg,this.Rn,this);this.subscribe(dg,this.yd,this)}u(ag,M);function eg(a){return a.Ac.getMonth()+1+"/"+a.Ac.getDate()+"/"+a.Ac.getYear()}
var bg="add-comment",cg="remove-comment",dg="watching";ag.prototype.Ef=function(a){Ua(this.di,function(b){return a.id==b.id})||this.di.push(a)};ag.prototype.ic=function(a){if(a.M){var b=Ua(this.yb,function(b){return b.id==a.M});b&&b.gf.push(a)}else this.yb.push(a);this.Bd+=1};
ag.prototype.Rn=function(a){X("/_comment",Ae(),"POST","delete=true&id="+a.id);if(a.M){var b=Ua(this.yb,function(b){return b.id==a.M});b&&Ya(b.gf,function(b){return b.id==a.id})}else Ya(this.yb,function(b){return b.id==a.id});this.Bd-=1};ag.prototype.yd=function(a,b,c){if(c)Ub(this.ce,a.id);else if(this.ce[a.id]=a,a.Tb=this,a.id!=S.a().d.id&&(!b||b&&U.a().l&&b.id!=U.a().l.id))Zf.a().c("flash","is watching "+(b?b.name:""),this.name,a,this.Ri,"#info:"+this.id)};function fg(){M.call(this);this.Xd={}}u(fg,M);ka(fg);function gg(a,b){var c=a.get(b.id);c||(c=new ag(b),a.add(c));return c}fg.prototype.get=function(a){return Wb(this.Xd,a)};fg.prototype.add=function(a){this.Xd[a.id]=a};function hg(a,b){M.call(this);var c=b||k,d=a||k;this.id=d?d.id:c.id;this.media=d?gg(fg.a(),d.media):c;fg.a().add(this.media);this.time=d?xd(d.time+"Z"):new yd;this.async=d?d.async:j;this.seek=d?d.seek:b?0:k;this.ended=l}u(hg,M);function ig(a){return new hg(h,a)};function md(a){var b=t(),c=Math.floor((b-a)/6E4),b=l;0>c&&(b=j,c*=-1);if(60>c)return jg(c,b,0);c=Math.floor(c/60);if(24>c)return jg(c,b,1);c=new Date(t());c.setHours(0);c.setMinutes(0);c.setSeconds(0);c.setMilliseconds(0);c=Math.ceil((c.getTime()-a)/864E5);b&&(c*=-1);return 14>c?jg(c,b,2):""}
function jg(a,b,c){return!b&&0==c?(b=Aa("{$num} minute ago",{num:a}),c=Aa("{$num} minutes ago",{num:a}),1==a?b:c):b&&0==c?(b=Aa("in {$num} minute",{num:a}),c=Aa("in {$num} minutes",{num:a}),1==a?b:c):!b&&1==c?(b=Aa("{$num} hour ago",{num:a}),c=Aa("{$num} hours ago",{num:a}),1==a?b:c):b&&1==c?(b=Aa("in {$num} hour",{num:a}),c=Aa("in {$num} hours",{num:a}),1==a?b:c):!b&&2==c?(b=Aa("{$num} day ago",{num:a}),c=Aa("{$num} days ago",{num:a}),1==a?b:c):b&&2==c?(b=Aa("in {$num} day",{num:a}),c=Aa("in {$num} days",
{num:a}),1==a?b:c):""};function kg(a,b){M.call(this);var c=a||{};this.w=!b;this.id=c.id||"";this.name=c.name||"";this.url=c.profile_url||"";this.location=c.location||"";this.Yp=!!c.welcomed;this.ob=!!c.online;this.mp=!!c.demo;this.Tb=c.last_seen?gg(fg.a(),c.last_seen):k;this.history=[];this.xl=[];this.O=this.id?Ca("https://graph.facebook.com/%s/picture",this.id):"";for(this.color=Raphael.getColor();"#00bf85"==this.color||"#00bf2f"==this.color;)this.color=Raphael.getColor();this.Df=c.access_level||0;this.bp=[];this.H=c.last_login?
xd(c.last_login+"Z"):k;this.Lp=c.session_count||0;this.dp=c.ave_session_time?c.ave_session_time.toFixed(2):k;this.fo=c.show_guide!=h?c.show_guide:j;this.ko=c.show_sidebar!=h?c.show_sidebar:j;this.Nn=c.post_facebook!=h?c.post_facebook:j;this.fl=c.post_twitter!=h?c.post_twitter:j;this.cg=!!c.has_twitter;this.Eh=l;this.to=c.temp;this.subscribe(lg,function(){this.fl=j},this)}u(kg,M);function Gf(a){return a.Df==mg}kg.prototype.Ke=function(){var a=this.name.split(" ");return a&&a.length?a[0]:this.name};
function ng(a,b){return Ua(a.xl,function(a){return a.id==b.id})}var lg="twitter-auth",mg=2;function og(a,b,c,d,e){this.id=a;this.m=b;this.W=c;this.Xi=d;this.oe=e||k;this.Ik=[]}og.prototype.lf=function(a){this.Ik.push(a);this.W&&(this.W.J&&this.W.U)&&(this.W.U.seek=k,this.W.U=k);X("/_seen",Ae(),"POST","media_id="+a.id+"&session_id="+this.id+"&async="+(this.W?this.W.J:l))};
og.prototype.end=function(a){this.oe=a;a=(this.oe.getTime()-this.Xi.getTime())/1E3;if(this.m.id==S.a().d.id&&this.W){pg.a();var b=this.W,c=this.Ik.length;S.a().sg.length?_gaq.push(["_trackEvent","Users","SessionTimeWithFriends",S.a().d.id,Math.round(a)]):_gaq.push(["_trackEvent","Users","SessionTimeNoFriends",S.a().d.id,Math.round(a)]);_gaq.push(["_trackEvent","Users","SessionMediaCount",S.a().d.id,c]);_gaq.push(["_trackEvent","Users","Active",S.a().d.id,c]);_gaq.push(["_trackEvent","Users",b.id+
"-time",S.a().d.id,a]);_gaq.push(["_trackEvent","Users",b.id+"-medias",S.a().d.id,c]);b.J||(_gaq.push(["_trackEvent","Channel","SessionTime",b.id,a]),_gaq.push(["_trackEvent","Channel","SessionMediaCount",b.id,c]))}};function qg(a){M.call(this);this.id=a.id;this.name=a.name;this.J=a.my_channel;this.qg=j;this.Tb=a.current_media?gg(fg.a(),a.current_media):k;this.jp=a.current_seek;this.ba=[];this.ld={};this.U=a.current_program&&new hg(a.current_program);this.Bf=[];this.queue=[];this.Gb=0;this.ob=a.online!=h?a.online:k;this.subscribe(rg,this.wd,this);this.subscribe(sg,this.Ol,this);this.subscribe(tg,this.yd,this);this.subscribe(ug,this.cj,this);this.U||(this.Oa=0,this.U=this.ba[0])}u(qg,M);m=qg.prototype;
m.wd=function(a){this.ba.push(a);this.ld[a.id]=a;a.async&&(this.Oa=this.ba.length-1,this.U=a);a.time.getTime()+1E3*a.media.duration>this.Gb&&(this.Gb=a.time.getTime()+1E3*a.media.duration-12E4,od(ld.a(),this.Gb,s(this.Uh,this,this.Gb)),od(ld.a(),this.Gb+6E4,s(this.Uh,this,this.Gb+6E4)))};
m.Uh=function(a){this.Gb<=a&&!this.J&&X("/_programming/"+this.id,s(function(a){a=Y(a.target);a.length||od(ld.a(),t()+1E3,s(this.Uh,this,t()+1E3));v(a,function(a){if(!this.ld[a.id]){var b=this.ld[a.id];b||(b=new hg(a),this.wd(b));this.c(rg,b)}},this)},this))};
m.Ol=function(a,b){b?(this.queue.push(a),Zf.a().c("flash","Added to queue",a.name,h,a.Ri,"#info:"+a.id),S.a().d.w&&X("/_queue",Ae(),"POST","media_id="+a.id)):(Ya(this.queue,function(b){return b.id==a.id},this),S.a().d.w&&X("/_queue",Ae(),"POST","media_id="+a.id+"&delete=1"))};m.yd=function(a){this.Bf.push(a)};m.cj=function(a){var b=Wb(this.ld,a.id);b&&(b.time=xd(a.time+"Z"))};
m.e=function(a){if(this.U&&this.U.async&&this.U.seek!=k&&!this.U.ended)return this.U;if(!this.ba.length)return k;if(a)return this.ba[this.Oa+a];if(this.qg&&this.U){if(this.U.ended){a=this.Oa;if(this.ba[a+1])a=this.ba[a+1];else if(this.J)if(this.queue.length){a=this.queue[0];this.c(sg,a,l);var b=ig(a);Rf().c(rg,b);S.a().d.w&&X("/_addprogram",Ae(),"POST","channel_id="+U.a().J.id+"&media_id="+a.id+"&now=true");a=b}else a=k;else a=k;this.U=a}}else this.J||(this.U=Tf(this));this.U&&(!this.ba[this.Oa]||
this.ba[this.Oa].id!=this.U.id)?(a=Va(this.ba,s(function(a){return a.id==this.U.id},this)),this.Oa=Math.max(a,0)):this.U||(this.Oa=this.ba.length);return this.U};function Tf(a){var b=a.U,c=a.Oa;if(b&&t()>=b.time.getTime()&&t()<b.time.getTime()+1E3*b.media.duration)return a.U=b,a.U;if(!b||b.time.getTime()>=t())c=0,b=a.ba[0];for(;c<a.ba.length;c++){var d=a.ba[c];if(t()>=d.time.getTime()&&t()<d.time.getTime()+1E3*d.media.duration)return d}return b}
function Sf(a,b){var c=a.Oa||0,d=b||0;return a.J?c+d+1<a.ba.length||!!a.queue.length:c+d+1<a.ba.length}var rg="add-program",sg="add-queue",tg="add-viewer",ug="update-program",Pf="online";function vg(){M.call(this)}u(vg,M);ka(vg);function wg(){Gc.call(this);this.ma=[];this.Kd=[];this.Sf={};this.A=new Jd(this);this.Pm=this.sk=l;this.dj=j}u(wg,hd);m=wg.prototype;m.Hh=0;m.Fi=ca("Hh");
m.init=function(){if(!this.sk){for(var a=0,b=this.ma.length;a<b;a++)for(var c=kc(this.ma[a]),d=0,e=c.length;d<e;++d){var g=c[d],i=g,n=sa(i);this.Sf[n]=g;this.Jj&&(P(this.A,g,"mouseover",this.ym),P(this.A,g,"mouseout",this.xm));this.Ij&&(P(this.A,i,"mouseover",this.wm),P(this.A,i,"mouseout",this.vm));this.Kd.push(g);P(this.A,i,["mousedown","touchstart"],this.gk)}this.sk=j}};
m.p=function(){this.A.ia();for(var a=0,b=this.ma.length;a<b;a++){var c=this.ma[a];c.Gj=h;c.Wc=h}this.ma.length=0;this.Kd.length=0;this.Sf=k;xg(this);wg.f.p.call(this)};function yg(a,b){for(var c=0,d=a.ma.length;c<d;c++){var e=a.ma[c];e.Id=fe(e)}c=0;for(d=a.Kd.length;c<d;c++)e=a.Kd[c],e!=b&&(e.Id=fe(e))}
m.gk=function(a){var b=sa(a.currentTarget);this.r=this.Sf[b];this.G=this.Pf(this.r);this.Tf&&y(this.G,this.Tf);this.G.style.margin="0";this.G.style.position="absolute";this.G.style.visibility="hidden";ac(this.r).body.appendChild(this.G);b=$d(this.r);be(this.G,b);this.q=new oe(this.G);this.q.Fi(this.Hh);K(this.q,"start",this.ak,l,this);K(this.q,"end",this.$j,l,this);K(this.q,"earlycancel",this.Of,l,this);this.q.td(a)};
m.ak=function(a){if(this.dispatchEvent(new zg("beforedragstart",this,a.If,this.r,k,k))){this.ug=this.r.parentNode;this.Dj=this.hi=lc(this.r);this.rh=this.ug;this.qh?y.apply(k,Za(this.r,this.qh)):this.r.style.visibility="hidden";var b=Q(this.G);this.G.sm=b.width/2;this.G.rm=b.height/2;this.G.style.visibility="";this.dj&&(this.r.style.display="none");yg(this,this.r);this.r.style.display="";K(this.q,"drag",this.zm,l,this);this.dispatchEvent(new zg("dragstart",this,a.If,this.r,this.G,this.q))}else a.preventDefault(),
this.Of()};
m.zm=function(a){var b=$d(this.G),b=new Nb(b.x+this.G.sm,b.y+this.G.rm),c;a:{c=k;if("none"!=this.r.style.display){c=this.r.parentNode;var d=fe(c);if(Ag(b,d))break a}for(var d=0,e=this.ma.length;d<e;d++){var g=this.ma[d];if(g!=c&&Ag(b,g.Id)){c=g;break a}}c=k}var i;if(c){c==k&&f(Error("getHoverNextItem_ called with null hoverList."));var n,r,d=l,e=h;switch(c.Gj){case 0:i=b.y;n=Bg;r=Cg;break;case 4:d=j;case 2:i=b.x;n=Dg;r=Cg;break;case 5:d=j;case 3:i=b.x,n=Eg,r=Fg}for(var g=k,x,F=kc(c),I=0,ba=F.length;I<
ba;I++){var T=F[I];if(T!=this.r){var ya=n(T.Id);if(d){var kb=Gg(T,b);ha(e)||(e=kb);if(r(i,ya)&&(x==h||kb<e||kb==e&&(r(ya,x)||ya==x)))g=T,x=ya;kb<e&&(e=kb)}else if(r(i,ya)&&(x==h||r(ya,x)))g=T,x=ya}}i=g!==k&&Gg(g,b)>e?k:g}else i=k;if(!this.dispatchEvent(new zg("beforedragmove",this,a,this.r,this.G,this.q,b,c,i)))return l;if(c)this.dj?(this.r.parentNode!=c||lc(this.r)!=i)&&c.insertBefore(this.r,i):i&&(this.Dj=i),this.r.style.display="",c.Wc&&y(c,c.Wc);else{this.Pm||(this.r.style.display="none");n=0;
for(r=this.ma.length;n<r;n++)x=this.ma[n],x.Wc&&z(x,x.Wc)}c!=this.rh&&(this.rh=c,yg(this,this.r));this.dispatchEvent(new zg("dragmove",this,a,this.r,this.G,this.q,b,c,i));return l};m.Of=function(){xg(this);this.q=this.G=this.hi=this.ug=this.rh=this.r=k;for(var a=0,b=this.ma.length;a<b;a++)this.ma[a].Id=k;a=0;for(b=this.Kd.length;a<b;a++)this.Kd[a].Id=k};
m.$j=function(a){if(!this.dispatchEvent(new zg("beforedragend",this,a,this.r,this.G,this.q)))return l;this.dj||this.ug.insertBefore(this.r,this.Dj);xg(this);this.dispatchEvent(new zg("dragend",this,a,this.r,this.G,this.q));this.Of();return j};function xg(a){Kc(a.q);a.G&&jc(a.G);a.r&&"none"==a.r.style.display&&(a.ug.insertBefore(a.r,a.hi),a.r.style.display="");a.qh&&a.r?z.apply(k,Za(a.r,a.qh)):a.r&&(a.r.style.visibility="visible");for(var b=0,c=a.ma.length;b<c;b++){var d=a.ma[b];d.Wc&&z(d,d.Wc)}}
m.ym=function(a){y.apply(k,Za(a.currentTarget,this.Jj))};m.xm=function(a){z.apply(k,Za(a.currentTarget,this.Jj))};m.wm=function(a){y.apply(k,Za(a.currentTarget,this.Ij))};m.vm=function(a){z.apply(k,Za(a.currentTarget,this.Ij))};function Ag(a,b){return a.x>b.left&&a.x<b.left+b.width&&a.y>b.top&&a.y<b.top+b.height}function Gg(a,b){var c=a.Id;return Math.abs(b.y-(c.top+(c.height-1)/2))}function Bg(a){return a.top+a.height-1}function Dg(a){return a.left+a.width-1}function Eg(a){return a.left||0}
function Cg(a,b){return a<b}function Fg(a,b){return a>b}m.Pf=function(a){var b=a.cloneNode(j);switch(a.tagName.toLowerCase()){case "tr":return G("table",k,G("tbody",k,b));case "td":case "th":return G("table",k,G("tbody",k,G("tr",k,b)));default:return b}};function zg(a,b,c,d,e,g,i,n,r){Oc.call(this,a);this.op=b;this.event=c;this.eb=d;this.em=e;this.dm=g;this.Kj=i;this.wp=n;this.nc=r}u(zg,Oc);function Of(a,b,c,d,e){R.call(this);this.o=a;this.Ja=Gf(S.a().d);this.Ff=l;this.wo=b;this.pf=c;this.ha=e;this.Mp=d;this.Na={};this.ee={};this.jc=this.Ja?new wg:k;this.hh=6;this.ob=j}u(Of,R);m=Of.prototype;m.T=function(){this.g=H(Vf);this.$d=H(Wf,{name:this.o.name});C("channel-names").appendChild(this.$d)};
m.z=function(){Of.f.z.call(this);this.ri=D("programs",this.b());this.Cf=D("viewers",this.b());var a=U.a(),b=(Q(this.b()).width-(EMBED?0:200))/this.wo;a.bc=a.bc||b;Pd(this.$d,"background",Raphael.getColor());a=this.o.ba;for(b=0;b<a.length;b++)this.wd(a[b]);if(this.Ja){a=this.jc;b=this.ri;b.Gj=2;b.Wc=h;a.ma.push(b);this.jc.Tf="drag";var c=this.b();this.jc.gk=function(a){var b=sa(a.currentTarget);this.r=this.Sf[b];this.G=this.Pf(this.r);this.Tf&&y(this.G,this.Tf);this.G.style.margin="0";this.G.style.position=
"absolute";this.G.style.visibility="hidden";c.appendChild(this.G);b=$d(this.r);be(this.G,b);this.q=new oe(this.G);this.q.Fi(this.Hh);K(this.q,"start",this.ak,l,this);K(this.q,"end",this.$j,l,this);K(this.q,"earlycancel",this.Of,l,this);this.q.td(a)};this.jc.init();var d={},e,g,i,n,r,x=j;P(P(P(this.h(),this.jc,"beforedragstart",s(function(a){(!this.Ff||!a.event.shiftKey)&&a.preventDefault()},this)),this.jc,"dragmove",function(a){i=i||a.Kj.x;n=n||Wd(a.eb).x;r=r||(a.eb.previousElementSibling!=h?a.eb.previousElementSibling:
mc(a.eb.previousSibling,l));x=x&&!!r;var b=r?Q(r).width:h,c=r?Wd(r).x:h,T=a.Kj.x-i;10>Math.abs(T)||(a.nc&&!d[a.nc.id]&&0<T?(b=Q(a.eb).width,c=Wd(a.nc).x,e=c-b+Q(a.nc).width,T=this.o.ld[a.nc.id],g=T.time.getTime()/1E3+T.media.duration-this.o.ld[a.eb.id].media.duration,Ud(a.eb,e),Ud(a.nc,c-b-1),d[a.nc.id]=j,b=a.nc,b.parentNode&&b.parentNode.insertBefore(a.eb,b.nextSibling)):x&&(0>T&&n+T<c+b)&&(b=Q(a.eb).width,e=c=Wd(r).x,g=this.o.ld[r.id].time.getTime()/1E3,Ud(a.eb,e),Ud(r,c+b+1),b=r.previousElementSibling!=
h?r.previousElementSibling:mc(r.previousSibling,l),r.parentNode&&r.parentNode.insertBefore(a.eb,r),r=b,x=!!b))}),this.jc,"dragend",function(a){g&&(X("/admin/_rescheduleprogram",h,"POST","program="+a.em.id+"&time="+g),this.jc.init(),g=h);d={};e=r=n=i=h;x=j})}Pa(this.o.Bf,this.yd,this);P(P(this.h(),this.$d,"click",s(function(){this.o.id!=U.a().l.id&&Tf(this.o)&&(this.o.e()||(this.o.qg=j),U.a().c(If,this.o))},this)),ld.a().xe,kd,s(this.update,this));this.o.subscribe(rg,this.wd,this);this.o.subscribe(tg,
this.yd,this);this.o.subscribe("remove-viewer",this.Sn,this);this.o.subscribe(ug,this.cj,this);U.a().subscribe(Lf,this.Jl,this);U.a().subscribe(If,function(){this.hh=0;this.Jl()},this);N.a().subscribe("toggle-admin",ca("Ff"),this);this.update()};m.Jl=function(){if(this.fb){z(this.ee[this.fb],"playing");var a=D("title",this.ee[this.fb]);a&&(a.style.left="")}this.fb=k;if(a=U.a().l.e()){var b=this.ee[a.id];b&&(this.fb=a.id,y(b,"playing"))}};
m.wd=function(a){var b=G("div",{"class":"program",id:a.id}),c=a.media.duration*U.a().bc,d=this.Ja&&a.time.getTime()+1E3*a.media.duration>t();Cc(b,Xf,{qi:a,media:a.media,repeat:600<c,Zg:d,kc:EMBED});this.ee[a.id]=b;var e=U.a().l.e();e&&a.id==e.id&&(y(b,"playing"),this.fb=a.id);var g=D("thumb",b);L(function(){a.media.Qi.height<Q(b).height+50?(y(g,"fix-height"),y(g,"pan-left")):y(g,"pan-top");B(b,"stretched",360<a.media.Qi.height)});e=(a.time.getTime()-this.ha.getTime())/1E3*U.a().bc;if(a.media.live)var i=
(t()-a.time.getTime())/1E3*U.a().bc-100,c=c-i,e=e+i;de(b,Math.ceil(c-1));Ud(b,Math.floor(e));this.ri.appendChild(b);B(b,"clipped",120>c);P(this.h(),b,"click",function(){A(C("guide"),"drag")||Z.a().c(Hg,a.media)});var n=A(b,"clipped")?250:Q(b).width,c=D("title",b),e=D("program-play",b),i=D("program-plus",b);Q(c);P(P(P(P(this.h(),b,"mouseover",function(){N.a().bd&&(this.Ff||Pd(g,"background-position-y",a.media.le+10*Math.max(a.media.Qi.width/n,1)+"%"))}),b,"mouseout",function(){N.a().bd&&(this.Ff||
Pd(g,"background-position-y",a.media.le+"%"))}),e,"click",function(b){b.preventDefault();b.stopPropagation();b=ig(a.media);V.a().c(Mf,b)}),i,"click",function(b){b.preventDefault();b.stopPropagation();Rf().c(sg,a.media,j)});d&&(d=new oe(D("repos",b)),d.Ee=function(a,b){var c=b-24;-50<=c&&50>=c&&Pd(g,"background-position-y",50-c+"%")},P(P(this.h(),d,"end",function(){var b=(g.style[Ma("background-position")]||"").split(" ")[1],b=b.substring(0,b.length-1);a.media.le=b;X("/admin/_posthumb",Ae(),"POST",
"media="+a.media.id+"&pos="+b)}),D("remove",b),"click",s(this.wn,this,a,b)))};m.cj=function(a){var b=this.ee[a.id],a=(xd(a.time+"Z").getTime()-this.ha.getTime())/1E3*U.a().bc;Ud(b,a)};m.wn=function(a,b){jc(b);X("/admin/_removeprogram",h,"POST","program="+a.id+"&media_id="+a.media.id+"&channel_id="+this.o.id);X("admin/_media/collection",s(function(){alert("Disallowed on all channels.")},this),"POST","&media="+a.media.id+"&approve=false")};
m.yd=function(a){if(S.a().d.id!=a.m.id){var b=this.Na[a.m.id];b||(b=G("div","viewer"),this.Cf.appendChild(b),this.Na[a.m.id]=b);if(!a.oe||a.oe.getTime()>this.ha.getTime()){var c=H(Yf,{m:a.m});b.appendChild(c);var d=Math.max(a.Xi.getTime(),this.ha.getTime()),b=(d-this.ha.getTime())/1E3*U.a().bc+(EMBED?0:200),d=(t()-d)/1E3*U.a().bc;de(c,d);Ud(c,b);Pd(c,"background",a.m.color);P(this.h(),c,"click",function(b){xc(b.target,"watch-with")||Z.a().c(Jg,a.m)});DESKTOP&&!IPAD&&Kg(Lg.a(),D("pic",c),"top",{text:"JOIN "+
a.m.Ke().toUpperCase(),link:"#channel:"+a.W.id})}}};function Qf(a,b){B(a.b(),"current",b);B(a.$d,"current",b)}m.Sn=function(a){this.Na[a.id]&&(jc(this.Na[a.id]),Ub(this.Na,a.id),U.a().c(Jf))};
m.update=function(){!this.ob&&this.o.ba.length&&this.o.c(Pf,j);this.ob=!!this.o.ba.length;B(this.b(),"offline",!this.ob);O(this.$d,this.ob);if(this.o.ba.length&&!N.a().Mb){if(this.fb&&0<this.hh){var a=this.ee[this.fb],b=Wd(a).x+Wd(C("guide")).x,a=D("title",a);Ud(a,200>b?-b+210:5)}else this.hh++;Qb(this.o.Bf,function(a){if(this.o.e()&&!a.oe&&this.Na[a.m.id]){var b=Math.max(a.Xi.getTime(),this.ha.getTime());Q(this.ri);var e=Math.floor((t()-b)/1E3*U.a().bc),g=V.a().e();a.m.id==S.a().d.id&&g&&(e=Math.floor((g.time.getTime()+
1E3*V.a().Zf()-b)/1E3*U.a().bc));this.Na[a.m.id].lastChild&&de(this.Na[a.m.id].lastChild,e)}},this);ce(this.$d,Q(this.b()).height-1)}};function S(){M.call(this);this.Lc={};this.Uj=l;this.Bh=[];this.hm={};this.sg=[];this.subscribe(Mg,function(a,b){a.ob=b},this)}u(S,M);ka(S);function Ng(a,b){a.d=b?Og(a,b):new kg(h,j);a.d.w&&(FB.api("/me/permissions",s(function(a){this.d.Eh=a.data[0].publish_stream},a)),FB.api("/me/friends",s(function(a){a&&a.data&&v(a.data,function(a){this.Lc[a.id]||(this.Lc[a.id]=new kg({id:a.id,name:a.name,temp:j}))},this)},a)))}S.prototype.add=function(a){this.Lc[a.id]=a};S.prototype.get=function(a){return this.Lc[a]};
function Og(a,b){var c=a.get(b.id);if(!c||c.to)c=new kg(b),a.add(c);b.online==l&&c.ob==j&&(c.H=new yd);c.ob=b.online||!!Ua(a.sg,function(a){return a.id==c.id},a);c.Tb=b.last_seen?gg(fg.a(),b.last_seen):c.Tb;return c}S.prototype.search=function(a){var b=Qa(Rb(this.Lc),function(b){return b.name&&0==Ea(a,b.name.substr(0,a.length))},this);Qa(Rb(this.hm),function(b){return 0==Ea(a,b.substr(0,a.length))},this);return b};var Mg="online";function Pg(a){if("function"==typeof a.Vb)return a.Vb();if(q(a))return a.split("");if(na(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return Rb(a)}function Qg(a,b,c){if("function"==typeof a.forEach)a.forEach(b,c);else if(na(a)||q(a))v(a,b,c);else{var d;if("function"==typeof a.Od)d=a.Od();else if("function"!=typeof a.Vb)if(na(a)||q(a)){d=[];for(var e=a.length,g=0;g<e;g++)d.push(g)}else d=Sb(a);else d=h;for(var e=Pg(a),g=e.length,i=0;i<g;i++)b.call(c,e[i],d&&d[i],a)}};function Rg(a,b){this.Hb={};this.aa=[];var c=arguments.length;if(1<c){c%2&&f(Error("Uneven number of arguments"));for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else if(a){a instanceof Rg?(c=a.Od(),d=a.Vb()):(c=Sb(a),d=Rb(a));for(var e=0;e<c.length;e++)this.set(c[e],d[e])}}m=Rg.prototype;m.B=0;m.gj=0;m.Vb=function(){Sg(this);for(var a=[],b=0;b<this.aa.length;b++)a.push(this.Hb[this.aa[b]]);return a};m.Od=function(){Sg(this);return this.aa.concat()};m.Cd=function(a){return Tg(this.Hb,a)};
m.clear=function(){this.Hb={};this.gj=this.B=this.aa.length=0};m.remove=function(a){return Tg(this.Hb,a)?(delete this.Hb[a],this.B--,this.gj++,this.aa.length>2*this.B&&Sg(this),j):l};function Sg(a){if(a.B!=a.aa.length){for(var b=0,c=0;b<a.aa.length;){var d=a.aa[b];Tg(a.Hb,d)&&(a.aa[c++]=d);b++}a.aa.length=c}if(a.B!=a.aa.length){for(var e={},c=b=0;b<a.aa.length;)d=a.aa[b],Tg(e,d)||(a.aa[c++]=d,e[d]=1),b++;a.aa.length=c}}m.get=function(a,b){return Tg(this.Hb,a)?this.Hb[a]:b};
m.set=function(a,b){Tg(this.Hb,a)||(this.B++,this.aa.push(a),this.gj++);this.Hb[a]=b};m.clone=function(){return new Rg(this)};function Tg(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function Ug(a){return Vg(a||arguments.callee.caller,[])}
function Vg(a,b){var c=[];if(Wa(b,a))c.push("[...circular reference...]");else if(a&&50>b.length){c.push(Wg(a)+"(");for(var d=a.arguments,e=0;e<d.length;e++){0<e&&c.push(", ");var g;g=d[e];switch(typeof g){case "object":g=g?"object":"null";break;case "string":break;case "number":g=String(g);break;case "boolean":g=g?"true":"false";break;case "function":g=(g=Wg(g))?g:"[fn]";break;default:g=typeof g}40<g.length&&(g=g.substr(0,40)+"...");c.push(g)}b.push(a);c.push(")\n");try{c.push(Vg(a.caller,b))}catch(i){c.push("[exception trying to get caller]\n")}}else a?
c.push("[...long stack...]"):c.push("[end]");return c.join("")}function Wg(a){if(Xg[a])return Xg[a];a=String(a);if(!Xg[a]){var b=/function ([^\(]+)/.exec(a);Xg[a]=b?b[1]:"[Anonymous]"}return Xg[a]}var Xg={};function Yg(a,b,c,d,e){this.reset(a,b,c,d,e)}Yg.prototype.Yn=0;Yg.prototype.Nj=k;Yg.prototype.Mj=k;var Zg=0;Yg.prototype.reset=function(a,b,c,d,e){this.Yn="number"==typeof e?e:Zg++;this.Qp=d||t();this.Ve=a;this.cn=b;this.Ap=c;delete this.Nj;delete this.Mj};Yg.prototype.rl=ca("Ve");function $g(a){this.en=a}$g.prototype.N=k;$g.prototype.Ve=k;$g.prototype.la=k;$g.prototype.hk=k;function ah(a,b){this.name=a;this.value=b}ah.prototype.toString=da("name");var bh=new ah("SEVERE",1E3),ch=new ah("WARNING",900),dh=new ah("INFO",800),eh=new ah("CONFIG",700),fh=new ah("FINE",500);m=$g.prototype;m.getParent=da("N");m.Wj=function(){this.la||(this.la={});return this.la};m.rl=ca("Ve");function gh(a){return a.Ve?a.Ve:a.N?gh(a.N):k}
m.log=function(a,b,c){if(a.value>=gh(this).value){a=this.pm(a,b,c);b="log:"+a.cn;p.console&&(p.console.timeStamp?p.console.timeStamp(b):p.console.markTimeline&&p.console.markTimeline(b));p.msWriteProfilerMark&&p.msWriteProfilerMark(b);for(b=this;b;){var c=b,d=a;if(c.hk)for(var e=0,g=h;g=c.hk[e];e++)g(d);b=b.getParent()}}};
m.pm=function(a,b,c){var d=new Yg(a,String(b),this.en);if(c){d.Nj=c;var e;var g=arguments.callee.caller;try{var i;var n=ia("window.location.href");if(q(c))i={message:c,name:"Unknown error",lineNumber:"Not available",fileName:n,stack:"Not available"};else{var r,x,F=l;try{r=c.lineNumber||c.zp||"Not available"}catch(I){r="Not available",F=j}try{x=c.fileName||c.filename||c.sourceURL||n}catch(ba){x="Not available",F=j}i=F||!c.lineNumber||!c.fileName||!c.stack?{message:c.message,name:c.name,lineNumber:r,
fileName:x,stack:c.stack||"Not available"}:c}e="Message: "+Fa(i.message)+'\nUrl: <a href="view-source:'+i.fileName+'" target="_new">'+i.fileName+"</a>\nLine: "+i.lineNumber+"\n\nBrowser stack:\n"+Fa(i.stack+"-> ")+"[end]\n\nJS stack traversal:\n"+Fa(Ug(g)+"-> ")}catch(T){e="Exception trying to expose exception! You win, we lose. "+T}d.Mj=e}return d};function hh(a,b){a.log(bh,b,h)}m.info=function(a,b){this.log(dh,a,b)};function ih(a,b){a.log(fh,b,h)}var jh={},kh=k;
function lh(a){kh||(kh=new $g(""),jh[""]=kh,kh.rl(eh));var b;if(!(b=jh[a])){b=new $g(a);var c=a.lastIndexOf("."),d=a.substr(c+1),c=lh(a.substr(0,c));c.Wj()[d]=b;b.N=c;jh[a]=b}return b};function mh(a){a=String(a);if(/^\s*$/.test(a)?0:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x10-\x1f\x80-\x9f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,"")))try{return eval("("+a+")")}catch(b){}f(Error("Invalid JSON string: "+a))};function nh(){}nh.prototype.rj=k;function oh(a){var b;if(!(b=a.rj))b={},ph(a)&&(b[0]=j,b[1]=j),b=a.rj=b;return b};var qh;function rh(){}u(rh,nh);function sh(a){return(a=ph(a))?new ActiveXObject(a):new XMLHttpRequest}function ph(a){if(!a.lk&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var b=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],c=0;c<b.length;c++){var d=b[c];try{return new ActiveXObject(d),a.lk=d}catch(e){}}f(Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed"))}return a.lk}qh=new rh;var th=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([\\w\\d\\-\\u0100-\\uffff.%]*)(?::([0-9]+))?)?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");function uh(a){Gc.call(this);this.headers=new Rg;this.Vg=a||k}u(uh,hd);uh.prototype.K=lh("goog.net.XhrIo");var vh=/^https?$/i,wh=[];function X(a,b,c,d){var e=new uh;wh.push(e);b&&K(e,"complete",b);K(e,"ready",za(xh,e));e.send(a,c,d,h)}function xh(a){a.ia();Xa(wh,a)}m=uh.prototype;m.hc=l;m.F=k;m.Ug=k;m.Ue="";m.Ak="";m.Re=0;m.Se="";m.vh=l;m.eg=l;m.Jh=l;m.cd=l;m.Ng=0;m.ud=k;m.Cg="";m.Go=l;
m.send=function(a,b,c,d){this.F&&f(Error("[goog.net.XhrIo] Object is active with another request"));b=b?b.toUpperCase():"GET";this.Ue=a;this.Se="";this.Re=0;this.Ak=b;this.vh=l;this.hc=j;this.F=this.Vg?sh(this.Vg):sh(qh);this.Ug=this.Vg?oh(this.Vg):oh(qh);this.F.onreadystatechange=s(this.Xk,this);try{ih(this.K,yh(this,"Opening Xhr")),this.Jh=j,this.F.open(b,a,j),this.Jh=l}catch(e){ih(this.K,yh(this,"Error opening Xhr: "+e.message));zh(this,e);return}var a=c||"",g=this.headers.clone();d&&Qg(d,function(a,
b){g.set(b,a)});d=p.FormData&&a instanceof p.FormData;"POST"==b&&(!g.Cd("Content-Type")&&!d)&&g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");Qg(g,function(a,b){this.F.setRequestHeader(b,a)},this);this.Cg&&(this.F.responseType=this.Cg);"withCredentials"in this.F&&(this.F.withCredentials=this.Go);try{this.ud&&(jd.clearTimeout(this.ud),this.ud=k),0<this.Ng&&(ih(this.K,yh(this,"Will abort after "+this.Ng+"ms if incomplete")),this.ud=jd.setTimeout(s(this.me,this),this.Ng)),ih(this.K,
yh(this,"Sending request")),this.eg=j,this.F.send(a),this.eg=l}catch(i){ih(this.K,yh(this,"Send error: "+i.message)),zh(this,i)}};m.me=function(){"undefined"!=typeof fa&&this.F&&(this.Se="Timed out after "+this.Ng+"ms, aborting",this.Re=8,ih(this.K,yh(this,this.Se)),this.dispatchEvent("timeout"),this.abort(8))};function zh(a,b){a.hc=l;a.F&&(a.cd=j,a.F.abort(),a.cd=l);a.Se=b;a.Re=5;Ah(a);Bh(a)}function Ah(a){a.vh||(a.vh=j,a.dispatchEvent("complete"),a.dispatchEvent("error"))}
m.abort=function(a){this.F&&this.hc&&(ih(this.K,yh(this,"Aborting")),this.hc=l,this.cd=j,this.F.abort(),this.cd=l,this.Re=a||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Bh(this))};m.p=function(){this.F&&(this.hc&&(this.hc=l,this.cd=j,this.F.abort(),this.cd=l),Bh(this,j));uh.f.p.call(this)};m.Xk=function(){!this.Jh&&!this.eg&&!this.cd?this.vn():Ch(this)};m.vn=function(){Ch(this)};
function Ch(a){if(a.hc&&"undefined"!=typeof fa)if(a.Ug[1]&&4==Dh(a)&&2==Eh(a))ih(a.K,yh(a,"Local request error detected and ignored"));else if(a.eg&&4==Dh(a))jd.setTimeout(s(a.Xk,a),0);else if(a.dispatchEvent("readystatechange"),4==Dh(a)){ih(a.K,yh(a,"Request complete"));a.hc=l;try{var b=Eh(a),c,d;a:switch(b){case 200:case 201:case 202:case 204:case 304:case 1223:d=j;break a;default:d=l}if(!(c=d)){var e;if(e=0===b){var g=String(a.Ue).match(th)[1]||k;if(!g&&self.location)var i=self.location.protocol,
g=i.substr(0,i.length-1);e=!vh.test(g?g.toLowerCase():"")}c=e}if(c)a.dispatchEvent("complete"),a.dispatchEvent("success");else{a.Re=6;var n;try{n=2<Dh(a)?a.F.statusText:""}catch(r){ih(a.K,"Can not get status: "+r.message),n=""}a.Se=n+" ["+Eh(a)+"]";Ah(a)}}finally{Bh(a)}}}
function Bh(a,b){if(a.F){var c=a.F,d=a.Ug[0]?ja:k;a.F=k;a.Ug=k;a.ud&&(jd.clearTimeout(a.ud),a.ud=k);b||a.dispatchEvent("ready");try{c.onreadystatechange=d}catch(e){hh(a.K,"Problem encountered resetting onreadystatechange: "+e.message)}}}m.oc=function(){return!!this.F};function Dh(a){return a.F?a.F.readyState:0}function Eh(a){try{return 2<Dh(a)?a.F.status:-1}catch(b){return a.K.log(ch,"Can not get status: "+b.message,h),-1}}function Y(a){if(a.F)return mh(a.F.responseText)}
function Fh(a){try{if(!a.F)return k;if("response"in a.F)return a.F.response;switch(a.Cg){case "":case "text":return a.F.responseText;case "arraybuffer":if("mozResponseArrayBuffer"in a.F)return a.F.mozResponseArrayBuffer}hh(a.K,"Response type "+a.Cg+" is not supported on this browser");return k}catch(b){return ih(a.K,"Can not get response: "+b.message),k}}function yh(a,b){return b+" ["+a.Ak+" "+a.Ue+" "+Eh(a)+"]"};function U(){M.call(this);this.Tc=[];this.Ad={};this.subscribe(If,this.Rc,this)}u(U,M);ka(U);U.prototype.get=function(a){return this.Ad[a]};function Uf(a,b){if(a.l&&a.l.e()&&!a.l.e().ended&&(b&&!a.l.J||!b))return a.l;if(a.Qe&&a.Qe.e()&&(b&&!a.Qe.J||!b))return a.Qe;for(var c=k,d=k,e=0;!d&&e<a.Tc.length;)d=(c=!a.Tc[e].J?a.Tc[e]:k)&&c.e(),e++;return c}U.prototype.Sh=function(a){Qb(a,s(function(a){this.Ef(a)},this))};
U.prototype.Ef=function(a){var b=new qg(a);this.Tc.push(b);this.Ad[a.id]=b;b.J&&(this.J=b);this.c(Kf,b);return b};
function Gh(a,b){v(b,s(function(a){var b=Og(S.a(),a.user),e=S.a();Ua(e.sg,function(a){return a.id==b.id})||e.sg.push(b);var e=this.Ad[a.channel_id],g=a.media[0]?gg(fg.a(),a.media[0]):k,i=xd(a.tune_in+"Z"),n=a.tune_out?xd(a.tune_out+"Z"):k,a=new og(a.id,b,e,i,n);b.Vc=a;if(e){e.Bf.push(a);e.c(tg,a);var r=e.e()}else g&&(r=ig(g));b.id!=S.a().d.id&&(r&&r.media.c(dg,b,e),S.a().c(Mg,b,j))},a))}
U.prototype.Rc=function(a,b){if(a&&!this.l||a&&this.l&&this.l.id!=a.id)if(this.Qe=this.l,this.l=a,S.a().d.w){var c=a.e(),d=c&&!Tb(c.media.ce);X("/_changechannel",Ae(),"POST","channel="+a.id+"&friends="+d+"&media_id"+c.media.id+(b?"&forced=true":""));pg.a().Rc(a,this.Qe)}};function Rf(){var a=U.a();if(!a.J){var b=S.a().d;a.J=new qg({id:b.id||"temp",name:b.name?b.name.split(" ")[0]+"'s Channel":"My Channel",Ep:j})}return a.J}var If="change-channel",Lf="next-program",Kf="add-channel",Jf="resize";function Hh(){R.call(this);this.mc=new Ef("Guide");wf(this.mc,16,j);this.Ec=new Ef("Sidebar");wf(this.Ec,16,j);this.wc=new Ef("Next");this.Wa=new Ef("Play");wf(this.Wa,16,j);this.re=new Ef("Volume");wf(this.re,16,j);this.zd=new Ef("Admin");wf(this.zd,16,j);this.fg=new Ef("Info")}u(Hh,R);m=Hh.prototype;
m.z=function(){Hh.f.z.call(this);this.Kp=D("right",this.b());this.pb=D("progress",this.b());this.ql=D("seek",this.b());this.Ga=D("elapsed",this.b());this.yo=D("title",this.b());this.Lj=D("duration",this.b());this.kp=D("current-time",this.b());Ue(this,this.mc);this.mc.j(C("guide-toggle"));vf(this.mc,A(this.b(),"guide-toggled"));Ue(this,this.Ec);this.Ec.j(C("sidebar-toggle"));vf(this.Ec,A(this.b(),"sidebar-toggled"));Ue(this,this.wc);this.wc.j(D("next",this.b()));Ue(this,this.Wa);this.Wa.j(D("play",
this.b()));Ue(this,this.re);this.re.j(D("volume",this.b()));Ue(this,this.fg);var a=S.a().d;this.fg.j(C("info-toggle"));EMBED||O(this.fg.b(),!a||a.Df!=mg);Ue(this,this.zd);this.zd.j(C("admin-toggle"));O(this.zd.b(),a&&a.Df==mg);var b=new Ih(this.uo,1E3,this);this.resize();this.q=new oe(this.ql);this.q.ca(l);var c=this.pb,d=this.Ga,e=this.Lj;this.q.Ee=function(a){if(0<a&&a<Q(c).width){this.target.style.left=a+"px";d.style.width=a+"px";var a=a/Q(c).width,b=V.a().e().media.duration;pc(e,Jh(Math.round(a*
b).toString())+" / "+Jh(b.toString()))}};P(P(P(P(P(P(P(P(P(P(P(P(this.h(),window,"resize",s(this.resize,this)),this.mc,"action",s(function(a){IPAD&&(a.preventDefault(),a.stopPropagation(),alert("The guide is not available yet on iPads."));b.Vf()},this)),this.Ec,"action",s(function(a){a.stopPropagation();N.a().c(pd,df(this.Ec))},this)),this.wc,"action",s(function(a){a.stopPropagation();U.a().l.qg=j;if(a=V.a().e())a.ended=j;(a=U.a().l.e())?U.a().c(Lf,a):U.a().c(If,Uf(U.a()),j);this.wc.ca(Sf(U.a().l)||
EMBED)},this)),this.Wa,"action",s(function(a){a.stopPropagation();N.a().c(rd,!df(this.Wa));this.resize()},this)),this.fg,"action",s(function(a){a.stopPropagation();N.a().c("toggle-info")},this)),this.re,"action",s(function(a){a.stopPropagation();N.a().c("mute",df(this.re))},this)),this.zd,"action",s(function(a){a.stopPropagation();N.a().c("toggle-admin",df(this.zd));this.resize()},this)),ld.a().xe,kd,s(function(){if(V.a().e()){var a=V.a().getCurrentTime()/V.a().e().media.duration,b=V.a().e().media.duration-
V.a().getCurrentTime();2>b&&V.a().c(Kh);10>b&&9<b&&V.a().c(Lh);A(this.pb,"drag")||(pc(this.Lj,(V.a().getCurrentTime()?Jh(V.a().getCurrentTime().toString())+" / ":"")+Jh(V.a().e().media.duration.toString())),de(this.Ga,this.si?a*this.si:0))}},this)),this.pb,"click",s(function(a){!A(this.pb,"drag")&&V.a().e()&&(a=a.offsetX/Q(this.pb).width*V.a().e().media.duration,z(this.Ga,"animate"),V.a().c(Mh,a),L(s(function(){y(this.Ga,"animate")},this),1E3))},this)),this.q,"beforedrag",s(function(){y(this.pb,"drag")},
this)),this.q,"end",s(function(a){this.ql.style.left="";a=a.left/Q(this.pb).width*V.a().e().media.duration;z(this.Ga,"animate");V.a().c(Mh,a);L(s(function(){z(this.pb,"drag");y(this.Ga,"animate")},this),1E3)},this));IPAD&&this.mc.ca(l);V.a().subscribe(Mf,function(a){z(this.Ga,"animate");Nh(this,a,j)},this);U.a().subscribe(If,function(){z(this.Ga,"animate");z(this.b(),"window");L(s(this.resize,this),1E3);this.wc.ca(Sf(U.a().l)||EMBED);U.a().l.e()&&Nh(this,U.a().l.e(),j)},this);U.a().subscribe(Lf,function(a){this.resize();
z(this.Ga,"animate");this.wc.ca(Sf(U.a().l)||EMBED);Nh(this,a,j)},this);N.a().subscribe("mute",this.dn,this);N.a().subscribe(qd,this.Og,this);N.a().subscribe(pd,function(a){vf(this.Ec,a);B(this.b(),"sidebar-toggled",a);this.resize()},this);N.a().subscribe(rd,function(a){vf(this.Wa,!a)},this);V.a().subscribe(Oh,function(){U.a().l.J&&V.a().e()&&this.wc.ca(Sf(U.a().l)||EMBED);this.q.ca(j);y(this.Ga,"animate");this.resize()},this);Rf().subscribe(sg,function(){this.wc.ca(Sf(U.a().l))},this)};
function Nh(a,b,c){pc(a.yo,b.media.name.toUpperCase());c&&(z(a.Ga,"animate"),de(a.Ga,0),L(s(function(){y(this.Ga,"animate")},a),1E3))}m.dn=function(a){vf(this.re,a)};m.uo=function(){var a=df(this.mc);N.a().c(qd,a)};m.Og=function(a){vf(this.mc,a);a&&(z(this.b(),"window"),z(this.b(),"collapsed"),L(s(this.resize,this)));L(s(function(){B(this.b(),"guide-toggled",a);a||(U.a().l&&U.a().l.e(),y(this.b(),"collapsed"),this.resize())},this),a?0:600)};
m.resize=function(){if(!U.a().l.J&&!N.a().Mb){O(this.pb,l);var a=C("guide"),b=D("current",a),b=bc("program",b),a=(b=b[b.length-1])?Wd(a).x+Wd(b).x+Q(b).width+210:9999999,a=Math.min(E().width-200,Math.max(100,E().width-a)),c=A(this.b(),"collapsed")&&!!b&&a<E().width-203;L(s(function(){B(this.b(),"window",c&&A(this.b(),"collapsed"))},this),400)}V.a().e()&&(O(this.pb,j),Nh(this,V.a().e()),this.si=E().width-(df(this.Ec)?580:260)-(EMBED?5:50),de(this.pb,this.si))};function Ph(a){return(a.link?'<a href="'+J(a.link)+'">':"")+'<div class="note'+(a.Ih?" pic":"")+'">'+(a.Ih?'<div class="picture"><img class="image" src='+J(a.Ih)+' style="display: none"/></div>':"")+'<div class="action">'+(a.m?J(a.m.name)+" ":"")+J(a.action)+'</div><div class="content">'+J(a.content)+'</div><div class="close"></div></div>'+(a.link?"</a>":"")};function Qh(){R.call(this)}u(Qh,R);Qh.prototype.T=function(){this.g=G("div",{id:"notify"})};Qh.prototype.u=function(a){Qh.f.u.call(this,a);Zf.a().subscribe("flash",function(a,c,d,e,g){this.Lg(j,a,c,d,e,g)},this);Zf.a().subscribe("show",function(a,c,d,e,g){this.Lg(l,a,c,d,e,g)},this)};
Qh.prototype.Lg=function(a,b,c,d,e,g){var i=H(Ph,{action:b,content:c,m:d,Ih:e,link:g}),n=D("image",i);D("close",i);P(P(this.h(),D("close",i),"click",function(a){a.preventDefault();a.stopPropagation();jc(i)}),n,"load",function(){O(n,j);L(function(){n.style.marginLeft=-1*n.clientWidth/2+"px";n.style.marginTop=-1*n.clientHeight/2+"px"})});this.b().appendChild(i);var r=D("note",i);L(function(){r&&(y(r,"show"),a?L(function(){z(r,"show");y(r,"fade-out");L(function(){jc(i)},5100)},3E3):L(function(){y(r,
"dim")},3E3))})};function V(){M.call(this);this.subscribe(Mf,function(a){Rf().c(rg,a);S.a().d.w&&(X("/_addprogram",Ae(),"POST","channel_id="+U.a().J.id+"&media_id="+a.media.id+"&async=true"),pg.a(),_gaq.push(["_trackEvent","Media","Play",a.media.id]),_gaq.push(["_trackEvent","Users","Play",S.a().d.id]))},this);this.subscribe(Oh,function(a){S.a().d.w&&X("/_started",Ae(),"POST","media_id="+a.id)},this)}u(V,M);ka(V);V.prototype.Ii=ca("C");V.prototype.e=da("fb");
V.prototype.getCurrentTime=function(){return this.C&&this.C.getCurrentTime?this.C.getCurrentTime():0};V.prototype.Zf=function(){return this.C&&this.C.getCurrentTime?this.C.getCurrentTime():0};var Kh="before-end",Mf="play-async",Oh="playing",Mh="seek",Lh="ten-seconds";function Rh(a){return'<div class="send-suggestion"><div class="picture"><img src="https://graph.facebook.com/'+J(a.id)+'/picture"></div><div class="name">'+J(a.name)+'</div><div class="sent-notice">Sent!</div></div>'};function Sh(){xe.call(this);this.queue=[]}u(Sh,xe);Sh.prototype.add=function(a){Wa(this.queue,a)||(this.queue.push(a),K(a,"finish",this.Qk,l,this))};Sh.prototype.remove=function(a){Xa(this.queue,a)&&bd(a,"finish",this.Qk,l,this)};Sh.prototype.p=function(){v(this.queue,function(a){a.ia()});this.queue.length=0;Sh.f.p.call(this)};function Th(){Sh.call(this);this.gb=0}u(Th,Sh);
Th.prototype.play=function(a){if(0==this.queue.length)return l;if(a||this.n==ye)this.gb<this.queue.length&&this.queue[this.gb].n!=ye&&this.queue[this.gb].stop(l),this.gb=0,this.xc();else if(1==this.n)return l;this.Ea("play");-1==this.n&&this.Ea("resume");this.startTime=t();this.Ie=k;this.n=1;this.queue[this.gb].play(a);return j};
Th.prototype.stop=function(a){this.n=ye;this.Ie=t();if(a)for(a=this.gb;a<this.queue.length;++a){var b=this.queue[a];b.n==ye&&b.play();b.n==ye||b.stop(j)}else this.gb<this.queue.length&&this.queue[this.gb].stop(l);this.Ea("stop");this.yc()};Th.prototype.Qk=function(){1==this.n&&(this.gb++,this.gb<this.queue.length?this.queue[this.gb].play():(this.Ie=t(),this.n=ye,this.Ea("finish"),this.yc()))};function Uh(a){return a*a*a}function Vh(a){return 1-Math.pow(1-a,3)};function Wh(a,b){var c;if(a instanceof Wh)this.Ta=ha(b)?b:a.Ta,Xh(this,a.fe),c=a.Rg,Yh(this),this.Rg=c,c=a.Ge,Yh(this),this.Ge=c,Zh(this,a.yg),c=a.wg,Yh(this),this.wg=c,$h(this,a.Bc.clone()),c=a.Yf,Yh(this),this.Yf=c;else if(a&&(c=String(a).match(th))){this.Ta=!!b;Xh(this,c[1]||"",j);var d=c[2]||"";Yh(this);this.Rg=d?decodeURIComponent(d):"";d=c[3]||"";Yh(this);this.Ge=d?decodeURIComponent(d):"";Zh(this,c[4]);d=c[5]||"";Yh(this);this.wg=d?decodeURIComponent(d):"";$h(this,c[6]||"",j);c=c[7]||"";Yh(this);
this.Yf=c?decodeURIComponent(c):""}else this.Ta=!!b,this.Bc=new ai(k,0,this.Ta)}m=Wh.prototype;m.fe="";m.Rg="";m.Ge="";m.yg=k;m.wg="";m.Yf="";m.Qm=l;m.Ta=l;
m.toString=function(){var a=[],b=this.fe;b&&a.push(bi(b,ci),":");if(b=this.Ge){a.push("//");var c=this.Rg;c&&a.push(bi(c,ci),"@");a.push(encodeURIComponent(String(b)));b=this.yg;b!=k&&a.push(":",String(b))}if(b=this.wg)this.Ge&&"/"!=b.charAt(0)&&a.push("/"),a.push(bi(b,"/"==b.charAt(0)?di:ei));(b=this.Bc.toString())&&a.push("?",b);(b=this.Yf)&&a.push("#",bi(b,fi));return a.join("")};m.clone=function(){return new Wh(this)};
function Xh(a,b,c){Yh(a);a.fe=c?b?decodeURIComponent(b):"":b;a.fe&&(a.fe=a.fe.replace(/:$/,""))}function Zh(a,b){Yh(a);b?(b=Number(b),(isNaN(b)||0>b)&&f(Error("Bad port number "+b)),a.yg=b):a.yg=k}function $h(a,b,c){Yh(a);b instanceof ai?(a.Bc=b,a.Bc.Gi(a.Ta)):(c||(b=bi(b,gi)),a.Bc=new ai(b,0,a.Ta))}function hi(a,b,c){Yh(a);ma(c)||(c=[String(c)]);ii(a.Bc,b,c)}function Yh(a){a.Qm&&f(Error("Tried to modify a read-only Uri"))}m.Gi=function(a){this.Ta=a;this.Bc&&this.Bc.Gi(a);return this};
function bi(a,b){return q(a)?encodeURI(a).replace(b,ji):k}function ji(a){a=a.charCodeAt(0);return"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var ci=/[#\/\?@]/g,ei=/[\#\?:]/g,di=/[\#\?]/g,gi=/[\#\?@]/g,fi=/#/g;function ai(a,b,c){this.Ha=a||k;this.Ta=!!c}
function ki(a){if(!a.Y&&(a.Y=new Rg,a.B=0,a.Ha))for(var b=a.Ha.split("&"),c=0;c<b.length;c++){var d=b[c].indexOf("="),e=k,g=k;0<=d?(e=b[c].substring(0,d),g=b[c].substring(d+1)):e=b[c];e=decodeURIComponent(e.replace(/\+/g," "));e=li(a,e);a.add(e,g?decodeURIComponent(g.replace(/\+/g," ")):"")}}m=ai.prototype;m.Y=k;m.B=k;m.add=function(a,b){ki(this);this.Ha=k;var a=li(this,a),c=this.Y.get(a);c||this.Y.set(a,c=[]);c.push(b);this.B++;return this};
m.remove=function(a){ki(this);a=li(this,a);return this.Y.Cd(a)?(this.Ha=k,this.B-=this.Y.get(a).length,this.Y.remove(a)):l};m.clear=function(){this.Y=this.Ha=k;this.B=0};m.Cd=function(a){ki(this);a=li(this,a);return this.Y.Cd(a)};m.Od=function(){ki(this);for(var a=this.Y.Vb(),b=this.Y.Od(),c=[],d=0;d<b.length;d++)for(var e=a[d],g=0;g<e.length;g++)c.push(b[d]);return c};
m.Vb=function(a){ki(this);var b=[];if(a)this.Cd(a)&&(b=Za(b,this.Y.get(li(this,a))));else for(var a=this.Y.Vb(),c=0;c<a.length;c++)b=Za(b,a[c]);return b};m.set=function(a,b){ki(this);this.Ha=k;a=li(this,a);this.Cd(a)&&(this.B-=this.Y.get(a).length);this.Y.set(a,[b]);this.B++;return this};m.get=function(a,b){var c=a?this.Vb(a):[];return 0<c.length?String(c[0]):b};function ii(a,b,c){a.remove(b);0<c.length&&(a.Ha=k,a.Y.set(li(a,b),$a(c)),a.B+=c.length)}
m.toString=function(){if(this.Ha)return this.Ha;if(!this.Y)return"";for(var a=[],b=this.Y.Od(),c=0;c<b.length;c++)for(var d=b[c],e=encodeURIComponent(String(d)),d=this.Vb(d),g=0;g<d.length;g++){var i=e;""!==d[g]&&(i+="="+encodeURIComponent(String(d[g])));a.push(i)}return this.Ha=a.join("&")};m.clone=function(){var a=new ai;a.Ha=this.Ha;this.Y&&(a.Y=this.Y.clone());return a};function li(a,b){var c=String(b);a.Ta&&(c=c.toLowerCase());return c}
m.Gi=function(a){a&&!this.Ta&&(ki(this),this.Ha=k,Qg(this.Y,function(a,c){var d=c.toLowerCase();c!=d&&(this.remove(c),ii(this,d,a))},this));this.Ta=a};/*
 Portions of this code are from MochiKit, received by
 The Closure Authors under the MIT license. All other code is Copyright
 2005-2009 The Closure Authors. All Rights Reserved.
*/
function mi(a,b){this.we=[];this.ep=a;this.$l=b||k}m=mi.prototype;m.Ld=l;m.Me=l;m.af=0;m.wl=l;m.Vl=l;m.Ql=0;m.cl=function(){this.af++};m.Bj=function(a,b){ni(this,a,b);this.af--;0==this.af&&this.Ld&&oi(this)};function ni(a,b,c){a.Ld=j;a.zi=c;a.Me=!b;oi(a)}m.Rb=function(){this.Ld&&(this.wl||f(new pi(this)),this.wl=l)};m.Jf=function(a){this.Rb();ni(this,j,a)};function qi(a){return Sa(a.we,function(a){return pa(a[1])})}
function oi(a){a.bj&&(a.Ld&&qi(a))&&(p.clearTimeout(a.bj),delete a.bj);a.N&&(a.N.Ql--,delete a.N);for(var b=a.zi,c=l,d=l;a.we.length&&0==a.af;){var e=a.we.shift(),g=e[0],i=e[1],e=e[2];if(g=a.Me?i:g)try{var n=g.call(e||a.$l,b);ha(n)&&(a.Me=a.Me&&(n==b||n instanceof Error),a.zi=b=n);b instanceof mi&&(d=j,a.cl())}catch(r){b=r,a.Me=j,qi(a)||(c=j)}}a.zi=b;d&&a.af&&(d=b,n=s(a.Bj,a,j),g=s(a.Bj,a,l),d.we.push([n,g,h]),d.Ld&&oi(d),b.Vl=j);c&&(a.bj=p.setTimeout(function(){f(b)},0))}
function pi(a){Ba.call(this);this.deferred=a}u(pi,Ba);pi.prototype.message="Deferred has already fired";pi.prototype.name="AlreadyCalledError";function ri(){if(this&&this.nl){var a=this.nl;a&&"SCRIPT"==a.tagName&&si(a,j,this.me)}}function si(a,b,c){c!=k&&p.clearTimeout(c);a.onload=ja;a.onerror=ja;a.onreadystatechange=ja;b&&window.setTimeout(function(){jc(a)},0)}function ti(a,b){var c="Jsloader error (code #"+a+")";b&&(c+=": "+b);Ba.call(this,c);this.code=a}u(ti,Ba);function ui(a,b){this.Fo=new Wh(a);this.Rl=b?b:"callback";this.me=5E3}var vi=0;
ui.prototype.send=function(a,b,c,d){var e=a||k,g=d||"_"+(vi++).toString(36)+t().toString(36);p._callbacks_||(p._callbacks_={});a=this.Fo.clone();if(e)for(var i in e)(!e.hasOwnProperty||e.hasOwnProperty(i))&&hi(a,i,e[i]);b&&(p._callbacks_[g]=function(a){wi(g,j);b.apply(h,arguments)},hi(a,this.Rl,"_callbacks_."+g));var n=a.toString(),r={timeout:this.me,Xl:j};i=r.document||document;var x=document.createElement("SCRIPT"),a={nl:x,me:h},F=new mi(ri,a),I=k,d=r.timeout!=k?r.timeout:5E3;0<d&&(I=window.setTimeout(function(){si(x,
j);var a=new ti(1,"Timeout reached for loading script "+n);F.Rb();ni(F,l,a)},d),a.me=I);x.onload=x.onreadystatechange=function(){if(!x.readyState||"loaded"==x.readyState||"complete"==x.readyState)si(x,r.Xl||l,I),F.Jf(k)};x.onerror=function(){si(x,j,I);var a=new ti(0,"Error while loading script "+n);F.Rb();ni(F,l,a)};dc(x,{type:"text/javascript",charset:"UTF-8",src:n});a=i.getElementsByTagName("HEAD");(!a||0==a.length?i.documentElement:a[0]).appendChild(x);F.we.push([k,function(){wi(g,l);c&&c(e)},
h]);F.Ld&&oi(F);return{va:g,lp:F}};function wi(a,b){p._callbacks_[a]&&(b?delete p._callbacks_[a]:p._callbacks_[a]=ja)};function xi(){R.call(this);this.Yh=l}u(xi,R);m=xi.prototype;
m.z=function(){xi.f.z.call(this);this.pa=U.a().l;var a=V.a(),b=this.pa&&this.pa.e();a.fb=b;V.a().e()&&(t(),V.a().e());this.Md=D("fullscreen",this.b());a=D("expand",this.b());this.je=C("stagecover");this.Jk=D("message",this.je);this.D=D("spinner",this.je);this.hf=D("restart",this.je);this.Mc=D("vote",this.b());this.$b=D("like",this.b());this.Ub=D("dislike",this.b());this.Ei=D("send-suggestions",this.b());b=new gf(document);yi(this);V.a().e()?(DESKTOP||this.pa.J)&&zi(this,V.a().e()):V.a().c("no-media");
P(P(P(P(P(P(P(P(P(this.h(),window,"resize",s(this.resize,this)),document,"webkitfullscreenchange",s(function(){Mb(this.Md,"full")},this)),document,"mozfullscreenchange",s(function(){Mb(this.Md,"full")},this)),document,"fullscreenchange",s(function(){Mb(this.Md,"full")},this)),this.Md,"click",s(function(a){if(A(this.Md,"full"))document.Sl&&document.Sl(),document.webkitCancelFullScreen&&document.webkitCancelFullScreen(),document.mozCancelFullScreen&&document.mozCancelFullScreen();else{var b=D("main");
b.jl&&b.jl();b.webkitRequestFullScreen&&b.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT);b.mozRequestFullScreen&&b.mozRequestFullScreen()}a.stopPropagation();a.preventDefault()},this)),a,"click",s(this.zo,this)),this.b(),"mousemove",s(function(a){var b=a.offsetX/this.lb,a=a.offsetY/this.Aa;if(0.6<b&&1>b&&0.7<a&&1>a&&(this.de==YT.PlayerState.PLAYING||this.de==YT.PlayerState.PAUSED))y(this.je,"click-through"),L(s(function(){z(this.je,"click-through")},this),500)},this)),b,"key",s(function(a){"32"==
a.keyCode&&("INPUT"!=a.target.tagName&&"TEXTAREA"!=a.target.tagName)&&Ai(this)},this)),this.je,"click",s(function(a){!A(C("queue"),"show")&&(!A(C("search"),"show")&&!xc(a.target,"queue")&&!xc(a.target,"search"))&&Ai(this)},this));U.a().subscribe(If,this.Rc,this);U.a().subscribe(Lf,function(a){zi(this,a);yi(this);S.a().d.w&&X("/_play",Ae(),"POST","media_id="+a.media.id+"&channel_id="+U.a().l.id)},this);V.a().subscribe(Mf,this.mi,this);V.a().subscribe(Mh,this.Xn,this);V.a().subscribe(Lh,function(){if(S.a().d.w&&
"none"==this.Ei.style.display){var a=Sb(S.a().Lc),b=Math.floor(Math.random()*(a.length-1)),e=Math.floor(Math.random()*(a.length-1)),g=S.a().Lc[a[b]],i=S.a().Lc[a[e]],n=H(Rh,{id:g.id,name:g.name}),r=H(Rh,{id:i.id,name:i.name}),a=C("send-suggestions");a.innerHTML="";a.appendChild(n);a.appendChild(r);O(this.Ei,j);P(P(this.h(),n,"click",s(function(){y(n,"sent");var a=new Bi({from_user:S.a().d,to_user:g,text:"Sent you a video!",media:V.a().e().media});a.time=new yd;a.rb=md(a.time.getTime());S.a().c("new-message",
a);X("/_message",Ae(),"POST","from_id="+S.a().d.id+"&to_id="+a.Vi.id+"&text="+a.text+"&media_id="+a.media.id)},this)),r,"click",s(function(){y(r,"sent");var a=new Bi({from_user:S.a().d,to_user:i,text:"Sent you a video!",media:V.a().e().media});a.time=new yd;a.rb=md(a.time.getTime());S.a().c("new-message",a);X("/_message",Ae(),"POST","from_id="+S.a().d.id+"&to_id="+a.Vi.id+"&text="+a.text+"&media_id="+a.media.id)},this))}},this);V.a().subscribe(Kh,function(){yi(this,j);S.a().d.w&&(S.a().d.Vc&&V.a().e())&&
S.a().d.Vc.lf(V.a().e().media);Ci(this);V.a().e().ended=j;Di(this)},this);S.a().subscribe("logged-in",function(){Ei(this,V.a().e().media)},this);DESKTOP&&(P(P(P(this.h(),this.hf,"click",s(function(a){a.preventDefault();a.stopPropagation();V.a().e()&&zi(this,V.a().e())},this)),this.$b,"click",s(this.Vk,this,this.$b,j)),this.Ub,"click",s(this.Vk,this,this.Ub,l)),N.a().subscribe(pd,function(a){this.resize(a)},this),N.a().subscribe(qd,function(){L(s(this.resize,this))},this),N.a().subscribe(rd,function(a){a?
this.C.playVideo():this.C.pauseVideo();var a=D(a?"play":"pause",this.b()),b=new Th;b.add(new Ne(a,250,Vh));b.add(new Me(a,250,Uh));b.play()},this),N.a().subscribe("mute",function(a){this.C&&(a?this.C.mute():this.C.unMute())},this),N.a().subscribe("restart",function(){this.C.seekTo(0)},this));this.resize()};function Ai(a){if(a.C&&a.C.getPlayerState&&DESKTOP)switch(a.C.getPlayerState()){case YT.PlayerState.PLAYING:N.a().c(rd,l);break;case YT.PlayerState.PAUSED:N.a().c(rd,j)}}
m.ro=function(){var a=D("main");return!(!a.jl&&!a.webkitRequestFullScreen&&!a.mozRequestFullScreen)};m.zo=function(a){a.preventDefault();a.stopPropagation();Z.a();a=!A(C("sidebar"),"toggled");DESKTOP&&(N.a().c(pd,a),N.a().c(qd,a))};
function zi(a,b){V.a().fb=b;a.Tm!=b.id&&(Zf.a().c("flash","Now playing",b.media.name,h,b.media.Ri,"#info:"+b.media.id),a.Tm=b.id);a.play(b.media);DESKTOP&&S.a().d.w?(Ei(a,b.media),O(a.Ei,l)):(O(a.$b,l),O(a.Ub,l));"reddit"==U.a().l.id||b.media.ff?(O(D("reddit",a.Mc),l),(new ui("http://www.reddit.com/api/info.json","jsonp")).send(b.media.ff?{id:b.media.ff}:{url:"www.youtube.com/watch?v="+b.media.Xb},s(function(a){if(a.data&&a.data.children.length){O(D("reddit",this.Mc),j);this.vi=a.data.children[0].kind+
"_"+a.data.children[0].data.id;this.Ip=a.data.modhash;var b=a.data.children[0].data.score;pc(D("score",this.Mc),b);D("reddit-link",this.Mc).href="http://www.reddit.com"+a.data.children[0].data.permalink}},a))):(a.vi=k,O(D("reddit",a.Mc),l))}
m.play=function(a,b){V.a().e().async?V.a().e():(t(),V.a().e());!this.C||!this.C.loadVideoById?(this.C=new YT.Player("ytplayer",{height:E().height-40,width:E().width,videoId:a?a.Xb:k,playerVars:{controls:0,showinfo:0,iv_load_policy:3,modestbranding:1,wmode:"opaque",origin:HOST_URL,enablejsapi:1,rel:0,html5:HTML5?1:0},events:{onStateChange:s(this.In,this),onReady:s(this.un,this),onError:s(this.tn,this)}}),V.a().Ii(this.C)):a?this.C.cueVideoById(a.Xb,h,"large"):b&&this.C.cuePlaylist(Ra(b.ba,function(a){return a.media.Xb}),
b.Oa)};m.resize=function(){if(IPHONE)de(this.b(),E().width-320);else{var a=C("stagecover"),b=D("message",a),c=C("guide").style.height,c=c.substring(0,c.length-2),c=N.a().bd?c:40,d=N.a().rd?320:0;this.Aa=E().height-c;this.lb=E().width-d;ce(this.b(),E().height-c);de(this.b(),E().width-d);ce(a,E().height-c);de(a,E().width-d);a=Q(b);Pd(b,{"margin-left":-a.width/2+"px","margin-top":-a.height/2+"px"});B(this.Md,"full",this.ro&&(document.fullScreen||document.webkitIsFullScreen||document.Cp))}};
m.Rc=function(a){if(a=a.e())zi(this,a),S.a().d.w&&X("/_play",Ae(),"POST","media_id="+a.media.id+"&channel_id="+U.a().l.id);yi(this)};function Ci(a){B(a.$b,"checked",l);B(a.Ub,"checked",l)}function Ei(a,b){O(a.$b,j);O(a.Ub,j);X("/_like/"+b.id,s(function(a){a=Y(a.target);B(this.$b,"checked",a.liked||A(this.$b,"checked"));B(this.Ub,"checked",a.disliked||A(this.Ub,"checked"))},a))}
m.Vk=function(a,b,c){c.preventDefault();c.stopPropagation();V.a().e()&&(a=Mb(a,"checked"),(c=b&&A(this.Ub,"checked")||!b&&A(this.$b,"checked"))&&z(b?this.Ub:this.$b,"checked"),X(b?"/_like":"/_dislike",h,"POST","media_id="+V.a().e().media.id+(!a?"&delete=1":"")+(c?"&flip=1":"")+(this.vi?"&reddit_id="+this.vi+"&modhash="+this.Jp:"")))};m.mi=function(a){zi(this,a);yi(this);S.a().d.w&&(X("/_play",Ae(),"POST","media_id="+a.media.id+"&channel_id="+U.a().l.id),X("/_optin",Ae(),"POST","media_id="+a.media.id))};
m.Xn=function(a){this.C.seekTo&&this.C.seekTo(a,j)};m.In=function(a){this.de=a.data;yi(this);switch(a.data){case YT.PlayerState.CUED:this.C.playVideo();N.a().c(rd,j);break;case YT.PlayerState.PLAYING:this.Yh=l;V.a().c(Oh,V.a().e().media);break;case YT.PlayerState.ENDED:S.a().d.w&&(S.a().d.Vc&&V.a().e())&&S.a().d.Vc.lf(V.a().e().media),Ci(this),V.a().e().ended=j,Di(this)}};
m.un=function(){this.C.setPlaybackQuality("large");V.a().e().async?V.a().e():N.a().Mb||(t(),V.a().e());this.C.playVideo();N.a().c("mute",this.C.isMuted())};m.tn=function(a){100==a?Di(this):(V.a().c("no-media"),yi(this,h,j))};
function yi(a,b,c){if(!IPHONE){var d=C("stagecover"),e=V.a().e()?V.a().getCurrentTime():0;c?(O(a.D,l),O(a.hf,j),y(d,"covered")):(!V.a().e()||V.a().e()&&e>V.a().e().media.duration?(V.a().c("no-media"),pc(a.Jk.firstChild,Fi),O(a.D,l),O(a.hf,l),O(a.Mc,l),y(d,"covered")):(a.de==YT.PlayerState.PLAYING&&0<a.C.getCurrentTime()||a.de==YT.PlayerState.PAUSED&&0<a.C.getCurrentTime())&&!b?(O(a.D,l),O(a.hf,l),z(d,"covered"),O(a.Mc,!EMBED&&(S.a().d.w||"reddit"==U.a().l.id||V.a().e().media.ff))):(pc(a.Jk.firstChild,
Gi),O(a.D,j),O(a.hf,l),O(a.Mc,!EMBED&&(S.a().d.w||"reddit"==U.a().l.id||V.a().e().media.ff)),y(d,"covered"),a.de==YT.PlayerState.PLAYING&&L(s(function(){yi(this)},a),500)),ge(d,a.de==YT.PlayerState.BUFFERING?0.9:1),a.resize())}}function Di(a){if(!a.Yh){var b=U.a().l.e();b?U.a().c(Lf,b):(V.a().fb=k,U.a().c(If,Uf(U.a()),j));a.Yh=j}}var Fi="THIS CHANNEL IS CURRENTLY OFFLINE",Gi="LOADING STORY";function Hi(a,b){R.call(this,b);this.Fb=a||""}u(Hi,R);Hi.prototype.Db=k;var Ii="placeholder"in document.createElement("input");m=Hi.prototype;m.Ne=l;m.T=function(){this.g=this.kb().T("input",{type:"text"})};m.u=function(a){Hi.f.u.call(this,a);this.Fb||(this.Fb=a.getAttribute("label")||"");var b;a:{var c=ac(a);try{b=c&&c.activeElement;break a}catch(d){}b=k}b==a&&(this.Ne=j,z(this.b(),this.se));Ii?this.b().placeholder=this.Fb:this.b().setAttribute("aria-label",this.Fb)};
m.z=function(){Hi.f.z.call(this);var a=new Jd(this);P(a,this.b(),"focus",this.bk);P(a,this.b(),"blur",this.um);Ii?this.A=a:(qb&&P(a,this.b(),["keypress","keydown","keyup"],this.Am),P(a,ac(this.b())?ac(this.b()).parentWindow||ac(this.b()).defaultView:window,"load",this.Im),this.A=a,Ji(this));this.Rb();this.b().Rm=this};m.$c=function(){Hi.f.$c.call(this);this.A&&(this.A.ia(),this.A=k);this.b().Rm=k};function Ji(a){!a.nm&&(a.A&&a.b().form)&&(P(a.A,a.b().form,"submit",a.Dm),a.nm=j)}
m.p=function(){Hi.f.p.call(this);this.A&&(this.A.ia(),this.A=k)};m.se="label-input-label";m.bk=function(){this.Ne=j;z(this.b(),this.se);if(!Ii&&!Ki(this)&&!this.Om){var a=this,b=function(){a.b().value=""};w?L(b,10):b()}};m.um=function(){Ii||(Ld(this.A,this.b(),"click",this.bk),this.Db=k);this.Ne=l;this.Rb()};m.Am=function(a){27==a.keyCode&&("keydown"==a.type?this.Db=this.b().value:"keypress"==a.type?this.b().value=this.Db:"keyup"==a.type&&(this.Db=k),a.preventDefault())};
m.Dm=function(){Ki(this)||(this.b().value="",L(this.tm,10,this))};m.tm=function(){Ki(this)||(this.b().value=this.Fb)};m.Im=function(){this.Rb()};function Ki(a){return!!a.b()&&""!=a.b().value&&a.b().value!=a.Fb}m.clear=function(){this.b().value="";this.Db!=k&&(this.Db="")};m.reset=function(){Ki(this)&&(this.clear(),this.Rb())};m.Ka=function(a){this.Db!=k&&(this.Db=a);this.b().value=a;this.Rb()};m.v=function(){return this.Db!=k?this.Db:Ki(this)?this.b().value:""};
m.Rb=function(){Ii?this.b().placeholder!=this.Fb&&(this.b().placeholder=this.Fb):(Ji(this),this.b().setAttribute("aria-label",this.Fb));Ki(this)?z(this.b(),this.se):(!this.Om&&!this.Ne&&y(this.b(),this.se),Ii||L(this.Un,10,this))};m.ca=function(a){this.b().disabled=!a;B(this.b(),this.se+"-disabled",!a)};m.isEnabled=function(){return!this.b().disabled};m.Un=function(){this.b()&&(!Ki(this)&&!this.Ne)&&(this.b().value=this.Fb)};function Li(a,b,c,d,e,g,i,n,r){var x,F;if(x=c.offsetParent){var I="HTML"==x.tagName||"BODY"==x.tagName;if(!I||"static"!=Td(x,"position"))F=$d(x),I||(I=(I=ae(x))&&qb?-x.scrollLeft:I&&(!w||!Cb("8"))?x.scrollWidth-x.clientWidth-x.scrollLeft:x.scrollLeft,F=Ob(F,new Nb(I,x.scrollTop)))}x=F||new Nb;F=fe(a);if(I=Zd(a)){var ba=new Od(I.left,I.top,I.right-I.left,I.bottom-I.top),I=Math.max(F.left,ba.left),T=Math.min(F.left+F.width,ba.left+ba.width);if(I<=T){var ya=Math.max(F.top,ba.top),ba=Math.min(F.top+F.height,
ba.top+ba.height);ya<=ba&&(F.left=I,F.top=ya,F.width=T-I,F.height=ba-ya)}}I=Zb(a);ya=Zb(c);if(I.I!=ya.I){var T=I.I.body,ya=ya.I.parentWindow||ya.I.defaultView,ba=new Nb(0,0),kb=ac(T)?ac(T).parentWindow||ac(T).defaultView:window,Ig=T;do{var ra;if(kb==ya)ra=$d(Ig);else{ra=Ig;var Lb=new Nb;if(1==ra.nodeType){if(ra.getBoundingClientRect){var wa=Xd(ra);Lb.x=wa.left;Lb.y=wa.top}else{var wa=zc(Zb(ra)),bb=$d(ra);Lb.x=bb.x-wa.x;Lb.y=bb.y-wa.y}qb&&!Cb(12)&&(wa=h,wa=h,w?wa="-ms-transform":rb?wa="-webkit-transform":
pb?wa="-o-transform":qb&&(wa="-moz-transform"),bb=h,wa&&(bb=Td(ra,wa)),bb||(bb=Td(ra,"transform")),bb?(ra=bb.match(ne),wa=!ra?new Nb(0,0):new Nb(parseFloat(ra[1]),parseFloat(ra[2]))):wa=new Nb(0,0),Lb=new Nb(Lb.x+wa.x,Lb.y+wa.y))}else wa=pa(ra.om),bb=ra,ra.targetTouches?bb=ra.targetTouches[0]:wa&&ra.oa.targetTouches&&(bb=ra.oa.targetTouches[0]),Lb.x=bb.clientX,Lb.y=bb.clientY;ra=Lb}ba.x+=ra.x;ba.y+=ra.y}while(kb&&kb!=ya&&(Ig=kb.frameElement)&&(kb=kb.parent));T=Ob(ba,$d(T));w&&!yc(I)&&(T=Ob(T,zc(I)));
F.left+=T.x;F.top+=T.y}a=(b&4&&ae(a)?b^2:b)&-5;b=new Nb(a&2?F.left+F.width:F.left,a&1?F.top+F.height:F.top);b=Ob(b,x);e&&(b.x+=(a&2?-1:1)*e.x,b.y+=(a&1?-1:1)*e.y);var W;if(i)if(r)W=r;else if(W=Zd(c))W.top-=x.y,W.right-=x.x,W.bottom-=x.y,W.left-=x.x;a:{r=b.clone();e=0;a=(d&4&&ae(c)?d^2:d)&-5;d=Q(c);n=n?n.clone():d.clone();if(g||0!=a)a&2?r.x-=n.width+(g?g.right:0):g&&(r.x+=g.left),a&1?r.y-=n.height+(g?g.bottom:0):g&&(r.y+=g.top);if(i){if(W){g=r;e=0;if(65==(i&65)&&(g.x<W.left||g.x>=W.right))i&=-2;if(132==
(i&132)&&(g.y<W.top||g.y>=W.bottom))i&=-5;g.x<W.left&&i&1&&(g.x=W.left,e|=1);g.x<W.left&&(g.x+n.width>W.right&&i&16)&&(n.width=Math.max(n.width-(g.x+n.width-W.right),0),e|=4);g.x+n.width>W.right&&i&1&&(g.x=Math.max(W.right-n.width,W.left),e|=1);i&2&&(e|=(g.x<W.left?16:0)|(g.x+n.width>W.right?32:0));g.y<W.top&&i&4&&(g.y=W.top,e|=2);g.y>=W.top&&(g.y+n.height>W.bottom&&i&32)&&(n.height=Math.max(n.height-(g.y+n.height-W.bottom),0),e|=8);g.y+n.height>W.bottom&&i&4&&(g.y=Math.max(W.bottom-n.height,W.top),
e|=2);i&8&&(e|=(g.y<W.top?64:0)|(g.y+n.height>W.bottom?128:0));i=e}else i=256;e=i;if(e&496){c=e;break a}}Ud(c,r);if(!(d==n||(!d||!n?0:d.width==n.width&&d.height==n.height)))g=yc(Zb(ac(c))),w&&(!g||!Cb("8"))?(i=c.style,g?(g=je(c,"padding"),c=me(c),i.pixelWidth=n.width-c.left-g.left-g.right-c.right,i.pixelHeight=n.height-c.top-g.top-g.bottom-c.bottom):(i.pixelWidth=n.width,i.pixelHeight=n.height)):(c=c.style,qb?c.MozBoxSizing="border-box":rb?c.WebkitBoxSizing="border-box":c.boxSizing="border-box",c.width=
Math.max(n.width,0)+"px",c.height=Math.max(n.height,0)+"px");c=e}return c};function Mi(){}Mi.prototype.Jb=aa();function Ni(a,b,c){this.element=a;this.ph=b;this.En=c}u(Ni,Mi);Ni.prototype.Jb=function(a,b,c){Li(this.element,this.ph,a,b,h,c,this.En)};function Oi(a,b,c,d){Ni.call(this,a,b);this.Um=c?5:0;this.ii=d||h}u(Oi,Ni);Oi.prototype.Jb=function(a,b,c,d){var e=Li(this.element,this.ph,a,b,k,c,10,d,this.ii);if(e&496){var g=Pi(e,this.ph),b=Pi(e,b),e=Li(this.element,g,a,b,k,c,10,d,this.ii);e&496&&(g=Pi(e,g),b=Pi(e,b),Li(this.element,g,a,b,k,c,this.Um,d,this.ii))}};function Pi(a,b){a&48&&(b^=2);a&192&&(b^=1);return b};function Qi(a,b){Gc.call(this);this.V=new Jd(this);var c=a||k;Ri(this);this.g=c;b&&this.tl(b)}u(Qi,hd);m=Qi.prototype;m.g=k;m.Hf=j;m.pj=k;m.Td=l;m.$n=l;m.Qh=-1;m.xk=-1;m.Km=l;m.fm=j;m.Kc="toggle_display";m.tl=ca("Kc");m.b=da("g");function Ri(a){a.Td&&f(Error("Can not change this state of the popup while showing."))}m.Eb=da("Td");m.ya=function(a){this.nf&&this.nf.stop();this.Oe&&this.Oe.stop();a?this.Lg():this.Rd()};m.Jb=ja;
m.Lg=function(){if(!this.Td&&this.dispatchEvent("beforeshow")){this.g||f(Error("Caller must call setElement before trying to show the popup"));this.Jb();var a=ac(this.g);this.Km&&P(this.V,a,"keydown",this.mn,j);if(this.Hf)if(P(this.V,a,"mousedown",this.Uk,j),w){var b;try{b=a.activeElement}catch(c){}for(;b&&"IFRAME"==b.nodeName;){try{var d=b.contentDocument||b.contentWindow.document}catch(e){break}a=d;b=a.activeElement}P(this.V,a,"mousedown",this.Uk,j);P(this.V,a,"deactivate",this.Tk)}else P(this.V,
a,"blur",this.Tk);"toggle_display"==this.Kc?(this.g.style.visibility="visible",O(this.g,j)):"move_offscreen"==this.Kc&&this.Jb();this.Td=j;this.nf?(ad(this.nf,"end",this.Zk,l,this),this.nf.play()):this.Zk()}};m.Rd=function(a){if(!this.Td||!this.dispatchEvent({type:"beforehide",target:a}))return l;this.V&&Md(this.V);this.Td=l;this.xk=t();this.Oe?(ad(this.Oe,"end",za(this.Aj,a),l,this),this.Oe.play()):this.Aj(a);return j};
m.Aj=function(a){"toggle_display"==this.Kc?this.$n?L(this.jk,0,this):this.jk():"move_offscreen"==this.Kc&&(this.g.style.top="-10000px");this.dispatchEvent({type:"hide",target:a})};m.jk=function(){this.g.style.visibility="hidden";O(this.g,l)};m.Zk=function(){this.Qh=t();this.xk=-1;this.dispatchEvent("show")};m.Uk=function(a){a=a.target;!oc(this.g,a)&&((!this.pj||oc(this.pj,a))&&!(150>t()-this.Qh))&&this.Rd(a)};m.mn=function(a){27==a.keyCode&&this.Rd(a.target)&&(a.preventDefault(),a.stopPropagation())};
m.Tk=function(a){if(this.fm){var b=ac(this.g);if(w||pb){if(a=b.activeElement,!a||oc(this.g,a)||"BODY"==a.tagName)return}else if(a.target!=b)return;150>t()-this.Qh||this.Rd()}};m.p=function(){Qi.f.p.call(this);this.V.ia();Kc(this.nf);Kc(this.Oe);delete this.g;delete this.V};function Si(a,b){this.el=4;this.oi=b||h;Qi.call(this,a)}u(Si,Qi);function Ti(a,b){a.el=b;a.Eb()&&a.Jb()}function Ui(a,b){a.oi=b||h;a.Eb()&&a.Jb()}function Vi(a,b,c,d,e){a.$m=b==k||b instanceof Nd?b:new Nd(b,c,d,e);a.Eb()&&a.Jb()}Si.prototype.Jb=function(){if(this.oi){var a=!this.Eb()&&"move_offscreen"!=this.Kc,b=this.b();a&&(b.style.visibility="hidden",O(b,j));this.oi.Jb(b,this.el,this.$m);a&&O(b,l)}};function Wi(a,b,c){Gc.call(this);this.rc=a;this.$=b;this.V=c;this.fh=s(this.Bn,this)}u(Wi,Gc);var Ih=Wi;m=Wi.prototype;m.Kg=l;m.bl=0;m.za=k;m.Vf=function(){!this.za&&!this.bl?this.Fe():this.Kg=j};m.stop=function(){this.za&&(jd.clearTimeout(this.za),this.za=k,this.Kg=l)};m.p=function(){Wi.f.p.call(this);this.stop()};m.Bn=function(){this.za=k;this.Kg&&!this.bl&&(this.Kg=l,this.Fe())};m.Fe=function(){this.za=L(this.fh,this.$);this.rc.call(this.V)};function Xi(a,b){Gc.call(this);this.rc=a;this.V=b;this.Cb=new ze(s(this.An,this),0,this)}u(Xi,Gc);m=Xi.prototype;m.$=0;m.Ai=0;m.qk=l;m.p=function(){this.Cb.ia();delete this.rc;delete this.V;Xi.f.p.call(this)};m.start=function(a,b){this.stop();this.qk=l;var c=b||0;this.$=Math.max(a||0,0);this.Ai=0>c?-1:t()+c;this.Cb.start(0>c?this.$:Math.min(this.$,c))};m.stop=function(){this.Cb.stop()};m.oc=function(){return this.Cb.oc()};
m.An=function(){if(this.rc.call(this.V))this.qk=j;else if(0>this.Ai)this.Cb.start(this.$);else{var a=this.Ai-t();0>=a||this.Cb.start(Math.min(this.$,a))}};function Yi(a){Gc.call(this);this.g=a;this.Ze=this.g.value;this.A=new Jd(this);this.Gb=t();rb||w||qb&&Cb("1.9")?P(this.A,a,"paste",this.Hd):P(this.A,a,["keydown","blur","focus","mouseover","input"],this.Bm);this.Cb=new Xi(s(this.vj,this))}u(Yi,hd);m=Yi.prototype;m.n="init";m.K=lh("goog.events.PasteHandler");m.p=function(){Yi.f.p.call(this);this.A.ia();this.A=k;this.Cb.ia();this.Cb=k};
m.vj=function(){if(this.Ze==this.g.value)return l;this.K.info("detected textchange after paste");this.dispatchEvent("after_paste");return j};m.Hd=function(a){a=new Rc(a.oa);a.type="paste";this.dispatchEvent(a);L(function(){this.vj()||this.Cb.start(50,200)},0,this)};
m.Bm=function(a){switch(this.n){case "init":switch(a.type){case "blur":this.n="init";break;case "focus":this.n="focused";break;case "mouseover":this.n="init";this.g.value!=this.Ze&&(this.K.info("paste by dragdrop while on init!"),this.Hd(a));break;default:hh(this.K,"unexpected event "+a.type+"during init")}break;case "focused":switch(a.type){case "input":var b=this.Gb+400;if(t()>b||"focus"==this.On)this.K.info("paste by textchange while focused!"),this.Hd(a);break;case "blur":this.n="init";break;
case "keydown":this.K.info("key down ... looking for ctrl+v");if(jb&&pb&&0==a.keyCode||jb&&pb&&17==a.keyCode)break;this.n="typing";break;case "mouseover":this.g.value!=this.Ze&&(this.K.info("paste by dragdrop while focused!"),this.Hd(a));break;default:hh(this.K,"unexpected event "+a.type+" during focused")}break;case "typing":switch(a.type){case "input":this.n="focused";break;case "blur":this.n="init";break;case "keydown":if(a.ctrlKey&&86==a.keyCode||a.shiftKey&&45==a.keyCode||a.metaKey&&86==a.keyCode)this.K.info("paste by ctrl+v while keypressed!"),
this.Hd(a);break;case "mouseover":this.g.value!=this.Ze&&(this.K.info("paste by dragdrop while keypressed!"),this.Hd(a));break;default:hh(this.K,"unexpected event "+a.type+" during keypressed")}break;default:hh(this.K,"invalid "+this.n+" state")}this.Gb=t();this.Ze=this.g.value;this.K.info(a.type+" -> "+this.n);this.On=a.type};function Zi(){return'<div class="popup" id="popup" style="visibility: hidden; display: none;"><div class="content"></div><div id="tailarrow"></div></div>'}function $i(a){return(a.link?'<a href="'+J(a.link)+'">':"")+'<div class="tooltip">'+a.text+"</div>"+(a.link?"</a>":"")}
function aj(){return'<div class="comment-oob">Click <div class="fb-icon"></div> and <div class="twitter-icon"></div> for instant sharing<div class="on-off"><div class="off">OFF <div class="twitter-icon"></div></div> &#8594; <div class="on">ON <div class="twitter-icon on"></div></div></div></div>'}
function bj(){return'<div class="create-poll"><div class="label">CREATE A USER POLL</div><input type="text" placeholder="Title" class="poll-title"/><div class="label">OPTIONS</div><input type="text" placeholder="Option 1" class="option-input"/><input type="text" placeholder="Option 2" class="option-input"/><div class="add-option button">ADD OPTION</div><div class="submit-poll button">CREATE</div></div>'}
function cj(){return'<div class="select-program"><div class="select-header">Suggest a Program</div><div class="select-content"><div class="page"><input type="text" class="program-input" placeholder="paste a youtube link"/><div class="page2"></div></div></div></div>'}function dj(a){return'<div class="confirm-media"><img src="'+J(a.Pi)+'" /><div class="title">'+J(a.title)+'</div><div class="dark button">Yes</div></div>'};function Lg(){var a=C("popup");a||(a=H(Zi),document.body.appendChild(a));Si.call(this,a);K(window,"resize",s(this.ya,this,l));K(this,"hide",this.pn);this.Hj=this.mf=this.dg=l;this.o=vg.a();this.o.subscribe("tooltip",this.lo,this);this.o.subscribe("oob",this.io,this);this.o.subscribe("create-poll",this.bo,this);this.o.subscribe("select-program",this.co,this);this.o.subscribe("hide",this.Rd,this);K(this.b(),"mouseover",s(function(){this.dg=j},this));K(this.b(),"mouseout",s(function(){this.dg=l;this.mf&&
this.o.c("hide")},this))}u(Lg,Si);ka(Lg);function Kg(a,b,c,d){K(b,"mouseover",s(function(){this.ye&&jd.clearTimeout(this.ye);this.mf=l;this.o.c("tooltip",b,c,d)},a));K(b,"mouseout",s(function(){this.ye=L(s(function(){this.dg?this.mf=j:this.o.c("hide")},this),100)},a))}m=Lg.prototype;m.show=function(a,b,c,d){this.ye&&jd.clearTimeout(this.ye);this.mf=l;this.o.c(c,a,b,d);this.ye=L(s(function(){this.dg?this.mf=j:this.o.c("hide")},this),2E3)};
function ej(a,b,c){"top"==c?(Ti(a,1),c=-1*(Q(a.b()).width-Q(b).width)/2,Vi(a,0,0,6,c),Ui(a,new Oi(b,4)),a.b().className="popup",y(a.b(),"top")):"left"==c?(Ti(a,0),c=-1*(Q(a.b()).height-Q(b).height)/2,Vi(a,c,6,0,0),Ui(a,new Oi(b,6)),a.b().className="popup",y(a.b(),"left")):"right"==c&&(Ti(a,0),c=-1*(Q(a.b()).height-Q(b).height)/2,Vi(a,c,0,0,6),Ui(a,new Oi(b,6)),a.b().className="popup",y(a.b(),"right"))}m.pn=function(){this.Hj||(this.Rd(),this.o.c("on-hide"))};m.Qa=function(){return D("content",this.b())};
m.lo=function(a,b,c,d){this.ya(l);ej(this,a,b);Cc(this.Qa(),$i,{text:"function"==typeof c.text?c.text():c.text,link:c.link});d&&(Ri(this),this.Hf=l);this.ya(j)};m.io=function(a,b,c){this.ya(l);ej(this,a,b);a=-1*(Q(this.b()).width-Q(a).width)/2;Vi(this,0,0,36,a);Cc(this.Qa(),aj,{text:c.html,link:c.link});Ri(this);this.Hf=l;this.ya(j);P(this.V,this.b(),"click",s(function(){this.o.c("hide")},this))};
m.bo=function(a){this.ya(l);Ti(this,2);Ui(this,new Oi(a,7));this.b().className="popup";y(this.b(),"top");a=-1*(Q(this.b()).width-Q(a).width)/2;Vi(this,0,0,36,a);Cc(this.Qa(),bj,{});Ri(this);this.Hf=l;this.ya(j);this.Hj=j};
m.co=function(a,b){this.ya(l);Ti(this,0);var c=-1*(Q(this.b()).height-Q(a).height)/2;Vi(this,c,0,0,5);Ui(this,new Oi(a,6));y(this.b(),"left");Cc(this.Qa(),cj);this.rf=new Hi("paste a YouTube link");this.rf.j(D("program-input",this.b()));var c=new gf(this.rf.b()),d=new Yi(this.rf.b()),e=new Ih(s(this.fi,this,b),1E3);this.ya(j);P(P(P(this.V,d,"after_paste",s(this.fi,this,b)),c,"key",s(function(){e&&e.Vf()},this)),this.rf.b(),"focus",s(this.fi,this,b))};
m.fi=function(a){var b=D("select-content",this.b());try{var c;var d=this.rf.v(),e=fj.exec(d);e?c=new gj(e[1]||e[2],h,h):f(Error("failed to parse video id from youtube url: "+d));X(Ca("https://gdata.youtube.com/feeds/api/videos/%s?v=2&alt=json",c.Kl),s(function(d){var e=mh(Fh(d.target)).entry,d=e.title.$t,g=e.media$group.media$thumbnail[0].url,e=D("page2",this.b());Cc(e,dj,{title:d,Pi:g});d=new Ef("Yes");d.j(D("button",e));(new Ke(b,[0,0],[260,0],300,Vh)).play();P(this.V,d,"action",s(this.bi,this,
a,c))},this))}catch(g){}};m.bi=function(a,b){X("/_addprogram",s(function(b){b=mh(Fh(b.target));b=new hg(b);a.c(rg,b);this.ya(l)},this),"POST","channel="+a.id+"&youtube_id="+b.Kl)};function hj(){M.call(this);this.sj=[];this.kl=[]}u(hj,M);ka(hj);
hj.prototype.search=function(a,b){X("https://gdata.youtube.com/feeds/api/videos?q="+a+"&max-results=10&v=2&alt=json",s(function(a){a=Y(a.target);this.kl=Ra(a.feed.entry,function(a){var b=new ag({id:"youtube"+a.media$group.yt$videoid.$t,name:a.title.$t,host_id:a.media$group.yt$videoid.$t,description:a.media$group.media$description.$t,duration:a.media$group.yt$duration.seconds,publisher:{name:a.author[0].name.$t,id:"youtube"+a.author[0].name.$t,picture:"https://i4.ytimg.com/i/"+a.author[0].yt$userId.$t+
"/1.jpg"}});b.Ac=xd(a.published.$t);return b},this);b&&b(this.kl)},this))};function ij(a){return'<div class="search-channel"><div class="pic"><img src="'+J(a.Pi)+'"></div><div class="title">'+J(a.name)+'</div><div class="loading loading-channel"><div class="loading-spinner"></div></div></div>'};function jj(a){return'<div class="info"><div class="picture"><img src="'+J(a.media.Lb)+'" class="thumb"><div class="ytvideo"></div><div class="publisher"><img src="'+J(a.media.wa.O)+'"><div class="name">'+J(a.media.wa.name)+'</div></div><div class="links"><div class="local"></div><a target="_blank" href="'+a.media.Lm+'"><div class="host"></div></a></div><div class="link-select" style="display:none"><input onClick="this.select();" class="link-input" type="text" value="'+a.media.link+'" readonly="readonly"/></div><div class="title"><div class="text">'+
J(a.media.name)+'</div></div><div class="reddit"><div class="upvote"></div><div class="reddit-logo"></div><div class="reddit-score"></div><div class="downvote"></div></div><div class="scrollable ios-scroll" '+(!a.description?'style="display:none"':"")+'><div class="desc-link"><a href="#">DESCRIPTION</a><div class="published">'+J(a.Ac)+'</div></div><div class="description">'+a.description+'</div></div><div class="button play"><div class="icon"></div><div class="loading-icon"></div></div><div class="options"><div class="button facebook"><div class="icon"></div></div><div class="button twitter"><div class="icon"></div></div><div class="button star"><div class="icon"></div></div><div class="button send"><div class="icon"></div></div></div></div><div class="viewers" style="display: none"><div class="label"><div class="eye-icon"></div></div></div><div class="info-contents"><div class="scrollable ios-scroll"><div class="user-poll" style="display: none"><div class="label"><div class="poll-icon"></div><div class="status">VOTE</div></div><div class="poll-options"></div></div><div class="tweet-holder" style="display:none"><div class="label"><div class="globe-icon"></div><a class="tweets-link">LATEST TWEETS</a></div><div class="tweets"></div><div class="dot-nav"></div></div><div class="comments-holder ios-scroll" style="display:none"><div class="label"><div class="friends-icon"></div><a class="conv-link">CONVERSATION</a>'+
(a.Sm?'<a class="prev-link">&#10218; LAST PROGRAM</a>':"")+'</div><div class="no-comments" style="display:none">Start the conversation</div><div class="comments"></div><div class="top-grad"></div><div class="bottom-grad"></div></div><div class="create-poll-button" style="display:none">+ POLL</div><div class="create-poll popup" style="display:none"><div class="label">CREATE A USER POLL</div><input type="text" placeholder="Title" class="poll-title"/><div class="label" style="margin-top: 5px;">OPTIONS</div><div class="option-inputs"><input type="text" placeholder="Option 1" class="option-input option-input-1"/><input type="text" placeholder="Option 2" class="option-input option-input-2"/></div><div class="add-option button">ADD OPTION</div><div class="submit-poll button">CREATE</div><div class="close"></div></div></div></div><div class="send-media popup" style="display:none"><div class="label">SEND TO A FRIEND</div><div class="recipients"><textarea placeholder="To"></textarea></div><div class="label">ADD A MESSAGE:</div><div class="send-message"><textarea placeholder="Optional"></textarea><div class="add-comment button">SEND</div></div><div class="close"></div></div><div class="loading loading-activity"><div class="loading-spinner"></div></div><div class="overlay" style="display: none"><div class="leaving"><div>This program is over. Carry on?</div><div class="button dark no">Not yet</div><div class="button dark yes">Let\'s go</div></div></div>'+
(a.Zm?'<div class="login-promo"><div class="title">login to xylo</div><div class="promo promo-1" style="margin-top: 10px;"><div class="promo-pic"><img src="/static/img/promo1.jpg"></div><div class="promo-text">Watch and chat live with friends.</div></div><div class="promo flip promo-2"><div class="promo-pic"><img src="/static/img/promo2.jpg"></div><div class="promo-text">See latest tweets and vote on stories.</div></div><div class="promo promo-3"><div class="promo-pic"><img src="/static/img/promo3.jpg"></div><div class="promo-text">Discuss, share, and save favorites.</div></div><div class="fb-login"><div class="power"><div class="bg"></div></div><div class="login-label">'+
(a.kc?"Login to discuss":"Login")+'</div><div class="with-fb">with facebook</div><div class="waitlist">You\'re on the waitlist</div><div class="login-loading">Loading</div><div class="error"></div><div class="message">We can\'t post on your behalf!</div></div></div>':"")+"</div>"}function kj(a){return'<div class="viewer" name="'+J(a.Ke)+'"><img src="'+J(a.m.O)+'"></div>'}
function lj(a){return'<div class="tweet" id="'+J(a.prefix)+"-"+J(a.gc.id)+'">'+(a.gc.m?'<a href="#user:'+J(a.gc.m.id)+'"><img src="'+J(a.gc.O)+'"/></a>':'<img src="'+J(a.gc.O)+'"/>')+'<div class="text"><a class="handle" target="_blank" href="http://www.twitter.com/'+J(a.gc.handle)+"/status/"+J(a.gc.id)+'">'+J(a.gc.handle)+"</a> "+a.text+'</div><div class="timestamp">'+J(a.timestamp)+'</div><div class="tweet-options"><div class="reply"></div></div></div>'}
function mj(a){return'<div class="comment'+(a.X.M?" reply":"")+'" '+(a.X.id?'id="'+J(a.prefix)+"-"+J(a.X.id)+'"':"")+">"+(!a.X.M?'<a href="#user:'+J(a.X.m.id)+'"><div class="user-picture" style="background:'+J(a.X.m.color)+'"><img src="'+J(a.X.m.O)+'"/></div></a>':"")+'<div class="template"><a class="user" href="#user:'+J(a.X.m.id)+'">'+J(a.X.m.name)+'</a>  <div class="text">'+a.text+'<div class="comment-options">'+(a.$k?'<div class="remove"></div> ':"")+'<div class="reply"></div></div></div><div class="timestamp">'+
J(a.X.rb)+'</div><div class="replies"></div>'+(!a.X.M?'<div class="reply-input"><textarea class="reply-textarea" rows="1" placeholder="reply..."></textarea></div>':"")+"</div></div>"}
function nj(){return'<div class="comment-input"><div class="textarea-holder"><div class="input-holder"><div class="highlighter"></div><textarea class="comment-textarea" rows="1" placeholder="Add to the conversation..."></textarea><div class="suggestions" style="display:none"></div></div></div><div class="comment-controls"><div class="comment-toggle tweet-toggle"><div class="icon"></div></div><div class="comment-toggle fb-toggle"><div class="icon"></div></div></div><div class="comment-button add-comment">ADD</div><div class="popup top" style="display:none"><div class="comment-oob">Click <div class="fb-icon"></div> and <div class="twitter-icon"></div> for instant sharing<div class="on-off"><div class="off">OFF <div class="twitter-icon"></div></div> &#8594; <div class="on">ON <div class="twitter-icon on"></div></div></div></div></div></div>'}
function oj(a){var b='<div class="activity'+(1<a.P.length?" digest":"")+'">';if(1<a.P.length){for(var b=b+('<div class="template"><span>'+J(a.P.length)+" friends </span>"+(a.Fl?"watched":"are watching")+(a.W?' <a href="#channel:'+J(a.W.id)+'">'+J(a.W.name)+"</a>":"")+'<div class="timestamp">'+J(a.time)+'</div></div><div class="users">'),c=a.P,d=c.length,e=0;e<d;e++)var g=c[e],b=b+('<a href="#user:'+J(g.id)+'"><div class="picture" style="background:'+J(g.color)+'"><img src="'+J(g.O)+'"/></div></a>');
b+="</div>"}return b+=(1==a.P.length?'<a href="#user:'+J(a.P[0].id)+'"><div class="picture" style="background:'+J(a.P[0].color)+'"><img src="'+J(a.P[0].O)+'"/></div></a><div class="template"><a class="user" href="#user:'+J(a.P[0].id)+'">'+J(a.P[0].name)+"</a> "+(a.Fl?"watched":"is watching")+(a.W?' <a href="#channel:'+J(a.W.id)+'">'+J(a.W.name)+"</a>":"")+'<div class="timestamp">'+J(a.time)+"</div></div>":"")+'<div class="medias"></div></div>'}
function pj(a){for(var b='<div class="comment activity'+(1<a.yb.length?" digest":"")+'">'+(1<a.yb.length?'<div class="template">'+(1==a.P.length?'<a class="user" href="#user:'+J(a.P[0].id)+'">'+J(a.P[0].name)+' </a> discussed <a class="title" href="#info:'+J(a.media.id)+'">'+J(a.media.name)+"</a>.":"<span>"+J(a.P.length)+' friends </span> discussed <a class="title" href="#info:'+J(a.media.id)+'"> '+J(a.media.name)+"</a>.")+"</div>":""),a=a.yb,c=a.length,d=0;d<c;d++)var e=a[d],b=b+('<div class="comment"><a href="#user:'+
J(e.m.id)+'"><div class="picture" style="background:'+J(e.m.color)+'"><img src="'+J(e.m.O)+'"/></div></a><div class="template"><a class="user" href="#user:'+J(e.m.id)+'">'+J(e.m.name)+'</a>  <div class="text">'+e.text+'</div><div class="timestamp">'+J(e.rb)+"</div></div></div>");return b+'<div class="medias"></div></div>'}
function qj(a){var b='<div class="like activity'+(1<a.P.length?" digest":"")+'">';if(1<a.P.length){for(var b=b+('<div class="template"><span>'+J(a.P.length)+' friends </span>liked<div class="timestamp">'+J(a.time)+'</div></div><div class="users">'),c=a.P,d=c.length,e=0;e<d;e++)var g=c[e],b=b+('<a href="#user:'+J(g.id)+'"><div class="picture" style="background:'+J(g.color)+'"><img src="'+J(g.O)+'"/></div></a>');b+="</div>"}return b+=(1==a.P.length?'<a href="#user:'+J(a.P[0].id)+'"><div class="picture" style="background:'+
J(a.P[0].color)+'"><img src="'+J(a.P[0].O)+'"/></div></a><div class="template" style="top:10px;margin-bottom:30px"><a class="user" href="#user:'+J(a.P[0].id)+'">'+J(a.P[0].name)+"</a> liked "+(1<a.Hk?J(a.Hk)+" stories":"")+'<div class="timestamp">'+J(a.time)+"</div></div>":"")+'<div class="medias"></div></div>'}
function rj(a){return'<div class="list-info"><div class="picture-cell" '+(a.Lb?'style="display:table-cell"':"")+">"+(a.link?'<a href="'+J(a.link)+'" target="_blank">':"")+'<div class="picture"><img class="thumb" src="'+J(a.Lb)+'"></div>'+(a.link?"</a>":"")+'</div><div class="description" style="display:table-cell">'+a.description+"</div></div>"}function sj(a){return'<li class="'+J(a.className)+' tab"><div class="label">'+J(a.name)+"</div></li>"}
function tj(a){return'<div class="admin"><div class="scrollable ios-scroll"><div class="search"><input type="text" class="input" '+(a.ok?'placeholder="'+J(a.ok)+'"':"")+'/></div><div class="results"></div><div class="section" style="display:none"><div class="label">CHANNELS</div><div class="admin-channels"></div></div><div class="section" style="display:none"><div class="label">CURRENT TOPICS</div><div class="topics"></div></div><div class="section" style="display:none"><div class="label">COLLECTIONS</div><div class="collections"></div></div><div class="scroll-area"></div>'}
function uj(){return'<div class="admin-list admin"><div class="search"><input class="input" type="text" placeholder="Paste video or playlist link" /></div><div class="tabbed pending"><ul class="tabs"><li class="tab pending"><div class="label">PENDING</div></li><li class="tab all"><div class="label">ALL</div></li><li class="tab playlists"><div class="label">PLAYLISTS</div></li><li class="tab publishers"><div class="label">PUBLISHERS</div></li><li class="tab categories"><div class="label">CATEGORIES</div></li></ul><div class="pending-content content pending"></div><div class="all-content content all"></div><div class="playlists-content content playlists"></div><div class="publishers-content content publishers"></div><div class="categories-content content categories"><div class="label">GUIDE CATEGORIES</div><div class="categories-list"></div><div class="label">FEED IDS</div><div class="feed-ids"></div><div class="label">FEED CATEGORIES</div><div class="feed-cats"></div></div><div class="spinner" style="display:none"></div></div>'}
function vj(a){return'<div class="playlist"><div class="title">'+J(a.name)+'</div><div class="controls"><div class="remove dark button">x</div></div></div>'}function wj(a){return'<div class="category button">'+J(a.name)+"</div>"}function xj(a){return'<div class="publisher">'+(a.O?'<img src="'+J(a.O)+'"/>':"")+'<div class="title">'+J(a.name)+'</div><div class="controls"><div class="remove dark button">x</div></div></div>'}
function yj(a){return'<div class="channel '+(a.W.ob?"on":"off")+'"><div class="title">'+J(a.W.name)+'</div><div class="controls"><div class="fetch dark button">FETCH</div><div class="program dark button">PROG.</div><div class="remove dark button">x</div><div class="on dark button">ON</div><div class="off dark button">OFF</div></div>'+(a.W.ki?'<div class="pending">'+J(a.W.ki)+"</div>":"")+"</div>"}
function zj(a){return'<div class="collection"><div class="title">'+J(a.kh.name)+'</div><div class="controls">'+(a.kh.ki?'<div class="pending">'+J(a.kh.ki)+"</div>":"")+'<div class="fetch dark button">FETCH</div><div class="button dark remove">x</div></div></div>'}
function Aj(a){return'<div class="tabbed '+(a.Xh?"inbox":"messages")+'"><ul class="tabs">'+(a.Xh?'<li class="tab inbox"><div class="label">INBOX</div></li>':'<li class="tab messages"><div class="label">MESSAGES</div></li>')+'<li class="tab activity"><div class="label">ACTIVITY</div></li><li class="tab starred"><div class="label"><div class="heart"></div>\'d</div></li></ul>'+(a.Xh?'<div class="inbox-content content inbox"><div class="label">NOTIFICATIONS</div><div class="notifications-content content notifications"><div class="loading loading-activity"><div class="loading-spinner"></div></div></div><div class="label messages-label">MESSAGES<div class="label show-all"><a href="#friendlist:1">ALL FRIENDS &gt;</a></div></div><div class="messages-content content messages"><div class="loading loading-activity"><div class="loading-spinner"></div></div></div></div>':
'<div class="messages-content content messages"><div class="loading loading-activity"><div class="loading-spinner"></div></div></div>')+'<div class="activity-content content activity"><div class="loading loading-activity"><div class="loading-spinner"></div></div></div><div class="starred-content content starred"><div class="loading loading-starred"><div class="loading-spinner"></div></div></div><div class="spinner" style="display:none"></div></div>'}
function Bj(){return'<div class="tabbed"><ul class="tabs"><li class="tab comments"><div class="label">CONVERSATION</div></li><li class="tab tweets"><div class="label">TWEETS</div></li></ul><div class="comments-content content comments-holder"><div class="loading loading-activity"><div class="loading-spinner"></div></div></div><div class="tweets-content content tweet-holder"><div class="loading loading-starred"><div class="loading-spinner"></div></div></div></div>'}
function Cj(a){return'<div class="list-media show"><div class="media"><div class="preview"><div class="thumb" style="background-image:url('+J(a.media.Lb)+"); background-position: 50% "+J(a.media.le)+'%"></div><div class="title">'+J(a.media.name)+'</div><div class="stats"><div class="comment-count"><div class="icon"></div>'+J(a.media.Bd)+'</div><div class="like-count"><div class="icon"></div>'+J(a.media.Vm)+'</div></div></div></div><div class="publisher">'+(a.media.wa?'<img src="'+J(a.media.wa.O)+
'"><div class="name">'+J(a.media.wa.name)+"</div>":"")+'<div class="list-play"><div class="icon"></div></div><div class="list-plus"><div class="icon"></div></div></div></div>'}
function Dj(a){return'<div class="admin-media list-media"><div class="media"><div class="preview"><div class="thumb" style="background-image:url('+J(a.media.Lb)+"); background-position: 50% "+J(a.media.le)+'%"></div><div class="title">'+J(a.media.name)+'</div><div class="published">'+J(a.Ac)+'</div><div class="play"></div><div class="approve"></div><div class="remove"></div><div class="repos"></div></div></div><div class="publisher"><img src="'+J(a.media.wa.O)+'"><div class="name">'+J(a.media.wa.name)+
'</div><div class="duration">'+J(a.media.duration)+' seconds</div></div><div class="description">'+J(a.media.description)+"</div></div>"}function Ej(a){return'<div class="option"><div class="percent"></div><div class="name">'+J(a.name)+'</div><div class="percent-number">'+J(a.Fn)+"</div></div>"};function Fj(){R.call(this);this.sc={};this.tc=0;this.Wb=l;this.Z=new Hi("Search YouTube");this.ra=new Ef("Search");wf(this.ra,16,j)}u(Fj,R);m=Fj.prototype;
m.u=function(a){Fj.f.u.call(this,a);this.Z.j(C("search-input"));this.ra.j(C("search-icon"));this.Hg=C("search-results");this.Eg=D("result-medias",this.b());this.Dg=D("result-channels",this.b());this.jh=C("clear-icon");var a=new gf(this.Z.b()),b=new Ih(function(){if(this.Z.v()){var a=hj.a(),b=this.Z.v(),e=s(this.ln,this);X("https://www.googleapis.com/youtube/v3/search?q="+b+"&type=channel,playlist&part=snippet&maxResults=3&key=AIzaSyAUF3ESL0wYUuSWmOezgZclQFpNGZNBePw",s(function(a){a=Y(a.target);this.sj=
Ra(a.items,function(a){return{playlist_id:a.id.playlistId,channel_id:a.id.channelId,name:a.snippet.title,thumbnail:a.snippet.thumbnails["default"].url}},this);e&&e(this.sj)},a));hj.a().search(this.Z.v(),s(this.yn,this));O(this.jh,j);y(this.b(),"show")}else this.Eg.innerHTML="",this.Dg.innerHTML="",this.Wb=l,B(this.Hg,"no-medias",j)},1E3,this);P(P(P(P(this.h(),this.b(),"click",s(function(){vf(this.ra,j);this.Wb&&y(this.b(),"show")},this)),a,"key",s(function(a){a.stopPropagation();b.Vf()},this)),this.jh,
"click",s(function(){this.Z.Ka("");z(this.b(),"show");vf(this.ra,l);O(this.jh,l);this.Eg.innerHTML="";this.Dg.innerHTML="";this.Wb=l;B(this.Hg,"no-medias",j)},this)),window,"click",s(function(a){df(this.ra)&&(xc(a.target,"search")||L(s(function(){z(this.b(),"show");vf(this.ra,l)},this)))},this))};m.ln=function(a){this.Dg.innerHTML="";this.Wb=!!a.length||this.Wb;B(this.Hg,"no-medias",!this.Wb);v(a,function(a){this.Oc(a)},this)};
m.yn=function(a){this.Eg.innerHTML="";this.Wb=!!a.length||this.Wb;B(this.Hg,"no-medias",!this.Wb);v(a,function(a){this.Pb(a)},this)};
m.Pb=function(a){var b=H(Cj,{media:a}),c=D("list-play",b),d=D("list-plus",b);this.Eg.appendChild(b);P(P(P(this.h(),b,"click",s(function(b){b.preventDefault();b.stopPropagation();Z.a().c(Hg,a)},this)),c,"click",s(function(b){b.preventDefault();b.stopPropagation();z(this.b(),"show");b=ig(a);V.a().c(Mf,b)},this)),d,"click",function(b){b.preventDefault();b.stopPropagation();Rf().c(sg,a,j)})};
m.Oc=function(a){var b=H(ij,{name:a.name,Pi:a.thumbnail});this.Dg.appendChild(b);P(this.h(),b,"click",s(function(c){c.preventDefault();c.stopPropagation();y(b,"loading");X("/_ytchannel",s(function(c){c=Y(c.target);a=U.a().Ef(c.channel);v(c.programs,function(b){b=new hg(b);a.c(rg,b)},this);U.a().c(If,a);z(b,"loading")},this),"POST","&name="+a.name+(!S.a().d.w?"&token="+Gj.a().Ao:"")+(a.channel_id?"&channel_id="+a.channel_id:"")+(a.playlist_id?"&playlist_id="+a.playlist_id:""))},this))};function Z(){M.call(this)}u(Z,M);ka(Z);var Hg="media-info",Jg="profile";function Hj(){Gc.call(this);this.Pe=[];this.so=[];this.kf=[]}u(Hj,hd);m=Hj.prototype;m.uk=l;m.vk=l;m.Lh=l;m.sl=ca("Gg");m.init=function(){if(!this.Lh){for(var a,b=0;a=this.Pe[b];b++)Ij(this,a);this.Lh=j}};function Ij(a,b){a.uk&&(K(b.element,"mousedown",b.Lk,l,b),a.Li&&y(b.element,a.Li));a.vk&&a.Oi&&y(b.element,a.Oi)}
m.td=function(a,b){if(!this.Pa)if(this.Pa=b,this.dispatchEvent(new Jj("dragstart",this,this.Pa))==l)this.Pa=k;else{var c=b.Dd,d=this.Pf(c);this.cm&&y(d,this.cm);this.Jd=d;d=ac(c);d.body.appendChild(this.Jd);var e=this.Jd,g=$d(c),c=je(c,"margin");g.x-=2*(c.left||0);g.y-=2*(c.top||0);e.style.position="absolute";e.style.left=g.x+"px";e.style.top=g.y+"px";this.q=new oe(e);this.q.sl(this.Gg);K(this.q,"drag",this.Mk,l,this);K(this.q,"end",this.Zc,l,this);K(d.body,"selectstart",this.Bl);this.ke=[];for(d=
0;c=this.so[d];d++)for(var i,e=0;i=c.Pe[e];e++)for(var g=c,n=[i.element],r=this.ke,x=0;x<n.length;x++){var F=n[x],I=$d(F),ba=Q(F),I=new Nd(I.y,I.x+ba.width,I.y+ba.height,I.x);r.push(new Kj(I,g,i,F));Lj(this,I)}this.ec||(this.ec=new Nd(0,0,0,0));for(d=0;c=this.kf[d];d++)c.mh=[],c.ll=c.g.scrollLeft,c.ml=c.g.scrollTop,e=$d(c.g),g=Q(c.g),c.da=new Nd(e.y,e.x+g.width,e.y+g.height,e.x);for(d=0;g=this.ke[d];d++)for(e=0;c=this.kf[e];e++)oc(c.g,g.g)&&(c.mh.push(g),g.jf=c);this.Nc=k;for(d=0;c=this.kf[d];d++)K(c.g,
"scroll",this.zj,l,this);this.q.td(a);a.preventDefault()}};
m.Zc=function(a){var b=a.bm?k:this.Nc;if(b&&b.Ma){var c=a.clientX,a=a.clientY,d=zc(Zb(this.Jd)),e=c+d.x,d=a+d.y,g;this.qf&&(g=this.qf(b.Zb,b.da,e,d));this.dispatchEvent(new Jj("drag",this,this.Pa,b.Ma,b.Zb,b.g,c,a,e,d));b.Ma.dispatchEvent(new Jj("drop",this,this.Pa,b.Ma,b.Zb,b.g,c,a,e,d,g))}this.dispatchEvent(new Jj("dragend",this,this.Pa));bd(this.q,"drag",this.Mk,l,this);bd(this.q,"end",this.Zc,l,this);bd(ac(this.Pa.Dd).body,"selectstart",this.Bl);for(b=0;c=this.kf[b];b++)bd(c.g,"scroll",this.zj,
l,this),c.mh=[];this.q.ia();jc(this.Jd);delete this.Pa;delete this.Jd;delete this.q;delete this.ke;delete this.Nc};
m.Mk=function(a){var b,c=zc(Zb(this.Jd));b=new Nb(a.clientX+c.x,a.clientY+c.y);var c=b.x,d=b.y,e=this.Nc,g;if(e){this.qf&&e.Ma&&(g=this.qf(e.Zb,e.da,c,d));if(e.da.contains(b)&&g==this.ij)return;e.Ma&&(this.dispatchEvent(new Jj("dragout",this,this.Pa,e.Ma,e.Zb,e.g)),e.Ma.dispatchEvent(new Jj("dragout",this,this.Pa,e.Ma,e.Zb,e.g,h,h,h,h,this.ij)));this.ij=g;this.Nc=k}if(this.ec.contains(b)){a:{for(var i=0;e=this.ke[i];i++)if(e.da.contains(b))if(e.jf){if(e.jf.da.contains(b)){b=e;break a}}else{b=e;break a}b=
k}if((e=this.Nc=b)&&e.Ma)this.qf&&(g=this.qf(e.Zb,e.da,c,d)),c=new Jj("dragover",this,this.Pa,e.Ma,e.Zb,e.g),c.qo=g,this.dispatchEvent(c),e.Ma.dispatchEvent(new Jj("dragover",this,this.Pa,e.Ma,e.Zb,e.g,a.clientX,a.clientY,h,h,g));else if(!e){this.Fa||(this.Fa=new Kj(this.ec.clone()));a=this.Fa.da;a.top=this.ec.top;a.right=this.ec.right;a.bottom=this.ec.bottom;a.left=this.ec.left;for(g=0;e=this.ke[g];g++)b=e.da,e.jf&&(e=e.jf.da,b=new Nd(Math.max(b.top,e.top),Math.min(b.right,e.right),Math.min(b.bottom,
e.bottom),Math.max(b.left,e.left))),e=k,c>=b.right?e=b.right>a.left?b.right:a.left:c<b.left&&(e=b.left<a.right?b.left:a.right),i=k,d>=b.bottom?i=b.bottom>a.top?b.bottom:a.top:d<b.top&&(i=b.top<a.bottom?b.top:a.bottom),e!==k&&i!==k&&(Math.abs(e-c)>Math.abs(i-d)?i=k:e=k),e===k?i!==k&&(i<=d?a.top=i:a.bottom=i):e<=c?a.left=e:a.right=e;this.Nc=10<=(a.right-a.left)*(a.bottom-a.top)?this.Fa:k}}};m.Bl=ea(l);
m.zj=function(a){for(var b=0,c;c=this.kf[b];b++)if(a.target==c.g){var d=c.ml-c.g.scrollTop,e=c.ll-c.g.scrollLeft;c.ml=c.g.scrollTop;c.ll=c.g.scrollLeft;this.Fa&&this.Nc==this.Fa&&(0<d?this.Fa.da.top+=d:this.Fa.da.bottom+=d,0<e?this.Fa.da.left+=e:this.Fa.da.right+=e);for(var g=0,i;i=c.mh[g];g++)i=i.da,i.top+=d,i.left+=e,i.bottom+=d,i.right+=e,Lj(this,i)}this.q.Yk(a)};
m.Pf=function(a){var b=a.cloneNode(j);switch(a.tagName.toLowerCase()){case "tr":return G("table",k,G("tbody",k,b));case "td":case "th":return G("table",k,G("tbody",k,G("tr",k,b)));default:return b}};function Lj(a,b){if(1==a.ke.length)a.ec=new Nd(b.top,b.right,b.bottom,b.left);else{var c=a.ec;c.left=Math.min(b.left,c.left);c.right=Math.max(b.right,c.right);c.top=Math.min(b.top,c.top);c.bottom=Math.max(b.bottom,c.bottom)}}
m.p=function(){Hj.f.p.call(this);for(var a,b=0;a=this.Pe[b];b++)this.uk&&(bd(a.element,"mousedown",a.Lk,l,a),this.Li&&z(a.element,this.Li)),this.vk&&this.Oi&&z(a.element,this.Oi),a.ia();this.Pe.length=0};function Jj(a,b,c,d,e,g,i,n,r,x,F){Oc.call(this,a);this.pp=b;this.qp=c;this.rp=d;this.tp=e;this.sp=g;this.clientX=i;this.clientY=n;this.Vp=r;this.Wp=x;this.qo=F}u(Jj,Oc);Jj.prototype.p=aa();
function Mj(a,b){Gc.call(this);this.element=C(a);this.data=b;this.N=k;this.element||f(Error("Invalid argument"))}u(Mj,hd);m=Mj.prototype;m.Dd=k;m.Lk=function(a){if(Tc(a)){var b=a.target;b&&(K(b,"mousemove",this.Zd,l,this),K(b,"mouseout",this.Zd,l,this),K(b,"mouseup",this.Wh,l,this),this.Dd=b,this.Mi=new Nb(a.clientX,a.clientY),a.preventDefault())}};m.Ig=ca("N");
m.Zd=function(a){var b=this.Dd,c="mouseout"==a.type&&a.target==b;if(5<Math.abs(a.clientX-this.Mi.x)+Math.abs(a.clientY-this.Mi.y)||c)bd(b,"mousemove",this.Zd,l,this),bd(b,"mouseout",this.Zd,l,this),bd(b,"mouseup",this.Wh,l,this),this.N.td(a,this)};m.Wh=function(){var a=this.Dd;bd(a,"mousemove",this.Zd,l,this);bd(a,"mouseout",this.Zd,l,this);bd(a,"mouseup",this.Wh,l,this);delete this.Mi;this.Dd=k};function Kj(a,b,c,d){this.da=a;this.Ma=b;this.Zb=c;this.g=d}Kj.prototype.jf=k;function Nj(){Hj.call(this)}u(Nj,Hj);function Oj(a,b){b.Ig(a);a.Pe.push(b);a.Lh&&Ij(a,b)};function Pj(a){var b={};"rel"in b||(b.rel="nofollow");"target"in b||(b.target="_blank");var c=[],d;for(d in b)b.hasOwnProperty(d)&&b[d]&&c.push(Fa(d),'="',Fa(b[d]),'" ');var e=c.join("");return a.replace(Qj,function(a,b,c,d,x){a=[Fa(b)];if(!c)return a[0];a.push("<a ",e,'href="');d?(a.push("mailto:"),c=d,d=""):(x||a.push("http://"),(d=c.match(Rj))?(c=d[1],d=d[2]):d="");c=Fa(c);d=Fa(d);a.push(c,'">',c,"</a>",d);return a.join("")})}
var Rj=/^(.*)([:;,\.?\[\]])$/,Qj=RegExp("([\\S\\s]*?)(\\b(?:mailto:)?([\\w.+-]+@[A-Za-z0-9.-]+\\.(?:com|org|net|edu|gov|aero|biz|cat|coop|info|int|jobs|mobi|museum|name|pro|travel|arpa|asia|xxx|[a-z][a-z])\\b)|\\b(?:(https?|ftp)://+|www\\.)\\w[:;,\\.?\\[\\]\\w/~%&=+#-@!]*|$)","g");function Sj(){}u(Sj,Ye);ka(Sj);m=Sj.prototype;m.Nd=aa();m.j=function(a,b){rf(a);a.Qb&=-256;wf(a,32,l);Sj.f.j.call(this,a,b);a.pd(b.value);return b};m.T=function(a){rf(a);a.Qb&=-256;wf(a,32,l);return a.kb().T("textarea",{"class":$e(this,a).join(" "),disabled:!a.isEnabled()},a.Ab||"")};m.Qc=function(a){return"TEXTAREA"==a.tagName};m.qd=ja;m.Nh=function(a){return a.isEnabled()};m.ie=ja;m.xa=function(a,b,c){Sj.f.xa.call(this,a,b,c);if((a=a.b())&&1==b)a.disabled=c};m.ub=ja;
m.pd=function(a,b){a&&(a.value=b)};m.ua=ea("goog-textarea");function Tj(a,b,c){qf.call(this,a,b||Sj.a(),c);rf(this);this.he(j);a||(this.Ab="")}u(Tj,qf);var Uj=qb||rb;m=Tj.prototype;m.Sd=l;m.lb=0;m.Dk=0;m.Kk=0;m.ik=l;m.og=l;m.Di=l;m.Ci=l;function Vj(a){return a.$e.top+a.$e.bottom+a.qj.top+a.qj.bottom}function Wj(a){var b=a.Kk,c=a.b();b&&(c&&a.og)&&(b-=Vj(a));return b}function Xj(a){var b=a.Dk,c=a.b();b&&(c&&a.og)&&(b-=Vj(a));return b}m.Ka=function(a){this.pd(String(a))};m.v=function(){return this.b().value};m.pd=function(a){Tj.f.pd.call(this,a);this.resize()};
m.ca=function(a){Tj.f.ca.call(this,a);this.b().disabled=!a};m.resize=function(){this.b()&&this.$f()};m.z=function(){Tj.f.z.call(this);var a=this.b();Pd(a,{overflowY:"hidden",overflowX:"auto",boxSizing:"border-box",MsBoxSizing:"border-box",WebkitBoxSizing:"border-box",MozBoxSizing:"border-box"});this.$e=je(a,"padding");this.qj=me(a);P(P(P(P(this.h(),a,"scroll",this.$f),a,"focus",this.$f),a,"keyup",this.$f),a,"mouseup",this.bn);this.resize()};
function Yj(a){if(!a.ik){var b=a.b().cloneNode(l);Pd(b,{position:"absolute",height:"auto",top:"-9999px",margin:"0",padding:"1px",border:"1px solid #000",overflow:"hidden"});a.kb().I.body.appendChild(b);var c=b.scrollHeight;b.style.padding="10px";var d=b.scrollHeight;a.Di=d>c;b.style.borderWidth="10px";a.Ci=b.scrollHeight>d;b.style.height="100px";100!=b.offsetHeight&&(a.og=j);jc(b);a.ik=j}var b=a.b(),c=a.b().scrollHeight,e=a.b(),d=e.offsetHeight-e.clientHeight;if(!a.Di)var g=a.$e,d=d-(g.top+g.bottom);
a.Ci||(e=me(e),d-=e.top+e.bottom);c+=0<d?d:0;a.og?c-=Vj(a):(a.Di||(d=a.$e,c+=d.top+d.bottom),a.Ci||(a=me(b),c+=a.top+a.bottom));return c}function Zj(a,b){a.lb!=b&&(a.lb=b,a.b().style.height=b+"px")}function $j(a){a=a.b();a.style.height="auto";var b=a.value.match(/\n/g)||[];a.rows=b.length+1}
m.$f=function(){if(!this.Sd){var a=l;this.Sd=j;var b=this.b(),c=this.lb;if(b.scrollHeight){var d=l,e=l,g=Yj(this),i=b.offsetHeight,n=Wj(this),r=Xj(this);n&&g<n?(Zj(this,n),d=j):r&&g>r?(Zj(this,r),b.style.overflowY="",e=j):i!=g?Zj(this,g):this.lb||(this.lb=g);!d&&(!e&&Uj)&&(a=j)}else $j(this);this.Sd=l;a&&(a=this.b(),this.Sd||(this.Sd=j,b=l,a.value||(a.value=" ",b=j),(e=a.scrollHeight)?(g=Yj(this),d=Wj(this),i=Xj(this),!(d&&g<=d)&&!(i&&g>=i)&&(i=this.$e,a.style.paddingBottom=i.bottom+1+"px",Yj(this)==
g&&(a.style.paddingBottom=i.bottom+e+"px",a.scrollTop=0,e=Yj(this)-e,e>=d?Zj(this,e):Zj(this,d)),a.style.paddingBottom=i.bottom+"px")):$j(this),b&&(a.value=""),this.Sd=l));c!=this.lb&&this.dispatchEvent("resize")}};m.bn=function(){var a=this.b(),b=a.offsetHeight;a.filters&&a.filters.length&&(a=a.filters.item("DXImageTransform.Microsoft.DropShadow"))&&(b-=a.offX);b!=this.lb&&(this.lb=this.Kk=b)};function ak(a,b,c,d,e,g,i){R.call(this);this.Ja=Gf(S.a().d);this.xb=a;this.xg=b;this.ni=c;this.ti=d;this.gh=e.categories;this.jm=e.feed_categories;this.lm=e.feed_id;this.Si=g||k;this.Gd=i||k;this.th=this.Ja?new Nj:k;this.ad={pending:l,all:l};this.fa=["pending","all","playlists","publishers","categories"]}u(ak,R);var bk="top_rated top_favorites most_shared most_recent most_discussed most_responded recently_featured on_the_web most_viewed".split(" "),ck="All Film Autos Music Animals Sports Travel Games Videoblog People Comedy Entertainment News Howto Education Tech Nonprofit Movies Shows Shortmov".split(" ");
m=ak.prototype;
m.u=function(a){ak.f.u.call(this,a);a.innerHTML="";a.scrollTop=0;Cc(a,uj);var b=D("pending-content",a);v(this.xg,function(a){this.Pb(b,a)},this);this.Ln=D("playlists-content",a);v(this.ni,this.lj,this);this.Pn=D("publishers-content",a);v(this.ti,this.mj,this);this.Ul=D("categories-list",a);this.Oj=D("feed-ids",a);this.km=D("feed-cats",a);X("/admin/_categories",s(function(a){a=Y(a.target);v(a,function(a){dk(this,a,"category",Wa(this.gh,a.id)||!this.gh.length)},this)},this));v(ck,function(a){dk(this,a,
"feed_category",Wa(this.jm,a))},this);v(bk,function(a){dk(this,a,"feed_id",this.lm==a)},this);this.resize()};
m.z=function(){ak.f.z.call(this);this.Z=D("input",this.b());var a=new gf(this.Z),b=new Yi(this.Z);this.bb=D("tabs",this.b());this.L="pending";var c=l;P(P(P(P(this.h(),window,"resize",za(L,s(this.resize,this))),a,"key",s(function(a){"13"==a.keyCode&&ek(this,this.Z.value)},this)),b,"after_paste",s(function(){ek(this,this.Z.value)},this)),this.bb,"click",s(function(a){a=wc(a.target,"li");this.vc(a)},this));P(this.h(),this.b(),"scroll",s(function(){if(this.xb&&!c&&!this.ad[this.L]&&("pending"==this.L||
"all"==this.L)&&this.b().scrollTop+E().height>this.b().scrollHeight-this.b().clientTop){c=j;var a=D("spinner",this.b());O(a,j);var b="pending"==this.L?this.xg:this.$g;X("/admin/_media/collection/"+this.xb+"?offset="+b.length+("pending"==this.L?"&pending=1":""),s(function(g){c=l;g=mh(Fh(g.target)).medias;g=Ra(g,function(a){return new ag(a)});ab(b,g);var i=D(this.L+"-content",this.b());v(g,function(a){this.Pb(i,a)},this);this.ad[this.L]=!g.length;B(a,"finished",!g.length)},this))}},this));this.resize()};
m.resize=function(){ce(this.b(),E().height-40)};
function ek(a,b){var c;c=b.match("(?:(https?|ftp)://+|www\\.)\\w[:;,\\.?\\[\\]\\w/~%&=+#-@!]*");c=c!=k?c[0]:"";a.xb&&c&&(a.Z.disabled="disabled",X("admin/_add/collection/"+a.xb,s(function(a){this.Z.value="";this.Z.disabled="";a=Y(a.target);if("media"==a.type){var b=gg(fg.a(),a.data);Ua(this.xg,function(a){return a.id==b.id})||(this.xg.push(b),a=D("pending-content",this.b()),this.Pb(a,b,j),this.vc(cc("li","pending",h)[0]))}else if("playlist"==a.type){var c=a.data;Ua(this.ni,function(a){return a.id==
c.id})||(this.ni.push(c),this.lj(c),this.vc(cc("li","playlists",h)[0]))}else if("publisher"==a.type){var i=a.data;i&&!Ua(this.ti,function(a){return a.id==i.id})&&(this.ti.push(i),this.mj(i),this.vc(cc("li","publishers",h)[0]))}},a),"POST","url="+c))}
m.vc=function(a){v(this.fa,function(b){B(this.bb.parentElement,b,A(a,b));this.L=A(a,b)?b:this.L},this);this.xb&&!this.$g&&X("/admin/_media/collection/"+this.xb,s(function(a){a=mh(Fh(a.target)).medias;this.$g=Ra(a,function(a){return new ag(a)});var c=D("all-content",this.b());v(this.$g,function(a){this.Pb(c,a)},this)},this))};
m.lj=function(a){var b=H(vj,{name:a.name});this.Ln.appendChild(b);var c=D("remove",b);P(this.h(),c,"click",function(){X("admin/_remove/collection/"+this.xb,s(function(){jc(b)},this),"POST","pub_id="+a.id)})};m.mj=function(a){var b=H(xj,{name:a.name||a.id,O:a.picture});this.Pn.appendChild(b);var c=D("remove",b);P(this.h(),c,"click",function(){X("admin/_remove/collection/"+this.xb,s(function(){jc(b)},this),"POST","pub_id="+a.id)})};
function dk(a,b,c,d){if("category"==c){var e=H(wj,{name:b.name,id:b.id});a.Ul.appendChild(e)}else e=H(wj,{name:b,id:b}),("feed_id"==c?a.Oj:a.km).appendChild(e);B(e,"enabled",!!d);var g="category"==c?"cat_id="+b.id:"feed_id"==c?"feed_id="+b:"feed_cat="+b;P(a.h(),e,"click",function(){"feed_id"==c&&v(kc(this.Oj),function(a){z(a,"enabled")});var a=Mb(e,"enabled");X("admin/_edit/collection/"+this.xb,Ae(),"POST",g+"&enabled="+a)})}
m.Pb=function(a,b,c){var d=H(Dj,{media:b,Ac:eg(b)});c?ic(a,d,0):a.appendChild(d);this.Ja&&(a=this.th,c=new Mj(d,h),Oj(a,c));var a=new oe(D("repos",d)),e=D("thumb",d),c=D("play",d),g=D("approve",d),i=D("remove",d);a.Ee=function(a,b){var c=b-24;-50<=c&&50>=c&&Pd(e,"background-position-y",50-c+"%")};P(P(P(P(this.h(),a,"end",function(){var a=(e.style[Ma("background-position")]||"").split(" ")[1],a=a.substring(0,a.length-1);X("/admin/_posthumb",Ae(),"POST","media="+b.id+"&pos="+a)}),c,"click",s(this.Hn,
this,b)),g,"click",s(this.oj,this,b,j,d)),i,"click",s(this.oj,this,b,l,d));L(za(y,d,"show"))};m.bi=function(a,b){X("/admin/_addprogram",s(function(b){b=mh(Fh(b.target));b=new hg(b);a.c(rg,b)},this),"POST","channel="+a.id+"&media="+b.id)};m.oj=function(a,b,c){var d=a.Yl||this.xb;X("admin/_media/collection",s(function(){y(c,"remove");L(function(){jc(c)},300);N.a();var b;N.a();b=tc(C("toggle-pending"));sd(0,b-1);Z.a().c("approved",a,d)},this),"POST","col="+d+"&media="+a.id+"&approve="+b)};
m.Hn=function(a){a=ig(a);V.a().c(Mf,a)};function fk(a){R.call(this);this.Sc=a||k;this.Pg=this.tj=this.Co=this.xj=0}u(fk,R);m=fk.prototype;m.T=function(){this.g=H(tj)};m.u=function(a){fk.f.u.call(this,a);var b=H(tj,{ok:this.Sc?"Add a collection":"Add a Channel"});a.innerHTML=b.innerHTML};
m.z=function(){fk.f.z.call(this);this.Z=D("input",this.b());var a=new gf(this.Z);this.Vn=D("scrollable",this.b());this.Ba=D("admin-channels",this.b());this.Rp=D("topics",this.b());this.Qf=D("collections",this.b());this.wj=C("admin-col-list");this.nj=C("admin-list");U.a();this.Sc?X("/admin/_collections/"+this.Sc,s(function(a){a=Y(a.target);O(this.Qf.parentElement,!!a.length);v(a,this.kj,this);this.Pg&&sd(N.a(),this.Pg);this.xj=Q(this.Qf.parentElement).height;this.resize()},this)):X("/admin/_channels",
s(function(a){a=Y(a.target);O(this.Ba.parentElement,!!a.length);v(a,this.Oc,this);this.tj=Q(this.Ba.parentElement).height;this.resize()},this));P(this.h(),a,"key",s(function(a){"13"==a.keyCode&&this.Z.value&&(a=this.Z.value,this.Z.disabled="disabled",X(this.Sc?"/admin/_collections":"/admin/_channels",s(function(a){a=Y(a.target);this.Sc?(O(this.Qf.parentElement,!!a),this.kj(a)):(O(this.Ba.parentElement,!!a),this.Oc(a));this.Z.disabled="";this.Z.value=""},this),"POST","name="+a+(this.Sc?"&cid="+this.Sc:
"")))},this))};
m.Oc=function(a){var b=new qg(a),c=H(yj,{W:b});this.Ba.appendChild(c);K(c,"click",s(function(a){A(a.target,"on")||A(a.target,"off")?(B(c,"on",A(a.target,"on")),B(c,"off",!A(a.target,"on")),X("/admin/_channel/online/"+b.id,s(function(a){a.target.disabled="";a=Y(a.target);B(c,"on",a.online);B(c,"off",!a.online)},this),"POST","online="+A(a.target,"on"))):A(a.target,"program")?X("/admin/_program",Ae(),"POST","channel_id="+b.id):A(a.target,"fetch")?X("/admin/_fetch",function(){alert("Fetch began, but give it some time.")},"POST",
"channel_id="+b.id):A(a.target,"remove")&&confirm("Remove "+b.name+"?")?(O(c,l),X("/admin/_channels/"+b.id,function(a){Y(a.target).deleted?jc(c):O(c,j)},"DELETE")):((new fk(b.id)).j(this.wj),Z.a().c("navigate",this.wj,l,b.name))},this))};
m.kj=function(a){var b=H(zj,{kh:a});this.Pg+=a.pending;this.Qf.appendChild(b);K(b,"click",s(function(c){A(c.target,"remove")&&confirm("Remove "+a.name+"?")?(O(b,l),X("/admin/_collections/"+a.id,function(a){Y(a.target).deleted?jc(b):O(b,j)},"DELETE")):A(c.target,"fetch")?X("/admin/_fetch",function(){alert("Fetch began, but give it some time.")},"POST","col_id="+a.id):X("/admin/_media/collection/"+a.id+"?pending=1",s(function(b){var b=mh(Fh(b.target)),c=b.medias,c=Ra(c,function(a){return new ag(a)});
(new ak(a.id,c,b.playlists,b.publishers,b.categories)).j(this.nj);Z.a().c("navigate",this.nj,l,a.name)},this))},this));Z.a().subscribe("approved",function(c,d){if(d==a.id){var e=D("pending",b),g=tc(e)-1;0>=g?(jc(b),Kc(b)):pc(e,g)}},this)};m.resize=function(){ce(this.Vn,this.tj+this.Co+this.xj+110)};function gk(a,b,c,d,e,g){R.call(this);this.Ki=!!a;this.vd=!!d;this.Mh=!!e;this.Kf=!!b;this.cl=!!g;this.il=!!c;this.value="";this.k=new Tj(this.il?"reply...":"Add to the conversation.");this.sa=new Ef("tweet");wf(this.sa,16,j);this.ta=new Ef("post");wf(this.ta,16,j);a=S.a().d;this.Uf=a.Nn;this.Qg=a.fl;this.Pc=new Ef("add");this.yi=k;this.fc={};this.La=[];this.Da=-1;this.Te=0;this.al=this.Bo=k}u(gk,R);var hk=/@(\w+\s?\w*)/,ik=/(\w+\s?\w*)/;m=gk.prototype;m.T=function(){this.g=H(nj)};
m.u=function(a){gk.f.u.call(this,a);y(a,"decorated");var b=G("div","suggestions");a.appendChild(b);b=G("div","highlighter");a.appendChild(b)};
m.z=function(){gk.f.z.call(this);this.k.j(cc("textarea",h,this.b())[0]);var a=this.k;a.Dk=70;a.resize();var a=new gf(this.k.lc()),b=D("popup",this.b());if(!this.il&&!this.vd&&(Ue(this,this.Pc),this.Pc.j(D("add-comment",this.b())),this.Pc.ca(this.Mh),P(this.h(),this.Pc,"action",s(this.Ib,this)),this.yj=D("comment-controls",this.b())))O(this.yj,this.Ki),B(this.b(),"show-controls",this.Ki),this.yp=D("input-holder",this.b()),Ue(this,this.sa),this.sa.j(D("tweet-toggle",this.b())),S.a().d.w&&!S.a().d.cg&&
X("/_twitter",s(function(a){a=Y(a.target);this.Qg=this.Qg&&a.auth;this.Hl=a.auth_url;vf(this.sa,this.Qg)},this)),Ue(this,this.ta),this.ta.j(D("fb-toggle",this.b())),S.a().d.w&&FB.api("/me/permissions",s(function(a){this.Uf=this.Uf&&!!a.data[0].publish_stream;vf(this.ta,this.Uf)},this)),P(P(this.h(),this.ta,"action",s(this.on,this)),this.sa,"action",s(this.Dn,this)),DESKTOP&&!IPAD&&(Kg(Lg.a(),this.sa.b(),"top",{text:s(function(){return"Share on Twitter: "+(df(this.sa)?"ON":"OFF")},this)}),Kg(Lg.a(),
this.ta.b(),"top",{text:s(function(){return"Share on Facebook: "+(df(this.ta)?"ON":"OFF")},this)})),S.a().d.subscribe(lg,function(){vf(this.sa,j);S.a().d.cg=j},this);this.Kb=D("suggestions",this.b());this.Fh=D("highlighter",this.b());b&&S.a().d&&S.a().d.w&&O(b,!S.a().d.Eh&&!S.a().d.cg&&this.Ki);P(P(P(this.h(),this.k.b(),"focus",s(function(){b&&O(b,l);this.dispatchEvent("focus")},this)),a,"key",s(function(a){a.stopPropagation();vg.a().c("hide");if("13"==a.keyCode||("32"==a.keyCode||"9"==a.keyCode)&&
-1<this.Da){if(this.La.length&&this.La.reverse()[this.Da]){a.preventDefault();var b=this.k.v().slice(this.vd?this.Te:0,this.k.b().selectionStart),b=b.split(" "),b=1<b.length?b[b.length-2]+" "+b[b.length-1]:b.pop(),e=this.La[this.Da];this.fc[e.id]=e;this.vd?jk(this,b.match(ik)[0]):jk(this,b.match(hk)[0]);this.k.b().focus();O(this.Kb,l);this.La=[];this.Da=-1;b=this.k.v().length;this.setSelectionRange(b,b)}else"13"==a.keyCode&&(a.preventDefault(),this.Pc.setActive(this.k.v()),this.Ib(a));this.Kf&&jk(this)}else"27"==
a.keyCode&&this.La.length?(O(this.Kb,l),this.La=[],b=this.k.v().length,this.setSelectionRange(b,b),this.Da=-1,this.fc={}):("38"==a.keyCode||"40"==a.keyCode)&&this.La.length?(a.preventDefault(),b=Array.prototype.slice.call(kc(this.Kb)),b.reverse()[this.Da]&&z(b[this.Da],"selected"),this.Da="38"==a.keyCode?Math.min(this.Da+1,this.La.length-1):Math.max(this.Da-1,-1),-1!=this.Da&&y(b[this.Da],"selected")):L(s(function(){this.Pc.ca(this.Mh||!!this.k.v());var b=this.k.v().slice(this.vd?this.Te:0,this.k.b().selectionStart),
b=b.split(" "),b=1<b.length?b[b.length-2]+" "+b[b.length-1]:b.pop(),d=this.vd&&ik.test(b)||this.Kf&&hk.test(b);O(this.Kb,d);if("8"==a.keyCode)this.Fh.innerHTML.match('<div class="token">.*</div>$');else if(d&&(b=this.vd?b.match(ik):b.match(hk),this.La=S.a().search(b[1]),this.La.length)){var d=this.La,e=b[0];this.Kb.innerHTML="";O(this.Kb,j);v(d.slice(0,5),function(a){var b=G("div","suggestion",a.name);this.Kb.appendChild(b);P(this.h(),b,"click",s(function(){this.fc[a.id]=a;jk(this,e);this.k.b().focus();
var b=this.k.v().length;this.setSelectionRange(b,b);O(this.Kb,l);this.La=[];this.Da=-1},this))},this)}this.k.v()||this.clear();this.Kf&&jk(this)},this))},this)),this.k,"resize",s(function(a){this.dispatchEvent(a)},this));b&&P(this.h(),b,"click",s(function(){O(b,l)},this));Z.a().subscribe("reply-comment",this.xi,this);Z.a().subscribe("reply-tweet",this.Tn,this)};
function jk(a,b){var c=a.k.v(),d=c,e=c,g=Sb(a.fc);v(Rb(a.fc),function(a){var n=b&&0==Ea(b,((this.vd?"":"@")+a.name).substr(0,b.length))?b:a.name;d=d.replace(RegExp(n,"g"),'<div class="token">'+a.name+"</div> ");this.Fh.innerHTML=d;this.value=e=e.replace(RegExp(n,"g"),"@["+a.id+":"+a.name+"]");var r=RegExp(n,"g").exec(c);r&&(Xa(g,a.id),this.Te=Math.max(r.index+r[0].length,this.Te));c=c.replace(RegExp(n,"g"),a.name)+" ";b&&this.k.Ka(c)},a);v(g,function(a){Ub(this.fc,a)},a)}
m.xi=function(a,b){this.al=a.id?a.id:a.toString();this.yi=b};m.Tn=function(a){this.Fp=a.id;this.Ka((this.v()?this.v()+" ":"")+"@"+a.handle+" ");this.ab(j);this.sa.ca(j);this.ab(j);a=this.k.v().length;this.setSelectionRange(a,a)};m.setSelectionRange=function(a,b){if(this.k.b().setSelectionRange)this.k.b().focus(),this.k.b().setSelectionRange(a,b);else if(this.k.b().createTextRange){var c=this.k.b().createTextRange();c.collapse(j);c.moveEnd("character",b);c.moveStart("character",a);c.select()}};
m.v=function(){this.Kf&&Rb(this.fc).length?jk(this):this.value=this.k.v();return this.value};m.Ka=function(a,b,c){vf(this.ta,!!b);vf(this.sa,!!c);this.k.Ka(a);this.value=a;this.Pc.ca(!!a)};m.clear=function(){this.k.Ka("");this.fc={};this.La=[];this.Fh.innerHTML="";this.Kb.innerHTML="";O(this.Kb,l);this.k.resize();this.Te=0};m.gg=function(){return A(this.b(),"focused")};m.ab=function(a){a&&this.k.b().focus();return B(this.b(),"focused",a)};
m.Ib=function(){if(this.v()||this.Mh)this.dispatchEvent({type:"add",Jf:s(function(a){var b=Y(a.target);if(b.comment){var a=new kk(b.comment),c=b.tweet?new lk(b.tweet):k;if(b=gg(fg.a(),b.comment.media))b.c(bg,a),c&&b.c("add-tweet",c)}},this),Je:df(this.ta),$i:df(this.sa),text:this.v(),M:this.al,El:this.yi&&this.yi.id}),this.clear()};
m.on=function(){vg.a().c("tooltip",this.ta.b(),"top",{text:s(function(){return"Share on Facebook: "+(df(this.ta)?"ON":"OFF")},this)});!S.a().d.Eh&&(!this.Uf&&df(this.ta))&&(O(C("overlay"),j),FB.login(s(function(a){O(C("overlay"),l);this.im=!!a.authResponse;vf(this.ta,this.im)},this),{scope:"publish_stream"}))};
m.Dn=function(){vg.a().c("tooltip",this.sa.b(),"top",{text:s(function(){return"Share on Twitter: "+(df(this.sa)?"ON":"OFF")},this)});if(!S.a().d.cg&&!this.Qg&&df(this.sa))if(vf(this.sa,l),IPHONE||IPAD){var a=document.createElement("a");a.setAttribute("href",this.Hl);a.setAttribute("target","_blank");var b=document.createEvent("HTMLEvents");b.initEvent("click",j,j);a.dispatchEvent(b)}else a=window.open(this.Hl,"Twitter Login","height=300,width=550"),a.moveTo(screen.width/2-225,screen.height/2-150),
a.focus()};function kk(a){this.id=a.id;this.m=a.user?Og(S.a(),a.user):k;this.text=a.text;this.media=a.media?gg(fg.a(),a.media):k;this.time=a.time?xd(a.time+"Z"):new yd;this.rb=md(this.time.getTime());this.M=a.parent_id;this.gf=[];this.qb=l;a.replies&&v(a.replies,function(a){a=new kk(a);this.gf.push(a)},this)}
function mk(a,b,c,d,e,g,i,n){var r=new kk({text:c,parentId:g});r.m=a;r.M=g||k;fg.a().get(b).ic(r);X("/_comment",s(function(a){a=Y(a.target);r.id=a.comment.id;n&&n(r)},this),"POST","media_id="+b+"&text="+c+"&tweet="+e+"&facebook="+d+(g?"&parent_id="+g:"")+(i?"&to_user_id="+i:""));return r};function lk(a){this.id=a.id;this.m=a.user&&Og(S.a(),a.user);this.handle=a.handle;this.O=a.picture;this.text=a.text;this.time=xd(a.time+"Z")};function nk(a,b,c,d){R.call(this);this.i=a;this.zb=b||[];this.Ae={};this.wf=!!c;this.Jc=d||[];this.vf={};this.ja=this.fp=0;this.dd={}}u(nk,R);m=nk.prototype;
m.u=function(a){nk.f.u.call(this,a);a.innerHTML="";a.scrollTop=0;y(this.b(),"ios-scroll");this.D=G("div","loading",G("div","loading-spinner"));this.b().appendChild(this.D);O(this.D,l);this.hd=G("div","no-comments","Start the conversation.");this.b().appendChild(this.hd);this.s=G("div","comments tweets");this.b().appendChild(this.s);P(P(this.h(),window,"resize",za(L,s(this.resize,this))),this.s,"click",s(this.lh,this));this.zb.length?(v(this.zb,function(a){this.ic(a)},this),this.Yd=Q(this.s).height):
this.wf&&this.Jc.length?(v(this.Jc,function(a){this.xd(a)},this),this.Yd=Q(this.s).height):O(this.D,j);this.wf?(X("/_tweet/"+this.i.id+"?offset="+this.Jc.length,s(function(a){O(this.D,l);a=mh(Fh(a.target));a=Ra(a,function(a){a=new lk(a);this.xd(a);return a},this);this.Yd=Q(this.s).height;this.resize()},this)),this.i.subscribe("add-tweet",function(a){this.xd(a,j)},this)):(X("/_comment/"+this.i.id+"?offset="+this.zb.length,s(function(a){O(this.D,l);a=mh(Fh(a.target));a=Ra(a,function(a){a=new kk(a);
this.ic(a);return a},this);this.Yd=Q(this.s).height;this.resize()},this)),this.i.subscribe(bg,this.ic,this),this.i.subscribe(cg,this.wi,this));this.resize(41)};
m.xd=function(a,b){this.vf[a.id]=a;O(this.hd,l);var c=Pj(a.text),c=c.replace(/#(\S+)/g,function(a,b){return'<a target="_blank" href="http://twitter.com/search?q=%23'+b+'">'+a+"</a>"}),c=c.replace(/@(\S+)/g,function(a,b){return'<a target="_blank" href="http://twitter.com/'+b+'">'+a+"</a>"}),c=H(lj,{gc:a,text:c,timestamp:md(a.time.getTime())});nd(ld.a(),a.time,D("timestamp",c));b?ic(this.s,c,0):this.s.appendChild(c);this.resize();O(nc(this.s),j)};
m.lh=function(a){a=a.target;if(this.wf){var b=xc(a,"tweet");b&&(b=this.vf[b.id.split("-")[1]],A(a,"reply")&&Z.a().c("reply-tweet",b))}else if(b=xc(a,"comment"))b=this.Ae[b.id.split("-")[1]],A(a,"reply")?D("reply-textarea",this.dd[b.M?b.M:b.id]).focus():A(a,"remove")&&this.i.c(cg,b)};m.wi=function(a){jc(C("listcomment-"+a.id));Ya(this.zb,function(b){return b.id==a.id})};
m.ic=function(a){this.zb.push(a);O(this.hd,l);var b=Pj(a.text),b=b.replace(/@\[(\d+):([a-zA-z\s]+)\]/g,function(a,b,e){return'<a href="#user:'+b+'">'+e+"</a>"}),b=H(mj,{prefix:"listcomment",X:a,text:b,$k:a.m.id==S.a().d.id});nd(ld.a(),a.time,D("timestamp",b));a.M?D("replies",this.dd[a.M]).appendChild(b):this.s.appendChild(b);a.id&&ok(this,a,b);v(a.gf,function(a){this.ic(a)},this);a.M||(this.s.scrollTop=this.s.scrollHeight);return b};
function ok(a,b,c){a.Ae[b.id]=b;c.id="listcomment-"+b.id;if(!b.M){a.dd[b.id]=c;var d=D("reply-input",c),c=D("reply-textarea",c);P(a.h(),c,"click",s(function(){if(!A(d,"decorated")){var a=new gk(l,j,j);a.j(d);a.xi(b,b.m);P(this.h(),a,"add",s(function(a){this.Ib(a)},this))}},a))}}m.resize=function(a){this.ja=a||this.ja;ce(this.b(),E().height-42-this.ja-(xc(this.b(),"tabbed")?30:0))};function pk(a,b,c,d){R.call(this);this.i=this.o=a;this.zb=b||[];this.Jc=c||[];this.wf=!!d;this.ze=new nk(a,this.zb);this.Yi=new nk(a,h,j,this.Jc);this.k=new gk(j,j);this.fa=["comments","tweets"];this.sf={}}u(pk,R);m=pk.prototype;m.u=function(a){pk.f.u.call(this,a);y(a,"conversation");y(a,"ios-scroll");Cc(a,Bj);y(a.firstChild,this.wf?"tweets":"comments")};
m.z=function(){this.bb=D("tabs",this.b());this.ze.j(D("comments-content",this.b()));this.Yi.j(D("tweets-content",this.b()));Se(this.k,this.b());P(P(P(P(P(P(P(this.h(),this.bb,"click",s(function(a){a=wc(a.target,"li");this.vc(a)},this)),this.k,"add",s(this.Ib,this)),this.k,"resize",s(function(){A(this.b().firstChild,"comments")?this.ze.resize(41):this.Yi.resize(41)},this)),window,"click",s(function(a){!xc(a.target,"comment-input")&&!this.k.v()&&this.k.ab(l)},this)),D("no-comments",this.b()),"click",
s(this.Wk,this)),bc("no-comments",this.b())[1],"click",s(this.Wk,this)),window,"click",s(function(a){!xc(a.target,"comment-input")&&!this.k.v()&&this.k.ab(l)},this));this.ze.resize(41);this.Yi.resize(41)};m.Wk=function(a){a.preventDefault();a.stopPropagation();this.k.ab(j)};
m.Ib=function(a){var b=mk(S.a().d,this.i.id,a.text,a.Je,a.$i,a.M,a.El,s(function(a){var b=this.sf[a.time.getTime()];b.id="infocomment-"+a.id;ok(this.ze,a,b)},this)),c=this.ze.ic(b);this.sf[b.time.getTime()]=c;a.Je&&!a.M&&(FB.api("/me/feed","POST",{message:a.text,name:this.i.name,link:this.i.link,picture:this.i.Lb,caption:"on XYLO",description:this.i.description},aa()),vf(this.k.ta,l))};m.vc=function(a){v(this.fa,function(b){B(this.bb.parentElement,b,A(a,b));this.L=A(a,b)?b:this.L},this)};function qk(a,b,c,d,e){R.call(this);v(a.di,function(a){var b=a.e();b&&b.media.id==this.id?(this.Kn=a,v(a.Bf,function(a){a.oe||(this.ce[a.m.id]=a.m)})):this.ce={}},a);this.i=this.o=a;this.jg=c||k;this.yk=d||k;this.Jm=l;this.Pj=!b;this.gd=EMBED||!!e;this.Na=[];this.Af={};this.zb=[];this.Ae={};this.dd={};this.sf={};this.Jc=[];this.vf={};this.k=new gk(j,j,l,l,l,j);this.Fc=new Ef("Star");wf(this.Fc,16,j);this.xh=new Ef("Facebook");this.aj=new Ef("Twitter");this.Wa=new Ef("Play");this.od=new Ef("Send");
wf(this.od,16,j);this.Ce=new Ef("Create Poll");this.ja=0}u(qk,R);m=qk.prototype;m.T=function(){this.g=H(jj,{media:this.i,kc:EMBED})};m.u=function(a){qk.f.u.call(this,a);var b=H(jj,{media:this.i,description:this.i.description?Pj(this.i.description):"",Ac:eg(this.i),Sm:this.jg?this.jg.id:k,Zm:!S.a().d.w,kc:EMBED});a.innerHTML=b.innerHTML};
m.z=function(){qk.f.z.call(this);this.Cf=D("viewers",this.b());var a=D("picture",this.b()),b=D("ytvideo",this.b()),c=D("scrollable",this.b()),d=D("publisher",this.b()),e=D("title",this.b()),g=D("links",this.b());this.D=D("loading",this.b());var i=a.firstChild;this.oh=D("info-contents",this.b());this.Ob=D("user-poll",this.b());this.Sp=D("tweet-holder",this.b());this.Nb=D("tweets",this.b());this.Yc=D("dot-nav",this.b());this.s=D("comments",this.b());this.hd=D("no-comments",this.b());Se(this.k,this.b());
this.Fc.j(D("star",this.b()));vf(this.Fc,ng(S.a().d,this.i));this.xh.j(D("facebook",this.b()));this.aj.j(D("twitter",this.b()));this.Wa.j(D("play",this.b()));this.od.j(D("send",this.b()));this.Ce.j(D("create-poll-button",this.b()));this.Zi=new id(5E3);this.Xp=D("watch-with",this.b());this.Sb=D("create-poll",this.b());this.Dc=D("send-media",this.b());this.jb=D("fb-login",this.b());this.Xe=D("login-promo",this.b());B(this.b(),"mini",this.gd);O(this.D,S.a().d.w);O(this.Ce.b(),S.a().d.Df==mg);!this.Pj||
this.i.Qj?rk(this,l,this.i.description,this.i.Gl,this.i.lf,this.i.yb,this.i.dl):this.Pj&&this.load();if(!S.a().d.w&&(y(this.jb,"show"),y(this.Xe,"show"),y(this.b(),"logged-out"),P(this.h(),this.jb,"click",s(this.login,this)),FB.XFBML.parse(),!CHECKED_LOGIN)){CHECKED_LOGIN=j;y(this.jb,"spin");var n=this.jb;FB.getLoginStatus(function(a){"connected"===a.status?X("/_login",s(function(a){200==Eh(a.target)&&(a=Y(a.target),Ng(S.a(),a.current_user),z(n,"show"),z(n,"spin"),S.a().c("logged-in"))},this),"POST"):
z(n,"spin")})}P(P(P(P(P(P(P(P(P(P(P(P(P(P(P(P(P(P(P(P(P(P(this.h(),window,"resize",za(L,s(this.resize,this))),d,"click",s(function(){Z.a().c("media-list",this.i.wa.name,h,"/admin/_media/publisher/"+this.i.wa.id,this.i.wa.O,this.i.wa.description,this.i.wa.link,"/_publisher/"+this.i.wa.id)},this)),this.Fc,"action",s(function(){fg.a().c("star",this.i,df(this.Fc));X("/_star",h,"POST","media_id="+this.i.id+(!df(this.Fc)?"&delete=1":""))},this)),this.xh,"action",s(this.nn,this)),this.aj,"action",s(this.Cn,
this)),this.Wa,"action",s(this.sn,this)),this.od,"action",s(this.zn,this)),D("local",this.b()),"click",s(function(){O(D("link-select",this.b()),j);D("link-input",this.b()).select()},this)),this.Ce,"action",s(this.Zn,this)),this.k,"add",s(this.Ib,this)),this.hd,"click",s(function(a){a.preventDefault();a.stopPropagation();this.k.ab(j)},this)),this.k,"focus",s(function(){this.resize(0,j)},this)),this.k,"resize",s(function(){this.resize()},this)),this.Yc,"click",s(function(a){A(a.target,"dot")&&(sk(this,
a.target),this.Zi.stop())},this)),this.Zi,kd,s(function(){var a=this.De&&lc(this.De)||D("dot",this.b());L(s(function(){sk(this,a)},this))},this)),window,"click",s(function(a){!xc(a.target,"comment-input")&&!this.k.v()&&(this.k.ab(l),this.resize(0))},this)),i,"load",function(){O(i,j);L(function(){Q(i).height<Q(a).height+50&&y(i,"fix-height");Q(i).width>2*Q(a).width?y(i,"pan-left"):Q(i).height>2*Q(a).height&&y(i,"pan-top");i.style.marginTop=-Q(i).height/2+"px";i.style.marginLeft=-Q(i).width/2+"px";
y(i,"show")})}),c,"scroll",s(function(){var n=D("ytvideo",this.b()),x=IPHONE&&10<c.scrollTop?0:((this.gd?100:120)-c.scrollTop)/100;ge(d,Math.min(1,Math.max(x,0)));ge(e,Math.min(1,Math.max(x,0)));ge(g,Math.min(1,Math.max(x,0)));ge(i,Math.min(0.5,Math.max(x,0.1)));n&&ge(n,Math.min(0.5,Math.max(x,0.1)));ge(b,Math.min(0.5,Math.max(x,0.1)));B(a,"scrolled",10<c.scrollTop)},this)),this.s,"scroll",s(this.Bi,this)),this.s,"click",s(this.lh,this)),this.Nb,"click",s(this.Do,this)),D("desc-link",this.b()),"click",
s(function(){var b=Mb(a,"scrolled");(new Ke(c,[c.scrollLeft,c.scrollTop],[c.scrollLeft,b?this.gd?70:170:0],300)).play()},this));this.jg&&P(this.h(),D("prev-link",this.b()),"click",s(function(){Z.a().c(Hg,this.jg,j,h,this.k.v())},this));this.yk&&this.k.Ka(this.yk);DESKTOP&&!IPAD&&(Kg(Lg.a(),this.od.b(),"left",{text:"Send"}),Kg(Lg.a(),this.xh.b(),"left",{text:"Post to Facebook"}),Kg(Lg.a(),this.aj.b(),"left",{text:"Tweet"}),Kg(Lg.a(),this.Fc.b(),"left",{text:"Save"}),Kg(Lg.a(),D("eye-icon",this.b()),
"left",{text:"Seen by"}),Kg(Lg.a(),D("friends-icon",this.b()),"right",{text:"Visible by anybody"}));IPHONE&&new YT.Player(b,{height:"100%",width:"100%",videoId:this.i.Xb,playerVars:{controls:0,showinfo:0}});this.i.subscribe(bg,function(a){tk(this,a,j)},this);this.i.subscribe(cg,this.wi,this);this.i.subscribe("add-tweet",function(a){this.xd(a,j)},this);this.i.subscribe(dg,function(a,b,c){uk(this,a,!c)},this);V.a().subscribe(Oh,function(){z(this.Wa.b(),"play-loading")},this);V.a().subscribe("no-media",
function(){z(this.Wa.b(),"play-loading")},this);S.a().d.subscribe("set-starred",function(){vf(this.Fc,ng(S.a().d,this.i))},this);S.a().subscribe("logged-in",function(){this.Xe&&(z(this.Xe,"show"),L(s(function(){O(this.Xe,l)},this),600));this.k&&O(this.k.b(),j);this.b()&&z(this.b(),"logged-out");this.load(j)},this);this.resize()};
m.load=function(a){X("/_info/"+this.i.id,s(function(b){var c=mh(Fh(b.target)),b=c.description,d=c.seen,e=c.tweets,g=c.comments,c=c.poll;a?c&&(this.i.dl=c,D("poll-options",this.Ob).innerHTML="",vk(this,c)):rk(this,j,b,e,d,g,c)},this))};
function rk(a,b,c,d,e,g,i){O(a.D,l);c?(a.i.description=c,D("description",a.b()).innerHTML=Pj(c),O(D("scrollable",a.b()),j)):(O(D("desc-link",a.b()),l),O(D("scrollable",a.b()),l));e&&(a.Na=Ra(e,function(a){a=b?Og(S.a(),a):a;a.id!=S.a().d.id&&(O(this.Cf,j),this.Jm=j,uk(this,a,l));return a},a));Qb(a.i.ce,function(a){uk(this,a,j)},a);d&&(a.Jc=Ra(d,function(a){a=b?new lk(a):a;this.xd(a);this.De=this.Yc.firstChild;y(this.De,"selected");return a},a),d.length&&a.Zi.start());c=[];g&&(a.s&&O(a.s.parentElement,
j),O(a.hd,!g.length),c=Ra(g,function(a){a=b?new kk(a):a;a.M||tk(this,a);return a},a));i&&(vk(a,i),a.i.dl=i);a.resize();b&&(a.i.Gl=a.Jc,a.i.yb=c,a.i.lf=a.Na,a.i.Qj=j)}
m.Zn=function(){O(this.Sb,j);if(!this.Mn){var a=new Ef("CREATE");a.j(D("submit-poll",this.b()));a.ca(l);var b=D("poll-title",this.Sb),c=D("option-input-1",this.Sb),d=D("option-input-2",this.Sb),e=D("option-inputs",this.Sb);P(P(P(P(P(P(this.h(),a,"action",s(function(){O(this.Sb,l);var a;a=e.children;var c=function(a,b){var c=a+(b.value?b.value+"|":"");b.value="";return c},d=this;if(a.reduce)a=d?a.reduce(s(c,d),""):a.reduce(c,"");else{var r="";v(a,function(a){r=c.call(d,r,a)});a=r}b.value&&a&&(X("/_poll",
s(function(a){a=Y(a.target);vk(this,a)},this),"POST","media_id="+this.i.id+"&title="+b.value+"&options="+a),b.value="",O(this.Ce.b(),l))},this)),new gf(b),"key",s(function(){L(s(function(){a.ca(b.value&&c.value&&d.value)},this))},this)),new gf(c),"key",s(function(){L(s(function(){a.ca(b.value&&c.value&&d.value)},this))},this)),new gf(d),"key",s(function(){L(s(function(){a.ca(b.value&&c.value&&d.value)},this))},this)),D("add-option",this.Sb),"click",s(function(){var a=G("input",{type:"text",placeholder:"Option "+
(e.children.length+1)});e.appendChild(a)},this)),D("close",this.Sb),"click",s(function(){O(this.Sb,l)},this));this.Mn=j}};
m.login=function(){y(this.jb,"disabled");if(IPAD)return window.location.href="https://m.facebook.com/dialog/oauth?client_id="+FB_APP_ID+"&response_type=code&redirect_uri="+HOST_URL+"&scope=email",l;var a=D("message",this.jb);FB.login(s(function(b){b.authResponse?(z(a,"show"),y(this.jb,"disabled"),y(this.jb,"spin"),X("/_login",s(function(a){200==Eh(a.target)&&(a=Y(a.target),Ng(S.a(),a.current_user),z(this.jb,"show"),z(this.jb,"spin"),S.a().c("logged-in"))},this),"POST")):z(this.jb,"disabled")},this),
{scope:"email"});var b=G("a",{href:"https://www.facebook.com/dialog/oauth?client_id="+FB_APP_ID+"&response_type=code&redirect_uri="+HOST_URL+"&scope=email"},"Click here if you have a popup blocker");a.innerHTML="";a.appendChild(b);y(a,"show");P(this.h(),a,"click",function(a){a.stopPropagation();window.onbeforeunload=Ae()})};
function vk(a,b){O(a.Ce.b(),l);var c=D("status",a.Ob),d=D("poll-options",a.Ob);a.Ob.id=b.id;pc(c,b.title.toUpperCase()+" ("+b.vote_count+" VOTES)");v(b.options,function(a){var g=H(Ej,{name:a.name,Fn:a.percent+"%"});d.appendChild(g);a.voted?wk(this,b,g):P(this.h(),g,"click",s(function(){S.a().d.w&&!A(this.Ob,"voted")&&(a.vote_count+=1,b.vote_count+=1,wk(this,b,g),pc(c,b.title.toUpperCase()+" ("+b.vote_count+" VOTES)"),X("/_poll",h,"POST","id="+a.id))},this));P(this.h(),g,"click",s(function(){S.a().d.w||
Lg.a().show(g,"top","tooltip",{text:s(ea("You must login to vote"),this)})}))},a);O(a.Ob,j);S.a().d.w||(y(a.Ob,"voted"),v(kc(d),function(a,c){var d=parseInt(100*(b.options[c].vote_count/b.vote_count),10),n=parseInt(100*(b.options[c].vote_count/b.vote_count),10)+"%";pc(D("percent-number",a),n);D("percent",a).style.width=n;5<d&&(D("name",a).style.color="white");98<d&&(D("percent-number",a).style.color="white")},a))}
function wk(a,b,c){D("status",a.Ob);var d=D("poll-options",a.Ob);y(a.Ob,"voted");tc(D("name",c));y(c,"selected");v(kc(d),function(a,c){var d=parseInt(100*(b.options[c].vote_count/b.vote_count),10),n=parseInt(100*(b.options[c].vote_count/b.vote_count),10)+"%";pc(D("percent-number",a),n);D("percent",a).style.width=n;5<d&&(D("name",a).style.color="white");98<d&&(D("percent-number",a).style.color="white")},a)}m.oc=function(){return this.k.gg()||!!this.k.Bo||!!this.k.v()};
function sk(a,b){if(b){v(kc(a.Yc),function(a){return z(a,"selected")});a.De=b;y(a.De,"selected");var c=Va(kc(a.Yc),function(a){return a==b});(new Ke(a.Nb,[a.Nb.scrollLeft,a.Nb.scrollTop],[320*c,a.Nb.scrollTop],200)).play();a.resize()}}
m.Ib=function(a){var b=mk(S.a().d,this.i.id,a.text,a.Je,a.$i,a.M,a.El,s(function(a){var b=this.sf[a.time.getTime()];b.id="infocomment-"+a.id;xk(this,a,b)},this)),c=tk(this,b);this.sf[b.time.getTime()]=c;a.Je&&!a.M&&FB.api("/me/feed","POST",{message:a.text,name:this.i.name,link:this.i.link,picture:this.i.Lb,caption:"on XYLO",description:this.i.description},aa());pg.a().X(this.i.id,a.Je,a.$i)};
m.xd=function(a,b){this.vf[a.id]=a;var c=Pj(a.text),c=c.replace(/#(\S+)/g,function(a,b){return'<a target="_blank" href="http://twitter.com/search?q=%23'+b+'">'+a+"</a>"}),c=c.replace(/@(\S+)/g,function(a,b){return'<a target="_blank" href="http://twitter.com/'+b+'">'+a+"</a>"}),c=H(lj,{gc:a,text:c,timestamp:md(a.time.getTime()),prefix:"infotweet"}),d=G("div","dot");nd(ld.a(),a.time,D("timestamp",c));b?(ic(this.Nb,c,0),ic(this.Yc,d,0),10<kc(this.Nb).length&&(jc(this.Nb.lastChild),jc(this.Yc.lastChild),
sk(this,d))):(this.Nb.appendChild(c),this.Yc.appendChild(d));this.resize();O(nc(this.Nb),j)};
function tk(a,b,c){a.zb.push(b);O(a.hd,l);var d=Pj(b.text),d=d.replace(/@\[(\d+):([a-zA-z\s]+)\]/g,function(a,b,c){return'<a href="#user:'+b+'">'+c+"</a>"}),d=H(mj,{prefix:"infocomment",X:b,text:d,$k:b.m.id==S.a().d.id});nd(ld.a(),b.time,D("timestamp",d));b.M?D("replies",a.dd[b.M]).appendChild(d):a.s.appendChild(d);b.id&&xk(a,b,d);v(b.gf,function(a){tk(this,a,c)},a);!b.M&&c&&(a.s.scrollTop=a.s.scrollHeight,a.oh.firstChild.scrollTop=a.oh.firstChild.scrollHeight);return d}
function xk(a,b,c){a.Ae[b.id]=b;c.id="infocomment-"+b.id;if(!b.M){a.dd[b.id]=c;var d=D("reply-input",c),c=D("reply-textarea",c);P(a.h(),c,"click",s(function(){if(!A(d,"decorated")){var a=new gk(l,j,j,l,l,j);a.j(d);a.xi(b,b.m);P(this.h(),a,"add",s(function(a){S.a().d.w&&this.Ib(a)},this))}S.a().d.w||Lg.a().show(d,"top","tooltip",{text:s(ea("You must login to reply"),this)})},a))}}
function uk(a,b,c){if(!c&&a.Af[b.id])z(a.Af[b.id],"online");else if(b.id!=S.a().d.id){if(!a.Af[b.id]){var d=H(kj,{m:b});a.Af[b.id]=d;ic(a.Cf,d,1);P(a.h(),d,"click",function(){Z.a().c(Jg,b)});DESKTOP&&!IPAD&&Kg(Lg.a(),d,"top",{text:s(function(){return b.Ke()+(A(d,"online")?" is watching":" saw this")},a)})}O(a.Cf,j);B(a.Af[b.id],"online",c)}}m.Do=function(a){var a=a.target,b=xc(a,"tweet");b&&(b=this.vf[b.id.split("-")[1]],A(a,"reply")&&Z.a().c("reply-tweet",b))};
m.lh=function(a){var a=a.target,b=xc(a,"comment");b&&(b=this.Ae[b.id.split("-")[1]],A(a,"reply")?D("reply-textarea",this.dd[b.M?b.M:b.id]).focus():A(a,"remove")&&this.i.c(cg,b))};m.wi=function(a){jc(C("infocomment-"+a.id));Ya(this.zb,function(b){return b.id==a.id})};
m.Bi=function(){B(this.s.parentElement,"top-grad",!!this.s.scrollTop);var a=this.s.style.maxHeight,b=E().height,a=a.substring(0,a.length-2),c=Q(this.s).height;B(this.s.parentElement,"bottom-grad",this.s.scrollTop<this.s.scrollHeight-a-5&&c>=a&&640<b)};
m.resize=function(a,b){this.ja=a!=h?a:this.ja;var c=E().height;if(this.b()){var d=E().height+(IPHONE&&SAFARI?61:0)-(EMBED?-2:38)-this.ja-(xc(this.b(),"tabbed")?30:0)-(this.gd&&A(this.b(),"slide")?40:0);ce(this.b(),d);ce(this.oh,d-(this.gd?A(this.b(),"slide")?223:180:243)+(IPHONE?50:0)-(this.Na.length?38:0));640<c&&this.s&&this.s.parentElement?(Pd(this.s,"max-height",c-Wd(this.s.parentElement).y-(this.gd?213:313)-(this.Na.length?38:0)-this.ja+"px"),this.Bi()):640>c&&(Pd(this.s,"max-height",""),this.Bi());
!S.a().d.w&&!EMBED&&(c=d-(this.gd?178:198)+(IPHONE?50:0),ce(this.Xe,c),O(D("promo-1",this.b()),285<c),O(D("promo-2",this.b()),365<c),O(D("promo-3",this.b()),475<c));b&&L(s(function(){(new Ke(this.s,[this.s.scrollLeft,this.s.scrollTop],[this.s.scrollLeft,this.s.scrollHeight],400)).play()},this),0)}};
m.nn=function(){O(C("overlay"),j);FB.ui({method:"feed",name:this.i.name,link:this.i.link,O:this.i.Lb,caption:"on XYLO",description:this.i.description},function(){O(C("overlay"),l)});yk(pg.a(),this.i.id,j,l)};
m.Cn=function(){var a="https://twitter.com/share?url="+this.i.link+"&text=I'm watching "+this.i.name+" "+this.i.link;if(IPHONE||IPAD){var b=document.createElement("a");b.setAttribute("href",a);b.setAttribute("target","_blank");a=document.createEvent("HTMLEvents");a.initEvent("click",j,j);b.dispatchEvent(a)}else b=window.open(a,"Tweet","height=320,width=550"),b.moveTo(screen.width/2-225,screen.height/2-150),b.focus(),yk(pg.a(),this.i.id,l,j)};
m.sn=function(){y(this.Wa.b(),"play-loading");var a=ig(this.o);V.a().c(Mf,a)};
m.zn=function(){if(!A(this.Dc,"decorated")){var a=new gk(l,j,l,j,l,j);a.j(D("recipients",this.Dc));var b=new gk(l,l,l,l,j,j);b.j(D("send-message",this.Dc));P(P(this.h(),b,"add",s(function(c){var d=Rb(a.fc);d.length&&(v(d,function(a){var b=new Bi({from_user:S.a().d,to_user:a.id,text:c.text||"Sent you a video!",media:this.o});b.time=new yd;b.rb=md(b.time.getTime());S.a().c("new-message",b);X("/_message",c.Jf,"POST","from_id="+S.a().d.id+"&to_id="+a.id+"&text="+b.text+"&media_id="+this.o.id)},this),
a.clear(),b.clear(),vf(this.od,l),O(this.Dc,l))},this)),D("close",this.Dc),"click",s(function(){O(this.Dc,l);vf(this.od,l)},this));y(this.Dc,"decorated")}O(this.Dc,df(this.od))};function zk(a,b,c,d,e,g){R.call(this);this.Ja=Gf(S.a().d);this.Gk=a||k;this.yf=b||k;this.sc={};this.Si=c||k;this.Gd=d||k;this.Fj=g||k;this.Wm=e||k;this.th=this.Ja?new Nj:k;this.Yd=this.mk=0}u(zk,R);
zk.prototype.u=function(a){zk.f.u.call(this,a);a.innerHTML="";a.scrollTop=0;y(this.b(),"ios-scroll");(this.Gd||this.Si)&&Ak(this);!this.Gd&&this.Fj&&X(this.Fj,s(function(a){a=Y(a.target);a.description&&this.We?(D("description",this.We).innerHTML=Pj(a.description),this.mk=Q(this.We).height,this.resize()):a.description&&Ak(this)},this));this.D=G("div","loading",G("div","loading-spinner"));this.b().appendChild(this.D);O(this.D,l);A(this.b(),"starred")&&(this.ae=G("div","no-comments","Favorities will appear here."),
this.b().appendChild(this.ae));this.fd=G("div","medias");this.b().appendChild(this.fd);P(this.h(),window,"resize",za(L,s(this.resize,this)));this.yf?(O(this.D,j),X(this.yf,s(function(a){O(this.D,l);a=mh(Fh(a.target));a=Ra(a,function(a){return new ag(a)});v(a,this.Yg,this);this.Yd=Q(this.fd).height;this.resize()},this))):this.Gk&&(v(this.Gk,this.Yg,this),this.Yd=Q(this.fd).height,this.resize())};
zk.prototype.Yg=function(a){this.ae&&O(this.ae,l);var b=H(Cj,{media:a}),c=D("list-play",b),d=D("list-plus",b);this.fd.appendChild(b);if(this.Ja){var e=this.th,g=new Mj(b,h);Oj(e,g)}P(P(P(this.h(),b,"click",s(function(){Z.a().c(Hg,a)},this)),c,"click",s(function(b){b.preventDefault();b.stopPropagation();b=ig(a);V.a().c(Mf,b)},this)),d,"click",function(b){b.preventDefault();b.stopPropagation();Rf().c(sg,a,j)});this.sc[a.id]=b};
zk.prototype.resize=function(){ce(this.b(),E().height+(IPHONE&&SAFARI?61:0)-(DESKTOP?40:0)-(xc(this.b(),"tabbed")?30:0))};function Ak(a){a.We=H(rj,{Lb:a.Si,description:a.Gd?Pj(a.Gd):"",link:a.Wm});a.b().appendChild(a.We);a.mk=Q(a.We).height;a.resize()}zk.prototype.bi=function(a,b){X("/admin/_addprogram",s(function(b){b=mh(Fh(b.target));b=new hg(b);a.c(rg,b)},this),"POST","channel="+a.id+"&media="+b.id)};function Bi(a){this.id=a.id;this.Q=Og(S.a(),a.from_user);this.Vi=Og(S.a(),a.to_user);this.text=a.text;this.media=a.media?"brkn.model.Media"==la(a.media)?a.media:gg(fg.a(),a.media):k;this.qb=a.read;this.rb=(this.time=a.time?xd(a.time+"Z"):k)?md(this.time.getTime()):k}Bi.prototype.Jg=function(){X("/_message",Ae(),"POST","id="+this.id+"&read=1");this.qb=j;S.a().d.c("read-message",this.Q.id)};function Bk(a){return'<div class="message'+(a.mm?" flip":"")+'"><a href="#user:'+J(a.message.Q.id)+'"><div class="picture" style="background:'+J(a.message.Q.color)+'"><img src="'+J(a.message.Q.O)+'"/></div></a><div class="body"><a class="user" href="#user:'+J(a.message.Q.id)+'">'+J(a.message.Q.name)+'</a>  <div class="texts"><div class="text">'+J(a.message.text)+'<div class="timestamp">'+J(a.message.rb)+"</div></div></div></div></div>"}
function Ck(a){return'<div class="text">'+J(a.message.text)+'<div class="timestamp">'+J(a.message.rb)+"</div></div>"};function Dk(a,b){R.call(this);this.cb=a||k;this.Ua=b||k;this.Vh={};this.k=new gk(l);this.ja=0;this.mb=this.cb.id==S.a().d.id}u(Dk,R);
Dk.prototype.u=function(a){Dk.f.u.call(this,a);a.innerHTML="";a.scrollTop=0;this.uc=G("div","messages");this.b().appendChild(this.uc);B(this.uc,"inbox",this.mb);this.D=G("div","spinner");this.uc.appendChild(this.D);O(this.D,l);this.pg=G("div","no-comments",this.mb?"No Messages":"Start a private conversation.");this.uc.appendChild(this.pg);this.ac=G("div","no-comments","Load previous messages");this.uc.appendChild(this.ac);O(this.ac,!this.mb&&10<=this.Ua.length);O(this.pg,j);this.mb?(this.Ua=this.Ua.reverse(),
S.a().d.subscribe("read-message",function(a){if((a=this.Vh[a])&&A(a,"unread"))z(a,"unread"),Z.a().c("new-messages",-1)},this)):(Se(this.k,this.b()),P(P(P(P(P(this.h(),window,"click",s(function(a){!xc(a.target,"comment-input")&&!this.k.v()&&(this.k.ab(l),this.resize(0))},this)),this.pg,"click",s(function(a){a.preventDefault();a.stopPropagation();this.k.ab(j)},this)),this.ac,"click",s(this.Ym,this)),this.k,"add",s(this.Ib,this)),window,"resize",za(L,s(this.resize,this))));Pa(this.Ua,function(a){Ek(this,
a)},this);S.a().subscribe("new-message",function(a){if(a.Q.id!=S.a().d.id&&(a.Q.id==this.cb.id||a.Vi.id==this.cb.id)){if(this.mb){var c=j,d=this.Vh[a.Q.id];d&&(c=!A(d,"unread"),jc(d));c&&Z.a().c("new-messages",1)}Ek(this,a,this.mb);this.resize()}},this);this.resize()};
Dk.prototype.Ym=function(){this.ac&&O(this.ac,l);O(this.D,j);X("/_message/"+this.cb.id+"?offset="+this.Ua.length,s(function(a){a=Y(a.target);if(a.length){this.kg=k;var b=G("div","separator");ic(this.uc,b,3)}O(this.D,l);this.ac&&O(this.ac,!!a.length);Pa(a,function(a){a=new Bi(a);this.Ua.push(a);Ek(this,a,j);return a},this);a.length&&(this.b().scrollTop=0,this.kg=k,this.b().scrollTop=b.offsetHeight)},this))};
function Ek(a,b,c){O(a.pg,l);a.ac&&O(a.ac,!a.mb&&10<=a.Ua.length);var d,e;if(!a.mb&&a.kg&&a.kg.Q.id==b.Q.id)d=H(Ck,{message:b}),D("texts",a.zk).appendChild(d),b.media&&(e=H(Cj,{media:b.media}),D("texts",a.zk).appendChild(e)),d=D("timestamp",d);else{var g=H(Bk,{message:b,mm:b.Q.id==S.a().d.id});a.kg=b;a.zk=g;c?ic(a.uc,g,3):a.uc.appendChild(g);d=D("timestamp",g);B(g,"unread",!b.qb);if(a.mb){if(a.Vh[b.Q.id]=g,P(a.h(),g,"click",s(function(){b.qb||(b.Jg(),z(g,"unread"),Z.a().c("new-messages",-1));Z.a().c(Jg,
b.Q)},a)),c){var i=C("mp3-1");i.load();i.play()}}else b.media&&(e=H(Cj,{media:b.media}),D("texts",g).appendChild(e))}nd(ld.a(),b.time,d);c||(a.b().scrollTop=a.b().scrollHeight);!a.mb&&(!b.qb&&b.id&&Z.a().sh==b.Q.id)&&b.Jg();e&&(c=D("list-play",e),d=D("list-plus",e),P(P(P(a.h(),e,"click",s(function(){Z.a().c(Hg,b.media)},a)),c,"click",s(function(a){a.preventDefault();a.stopPropagation();a=ig(b.media);V.a().c(Mf,a)},a)),d,"click",function(a){a.preventDefault();a.stopPropagation();Rf().c(sg,b.media,
j)}))}Dk.prototype.Ib=function(a){var b=new Bi({from_user:S.a().d,to_user:Og(S.a(),this.cb),text:a.text});b.time=new yd;b.rb=md(b.time.getTime());Ek(this,b);X("/_message",a.Jf,"POST","from_id="+S.a().d.id+"&to_id="+this.cb.id+"&text="+a.text)};Dk.prototype.resize=function(a){this.mb?this.dispatchEvent("resize"):(this.ja=a||this.ja,ce(this.b(),E().height+(IPHONE&&SAFARI?61:0)-(DESKTOP?40:0)-42-this.ja-(xc(this.b(),"tabbed")?30:0)))};function Fk(a){this.id=a.id;this.m=Og(S.a(),a.user);this.type=a.type;this.X=a.comment?new kk(a.comment):k;this.qb=a.read;this.rb=(this.time=a.time?xd(a.time+"Z"):k)?md(this.time.getTime()):k}Fk.prototype.Jg=function(){X("/_notification",Ae(),"POST","id="+this.id+"&read=1");this.qb=j};function Gk(a){return'<div class="notification"><a href="#user:'+J(a.Q.id)+'"><div class="picture" style="background:'+J(a.Q.color)+'"><img src="'+J(a.Q.O)+'"/></div></a><div class="body"><div class="type"><a class="user" href="#user:'+J(a.Q.id)+'">'+J(a.Q.name)+"</a> "+("reply"==a.$h.type?"replied to your comment":"")+("mention"==a.$h.type?"mentioned you in a comment":"")+'</div><div class="texts"><div class="text">'+J(a.text)+'<div class="timestamp">'+J(a.$h.rb)+"</div></div></div></div></div>"}
;function Hk(a){R.call(this);this.jd=a;this.Pk={};this.Xd={};this.ja=0}u(Hk,R);
Hk.prototype.u=function(a){Hk.f.u.call(this,a);a.innerHTML="";a.scrollTop=0;this.Ye=G("div","notifications");this.b().appendChild(this.Ye);this.D=G("div","spinner");this.Ye.appendChild(this.D);O(this.D,l);this.Zh=G("div","no-comments","No Notifications");this.Ye.appendChild(this.Zh);O(this.Zh,!this.jd.length);v(this.jd,function(a){Ik(this,a)},this);this.dispatchEvent("resize");S.a().subscribe("new-notification",function(a){Ik(this,a,j);Z.a().c("new-messages",1);this.dispatchEvent("resize")},this)};
function Ik(a,b,c){if(b.X){O(a.Zh,l);var d,e=b.X.text.replace(/@\[(\d+):([a-zA-z\s]+)\]/g,function(a,b,c){return c}),e=H(Gk,{$h:b,text:e,Q:b.X.m});c?ic(a.Ye,e,2):a.Ye.appendChild(e);a.Pk[b.id]=e;d=a.Xd[b.X.media.id]||[];d.push(b);a.Xd[b.X.media.id]=d;d=D("timestamp",e);B(e,"unread",!b.qb);P(a.h(),e,"click",s(function(){b.qb||v(this.Xd[b.X.media.id]||[],function(a){a.Jg();Z.a().c("new-messages",-1);(a=this.Pk[a.id])&&z(a,"unread")},this);Z.a().c(Hg,b.X.media)},a));nd(ld.a(),b.time,d);c?(a=C("mp3-4"),
a.load(),a.play()):a.b().scrollTop=a.b().scrollHeight}};function Jk(a){return'<div class="user'+(a.media?" media":"")+'"><div class="name">'+J(a.m.name)+'</div><div class="picture" style="background:'+J(a.m.color)+'"><img src="'+J(a.m.O)+'"/></div>'+(a.timestamp?'<div class="timestamp">'+J(a.timestamp)+"</div>":"")+(a.media?'<div class="media"><div class="watched">LAST WATCHED </div><div class="watching">NOW WATCHING </div><a class="media-link">'+J(a.media.name)+"</a></div>":"")+"</div>"};function Kk(a,b){R.call(this);this.qe=a||k;this.Sg={};this.kd=[];this.be=[];this.cc=[];this.dc=!!b;this.ja=0}u(Kk,R);
Kk.prototype.u=function(a){Kk.f.u.call(this,a);a.innerHTML="";a.scrollTop=0;y(a,"friendlist");y(a,"ios-scroll");this.dc||(a=G("div","label show-all",G("a",{href:"#friendlist:1"},"ALL FRIENDS >")),this.b().appendChild(a));this.tg=G("div","label online-friends-label",this.dc?"ONLINE FRIENDS":G("a",{href:"#friendlist:1"},"ONLINE FRIENDS"));O(this.tg,l);this.b().appendChild(this.tg);this.gi=G("div","online-friends");this.b().appendChild(this.gi);this.ef=G("div","label",this.dc?"RECENTLY ONLINE":G("a",
{href:"#friendlist:1"},"RECENTLY ONLINE"));O(this.ef,l);this.b().appendChild(this.ef);this.df=G("div","recent-friends");this.b().appendChild(this.df);this.dc&&(this.rg=G("div","label","OFFLINE FRIENDS"),O(this.rg,l),this.b().appendChild(this.rg),this.ai=G("div","offline-friends"),this.b().appendChild(this.ai),this.dc&&this.resize(),P(this.h(),window,"resize",s(function(){this.dc&&L(s(function(){this.resize()},this))},this)));if(this.qe)Na.sort.call(this.qe,function(a,b){return a.H&&!b.H?1:!a.H&&b.H?
-1:!a.H&&!b.H?0:a.H.getTime()<b.H.getTime()?1:-1}||eb),v(this.qe,function(a){Lk(this,a)},this),O(this.b(),j);else{var a=S.a(),b=s(function(a){this.qe=a;Na.sort.call(this.qe,function(a,b){return a.H&&!b.H?1:!a.H&&b.H?-1:!a.H&&!b.H?0:a.H.getTime()<b.H.getTime()?1:-1}||eb);v(this.qe,function(a){Lk(this,a)},this);O(this.b(),j)},this);a.Uj?b&&b(a.Bh):X("/_friends",s(function(a){a=Y(a.target);this.Bh=Ra(a,function(a){return Og(this,a)},this);this.Uj=j;b&&b(this.Bh)},a))}S.a().subscribe(Mg,this.Eo,this)};
function Lk(a,b){if(!a.Sg[b.id]){var c=l,d=b.H?md(b.H.getTime()):k,e=H(Jk,{m:b,timestamp:d,media:b.Tb});b.H&&432E5>t()-b.H.getTime()&&nd(ld.a(),b.H,D("timestamp",e));b.ob?(O(a.tg,j),y(e,"online"),v(a.kd,function(a,d){a.Ke()>b.Ke()&&(ic(this.gi,e,d),cb(this.kd,d,0,b),c=j)},a),c||(a.gi.appendChild(e),a.kd.push(b))):d&&(3>a.cc.length||a.dc)?(v(a.cc,function(a,d){a.H&&(b.H&&a.H.getTime()<b.H.getTime())&&(ic(this.df,e,d),cb(this.cc,d,0,b),c=j)},a),c||(a.df.appendChild(e),a.cc.push(b)),O(a.ef,j),O(a.df,
j)):a.dc&&(!Ua(a.cc,function(a){return b.id==a.id})&&!Ua(a.be,function(a){return b.id==a.id}))&&(O(a.rg,j),v(a.be,function(a,d){a.H&&(b.H&&a.H.getTime()<b.H.getTime())&&(ic(this.ai,e,d),cb(this.be,d,0,b),c=j)},a),c||(a.ai.appendChild(e),a.be.push(b)));a.dc||(O(a.ef,!a.kd.length&&a.cc.length),O(a.df,!a.kd.length&&a.cc.length));a.Sg[b.id]=e;d=D("media-link",e);P(a.h(),e,"click",s(function(){Z.a().c(Jg,b)},a));d&&P(a.h(),d,"click",s(function(a){a.stopPropagation();a.preventDefault();Z.a().c(Hg,b.Tb)},
a))}}Kk.prototype.Eo=function(a){var b=this.Sg[a.id];b&&(jc(b),Ub(this.Sg,a.id),Ya(this.be,function(b){return b.id==a.id})&&O(this.rg,!!this.be.length),Ya(this.kd,function(b){return b.id==a.id})&&O(this.tg,!!this.kd.length),Ya(this.cc,function(b){return b.id==a.id})&&O(this.ef,!!this.cc.length));Lk(this,a)};Kk.prototype.resize=function(a){this.ja=a||this.ja;ce(this.b(),E().height+(IPHONE&&SAFARI?61:0)-42-this.ja-(xc(this.b(),"tabbed")?30:0))};function Mk(a,b){R.call(this);this.Xg=a;this.pe=b||k;this.B=0;this.ul=!b;this.ad=l;this.Rj={};this.Lf={};this.Wd={};this.ed={};this.ej={};this.hl={};this.jj=[]}u(Mk,R);
Mk.prototype.u=function(a){Mk.f.u.call(this,a);a.innerHTML="";a.scrollTop=0;y(a,"stream");y(a,"ios-scroll");this.ul&&(this.Ah=G("div","friendlist"),O(this.Ah,l),this.b().appendChild(this.Ah),a=G("div","label","ACTIVITY"),this.b().appendChild(a));this.ue=G("div","activities");this.b().appendChild(this.ue);this.D=G("div","spinner");this.b().appendChild(this.D);O(this.D,l);this.ae=G("div","no-comments",this.pe==S.a().d.id?"Your activity will appear here":"Friends' activity will appear here");this.b().appendChild(this.ae);
this.Xg&&this.Xg.length&&Nk(this,this.Xg);this.ul&&(this.zh=new Kk(h,l),this.zh.j(this.Ah));S.a().subscribe("new-activity",function(a){(this.pe==a.user.id||!this.pe&&a.user.id!=S.a().d.id)&&Ok(this,a,h,h,j)},this);P(P(this.h(),this.b(),"scroll",s(function(){!this.ad&&this.b().scrollTop+E().height>this.b().scrollHeight-60&&Pk(this)},this)),window,"resize",za(L,s(this.resize,this)));this.resize()};
function Pk(a){O(a.D,j);X("/_activity"+(a.pe?"/"+a.pe:"")+"?offset="+a.B,s(function(a){this.Rj[String(a.target.Ue)]||(this.Rj[String(a.target.Ue)]=j,a=Y(a.target).activities,this.ad=!a.length,B(this.D,"finished",this.ad),O(this.D,this.ad),Nk(this,a))},a))}
function Nk(a,b){a.Lf=[];a.Wd=[];a.ed=[];v(b,function(a){this.B++;switch(a.type){case "session":var a=a.session,b=Wb(this.Lf,a.channel_id,[]);b.push(a);this.Lf[a.channel_id]=b;break;case "liked":this.Wd[a.media.id]||(b=Wb(this.ed,a.media.id,[]),b.push(a),this.ed[a.media.id]=b,b=Wb(this.ej,a.user.id,[]),b.push(a),this.ej[a.user.id]=b);break;case "comment":a=a.comment,b=Wb(this.Wd,a.media.id,[]),b.push(a),this.Wd[a.media.id]=b,this.ed[a.media.id]&&Ub(this.ed,a.media.id)}},a);Qb(a.Lf,function(a){Ok(this,
h,a,"session")},a);Qb(a.Wd,function(a){Ok(this,h,a,"comment")},a);Qb(a.ed,function(a){1<a.length&&Ok(this,h,a,"liked")},a);Qb(a.ej,function(a){Ok(this,h,a,"liked")},a)}
function Ok(a,b,c,d,e){O(a.ae,l);var b=b||k,c=c||k,g=b?b.type:d,i=[],n=b?[Og(S.a(),b.user)]:[],r=b?xd(b.time+"Z"):k;c&&v(c,function(a){Ua(n,function(b){return b.id==a.user.id})||n.push(Og(S.a(),a.user));var b=xd((a.time||a.tune_in)+"Z");r=r&&r.getTime()>b.getTime()?r:b;"session"==g?v(a.media,function(a){!this.Wd[a.id]&&(!this.ed[a.id]&&!Ua(i,function(b){return b.id==a.id}))&&i.push(a)},this):"liked"==g&&!this.hl[a.media.id]&&(i.push(a.media),this.hl[a.media.id]=j)},a);switch(g){case "session":if(!a.pe&&
2>n.length)return;var d=b?b.session:c[0],x=U.a().get(d.channel_id),i=b?b.session.media:i;3<i.length&&(i=i.slice(0,3));b=H(oj,{P:n,W:x,time:md(r.getTime()),Fl:!!d.tune_out});break;case "comment":i=b?[b.comment.media]:[gg(fg.a(),c[0].media)];b=Ra(b?[b.comment]:c,function(a){a=new kk(a);a.text=Pj(a.text);a.text=a.text.replace(/@\[(\d+):([a-zA-z\s]+)\]/g,function(a,b,c){return'<a href="#user:'+b+'">'+c+"</a>"});return a});b=H(pj,{yb:b.reverse().slice(0,3),P:n,media:i[0]});break;case "liked":i=b?[b.media]:
i;b=H(qj,{P:n,Hk:i.length,time:md(r.getTime())});break;default:return}if(i.length){nd(ld.a(),r,D("timestamp",b));d=Va(a.jj,function(a){return a.time<r.getTime()});cb(a.jj,d,0,{time:r,element:b});var F=D("medias",b);v(i,function(a){var b=gg(fg.a(),a),a=H(Cj,{media:b}),c=D("list-play",a),d=D("list-plus",a);D("thumb",a);F.appendChild(a);P(P(P(this.h(),a,"click",function(){Z.a().c(Hg,b)}),c,"click",function(a){a.preventDefault();a.stopPropagation();a=ig(b);V.a().c(Mf,a)}),d,"click",function(a){a.preventDefault();
a.stopPropagation();Rf().c(sg,b,j)})},a);e?ic(a.ue,b,0):c?ic(a.ue,b,d):a.ue.appendChild(b);L(za(y,b,"show"))}}Mk.prototype.resize=function(){var a=E().height+(IPHONE&&SAFARI?61:0)-40-(xc(this.b(),"tabbed")?40:10);ce(this.b(),a);Q(this.ue).height<a&&Pk(this)};function Qk(a){R.call(this);this.cb=this.o=a;this.ng=a.id==S.a().d.id;this.fa=[this.ng?"inbox":"messages","activity","starred"]}u(Qk,R);m=Qk.prototype;m.u=function(a){Qk.f.u.call(this,a);y(a,"profile");y(a,"ios-scroll");Cc(a,Aj,{Xh:this.ng})};
m.z=function(){this.bb=D("tabs",this.b());this.ng&&(X("/_notification",s(function(a){var a=Y(a.target),a=Qa(a,function(a){return!!a}),b=0,a=Ra(a,function(a){a=new Fk(a);b+=!a.qb?1:0;return a},this);Z.a().c("new-messages",b);this.jd=new Hk(a);P(this.h(),this.jd,"resize",za(L,s(this.Bg,this)));this.jd.j(D("notifications-content",this.b()))},this)),this.xp=D("inbox-content",this.b()),P(this.h(),window,"resize",za(L,s(this.Bg,this))));X("/_message/"+this.cb.id,s(function(a){var a=Y(a.target),b=0,a=Ra(a,
function(a){a=new Bi(a);b+=!a.qb?1:0;return a},this);this.ng&&Z.a().c("new-messages",b);this.Ua=new Dk(this.cb,a);P(this.h(),this.Ua,"resize",za(L,s(this.Bg,this)));this.Ua.j(D("messages-content",this.b()))},this));X("/_star/"+this.cb.id,s(function(a){var a=Y(a.target),a=Ra(a,function(a){return new ag(a)}),b=S.a().d;b.xl=a;b.c("set-starred");this.sd=new zk(a);this.sd.j(D("starred-content",this.b()))},this));X("/_activity/"+this.cb.id,s(function(a){a=Y(a.target).activities;this.Ni=new Mk(a,this.cb.id);
this.Ni.j(D("activity-content",this.b()))},this));P(this.h(),this.bb,"click",s(function(a){a=wc(a.target,"li");this.vc(a)},this));fg.a().subscribe("star",function(a,b){if(b)this.sd.Yg(a);else{var c=this.sd,d=c.sc[a.id];d&&(Kc(d),Ub(c.sc,a.id))}},this);P(this.h(),window,"resize",za(L,s(this.Cc,this)));this.Cc()};m.vc=function(a){v(this.fa,function(b){B(this.bb.parentElement,b,A(a,b));this.L=A(a,b)?b:this.L},this)};
m.Cc=function(){var a=E().height+(IPHONE&&SAFARI?61:0)-41-(xc(this.b(),"tabbed")?30:0);ce(this.b(),a);this.Bg()};m.Bg=function(){var a=Q(this.b()).height-80;this.jd&&ce(this.jd.b(),Math.floor(a/2));this.Ua&&ce(this.Ua.b(),Math.ceil(a/2))};function Rk(){R.call(this);this.Ja=Gf(S.a().d);this.Pl=new fk;this.fa={};this.Gc=[];this.ge=[];this.Yb=this.te=0}u(Rk,R);m=Rk.prototype;
m.z=function(){Rk.f.z.call(this);this.ve=D("arrow",this.Hc);this.nh=C("sidebar-content");this.Fk=C("media-list");this.zg=C("profile");this.Tj=C("friendlist");this.Cj=C("conversation");this.Hc=C("toolbar");this.bb=D("tabs",this.b());this.Wg=D("activities-count",this.b());this.Kh=D("inbox-count",this.b());var a=new gf(document);v(kc(this.bb),function(a){var b=Kb(a)[0];this.fa[b]=a;this.Gc.push(b)},this);S.a().d.w?(Sk(this),this.sd=new Qk(S.a().d),this.sd.j(C("my-profile"))):(this.fa.stream&&O(this.fa.stream,
l),this.fa.profile&&O(this.fa.profile,l),this.fa.login&&O(this.fa.login,j));this.ei();this.ea&&(DESKTOP||!S.a().d.w||U.a().l.J&&U.a().l.e())?(this.S=C("info"),this.L="info",Tk(this,"info","info")):(this.S=C("stream"),this.L="stream",Tk(this,"info","stream"));var b="left";v(this.Gc,function(a){var c=D(a,this.nh);a==this.L?b="right":y(c,b)},this);this.ge=[this.S,""];y(this.S,"current");if(this.Ja){this.Pl.j(C("admin"));var c=H(sj,{name:"ADMIN",className:"admin"});this.bb.appendChild(c);this.fa.admin=
c;this.Gc.push("admin")}Uk(this);P(P(P(P(this.h(),D("back-button",this.Hc),"click",s(function(a){var b=this.ge.shift();this.navigate(b[0],j,b[1]);Uk(this);a.stopPropagation()},this)),this.bb,"click",s(function(a){var b=this.L,c=wc(a.target,"li"),i=Kb(c)[0];"login"==i?this.ea&&this.ea.login():(Tk(this,this.L,i),y(c,"selected"),Uk(this),b!=this.L&&a.stopPropagation(),"stream"==i&&this.Ok(0,j))},this)),this.Hc,"click",s(function(a){((a=wc(a.target,"li"))&&Kb(a)[0]==this.L||!a)&&(new Ke(this.S,[this.S.scrollLeft,
this.S.scrollTop],[this.S.scrollLeft,0],300)).play()},this)),a,"key",s(function(a){a.ctrlKey&&"68"==a.keyCode&&Mb(this.b(),"dark")},this));DESKTOP&&N.a().subscribe(pd,function(a){B(this.b(),"toggled",a);L(s(function(){B(this.b(),"collapsed",!a)},this),!a?500:0)},this);Z.a().subscribe("navigate",this.navigate,this);Z.a().subscribe("new-activites",this.Ok,this);Z.a().subscribe("new-messages",this.gn,this);Z.a().subscribe("conversation",this.ao,this);Z.a().subscribe("media-list",this.ho,this);Z.a().subscribe(Hg,
this.vl,this);Z.a().subscribe("friend-list",this.eo,this);Z.a().subscribe(Jg,this.jo,this);U.a().subscribe(Lf,this.ei,this);V.a().subscribe(Mf,this.ei,this);U.a().subscribe(If,this.kn,this);S.a().subscribe("logged-in",function(){O(this.fa.stream,j);O(this.fa.profile,j);O(this.fa.login,l);Sk(this);this.sd=new Qk(S.a().d);this.sd.j(C("my-profile"));Uk(this)},this);DESKTOP&&N.a().subscribe("toggle-admin",function(a){B(this.b(),"admin",a);a?(N.a().c(pd,j),Tk(this,this.L,"admin")):"admin"==this.L&&Tk(this,
"admin","info")},this)};function Sk(a){X("/_activity",s(function(a){a=Y(a.target);this.Ni=new Mk(a.activities);this.Ni.j(C("stream"));Z.a().c("new-activites",parseInt(a.new_count,10))},a))}m.Ok=function(a,b){b&&(this.te=0,O(this.Wg,l));this.te+=a;pc(this.Wg,this.te.toString());O(this.Wg,!!this.te)};m.gn=function(a,b){b&&(this.Yb=0,O(this.Kh,l));this.Yb+=a;this.Yb=Math.max(this.Yb,0);pc(this.Kh,this.Yb.toString());document.title=0<this.Yb?"("+this.Yb.toString()+") XYLO":"XYLO";O(this.Kh,!!this.Yb)};
m.ei=function(a){if(a=a||U.a().l.e())if(this.Uc=a.media,!this.ea||this.Uc.id!=this.ea.o.id){var a=this.ea&&this.ea.k.v()?this.ea.k.v():k,b=this.ea?this.ea.i:k;Kc(this.ea);this.ea=new qk(this.Uc,l,b,a);this.ea.j(C("info"))}};m.kn=function(a){a=a||U.a().l;if((this.Uc=a.e()&&a.e().media)&&(!this.ea||this.Uc.id!=this.ea.o.id))Kc(this.ea),this.ea=new qk(this.Uc),this.ea.j(C("info")),this.vl(this.Uc)};
function Tk(a,b,c){var d=D(c,a.nh),e=Oa(a.Gc,b),b=Oa(a.Gc,c),g=(e=e<b)?0:a.Gc.length-1,i=e?g<a.Gc.length:0<=g;for(g;i;g+=e?1:-1){var n=D(a.Gc[g],a.nh);if(e&&g>b||!e&&g<b)y(n,"right"),z(n,"left");else if(e&&g<b||!e&&g>b)B(n,"left",e),y(n,"right");else if(g==b){z(n,"right");z(n,"left");break}}a.L=c;cb(a.ge,0,0,[a.S,""]);z(a.S,"current");a.S=d;y(a.S,"current");Uk(a)}
m.navigate=function(a,b,c){if(a==this.S)c&&pc(D("back-title",this.Hc),c);else{var d=A(this.S,"screen");b?(z(this.S,"on"),z(this.S,"current"),y(a,"current"),this.S=a):(B(this.S,"on",!d),b=[this.S,tc(D("back-title",this.Hc))],cb(this.ge,0,0,b),z(this.S,"current"),this.S=a,y(this.S,"current"));B(this.Hc,"back",A(this.S,"slide"));c&&pc(D("back-title",this.Hc),c);this.S!=this.zg&&(Z.a().sh=k)}};m.ao=function(a,b,c,d){(new pk(a,b,c,d)).j(this.Cj);Z.a().c("navigate",this.Cj,l,a.name)};
m.ho=function(a,b,c,d,e,g,i){(new zk(b,c,d,e,g,i)).j(this.Fk);Z.a().c("navigate",this.Fk,l,a,d,e)};m.eo=function(){this.zh=new Kk(h,j);this.zh.j(this.Tj);Z.a().c("navigate",this.Tj,l,"Friends")};m.vl=function(a,b,c,d){if(this.ea&&a.id==this.ea.o.id){z(this.Hc,"back");for(a=this.ge[0][0];a&&A(a,"slide");)a=this.ge.shift();Tk(this,this.L,"info")}else{var e=C("media-info");(new qk(a,b,c,d)).j(e);Z.a().c("navigate",e,l,a.name)}DESKTOP&&N.a().c(pd,j)};
m.jo=function(a){if(!this.pi||!(this.pi.o.id==a.id&&this.S==this.zg))Z.a().sh=a.id,this.pi=new Qk(a),this.pi.j(this.zg),Z.a().c("navigate",this.zg,l,a.name),DESKTOP&&N.a().c(pd,j)};function Uk(a){var b=Math.round(Q(a.fa[a.L]).width/2+Wd(a.fa[a.L]).x);a.ve.style.transform="translate3d("+b+"px, 0,0)";a.ve.style.msTransform="translate3d("+b+"px, 0,0)";a.ve.style.WebkitTransform="translate3d("+b+"px, 0,0)";a.ve.style.MozTransform="translate3d("+b+"px, 0,0)";a.ve.style.Oo="translate3d("+b+"px, 0,0)"};function Vk(a){return'<div class="queue-media"><div class="pic"><img src="'+J(a.media.wa.O)+'"></div><div class="title">'+J(a.media.name)+'</div><div class="play"></div><div class="remove"></div></div>'};function Wk(){R.call(this);this.sc={};this.tc=0;this.ra=new Ef("Queue");wf(this.ra,16,j)}u(Wk,R);
Wk.prototype.u=function(a){Wk.f.u.call(this,a);this.ra.j(D("queue-toggle",this.b()));this.Xm=D("queue-list",this.b());this.fd=D("medias",this.b());P(P(P(this.h(),this.ra.b(),"click",s(function(){B(this.b(),"show",df(this.ra))},this)),this.Xm,"click",s(function(a){a.preventDefault();a.stopPropagation()},this)),window,"click",s(function(a){df(this.ra)&&(xc(a.target,"queue")||L(s(function(){z(this.b(),"show");vf(this.ra,l)},this)))},this));Rf().subscribe(sg,this.Pb,this);if(S.a().d.w){var a=Rf(),b=s(function(a){v(a,
function(a){this.Pb(a,j)},this)},this);X("/_queue",s(function(a){a=Y(a.target);this.queue=Ra(a,function(a){return gg(fg.a(),a)},this);b&&b(this.queue)},a))}};
Wk.prototype.Pb=function(a,b){if(b){e=H(Vk,{media:a});this.sc[a.id]=e;this.tc+=1;var c=D("play",e),d=D("remove",e);this.fd.appendChild(e);P(P(P(this.h(),e,"click",s(function(b){b.preventDefault();b.stopPropagation();Z.a().c(Hg,a)},this)),c,"click",s(function(b){b.preventDefault();b.stopPropagation();z(this.b(),"show");vf(this.ra,l);b=ig(a);V.a().c(Mf,b);Rf().c(sg,a,l)},this)),d,"click",s(function(b){b.preventDefault();b.stopPropagation();Rf().c(sg,a,l)},this))}else if(Wb(this.sc,a.id)){var e=this.sc[a.id];
jc(e);this.tc-=1}B(this.fd,"no-medias",!this.tc);pc(this.ra.b().firstChild,0<this.tc?this.tc.toString():"")};function Xk(a){return'<div class="main"><div id="stage" class="stage"><div id="ytplayer"></div><div id="stagecover"><div class="message"><span></span><div class="spinner" style="display:none"></div><div class="restart" style="display:none">TRY AGAIN</div></div><div class="fullscreen" style="display:none"></div><div class="expand" style="display:none"></div><div class="play" style="display: none"><div></div></div><div class="pause" style="display: none"><div></div></div></div><div id="vote" class="vote" style="display:none"><div class="like"></div><div class="reddit" style="display:none"><a class="reddit-link" target="_blank"><div class="reddit-logo"></div></a><div class="score"></div></div><div class="dislike"></div></div><div id="logo"></div><div class="send-suggestions" style="display:none"><div class="label"><div class="icon"></div>SEND VIDEO TO?</div><div id="send-suggestions"></div></div><div id="notify" class="notify"></div><div id="search" class="search" '+
(a.kc?'style="display:none"':"")+'><div class="search-box"><div id="search-icon" class="search-icon"></div><input type="text" id="search-input" class="search-input" /><div id="clear-icon" class="clear-icon" style="display:none"></div></div><div class="search-results no-medias" id="search-results"><div class="label">SEARCH</div><div class="no-medias">NO RESULTS</div><div class="no-overflow"><div class="results"><div class="subtitle subtitle-channels">CHANNELS</div><div class="result-channels"></div><div class="subtitle subtitle-medias">VIDEOS</div><div class="result-medias"></div></div></div></div></div><div id="queue" class="queue" '+
(a.kc?'style="display:none"':"")+'><div class="queue-toggle"><span></span></div><div class="queue-list"><div class="label">QUEUE</div><div class="medias-container"><div class="medias no-medias"><div class="no-medias">CLICK <span class="plus"></span> TO ADD VIDEOS</div></div></div></div></div></div><div id="guide" class="guide timeless position-hack'+(a.Xj?" toggled":" collapsed")+(a.sidebar?" sidebar-toggled":"")+'"><div class="channel-scrollable"><div id="channel-names" class="channel-names"></div><div class="channel-h-scrollable"><div id="channels" class="channels"></div></div></div><div class="header" id="header"><div class="times"><div id="schedule-toggle" class="schedule-toggle"><div class="fader"><div class="timeless"></div><div class="switcher"><div class="switch"></div></div><div class="scheduled"></div></div></div></div><div id="ticker" class="ticker"><div id="go-live" class="go-live">GO LIVE</div></div><div id="my-ticker" class="my-ticker" style="display:none">'+
(a.m?'<div class="me" style="background:'+J(a.m.color)+";border-color:"+J(a.m.color)+';"><img src="'+J(a.m.O)+'"/></div>':"")+'</div></div><div id="now-left" class="left browse"></div><div id="now-right" class="right browse"></div><div class="pan-handle" id="pan-handle"></div></div><div id="controller" class="controller'+(a.Xj?" guide-toggled":" collapsed")+(a.sidebar?" sidebar-toggled":"")+'"><div class="background"></div><div class="left"><div id="guide-toggle" class="guide-toggle dark button">GUIDE</div><div class="controls"><div class="play dark button"><div class="icon"></div></div><div class="next dark button"><div class="icon"></div></div><div class="volume dark button"><div class="icon"></div></div></div><div class="border"></div></div><div class="right"><div id="info-toggle" class="info-toggle dark button" '+
(a.kc?'style="display:none"':"")+'><div class="icon"></div></div><div id="admin-toggle" class="admin-toggle dark button" style="display: none"><div class="icon"></div><div id="toggle-pending" class="pending" style="display:none"></div></div><div id="sidebar-toggle" class="sidebar-toggle dark button"><div class="icon"></div></div><div class="border"></div></div><div class="progress" style="display: none"><div class="elapsed animate"><div class="seek"></div></div><div class="title"></div><div class="current-time"></div><div class="duration"></div></div></div><div id="sidebar" class="'+
(a.sidebar?"toggled":"collapsed")+'"><div id="toolbar"><div class="back"><div class="back-button"><div>BACK</div></div><div class="back-title"></div></div><ul class="tabs"><li class="info tab selected"><div class="label">NOW</div></li><li class="stream tab"><div class="label">STREAM<div class="activities-count" style="display:none"></div></div></li><li class="profile tab"><div class="label">HOME<div class="inbox-count" style="display:none"></div></div></li><li class="login tab" style="display:none"><div class="label">LOGIN</div></li></ul><div class="radial-grad"></div><div class="arrow"></div></div><div id="sidebar-content"><div id="info" class="screen info"><div class="no-info">Pick a channel or play a story.</div></div><div id="stream" class="screen stream"><div class="loading loading-activity"><div class="loading-spinner"></div></div></div><div id="my-profile" class="screen profile"></div><div id="admin" class="screen admin"></div><div class="screen login"></div><div id="media-list" class="slide media-list"></div><div id="friendlist" class="slide friendlist"></div><div id="conversation" class="slide"></div>'+
(a.Zg?'<div id="admin-col-list" class="slide admin"></div><div id="admin-list" class="slide admin-list"></div>':"")+'<div id="media-info" class="slide info"></div><div id="profile" class="slide profile"></div></div></div><div id="hovercard" class="watch-with" style="display: none"></div><div id="welcome" class="welcome" style="display:none"><div class="search"></div><div class="thanks"></div><div class="guide"></div><div class="sidebar"></div><div class="drag"></div><div class="close"></div></div></div>'}
;function pg(){}ka(pg);_gaq=[];pg.prototype.init=function(){_gaq.push(["_setAccount","UA-38058655-1"]);_gaq.push(["_trackPageview"]);var a=document.createElement("script");a.type="text/javascript";a.async=j;a.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)};pg.prototype.login=function(){_gaq.push(["_trackEvent","Users","Login",S.a().d.id])};
pg.prototype.Rc=function(a,b){a.J||(_gaq.push(["_trackEvent","Channel","OptOut",b.id]),_gaq.push(["_trackEvent","Channel","OptIn",a.id]))};pg.prototype.X=function(a,b,c){_gaq.push(["_trackEvent","Media","Comment",a.id]);_gaq.push(["_trackEvent","Users","Comment",S.a().d.id]);b&&_gaq.push(["_trackEvent","Facebook","Comment",S.a().d.id]);c&&_gaq.push(["_trackEvent","Twitter","Comment",S.a().d.id])};
function yk(a,b,c,d){_gaq.push(["_trackEvent","Media","Share",b.id]);_gaq.push(["_trackEvent","Users","Share",S.a().d.id]);c&&_gaq.push(["_trackEvent","Facebook","Share",S.a().d.id]);d&&_gaq.push(["_trackEvent","Twitter","Share",S.a().d.id]);X("/_share",Ae(),"POST","facebook="+c+"&twitter="+d)}ga("_gaq",_gaq);function Gj(){M.call(this);this.Ck=l}u(Gj,M);ka(Gj);Gj.prototype.init=function(a){this.Ao=a;a=(new appengine.Channel(unescape(a))).open();a.onmessage=s(this.rn,this);a.onclose=s(this.Rk,this);K(window,"onbeforeunload",s(this.Rk,this));return this};
Gj.prototype.rn=function(a){var b=mh(a.data);switch(b.type){case "viewer_change":var c=Og(S.a(),b.user),d=b.time&&xd(b.time+"Z");c.Vc&&d&&c.Vc.end(d);(a=b.last_channel_id&&U.a().get(b.last_channel_id))&&a.c("remove-viewer",c);c.Tb&&c.Tb.c(dg,c,a,j);var e=b.channel_id&&U.a().get(b.channel_id),a=b.media&&gg(fg.a(),b.media);e&&(d=d||new yd,d=new og(b.session_id,c,e,d),c.Vc=d,e.c(tg,d));a&&a.c(dg,c,e,b.online!=j);S.a().c(Mg,c,b.online);break;case "notification":a=new Fk(b.notification);S.a().c("new-notification",
a);break;case "new_comment":c=new kk(b.comment);if(c.m.id!=S.a().d.id&&(d=b.tweet?new lk(b.tweet):k,a=gg(fg.a(),b.comment.media)))a.c(bg,c),d&&a.c("add-tweet",d);break;case "new_message":a=new Bi(b.message);S.a().c("new-message",a);Z.a().sh!=a.Q.id&&Zf.a().c("flash","messaged you",a.text,a.Q,a.Q.O,"#user:"+a.Q.id);break;case "new_activity":S.a().c("new-activity",b.activity);b.activity.user.id!=S.a().d.id&&"session"!=b.activity.type&&Z.a().c("new-activites",1);break;case "update_programs":a=b.programs;
e=U.a().get(b.channel_id);v(a,function(a){e.c(ug,a)},this);break;case "new_programs":b.channel&&(e=U.a().Ef(b.channel));v(b.programs,s(function(a){a=new hg(a);if(e=e||U.a().get(b.channel_id))e.c(rg,a),U.a().l&&U.a().l.e(),!V.a().e()&&DESKTOP&&(U.a().c(If,e),U.a().c(Lf,a))},this));break;case "twitter_auth":S.a().d.c(lg)}};
Gj.prototype.Rk=function(){if(!this.Ck){var a=U.a().l.J&&U.a().l.Tb&&Math.floor(V.a().getCurrentTime());DESKTOP&&X("/_settings",Ae(),"POST","show_guide="+N.a().bd+"&show_sidebar="+N.a().rd+(a?"&current_seek="+a:""));this.Ck=j}};function Yk(){M.call(this);this.Hp=[]}u(Yk,M);ka(Yk);Yk.prototype.Sh=function(a){Qb(a,s(function(a,c){v(a,s(function(a){a=new hg(a);U.a().Ad[c]&&U.a().Ad[c].wd(a)},this))},this))};var Zk=l;function $k(a){a.match(/[\d]+/g).length=3}
if(navigator.plugins&&navigator.plugins.length){var al=navigator.plugins["Shockwave Flash"];al&&(Zk=j,al.description&&$k(al.description));navigator.plugins["Shockwave Flash 2.0"]&&(Zk=j)}else if(navigator.mimeTypes&&navigator.mimeTypes.length){var bl=navigator.mimeTypes["application/x-shockwave-flash"];(Zk=bl&&bl.enabledPlugin)&&$k(bl.enabledPlugin.description)}else try{var cl=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7"),Zk=j;$k(cl.GetVariable("$version"))}catch(dl){try{cl=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6"),
Zk=j}catch(el){try{cl=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),Zk=j,$k(cl.GetVariable("$version"))}catch(fl){}}};function gl(a,b,c,d,e,g,i,n){this.yf=a;this.Tl=b;this.Gd=c;this.Kc=d;this.Bp=e;this.up=g;this.Aa=i;this.lb=n;this.vo=[];this.gh=[];this.ip=[];this.Np=[]}gl.prototype.Vj=da("Tl");gl.prototype.tl=function(a){this.Kc=a;return this};gl.prototype.Ii=function(a){this.C=a;return this};function hl(a){this.yf=a;this.no=k}function il(a){this.yf=a;this.no=this.Tp=k};function gj(a,b,c){gl.call(this,"http://www.youtube.com/watch?v="+encodeURIComponent(String(a)),b,c,"application/x-shockwave-flash");this.Kl=a;this.vo=[new hl("http://i.ytimg.com/vi/"+a+"/default.jpg")];this.Ii(new il("http://www.youtube.com/v/"+encodeURIComponent(String(a))+"&hl=en&fs=1&autoplay=1"))}u(gj,gl);
var fj=RegExp("http://(?:[a-zA-Z]{2,3}\\.)?(?:youtube\\.com/watch)(?:\\?(?:[\\w=-]+&(?:amp;)?)*v=([\\w-]+)(?:&(?:amp;)?[\\w=-]+)*)?(?:#[!]?(?:(?:(?:[\\w=-]+&(?:amp;)?)*(?:v=([\\w-]+))(?:&(?:amp;)?[\\w=-]+)*)|(?:[\\w=&-]+)))?[^\\w-]?","i");function jl(){R.call(this);this.Zl=new Hh;this.qm=new Ff;this.mo=new Rk;this.C=new xi;this.jn=new Qh;this.Qn=new Wk;this.Wn=new Fj}var kl,ll,ml,nl,ol,pl,ql,rl;u(jl,R);jl.prototype.u=function(a){jl.f.u.call(this,a);var b=S.a().d,b=H(Xk,{m:b,Zg:b?Gf(b):l,Xj:!EMBED&&(b?b.fo&&!U.a().l.J&&!IPAD:j),sidebar:!EMBED&&(b?b.ko:j),kc:EMBED});ic(a,b,0)};
jl.prototype.z=function(){jl.f.z.call(this);this.Zl.j(C("controller"));IPAD||this.qm.j(C("guide"));this.mo.j(C("sidebar"));this.C.j(C("stage"));this.jn.j(C("notify"));this.Qn.j(C("queue"));this.Wn.j(C("search"));this.Gp=new Lg;P(this.h(),document.body,"touchmove",function(a){wc(a.target,"div","ios-scroll")||a.preventDefault()});P(this.h(),window,"click",function(a){var b=wc(a.target,"a");if(b=b?b.href:k)if((b=b.match("#(.*):(.*)"))&&b.length)switch(a.preventDefault(),a.stopPropagation(),b[1]){case "user":S.a().d&&
S.a().d.w&&(a=S.a().get(b[2]),Z.a().c(Jg,a));break;case "channel":a=U.a().get(b[2]);U.a().c(If,a);break;case "info":a=fg.a().get(b[2]);Z.a().c(Hg,a);break;case "friendlist":Z.a().c("friend-list")}});S.a().d.w?X("/_presence",s(function(a){a=Y(a.target);this.dh=Gj.a().init(a.token);Gh(U.a(),a.viewer_sessions)},this)):X("/_token",s(function(a){a=Y(a.target);this.dh=Gj.a().init(a.token)},this));S.a().subscribe("logged-in",function(){X("/_presence",s(function(a){a=Y(a.target);Kc(this.dh);this.dh=Gj.a().init(a.token);
Gh(U.a(),a.viewer_sessions)},this))},this);N.a().subscribe("toggle-info",function(){var a=C("login"),b=C("static-content"),c=C("pages");z(a,"hide");y(a,"show");b.style.height=Q(c).height+80+"px";sl(j)},this)};
function sl(a){var b=C("login"),c=C("static-content"),d=C("pages"),e=A(b,"app");B(b,"expanded",a);C("uvTab")&&B(C("uvTab"),"show",e&&a);a?(e?c.style.bottom=-Q(d).height-80+"px":c.style.top=Math.max(10,E().height-280)+"px",a=e?Math.min(E().height-100,c.scrollHeight+80):Math.min(E().height-435,c.scrollHeight+190),!e||e&&!b.scrollTop?(e=new Ke(b,[b.scrollLeft,b.scrollTop],[b.scrollLeft,a],300),y(b,"scrolling"),e.play(),K(e,"end",function(){z(b,"scrolling")})):b.scrollTop=a):(c.style.top="",c.style.height=
"",e?L(function(){z(b,"show")},200):c.className="")}
function tl(){var a=C("fb-login"),b=C("static-content"),c=C("login"),d=C("login-promo");y(a,"disabled");y(a,"spin");X("/_session?uuid="+Math.round(1E10*Math.random()),function(e){if(200==Eh(e.target)){var g=Y(e.target);if(g.error)pc(C("error"),g.error),ul("error","Yikes...");else if(g.message)e=C("message"),pc(e,g.message),y(e,"show");else{var e=function(){L(function(){O(C("embed-spinner"),l);y(c,"hide");z(d,"show");L(function(){O(C("homepage"),l);O(d,l);y(c,"app");y(b,"faq")},600)},600)},i=function(){L(function(){y(c,
"fade");O(d,j);y(d,"show");z(a,"disabled");z(a,"spin")},600)};z(document.body,"login");if(LOADED)Ng(S.a(),g.current_user),S.a().c("logged-in");else{var n=g.channels,r=g.programs,x=g.current_user,g=g.current_channel;Ng(S.a(),x||k);U.a().Sh(n);Yk.a().Sh(r);n=U.a();g=g||Uf(U.a());n.l=n.Ad[g]||n.Tc[0];n.l=Uf(n)||n.l;ld.a().init();(new jl).j(document.body);LOADED=j;pg.a().login()}!LOGIN_REQUIRED||S.a().d.w?L(e):L(i)}}else 500==Eh(e.target)?ul("error","Oops, check back later"):ul("wait"),L(function(){y(ol,
"strike");kl.play()},500),L(function(){z(ol,"strike");y(pl,"strike");ll.play()},800),L(function(){z(pl,"strike");y(ql,"strike");ml.play()},1100),L(function(){z(ql,"strike");y(rl,"strike");nl.play()},1400),L(function(){z(rl,"strike");y(ql,"strike");ml.load();ml.play()},1700),L(function(){z(ql,"strike");y(pl,"strike");ll.load();ll.play()},2E3),L(function(){z(pl,"strike");y(ol,"strike");kl.load();kl.play()},2300),L(function(){z(ol,"strike")},2600)},"POST")}
function ul(a,b){var c=C("fb-login");if(a){var d=D("power",c);y(d,a)}b&&(d=D("waitlist",c),pc(d,b));z(c,"spin");y(c,"disabled");O(c,j);y(c,"show");y(c,"waitlist")}function Jh(a){var b=parseInt(a,10),a=Math.floor(b/3600),c=Math.floor((b-3600*a)/60),b=b-3600*a-60*c;10>c&&(c=(a?"0":"")+c);10>b&&(b="0"+b);return(a?a+":":"")+(c?c+":":"")+b}
ga("brkn.Main.staticInit",function(){var a=C("fb-login"),b=C("homepage"),c=C("login"),d=C("static-content"),e=C("pages"),g=C("footer"),i=l;LOADED=l;LOGIN_REQUIRED&&(pc(D("with-fb",a),"with facebook"),pc(D("label",a),"LOGIN"));!POWER_ON&&!LOGIN_REQUIRED&&(y(a,"disabled"),y(a,"spin"));y(b,"hide");var n=G("img");n.src="/static/img/homepage.jpg";K(n,"load",function(){z(b,"hide");y(b,"show")});L(function(){O(a,j);L(za(y,a,"show"),400)},100);K(c,"click",function(a){"static-scrollable"==a.target.id&&(a=
A(c,"app"),i=l,a?sl(i):(a=new Ke(c,[c.scrollLeft,c.scrollTop],[c.scrollLeft,0],300),a.play(),K(a,"end",za(sl,i))))});K(c,"scroll",function(){!A(c,"scrolling")&&1>c.scrollTop&&(i=l,sl(i))});K(g,"click",function(a){var a=xc(a.target,"section"),b=A(c,"app");a&&(i=j,d.className=a.id,d.style.height=Q(e).height+(b?80:220)+"px",sl(i))});K(window,"resize",za(sl,i));pg.a().init();IPHONE&&(y(document.body,"iphone"),y(document.body,"login"),window.onload=function(){L(function(){window.scrollTo(0,1)},1E3)});
ol=C("chord-1");pl=C("chord-2");ql=C("chord-3");rl=C("chord-4");kl=C("mp3-1");ll=C("mp3-2");ml=C("mp3-3");nl=C("mp3-4");kl.volume=0.5;ll.volume=0.5;ml.volume=0.5;nl.volume=0.5;kl.load();ll.load();ml.load();nl.load();K(ol,"click",function(){kl.load();kl.play()});K(pl,"click",function(){ll.load();ll.play()});K(ql,"click",function(){ml.load();ml.play()});K(rl,"click",function(){nl.load();nl.play()})});
ga("brkn.Main.auth",function(){!LOGIN_REQUIRED||EMBED?tl():FB.getLoginStatus(function(a){if("connected"===a.status)tl();else if(LOGIN_REQUIRED){var b=C("fb-login");tl();K(b,"click",function(){y(b,"disabled");if(IPAD)return window.location.href="https://m.facebook.com/dialog/oauth?client_id="+FB_APP_ID+"&response_type=code&redirect_uri="+HOST_URL+"&scope=email",l;FB.login(function(a){a.authResponse?tl():z(b,"disabled")},{scope:"email"})})}else tl()})});