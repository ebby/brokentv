function e(a){throw a;}var i=void 0,j=!0,k=null,l=!1;function aa(){return function(){}}function ba(a){return function(b){this[a]=b}}function ca(a){return function(){return this[a]}}function da(a){return function(){return a}}var m,ea=ea||{},fa=this;function ga(a,b){var c=a.split("."),d=fa;!(c[0]in d)&&d.execScript&&d.execScript("var "+c[0]);for(var f;c.length&&(f=c.shift());)!c.length&&ha(b)?d[f]=b:d=d[f]?d[f]:d[f]={}}
function ia(a){for(var a=a.split("."),b=fa,c;c=a.shift();)if(b[c]!=k)b=b[c];else return k;return b}function ja(){}function la(a){a.a=function(){return a.Di?a.Di:a.Di=new a}}
function ma(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function ha(a){return a!==i}function na(a){return"array"==ma(a)}function oa(a){var b=ma(a);return"array"==b||"object"==b&&"number"==typeof a.length}function p(a){return"string"==typeof a}function qa(a){return"number"==typeof a}function ra(a){return"function"==ma(a)}function ta(a){var b=typeof a;return"object"==b&&a!=k||"function"==b}function ua(a){return a[va]||(a[va]=++wa)}
var va="closure_uid_"+Math.floor(2147483648*Math.random()).toString(36),wa=0;function xa(a,b,c){return a.call.apply(a.bind,arguments)}function ya(a,b,c){a||e(Error());if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}
function q(a,b,c){q=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?xa:ya;return q.apply(k,arguments)}function za(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=Array.prototype.slice.call(arguments);b.unshift.apply(b,c);return a.apply(this,b)}}var s=Date.now||function(){return+new Date};function Aa(a,b){var c=b||{},d;for(d in c)var f=(""+c[d]).replace(/\$/g,"$$$$"),a=a.replace(RegExp("\\{\\$"+d+"\\}","gi"),f);return a}
function t(a,b){function c(){}c.prototype=b.prototype;a.d=b.prototype;a.prototype=new c;a.prototype.constructor=a};function Ba(a,b){for(var c=1;c<arguments.length;c++)var d=String(arguments[c]).replace(/\$/g,"$$$$"),a=a.replace(/\%s/,d);return a}function Ca(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")}function Da(a){if(!Ea.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(Fa,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(Ga,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(Ha,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(Ia,"&quot;"));return a}var Fa=/&/g,Ga=/</g,Ha=/>/g,Ia=/\"/g,Ea=/[&<>\"]/;
function Ja(a){var a=ha(i)?a.toFixed(i):String(a),b=a.indexOf(".");-1==b&&(b=a.length);b=Math.max(0,2-b);return Array(b+1).join("0")+a}function Ka(a){return String(a).replace(/\-([a-z])/g,function(a,c){return c.toUpperCase()})};var La=Array.prototype,Ma=La.indexOf?function(a,b,c){return La.indexOf.call(a,b,c)}:function(a,b,c){c=c==k?0:0>c?Math.max(0,a.length+c):c;if(p(a))return!p(b)||1!=b.length?-1:a.indexOf(b,c);for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},u=La.forEach?function(a,b,c){La.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,f=p(a)?a.split(""):a,g=0;g<d;g++)g in f&&b.call(c,f[g],g,a)},Na=La.filter?function(a,b,c){return La.filter.call(a,b,c)}:function(a,b,c){for(var d=a.length,f=[],g=0,h=
p(a)?a.split(""):a,n=0;n<d;n++)if(n in h){var r=h[n];b.call(c,r,n,a)&&(f[g++]=r)}return f},Oa=La.map?function(a,b,c){return La.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,f=Array(d),g=p(a)?a.split(""):a,h=0;h<d;h++)h in g&&(f[h]=b.call(c,g[h],h,a));return f},Pa=La.every?function(a,b,c){return La.every.call(a,b,c)}:function(a,b,c){for(var d=a.length,f=p(a)?a.split(""):a,g=0;g<d;g++)if(g in f&&!b.call(c,f[g],g,a))return l;return j};
function Qa(a,b){var c=Ra(a,b,i);return 0>c?k:p(a)?a.charAt(c):a[c]}function Ra(a,b,c){for(var d=a.length,f=p(a)?a.split(""):a,g=0;g<d;g++)if(g in f&&b.call(c,f[g],g,a))return g;return-1}function Sa(a,b){return 0<=Ma(a,b)}function Ta(a,b){var c=Ma(a,b);0<=c&&La.splice.call(a,c,1)}function Ua(a,b,c){b=Ra(a,b,c);0<=b&&La.splice.call(a,b,1)}function Va(a){return La.concat.apply(La,arguments)}function Wa(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]}
function Xa(a,b){for(var c=1;c<arguments.length;c++){var d=arguments[c],f;if(na(d)||(f=oa(d))&&d.hasOwnProperty("callee"))a.push.apply(a,d);else if(f)for(var g=a.length,h=d.length,n=0;n<h;n++)a[g+n]=d[n];else a.push(d)}}function Za(a,b,c,d){La.splice.apply(a,$a(arguments,1))}function $a(a,b,c){return 2>=arguments.length?La.slice.call(a,b):La.slice.call(a,b,c)};var ab,bb,cb,eb,fb;function gb(){return fa.navigator?fa.navigator.userAgent:k}function hb(){return fa.navigator}eb=cb=bb=ab=l;var ib;if(ib=gb()){var jb=hb();ab=0==ib.indexOf("Opera");bb=!ab&&-1!=ib.indexOf("MSIE");cb=!ab&&-1!=ib.indexOf("WebKit");eb=!ab&&!cb&&"Gecko"==jb.product}var kb=ab,x=bb,lb=eb,mb=cb,nb=hb();fb=-1!=(nb&&nb.platform||"").indexOf("Mac");var ob=!!hb()&&-1!=(hb().appVersion||"").indexOf("X11"),pb;
a:{var qb="",rb;if(kb&&fa.opera)var sb=fa.opera.version,qb="function"==typeof sb?sb():sb;else if(lb?rb=/rv\:([^\);]+)(\)|;)/:x?rb=/MSIE\s+([^\);]+)(\)|;)/:mb&&(rb=/WebKit\/(\S+)/),rb)var tb=rb.exec(gb()),qb=tb?tb[1]:"";if(x){var ub,vb=fa.document;ub=vb?vb.documentMode:i;if(ub>parseFloat(qb)){pb=String(ub);break a}}pb=qb}var wb={};
function xb(a){var b;if(!(b=wb[a])){b=0;for(var c=Ca(String(pb)).split("."),d=Ca(String(a)).split("."),f=Math.max(c.length,d.length),g=0;0==b&&g<f;g++){var h=c[g]||"",n=d[g]||"",r=RegExp("(\\d*)(\\D*)","g"),v=RegExp("(\\d*)(\\D*)","g");do{var w=r.exec(h)||["","",""],C=v.exec(n)||["","",""];if(0==w[0].length&&0==C[0].length)break;b=((0==w[1].length?0:parseInt(w[1],10))<(0==C[1].length?0:parseInt(C[1],10))?-1:(0==w[1].length?0:parseInt(w[1],10))>(0==C[1].length?0:parseInt(C[1],10))?1:0)||((0==w[2].length)<
(0==C[2].length)?-1:(0==w[2].length)>(0==C[2].length)?1:0)||(w[2]<C[2]?-1:w[2]>C[2]?1:0)}while(0==b)}b=wb[a]=0<=b}return b}var yb={};function Ab(a){return yb[a]||(yb[a]=x&&!!document.documentMode&&document.documentMode>=a)};var Bb,Cb=!x||Ab(9),Db=!lb&&!x||x&&Ab(9)||lb&&xb("1.9.1"),Eb=x&&!xb("9"),Fb=x||kb||mb;function Gb(a){a=a.className;return p(a)&&a.match(/\S+/g)||[]}function y(a,b){for(var c=Gb(a),d=$a(arguments,1),f=c.length+d.length,g=c,h=0;h<d.length;h++)Sa(g,d[h])||g.push(d[h]);a.className=c.join(" ");return c.length==f}function z(a,b){var c=Gb(a),d=$a(arguments,1),f,g=d;f=Na(c,function(a){return!Sa(g,a)});a.className=f.join(" ");return f.length==c.length-d.length}function A(a,b){return Sa(Gb(a),b)}function B(a,b,c){c?y(a,b):z(a,b)}function Hb(a,b){var c=!A(a,b);B(a,b,c);return c};function Ib(a,b){this.x=ha(a)?a:0;this.y=ha(b)?b:0}Ib.prototype.clone=function(){return new Ib(this.x,this.y)};function Jb(a,b){return new Ib(a.x-b.x,a.y-b.y)};function Kb(a,b){this.width=a;this.height=b}Kb.prototype.clone=function(){return new Kb(this.width,this.height)};Kb.prototype.ceil=function(){this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};Kb.prototype.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};Kb.prototype.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};function Lb(a,b,c){for(var d in a)b.call(c,a[d],d,a)}function Mb(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function Nb(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}function Ob(a){for(var b in a)return l;return j}function Pb(a,b){b in a&&delete a[b]}function Qb(a,b,c){b in a&&e(Error('The object already contains the key "'+b+'"'));a[b]=c}function Rb(a,b,c){return b in a?a[b]:c}var Sb="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");
function Tb(a,b){for(var c,d,f=1;f<arguments.length;f++){d=arguments[f];for(c in d)a[c]=d[c];for(var g=0;g<Sb.length;g++)c=Sb[g],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};function Ub(a){return a?new Vb(Wb(a)):Bb||(Bb=new Vb)}function D(a){return p(a)?document.getElementById(a):a}function Xb(a,b){var c=b||document;return c.querySelectorAll&&c.querySelector?c.querySelectorAll("."+a):c.getElementsByClassName?c.getElementsByClassName(a):Yb("*",a,b)}function E(a,b){var c=b||document,d=k;return(d=c.querySelectorAll&&c.querySelector?c.querySelector("."+a):Xb(a,b)[0])||k}
function Yb(a,b,c){var d=document,c=c||d,a=a&&"*"!=a?a.toUpperCase():"";if(c.querySelectorAll&&c.querySelector&&(a||b))return c.querySelectorAll(a+(b?"."+b:""));if(b&&c.getElementsByClassName){c=c.getElementsByClassName(b);if(a){for(var d={},f=0,g=0,h;h=c[g];g++)a==h.nodeName&&(d[f++]=h);d.length=f;return d}return c}c=c.getElementsByTagName(a||"*");if(b){d={};for(g=f=0;h=c[g];g++)a=h.className,"function"==typeof a.split&&Sa(a.split(/\s+/),b)&&(d[f++]=h);d.length=f;return d}return c}
var Zb={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function F(a){a=(a||window).document;a=$b(a)?a.documentElement:a.body;return new Kb(a.clientWidth,a.clientHeight)}function G(a,b,c){return ac(document,arguments)}
function ac(a,b){var c=b[0],d=b[1];if(!Cb&&d&&(d.name||d.type)){c=["<",c];d.name&&c.push(' name="',Da(d.name),'"');if(d.type){c.push(' type="',Da(d.type),'"');var f={};Tb(f,d);delete f.type;d=f}c.push(">");c=c.join("")}var g=a.createElement(c);d&&(p(d)?g.className=d:na(d)?y.apply(k,[g].concat(d)):Lb(d,function(a,b){"style"==b?g.style.cssText=a:"class"==b?g.className=a:"for"==b?g.htmlFor=a:b in Zb?g.setAttribute(Zb[b],a):0==b.lastIndexOf("aria-",0)||0==b.lastIndexOf("data-",0)?g.setAttribute(b,a):
g[b]=a}));if(2<b.length){d=function(b){b&&g.appendChild(p(b)?a.createTextNode(b):b)};for(c=2;c<b.length;c++)if(f=b[c],oa(f)&&!(ta(f)&&0<f.nodeType)){var h=u,n;a:{if((n=f)&&"number"==typeof n.length){if(ta(n)){n="function"==typeof n.item||"string"==typeof n.item;break a}if(ra(n)){n="function"==typeof n.item;break a}}n=l}h(n?Wa(f):f,d)}else d(f)}return g}function $b(a){return"CSS1Compat"==a.compatMode}function bc(a){for(var b;b=a.firstChild;)a.removeChild(b)}
function cc(a,b,c){a.insertBefore(b,a.childNodes[c]||k)}function dc(a){a&&a.parentNode&&a.parentNode.removeChild(a)}function ec(a){return Db&&a.children!=i?a.children:Na(a.childNodes,function(a){return 1==a.nodeType})}function fc(a){return a.nextElementSibling!=i?a.nextElementSibling:gc(a.nextSibling,j)}function gc(a,b){for(;a&&1!=a.nodeType;)a=b?a.nextSibling:a.previousSibling;return a}function hc(a){if(Fb)return a.parentElement;a=a.parentNode;return ta(a)&&1==a.nodeType?a:k}
function ic(a,b){if(a.contains&&1==b.nodeType)return a==b||a.contains(b);if("undefined"!=typeof a.compareDocumentPosition)return a==b||Boolean(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a}function Wb(a){return 9==a.nodeType?a:a.ownerDocument||a.document}
function jc(a,b){if("textContent"in a)a.textContent=b;else if(a.firstChild&&3==a.firstChild.nodeType){for(;a.lastChild!=a.firstChild;)a.removeChild(a.lastChild);a.firstChild.data=b}else bc(a),a.appendChild(Wb(a).createTextNode(b))}var kc={SCRIPT:1,STYLE:1,HEAD:1,IFRAME:1,OBJECT:1},lc={IMG:" ",BR:"\n"};function mc(a){var b=a.getAttributeNode("tabindex");return b&&b.specified?(a=a.tabIndex,qa(a)&&0<=a&&32768>a):l}
function nc(a){if(Eb&&"innerText"in a)a=a.innerText.replace(/(\r\n|\r|\n)/g,"\n");else{var b=[];oc(a,b,j);a=b.join("")}a=a.replace(/ \xAD /g," ").replace(/\xAD/g,"");a=a.replace(/\u200B/g,"");Eb||(a=a.replace(/ +/g," "));" "!=a&&(a=a.replace(/^\s*/,""));return a}function pc(a){var b=[];oc(a,b,l);return b.join("")}
function oc(a,b,c){if(!(a.nodeName in kc))if(3==a.nodeType)c?b.push(String(a.nodeValue).replace(/(\r\n|\r|\n)/g,"")):b.push(a.nodeValue);else if(a.nodeName in lc)b.push(lc[a.nodeName]);else for(a=a.firstChild;a;)oc(a,b,c),a=a.nextSibling}function qc(a,b,c){if(!b&&!c)return k;b=b?b.toUpperCase():k;a:{for(var d=0;a;){if((!b||a.nodeName==b)&&(!c||A(a,c))){c=a;break a}a=a.parentNode;d++}c=k}return c}function Vb(a){this.G=a||fa.document||document}m=Vb.prototype;m.Na=Ub;
m.b=function(a){return p(a)?this.G.getElementById(a):a};m.L=function(a,b,c){return ac(this.G,arguments)};m.createElement=function(a){return this.G.createElement(a)};m.createTextNode=function(a){return this.G.createTextNode(a)};function rc(a){return $b(a.G)}function sc(a){var b=a.G,a=!mb&&$b(b)?b.documentElement:b.body,b=b.parentWindow||b.defaultView;return new Ib(b.pageXOffset||a.scrollLeft,b.pageYOffset||a.scrollTop)}m.appendChild=function(a,b){a.appendChild(b)};m.hi=ec;
function tc(a,b){return b.firstElementChild!=i?b.firstElementChild:gc(b.firstChild,j)}m.contains=ic;x&&xb(8);var uc={};function vc(a,b,c){a.innerHTML=b(c||uc,i,i)}function H(a,b){var c;a:if(c=(new Vb(i)||Ub()).createElement("DIV"),c.innerHTML=a(b||uc,i,i),1==c.childNodes.length){var d=c.firstChild;if(1==d.nodeType){c=d;break a}}return c}function I(a){return"object"===typeof a&&a&&0===a.$m?a.content:String(a).replace(wc,xc)}
var yc={"\x00":"&#0;",'"':"&quot;","&":"&amp;","'":"&#39;","<":"&lt;",">":"&gt;","\t":"&#9;","\n":"&#10;","\x0B":"&#11;","\f":"&#12;","\r":"&#13;"," ":"&#32;","-":"&#45;","/":"&#47;","=":"&#61;","`":"&#96;","\u0085":"&#133;","\u00a0":"&#160;","\u2028":"&#8232;","\u2029":"&#8233;"};function xc(a){return yc[a]}var wc=/[\x00\x22\x26\x27\x3c\x3e]/g;function J(){0!=zc&&(this.an=Error().stack,Ac[ua(this)]=this)}var zc=0,Ac={};J.prototype.Me=l;J.prototype.ba=function(){if(!this.Me&&(this.Me=j,this.n(),0!=zc)){var a=ua(this);delete Ac[a]}};J.prototype.n=function(){this.lk&&Bc.apply(k,this.lk);if(this.fj)for(;this.fj.length;)this.fj.shift()()};function Cc(a){a&&"function"==typeof a.ba&&a.ba()}function Bc(a){for(var b=0,c=arguments.length;b<c;++b){var d=arguments[b];oa(d)?Bc.apply(k,d):Cc(d)}};var Dc=!x||Ab(9),Ec=!x||Ab(9),Fc=x&&!xb("9");!mb||xb("528");lb&&xb("1.9b")||x&&xb("8")||kb&&xb("9.5")||mb&&xb("528");lb&&!xb("8")||x&&xb("9");function Gc(a,b){this.type=a;this.currentTarget=this.target=b}m=Gc.prototype;m.n=aa();m.ba=aa();m.Cc=l;m.defaultPrevented=l;m.nf=j;m.stopPropagation=function(){this.Cc=j};m.preventDefault=function(){this.defaultPrevented=j;this.nf=l};function Hc(a){a.preventDefault()};function Ic(a){Ic[" "](a);return a}Ic[" "]=ja;function Jc(a,b){a&&this.init(a,b)}t(Jc,Gc);var Kc=[1,4,2];m=Jc.prototype;m.target=k;m.relatedTarget=k;m.offsetX=0;m.offsetY=0;m.clientX=0;m.clientY=0;m.screenX=0;m.screenY=0;m.button=0;m.keyCode=0;m.charCode=0;m.ctrlKey=l;m.altKey=l;m.shiftKey=l;m.metaKey=l;m.Hg=l;m.ia=k;
m.init=function(a,b){var c=this.type=a.type;Gc.call(this,c);this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;if(d){if(lb){var f;a:{try{Ic(d.nodeName);f=j;break a}catch(g){}f=l}f||(d=k)}}else"mouseover"==c?d=a.fromElement:"mouseout"==c&&(d=a.toElement);this.relatedTarget=d;this.offsetX=mb||a.offsetX!==i?a.offsetX:a.layerX;this.offsetY=mb||a.offsetY!==i?a.offsetY:a.layerY;this.clientX=a.clientX!==i?a.clientX:a.pageX;this.clientY=a.clientY!==i?a.clientY:a.pageY;this.screenX=
a.screenX||0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||("keypress"==c?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.Hg=fb?a.metaKey:a.ctrlKey;this.state=a.state;this.ia=a;a.defaultPrevented&&this.preventDefault();delete this.Cc};function Lc(a){return(Dc?0==a.ia.button:"click"==a.type?j:!!(a.ia.button&Kc[0]))&&!(mb&&fb&&a.ctrlKey)}
m.stopPropagation=function(){Jc.d.stopPropagation.call(this);this.ia.stopPropagation?this.ia.stopPropagation():this.ia.cancelBubble=j};m.preventDefault=function(){Jc.d.preventDefault.call(this);var a=this.ia;if(a.preventDefault)a.preventDefault();else if(a.returnValue=l,Fc)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};m.yk=ca("ia");m.n=aa();function Mc(){}var Nc=0;m=Mc.prototype;m.key=0;m.Dc=l;m.Jf=l;m.init=function(a,b,c,d,f,g){ra(a)?this.Fi=j:a&&a.handleEvent&&ra(a.handleEvent)?this.Fi=l:e(Error("Invalid listener argument"));this.kd=a;this.proxy=b;this.src=c;this.type=d;this.capture=!!f;this.We=g;this.Jf=l;this.key=++Nc;this.Dc=l};m.handleEvent=function(a){return this.Fi?this.kd.call(this.We||this.src,a):this.kd.handleEvent.call(this.kd,a)};var Oc={},Pc={},Qc={},Rc={};
function K(a,b,c,d,f){if(b){if(na(b)){for(var g=0;g<b.length;g++)K(a,b[g],c,d,f);return k}var d=!!d,h=Pc;b in h||(h[b]={X:0,Fa:0});h=h[b];d in h||(h[d]={X:0,Fa:0},h.X++);var h=h[d],n=ua(a),r;h.Fa++;if(h[n]){r=h[n];for(g=0;g<r.length;g++)if(h=r[g],h.kd==c&&h.We==f){if(h.Dc)break;return r[g].key}}else r=h[n]=[],h.X++;var v=Sc,w=Ec?function(a){return v.call(w.src,w.key,a)}:function(a){a=v.call(w.src,w.key,a);if(!a)return a},g=w;g.src=a;h=new Mc;h.init(c,g,a,b,d,f);c=h.key;g.key=c;r.push(h);Oc[c]=h;Qc[n]||
(Qc[n]=[]);Qc[n].push(h);a.addEventListener?(a==fa||!a.Rh)&&a.addEventListener(b,g,d):a.attachEvent(b in Rc?Rc[b]:Rc[b]="on"+b,g);return c}e(Error("Invalid event type"))}function Tc(a,b,c,d,f){if(na(b)){for(var g=0;g<b.length;g++)Tc(a,b[g],c,d,f);return k}a=K(a,b,c,d,f);Oc[a].Jf=j;return a}function Uc(a,b,c,d,f){if(na(b))for(var g=0;g<b.length;g++)Uc(a,b[g],c,d,f);else if(d=!!d,a=Vc(a,b,d))for(g=0;g<a.length;g++)if(a[g].kd==c&&a[g].capture==d&&a[g].We==f){Wc(a[g].key);break}}
function Wc(a){if(!Oc[a])return l;var b=Oc[a];if(b.Dc)return l;var c=b.src,d=b.type,f=b.proxy,g=b.capture;c.removeEventListener?(c==fa||!c.Rh)&&c.removeEventListener(d,f,g):c.detachEvent&&c.detachEvent(d in Rc?Rc[d]:Rc[d]="on"+d,f);c=ua(c);Qc[c]&&(f=Qc[c],Ta(f,b),0==f.length&&delete Qc[c]);b.Dc=j;if(b=Pc[d][g][c])b.cj=j,Xc(d,g,c,b);delete Oc[a];return j}
function Xc(a,b,c,d){if(!d.bf&&d.cj){for(var f=0,g=0;f<d.length;f++)d[f].Dc?d[f].proxy.src=k:(f!=g&&(d[g]=d[f]),g++);d.length=g;d.cj=l;0==g&&(delete Pc[a][b][c],Pc[a][b].X--,0==Pc[a][b].X&&(delete Pc[a][b],Pc[a].X--),0==Pc[a].X&&delete Pc[a])}}function Vc(a,b,c){var d=Pc;return b in d&&(d=d[b],c in d&&(d=d[c],a=ua(a),d[a]))?d[a]:k}
function Yc(a,b,c,d,f){var g=1,b=ua(b);if(a[b]){a.Fa--;a=a[b];a.bf?a.bf++:a.bf=1;try{for(var h=a.length,n=0;n<h;n++){var r=a[n];r&&!r.Dc&&(g&=Zc(r,f)!==l)}}finally{a.bf--,Xc(c,d,b,a)}}return Boolean(g)}function Zc(a,b){a.Jf&&Wc(a.key);return a.handleEvent(b)}
function Sc(a,b){if(!Oc[a])return j;var c=Oc[a],d=c.type,f=Pc;if(!(d in f))return j;var f=f[d],g,h;if(!Ec){g=b||ia("window.event");var n=j in f,r=l in f;if(n){if(0>g.keyCode||g.returnValue!=i)return j;a:{var v=l;if(0==g.keyCode)try{g.keyCode=-1;break a}catch(w){v=j}if(v||g.returnValue==i)g.returnValue=j}}v=new Jc;v.init(g,this);g=j;try{if(n){for(var C=[],U=v.currentTarget;U;U=U.parentNode)C.push(U);h=f[j];h.Fa=h.X;for(var V=C.length-1;!v.Cc&&0<=V&&h.Fa;V--)v.currentTarget=C[V],g&=Yc(h,C[V],d,j,v);
if(r){h=f[l];h.Fa=h.X;for(V=0;!v.Cc&&V<C.length&&h.Fa;V++)v.currentTarget=C[V],g&=Yc(h,C[V],d,l,v)}}else g=Zc(c,v)}finally{C&&(C.length=0)}return g}d=new Jc(b,this);return g=Zc(c,d)};function $c(){J.call(this)}t($c,J);m=$c.prototype;m.Rh=j;m.ff=k;m.Yg=ba("ff");m.addEventListener=function(a,b,c,d){K(this,a,b,c,d)};m.removeEventListener=function(a,b,c,d){Uc(this,a,b,c,d)};
m.dispatchEvent=function(a){var b=a.type||a,c=Pc;if(b in c){if(p(a))a=new Gc(a,this);else if(a instanceof Gc)a.target=a.target||this;else{var d=a,a=new Gc(b,this);Tb(a,d)}var d=1,f,c=c[b],b=j in c,g;if(b){f=[];for(g=this;g;g=g.ff)f.push(g);g=c[j];g.Fa=g.X;for(var h=f.length-1;!a.Cc&&0<=h&&g.Fa;h--)a.currentTarget=f[h],d&=Yc(g,f[h],a.type,j,a)&&a.nf!=l}if(l in c)if(g=c[l],g.Fa=g.X,b)for(h=0;!a.Cc&&h<f.length&&g.Fa;h++)a.currentTarget=f[h],d&=Yc(g,f[h],a.type,l,a)&&a.nf!=l;else for(f=this;!a.Cc&&f&&
g.Fa;f=f.ff)a.currentTarget=f,d&=Yc(g,f,a.type,l,a)&&a.nf!=l;a=Boolean(d)}else a=j;return a};m.n=function(){$c.d.n.call(this);var a,b=0,c=a==k;a=!!a;if(this==k)Lb(Qc,function(d){for(var f=d.length-1;0<=f;f--){var g=d[f];if(c||a==g.capture)Wc(g.key),b++}});else{var d=ua(this);if(Qc[d])for(var d=Qc[d],f=d.length-1;0<=f;f--){var g=d[f];if(c||a==g.capture)Wc(g.key),b++}}this.ff=k};function ad(a,b){J.call(this);this.R=a||1;this.te=b||bd;this.Hf=q(this.ih,this);this.qg=s()}t(ad,$c);ad.prototype.enabled=l;var bd=fa.window;m=ad.prototype;m.pa=k;m.ih=function(){if(this.enabled){var a=s()-this.qg;0<a&&a<0.8*this.R?this.pa=this.te.setTimeout(this.Hf,this.R-a):(this.dispatchEvent(cd),this.enabled&&(this.pa=this.te.setTimeout(this.Hf,this.R),this.qg=s()))}};m.start=function(){this.enabled=j;this.pa||(this.pa=this.te.setTimeout(this.Hf,this.R),this.qg=s())};
m.stop=function(){this.enabled=l;this.pa&&(this.te.clearTimeout(this.pa),this.pa=k)};m.n=function(){ad.d.n.call(this);this.stop();delete this.te};var cd="tick";function L(a,b,c){ra(a)?c&&(a=q(a,c)):a&&"function"==typeof a.handleEvent?a=q(a.handleEvent,a):e(Error("Invalid listener argument"));return 2147483647<b?-1:bd.setTimeout(a,b||0)};function M(){J.call(this);this.Ta=[];this.ac={}}t(M,J);m=M.prototype;m.Ki=1;m.hf=0;m.subscribe=function(a,b,c){var d=this.ac[a];d||(d=this.ac[a]=[]);var f=this.Ki;this.Ta[f]=a;this.Ta[f+1]=b;this.Ta[f+2]=c;this.Ki=f+3;d.push(f);return f};m.Tj=function(a){if(0!=this.hf)return this.ee||(this.ee=[]),this.ee.push(a),l;var b=this.Ta[a];if(b){var c=this.ac[b];c&&Ta(c,a);delete this.Ta[a];delete this.Ta[a+1];delete this.Ta[a+2]}return!!b};
m.c=function(a,b){var c=this.ac[a];if(c){this.hf++;for(var d=$a(arguments,1),f=0,g=c.length;f<g;f++){var h=c[f];this.Ta[h+1].apply(this.Ta[h+2],d)}this.hf--;if(this.ee&&0==this.hf)for(;c=this.ee.pop();)this.Tj(c)}};m.clear=function(a){if(a){var b=this.ac[a];b&&(u(b,this.Tj,this),delete this.ac[a])}else this.Ta.length=0,this.ac={}};m.n=function(){M.d.n.call(this);delete this.Ta;delete this.ac;delete this.ee};function dd(){M.call(this);this.Id=new ad(1E3);this.Nj=new ad(3E4);this.Oj=[];this.$f=[]}t(dd,M);la(dd);dd.prototype.init=function(){this.Id.start();this.Nj.start();K(this.Id,cd,q(function(){u(this.$f,function(a,b){a.time<s()&&(a.callback(),La.splice.call(this.$f,b,1))},this)},this));K(this.Nj,cd,q(function(){u(this.Oj,function(a){jc(a.element,ed(a.time.getTime()))},this)},this))};function fd(a,b,c){86400>(s()-b.getTime())/1E3&&a.Oj.push({time:b,element:c})}
function gd(a,b,c){86400>(s()-b)/1E3&&a.$f.push({time:b,callback:c})};function N(){M.call(this);this.Ol=j;var a=D("controller");this.Hc=!a||A(a,"sidebar-toggled");this.vc=a&&A(a,"guide-toggled");this.subscribe(hd,ba("Hc"),this);this.subscribe(id,ba("vc"),this);this.subscribe(jd,ba("Ol"),this)}t(N,M);la(N);function kd(a,b){var c=D("toggle-pending");jc(c,b);O(c,!!b)}var jd="play",id="toggle-guide",hd="toggle-sidebar";var ld={Dm:["BC","AD"],Cm:["Before Christ","Anno Domini"],Fm:"JFMAMJJASOND".split(""),Nm:"JFMAMJJASOND".split(""),Em:"January February March April May June July August September October November December".split(" "),Mm:"January February March April May June July August September October November December".split(" "),Jm:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),Pm:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),Tm:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),
Rm:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),Lm:"Sun Mon Tue Wed Thu Fri Sat".split(" "),Qm:"Sun Mon Tue Wed Thu Fri Sat".split(" "),Gm:"SMTWTFS".split(""),Om:"SMTWTFS".split(""),Km:["Q1","Q2","Q3","Q4"],Im:["1st quarter","2nd quarter","3rd quarter","4th quarter"],Am:["AM","PM"],Bm:["EEEE, MMMM d, y","MMMM d, y","MMM d, y","M/d/yy"],Sm:["h:mm:ss a zzzz","h:mm:ss a z","h:mm:ss a","h:mm a"],Yj:6,Um:[5,6],Zj:5};var md=/^(\d{4})(?:(?:-?(\d{2})(?:-?(\d{2}))?)|(?:-?(\d{3}))|(?:-?W(\d{2})(?:-?([1-7]))?))?$/,nd=/^(\d{2})(?::?(\d{2})(?::?(\d{2})(\.\d+)?)?)?$/,od=/Z|(?:([-+])(\d{2})(?::?(\d{2}))?)$/;
function pd(a){var b=new qd(2E3),a=Ca(a),a=a.split(-1==a.indexOf("T")?" ":"T"),c;var d=a[0].match(md);if(d){var f=Number(d[2]),g=Number(d[3]),h=Number(d[4]);c=Number(d[5]);var n=Number(d[6])||1;b.setFullYear(Number(d[1]));h?(b.setDate(1),b.setMonth(0),b.add(new rd(sd,h-1))):c?(b.setMonth(0),b.setDate(1),d=b.getDay()||7,b.add(new rd(sd,(4>=d?1-d:8-d)+(Number(n)+7*(Number(c)-1))-1))):(f&&(b.setDate(1),b.setMonth(f-1)),g&&b.setDate(g));c=j}else c=l;if(c&&!(c=2>a.length))a=a[1],c=a.match(od),n=0,c&&("Z"!=
c[0]&&(n=60*c[2]+Number(c[3]),n*="-"==c[1]?1:-1),n-=b.getTimezoneOffset(),a=a.substr(0,a.length-c[0].length)),(c=a.match(nd))?(b.setHours(Number(c[1])),b.setMinutes(Number(c[2])||0),b.setSeconds(Number(c[3])||0),b.setMilliseconds(c[4]?1E3*c[4]:0),0!=n&&b.setTime(b.getTime()+6E4*n),c=j):c=l;return c?b:k}
function rd(a,b,c,d,f,g){p(a)?(this.Wa=a==td?b:0,this.Pa=a==ud?b:0,this.La=a==sd?b:0,this.Ca=a==vd?b:0,this.Da=a==wd?b:0,this.Ga=a==xd?b:0):(this.Wa=a||0,this.Pa=b||0,this.La=c||0,this.Ca=d||0,this.Da=f||0,this.Ga=g||0)}
rd.prototype.ue=function(a){var b=Math.min(this.Wa,this.Pa,this.La,this.Ca,this.Da,this.Ga),c=Math.max(this.Wa,this.Pa,this.La,this.Ca,this.Da,this.Ga);if(0>b&&0<c)return k;if(!a&&0==b&&0==c)return"PT0S";c=[];0>b&&c.push("-");c.push("P");(this.Wa||a)&&c.push(Math.abs(this.Wa)+"Y");(this.Pa||a)&&c.push(Math.abs(this.Pa)+"M");(this.La||a)&&c.push(Math.abs(this.La)+"D");if(this.Ca||this.Da||this.Ga||a)c.push("T"),(this.Ca||a)&&c.push(Math.abs(this.Ca)+"H"),(this.Da||a)&&c.push(Math.abs(this.Da)+"M"),
(this.Ga||a)&&c.push(Math.abs(this.Ga)+"S");return c.join("")};rd.prototype.clone=function(){return new rd(this.Wa,this.Pa,this.La,this.Ca,this.Da,this.Ga)};var td="y",ud="m",sd="d",vd="h",wd="n",xd="s";rd.prototype.add=function(a){this.Wa+=a.Wa;this.Pa+=a.Pa;this.La+=a.La;this.Ca+=a.Ca;this.Da+=a.Da;this.Ga+=a.Ga};
function yd(a,b,c){qa(a)?(this.t=new Date(a,b||0,c||1),zd(this,c||1)):ta(a)?(this.t=new Date(a.getFullYear(),a.getMonth(),a.getDate()),zd(this,a.getDate())):(this.t=new Date(s()),this.t.setHours(0),this.t.setMinutes(0),this.t.setSeconds(0),this.t.setMilliseconds(0))}m=yd.prototype;m.Qe=ld.Yj;m.Re=ld.Zj;m.clone=function(){var a=new yd(this.t);a.Qe=this.Qe;a.Re=this.Re;return a};m.getFullYear=function(){return this.t.getFullYear()};m.getYear=function(){return this.getFullYear()};m.getMonth=function(){return this.t.getMonth()};
m.getDate=function(){return this.t.getDate()};m.getTime=function(){return this.t.getTime()};m.getDay=function(){return this.t.getDay()};m.getUTCHours=function(){return this.t.getUTCHours()};m.getTimezoneOffset=function(){return this.t.getTimezoneOffset()};function Ad(a){a=a.getTimezoneOffset();if(0==a)a="Z";else var b=Math.abs(a)/60,c=Math.floor(b),b=60*(b-c),a=(0<a?"-":"+")+Ja(c)+":"+Ja(b);return a}m.set=function(a){this.t=new Date(a.getFullYear(),a.getMonth(),a.getDate())};m.setFullYear=function(a){this.t.setFullYear(a)};
m.setMonth=function(a){this.t.setMonth(a)};m.setDate=function(a){this.t.setDate(a)};m.setTime=function(a){this.t.setTime(a)};
m.add=function(a){if(a.Wa||a.Pa){var b=this.getMonth()+a.Pa+12*a.Wa,c=this.getYear()+Math.floor(b/12),b=b%12;0>b&&(b+=12);var d;a:{switch(b){case 1:d=0==c%4&&(0!=c%100||0==c%400)?29:28;break a;case 5:case 8:case 10:case 3:d=30;break a}d=31}d=Math.min(d,this.getDate());this.setDate(1);this.setFullYear(c);this.setMonth(b);this.setDate(d)}a.La&&(a=new Date((new Date(this.getYear(),this.getMonth(),this.getDate(),12)).getTime()+864E5*a.La),this.setDate(1),this.setFullYear(a.getFullYear()),this.setMonth(a.getMonth()),
this.setDate(a.getDate()),zd(this,a.getDate()))};m.ue=function(a,b){return[this.getFullYear(),Ja(this.getMonth()+1),Ja(this.getDate())].join(a?"-":"")+(b?Ad(this):"")};m.toString=function(){return this.ue()};function zd(a,b){a.getDate()!=b&&a.t.setUTCHours(a.t.getUTCHours()+(a.getDate()<b?1:-1))}m.valueOf=function(){return this.t.valueOf()};function qd(a,b,c,d,f,g,h){this.t=qa(a)?new Date(a,b||0,c||1,d||0,f||0,g||0,h||0):new Date(a?a.getTime():s())}t(qd,yd);m=qd.prototype;m.getHours=function(){return this.t.getHours()};
m.getMinutes=function(){return this.t.getMinutes()};m.getSeconds=function(){return this.t.getSeconds()};m.getUTCHours=function(){return this.t.getUTCHours()};m.setHours=function(a){this.t.setHours(a)};m.setMinutes=function(a){this.t.setMinutes(a)};m.setSeconds=function(a){this.t.setSeconds(a)};m.setMilliseconds=function(a){this.t.setMilliseconds(a)};m.setUTCHours=function(a){this.t.setUTCHours(a)};
m.add=function(a){yd.prototype.add.call(this,a);a.Ca&&this.setHours(this.t.getHours()+a.Ca);a.Da&&this.setMinutes(this.t.getMinutes()+a.Da);a.Ga&&this.setSeconds(this.t.getSeconds()+a.Ga)};m.ue=function(a,b){var c=yd.prototype.ue.call(this,a);return a?c+" "+Ja(this.getHours())+":"+Ja(this.getMinutes())+":"+Ja(this.getSeconds())+(b?Ad(this):""):c+"T"+Ja(this.getHours())+Ja(this.getMinutes())+Ja(this.getSeconds())+(b?Ad(this):"")};m.toString=function(){return this.ue()};
m.clone=function(){var a=new qd(this.t);a.Qe=this.Qe;a.Re=this.Re;return a};function Bd(a){J.call(this);this.N=a;this.T=[]}t(Bd,J);var Cd=[];function P(a,b,c,d,f){na(c)||(Cd[0]=c,c=Cd);for(var g=0;g<c.length;g++){var h=K(b,c[g],d||a,f||l,a.N||a);a.T.push(h)}return a}function Dd(a,b,c,d,f,g){if(na(c))for(var h=0;h<c.length;h++)Dd(a,b,c[h],d,f,g);else b=Tc(b,c,d||a,f,g||a.N||a),a.T.push(b)}
function Ed(a,b,c,d,f,g){if(na(c))for(var h=0;h<c.length;h++)Ed(a,b,c[h],d,f,g);else{a:{d=d||a;g=g||a.N||a;f=!!f;if(b=Vc(b,c,f))for(c=0;c<b.length;c++)if(!b[c].Dc&&b[c].kd==d&&b[c].capture==f&&b[c].We==g){b=b[c];break a}b=k}b&&(b=b.key,Wc(b),Ta(a.T,b))}return a}function Fd(a){u(a.T,Wc);a.T.length=0}Bd.prototype.n=function(){Bd.d.n.call(this);Fd(this)};Bd.prototype.handleEvent=function(){e(Error("EventHandler.handleEvent not implemented"))};function Gd(a,b,c,d){this.top=a;this.right=b;this.bottom=c;this.left=d}Gd.prototype.clone=function(){return new Gd(this.top,this.right,this.bottom,this.left)};Gd.prototype.contains=function(a){return!this||!a?l:a instanceof Gd?a.left>=this.left&&a.right<=this.right&&a.top>=this.top&&a.bottom<=this.bottom:a.x>=this.left&&a.x<=this.right&&a.y>=this.top&&a.y<=this.bottom};function Hd(a,b,c,d){this.left=a;this.top=b;this.width=c;this.height=d}Hd.prototype.clone=function(){return new Hd(this.left,this.top,this.width,this.height)};Hd.prototype.contains=function(a){return a instanceof Hd?this.left<=a.left&&this.left+this.width>=a.left+a.width&&this.top<=a.top&&this.top+this.height>=a.top+a.height:a.x>=this.left&&a.x<=this.left+this.width&&a.y>=this.top&&a.y<=this.top+this.height};function Id(a,b,c){p(b)?Jd(a,c,b):Lb(b,za(Jd,a))}function Jd(a,b,c){a.style[Ka(c)]=b}function Kd(a,b){var c=Wb(a);return c.defaultView&&c.defaultView.getComputedStyle&&(c=c.defaultView.getComputedStyle(a,k))?c[b]||c.getPropertyValue(b)||"":""}function Ld(a,b){return a.currentStyle?a.currentStyle[b]:k}function Md(a,b){return Kd(a,b)||Ld(a,b)||a.style&&a.style[b]}function Nd(a,b,c){var d,f=lb&&(fb||ob)&&xb("1.9");b instanceof Ib?(d=b.x,b=b.y):(d=b,b=c);a.style.left=Od(d,f);a.style.top=Od(b,f)}
function Pd(a){return new Ib(a.offsetLeft,a.offsetTop)}function Qd(a){var b=a.getBoundingClientRect();x&&(a=a.ownerDocument,b.left-=a.documentElement.clientLeft+a.body.clientLeft,b.top-=a.documentElement.clientTop+a.body.clientTop);return b}
function Rd(a){if(x&&!Ab(8))return a.offsetParent;for(var b=Wb(a),c=Md(a,"position"),d="fixed"==c||"absolute"==c,a=a.parentNode;a&&a!=b;a=a.parentNode)if(c=Md(a,"position"),d=d&&"static"==c&&a!=b.documentElement&&a!=b.body,!d&&(a.scrollWidth>a.clientWidth||a.scrollHeight>a.clientHeight||"fixed"==c||"absolute"==c||"relative"==c))return a;return k}
function Sd(a){for(var b=new Gd(0,Infinity,Infinity,0),c=Ub(a),d=c.G.body,f=c.G.documentElement,g=!mb&&$b(c.G)?c.G.documentElement:c.G.body;a=Rd(a);)if((!x||0!=a.clientWidth)&&(!mb||0!=a.clientHeight||a!=d)&&a!=d&&a!=f&&"visible"!=Md(a,"overflow")){var h=Td(a),n;n=a;if(lb&&!xb("1.9")){var r=parseFloat(Kd(n,"borderLeftWidth"));if(Ud(n))var v=n.offsetWidth-n.clientWidth-r-parseFloat(Kd(n,"borderRightWidth")),r=r+v;n=new Ib(r,parseFloat(Kd(n,"borderTopWidth")))}else n=new Ib(n.clientLeft,n.clientTop);
h.x+=n.x;h.y+=n.y;b.top=Math.max(b.top,h.y);b.right=Math.min(b.right,h.x+a.clientWidth);b.bottom=Math.min(b.bottom,h.y+a.clientHeight);b.left=Math.max(b.left,h.x)}d=g.scrollLeft;g=g.scrollTop;b.left=Math.max(b.left,d);b.top=Math.max(b.top,g);c=F(c.G.parentWindow||c.G.defaultView);b.right=Math.min(b.right,d+c.width);b.bottom=Math.min(b.bottom,g+c.height);return 0<=b.top&&0<=b.left&&b.bottom>b.top&&b.right>b.left?b:k}
function Td(a){var b,c=Wb(a),d=Md(a,"position"),f=lb&&c.getBoxObjectFor&&!a.getBoundingClientRect&&"absolute"==d&&(b=c.getBoxObjectFor(a))&&(0>b.screenX||0>b.screenY),g=new Ib(0,0),h;b=c?Wb(c):document;h=x&&!Ab(9)&&!rc(Ub(b))?b.body:b.documentElement;if(a==h)return g;if(a.getBoundingClientRect)b=Qd(a),a=sc(Ub(c)),g.x=b.left+a.x,g.y=b.top+a.y;else if(c.getBoxObjectFor&&!f)b=c.getBoxObjectFor(a),a=c.getBoxObjectFor(h),g.x=b.screenX-a.screenX,g.y=b.screenY-a.screenY;else{b=a;do{g.x+=b.offsetLeft;g.y+=
b.offsetTop;b!=a&&(g.x+=b.clientLeft||0,g.y+=b.clientTop||0);if(mb&&"fixed"==Md(b,"position")){g.x+=c.body.scrollLeft;g.y+=c.body.scrollTop;break}b=b.offsetParent}while(b&&b!=a);if(kb||mb&&"absolute"==d)g.y-=c.body.offsetTop;for(b=a;(b=Rd(b))&&b!=c.body&&b!=h;)if(g.x-=b.scrollLeft,!kb||"TR"!=b.tagName)g.y-=b.scrollTop}return g}function Vd(a,b){var c,d=Td(a);b instanceof Ib&&(c=b.y,b=b.x);Nd(a,a.offsetLeft+(b-d.x),a.offsetTop+(c-d.y))}
function Od(a,b){"number"==typeof a&&(a=(b?Math.round(a):a)+"px");return a}function Wd(a,b){a.style.height=Od(b,j)}function Xd(a,b){a.style.width=Od(b,j)}function Q(a){if("none"!=Md(a,"display"))return Yd(a);var b=a.style,c=b.display,d=b.visibility,f=b.position;b.visibility="hidden";b.position="absolute";b.display="inline";a=Yd(a);b.display=c;b.position=f;b.visibility=d;return a}
function Yd(a){var b=a.offsetWidth,c=a.offsetHeight,d=mb&&!b&&!c;return(!ha(b)||d)&&a.getBoundingClientRect?(a=Qd(a),new Kb(a.right-a.left,a.bottom-a.top)):new Kb(b,c)}function Zd(a){var b=Td(a),a=Q(a);return new Hd(b.x,b.y,a.width,a.height)}function $d(a,b){var c=a.style;"opacity"in c?c.opacity=b:"MozOpacity"in c?c.MozOpacity=b:"filter"in c&&(c.filter=""===b?"":"alpha(opacity="+100*b+")")}function O(a,b){a.style.display=b?"":"none"}function Ud(a){return"rtl"==Md(a,"direction")}
var ae=lb?"MozUserSelect":mb?"WebkitUserSelect":k;function be(a,b){if(/^\d+px?$/.test(b))return parseInt(b,10);var c=a.style.left,d=a.runtimeStyle.left;a.runtimeStyle.left=a.currentStyle.left;a.style.left=b;var f=a.style.pixelLeft;a.style.left=c;a.runtimeStyle.left=d;return f}
function ce(a,b){if(x){var c=be(a,Ld(a,b+"Left")),d=be(a,Ld(a,b+"Right")),f=be(a,Ld(a,b+"Top")),g=be(a,Ld(a,b+"Bottom"));return new Gd(f,d,g,c)}c=Kd(a,b+"Left");d=Kd(a,b+"Right");f=Kd(a,b+"Top");g=Kd(a,b+"Bottom");return new Gd(parseFloat(f),parseFloat(d),parseFloat(g),parseFloat(c))}var de={thin:2,medium:4,thick:6};function ee(a,b){if("none"==Ld(a,b+"Style"))return 0;var c=Ld(a,b+"Width");return c in de?de[c]:be(a,c)}
function fe(a){if(x){var b=ee(a,"borderLeft"),c=ee(a,"borderRight"),d=ee(a,"borderTop"),a=ee(a,"borderBottom");return new Gd(d,c,a,b)}b=Kd(a,"borderLeftWidth");c=Kd(a,"borderRightWidth");d=Kd(a,"borderTopWidth");a=Kd(a,"borderBottomWidth");return new Gd(parseFloat(d),parseFloat(c),parseFloat(a),parseFloat(b))}var ge=/matrix\([0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, ([0-9\.\-]+)p?x?, ([0-9\.\-]+)p?x?\)/;function he(a,b,c){J.call(this);this.target=a;this.handle=b||a;this.Pi=c||new Hd(NaN,NaN,NaN,NaN);this.G=Wb(a);this.u=new Bd(this);K(this.handle,["touchstart","mousedown"],this.Jc,l,this)}t(he,$c);var ie=x||lb&&xb("1.9.3");m=he.prototype;m.clientX=0;m.clientY=0;m.screenX=0;m.screenY=0;m.Ij=0;m.Jj=0;m.Wc=0;m.Xc=0;m.Yf=j;m.sa=l;m.gg=0;m.hl=0;m.Xk=l;m.ze=l;m.k=ca("u");m.Xg=function(a){this.gg=Math.pow(a,2)};m.Dj=ba("of");m.gb=ba("Yf");
m.n=function(){he.d.n.call(this);Uc(this.handle,["touchstart","mousedown"],this.Jc,l,this);Fd(this.u);ie&&this.G.releaseCapture();this.u=this.handle=this.target=k};function je(a){ha(a.Ra)||(a.Ra=Ud(a.target));return a.Ra}
m.Jc=function(a){var b="mousedown"==a.type;if(this.Yf&&!this.sa&&(!b||Lc(a))){ke(a);if(0==this.gg)if(this.dispatchEvent(new le("start",this,a.clientX,a.clientY,a)))this.sa=j,a.preventDefault();else return;else a.preventDefault();var b=this.G,c=b.documentElement,d=!ie;P(this.u,b,["touchmove","mousemove"],this.Sk,d);P(this.u,b,["touchend","mouseup"],this.qc,d);ie?(c.setCapture(l),P(this.u,c,"losecapture",this.qc)):P(this.u,b?b.parentWindow||b.defaultView:window,"blur",this.qc);x&&this.Xk&&P(this.u,
b,"dragstart",Hc);this.of&&P(this.u,this.of,"scroll",this.lj,d);this.clientX=this.Ij=a.clientX;this.clientY=this.Jj=a.clientY;this.screenX=a.screenX;this.screenY=a.screenY;this.ze?(a=this.target,b=a.offsetLeft,c=a.offsetParent,!c&&"fixed"==Md(a,"position")&&(c=Wb(a).documentElement),c?(lb?(d=fe(c),b+=d.left):Ab(8)&&(d=fe(c),b-=d.left),a=Ud(c)?c.clientWidth-(b+a.offsetWidth):b):a=b):a=this.target.offsetLeft;this.Wc=a;this.Xc=this.target.offsetTop;this.Fg=sc(Ub(this.G));this.hl=s()}else this.dispatchEvent("earlycancel")};
m.qc=function(a,b){Fd(this.u);ie&&this.G.releaseCapture();if(this.sa){ke(a);this.sa=l;var c=me(this,this.Wc),d=ne(this,this.Xc);this.dispatchEvent(new le("end",this,a.clientX,a.clientY,a,c,d,b||"touchcancel"==a.type))}else this.dispatchEvent("earlycancel");("touchend"==a.type||"touchcancel"==a.type)&&a.preventDefault()};
function ke(a){var b=a.type;"touchstart"==b||"touchmove"==b?a.init(a.ia.targetTouches[0],a.currentTarget):("touchend"==b||"touchcancel"==b)&&a.init(a.ia.changedTouches[0],a.currentTarget)}
m.Sk=function(a){if(this.Yf){ke(a);var b=(this.ze&&je(this)?-1:1)*(a.clientX-this.clientX),c=a.clientY-this.clientY;this.clientX=a.clientX;this.clientY=a.clientY;this.screenX=a.screenX;this.screenY=a.screenY;if(!this.sa){var d=this.Ij-this.clientX,f=this.Jj-this.clientY;if(d*d+f*f>this.gg)if(this.dispatchEvent(new le("start",this,a.clientX,a.clientY,a)))this.sa=j;else{this.Me||this.qc(a);return}}c=oe(this,b,c);b=c.x;c=c.y;this.sa&&this.dispatchEvent(new le("beforedrag",this,a.clientX,a.clientY,a,
b,c))&&(pe(this,a,b,c),a.preventDefault())}};function oe(a,b,c){var d=sc(Ub(a.G)),b=b+(d.x-a.Fg.x),c=c+(d.y-a.Fg.y);a.Fg=d;a.Wc+=b;a.Xc+=c;b=me(a,a.Wc);a=ne(a,a.Xc);return new Ib(b,a)}m.lj=function(a){var b=oe(this,0,0);a.clientX=this.clientX;a.clientY=this.clientY;pe(this,a,b.x,b.y)};function pe(a,b,c,d){a.Ld(c,d);a.dispatchEvent(new le("drag",a,b.clientX,b.clientY,b,c,d))}
function me(a,b){var c=a.Pi,d=!isNaN(c.left)?c.left:k,c=!isNaN(c.width)?c.width:0;return Math.min(d!=k?d+c:Infinity,Math.max(d!=k?d:-Infinity,b))}function ne(a,b){var c=a.Pi,d=!isNaN(c.top)?c.top:k,c=!isNaN(c.height)?c.height:0;return Math.min(d!=k?d+c:Infinity,Math.max(d!=k?d:-Infinity,b))}m.Ld=function(a,b){this.ze&&je(this)?this.target.style.right=a+"px":this.target.style.left=a+"px";this.target.style.top=b+"px"};
function le(a,b,c,d,f,g,h,n){Gc.call(this,a);this.clientX=c;this.clientY=d;this.If=f;this.left=ha(g)?g:b.Wc;this.top=ha(h)?h:b.Xc;this.ok=b;this.mk=!!n}t(le,Gc);function qe(){J.call(this);this.l=re;this.Od=this.startTime=k}t(qe,$c);var re=0;qe.prototype.Sb=function(){this.ra("begin")};qe.prototype.Tb=function(){this.ra("end")};qe.prototype.ra=function(a){this.dispatchEvent(a)};function se(a,b,c){J.call(this);this.Nb=a;this.R=b||0;this.N=c;this.Kf=q(this.Md,this)}t(se,J);m=se.prototype;m.ua=0;m.n=function(){se.d.n.call(this);this.stop();delete this.Nb;delete this.N};m.start=function(a){this.stop();this.ua=L(this.Kf,ha(a)?a:this.R)};m.stop=function(){this.Kb()&&bd.clearTimeout(this.ua);this.ua=0};m.Qd=function(){this.stop();this.Md()};m.Kb=function(){return 0!=this.ua};m.Md=function(){this.ua=0;this.Nb&&this.Nb.call(this.N)};var te;te=da(k);var ue={},ve=k;function we(a){a=ua(a);delete ue[a];Ob(ue)&&ve&&ve.stop()}function xe(){ve||(ve=new se(function(){var a=s();Lb(ue,function(c){ye(c,a)});Ob(ue)||xe()},20));var a=ve;a.Kb()||a.start()};function ze(a,b,c,d){qe.call(this);(!na(a)||!na(b))&&e(Error("Start and end parameters must be arrays"));a.length!=b.length&&e(Error("Start and end points must be the same length"));this.qe=a;this.rk=b;this.duration=c;this.xh=d;this.coords=[];this.ze=l}t(ze,qe);m=ze.prototype;m.fi=0;m.Ea=0;m.og=k;
m.play=function(a){if(a||this.l==re)this.Ea=0,this.coords=this.qe;else if(1==this.l)return l;we(this);this.startTime=a=s();-1==this.l&&(this.startTime-=this.duration*this.Ea);this.Od=this.startTime+this.duration;this.og=this.startTime;this.Ea||this.Sb();this.ra("play");-1==this.l&&this.ra("resume");this.l=1;var b=ua(this);b in ue||(ue[b]=this);xe();ye(this,a);return j};m.stop=function(a){we(this);this.l=re;a&&(this.Ea=1);Ae(this,this.Ea);this.ra("stop");this.Tb()};m.Se=ca("Ea");
m.n=function(){this.l==re||this.stop(l);this.ra("destroy");ze.d.n.call(this)};function ye(a,b){a.Ea=(b-a.startTime)/(a.Od-a.startTime);1<=a.Ea&&(a.Ea=1);a.fi=1E3/(b-a.og);a.og=b;Ae(a,a.Ea);1==a.Ea?(a.l=re,we(a),a.ra("finish"),a.Tb()):1==a.l&&a.xg()}function Ae(a,b){ra(a.xh)&&(b=a.xh(b));a.coords=Array(a.qe.length);for(var c=0;c<a.qe.length;c++)a.coords[c]=(a.rk[c]-a.qe[c])*b+a.qe[c]}m.xg=function(){this.ra("animate")};m.ra=function(a){this.dispatchEvent(new Be(a,this))};
function Be(a,b){Gc.call(this,a);this.coords=b.coords;this.x=b.coords[0];this.y=b.coords[1];this.On=b.coords[2];this.duration=b.duration;this.Ea=b.Se();this.rn=b.fi;this.state=b.l;this.Wm=b}t(Be,Gc);function Ce(a,b,c,d,f){ze.call(this,b,c,d,f);this.element=a}t(Ce,ze);m=Ce.prototype;m.ye=ja;m.Hi=function(){ha(this.Ra)||(this.Ra=Ud(this.element));return this.Ra};m.xg=function(){this.ye();Ce.d.xg.call(this)};m.Tb=function(){this.ye();Ce.d.Tb.call(this)};m.Sb=function(){this.ye();Ce.d.Sb.call(this)};function De(a,b,c,d,f){(2!=b.length||2!=c.length)&&e(Error("Start and end points must be 2D"));Ce.apply(this,arguments)}t(De,Ce);
De.prototype.ye=function(){if(this.ze){var a=this.element,b=Math.round(this.coords[0]),b=Math.max(b,0);a.scrollLeft=Ud(a)?lb?-b:!x||!xb("8")?a.scrollWidth-b-a.clientWidth:b:b}else this.element.scrollLeft=Math.round(this.coords[0]);this.element.scrollTop=Math.round(this.coords[1])};function Ee(a,b,c,d,f){qa(b)&&(b=[b]);qa(c)&&(c=[c]);Ce.call(this,a,b,c,d,f);(1!=b.length||1!=c.length)&&e(Error("Start and end points must be 1D"))}t(Ee,Ce);Ee.prototype.ye=function(){$d(this.element,this.coords[0])};
Ee.prototype.show=function(){this.element.style.display=""};Ee.prototype.hide=function(){this.element.style.display="none"};function Fe(a,b,c){Ee.call(this,a,1,0,b,c)}t(Fe,Ee);Fe.prototype.Sb=function(){this.show();Fe.d.Sb.call(this)};Fe.prototype.Tb=function(){this.hide();Fe.d.Tb.call(this)};function Ge(a,b,c){Ee.call(this,a,0,1,b,c)}t(Ge,Ee);Ge.prototype.Sb=function(){this.show();Ge.d.Sb.call(this)};function He(){}la(He);He.prototype.ml=0;He.a();function R(a){J.call(this);this.oc=a||Ub();this.Ra=Ie}t(R,$c);R.prototype.Wk=He.a();var Ie=k;function Je(a,b){switch(a){case 1:return b?"disable":"enable";case 2:return b?"highlight":"unhighlight";case 4:return b?"activate":"deactivate";case 8:return b?"select":"unselect";case 16:return b?"check":"uncheck";case 32:return b?"focus":"blur";case 64:return b?"open":"close"}e(Error("Invalid component state"))}m=R.prototype;m.ua=k;m.$=l;m.e=k;m.Ra=k;m.q=k;m.O=k;m.ea=k;m.qa=k;m.Xj=l;
function Ke(a){return a.ua||(a.ua=":"+(a.Wk.ml++).toString(36))}m.b=ca("e");m.k=function(){return this.dd||(this.dd=new Bd(this))};m.rf=function(a){this==a&&e(Error("Unable to set parent component"));a&&(this.O&&this.ua&&this.O.qa&&this.ua&&Rb(this.O.qa,this.ua)&&this.O!=a)&&e(Error("Unable to set parent component"));this.O=a;R.d.Yg.call(this,a)};m.getParent=ca("O");m.Yg=function(a){this.O&&this.O!=a&&e(Error("Method not supported"));R.d.Yg.call(this,a)};m.Na=ca("oc");m.L=function(){this.e=this.oc.createElement("div")};
function Le(a,b){a.$&&e(Error("Component already rendered"));a.e||a.L();b?b.insertBefore(a.e,k):a.oc.G.body.appendChild(a.e);(!a.O||a.O.$)&&a.w()}m.g=function(a){this.$&&e(Error("Component already rendered"));if(a&&this.gc(a)){this.Xj=j;if(!this.oc||this.oc.G!=Wb(a))this.oc=Ub(a);this.F(a);this.w()}else e(Error("Invalid element to decorate"))};m.gc=da(j);m.F=ba("e");m.w=function(){this.$=j;Me(this,function(a){!a.$&&a.b()&&a.w()})};
m.rc=function(){Me(this,function(a){a.$&&a.rc()});this.dd&&Fd(this.dd);this.$=l};m.n=function(){R.d.n.call(this);this.$&&this.rc();this.dd&&(this.dd.ba(),delete this.dd);Me(this,function(a){a.ba()});!this.Xj&&this.e&&dc(this.e);this.O=this.q=this.e=this.qa=this.ea=k};
function Ne(a,b){var c=a.ea?a.ea.length:0;b.$&&!a.$&&e(Error("Component already rendered"));(0>c||c>(a.ea?a.ea.length:0))&&e(Error("Child component index out of bounds"));if(!a.qa||!a.ea)a.qa={},a.ea=[];if(b.getParent()==a){var d=Ke(b);a.qa[d]=b;Ta(a.ea,b)}else Qb(a.qa,Ke(b),b);b.rf(a);Za(a.ea,c,0,b);b.$&&a.$&&b.getParent()==a?(d=a.tb(),d.insertBefore(b.b(),d.childNodes[c]||k)):a.$&&(!b.$&&b.e&&b.e.parentNode)&&b.w()}m.tb=ca("e");
m.Hi=function(){this.Ra==k&&(this.Ra=Ud(this.$?this.e:this.oc.G.body));return this.Ra};m.Gc=function(a){this.$&&e(Error("Component already rendered"));this.Ra=a};function Me(a,b){a.ea&&u(a.ea,b,i)}m.removeChild=function(a,b){if(a){var c=p(a)?a:Ke(a),a=this.qa&&c?Rb(this.qa,c)||k:k;c&&a&&(Pb(this.qa,c),Ta(this.ea,a),b&&(a.rc(),a.e&&dc(a.e)),a.rf(k))}a||e(Error("Child is not in parent component"));return a};function Oe(a,b,c,d,f){if(!x&&(!mb||!xb("525")))return j;if(fb&&f)return Pe(a);if(f&&!d||!c&&(17==b||18==b)||x&&d&&b==a)return l;switch(a){case 13:return!(x&&Ab(9));case 27:return!mb}return Pe(a)}function Pe(a){if(48<=a&&57>=a||96<=a&&106>=a||65<=a&&90>=a||mb&&0==a)return j;switch(a){case 32:case 63:case 107:case 109:case 110:case 111:case 186:case 59:case 189:case 187:case 61:case 188:case 190:case 191:case 192:case 222:case 219:case 220:case 221:return j;default:return l}}
function Qe(a){switch(a){case 61:return 187;case 59:return 186;case 224:return 91;case 0:return 224;default:return a}};function Re(){}var Se;la(Re);m=Re.prototype;m.cd=aa();m.L=function(a){var b=a.Na().L("div",Te(this,a).join(" "),a.Za);Ue(this,a,b);return b};m.tb=function(a){return a};m.Nd=function(a,b,c){if(a=a.b?a.b():a)if(x&&!xb("7")){var d=Ve(Gb(a),b);d.push(b);za(c?y:z,a).apply(k,d)}else B(a,b,c)};m.gc=da(j);
m.g=function(a,b){if(b.id){var c=b.id;a.O&&a.O.qa&&(Pb(a.O.qa,a.ua),Qb(a.O.qa,c,a));a.ua=c}(c=this.tb(b))&&c.firstChild?(c=c.firstChild.nextSibling?Wa(c.childNodes):c.firstChild,a.Za=c):a.Za=k;var d=0,f=this.la(),g=this.la(),h=l,n=l,c=l,r=Gb(b);u(r,function(a){if(!h&&a==f)h=j,g==f&&(n=j);else if(!n&&a==g)n=j;else{var b=d;if(!this.Kj){this.Ge||We(this);var c=this.Ge,r={},v;for(v in c)r[c[v]]=v;this.Kj=r}a=parseInt(this.Kj[a],10);d=b|(isNaN(a)?0:a)}},this);a.l=d;h||(r.push(f),g==f&&(n=j));n||r.push(g);
var v=a.Ma;v&&r.push.apply(r,v);if(x&&!xb("7")){var w=Ve(r);0<w.length&&(r.push.apply(r,w),c=j)}if(!h||!n||v||c)b.className=r.join(" ");Ue(this,a,b);return b};m.Bi=function(a){a.Hi()&&this.Gc(a.b(),j);a.isEnabled()&&this.ud(a,a.cb())};function Ue(a,b,c){b.isEnabled()||a.Va(c,1,j);b.l&8&&a.Va(c,8,j);b.ja&16&&a.Va(c,16,Xe(b));b.ja&64&&a.Va(c,64,!!(b.l&64))}
m.td=function(a,b){var c=!b,d=x||kb?a.getElementsByTagName("*"):k;if(ae){if(c=c?"none":"",a.style[ae]=c,d)for(var f=0,g;g=d[f];f++)g.style[ae]=c}else if(x||kb)if(c=c?"on":"",a.setAttribute("unselectable",c),d)for(f=0;g=d[f];f++)g.setAttribute("unselectable",c)};m.Gc=function(a,b){this.Nd(a,this.la()+"-rtl",b)};m.mg=function(a){var b;return a.ja&32&&(b=a.Ib())?mc(b):l};
m.ud=function(a,b){var c;if(a.ja&32&&(c=a.Ib())){if(!b&&a.Ud()){try{c.blur()}catch(d){}a.Ud()&&a.ji()}mc(c)!=b&&(b?c.tabIndex=0:(c.tabIndex=-1,c.removeAttribute("tabIndex")))}};m.Wb=function(a,b){O(a,b)};m.oa=function(a,b,c){var d=a.b();if(d){var f=Ye(this,b);f&&this.Nd(a,f,c);this.Va(d,b,c)}};m.Va=function(a,b,c){Se||(Se={1:"disabled",8:"selected",16:"checked",64:"expanded"});(b=Se[b])&&a.setAttribute("aria-"+b,c)};
m.Fc=function(a,b){var c=this.tb(a);if(c&&(bc(c),b))if(p(b))jc(c,b);else{var d=function(a){if(a){var b=Wb(c);c.appendChild(p(a)?b.createTextNode(a):a)}};na(b)?u(b,d):oa(b)&&!("nodeType"in b)?u(Wa(b),d):d(b)}};m.Ib=function(a){return a.b()};m.la=da("goog-control");function Te(a,b){var c=a.la(),d=[c],f=a.la();f!=c&&d.push(f);c=b.l;for(f=[];c;){var g=c&-c;f.push(Ye(a,g));c&=~g}d.push.apply(d,f);(c=b.Ma)&&d.push.apply(d,c);x&&!xb("7")&&d.push.apply(d,Ve(d));return d}
function Ve(a,b){var c=[];b&&(a=a.concat([b]));u([],function(d){Pa(d,za(Sa,a))&&(!b||Sa(d,b))&&c.push(d.join("_"))});return c}function Ye(a,b){a.Ge||We(a);return a.Ge[b]}function We(a){var b=a.la();a.Ge={1:b+"-disabled",2:b+"-hover",4:b+"-active",8:b+"-selected",16:b+"-checked",32:b+"-focused",64:b+"-open"}};function Ze(){}t(Ze,Re);la(Ze);m=Ze.prototype;m.cd=da("button");m.Va=function(a,b,c){16==b?a.setAttribute("aria-pressed",c):Ze.d.Va.call(this,a,b,c)};m.L=function(a){var b=Ze.d.L.call(this,a),c=a.Rd();c&&this.$g(b,c);(c=a.D())&&this.wa(b,c);a.ja&16&&this.Va(b,16,Xe(a));return b};m.g=function(a,b){var b=Ze.d.g.call(this,a,b),c=this.D(b);a.uh=c;a.jh=this.Rd(b);a.ja&16&&this.Va(b,16,Xe(a));return b};m.D=ja;m.wa=ja;m.Rd=function(a){return a.title};m.$g=function(a,b){a&&(a.title=b||"")};m.la=da("goog-button");function $e(a,b){J.call(this);a&&af(this,a,b)}t($e,$c);m=$e.prototype;m.e=k;m.Ze=k;m.ng=k;m.$e=k;m.Mb=-1;m.Lb=-1;m.Gf=l;
var bf={3:13,12:144,63232:38,63233:40,63234:37,63235:39,63236:112,63237:113,63238:114,63239:115,63240:116,63241:117,63242:118,63243:119,63244:120,63245:121,63246:122,63247:123,63248:44,63272:46,63273:36,63275:35,63276:33,63277:34,63289:144,63302:45},cf={Up:38,Down:40,Left:37,Right:39,Enter:13,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"U+007F":46,Home:36,End:35,PageUp:33,PageDown:34,Insert:45},df=x||mb&&xb("525"),ef=fb&&lb;m=$e.prototype;
m.Pk=function(a){if(mb&&(17==this.Mb&&!a.ctrlKey||18==this.Mb&&!a.altKey))this.Lb=this.Mb=-1;df&&!Oe(a.keyCode,this.Mb,a.shiftKey,a.ctrlKey,a.altKey)?this.handleEvent(a):(this.Lb=lb?Qe(a.keyCode):a.keyCode,ef&&(this.Gf=a.altKey))};m.Rk=function(a){this.Lb=this.Mb=-1;this.Gf=a.altKey};
m.handleEvent=function(a){var b=a.ia,c,d,f=b.altKey;x&&"keypress"==a.type?(c=this.Lb,d=13!=c&&27!=c?b.keyCode:0):mb&&"keypress"==a.type?(c=this.Lb,d=0<=b.charCode&&63232>b.charCode&&Pe(c)?b.charCode:0):kb?(c=this.Lb,d=Pe(c)?b.keyCode:0):(c=b.keyCode||this.Lb,d=b.charCode||0,ef&&(f=this.Gf),fb&&(63==d&&224==c)&&(c=191));var g=c,h=b.keyIdentifier;c?63232<=c&&c in bf?g=bf[c]:25==c&&a.shiftKey&&(g=9):h&&h in cf&&(g=cf[h]);a=g==this.Mb;this.Mb=g;b=new ff(g,d,a,b);b.altKey=f;this.dispatchEvent(b)};
m.b=ca("e");function af(a,b,c){a.$e&&a.detach();a.e=b;a.Ze=K(a.e,"keypress",a,c);a.ng=K(a.e,"keydown",a.Pk,c,a);a.$e=K(a.e,"keyup",a.Rk,c,a)}m.detach=function(){this.Ze&&(Wc(this.Ze),Wc(this.ng),Wc(this.$e),this.$e=this.ng=this.Ze=k);this.e=k;this.Lb=this.Mb=-1};m.n=function(){$e.d.n.call(this);this.detach()};function ff(a,b,c,d){d&&this.init(d,i);this.type="key";this.keyCode=a;this.charCode=b;this.repeat=c}t(ff,Jc);function gf(a,b){a||e(Error("Invalid class name "+a));ra(b)||e(Error("Invalid decorator function "+b))}var hf={};function jf(a,b,c){R.call(this,c);if(!b){for(var b=this.constructor,d;b;){d=ua(b);if(d=hf[d])break;b=b.d?b.d.constructor:k}b=d?ra(d.a)?d.a():new d:k}this.K=b;this.Za=a}t(jf,R);m=jf.prototype;m.Za=k;m.l=0;m.ja=39;m.pb=255;m.mm=0;m.zf=j;m.Ma=k;m.fg=j;m.De=l;m.rj=k;function kf(a){a.$&&l!=a.fg&&lf(a,l);a.fg=l}m.Ib=function(){return this.K.Ib(this)};
m.Nd=function(a,b){b?a&&(this.Ma?Sa(this.Ma,a)||this.Ma.push(a):this.Ma=[a],this.K.Nd(this,a,j)):a&&this.Ma&&(Ta(this.Ma,a),0==this.Ma.length&&(this.Ma=k),this.K.Nd(this,a,l))};m.L=function(){var a=this.K.L(this);this.e=a;var b=this.rj||this.K.cd();b&&a.setAttribute("role",b);this.De||this.K.td(a,l);this.cb()||this.K.Wb(a,l)};m.tb=function(){return this.K.tb(this.b())};m.gc=function(a){return this.K.gc(a)};
m.F=function(a){this.e=a=this.K.g(this,a);var b=this.rj||this.K.cd();b&&a.setAttribute("role",b);this.De||this.K.td(a,l);this.zf="none"!=a.style.display};m.w=function(){jf.d.w.call(this);this.K.Bi(this);if(this.ja&-2&&(this.fg&&lf(this,j),this.ja&32)){var a=this.Ib();if(a){var b=this.jd||(this.jd=new $e);af(b,a);P(P(P(this.k(),b,"key",this.Qk),a,"focus",this.Nk),a,"blur",this.ji)}}};
function lf(a,b){var c=a.k(),d=a.b();b?(P(P(P(P(c,d,"mouseover",a.pi),d,"mousedown",a.ni),d,"mouseup",a.qi),d,"mouseout",a.oi),a.Ve!=ja&&P(c,d,"contextmenu",a.Ve),x&&P(c,d,"dblclick",a.ki)):(Ed(Ed(Ed(Ed(c,d,"mouseover",a.pi),d,"mousedown",a.ni),d,"mouseup",a.qi),d,"mouseout",a.oi),a.Ve!=ja&&Ed(c,d,"contextmenu",a.Ve),x&&Ed(c,d,"dblclick",a.ki))}m.rc=function(){jf.d.rc.call(this);this.jd&&this.jd.detach();this.cb()&&this.isEnabled()&&this.K.ud(this,l)};
m.n=function(){jf.d.n.call(this);this.jd&&(this.jd.ba(),delete this.jd);delete this.K;this.Ma=this.Za=k};m.Fc=function(a){this.K.Fc(this.b(),a);this.Za=a};m.gi=function(){var a=this.Za;return!a?"":(p(a)?a:na(a)?Oa(a,pc).join(""):nc(a)).replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")};m.Gc=function(a){jf.d.Gc.call(this,a);var b=this.b();b&&this.K.Gc(b,a)};m.td=function(a){this.De=a;var b=this.b();b&&this.K.td(b,a)};m.cb=ca("zf");
m.Wb=function(a,b){if(b||this.zf!=a&&this.dispatchEvent(a?"show":"hide")){var c=this.b();c&&this.K.Wb(c,a);this.isEnabled()&&this.K.ud(this,a);this.zf=a;return j}return l};m.isEnabled=function(){return!(this.l&1)};m.gb=function(a){var b=this.getParent();if((!b||"function"!=typeof b.isEnabled||b.isEnabled())&&mf(this,1,!a))a||(this.setActive(l),nf(this,l)),this.cb()&&this.K.ud(this,a),this.oa(1,!a)};function nf(a,b){mf(a,2,b)&&a.oa(2,b)}m.Kb=function(){return!!(this.l&4)};
m.setActive=function(a){mf(this,4,a)&&this.oa(4,a)};function Xe(a){return!!(a.l&16)}function of(a,b){mf(a,16,b)&&a.oa(16,b)}m.Ud=function(){return!!(this.l&32)};m.Sa=function(a){mf(this,32,a)&&this.oa(32,a)};m.oa=function(a,b){this.ja&a&&b!=!!(this.l&a)&&(this.K.oa(this,a,b),this.l=b?this.l|a:this.l&~a)};function pf(a,b,c){a.$&&(a.l&b&&!c)&&e(Error("Component already rendered"));!c&&a.l&b&&a.oa(b,l);a.ja=c?a.ja|b:a.ja&~b}function qf(a,b){return!!(a.pb&b)&&!!(a.ja&b)}
function mf(a,b,c){return!!(a.ja&b)&&!!(a.l&b)!=c&&(!(a.mm&b)||a.dispatchEvent(Je(b,c)))&&!a.Me}m.pi=function(a){(!a.relatedTarget||!ic(this.b(),a.relatedTarget))&&(this.dispatchEvent("enter")&&this.isEnabled()&&qf(this,2))&&nf(this,j)};m.oi=function(a){if((!a.relatedTarget||!ic(this.b(),a.relatedTarget))&&this.dispatchEvent("leave"))qf(this,4)&&this.setActive(l),qf(this,2)&&nf(this,l)};m.Ve=ja;
m.ni=function(a){this.isEnabled()&&(qf(this,2)&&nf(this,j),Lc(a)&&(qf(this,4)&&this.setActive(j),this.K.mg(this)&&this.Ib().focus()));!this.De&&Lc(a)&&a.preventDefault()};m.qi=function(a){this.isEnabled()&&(qf(this,2)&&nf(this,j),this.Kb()&&(this.fe(a)&&qf(this,4))&&this.setActive(l))};m.ki=function(a){this.isEnabled()&&this.fe(a)};
m.fe=function(a){qf(this,16)&&of(this,!Xe(this));qf(this,8)&&mf(this,8,j)&&this.oa(8,j);if(qf(this,64)){var b=!(this.l&64);mf(this,64,b)&&this.oa(64,b)}b=new Gc("action",this);a&&(b.altKey=a.altKey,b.ctrlKey=a.ctrlKey,b.metaKey=a.metaKey,b.shiftKey=a.shiftKey,b.Hg=a.Hg);return this.dispatchEvent(b)};m.Nk=function(){qf(this,32)&&this.Sa(j)};m.ji=function(){qf(this,4)&&this.setActive(l);qf(this,32)&&this.Sa(l)};
m.Qk=function(a){return this.cb()&&this.isEnabled()&&this.eg(a)?(a.preventDefault(),a.stopPropagation(),j):l};m.eg=function(a){return 13==a.keyCode&&this.fe(a)};ra(jf)||e(Error("Invalid component class "+jf));ra(Re)||e(Error("Invalid renderer class "+Re));var rf=ua(jf);hf[rf]=Re;gf("goog-control",function(){return new jf(k)});function sf(){}t(sf,Ze);la(sf);m=sf.prototype;m.cd=aa();m.L=function(a){kf(a);a.pb&=-256;pf(a,32,l);return a.Na().L("button",{"class":Te(this,a).join(" "),disabled:!a.isEnabled(),title:a.Rd()||"",value:a.D()||""},a.gi()||"")};m.gc=function(a){return"BUTTON"==a.tagName||"INPUT"==a.tagName&&("button"==a.type||"submit"==a.type||"reset"==a.type)};m.g=function(a,b){kf(a);a.pb&=-256;pf(a,32,l);b.disabled&&y(b,Ye(this,1));return sf.d.g.call(this,a,b)};m.Bi=function(a){P(a.k(),a.b(),"click",a.fe)};m.td=ja;
m.Gc=ja;m.mg=function(a){return a.isEnabled()};m.ud=ja;m.oa=function(a,b,c){sf.d.oa.call(this,a,b,c);if((a=a.b())&&1==b)a.disabled=c};m.D=function(a){return a.value};m.wa=function(a,b){a&&(a.value=b)};m.Va=ja;function tf(a,b,c){jf.call(this,a,b||sf.a(),c)}t(tf,jf);m=tf.prototype;m.D=ca("uh");m.wa=function(a){this.uh=a;this.K.wa(this.b(),a)};m.Rd=ca("jh");m.$g=function(a){this.jh=a;this.K.$g(this.b(),a)};m.n=function(){tf.d.n.call(this);delete this.uh;delete this.jh};m.w=function(){tf.d.w.call(this);if(this.ja&32){var a=this.Ib();a&&P(this.k(),a,"keyup",this.eg)}};m.eg=function(a){return 13==a.keyCode&&"key"==a.type||32==a.keyCode&&"keyup"==a.type?this.fe(a):32==a.keyCode};gf("goog-button",function(){return new tf(k)});function uf(){}t(uf,Ze);la(uf);m=uf.prototype;m.L=function(a){var b={"class":"goog-inline-block "+Te(this,a).join(" "),title:a.Rd()||""},b=a.Na().L("div",b,vf(this,a.Za,a.Na()));Ue(this,a,b);return b};m.cd=da("button");m.tb=function(a){return a&&a.firstChild.firstChild};function vf(a,b,c){return c.L("div","goog-inline-block "+(a.la()+"-outer-box"),c.L("div","goog-inline-block "+(a.la()+"-inner-box"),b))}m.gc=function(a){return"DIV"==a.tagName};
m.g=function(a,b){wf(b,j);wf(b,l);var c;a:{c=tc(a.Na(),b);var d=this.la()+"-outer-box";if(c&&A(c,d)&&(c=tc(a.Na(),c),d=this.la()+"-inner-box",c&&A(c,d))){c=j;break a}c=l}c||b.appendChild(vf(this,b.childNodes,a.Na()));y(b,"goog-inline-block",this.la());return uf.d.g.call(this,a,b)};m.la=da("goog-custom-button");
function wf(a,b){if(a)for(var c=b?a.firstChild:a.lastChild,d;c&&c.parentNode==a;){d=b?c.nextSibling:c.previousSibling;if(3==c.nodeType){var f=c.nodeValue;if(""==Ca(f))a.removeChild(c);else{c.nodeValue=b?f.replace(/^[\s\xa0]+/,""):f.replace(/[\s\xa0]+$/,"");break}}else break;c=d}};function xf(a,b,c){tf.call(this,a,b||uf.a(),c)}t(xf,tf);gf("goog-custom-button",function(){return new xf(k)});function yf(){R.call(this);this.$b=2;this.R=5;this.uf=60*this.$b*this.R;this.Jh=[];this.Nf={};this.va=zf();this.Aa=0;this.Aj=this.zj=l;this.ag=this.ob=j;this.sa=l;this.fa=[T.a().m,T.a().m.h()];this.Si=0}t(yf,R);m=yf.prototype;
m.w=function(){yf.d.w.call(this);this.xd=D("ticker");this.yn=D("my-ticker");var a=D("go-live");this.wi=D("header");this.aa=D("channels");this.yi=1;this.Ia=Math.max(1280,F().width)*this.yi;this.kc=Q(D("controller")).height;N.a().subscribe(id,function(a){this.xf(a)},this);N.a().subscribe(hd,function(a){B(this.b(),"sidebar-toggled",a);this.ha(l,i,j);Af(this)},this);this.xf(A(this.b(),"toggled"));this.Yb=new qd;for(var b=60;b>=this.Yb.getMinutes();)b-=this.R;this.Yb.setMinutes(b);this.U=this.Yb.clone();
this.U.add(new rd(0,0,0,0,0*-this.R));this.sg=this.U.clone();this.sg.add(new rd(0,0,0,0,this.R*(this.$b+1)));Bf(this,this.$b,this.U);Xd(this.b(),this.Ia);this.Ub=(this.Ia-200)/this.uf;this.sm=this.Ia/this.$b;this.ic=document.createElement("style");this.ic.id="channel-name-offs";this.ic.type="text/css";document.getElementsByTagName("head")[0].appendChild(this.ic);this.ic.innerHTML="div#guide div.channels div.channel div.name{left:0 !important}";u(T.a().Tc,q(function(a){this.ec(a)},this));this.p=new he(this.b());
var c=this.ic,d=this.b();this.p.Ld=function(a){0>a&&a>-Q(d).width+F().width&&(window.currentChannel&&window.currentChannel.update(),this.target.style.left=a+"px",c.innerHTML="div#guide div.channels div.channel div.name{left:"+-a+"px !important}")};var b=D("now-left"),f=D("now-right");P(P(P(P(P(P(P(P(P(this.k(),dd.a().Id,cd,q(this.ih,this)),a,"click",q(function(){T.a().c(Cf,this.Y.q);N.a().c(jd,j)},this)),window,"resize",q(this.ha,this)),this.xd,"click",q(this.ha,this,j,i,l)),b,"click",q(this.vl,this)),
f,"click",q(this.Dl,this)),this.p,"beforedrag",q(function(){z(this.b(),"animate");y(this.b(),"drag");this.sa=j},this)),this.p,"end",q(function(){z(this.b(),"drag");y(this.b(),"animate");this.ob=this.sa=l;Af(this)},this)),this.wi,"mousewheel",q(function(a){a.preventDefault();a.stopPropagation();a=a.ia;z(this.b(),"animate");y(this.b(),"drag");this.sa=j;a=Pd(this.b()).x+(a.wheelDelta?a.wheelDelta:a.detail?-a.detail:0);0>a&&a>-1*this.Ia+F().width&&(Nd(this.b(),a),this.Y&&this.Y.update(),this.ic.innerHTML=
"div#guide div.channels div.channel div.name{left:"+-a+"px !important}");z(this.b(),"drag");y(this.b(),"animate");this.ob=this.sa=l;Af(this)},this));T.a().subscribe(Df,this.je,this);T.a().subscribe(Ef,this.ec,this);T.a().subscribe(Cf,this.hc,this);T.a().subscribe(Ff,q(function(){L(q(function(){this.ha(j)},this))},this));N.a().subscribe("toggle-admin",function(a){B(this.b(),"admin",a)},this);W.a().subscribe(Gf,this.Ig,this);this.je();this.va&&P(this.k(),this.p,"beforedrag",q(function(a){a.If.shiftKey&&
a.preventDefault()},this))};m.ec=function(a){if(!this.Nf[a.id]){if(!a.C){var b=new Hf(a,this.uf,this.Yb,0,this.U);Le(b,this.aa);this.Jh.push(b);this.Nf[a.id]=b;a.subscribe(If,function(){this.je()},this);var c=Xb("program",b.b());if(c=c[c.length-1])this.Si=Math.max(this.Si,Pd(c).x+Q(c).width+170)}a.id==T.a().m.id&&b&&(y(b.b(),"current"),this.Y=b,window.currentChannel=this.Y);this.cf=a.C?a:this.cf}};
m.xf=function(a){z(this.b(),"animate");this.ha(j,i,l);y(this.b(),"animate");var b=Math.min(this.aa.scrollHeight,190);B(this.b(),"toggled",a);Wd(this.b(),a?b+this.kc+19:this.kc);this.Y&&(this.aa.scrollTop=Pd(this.Y.b()).y);L(q(function(){Wd(this.aa,a?b:40);B(this.b(),"collapsed",!a);this.je();this.ha();if(this.Y){var c=this.aa,d=Pd(this.Y.b()).y;c.scrollTop!=d&&(c.scrollTop=d)}},this),a?0:800);a&&this.je();this.p&&this.p.gb(a)};
function Bf(a,b,c){for(var d=E("times",a.b()),f=0;f<=b;f++){var g=c.clone();g.add(new rd(0,0,0,0,a.R*f));var h=G,n={"class":"time",style:"width:"+(a.Ia-200)/a.$b+"px"},r=i,v=g.getHours();ha(r)||(r=j);var w=12==v;12<v&&(v-=12,w=j);0==v&&r&&(v=12);v=String(v);v+=":"+Ja(g.getMinutes());r&&(g=Aa("am"),r=Aa("pm"),v+=w?r:g);h=h("div",n,v);d.appendChild(h)}}
m.hc=function(a){this.Y&&z(this.Y.b(),"current");this.Y=this.Nf[a.id]||k;if(window.currentChannel=this.Y)y(this.Y.b(),"current"),L(q(this.ha,this,j,i,l));this.fa[0]=a};m.Ig=function(){this.cf=this.cf||Jf();T.a().c(Cf,this.cf);N.a().c(id,l)};
function Af(a){var b=D("now-left"),c=D("now-right"),d=(s()-a.U.getTime())/1E3*a.Ub,f=N.a().Hc?320:0,g=F().width-f,f=Q(a.b()).width-f-200;((a.fa[0].C?a.fa[0].queue.length:a.fa[0].rb+(a.Aa+1||0)+1<a.fa[0].ma.length)?((a.fa[0].h(a.Aa+1).time.getTime()-s())/1E3+a.fa[0].h(a.Aa+1).media.duration)*a.Ub+g:0)>f-d&&Kf(a);c.style.right=N.a().Hc?"320px":0;B(c,"now",!!(-Pd(a.xd).x<Pd(a.b()).x-g));B(b,"now",!!(-Pd(a.xd).x>Pd(a.b()).x));d=-1;0<=a.fa[0].rb+(a.Aa||0)-1&&a.fa[0].h(a.Aa-1)&&(d=(a.fa[0].h(a.Aa-1).time.getTime()-
a.U.getTime())/1E3*a.Ub);O(c,(a.fa[0].C?!!a.fa[0].queue.length:a.fa[0].rb+(a.Aa||0)+1<a.fa[0].ma.length)||A(c,"now"));O(b,0<d||A(b,"now"))}m.vl=function(){A(D("now-left"),"now")?T.a().m.h()==W.a().h()?this.ha(j,i,i,j):this.ha(l,i,i,j):this.ha(l,-1)};m.Dl=function(){A(D("now-right"),"now")?T.a().m.h()==W.a().h()?this.ha(j,i,i,j):this.ha(l,i,i,l):this.ha(l,1)};function Kf(a){var b=Math.ceil(a.$b/a.yi);Bf(a,1,a.sg);a.Ia+=a.sm;Xd(a.b(),a.Ia);a.$b++;a.sg.add(new rd(0,0,0,0,a.R*b));a.uf=60*a.$b*a.R}
m.ih=function(){if(N.a().vc||this.ag){var a=T.a().m&&T.a().m.C||l,b=T.a().m&&T.a().m.h(),c=W.a().h(),d=1E3*W.a().Se(),f=Math.round((s()-this.U.getTime())/1E3*this.Ub),d=c&&d?Math.round((c.time.getTime()+d-this.U.getTime())/1E3*this.Ub):f;Af(this);Nd(this.xd,f);B(this.xd,"go-live",!a&&!!b&&!!c&&b.id!=c.id&&45<Math.abs(d-f));this.ag?(this.ag=l,this.ha(j,i,l),y(this.b(),"animate")):this.sa||this.ha()}};
m.ha=function(a,b,c,d){this.ob=a!=i?!!a:this.ob;this.zj=a!=i?!!c:this.ob;this.Aa=this.ob?0:b?this.Aa+b:this.Aa;a=T.a().m.h(this.Aa);d=T.a().m.C?(d=Lf(T.a(),j))&&d.h():d?a:this.ob?W.a().h():this.fa[0].h(this.Aa);this.fa[1]=d;this.ob||z(this.b(),"tick-along");if((this.ob||b)&&this.U){var c=W.a().h(),f=W.a().getCurrentTime(),a=(s()-this.U.getTime())/1E3*this.Ub;for(c&&f&&Math.round((c.time.getTime()+f-this.U.getTime())/1E3*this.Ub);a+F().width>this.Ia-(N.a().Hc?320:0);)Kf(this);c=F().width-(N.a().Hc?
320:0);f=0;d&&(f=-(d.time.getTime()-this.U.getTime())/1E3*this.Ub+5);if(!d||!b&&N.a().vc&&a>-f+c-320)f=-Pd(this.xd).x+c-200,y(this.b(),"tick-along");f=Math.max(f,-Q(this.b()).width+c);f=Math.min(f,0);Nd(this.b(),f);this.ic.innerHTML="div#guide div.channels div.channel div.name{left:"+-f+"px !important}";if(!this.zj&&this.Y){var g=Pd(this.Y.b()).y-Q(this.wi).height,h=new De(this.aa,[this.aa.scrollLeft,this.aa.scrollTop],[this.aa.scrollLeft,g],100*this.Jh.length);P(this.k(),h,"end",q(function(){var a=
this.aa;a.scrollTop!=g&&(a.scrollTop=g);this.Aj=l},this));L(q(function(){this.Aj=j;h.play()},this),100)}}b&&Af(this)};m.je=function(){var a=Math.min(this.aa.scrollHeight,190);Wd(this.aa,A(this.b(),"toggled")?a:this.kc);Wd(this.b(),A(this.b(),"collapsed")?this.kc:a+this.kc+19);Wd(D("right-grad"),!A(this.b(),"toggled")?this.kc:a+this.kc+19)};function Mf(a){return'\t<div class="channel"><div class="programs-container"><div class="programs"></div><div class="suggest"><div class="spinner">...</div><div class="select-program"><div class="select-header">SUGGESTION BOX <div class="close"></div></div><div class="select-content"><div class="page"><input type="text" class="program-input" placeholder="Paste YouTube link"/><div class="page2"></div></div></div></div></div></div><div class="graph"></div><div class="viewers"></div><div class="name"><div class="text">'+
I(a.name)+'</div><div class="suggest-program"><div class="add-program button dark">+</div></div></div></div>'}
function Nf(a){return'<div class="info"><div class="thumb'+(a.repeat?" repeat":"")+'" style="background-image:url('+I(a.Ng.media.ib)+"); background-position: 50% "+I(a.Ng.media.wd)+'%"></div><div class="progress"></div><div class="title">'+I(a.Ng.media.name)+'</div><div class="stats"><div class="comment-count"><div class="icon"></div>'+I(a.media.Uc)+'</div><div class="like-count"><div class="icon"></div>'+I(a.media.lm)+'</div></div><div class="program-play"><div class="icon"></div></div><div class="program-plus"><div class="icon"></div></div><div class="viewers"></div>'+
(a.Ef?'<div class="remove"></div><div class="repos"></div>':"")+"</div>"}function Of(a){return'<div class="line"><div class="pic"><img src="'+I(a.i.P)+'"><a href="#channel:'+I(a.hk)+'"><div class="watch-with"><div>JOIN '+I(a.Hb)+"</div></div></a></div></div>"}function Pf(a){return'<div class="confirm-media"><div class="thumb" style="background-image:url('+I(a.se)+')"></div><div class="title">'+I(a.title)+'</div><div class="added">ADDED</div><div class="dark button">ADD</div></div>'};function Qf(){M.call(this)}t(Qf,M);la(Qf);function Sf(a){this.id=a.id;this.P=a.picture;this.name=a.name;this.description=a.description;this.link=a.link};function Tf(a){M.call(this);this.id=a.id;this.name=a.name;this.host="youtube";this.fd=a.host_id;this.Vk="http://www.youtube.com/watch?v="+a.host_id;this.duration=a.duration;this.live=!!a.live;this.yg=[];this.Pl=k;this.di=l;this.description=a.description;this.link=a.link||"xylocast.com/?m="+this.id;this.na=a.publisher&&new Sf(a.publisher);this.Vb=a.published&&pd(a.published+"Z");this.ib="http://i.ytimg.com/vi/"+this.fd+"/0.jpg";this.gh="http://i.ytimg.com/vi/"+this.fd+"/1.jpg";this.Gn="http://i.ytimg.com/vi/"+
this.fd+"/2.jpg";this.Hn="http://i.ytimg.com/vi/"+this.fd+"/3.jpg";this.fh=new Kb(480,360);this.wd=37;this.Fb=[];this.Rj=[];this.Uc=a.comment_count||0;this.lm=a.star_count||0;this.dl=a.like_count||0;this.hn=a.dislike_count||0;this.qf=[];this.wb={};this.ik=a.collection_id;this.subscribe(Uf,this.ak,this);this.subscribe(Vf,this.Vl,this);this.subscribe(Wf,this.Qc,this)}t(Tf,M);function Xf(a){return a.Vb.getMonth()+1+"/"+a.Vb.getDate()+"/"+a.Vb.getYear()}var Uf="add-comment",Vf="remove-comment",Wf="watching";
Tf.prototype.Ae=function(a){Qa(this.yg,function(b){return a.id==b.id})||this.yg.push(a)};Tf.prototype.ak=function(a){this.Fb.push(a);this.Uc+=1;a.i.id!=X.a().o.id&&Qf.a().c("show","commented on "+this.name,a.text,a.i,a.i.P,"#info:"+this.id)};Tf.prototype.Vl=function(a){Y("/_comment",te(),"POST","delete=true&id="+a);Ua(this.Fb,function(b){return b.id==a});this.Uc-=1};
Tf.prototype.Qc=function(a,b,c){c?(Pb(this.wb,a.id),a.Kd=k):(this.wb[a.id]=a,a.Kd=this,a.id!=X.a().o.id&&Qf.a().c("flash","is watching "+(b?b.name:""),this.name,a,this.gh,"#info:"+this.id))};function Yf(){M.call(this);this.Vi={}}t(Yf,M);la(Yf);function Zf(a,b){var c=a.get(b.id);c||(c=new Tf(b),a.add(c));return c}Yf.prototype.get=function(a){return Rb(this.Vi,a)};Yf.prototype.add=function(a){this.Vi[a.id]=a};function $f(a,b){M.call(this);var c=b||k,d=a||k;this.id=d?d.id:c.id;this.media=d?Zf(Yf.a(),d.media):c;Yf.a().add(this.media);this.time=d?pd(d.time+"Z"):new qd;this.async=d?d.async:j;this.seek=d?d.seek:k}t($f,M);function ag(a){return new $f(i,a)};function bg(a){M.call(this);this.id=a.id;this.name=a.name;this.url=a.profile_url;this.location=a.location||"";this.ym=a.welcomed;this.gn=a.demo;this.Hj=[];this.P=Ba("https://graph.facebook.com/%s/picture",this.id);for(this.color=Raphael.getColor();"#00bf85"==this.color||"#00bf2f"==this.color;)this.color=Raphael.getColor();this.Bf=a.access_level;this.Vm=[];this.tn=a.last_login?pd(a.last_login+"Z"):k;this.Dn=a.session_count;this.Xm=a.ave_session?a.ave_session.toFixed(2):k;this.fm=a.show_guide!=i?a.show_guide:
j;this.im=a.show_sidebar!=i?a.show_sidebar:j;this.Rl=a.post_facebook!=i?a.post_facebook:j;this.qj=a.post_twitter!=i?a.post_twitter:j;this.subscribe(cg,function(){this.qj=j},this)}t(bg,M);function zf(){return X.a().o.Bf==dg}bg.prototype.Hb=function(){var a=this.name.split(" ");return a&&a.length?a[0]:this.name};function eg(a,b){return Qa(a.Hj,function(a){return a.id==b.id})}var cg="twitter-auth",dg=2;function fg(a,b,c,d,f){this.id=a;this.i=b;this.V=c;this.lh=d;this.Mc=f||k;this.Xi=[]}fg.prototype.qf=function(a){this.Xi.push(a);this.V.C&&this.V.Z&&(this.V.Z.seek=k,this.V.Z=k);Y("/_seen",te(),"POST","media_id="+a.id+"&session_id="+this.id+"&async="+this.V.C)};
fg.prototype.end=function(a){this.Mc=a;a=(this.Mc.getTime()-this.lh.getTime())/1E3;if(this.i.id==X.a().o.id&&this.V){gg.a();var b=this.V,c=this.Xi.length;X.a().Cg.length?_gaq.push(["_trackEvent","Users","SessionTimeWithFriends",X.a().o.id,Math.round(a)]):_gaq.push(["_trackEvent","Users","SessionTimeNoFriends",X.a().o.id,Math.round(a)]);_gaq.push(["_trackEvent","Users","SessionMediaCount",X.a().o.id,c]);_gaq.push(["_trackEvent","Users","Active",X.a().o.id,c]);_gaq.push(["_trackEvent","Users",b.id+
"-time",X.a().o.id,a]);_gaq.push(["_trackEvent","Users",b.id+"-medias",X.a().o.id,c]);b.C||(_gaq.push(["_trackEvent","Channel","SessionTime",b.id,a]),_gaq.push(["_trackEvent","Channel","SessionMediaCount",b.id,c]))}};function hg(a){M.call(this);this.id=a.id;this.name=a.name;this.C=a.my_channel;this.Kd=a.current_media?Zf(Yf.a(),a.current_media):k;this.cn=a.current_seek;this.ma=[];this.Bc={};this.Z=a.current_program&&new $f(a.current_program);this.Nc=[];this.queue=[];this.eb=0;this.ce=a.online!=i?a.online:k;this.subscribe(ig,this.Db,this);this.subscribe(jg,this.bk,this);this.subscribe(kg,this.Qc,this);this.subscribe(lg,this.qh,this)}t(hg,M);m=hg.prototype;
m.Db=function(a){this.ma.push(a);this.Bc[a.id]=a;a.time.getTime()+1E3*a.media.duration>this.eb&&(this.eb=a.time.getTime()+1E3*a.media.duration-12E4,gd(dd.a(),this.eb,q(this.ug,this,this.eb)),gd(dd.a(),this.eb+6E4,q(this.ug,this,this.eb+6E4)))};m.ug=function(a){this.eb<=a&&!this.C&&Y("/_programming/"+this.id,q(function(a){a=mg(a.target);a.length||gd(dd.a(),s()+1E3,q(this.ug,this,s()+1E3));u(a,function(a){if(!this.Bc[a.id]){var b=this.Bc[a.id];b||(b=new $f(a),this.Db(b));this.c(ig,b)}},this)},this))};
m.bk=function(a,b){b?(this.queue.push(a),Qf.a().c("flash","Added to queue",a.name,i,a.gh,"#info:"+a.id),ng(gg.a(),a),Y("/_queue",te(),"POST","media_id="+a.id)):(Ua(this.queue,function(b){return b.id==a.id},this),Y("/_queue",te(),"POST","media_id="+a.id+"&delete=1"))};m.Qc=function(a){this.Nc.push(a)};m.qh=function(a){var b=Rb(this.Bc,a.id);b&&(b.time=pd(a.time+"Z"))};
m.h=function(a){if(this.Z&&this.Z.async&&this.Z.seek)return this.Z;if(!this.ma.length)return k;var b=this.Z;b||(b=this.ma[0],this.rb=0);if(a)return this.ma[this.rb+a];if(!this.C&&s()>=b.time.getTime()&&s()<b.time.getTime()+1E3*b.media.duration)return this.Z=b;for(;s()>b.time.getTime()&&s()>=b.time.getTime()+1E3*b.media.duration;){this.Z||(this.Z=this.ma[0],this.rb=0);this.ma.length>=this.rb+1?(this.rb++,a=this.ma[this.rb],a=this.Z=this.C?a&&a.seek?a:k:this.ma[this.rb]):a=k;if(this.C){if(a&&a.async&&
a.seek)return this.Z=a;if(!a)if(this.queue.length){a=this.queue[0];this.c(jg,a,l);var c=ag(a);Jf().c(ig,c);Y("/_addprogram",te(),"POST","channel_id="+T.a().C.id+"&media_id="+a.id+"&now=true");a=c}else a=k}if(!a)break;b=a}return s()>=b.time.getTime()&&s()<b.time.getTime()+1E3*b.media.duration?this.Z=b:k};var ig="add-program",jg="add-queue",kg="add-viewer",lg="update-program",If="online";function og(){M.call(this)}t(og,M);la(og);function pg(){J.call(this);this.ga=[];this.bd=[];this.Ne={};this.u=new Bd(this);this.Zk=this.Gi=l;this.rh=j}t(pg,$c);m=pg.prototype;m.hg=0;m.Xg=ba("hg");
m.init=function(){if(!this.Gi){for(var a=0,b=this.ga.length;a<b;a++)for(var c=ec(this.ga[a]),d=0,f=c.length;d<f;++d){var g=c[d],h=g,n=ua(h);this.Ne[n]=g;this.Vh&&(P(this.u,g,"mouseover",this.Jk),P(this.u,g,"mouseout",this.Ik));this.Uh&&(P(this.u,h,"mouseover",this.Hk),P(this.u,h,"mouseout",this.Gk));this.bd.push(g);P(this.u,h,["mousedown","touchstart"],this.ri)}this.Gi=j}};
m.n=function(){this.u.ba();for(var a=0,b=this.ga.length;a<b;a++){var c=this.ga[a];c.Th=i;c.nc=i}this.ga.length=0;this.bd.length=0;this.Ne=k;qg(this);pg.d.n.call(this)};function rg(a,b){for(var c=0,d=a.ga.length;c<d;c++){var f=a.ga[c];f.$c=Zd(f)}c=0;for(d=a.bd.length;c<d;c++)f=a.bd[c],f!=b&&(f.$c=Zd(f))}
m.ri=function(a){var b=ua(a.currentTarget);this.r=this.Ne[b];this.B=this.Ie(this.r);this.Oe&&y(this.B,this.Oe);this.B.style.margin="0";this.B.style.position="absolute";this.B.style.visibility="hidden";Wb(this.r).body.appendChild(this.B);b=Td(this.r);Vd(this.B,b);this.p=new he(this.B);this.p.Xg(this.hg);K(this.p,"start",this.mi,l,this);K(this.p,"end",this.li,l,this);K(this.p,"earlycancel",this.He,l,this);this.p.Jc(a)};
m.mi=function(a){if(this.dispatchEvent(new sg("beforedragstart",this,a.If,this.r,k,k))){this.ef=this.r.parentNode;this.Qh=this.Dg=fc(this.r);this.Wf=this.ef;this.Vf?y.apply(k,Va(this.r,this.Vf)):this.r.style.visibility="hidden";var b=Q(this.B);this.B.Dk=b.width/2;this.B.Ck=b.height/2;this.B.style.visibility="";this.rh&&(this.r.style.display="none");rg(this,this.r);this.r.style.display="";K(this.p,"drag",this.Kk,l,this);this.dispatchEvent(new sg("dragstart",this,a.If,this.r,this.B,this.p))}else a.preventDefault(),
this.He()};
m.Kk=function(a){var b=Td(this.B),b=new Ib(b.x+this.B.Dk,b.y+this.B.Ck),c;a:{c=k;if("none"!=this.r.style.display){c=this.r.parentNode;var d=Zd(c);if(tg(b,d))break a}for(var d=0,f=this.ga.length;d<f;d++){var g=this.ga[d];if(g!=c&&tg(b,g.$c)){c=g;break a}}c=k}var h;if(c){c==k&&e(Error("getHoverNextItem_ called with null hoverList."));var n,r,d=l,f=i;switch(c.Th){case 0:h=b.y;n=ug;r=vg;break;case 4:d=j;case 2:h=b.x;n=wg;r=vg;break;case 5:d=j;case 3:h=b.x,n=xg,r=yg}for(var g=k,v,w=ec(c),C=0,U=w.length;C<
U;C++){var V=w[C];if(V!=this.r){var sa=n(V.$c);if(d){var db=zg(V,b);ha(f)||(f=db);if(r(h,sa)&&(v==i||db<f||db==f&&(r(sa,v)||sa==v)))g=V,v=sa;db<f&&(f=db)}else if(r(h,sa)&&(v==i||r(sa,v)))g=V,v=sa}}h=g!==k&&zg(g,b)>f?k:g}else h=k;if(!this.dispatchEvent(new sg("beforedragmove",this,a,this.r,this.B,this.p,b,c,h)))return l;if(c)this.rh?(this.r.parentNode!=c||fc(this.r)!=h)&&c.insertBefore(this.r,h):h&&(this.Qh=h),this.r.style.display="",c.nc&&y(c,c.nc);else{this.Zk||(this.r.style.display="none");n=0;
for(r=this.ga.length;n<r;n++)v=this.ga[n],v.nc&&z(v,v.nc)}c!=this.Wf&&(this.Wf=c,rg(this,this.r));this.dispatchEvent(new sg("dragmove",this,a,this.r,this.B,this.p,b,c,h));return l};m.He=function(){qg(this);this.p=this.B=this.Dg=this.ef=this.Wf=this.r=k;for(var a=0,b=this.ga.length;a<b;a++)this.ga[a].$c=k;a=0;for(b=this.bd.length;a<b;a++)this.bd[a].$c=k};
m.li=function(a){if(!this.dispatchEvent(new sg("beforedragend",this,a,this.r,this.B,this.p)))return l;this.rh||this.ef.insertBefore(this.r,this.Qh);qg(this);this.dispatchEvent(new sg("dragend",this,a,this.r,this.B,this.p));this.He();return j};function qg(a){Cc(a.p);a.B&&dc(a.B);a.r&&"none"==a.r.style.display&&(a.ef.insertBefore(a.r,a.Dg),a.r.style.display="");a.Vf&&a.r?z.apply(k,Va(a.r,a.Vf)):a.r&&(a.r.style.visibility="visible");for(var b=0,c=a.ga.length;b<c;b++){var d=a.ga[b];d.nc&&z(d,d.nc)}}
m.Jk=function(a){y.apply(k,Va(a.currentTarget,this.Vh))};m.Ik=function(a){z.apply(k,Va(a.currentTarget,this.Vh))};m.Hk=function(a){y.apply(k,Va(a.currentTarget,this.Uh))};m.Gk=function(a){z.apply(k,Va(a.currentTarget,this.Uh))};function tg(a,b){return a.x>b.left&&a.x<b.left+b.width&&a.y>b.top&&a.y<b.top+b.height}function zg(a,b){var c=a.$c;return Math.abs(b.y-(c.top+(c.height-1)/2))}function ug(a){return a.top+a.height-1}function wg(a){return a.left+a.width-1}function xg(a){return a.left||0}
function vg(a,b){return a<b}function yg(a,b){return a>b}m.Ie=function(a){var b=a.cloneNode(j);switch(a.tagName.toLowerCase()){case "tr":return G("table",k,G("tbody",k,b));case "td":case "th":return G("table",k,G("tbody",k,G("tr",k,b)));default:return b}};function sg(a,b,c,d,f,g,h,n,r){Gc.call(this,a);this.jn=b;this.event=c;this.Ja=d;this.pk=f;this.ok=g;this.Wh=h;this.sn=n;this.Jb=r}t(sg,Gc);function Hf(a,b,c,d,f){R.call(this);this.q=a;this.va=zf();this.Fj=this.Ce=l;this.yd=b;this.Yb=c;this.U=f;this.En=d;this.cc={};this.rd={};this.Gb=this.va?new pg:k;this.Mf=6;this.ce=j}t(Hf,R);m=Hf.prototype;m.L=function(){this.e=H(Mf,{name:this.q.name,en:this.q.Z,uf:this.yd})};
m.w=function(){Hf.d.w.call(this);this.ie=E("programs",this.b());this.Bb=E("viewers",this.b());this.bj=E("name",this.b());this.cg=E("graph",this.b());this.Ua=E("suggest",this.b());if(this.q.C)O(this.Ua,l);else{this.xa=new Ag("Paste YouTube link");this.xa.g(E("program-input",this.b()));var a=new $e(this.xa.b()),b=new Bg(this.xa.b()),c=new Cg(q(this.Bg,this),1E3);P(P(P(this.k(),b,Dg,q(this.Bg,this)),a,"key",q(function(){c&&c.Qd()},this)),this.xa,"focus",q(this.Bg,this))}a=T.a();b=(Q(this.ie).width-200)/
this.yd;a.xb=a.xb||b;if(this.Fj){var b=0,d=40;this.tg=0;this.$h=[new Ib(b,d)];this.qn=Math.floor((s()-this.U.getTime())/1E3);for(a=0;a<this.yd/40;a++)this.$h.push(new Ib(b+=40,d+=[-30,-5,15,10,25][Math.floor(5*Math.random())])),this.tg=Math.max(this.tg,d);this.Ak=Raphael(this.cg,"100%",60).path("M0,0").attr({stroke:"none",opacity:0.8,fill:"#5d5d5d"})}Id(this.bj,"background",Raphael.getColor());b=this.q.ma;for(a=0;a<b.length;a++)b[a].media.live?this.Db(b[a]):b[a].time.getTime()<this.Yb.getTime()&&
b[a].time.getTime()+1E3*b[a].media.duration>this.Yb.getTime()-1E3*this.yd?this.Db(b[a]):b[a].time.getTime()>this.Yb.getTime()&&this.Db(b[a]);if(this.va){a=this.Gb;b=this.ie;b.Th=2;b.nc=i;a.ga.push(b);this.Gb.Oe="drag";var f=this.b();this.Gb.ri=function(a){var b=ua(a.currentTarget);this.r=this.Ne[b];this.B=this.Ie(this.r);this.Oe&&y(this.B,this.Oe);this.B.style.margin="0";this.B.style.position="absolute";this.B.style.visibility="hidden";f.appendChild(this.B);b=Td(this.r);Vd(this.B,b);this.p=new he(this.B);
this.p.Xg(this.hg);K(this.p,"start",this.mi,l,this);K(this.p,"end",this.li,l,this);K(this.p,"earlycancel",this.He,l,this);this.p.Jc(a)};this.Gb.init();var g={},h,n,r,v,w,C=j;P(P(P(this.k(),this.Gb,"beforedragstart",q(function(a){(!this.Ce||!a.event.shiftKey)&&a.preventDefault()},this)),this.Gb,"dragmove",function(a){r=r||a.Wh.x;v=v||Pd(a.Ja).x;w=w||(a.Ja.previousElementSibling!=i?a.Ja.previousElementSibling:gc(a.Ja.previousSibling,l));C=C&&!!w;var b=w?Q(w).width:i,c=w?Pd(w).x:i,d=a.Wh.x-r;10>Math.abs(d)||
(a.Jb&&!g[a.Jb.id]&&0<d?(b=Q(a.Ja).width,c=Pd(a.Jb).x,h=c-b+Q(a.Jb).width,d=this.q.Bc[a.Jb.id],n=d.time.getTime()/1E3+d.media.duration-this.q.Bc[a.Ja.id].media.duration,Nd(a.Ja,h),Nd(a.Jb,c-b-1),g[a.Jb.id]=j,b=a.Jb,b.parentNode&&b.parentNode.insertBefore(a.Ja,b.nextSibling)):C&&(0>d&&v+d<c+b)&&(b=Q(a.Ja).width,h=c=Pd(w).x,n=this.q.Bc[w.id].time.getTime()/1E3,Nd(a.Ja,h),Nd(w,c+b+1),b=w.previousElementSibling!=i?w.previousElementSibling:gc(w.previousSibling,l),w.parentNode&&w.parentNode.insertBefore(a.Ja,
w),w=b,C=!!b))}),this.Gb,"dragend",function(a){n&&(Y("/admin/_rescheduleprogram",i,"POST","program="+a.pk.id+"&time="+n),this.Gb.init(),n=i);g={};h=w=v=r=i;C=j})}for(var a=this.q.Nc,b=this.Qc,d=p(a)?a.split(""):a,U=a.length-1;0<=U;--U)U in d&&b.call(this,d[U],U,a);P(P(P(P(this.k(),this.Ua,"click",q(this.Gl,this)),E("close",this.Ua),"click",q(function(a){a.preventDefault();a.stopPropagation();Eg(this)},this)),E("name",this.b()),"click",q(function(){this.q.id!=T.a().m.id&&this.q.h()&&T.a().c(Cf,this.q)},
this)),dd.a().Id,cd,q(this.update,this));this.q.subscribe(ig,this.Db,this);this.q.subscribe(kg,this.Qc,this);this.q.subscribe("remove-viewer",this.Wl,this);this.q.subscribe(lg,this.qh,this);T.a().subscribe(Ff,this.Uj,this);T.a().subscribe(Cf,function(){this.Mf=0;this.Uj()},this);N.a().subscribe("toggle-admin",ba("Ce"),this);this.update()};
m.Uj=function(){if(this.s){z(this.rd[this.s],"playing");var a=E("title",this.rd[this.s]);a&&(a.style.left="")}this.s=k;if(a=T.a().m.h()){var b=this.rd[a.id];b&&(this.s=a.id,y(b,"playing"))}};
m.Db=function(a){var b=G("div",{"class":"program",id:a.id}),c=a.media.duration*T.a().xb,d=this.va&&a.time.getTime()+1E3*a.media.duration>s();vc(b,Nf,{Ng:a,media:a.media,repeat:600<c,Ef:d});this.rd[a.id]=b;var f=T.a().m.h();f&&a.id==f.id&&(y(b,"playing"),this.s=a.id);var g=E("thumb",b);L(function(){a.media.fh.height<Q(b).height+50?(y(g,"fix-height"),y(g,"pan-left")):y(g,"pan-top");n&&Xd(g,200);B(b,"stretched",360<a.media.fh.height)});f=(a.time.getTime()-this.U.getTime())/1E3*T.a().xb;if(a.media.live)var h=
(s()-a.time.getTime())/1E3*T.a().xb-100,c=c-h,f=f+h;Xd(b,Math.ceil(c-1));Nd(b,Math.floor(f));Nd(this.Ua,f+c);this.ie.appendChild(b);var n=120>c;B(b,"clipped",n);P(this.k(),b,"click",function(){Z.a().c(Fg,a.media)});var r=A(b,"clipped")?200:Q(b).width,c=E("title",b),f=E("program-play",b),h=E("program-plus",b);Q(c);P(P(P(P(this.k(),b,"mouseover",function(){N.a().vc&&(this.Ce||Id(g,"background-position-y",a.media.wd+10*Math.max(a.media.fh.width/r,1)+"%"))}),b,"mouseout",function(){N.a().vc&&(this.Ce||
Id(g,"background-position-y",a.media.wd+"%"))}),f,"click",function(b){b.preventDefault();b.stopPropagation();b=ag(a.media);W.a().c(Gf,b)}),h,"click",function(b){b.preventDefault();b.stopPropagation();Jf().c(jg,a.media,j)});d&&(d=new he(E("repos",b)),d.Ld=function(a,b){var c=b-24;-50<=c&&50>=c&&Id(g,"background-position-y",50-c+"%")},P(P(this.k(),d,"end",function(){var b=(g.style[Ka("background-position")]||"").split(" ")[1],b=b.substring(0,b.length-1);a.media.wd=b;Y("/admin/_posthumb",te(),"POST",
"media="+a.media.id+"&pos="+b)}),E("remove",b),"click",q(this.Cl,this,a,b)))};m.qh=function(a){var b=this.rd[a.id],a=(pd(a.time+"Z").getTime()-this.U.getTime())/1E3*T.a().xb;Nd(b,a)};m.Cl=function(a,b){dc(b);Y("/admin/_removeprogram",i,"POST","program="+a.id+"&media_id="+a.media.id+"&channel_id="+this.q.id);Y("admin/_media/collection",q(function(){alert("Disallowed on all channels.")},this),"POST","&media="+a.media.id+"&approve=false")};
m.Qc=function(a){if(X.a().o.id!=a.i.id){var b=this.cc[a.i.id];b||(b=G("div","viewer"),this.Bb.appendChild(b),this.cc[a.i.id]=b);if(!a.Mc||a.Mc.getTime()>this.U.getTime()){var c=H(Of,{i:a.i,Hb:a.i.Hb().toUpperCase(),hk:a.V.id});b.appendChild(c);var b=E("watch-with",c),d=Math.max(a.lh.getTime(),this.U.getTime()),f=(d-this.U.getTime())/1E3*T.a().xb+200,d=(s()-d)/1E3*T.a().xb;Xd(c,d);Nd(c,f);Id(c,"background",a.i.color);Id(b,"margin-left",-Q(b).width/2+14+"px");P(this.k(),c,"click",function(b){qc(b.target,
k,"watch-with")||Z.a().c(Gg,a.i)})}}};m.Wl=function(a){this.cc[a.id]&&(dc(this.cc[a.id]),Pb(this.cc,a.id),T.a().c(Df))};m.Gl=function(){if(!A(this.Ua,"show")){$d(E("select-program",this.Ua),1);y(this.Ua,"show");var a=this.xa,b=Hg(a);a.jg=j;a.b().focus();!b&&!Ig&&(a.b().value=a.Oa);a.b().select();Ig||(a.u&&Dd(a.u,a.b(),"click",a.dg),L(a.wk,10,a))}};function Eg(a){z(a.Ua,"show");a.xa.wa("");E("page2",a.b()).innerHTML=""}
m.Bg=function(){var a=E("select-content",this.b()),b=E("page2",this.b());if(!ec(b).length)try{var c=Jg(this.xa.D());Y(Ba("https://gdata.youtube.com/feeds/api/videos/%s?v=2&alt=json",c.vh),q(function(d){d=Kg(Lg(d.target)).entry;vc(b,Pf,{title:d.title.$t,se:d.media$group.media$thumbnail[0].url});d=new xf("YES");d.g(E("button",b));(new De(a,[0,0],[160,0],300,Mg)).play();P(this.k(),d,"action",q(this.Fl,this,c))},this))}catch(d){}};
m.Fl=function(a){Y("/_addprogram",q(function(a){a=mg(a.target);a.id&&(a=new $f(a),this.q.c(ig,a))},this),"POST","channel_id="+this.q.id+"&url="+a.Ad);$d(E("button",this.Ua),0);O(E("added",this.Ua),j);$d(E("select-program",this.Ua),0);L(q(function(){Eg(this)},this),3E3)};
m.update=function(){!this.ce&&this.q.ma.length&&this.q.c(If,j);this.ce=!!this.q.ma.length;B(this.b(),"offline",!this.ce);if(this.q.ma.length){if(this.Fj){var a="",b=Q(this.ie).width,c,d,f,g=(s()-this.U)/1E3,h=$a(this.$h,0,Math.floor(g/40));u(h,function(n,r){c=n.x/this.yd*b;d=60-60*(n.y/this.tg);r==h.length-1&&(c=g/this.yd*b);c+=6;r?(a+="L"+[c-30,f],a+="C"+[c-20,f,c-10,d,c,d]):a+="M"+[c,d]+"R";f=d},this);this.Ak.attr({path:a+"L"+c+",60 10,60z"})}if(this.s&&0<this.Mf){var n=this.rd[this.s],r=Pd(n).x+
Pd(D("guide")).x,n=E("title",n);Nd(n,200>r?-r+210:5)}else this.Mf++;Lb(this.q.Nc,function(a){if(this.q.h()&&!a.Mc&&this.cc[a.i.id]){var b=Math.max(a.lh.getTime(),this.U.getTime());Q(this.ie);var c=Math.floor((s()-b)/1E3*T.a().xb),d=W.a().h();a.i.id==X.a().o.id&&d&&(c=Math.floor((d.time.getTime()+1E3*W.a().Se()-b)/1E3*T.a().xb));this.cc[a.i.id].lastChild&&Xd(this.cc[a.i.id].lastChild,c)}},this);r=Q(this.cg).height;n=Q(this.Bb).height;r-=n;0>r&&Id(this.cg,"margin-top",-r+"px");Wd(this.bj,Q(this.b()).height-
1)}};function X(){M.call(this);this.Vj={};this.Cg=[]}t(X,M);la(X);X.prototype.add=function(a){this.Vj[a.id]=a};X.prototype.get=function(a){return this.Vj[a]};function Ng(a,b){var c=a.get(b.id);c||(c=new bg(b),a.add(c));return c};function Og(a){if("function"==typeof a.Te)return a.Te();if(p(a))return a.split("");if(oa(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return Mb(a)}function Pg(a,b,c){if("function"==typeof a.forEach)a.forEach(b,c);else if(oa(a)||p(a))u(a,b,c);else{var d;if("function"==typeof a.bg)d=a.bg();else if("function"!=typeof a.Te)if(oa(a)||p(a)){d=[];for(var f=a.length,g=0;g<f;g++)d.push(g)}else d=Nb(a);else d=i;for(var f=Og(a),g=f.length,h=0;h<g;h++)b.call(c,f[h],d&&d[h],a)}};function Qg(a,b){this.Ob={};this.T=[];var c=arguments.length;if(1<c){c%2&&e(Error("Uneven number of arguments"));for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else if(a){a instanceof Qg?(c=a.bg(),d=a.Te()):(c=Nb(a),d=Mb(a));for(var f=0;f<c.length;f++)this.set(c[f],d[f])}}m=Qg.prototype;m.X=0;m.Wj=0;m.Te=function(){Rg(this);for(var a=[],b=0;b<this.T.length;b++)a.push(this.Ob[this.T[b]]);return a};m.bg=function(){Rg(this);return this.T.concat()};
m.clear=function(){this.Ob={};this.Wj=this.X=this.T.length=0};function Rg(a){if(a.X!=a.T.length){for(var b=0,c=0;b<a.T.length;){var d=a.T[b];Object.prototype.hasOwnProperty.call(a.Ob,d)&&(a.T[c++]=d);b++}a.T.length=c}if(a.X!=a.T.length){for(var f={},c=b=0;b<a.T.length;)d=a.T[b],Object.prototype.hasOwnProperty.call(f,d)||(a.T[c++]=d,f[d]=1),b++;a.T.length=c}}m.get=function(a,b){return Object.prototype.hasOwnProperty.call(this.Ob,a)?this.Ob[a]:b};
m.set=function(a,b){Object.prototype.hasOwnProperty.call(this.Ob,a)||(this.X++,this.T.push(a),this.Wj++);this.Ob[a]=b};m.clone=function(){return new Qg(this)};function Sg(a){return Tg(a||arguments.callee.caller,[])}
function Tg(a,b){var c=[];if(Sa(b,a))c.push("[...circular reference...]");else if(a&&50>b.length){c.push(Ug(a)+"(");for(var d=a.arguments,f=0;f<d.length;f++){0<f&&c.push(", ");var g;g=d[f];switch(typeof g){case "object":g=g?"object":"null";break;case "string":break;case "number":g=String(g);break;case "boolean":g=g?"true":"false";break;case "function":g=(g=Ug(g))?g:"[fn]";break;default:g=typeof g}40<g.length&&(g=g.substr(0,40)+"...");c.push(g)}b.push(a);c.push(")\n");try{c.push(Tg(a.caller,b))}catch(h){c.push("[exception trying to get caller]\n")}}else a?
c.push("[...long stack...]"):c.push("[end]");return c.join("")}function Ug(a){if(Vg[a])return Vg[a];a=String(a);if(!Vg[a]){var b=/function ([^\(]+)/.exec(a);Vg[a]=b?b[1]:"[Anonymous]"}return Vg[a]}var Vg={};function Wg(a,b,c,d,f){this.reset(a,b,c,d,f)}Wg.prototype.bm=0;Wg.prototype.Zh=k;Wg.prototype.Yh=k;var Xg=0;Wg.prototype.reset=function(a,b,c,d,f){this.bm="number"==typeof f?f:Xg++;this.In=d||s();this.$d=a;this.jl=b;this.vn=c;delete this.Zh;delete this.Yh};Wg.prototype.Cj=ba("$d");function Yg(a){this.ll=a}Yg.prototype.O=k;Yg.prototype.$d=k;Yg.prototype.ea=k;Yg.prototype.si=k;function Zg(a,b){this.name=a;this.value=b}Zg.prototype.toString=ca("name");var $g=new Zg("SEVERE",1E3),ah=new Zg("WARNING",900),bh=new Zg("INFO",800),ch=new Zg("CONFIG",700),dh=new Zg("FINE",500);m=Yg.prototype;m.getParent=ca("O");m.hi=function(){this.ea||(this.ea={});return this.ea};m.Cj=ba("$d");function eh(a){return a.$d?a.$d:a.O?eh(a.O):k}
m.log=function(a,b,c){if(a.value>=eh(this).value){a=this.zk(a,b,c);b="log:"+a.jl;fa.console&&(fa.console.timeStamp?fa.console.timeStamp(b):fa.console.markTimeline&&fa.console.markTimeline(b));fa.msWriteProfilerMark&&fa.msWriteProfilerMark(b);for(b=this;b;){var c=b,d=a;if(c.si)for(var f=0,g=i;g=c.si[f];f++)g(d);b=b.getParent()}}};
m.zk=function(a,b,c){var d=new Wg(a,String(b),this.ll);if(c){d.Zh=c;var f;var g=arguments.callee.caller;try{var h;var n=ia("window.location.href");if(p(c))h={message:c,name:"Unknown error",lineNumber:"Not available",fileName:n,stack:"Not available"};else{var r,v,w=l;try{r=c.lineNumber||c.un||"Not available"}catch(C){r="Not available",w=j}try{v=c.fileName||c.filename||c.sourceURL||n}catch(U){v="Not available",w=j}h=w||!c.lineNumber||!c.fileName||!c.stack?{message:c.message,name:c.name,lineNumber:r,
fileName:v,stack:c.stack||"Not available"}:c}f="Message: "+Da(h.message)+'\nUrl: <a href="view-source:'+h.fileName+'" target="_new">'+h.fileName+"</a>\nLine: "+h.lineNumber+"\n\nBrowser stack:\n"+Da(h.stack+"-> ")+"[end]\n\nJS stack traversal:\n"+Da(Sg(g)+"-> ")}catch(V){f="Exception trying to expose exception! You win, we lose. "+V}d.Yh=f}return d};function fh(a,b){a.log($g,b,i)}m.info=function(a,b){this.log(bh,a,b)};function gh(a,b){a.log(dh,b,i)}var hh={},ih=k;
function jh(a){ih||(ih=new Yg(""),hh[""]=ih,ih.Cj(ch));var b;if(!(b=hh[a])){b=new Yg(a);var c=a.lastIndexOf("."),d=a.substr(c+1),c=jh(a.substr(0,c));c.hi()[d]=b;b.O=c;hh[a]=b}return b};function Kg(a){a=String(a);if(/^\s*$/.test(a)?0:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x10-\x1f\x80-\x9f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,"")))try{return eval("("+a+")")}catch(b){}e(Error("Invalid JSON string: "+a))};function kh(){}kh.prototype.Ee=k;var lh;function mh(){}t(mh,kh);function nh(a){return(a=oh(a))?new ActiveXObject(a):new XMLHttpRequest}function ph(a){var b={};oh(a)&&(b[0]=j,b[1]=j);return b}
function oh(a){if(!a.zi&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var b=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],c=0;c<b.length;c++){var d=b[c];try{return new ActiveXObject(d),a.zi=d}catch(f){}}e(Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed"))}return a.zi}lh=new mh;var qh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([\\w\\d\\-\\u0100-\\uffff.%]*)(?::([0-9]+))?)?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");function rh(a){J.call(this);this.headers=new Qg;this.Dd=a||k}t(rh,$c);rh.prototype.H=jh("goog.net.XhrIo");var sh=/^https?$/i,th=[];function Y(a,b,c,d){var f=new rh;th.push(f);b&&K(f,"complete",b);K(f,"ready",za(uh,f));f.send(a,c,d,i)}function uh(a){a.ba();Ta(th,a)}m=rh.prototype;m.Cb=l;m.A=k;m.Af=k;m.Zd="";m.Oi="";m.Xd=0;m.Yd="";m.Zf=l;m.Xe=l;m.kg=l;m.wc=l;m.vf=0;m.Kc=k;m.kf="";m.zm=l;
m.send=function(a,b,c,d){this.A&&e(Error("[goog.net.XhrIo] Object is active with another request"));b=b?b.toUpperCase():"GET";this.Zd=a;this.Yd="";this.Xd=0;this.Oi=b;this.Zf=l;this.Cb=j;this.A=this.Dd?nh(this.Dd):nh(lh);this.Af=this.Dd?this.Dd.Ee||(this.Dd.Ee=ph(this.Dd)):lh.Ee||(lh.Ee=ph(lh));this.A.onreadystatechange=q(this.kj,this);try{gh(this.H,vh(this,"Opening Xhr")),this.kg=j,this.A.open(b,a,j),this.kg=l}catch(f){gh(this.H,vh(this,"Error opening Xhr: "+f.message));wh(this,f);return}var a=c||
"",g=this.headers.clone();d&&Pg(d,function(a,b){g.set(b,a)});d=fa.FormData&&a instanceof fa.FormData;if(b="POST"==b)b=!Object.prototype.hasOwnProperty.call(g.Ob,"Content-Type")&&!d;b&&g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");Pg(g,function(a,b){this.A.setRequestHeader(b,a)},this);this.kf&&(this.A.responseType=this.kf);"withCredentials"in this.A&&(this.A.withCredentials=this.zm);try{this.Kc&&(bd.clearTimeout(this.Kc),this.Kc=k),0<this.vf&&(gh(this.H,vh(this,"Will abort after "+
this.vf+"ms if incomplete")),this.Kc=bd.setTimeout(q(this.rm,this),this.vf)),gh(this.H,vh(this,"Sending request")),this.Xe=j,this.A.send(a),this.Xe=l}catch(h){gh(this.H,vh(this,"Send error: "+h.message)),wh(this,h)}};m.rm=function(){"undefined"!=typeof ea&&this.A&&(this.Yd="Timed out after "+this.vf+"ms, aborting",this.Xd=8,gh(this.H,vh(this,this.Yd)),this.dispatchEvent("timeout"),this.abort(8))};function wh(a,b){a.Cb=l;a.A&&(a.wc=j,a.A.abort(),a.wc=l);a.Yd=b;a.Xd=5;xh(a);yh(a)}
function xh(a){a.Zf||(a.Zf=j,a.dispatchEvent("complete"),a.dispatchEvent("error"))}m.abort=function(a){this.A&&this.Cb&&(gh(this.H,vh(this,"Aborting")),this.Cb=l,this.wc=j,this.A.abort(),this.wc=l,this.Xd=a||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),yh(this))};m.n=function(){this.A&&(this.Cb&&(this.Cb=l,this.wc=j,this.A.abort(),this.wc=l),yh(this,j));rh.d.n.call(this)};m.kj=function(){!this.kg&&!this.Xe&&!this.wc?this.Bl():zh(this)};m.Bl=function(){zh(this)};
function zh(a){if(a.Cb&&"undefined"!=typeof ea)if(a.Af[1]&&4==Ah(a)&&2==Bh(a))gh(a.H,vh(a,"Local request error detected and ignored"));else if(a.Xe&&4==Ah(a))bd.setTimeout(q(a.kj,a),0);else if(a.dispatchEvent("readystatechange"),4==Ah(a)){gh(a.H,vh(a,"Request complete"));a.Cb=l;try{var b=Bh(a),c,d;a:switch(b){case 200:case 201:case 202:case 204:case 304:case 1223:d=j;break a;default:d=l}if(!(c=d)){var f;if(f=0===b){var g=String(a.Zd).match(qh)[1]||k;if(!g&&self.location)var h=self.location.protocol,
g=h.substr(0,h.length-1);f=!sh.test(g?g.toLowerCase():"")}c=f}if(c)a.dispatchEvent("complete"),a.dispatchEvent("success");else{a.Xd=6;var n;try{n=2<Ah(a)?a.A.statusText:""}catch(r){gh(a.H,"Can not get status: "+r.message),n=""}a.Yd=n+" ["+Bh(a)+"]";xh(a)}}finally{yh(a)}}}
function yh(a,b){if(a.A){var c=a.A,d=a.Af[0]?ja:k;a.A=k;a.Af=k;a.Kc&&(bd.clearTimeout(a.Kc),a.Kc=k);b||a.dispatchEvent("ready");try{c.onreadystatechange=d}catch(f){fh(a.H,"Problem encountered resetting onreadystatechange: "+f.message)}}}m.Kb=function(){return!!this.A};function Ah(a){return a.A?a.A.readyState:0}function Bh(a){try{return 2<Ah(a)?a.A.status:-1}catch(b){return a.H.log(ah,"Can not get status: "+b.message,i),-1}}function mg(a){if(a.A)return Kg(a.A.responseText)}
function Lg(a){try{if(!a.A)return k;if("response"in a.A)return a.A.response;switch(a.kf){case "":case "text":return a.A.responseText;case "arraybuffer":if("mozResponseArrayBuffer"in a.A)return a.A.mozResponseArrayBuffer}fh(a.H,"Response type "+a.kf+" is not supported on this browser");return k}catch(b){return gh(a.H,"Can not get response: "+b.message),k}}function vh(a,b){return b+" ["+a.Oi+" "+a.Zd+" "+Bh(a)+"]"};function T(){M.call(this);this.Tc=[];this.Sc={};this.subscribe(Cf,this.hc,this);this.subscribe(Ff,this.ph,this)}t(T,M);la(T);m=T.prototype;m.get=function(a){return this.Sc[a]};function Lf(a,b){if(a.m&&a.m.h()&&(b&&!a.m.C||!b))return a.m;if(a.Wd&&a.Wd.h()&&(b&&!a.Wd.C||!b))return a.Wd;for(var c=k,d=k,f=0;!d&&f<a.Tc.length;)d=(c=!a.Tc[f].C?a.Tc[f]:k)&&c.h(),f++;return c}m.rg=function(a){Lb(a,q(function(a){this.Ae(a)},this))};
m.Ae=function(a){var b=new hg(a);this.Tc.push(b);this.Sc[a.id]=b;b.C&&(this.C=b);this.c(Ef,b);return b};m.hc=function(a,b){if(a&&!this.m||a&&this.m&&this.m.id!=a.id){this.Wd=this.m;this.m=a;this.ph(a.h());var c=a.h(),c=c&&!Ob(c.media.wb);Y("/_changechannel",te(),"POST","channel="+a.id+"&friends="+c+(b?"&forced=true":""));gg.a().hc(a,this.Wd)}};
m.ph=function(a){this.m&&(this.s&&u(this.m.Nc,function(a){Pb(this.s.media.wb,a.i.id)},this),a&&(this.s=a,u(this.m.Nc,function(b){b.Mc||(a.media.wb[b.i.id]=b.i)})))};function Jf(){var a=T.a();if(!a.C){var b=X.a().o;a.C=new hg({id:b.id,name:b.name.split(" ")[0]+"'s Channel"})}return a.C}var Cf="change-channel",Ff="next-program",Ef="add-channel",Df="resize";function Ch(){R.call(this);this.uc=new xf("Guide");pf(this.uc,16,j);this.Xb=new xf("Sidebar");pf(this.Xb,16,j);this.Sg=new xf("Restart");this.yb=new xf("Play");pf(this.yb,16,j);this.Cd=new xf("Volume");pf(this.Cd,16,j);this.Rc=new xf("Admin");pf(this.Rc,16,j);this.Ye=new xf("Info")}t(Ch,R);m=Ch.prototype;
m.w=function(){Ch.d.w.call(this);this.Cn=E("right",this.b());this.Qa=E("progress",this.b());this.Bj=E("seek",this.b());this.sb=E("elapsed",this.b());this.tm=E("title",this.b());this.Xh=E("duration",this.b());this.dn=E("current-time",this.b());Ne(this,this.uc);this.uc.g(D("guide-toggle"));of(this.uc,A(this.b(),"guide-toggled"));Ne(this,this.Xb);this.Xb.g(D("sidebar-toggle"));of(this.Xb,A(this.b(),"sidebar-toggled"));Ne(this,this.Sg);this.Sg.g(E("restart",this.b()));Ne(this,this.yb);this.yb.g(E("play",
this.b()));Ne(this,this.Cd);this.Cd.g(E("volume",this.b()));Ne(this,this.Ye);this.Ye.g(D("info-toggle"));O(this.Ye.b(),X.a().o.Bf!=dg);Ne(this,this.Rc);this.Rc.g(D("admin-toggle"));O(this.Rc.b(),X.a().o.Bf==dg);var a=new Cg(this.pm,1E3,this);this.resize();this.p=new he(this.Bj);this.p.gb(l);var b=this.Qa,c=this.sb,d=this.Xh;this.p.Ld=function(a){if(0<a&&a<Q(b).width){this.target.style.left=a+"px";c.style.width=a+"px";var a=a/Q(b).width,g=W.a().h().media.duration;jc(d,Dh(Math.round(a*g).toString())+
" / "+Dh(g.toString()))}};P(P(P(P(P(P(P(P(P(P(P(P(this.k(),window,"resize",q(this.resize,this)),this.uc,"action",q(function(){a.Qd()},this)),this.Xb,"action",q(function(a){a.stopPropagation();N.a().c(hd,Xe(this.Xb))},this)),this.Sg,"action",q(function(a){a.stopPropagation();W.a().h()&&(a=ag(W.a().h().media),W.a().c(Gf,a),this.resize())},this)),this.yb,"action",q(function(a){a.stopPropagation();N.a().c(jd,!Xe(this.yb));this.resize()},this)),this.Ye,"action",q(function(a){a.stopPropagation();N.a().c("toggle-info")},
this)),this.Cd,"action",q(function(a){a.stopPropagation();N.a().c("mute",Xe(this.Cd))},this)),this.Rc,"action",q(function(a){a.stopPropagation();N.a().c("toggle-admin",Xe(this.Rc));this.resize()},this)),dd.a().Id,cd,q(function(){if(W.a().h()){var a=W.a().getCurrentTime()/W.a().h().media.duration;3>W.a().h().media.duration-W.a().getCurrentTime()&&W.a().c(Eh);T.a().m.C&&!A(this.Qa,"drag")&&(jc(this.Xh,(W.a().getCurrentTime()?Dh(W.a().getCurrentTime().toString())+" / ":"")+Dh(W.a().h().media.duration.toString())),
Xd(this.sb,this.Og?a*this.Og:0))}},this)),this.Qa,"click",q(function(a){!A(this.Qa,"drag")&&W.a().h()&&(a=a.offsetX/Q(this.Qa).width*W.a().h().media.duration,z(this.sb,"animate"),W.a().c(Fh,a),L(q(function(){y(this.sb,"animate")},this),1E3))},this)),this.p,"beforedrag",q(function(){y(this.Qa,"drag")},this)),this.p,"end",q(function(a){this.Bj.style.left="";a=a.left/Q(this.Qa).width*W.a().h().media.duration;z(this.sb,"animate");W.a().c(Fh,a);L(q(function(){z(this.Qa,"drag");y(this.sb,"animate")},this),
1E3)},this));W.a().subscribe(Gf,function(a){Gh(this,a,j)},this);W.a().subscribe(Hh,function(){this.p.gb(j);this.resize()},this);T.a().subscribe(Cf,function(){z(this.b(),"window");L(q(this.resize,this),1E3)},this);T.a().subscribe(Ff,function(){this.resize()},this);N.a().subscribe("mute",this.kl,this);N.a().subscribe(id,this.xf,this);N.a().subscribe(hd,function(a){of(this.Xb,a);B(this.b(),"sidebar-toggled",a);this.resize()},this);N.a().subscribe(jd,function(a){of(this.yb,!a)},this);W.a().subscribe(Hh,
function(){T.a().m.C&&W.a().h()&&this.resize()},this)};function Gh(a,b,c){jc(a.tm,b.media.name.toUpperCase());c&&(z(a.sb,"animate"),Xd(a.sb,0),L(q(function(){y(this.sb,"animate")},a),1E3))}m.kl=function(a){of(this.Cd,a)};m.pm=function(){var a=Xe(this.uc);N.a().c(id,a)};m.xf=function(a){of(this.uc,a);a&&(z(this.b(),"window"),z(this.b(),"collapsed"),L(q(this.resize,this)));L(q(function(){B(this.b(),"guide-toggled",a);a||(T.a().m&&T.a().m.h(),y(this.b(),"collapsed"),this.resize())},this),a?0:600)};
m.resize=function(){if(T.a().m.C)W.a().h()&&(O(this.Qa,j),Gh(this,W.a().h()),this.Og=F().width-(Xe(this.Xb)?580:260)-50,Xd(this.Qa,this.Og));else{O(this.Qa,l);var a=D("guide"),b=E("current",a),b=Xb("program",b),a=(b=b[b.length-1])?Pd(a).x+Pd(b).x+Q(b).width+210:9999999,a=Math.min(F().width-200,Math.max(100,F().width-a)),c=A(this.b(),"collapsed")&&!!b&&a<F().width-203;L(q(function(){B(this.b(),"window",c&&A(this.b(),"collapsed"))},this),400)}};function Ih(a){return(a.link?'<a href="'+I(a.link)+'">':"")+'<div class="note'+(a.ig?" pic":"")+'">'+(a.ig?'<div class="picture"><img class="image" src='+I(a.ig)+' style="display: none"/></div>':"")+'<div class="action">'+(a.i?I(a.i.name)+" ":"")+I(a.action)+'</div><div class="content">'+I(a.content)+'</div><div class="close"></div></div>'+(a.link?"</a>":"")};function Jh(){R.call(this)}t(Jh,R);Jh.prototype.L=function(){this.e=G("div",{id:"notify"})};Jh.prototype.F=function(a){Jh.d.F.call(this,a);Qf.a().subscribe("flash",function(a,c,d,f,g){this.tf(j,a,c,d,f,g)},this);Qf.a().subscribe("show",function(a,c,d,f,g){this.tf(l,a,c,d,f,g)},this)};
Jh.prototype.tf=function(a,b,c,d,f,g){var h=H(Ih,{action:b,content:c,i:d,ig:f,link:g}),n=E("image",h);E("close",h);P(P(P(this.k(),E("close",h),"click",function(a){a.preventDefault();a.stopPropagation();dc(h)}),h,"click",function(a){a.preventDefault();a.stopPropagation();dc(h)}),n,"load",function(){O(n,j);L(function(){n.style.marginLeft=-1*n.clientWidth/2+"px";n.style.marginTop=-1*n.clientHeight/2+"px"})});this.b().appendChild(h);var r=E("note",h);L(function(){r&&(y(r,"show"),a?L(function(){z(r,"show");
y(r,"fade-out");L(function(){dc(h)},5100)},3E3):y(r,"dim"))})};function W(){M.call(this);this.subscribe(Gf,function(a){Jf().c(ig,a);Y("/_addprogram",te(),"POST","channel_id="+T.a().C.id+"&media_id="+a.media.id+"&async=true");ng(gg.a(),a.media)},this);this.subscribe(Hh,function(a){Y("/_started",te(),"POST","media_id="+a.id)},this)}t(W,M);la(W);W.prototype.Zg=ba("v");W.prototype.h=ca("s");W.prototype.getCurrentTime=function(){return this.v&&this.v.getCurrentTime?this.v.getCurrentTime():0};
W.prototype.Se=function(){return this.v&&this.v.getCurrentTime?this.v.getCurrentTime():0};var Eh="before-end",Gf="play-async",Hh="playing",Fh="seek";function Kh(){qe.call(this);this.queue=[]}t(Kh,qe);Kh.prototype.add=function(a){Sa(this.queue,a)||(this.queue.push(a),K(a,"finish",this.ol,l,this))};Kh.prototype.n=function(){u(this.queue,function(a){a.ba()});this.queue.length=0;Kh.d.n.call(this)};function Lh(){Kh.call(this);this.Ka=0}t(Lh,Kh);
Lh.prototype.play=function(a){if(0==this.queue.length)return l;if(a||this.l==re)this.Ka<this.queue.length&&this.queue[this.Ka].l!=re&&this.queue[this.Ka].stop(l),this.Ka=0,this.Sb();else if(1==this.l)return l;this.ra("play");-1==this.l&&this.ra("resume");this.startTime=s();this.Od=k;this.l=1;this.queue[this.Ka].play(a);return j};
Lh.prototype.stop=function(a){this.l=re;this.Od=s();if(a)for(a=this.Ka;a<this.queue.length;++a){var b=this.queue[a];b.l==re&&b.play();b.l==re||b.stop(j)}else this.Ka<this.queue.length&&this.queue[this.Ka].stop(l);this.ra("stop");this.Tb()};Lh.prototype.ol=function(){1==this.l&&(this.Ka++,this.Ka<this.queue.length?this.queue[this.Ka].play():(this.Od=s(),this.l=re,this.ra("finish"),this.Tb()))};function Mh(a){return a*a*a}function Mg(a){return 1-Math.pow(1-a,3)};function Nh(){R.call(this)}t(Nh,R);m=Nh.prototype;
m.w=function(){Nh.d.w.call(this);(this.s=(this.Y=T.a().m)&&this.Y.h())&&s();this.tc=E("fullscreen",this.b());var a=E("expand",this.b());O(this.tc,this.Lj());this.oe=D("stagecover");this.Yi=E("message",this.oe);this.Q=E("spinner",this.oe);this.ke=E("restart",this.oe);this.wh=E("vote",this.b());this.yc=E("like",this.b());this.mc=E("dislike",this.b());var b=new $e(document);Oh(this);this.s?DESKTOP&&Ph(this,this.s):W.a().c("no-media");P(P(P(P(P(P(P(P(P(P(P(P(this.k(),window,"resize",q(this.resize,this)),
document,"webkitfullscreenchange",q(function(){Hb(this.tc,"full")},this)),document,"mozfullscreenchange",q(function(){Hb(this.tc,"full")},this)),document,"fullscreenchange",q(function(){Hb(this.tc,"full")},this)),this.tc,"click",q(function(a){if(A(this.tc,"full"))document.ek&&document.ek(),document.webkitCancelFullScreen&&document.webkitCancelFullScreen(),document.mozCancelFullScreen&&document.mozCancelFullScreen();else{var b=E("main");b.vj&&b.vj();b.webkitRequestFullScreen&&b.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT);
b.mozRequestFullScreen&&b.mozRequestFullScreen()}a.stopPropagation();a.preventDefault()},this)),this.ke,"click",q(function(a){a.preventDefault();a.stopPropagation();this.s&&Ph(this,this.s)},this)),a,"click",q(this.um,this)),this.yc,"click",q(this.ij,this,this.yc,j)),this.mc,"click",q(this.ij,this,this.mc,l)),this.b(),"mousemove",q(function(a){var b=a.offsetX/this.Ba,a=a.offsetY/this.Ia;if(0.7<b&&1>b&&0.7<a&&1>a&&(this.ge==YT.PlayerState.PLAYING||this.ge==YT.PlayerState.PAUSED))y(this.oe,"click-through"),
L(q(function(){z(this.oe,"click-through")},this),500)},this)),b,"key",q(function(a){"32"==a.keyCode&&Qh(this)},this)),this.b(),"click",q(function(a){!A(D("queue"),"show")&&(!A(D("search"),"show")&&!qc(a.target,k,"queue")&&!qc(a.target,k,"search"))&&Qh(this)},this));T.a().subscribe(Cf,this.hc,this);T.a().subscribe(Ff,function(a){this.s=a;Ph(this,a);Oh(this)},this);W.a().subscribe(Gf,this.Ig,this);W.a().subscribe(Fh,this.am,this);W.a().subscribe(Eh,function(){Oh(this,j)},this);DESKTOP&&(N.a().subscribe(hd,
function(a){this.resize(a)},this),N.a().subscribe(id,function(){L(q(this.resize,this))},this),N.a().subscribe(jd,function(a){a?this.v.playVideo():this.v.pauseVideo();var a=E(a?"play":"pause",this.b()),b=new Lh;b.add(new Ge(a,250,Mg));b.add(new Fe(a,250,Mh));b.play()},this),N.a().subscribe("mute",function(a){this.v&&(a?this.v.mute():this.v.unMute())},this),N.a().subscribe("restart",function(){this.v.seekTo(0)},this));this.resize()};
function Qh(a){if(a.v&&a.v.getPlayerState&&DESKTOP)switch(a.v.getPlayerState()){case YT.PlayerState.PLAYING:N.a().c(jd,l);break;case YT.PlayerState.PAUSED:N.a().c(jd,j)}}m.Lj=function(){var a=E("main");return!(!a.vj&&!a.webkitRequestFullScreen&&!a.mozRequestFullScreen)};m.um=function(a){a.preventDefault();a.stopPropagation();Z.a();a=!A(D("sidebar"),"toggled");DESKTOP&&(N.a().c(hd,a),N.a().c(id,a))};
function Ph(a,b){W.a().s=b;a.bl!=b.id&&(Qf.a().c("flash","Now playing",b.media.name,i,b.media.gh,"#info:"+b.media.id),a.bl=b.id);a.play(b.media);Y("/_like/"+b.media.id,q(function(a){a=mg(a.target);B(this.yc,"checked",a.liked||A(this.yc,"checked"));B(this.mc,"checked",a.disliked||A(this.mc,"checked"))},a))}
m.play=function(a,b){!this.v||!this.v.loadVideoById?(this.v=new YT.Player("ytplayer",{height:F().height-40,width:F().width,videoId:a.fd,playerVars:{controls:0,showinfo:0,iv_load_policy:3,modestbranding:1,wmode:"opaque",origin:HOST_URL,enablejsapi:1},events:{onStateChange:q(this.Nl,this),onReady:q(this.zl,this),onError:q(this.yl,this)}}),W.a().Zg(this.v)):(this.v.cueVideoById(a.fd),L(q(function(){var c=b||0;!this.v.getPlayerState()&&4>c?this.play(a,++c):4<=c&&Oh(this,i,j)},this),1E3))};
m.resize=function(){var a=D("stagecover"),b=E("message",a),c=D("guide").style.height,c=c.substring(0,c.length-2),c=N.a().vc?c:40,d=N.a().Hc?320:0;this.Ia=F().height-c;this.Ba=F().width-d;Wd(this.b(),F().height-c);Xd(this.b(),F().width-d);Wd(a,F().height-c);Xd(a,F().width-d);a=Q(b);Id(b,{"margin-left":-a.width/2+"px","margin-top":-a.height/2+"px"});B(this.tc,"full",this.Lj&&(document.fullScreen||document.webkitIsFullScreen||document.xn))};m.hc=function(a){if(a=a.h())this.s=a,Ph(this,a);Oh(this)};
m.ij=function(a,b,c){c.preventDefault();c.stopPropagation();this.s&&(a=Hb(a,"checked"),(c=b&&A(this.mc,"checked")||!b&&A(this.yc,"checked"))&&z(b?this.mc:this.yc,"checked"),Y(b?"/_like":"/_dislike",i,"POST","media_id="+this.s.media.id+(!a?"&delete=1":"")+(c?"&flip=1":"")))};m.Ig=function(a){this.s=a;Ph(this,a);Oh(this);Y("/_optin",te(),"POST","media_id="+this.s.media.id)};m.am=function(a){this.v.seekTo&&this.v.seekTo(a,j)};
m.Nl=function(a){this.ge=a.data;Oh(this);switch(a.data){case YT.PlayerState.CUED:a=this.s.async?this.s.seek:(s()-this.s.time.getTime())/1E3;this.v.seekTo(a);this.v.playVideo();N.a().c(jd,j);break;case YT.PlayerState.PLAYING:W.a().c(Hh,this.s.media);break;case YT.PlayerState.ENDED:X.a().o.Le.qf(this.s.media),B(this.yc,"checked",l),B(this.mc,"checked",l),(a=T.a().m.h())?T.a().c(Ff,a):(W.a().s=k,T.a().c(Cf,Lf(T.a()),j))}};
m.zl=function(){L(q(function(){if(this.v&&(!this.v.getPlayerState||!this.v.getPlayerState()))Ph(this,this.s);else if(this.v.getPlayerState()){var a=this.s.async?this.s.seek:(s()-this.s.time.getTime())/1E3;this.v.seekTo(a);this.v.playVideo();DESKTOP&&N.a().c("mute",this.v.isMuted())}},this),1E3)};m.yl=function(){W.a().c("no-media");Oh(this,i,j)};
function Oh(a,b,c){var d=D("stagecover"),f=a.s?W.a().getCurrentTime():0;c?(O(a.Q,l),O(a.ke,j),y(d,"covered")):(!a.s||a.s&&f>a.s.media.duration?(W.a().c("no-media"),jc(a.Yi.firstChild,Rh),O(a.Q,l),O(a.ke,l),O(a.wh,l),y(d,"covered")):a.ge!=YT.PlayerState.PLAYING&&a.ge!=YT.PlayerState.PAUSED||b?(jc(a.Yi.firstChild,Sh),O(a.Q,j),O(a.ke,l),O(a.wh,l),y(d,"covered")):(O(a.Q,l),O(a.ke,l),z(d,"covered"),O(a.wh,j)),$d(d,a.ge==YT.PlayerState.BUFFERING?0.9:1),a.resize())}
var Rh="THIS CHANNEL IS CURRENTLY OFFLINE",Sh="LOADING STORY";function Ag(a,b){R.call(this,b);this.Oa=a||""}t(Ag,R);Ag.prototype.bb=k;var Ig="placeholder"in document.createElement("input");m=Ag.prototype;m.Sd=l;m.L=function(){this.e=this.Na().L("input",{type:"text"})};m.F=function(a){Ag.d.F.call(this,a);this.Oa||(this.Oa=a.getAttribute("label")||"");var b;a:{var c=Wb(a);try{b=c&&c.activeElement;break a}catch(d){}b=k}b==a&&(this.Sd=j,z(this.b(),this.Ed));Ig?this.b().placeholder=this.Oa:this.b().setAttribute("aria-label",this.Oa)};
m.w=function(){Ag.d.w.call(this);var a=new Bd(this);P(a,this.b(),"focus",this.dg);P(a,this.b(),"blur",this.Fk);Ig?this.u=a:(lb&&P(a,this.b(),["keypress","keydown","keyup"],this.Lk),P(a,Wb(this.b())?Wb(this.b()).parentWindow||Wb(this.b()).defaultView:window,"load",this.Tk),this.u=a,Th(this));Uh(this);this.b().$k=this};m.rc=function(){Ag.d.rc.call(this);this.u&&(this.u.ba(),this.u=k);this.b().$k=k};function Th(a){!a.xk&&(a.u&&a.b().form)&&(P(a.u,a.b().form,"submit",a.Ok),a.xk=j)}
m.n=function(){Ag.d.n.call(this);this.u&&(this.u.ba(),this.u=k)};m.Ed="label-input-label";m.dg=function(){this.Sd=j;z(this.b(),this.Ed);if(!Ig&&!Hg(this)&&!this.jg){var a=this,b=function(){a.b().value=""};x?L(b,10):b()}};m.Fk=function(){Ig||(Ed(this.u,this.b(),"click",this.dg),this.bb=k);this.Sd=l;Uh(this)};m.Lk=function(a){27==a.keyCode&&("keydown"==a.type?this.bb=this.b().value:"keypress"==a.type?this.b().value=this.bb:"keyup"==a.type&&(this.bb=k),a.preventDefault())};
m.Ok=function(){Hg(this)||(this.b().value="",L(this.Ek,10,this))};m.Ek=function(){Hg(this)||(this.b().value=this.Oa)};m.Tk=function(){Uh(this)};function Hg(a){return!!a.b()&&""!=a.b().value&&a.b().value!=a.Oa}m.clear=function(){this.b().value="";this.bb!=k&&(this.bb="")};m.reset=function(){Hg(this)&&(this.clear(),Uh(this))};m.wa=function(a){this.bb!=k&&(this.bb=a);this.b().value=a;Uh(this)};m.D=function(){return this.bb!=k?this.bb:Hg(this)?this.b().value:""};
function Uh(a){Ig?a.b().placeholder!=a.Oa&&(a.b().placeholder=a.Oa):(Th(a),a.b().setAttribute("aria-label",a.Oa));Hg(a)?z(a.b(),a.Ed):(!a.jg&&!a.Sd&&y(a.b(),a.Ed),Ig||L(a.Yl,10,a))}m.gb=function(a){this.b().disabled=!a;B(this.b(),this.Ed+"-disabled",!a)};m.isEnabled=function(){return!this.b().disabled};m.wk=function(){this.jg=l};m.Yl=function(){this.b()&&(!Hg(this)&&!this.Sd)&&(this.b().value=this.Oa)};function Vh(a,b,c,d,f,g,h,n,r){var v,w;if(v=c.offsetParent){var C="HTML"==v.tagName||"BODY"==v.tagName;if(!C||"static"!=Md(v,"position"))w=Td(v),C||(C=(C=Ud(v))&&lb?-v.scrollLeft:C&&(!x||!xb("8"))?v.scrollWidth-v.clientWidth-v.scrollLeft:v.scrollLeft,w=Jb(w,new Ib(C,v.scrollTop)))}v=w||new Ib;w=Zd(a);if(C=Sd(a)){var U=new Hd(C.left,C.top,C.right-C.left,C.bottom-C.top),C=Math.max(w.left,U.left),V=Math.min(w.left+w.width,U.left+U.width);if(C<=V){var sa=Math.max(w.top,U.top),U=Math.min(w.top+w.height,
U.top+U.height);sa<=U&&(w.left=C,w.top=sa,w.width=V-C,w.height=U-sa)}}C=Ub(a);sa=Ub(c);if(C.G!=sa.G){var V=C.G.body,sa=sa.G.parentWindow||sa.G.defaultView,U=new Ib(0,0),db=Wb(V)?Wb(V).parentWindow||Wb(V).defaultView:window,Rf=V;do{var ka;if(db==sa)ka=Td(Rf);else{ka=Rf;var zb=new Ib;if(1==ka.nodeType){if(ka.getBoundingClientRect){var pa=Qd(ka);zb.x=pa.left;zb.y=pa.top}else{var pa=sc(Ub(ka)),Ya=Td(ka);zb.x=Ya.x-pa.x;zb.y=Ya.y-pa.y}lb&&!xb(12)&&(pa=i,pa=i,x?pa="-ms-transform":mb?pa="-webkit-transform":
kb?pa="-o-transform":lb&&(pa="-moz-transform"),Ya=i,pa&&(Ya=Md(ka,pa)),Ya||(Ya=Md(ka,"transform")),Ya?(ka=Ya.match(ge),pa=!ka?new Ib(0,0):new Ib(parseFloat(ka[1]),parseFloat(ka[2]))):pa=new Ib(0,0),zb=new Ib(zb.x+pa.x,zb.y+pa.y))}else pa=ra(ka.yk),Ya=ka,ka.targetTouches?Ya=ka.targetTouches[0]:pa&&ka.ia.targetTouches&&(Ya=ka.ia.targetTouches[0]),zb.x=Ya.clientX,zb.y=Ya.clientY;ka=zb}U.x+=ka.x;U.y+=ka.y}while(db&&db!=sa&&(Rf=db.frameElement)&&(db=db.parent));V=Jb(U,Td(V));x&&!rc(C)&&(V=Jb(V,sc(C)));
w.left+=V.x;w.top+=V.y}a=(b&4&&Ud(a)?b^2:b)&-5;b=new Ib(a&2?w.left+w.width:w.left,a&1?w.top+w.height:w.top);b=Jb(b,v);f&&(b.x+=(a&2?-1:1)*f.x,b.y+=(a&1?-1:1)*f.y);var S;if(h)if(r)S=r;else if(S=Sd(c))S.top-=v.y,S.right-=v.x,S.bottom-=v.y,S.left-=v.x;a:{r=b.clone();f=0;a=(d&4&&Ud(c)?d^2:d)&-5;d=Q(c);n=n?n.clone():d.clone();if(g||0!=a)a&2?r.x-=n.width+(g?g.right:0):g&&(r.x+=g.left),a&1?r.y-=n.height+(g?g.bottom:0):g&&(r.y+=g.top);if(h){if(S){g=r;f=0;if(65==(h&65)&&(g.x<S.left||g.x>=S.right))h&=-2;if(132==
(h&132)&&(g.y<S.top||g.y>=S.bottom))h&=-5;g.x<S.left&&h&1&&(g.x=S.left,f|=1);g.x<S.left&&(g.x+n.width>S.right&&h&16)&&(n.width=Math.max(n.width-(g.x+n.width-S.right),0),f|=4);g.x+n.width>S.right&&h&1&&(g.x=Math.max(S.right-n.width,S.left),f|=1);h&2&&(f|=(g.x<S.left?16:0)|(g.x+n.width>S.right?32:0));g.y<S.top&&h&4&&(g.y=S.top,f|=2);g.y>=S.top&&(g.y+n.height>S.bottom&&h&32)&&(n.height=Math.max(n.height-(g.y+n.height-S.bottom),0),f|=8);g.y+n.height>S.bottom&&h&4&&(g.y=Math.max(S.bottom-n.height,S.top),
f|=2);h&8&&(f|=(g.y<S.top?64:0)|(g.y+n.height>S.bottom?128:0));h=f}else h=256;f=h;if(f&496){c=f;break a}}Nd(c,r);if(!(d==n||(!d||!n?0:d.width==n.width&&d.height==n.height)))g=rc(Ub(Wb(c))),x&&(!g||!xb("8"))?(h=c.style,g?(g=ce(c,"padding"),c=fe(c),h.pixelWidth=n.width-c.left-g.left-g.right-c.right,h.pixelHeight=n.height-c.top-g.top-g.bottom-c.bottom):(h.pixelWidth=n.width,h.pixelHeight=n.height)):(c=c.style,lb?c.MozBoxSizing="border-box":mb?c.WebkitBoxSizing="border-box":c.boxSizing="border-box",c.width=
Math.max(n.width,0)+"px",c.height=Math.max(n.height,0)+"px");c=f}return c};function Wh(){}Wh.prototype.fb=aa();function Xh(a,b,c){this.element=a;this.Uf=b;this.Ll=c}t(Xh,Wh);Xh.prototype.fb=function(a,b,c){Vh(this.element,this.Uf,a,b,i,c,this.Ll)};function Yh(a,b,c,d){Xh.call(this,a,b);this.cl=c?5:0;this.Eg=d||i}t(Yh,Xh);Yh.prototype.fb=function(a,b,c,d){var f=Vh(this.element,this.Uf,a,b,k,c,10,d,this.Eg);if(f&496){var g=Zh(f,this.Uf),b=Zh(f,b),f=Vh(this.element,g,a,b,k,c,10,d,this.Eg);f&496&&(g=Zh(f,g),b=Zh(f,b),Vh(this.element,g,a,b,k,c,this.cl,d,this.Eg))}};function Zh(a,b){a&48&&(b^=2);a&192&&(b^=1);return b};function $h(a,b){J.call(this);this.N=new Bd(this);this.hd&&e(Error("Can not change this state of the popup while showing."));this.e=a||k;b&&this.Ej(b)}t($h,$c);m=$h.prototype;m.e=k;m.dk=j;m.Eh=k;m.hd=l;m.cm=l;m.pg=-1;m.Mi=-1;m.Uk=l;m.qk=j;m.bc="toggle_display";m.Ej=ba("bc");m.b=ca("e");m.cb=ca("hd");m.Wb=function(a){this.ne&&this.ne.stop();this.Td&&this.Td.stop();a?this.tf():this.ed()};m.fb=ja;
m.tf=function(){if(!this.hd&&this.dispatchEvent("beforeshow")){this.e||e(Error("Caller must call setElement before trying to show the popup"));this.fb();var a=Wb(this.e);this.Uk&&P(this.N,a,"keydown",this.rl,j);if(this.dk)if(P(this.N,a,"mousedown",this.hj,j),x){var b;try{b=a.activeElement}catch(c){}for(;b&&"IFRAME"==b.nodeName;){try{var d=b.contentDocument||b.contentWindow.document}catch(f){break}a=d;b=a.activeElement}P(this.N,a,"mousedown",this.hj,j);P(this.N,a,"deactivate",this.gj)}else P(this.N,
a,"blur",this.gj);"toggle_display"==this.bc?(this.e.style.visibility="visible",O(this.e,j)):"move_offscreen"==this.bc&&this.fb();this.hd=j;this.ne?(Tc(this.ne,"end",this.mj,l,this),this.ne.play()):this.mj()}};m.ed=function(a){if(!this.hd||!this.dispatchEvent({type:"beforehide",target:a}))return l;this.N&&Fd(this.N);this.hd=l;this.Mi=s();this.Td?(Tc(this.Td,"end",za(this.Oh,a),l,this),this.Td.play()):this.Oh(a);return j};
m.Oh=function(a){"toggle_display"==this.bc?this.cm?L(this.xi,0,this):this.xi():"move_offscreen"==this.bc&&(this.e.style.top="-10000px");this.dispatchEvent({type:"hide",target:a})};m.xi=function(){this.e.style.visibility="hidden";O(this.e,l)};m.mj=function(){this.pg=s();this.Mi=-1;this.dispatchEvent("show")};m.hj=function(a){a=a.target;!ic(this.e,a)&&((!this.Eh||ic(this.Eh,a))&&!(150>s()-this.pg))&&this.ed(a)};m.rl=function(a){27==a.keyCode&&this.ed(a.target)&&(a.preventDefault(),a.stopPropagation())};
m.gj=function(a){if(this.qk){var b=Wb(this.e);if(x||kb){if(a=b.activeElement,!a||ic(this.e,a)||"BODY"==a.tagName)return}else if(a.target!=b)return;150>s()-this.pg||this.ed()}};m.n=function(){$h.d.n.call(this);this.N.ba();Cc(this.ne);Cc(this.Td);delete this.e;delete this.N};function ai(a,b){this.pj=4;this.Kg=b||i;$h.call(this,a)}t(ai,$h);ai.prototype.fb=function(){if(this.Kg){var a=!this.cb()&&"move_offscreen"!=this.bc,b=this.b();a&&(b.style.visibility="hidden",O(b,j));this.Kg.fb(b,this.pj,this.gl);a&&O(b,l)}};function bi(a,b,c){J.call(this);this.Nb=a;this.R=b;this.N=c;this.Kf=q(this.Il,this)}t(bi,J);var Cg=bi;m=bi.prototype;m.sf=l;m.oj=0;m.pa=k;m.Qd=function(){!this.pa&&!this.oj?this.Md():this.sf=j};m.stop=function(){this.pa&&(bd.clearTimeout(this.pa),this.pa=k,this.sf=l)};m.n=function(){bi.d.n.call(this);this.stop()};m.Il=function(){this.pa=k;this.sf&&!this.oj&&(this.sf=l,this.Md())};m.Md=function(){this.pa=L(this.Kf,this.R);this.Nb.call(this.N)};function ci(a,b){J.call(this);this.Nb=a;this.N=b;this.$a=new se(q(this.Hl,this),0,this)}t(ci,J);m=ci.prototype;m.R=0;m.Tg=0;m.Ei=l;m.n=function(){this.$a.ba();delete this.Nb;delete this.N;ci.d.n.call(this)};m.start=function(a,b){this.stop();this.Ei=l;var c=b||0;this.R=Math.max(a||0,0);this.Tg=0>c?-1:s()+c;this.$a.start(0>c?this.R:Math.min(this.R,c))};m.stop=function(){this.$a.stop()};m.Kb=function(){return this.$a.Kb()};
m.Hl=function(){if(this.Nb.call(this.N))this.Ei=j;else if(0>this.Tg)this.$a.start(this.R);else{var a=this.Tg-s();0>=a||this.$a.start(Math.min(this.R,a))}};function Bg(a){J.call(this);this.e=a;this.be=this.e.value;this.u=new Bd(this);this.eb=s();mb||x||lb&&xb("1.9")?P(this.u,a,"paste",this.Zc):P(this.u,a,["keydown","blur","focus","mouseover","input"],this.Mk);this.$a=new ci(q(this.Kh,this))}t(Bg,$c);var Dg="after_paste";m=Bg.prototype;m.l="init";m.H=jh("goog.events.PasteHandler");m.n=function(){Bg.d.n.call(this);this.u.ba();this.u=k;this.$a.ba();this.$a=k};
m.Kh=function(){if(this.be==this.e.value)return l;this.H.info("detected textchange after paste");this.dispatchEvent(Dg);return j};m.Zc=function(a){a=new Jc(a.ia);a.type="paste";this.dispatchEvent(a);L(function(){this.Kh()||this.$a.start(50,200)},0,this)};
m.Mk=function(a){switch(this.l){case "init":switch(a.type){case "blur":this.l="init";break;case "focus":this.l="focused";break;case "mouseover":this.l="init";this.e.value!=this.be&&(this.H.info("paste by dragdrop while on init!"),this.Zc(a));break;default:fh(this.H,"unexpected event "+a.type+"during init")}break;case "focused":switch(a.type){case "input":var b=this.eb+400;if(s()>b||"focus"==this.Sl)this.H.info("paste by textchange while focused!"),this.Zc(a);break;case "blur":this.l="init";break;
case "keydown":this.H.info("key down ... looking for ctrl+v");if(fb&&kb&&0==a.keyCode||fb&&kb&&17==a.keyCode)break;this.l="typing";break;case "mouseover":this.e.value!=this.be&&(this.H.info("paste by dragdrop while focused!"),this.Zc(a));break;default:fh(this.H,"unexpected event "+a.type+" during focused")}break;case "typing":switch(a.type){case "input":this.l="focused";break;case "blur":this.l="init";break;case "keydown":if(a.ctrlKey&&86==a.keyCode||a.shiftKey&&45==a.keyCode||a.metaKey&&86==a.keyCode)this.H.info("paste by ctrl+v while keypressed!"),
this.Zc(a);break;case "mouseover":this.e.value!=this.be&&(this.H.info("paste by dragdrop while keypressed!"),this.Zc(a));break;default:fh(this.H,"unexpected event "+a.type+" during keypressed")}break;default:fh(this.H,"invalid "+this.l+" state")}this.eb=s();this.be=this.e.value;this.H.info(a.type+" -> "+this.l);this.Sl=a.type};function di(){return'<div class="popup" id="popup" style="visibility: hidden; display: none;"><div class="content"></div><div id="tailarrow"></div></div>'}function ei(){return'<div class="select-program"><div class="select-header">Suggest a Program</div><div class="select-content"><div class="page"><input type="text" class="program-input" placeholder="paste a youtube link"/><div class="page2"></div></div></div></div>'}
function fi(a){return'<div class="confirm-media"><img src="'+I(a.se)+'" /><div class="title">'+I(a.title)+'</div><div class="dark button">Yes</div></div>'};function gi(){var a=D("popup");a||(a=H(di),document.body.appendChild(a));ai.call(this,a);K(window,"resize",q(this.Wb,this,l));K(this,"hide",this.ul);this.q=og.a();this.q.subscribe("select-program",this.em,this);this.q.subscribe("hide",this.ed,this)}t(gi,ai);la(gi);m=gi.prototype;m.ul=function(){this.ed();this.q.c("on-hide")};m.tb=function(){return E("content",this.b())};
m.em=function(a,b){this.Wb(l);this.pj=0;this.cb()&&this.fb();var c=-1*(Q(this.b()).height-Q(a).height)/2;this.gl=c==k||c instanceof Gd?c:new Gd(c,0,0,5);this.cb()&&this.fb();this.Kg=new Yh(a,6)||i;this.cb()&&this.fb();y(this.b(),"left");vc(this.tb(),ei);this.xa=new Ag("paste a YouTube link");this.xa.g(E("program-input",this.b()));var c=new $e(this.xa.b()),d=new Bg(this.xa.b()),f=new Cg(q(this.Ag,this,b),1E3);this.Wb(j);P(P(P(this.N,d,Dg,q(this.Ag,this,b)),c,"key",q(function(){f&&f.Qd()},this)),this.xa.b(),
"focus",q(this.Ag,this,b))};m.Ag=function(a){var b=E("select-content",this.b());try{var c=Jg(this.xa.D());Y(Ba("https://gdata.youtube.com/feeds/api/videos/%s?v=2&alt=json",c.vh),q(function(d){var g=Kg(Lg(d.target)).entry,d=g.title.$t,h=g.media$group.media$thumbnail[0].url,g=E("page2",this.b());vc(g,fi,{title:d,se:h});d=new xf("Yes");d.g(E("button",g));(new De(b,[0,0],[260,0],300,Mg)).play();P(this.N,d,"action",q(this.wg,this,a,c))},this))}catch(d){}};
m.wg=function(a,b){Y("/_addprogram",q(function(b){b=Kg(Lg(b.target));b=new $f(b);a.c(ig,b);this.Wb(l)},this),"POST","channel="+a.id+"&youtube_id="+b.vh)};function hi(){M.call(this);this.Hh=[];this.wj=[]}t(hi,M);la(hi);
hi.prototype.search=function(a,b){Y("https://gdata.youtube.com/feeds/api/videos?q="+a+"&max-results=10&v=2&alt=json",q(function(a){a=mg(a.target);this.wj=Oa(a.feed.entry,function(a){var b=new Tf({id:"youtube"+a.media$group.yt$videoid.$t,name:a.title.$t,host_id:a.media$group.yt$videoid.$t,description:a.media$group.media$description.$t,duration:a.media$group.yt$duration.seconds,publisher:{name:a.author[0].name.$t,id:"youtube"+a.author[0].name.$t,picture:"https://i4.ytimg.com/i/"+a.author[0].yt$userId.$t+
"/1.jpg"}});b.Vb=pd(a.published.$t);return b},this);b&&b(this.wj)},this))};function ii(a){return'<div class="search-channel"><div class="pic"><img src="'+I(a.se)+'"></div><div class="title">'+I(a.name)+'</div><div class="loading loading-channel"><div class="loading-spinner"></div></div></div>'};function ji(a){return'<div class="info"><div class="picture"><img src="'+I(a.media.ib)+'" class="thumb"><div class="publisher"><img src="'+I(a.media.na.P)+'"><div class="name">'+I(a.media.na.name)+'</div></div><div class="links"><div class="local"></div><a target="_blank" href="'+a.media.Vk+'"><div class="host"></div></a></div><div class="link-select" style="display:none"><input onClick="this.select();" class="link-input" type="text" value="'+a.media.link+'" readonly="readonly"/></div><div class="title"><div class="text">'+
I(a.media.name)+'</div></div><div class="scrollable ios-scroll" '+(!a.description?'style="display:none"':"")+'><div class="desc-link"><a href="#">DESCRIPTION</a><div class="published">'+I(a.Vb)+'</div></div><div class="description">'+a.description+'</div></div><div class="button play"><div class="icon"></div></div><div class="options"><div class="button star"><div class="icon"></div></div><div class="button facebook"><div class="icon"></div></div><div class="button twitter"><div class="icon"></div></div><div class="button plus"><div class="icon"></div></div></div></div><div class="info-contents"><div class="scrollable ios-scroll"><div class="tweet-holder" style="display:none"><div class="label"><div class="globe-icon"></div><a class="tweets-link">LATEST TWEETS</a></div><div class="tweets"></div><div class="dot-nav"></div></div><div class="viewers" style="display: none"><div class="label"><div class="friends-icon"></div><div class="status">SEEN</div></div></div><div class="comments-holder ios-scroll" style="display:none"><div class="label"><div class="friends-icon"></div><a class="conv-link">CONVERSATION</a>'+
(a.al?'<a class="prev-link">&#10218; LAST PROGRAM</a>':"")+'</div><div class="no-comments" style="display:none">Start the conversation with friends.</div><div class="comments"></div><div class="top-grad"></div><div class="bottom-grad"></div></div></div></div><div class="loading loading-activity"><div class="loading-spinner"></div></div><div class="overlay" style="display: none"><div class="leaving"><div>This program is over. Carry on?</div><div class="button dark no">Not yet</div><div class="button dark yes">Let\'s go</div></div></div></div>'}
function ki(a){return'<div class="viewer" name="'+I(a.Hb)+'"><img src="'+I(a.i.P)+'"></div>'}
function li(a){return'<div class="tweet" id="'+I(a.prefix)+"-"+I(a.Ab.id)+'">'+(a.Ab.i?'<a href="#user:'+I(a.Ab.i.id)+'"><img src="'+I(a.Ab.P)+'"/></a>':'<img src="'+I(a.Ab.P)+'"/>')+'<div class="text"><a class="handle" target="_blank" href="http://www.twitter.com/'+I(a.Ab.handle)+"/status/"+I(a.Ab.id)+'">'+I(a.Ab.handle)+"</a> "+a.text+'</div><div class="timestamp">'+I(a.timestamp)+'</div><div class="tweet-options"><div class="reply"></div></div></div>'}
function mi(a){return'<div class="comment'+(a.qb.da?" reply":"")+'" id="'+I(a.prefix)+"-"+I(a.qb.id)+'"><a href="#user:'+I(a.qb.i.id)+'"><img src="'+I(a.qb.i.P)+'"/></a><div class="text"><a class="username" href="#user:'+I(a.qb.i.id)+'">'+I(a.qb.i.name)+"</a> "+a.text+'</div><div class="timestamp">'+I(a.timestamp)+'</div><div class="comment-options">'+(a.nj?'<div class="remove"></div> ':"")+'<div class="reply"></div></div></div>'}
function ni(){return'<div class="comment-input"><div class="comment-controls"><div class="comment-button tweet-toggle"><div class="icon"></div>tweet<div class="check"></div></div><div class="comment-button fb-toggle"><div class="icon"></div>post<div class="check"></div></div><div class="comment-button add-comment"><div class="return">&#8618;</div>add</div></div><div class="input-holder"><textarea class="comment-textarea" rows="1" placeholder="Add to the conversation..."></textarea></div></div>'}
function oi(a){var b='<div class="activity'+(1<a.J.length?" digest":"")+'">';if(1<a.J.length){for(var b=b+('<div class="template"><span>'+I(a.J.length)+" friends </span>"+(a.Qj?"watched":"are watching")+(a.V?' <a href="#channel:'+I(a.V.id)+'">'+I(a.V.name)+"</a>":"")+'<div class="timestamp">'+I(a.time)+'</div></div><div class="users">'),c=a.J,d=c.length,f=0;f<d;f++)var g=c[f],b=b+('<a href="#user:'+I(g.id)+'"><div class="picture" style="background:'+I(g.color)+'"><img src="'+I(g.P)+'"/></div></a>');
b+="</div>"}return b+=(1==a.J.length?'<a href="#user:'+I(a.J[0].id)+'"><div class="picture" style="background:'+I(a.J[0].color)+'"><img src="'+I(a.J[0].P)+'"/></div></a><div class="template"><a class="user" href="#user:'+I(a.J[0].id)+'">'+I(a.J[0].name)+"</a> "+(a.Qj?"watched":"is watching")+(a.V?' <a href="#channel:'+I(a.V.id)+'">'+I(a.V.name)+"</a>":"")+'<div class="timestamp">'+I(a.time)+"</div></div>":"")+'<div class="medias"></div></div>'}
function pi(a){for(var b='<div class="comment activity'+(1<a.Fb.length?" digest":"")+'">'+(1<a.Fb.length?'<div class="template">'+(1==a.J.length?'<a class="user" href="#user:'+I(a.J[0].id)+'">'+I(a.J[0].name)+' </a> discussed <a class="title" href="#info:'+I(a.media.id)+'">'+I(a.media.name)+"</a>.":"<span>"+I(a.J.length)+' friends </span> discussed <a class="title" href="#info:'+I(a.media.id)+'"> '+I(a.media.name)+"</a>.")+"</div>":""),a=a.Fb,c=a.length,d=0;d<c;d++)var f=a[d],b=b+('<div class="comment"><a href="#user:'+
I(f.i.id)+'"><div class="picture" style="background:'+I(f.i.color)+'"><img src="'+I(f.i.P)+'"/></div></a><div class="template"><a class="user" href="#user:'+I(f.i.id)+'">'+I(f.i.name)+'</a>  <div class="text">'+I(f.text)+'</div><div class="timestamp">'+I(f.Ul)+"</div></div></div>");return b+'<div class="medias"></div></div>'}
function qi(a){var b='<div class="like activity'+(1<a.J.length?" digest":"")+'">';if(1<a.J.length){for(var b=b+('<div class="template"><span>'+I(a.J.length)+' friends </span>liked<div class="timestamp">'+I(a.time)+'</div></div><div class="users">'),c=a.J,d=c.length,f=0;f<d;f++)var g=c[f],b=b+('<a href="#user:'+I(g.id)+'"><div class="picture" style="background:'+I(g.color)+'"><img src="'+I(g.P)+'"/></div></a>');b+="</div>"}return b+=(1==a.J.length?'<a href="#user:'+I(a.J[0].id)+'"><div class="picture" style="background:'+
I(a.J[0].color)+'"><img src="'+I(a.J[0].P)+'"/></div></a><div class="template" style="top:10px;margin-bottom:30px"><a class="user" href="#user:'+I(a.J[0].id)+'">'+I(a.J[0].name)+"</a> liked "+(1<a.Wi?I(a.Wi)+" stories":"")+'<div class="timestamp">'+I(a.time)+"</div></div>":"")+'<div class="medias"></div></div>'}
function ri(a){return'<div class="list-info"><div class="picture-cell" '+(a.ib?'style="display:table-cell"':"")+">"+(a.link?'<a href="'+I(a.link)+'" target="_blank">':"")+'<div class="picture"><img class="thumb" src="'+I(a.ib)+'"></div>'+(a.link?"</a>":"")+'</div><div class="description" style="display:table-cell">'+a.description+"</div></div>"}function si(a){return'<li class="'+I(a.className)+' tab"><div class="label">'+I(a.name)+"</div></li>"}
function ti(a){return'<div class="admin"><div class="scrollable ios-scroll"><div class="search"><input type="text" class="input" '+(a.Ci?'placeholder="'+I(a.Ci)+'"':"")+'/></div><div class="results"></div><div class="section" style="display:none"><div class="label">CHANNELS</div><div class="admin-channels"></div></div><div class="section" style="display:none"><div class="label">CURRENT TOPICS</div><div class="topics"></div></div><div class="section" style="display:none"><div class="label">COLLECTIONS</div><div class="collections"></div></div><div class="scroll-area"></div>'}
function ui(){return'<div class="admin-list admin"><div class="search"><input class="input" type="text" placeholder="Paste video or playlist link" /></div><div class="tabbed pending"><ul class="tabs"><li class="tab pending"><div class="label">PENDING</div></li><li class="tab all"><div class="label">ALL</div></li><li class="tab playlists"><div class="label">PLAYLISTS</div></li><li class="tab publishers"><div class="label">PUBLISHERS</div></li><li class="tab categories"><div class="label">CATEGORIES</div></li></ul><div class="pending-content content pending"></div><div class="all-content content all"></div><div class="playlists-content content playlists"></div><div class="publishers-content content publishers"></div><div class="categories-content content categories"><div class="label">GUIDE CATEGORIES</div><div class="categories-list"></div><div class="label">FEED IDS</div><div class="feed-ids"></div><div class="label">FEED CATEGORIES</div><div class="feed-cats"></div></div><div class="spinner" style="display:none"></div></div>'}
function vi(a){return'<div class="playlist"><div class="title">'+I(a.name)+'</div><div class="controls"><div class="remove dark button">x</div></div></div>'}function wi(a){return'<div class="category button">'+I(a.name)+"</div>"}function xi(a){return'<div class="publisher">'+(a.P?'<img src="'+I(a.P)+'"/>':"")+'<div class="title">'+I(a.name)+'</div><div class="controls"><div class="remove dark button">x</div></div></div>'}
function yi(a){return'<div class="channel '+(a.V.ce?"on":"off")+'"><div class="title">'+I(a.V.name)+'</div><div class="controls"><div class="fetch dark button">FETCH</div><div class="program dark button">PROG.</div><div class="remove dark button">x</div><div class="on dark button">ON</div><div class="off dark button">OFF</div></div>'+(a.V.qd?'<div class="pending">'+I(a.V.qd)+"</div>":"")+"</div>"}
function zi(a){return'<div class="collection"><div class="title">'+I(a.Pf.name)+'</div><div class="controls">'+(a.Pf.qd?'<div class="pending">'+I(a.Pf.qd)+"</div>":"")+'<div class="fetch dark button">FETCH</div><div class="button dark remove">x</div></div></div>'}function Ai(a){return'<div class="topic"><div class="title">'+I(a.vm)+'</div><div class="controls">'+(a.qd?'<div class="pending">'+I(a.qd)+"</div>":"")+"</div></div>"}
function Bi(){return'<div class="tabbed activity"><ul class="tabs"><li class="tab activity"><div class="label">ACTIVITY</div></li><li class="tab starred"><div class="label"><div class="heart"></div>\'d</div></li></ul><div class="activity-content content activity"><div class="loading loading-activity"><div class="loading-spinner"></div></div></div><div class="starred-content content starred"><div class="loading loading-starred"><div class="loading-spinner"></div></div></div><div class="spinner" style="display:none"></div></div>'}
function Ci(){return'<div class="tabbed"><ul class="tabs"><li class="tab comments"><div class="label">CONVERSATION</div></li><li class="tab tweets"><div class="label">TWEETS</div></li></ul><div class="comments-content content comments-holder"><div class="loading loading-activity"><div class="loading-spinner"></div></div></div><div class="tweets-content content tweet-holder"><div class="loading loading-starred"><div class="loading-spinner"></div></div></div></div>'}
function Di(a){return'<div class="list-media show"><div class="media"><div class="preview"><div class="thumb" style="background-image:url('+I(a.media.ib)+"); background-position: 50% "+I(a.media.wd)+'%"></div><div class="title">'+I(a.media.name)+'</div><div class="stats"><div class="comment-count"><div class="icon"></div>'+I(a.media.Uc)+'</div><div class="like-count"><div class="icon"></div>'+I(a.media.dl)+'</div></div></div></div><div class="publisher">'+(a.media.na?'<img src="'+I(a.media.na.P)+
'"><div class="name">'+I(a.media.na.name)+"</div>":"")+'<div class="list-play"><div class="icon"></div></div><div class="list-plus"><div class="icon"></div></div></div></div>'}
function Ei(a){return'<div class="admin-media list-media"><div class="media"><div class="preview"><div class="thumb" style="background-image:url('+I(a.media.ib)+"); background-position: 50% "+I(a.media.wd)+'%"></div><div class="title">'+I(a.media.name)+'</div><div class="published">'+I(a.Vb)+'</div><div class="play"></div><div class="approve"></div><div class="remove"></div><div class="repos"></div></div></div><div class="publisher"><img src="'+I(a.media.na.P)+'"><div class="name">'+I(a.media.na.name)+
'</div><div class="duration">'+I(a.media.duration)+' seconds</div></div><div class="description">'+I(a.media.description)+"</div></div>"};function Fi(){R.call(this);this.Pb={};this.Qb=0;this.ub=l;this.S=new Ag("Search");this.ka=new xf("Search");pf(this.ka,16,j)}t(Fi,R);m=Fi.prototype;
m.F=function(a){Fi.d.F.call(this,a);this.S.g(D("search-input"));this.ka.g(D("search-icon"));this.pf=D("search-results");this.mf=E("result-medias",this.b());this.lf=E("result-channels",this.b());this.Of=D("clear-icon");var a=new $e(this.S.b()),b=new Cg(function(){if(this.S.D()){var a=hi.a(),b=this.S.D(),f=q(this.ql,this);Y("https://www.googleapis.com/youtube/v3/search?q="+b+"&type=channel,playlist&part=snippet&maxResults=3&key=AIzaSyAUF3ESL0wYUuSWmOezgZclQFpNGZNBePw",q(function(a){a=mg(a.target);this.Hh=
Oa(a.items,function(a){return{playlist_id:a.id.playlistId,channel_id:a.id.channelId,name:a.snippet.title,thumbnail:a.snippet.thumbnails["default"].url}},this);f&&f(this.Hh)},a));hi.a().search(this.S.D(),q(this.El,this));O(this.Of,j);y(this.b(),"show")}else this.mf.innerHTML="",this.lf.innerHTML="",this.ub=l,B(this.pf,"no-medias",j)},1E3,this);P(P(P(P(this.k(),this.b(),"click",q(function(){of(this.ka,j);this.ub&&y(this.b(),"show")},this)),a,"key",q(function(a){a.stopPropagation();b.Qd()},this)),this.Of,
"click",q(function(){this.S.wa("");z(this.b(),"show");of(this.ka,l);O(this.Of,l);this.mf.innerHTML="";this.lf.innerHTML="";this.ub=l;B(this.pf,"no-medias",j)},this)),window,"click",q(function(a){Xe(this.ka)&&(qc(a.target,k,"search")||L(q(function(){z(this.b(),"show");of(this.ka,l)},this)))},this))};m.ql=function(a){this.lf.innerHTML="";this.ub=!!a.length||this.ub;B(this.pf,"no-medias",!this.ub);u(a,function(a){this.ec(a)},this)};
m.El=function(a){this.mf.innerHTML="";this.ub=!!a.length||this.ub;B(this.pf,"no-medias",!this.ub);u(a,function(a){this.nb(a)},this)};
m.nb=function(a){var b=H(Di,{media:a}),c=E("list-play",b),d=E("list-plus",b);this.mf.appendChild(b);P(P(P(this.k(),b,"click",q(function(b){b.preventDefault();b.stopPropagation();Z.a().c(Fg,a)},this)),c,"click",q(function(b){b.preventDefault();b.stopPropagation();z(this.b(),"show");b=ag(a);W.a().c(Gf,b)},this)),d,"click",function(b){b.preventDefault();b.stopPropagation();Jf().c(jg,a,j)})};
m.ec=function(a){var b=H(ii,{name:a.name,se:a.thumbnail});this.lf.appendChild(b);P(this.k(),b,"click",q(function(c){c.preventDefault();c.stopPropagation();y(b,"loading");Y("/_ytchannel",q(function(c){c=mg(c.target);a=T.a().Ae(c.channel);c=new $f(c.program);a.c(ig,c);T.a().c(Cf,a);z(b,"loading")},this),"POST","&name="+a.name+(a.channel_id?"&channel_id="+a.channel_id:"")+(a.playlist_id?"&playlist_id="+a.playlist_id:""))},this))};function Z(){M.call(this)}t(Z,M);la(Z);var Fg="media-info",Gg="profile";function Gi(){J.call(this);this.Vd=[];this.om=[];this.me=[]}t(Gi,$c);m=Gi.prototype;m.Ii=l;m.Ji=l;m.lg=l;m.Dj=ba("of");m.init=function(){if(!this.lg){for(var a,b=0;a=this.Vd[b];b++)Hi(this,a);this.lg=j}};function Hi(a,b){a.Ii&&(K(b.element,"mousedown",b.$i,l,b),a.ah&&y(b.element,a.ah));a.Ji&&a.eh&&y(b.element,a.eh)}
m.Jc=function(a,b){if(!this.za)if(this.za=b,this.dispatchEvent(new Ii("dragstart",this,this.za))==l)this.za=k;else{var c=b.Vc,d=this.Ie(c);this.nk&&y(d,this.nk);this.ad=d;d=Wb(c);d.body.appendChild(this.ad);var f=this.ad,g=Td(c),c=ce(c,"margin");g.x-=2*(c.left||0);g.y-=2*(c.top||0);f.style.position="absolute";f.style.left=g.x+"px";f.style.top=g.y+"px";this.p=new he(f);this.p.Dj(this.of);K(this.p,"drag",this.aj,l,this);K(this.p,"end",this.qc,l,this);K(d.body,"selectstart",this.Mj);this.vd=[];for(d=
0;c=this.om[d];d++)for(var h,f=0;h=c.Vd[f];f++)for(var g=c,n=[h.element],r=this.vd,v=0;v<n.length;v++){var w=n[v],C=Td(w),U=Q(w),C=new Gd(C.y,C.x+U.width,C.y+U.height,C.x);r.push(new Ji(C,g,h,w));Ki(this,C)}this.zb||(this.zb=new Gd(0,0,0,0));for(d=0;c=this.me[d];d++)c.Sf=[],c.xj=c.e.scrollLeft,c.yj=c.e.scrollTop,f=Td(c.e),g=Q(c.e),c.W=new Gd(f.y,f.x+g.width,f.y+g.height,f.x);for(d=0;g=this.vd[d];d++)for(f=0;c=this.me[f];f++)ic(c.e,g.e)&&(c.Sf.push(g),g.le=c);this.dc=k;for(d=0;c=this.me[d];d++)K(c.e,
"scroll",this.Nh,l,this);this.p.Jc(a);a.preventDefault()}};
m.qc=function(a){var b=a.mk?k:this.dc;if(b&&b.ya){var c=a.clientX,a=a.clientY,d=sc(Ub(this.ad)),f=c+d.x,d=a+d.y,g;this.re&&(g=this.re(b.vb,b.W,f,d));this.dispatchEvent(new Ii("drag",this,this.za,b.ya,b.vb,b.e,c,a,f,d));b.ya.dispatchEvent(new Ii("drop",this,this.za,b.ya,b.vb,b.e,c,a,f,d,g))}this.dispatchEvent(new Ii("dragend",this,this.za));Uc(this.p,"drag",this.aj,l,this);Uc(this.p,"end",this.qc,l,this);Uc(Wb(this.za.Vc).body,"selectstart",this.Mj);for(b=0;c=this.me[b];b++)Uc(c.e,"scroll",this.Nh,
l,this),c.Sf=[];this.p.ba();dc(this.ad);delete this.za;delete this.ad;delete this.p;delete this.vd;delete this.dc};
m.aj=function(a){var b,c=sc(Ub(this.ad));b=new Ib(a.clientX+c.x,a.clientY+c.y);var c=b.x,d=b.y,f=this.dc,g;if(f){this.re&&f.ya&&(g=this.re(f.vb,f.W,c,d));if(f.W.contains(b)&&g==this.yh)return;f.ya&&(this.dispatchEvent(new Ii("dragout",this,this.za,f.ya,f.vb,f.e)),f.ya.dispatchEvent(new Ii("dragout",this,this.za,f.ya,f.vb,f.e,i,i,i,i,this.yh)));this.yh=g;this.dc=k}if(this.zb.contains(b)){a:{for(var h=0;f=this.vd[h];h++)if(f.W.contains(b))if(f.le){if(f.le.W.contains(b)){b=f;break a}}else{b=f;break a}b=
k}if((f=this.dc=b)&&f.ya)this.re&&(g=this.re(f.vb,f.W,c,d)),c=new Ii("dragover",this,this.za,f.ya,f.vb,f.e),c.nm=g,this.dispatchEvent(c),f.ya.dispatchEvent(new Ii("dragover",this,this.za,f.ya,f.vb,f.e,a.clientX,a.clientY,i,i,g));else if(!f){this.ta||(this.ta=new Ji(this.zb.clone()));a=this.ta.W;a.top=this.zb.top;a.right=this.zb.right;a.bottom=this.zb.bottom;a.left=this.zb.left;for(g=0;f=this.vd[g];g++)b=f.W,f.le&&(f=f.le.W,b=new Gd(Math.max(b.top,f.top),Math.min(b.right,f.right),Math.min(b.bottom,
f.bottom),Math.max(b.left,f.left))),f=k,c>=b.right?f=b.right>a.left?b.right:a.left:c<b.left&&(f=b.left<a.right?b.left:a.right),h=k,d>=b.bottom?h=b.bottom>a.top?b.bottom:a.top:d<b.top&&(h=b.top<a.bottom?b.top:a.bottom),f!==k&&h!==k&&(Math.abs(f-c)>Math.abs(h-d)?h=k:f=k),f===k?h!==k&&(h<=d?a.top=h:a.bottom=h):f<=c?a.left=f:a.right=f;this.dc=10<=(a.right-a.left)*(a.bottom-a.top)?this.ta:k}}};m.Mj=da(l);
m.Nh=function(a){for(var b=0,c;c=this.me[b];b++)if(a.target==c.e){var d=c.yj-c.e.scrollTop,f=c.xj-c.e.scrollLeft;c.yj=c.e.scrollTop;c.xj=c.e.scrollLeft;this.ta&&this.dc==this.ta&&(0<d?this.ta.W.top+=d:this.ta.W.bottom+=d,0<f?this.ta.W.left+=f:this.ta.W.right+=f);for(var g=0,h;h=c.Sf[g];g++)h=h.W,h.top+=d,h.left+=f,h.bottom+=d,h.right+=f,Ki(this,h)}this.p.lj(a)};
m.Ie=function(a){var b=a.cloneNode(j);switch(a.tagName.toLowerCase()){case "tr":return G("table",k,G("tbody",k,b));case "td":case "th":return G("table",k,G("tbody",k,G("tr",k,b)));default:return b}};function Ki(a,b){if(1==a.vd.length)a.zb=new Gd(b.top,b.right,b.bottom,b.left);else{var c=a.zb;c.left=Math.min(b.left,c.left);c.right=Math.max(b.right,c.right);c.top=Math.min(b.top,c.top);c.bottom=Math.max(b.bottom,c.bottom)}}
m.n=function(){Gi.d.n.call(this);for(var a,b=0;a=this.Vd[b];b++)this.Ii&&(Uc(a.element,"mousedown",a.$i,l,a),this.ah&&z(a.element,this.ah)),this.Ji&&this.eh&&z(a.element,this.eh),a.ba();this.Vd.length=0};function Ii(a,b,c,d,f,g,h,n,r,v,w){Gc.call(this,a);this.kn=b;this.ln=c;this.mn=d;this.on=f;this.nn=g;this.clientX=h;this.clientY=n;this.Ln=r;this.Mn=v;this.nm=w}t(Ii,Gc);Ii.prototype.n=aa();
function Li(a,b){J.call(this);this.element=D(a);this.data=b;this.O=k;this.element||e(Error("Invalid argument"))}t(Li,$c);m=Li.prototype;m.Vc=k;m.$i=function(a){if(Lc(a)){var b=a.target;b&&(K(b,"mousemove",this.nd,l,this),K(b,"mouseout",this.nd,l,this),K(b,"mouseup",this.vg,l,this),this.Vc=b,this.bh=new Ib(a.clientX,a.clientY),a.preventDefault())}};m.rf=ba("O");
m.nd=function(a){var b=this.Vc,c="mouseout"==a.type&&a.target==b;if(5<Math.abs(a.clientX-this.bh.x)+Math.abs(a.clientY-this.bh.y)||c)Uc(b,"mousemove",this.nd,l,this),Uc(b,"mouseout",this.nd,l,this),Uc(b,"mouseup",this.vg,l,this),this.O.Jc(a,this)};m.vg=function(){var a=this.Vc;Uc(a,"mousemove",this.nd,l,this);Uc(a,"mouseout",this.nd,l,this);Uc(a,"mouseup",this.vg,l,this);delete this.bh;this.Vc=k};function Ji(a,b,c,d){this.W=a;this.ya=b;this.vb=c;this.e=d}Ji.prototype.le=k;function Mi(){Gi.call(this)}t(Mi,Gi);function Ni(a,b){b.rf(a);a.Vd.push(b);a.lg&&Hi(a,b)};function Oi(a){var b={};"rel"in b||(b.rel="nofollow");"target"in b||(b.target="_blank");var c=[],d;for(d in b)b.hasOwnProperty(d)&&b[d]&&c.push(Da(d),'="',Da(b[d]),'" ');var f=c.join("");return a.replace(Pi,function(a,b,c,d,v){a=[Da(b)];if(!c)return a[0];a.push("<a ",f,'href="');d?(a.push("mailto:"),c=d,d=""):(v||a.push("http://"),(d=c.match(Qi))?(c=d[1],d=d[2]):d="");c=Da(c);d=Da(d);a.push(c,'">',c,"</a>",d);return a.join("")})}
var Qi=/^(.*)([:;,\.?\[\]])$/,Pi=RegExp("([\\S\\s]*?)(\\b(?:mailto:)?([\\w.+-]+@[A-Za-z0-9.-]+\\.(?:com|org|net|edu|gov|aero|biz|cat|coop|info|int|jobs|mobi|museum|name|pro|travel|arpa|asia|xxx|[a-z][a-z])\\b)|\\b(?:(https?|ftp)://+|www\\.)\\w[:;,\\.?\\[\\]\\w/~%&=+#-@!]*|$)","g");function Ri(){}t(Ri,Re);la(Ri);m=Ri.prototype;m.cd=aa();m.g=function(a,b){kf(a);a.pb&=-256;pf(a,32,l);Ri.d.g.call(this,a,b);a.Fc(b.value);return b};m.L=function(a){kf(a);a.pb&=-256;pf(a,32,l);return a.Na().L("textarea",{"class":Te(this,a).join(" "),disabled:!a.isEnabled()},a.Za||"")};m.gc=function(a){return"TEXTAREA"==a.tagName};m.Gc=ja;m.mg=function(a){return a.isEnabled()};m.ud=ja;m.oa=function(a,b,c){Ri.d.oa.call(this,a,b,c);if((a=a.b())&&1==b)a.disabled=c};m.Va=ja;
m.Fc=function(a,b){a&&(a.value=b)};m.la=da("goog-textarea");function Si(a,b,c){jf.call(this,a,b||Ri.a(),c);kf(this);this.td(j);a||(this.Za="")}t(Si,jf);var Ti=lb||mb;m=Si.prototype;m.gd=l;m.Ba=0;m.Ri=0;m.Zi=0;m.ti=l;m.df=l;m.Wg=l;m.Vg=l;function Ui(a){return a.de.top+a.de.bottom+a.Fh.top+a.Fh.bottom}function Vi(a){var b=a.Zi,c=a.b();b&&(c&&a.df)&&(b-=Ui(a));return b}function Wi(a){var b=a.Ri,c=a.b();b&&(c&&a.df)&&(b-=Ui(a));return b}m.wa=function(a){this.Fc(String(a))};m.D=function(){return this.b().value};m.Fc=function(a){Si.d.Fc.call(this,a);this.resize()};
m.gb=function(a){Si.d.gb.call(this,a);this.b().disabled=!a};m.resize=function(){this.b()&&this.Ue()};m.w=function(){Si.d.w.call(this);var a=this.b();Id(a,{overflowY:"hidden",overflowX:"auto",boxSizing:"border-box",MsBoxSizing:"border-box",WebkitBoxSizing:"border-box",MozBoxSizing:"border-box"});this.de=ce(a,"padding");this.Fh=fe(a);P(P(P(P(this.k(),a,"scroll",this.Ue),a,"focus",this.Ue),a,"keyup",this.Ue),a,"mouseup",this.il);this.resize()};
function Xi(a){if(!a.ti){var b=a.b().cloneNode(l);Id(b,{position:"absolute",height:"auto",top:"-9999px",margin:"0",padding:"1px",border:"1px solid #000",overflow:"hidden"});a.Na().G.body.appendChild(b);var c=b.scrollHeight;b.style.padding="10px";var d=b.scrollHeight;a.Wg=d>c;b.style.borderWidth="10px";a.Vg=b.scrollHeight>d;b.style.height="100px";100!=b.offsetHeight&&(a.df=j);dc(b);a.ti=j}var b=a.b(),c=a.b().scrollHeight,f=a.b(),d=f.offsetHeight-f.clientHeight;if(!a.Wg)var g=a.de,d=d-(g.top+g.bottom);
a.Vg||(f=fe(f),d-=f.top+f.bottom);c+=0<d?d:0;a.df?c-=Ui(a):(a.Wg||(d=a.de,c+=d.top+d.bottom),a.Vg||(a=fe(b),c+=a.top+a.bottom));return c}function Yi(a,b){a.Ba!=b&&(a.Ba=b,a.b().style.height=b+"px")}function Zi(a){a=a.b();a.style.height="auto";var b=a.value.match(/\n/g)||[];a.rows=b.length+1}
m.Ue=function(){if(!this.gd){var a=l;this.gd=j;var b=this.b(),c=this.Ba;if(b.scrollHeight){var d=l,f=l,g=Xi(this),h=b.offsetHeight,n=Vi(this),r=Wi(this);n&&g<n?(Yi(this,n),d=j):r&&g>r?(Yi(this,r),b.style.overflowY="",f=j):h!=g?Yi(this,g):this.Ba||(this.Ba=g);!d&&(!f&&Ti)&&(a=j)}else Zi(this);this.gd=l;a&&(a=this.b(),this.gd||(this.gd=j,b=l,a.value||(a.value=" ",b=j),(f=a.scrollHeight)?(g=Xi(this),d=Vi(this),h=Wi(this),!(d&&g<=d)&&!(h&&g>=h)&&(h=this.de,a.style.paddingBottom=h.bottom+1+"px",Xi(this)==
g&&(a.style.paddingBottom=h.bottom+f+"px",a.scrollTop=0,f=Xi(this)-f,f>=d?Yi(this,f):Yi(this,d)),a.style.paddingBottom=h.bottom+"px")):Zi(this),b&&(a.value=""),this.gd=l));c!=this.Ba&&this.dispatchEvent("resize")}};m.il=function(){var a=this.b(),b=a.offsetHeight;a.filters&&a.filters.length&&(a=a.filters.item("DXImageTransform.Microsoft.DropShadow"))&&(b-=a.offX);b!=this.Ba&&(this.Ba=this.Zi=b)};function $i(a,b,c,d,f,g,h){R.call(this);this.va=zf();this.Xa=a;this.gf=b;this.Jg=c;this.Pg=d;this.Lf=f.categories;this.tk=f.feed_categories;this.vk=f.feed_id;this.hh=g||k;this.Yc=h||k;this.Xf=this.va?new Mi:k;this.sc={pending:l,all:l};this.hb=["pending","all","playlists","publishers","categories"]}t($i,R);var aj="top_rated top_favorites most_shared most_recent most_discussed most_responded recently_featured on_the_web most_viewed".split(" "),bj="All Film Autos Music Animals Sports Travel Games Videoblog People Comedy Entertainment News Howto Education Tech Nonprofit Movies Shows Shortmov".split(" ");
m=$i.prototype;
m.F=function(a){$i.d.F.call(this,a);a.innerHTML="";a.scrollTop=0;vc(a,ui);var b=E("pending-content",a);u(this.gf,function(a){this.nb(b,a)},this);this.Ql=E("playlists-content",a);u(this.Jg,this.Bh,this);this.Tl=E("publishers-content",a);u(this.Pg,this.Ch,this);this.gk=E("categories-list",a);this.bi=E("feed-ids",a);this.uk=E("feed-cats",a);Y("/admin/_categories",q(function(a){a=mg(a.target);u(a,function(a){cj(this,a,"category",Sa(this.Lf,a.id)||!this.Lf.length)},this)},this));u(bj,function(a){cj(this,a,
"feed_category",Sa(this.tk,a))},this);u(aj,function(a){cj(this,a,"feed_id",this.vk==a)},this);this.resize()};
m.w=function(){$i.d.w.call(this);this.S=E("input",this.b());var a=new $e(this.S),b=new Bg(this.S);this.Ha=E("tabs",this.b());this.I="pending";var c=l;P(P(P(P(this.k(),window,"resize",za(L,q(this.resize,this))),a,"key",q(function(a){"13"==a.keyCode&&dj(this,this.S.value)},this)),b,Dg,q(function(){dj(this,this.S.value)},this)),this.Ha,"click",q(function(a){a=qc(a.target,"li");this.Rb(a)},this));P(this.k(),this.b(),"scroll",q(function(){if(this.Xa&&!c&&!this.sc[this.I]&&("pending"==this.I||"all"==this.I)&&
this.b().scrollTop+F().height>this.b().scrollHeight-this.b().clientTop){c=j;var a=E("spinner",this.b());O(a,j);var b="pending"==this.I?this.gf:this.Ff;Y("/admin/_media/collection/"+this.Xa+"?offset="+b.length+("pending"==this.I?"&pending=1":""),q(function(g){c=l;g=Kg(Lg(g.target)).medias;g=Oa(g,function(a){return new Tf(a)});Xa(b,g);var h=E(this.I+"-content",this.b());u(g,function(a){this.nb(h,a)},this);this.sc[this.I]=!g.length;B(a,"finished",!g.length)},this))}},this));this.resize()};
m.resize=function(){Wd(this.b(),F().height-40)};
function dj(a,b){var c;c=b.match("(?:(https?|ftp)://+|www\\.)\\w[:;,\\.?\\[\\]\\w/~%&=+#-@!]*");c=c!=k?c[0]:"";a.Xa&&c&&(a.S.disabled="disabled",Y("admin/_add/collection/"+a.Xa,q(function(a){this.S.value="";this.S.disabled="";a=mg(a.target);if("media"==a.type){var b=Zf(Yf.a(),a.data);Qa(this.gf,function(a){return a.id==b.id})||(this.gf.push(b),a=E("pending-content",this.b()),this.nb(a,b,j),this.Rb(Yb("li","pending",i)[0]))}else if("playlist"==a.type){var c=a.data;Qa(this.Jg,function(a){return a.id==
c.id})||(this.Jg.push(c),this.Bh(c),this.Rb(Yb("li","playlists",i)[0]))}else if("publisher"==a.type){var h=a.data;h&&!Qa(this.Pg,function(a){return a.id==h.id})&&(this.Pg.push(h),this.Ch(h),this.Rb(Yb("li","publishers",i)[0]))}},a),"POST","url="+c))}
m.Rb=function(a){u(this.hb,function(b){B(this.Ha.parentElement,b,A(a,b));this.I=A(a,b)?b:this.I},this);this.Xa&&!this.Ff&&Y("/admin/_media/collection/"+this.Xa,q(function(a){a=Kg(Lg(a.target)).medias;this.Ff=Oa(a,function(a){return new Tf(a)});var c=E("all-content",this.b());u(this.Ff,function(a){this.nb(c,a)},this)},this))};
m.Bh=function(a){var b=H(vi,{name:a.name});this.Ql.appendChild(b);var c=E("remove",b);P(this.k(),c,"click",function(){Y("admin/_remove/collection/"+this.Xa,q(function(){dc(b)},this),"POST","pub_id="+a.id)})};m.Ch=function(a){var b=H(xi,{name:a.name||a.id,P:a.picture});this.Tl.appendChild(b);var c=E("remove",b);P(this.k(),c,"click",function(){Y("admin/_remove/collection/"+this.Xa,q(function(){dc(b)},this),"POST","pub_id="+a.id)})};
function cj(a,b,c,d){if("category"==c){var f=H(wi,{name:b.name,id:b.id});a.gk.appendChild(f)}else f=H(wi,{name:b,id:b}),("feed_id"==c?a.bi:a.uk).appendChild(f);B(f,"enabled",!!d);var g="category"==c?"cat_id="+b.id:"feed_id"==c?"feed_id="+b:"feed_cat="+b;P(a.k(),f,"click",function(){"feed_id"==c&&u(ec(this.bi),function(a){z(a,"enabled")});var a=Hb(f,"enabled");Y("admin/_edit/collection/"+this.Xa,te(),"POST",g+"&enabled="+a)})}
m.nb=function(a,b,c){var d=H(Ei,{media:b,Vb:Xf(b)});c?cc(a,d,0):a.appendChild(d);this.va&&(a=this.Xf,c=new Li(d,i),Ni(a,c));var a=new he(E("repos",d)),f=E("thumb",d),c=E("play",d),g=E("approve",d),h=E("remove",d);a.Ld=function(a,b){var c=b-24;-50<=c&&50>=c&&Id(f,"background-position-y",50-c+"%")};P(P(P(P(this.k(),a,"end",function(){var a=(f.style[Ka("background-position")]||"").split(" ")[1],a=a.substring(0,a.length-1);Y("/admin/_posthumb",te(),"POST","media="+b.id+"&pos="+a)}),c,"click",q(this.Ml,
this,b)),g,"click",q(this.Dh,this,b,j,d)),h,"click",q(this.Dh,this,b,l,d));L(za(y,d,"show"))};m.wg=function(a,b){Y("/admin/_addprogram",q(function(b){b=Kg(Lg(b.target));b=new $f(b);a.c(ig,b)},this),"POST","channel="+a.id+"&media="+b.id)};m.Dh=function(a,b,c){var d=a.ik||this.Xa;Y("admin/_media/collection",q(function(){y(c,"remove");L(function(){dc(c)},300);N.a();var b;N.a();b=nc(D("toggle-pending"));kd(0,b-1);Z.a().c("approved",a,d)},this),"POST","col="+d+"&media="+a.id+"&approve="+b)};
m.Ml=function(a){a=ag(a);W.a().c(Gf,a)};function ej(a){R.call(this);this.Eb=a||k;this.zd=this.Ih=this.Pj=this.Mh=0}t(ej,R);m=ej.prototype;m.L=function(){this.e=H(ti)};m.F=function(a){ej.d.F.call(this,a);var b=H(ti,{Ci:this.Eb?"Add a collection":"Add a Channel"});a.innerHTML=b.innerHTML};
m.w=function(){ej.d.w.call(this);this.S=E("input",this.b());var a=new $e(this.S);this.Zl=E("scrollable",this.b());this.aa=E("admin-channels",this.b());this.kh=E("topics",this.b());this.Je=E("collections",this.b());this.Lh=D("admin-col-list");this.Be=D("admin-list");T.a();this.Eb?(Y("/admin/_topicmedias/"+this.Eb,q(function(a){a=mg(a.target);Lb(a,function(a,b){O(this.kh.parentElement,j);if(a&&a.length){var f=H(Ai,{vm:b,qd:a.length});this.kh.appendChild(f);K(f,"click",q(function(){a=Oa(a,function(a){return new Tf(a)});
(new $i("",a,[],[],[])).g(this.Be);Z.a().c("navigate",this.Be,l,b)},this));Z.a().subscribe("approved",function(b){if(Qa(a,function(a){return a.id==b.id})){var d=E("pending",f),n=nc(d)-1;0>=n?(dc(f),Cc(f)):jc(d,n)}},this)}},this);this.zd&&kd(N.a(),this.zd);this.Pj=Q(this.kh.parentElement).height;this.resize()},this)),Y("/admin/_collections/"+this.Eb,q(function(a){a=mg(a.target);O(this.Je.parentElement,!!a.length);u(a,this.Ah,this);this.zd&&kd(N.a(),this.zd);this.Mh=Q(this.Je.parentElement).height;
this.resize()},this))):Y("/admin/_channels",q(function(a){a=mg(a.target);O(this.aa.parentElement,!!a.length);u(a,this.ec,this);this.Ih=Q(this.aa.parentElement).height;this.resize()},this));P(this.k(),a,"key",q(function(a){"13"==a.keyCode&&this.S.value&&(a=this.S.value,this.S.disabled="disabled",Y(this.Eb?"/admin/_collections":"/admin/_channels",q(function(a){a=mg(a.target);this.Eb?(O(this.Je.parentElement,!!a),this.Ah(a)):(O(this.aa.parentElement,!!a),this.ec(a));this.S.disabled="";this.S.value=""},
this),"POST","name="+a+(this.Eb?"&cid="+this.Eb:"")))},this))};
m.ec=function(a){var b=new hg(a),c=H(yi,{V:b});this.aa.appendChild(c);K(c,"click",q(function(a){A(a.target,"on")||A(a.target,"off")?(B(c,"on",A(a.target,"on")),B(c,"off",!A(a.target,"on")),Y("/admin/_channel/online/"+b.id,q(function(a){a.target.disabled="";a=mg(a.target);B(c,"on",a.online);B(c,"off",!a.online)},this),"POST","online="+A(a.target,"on"))):A(a.target,"program")?Y("/admin/_program",te(),"POST","channel_id="+b.id):A(a.target,"fetch")?Y("/admin/_fetch",function(){alert("Fetch began, but give it some time.")},
"POST","channel_id="+b.id):A(a.target,"remove")&&confirm("Remove "+b.name+"?")?(O(c,l),Y("/admin/_channels/"+b.id,function(a){mg(a.target).deleted?dc(c):O(c,j)},"DELETE")):((new ej(b.id)).g(this.Lh),Z.a().c("navigate",this.Lh,l,b.name))},this))};
m.Ah=function(a){var b=H(zi,{Pf:a});this.zd+=a.pending;this.Je.appendChild(b);K(b,"click",q(function(c){A(c.target,"remove")&&confirm("Remove "+a.name+"?")?(O(b,l),Y("/admin/_collections/"+a.id,function(a){mg(a.target).deleted?dc(b):O(b,j)},"DELETE")):A(c.target,"fetch")?Y("/admin/_fetch",function(){alert("Fetch began, but give it some time.")},"POST","col_id="+a.id):Y("/admin/_media/collection/"+a.id+"?pending=1",q(function(b){var b=Kg(Lg(b.target)),c=b.medias,c=Oa(c,function(a){return new Tf(a)});
(new $i(a.id,c,b.playlists,b.publishers,b.categories)).g(this.Be);Z.a().c("navigate",this.Be,l,a.name)},this))},this));Z.a().subscribe("approved",function(c,d){if(d==a.id){var f=E("pending",b),g=nc(f)-1;0>=g?(dc(b),Cc(b)):jc(f,g)}},this)};m.resize=function(){Wd(this.Zl,this.Ih+this.Pj+this.Mh+110)};function fj(){R.call(this);this.j=new Si("Add to the conversation.");this.kb=new xf("tweet");pf(this.kb,16,j);this.ab=new xf("post");pf(this.ab,16,j);var a=X.a().o;this.Pe=a.Rl;this.yf=a.qj;this.Oc=new xf("add");this.Gg=this.jb=this.jf=k}t(fj,R);m=fj.prototype;m.L=function(){this.e=H(ni)};
m.w=function(){fj.d.w.call(this);this.j.g(E("comment-textarea",this.b()));var a=this.j;a.Ri=70;a.resize();a=new $e(this.j.Ib());this.Ke=E("comment-controls",this.b());this.Yk=E("input-holder",this.b());Ne(this,this.kb);this.kb.g(E("tweet-toggle",this.b()));Y("/_twitter",q(function(a){a=mg(a.target);this.yf=this.yf&&a.auth;this.xm=a.auth_url;of(this.kb,this.yf)},this));Ne(this,this.ab);this.ab.g(E("fb-toggle",this.b()));FB.api("/me/permissions",q(function(a){this.Pe=this.Pe&&!!a.data[0].publish_stream;
of(this.ab,this.Pe)},this));Ne(this,this.Oc);this.Oc.g(E("add-comment",this.b()));this.Oc.gb(l);P(P(P(P(P(P(this.k(),this.j.b(),"focus",q(function(){Nd(this.Ke,0,0);this.dispatchEvent("focus")},this)),a,"key",q(function(a){a.stopPropagation();this.Oc.gb(this.j.D());"13"==a.keyCode?(a.preventDefault(),a.stopPropagation(),this.Oc.setActive(this.j.D()),this.pd(a)):"8"==a.keyCode&&(!this.D()&&this.jb)&&gj(this)},this)),this.j,"resize",q(function(a){this.dispatchEvent(a)},this)),this.ab,"action",q(this.tl,
this)),this.kb,"action",q(this.Kl,this)),this.Oc,"action",q(this.pd,this));Z.a().subscribe("reply-comment",this.uj,this);Z.a().subscribe("reply-tweet",this.Xl,this);X.a().o.subscribe(cg,function(){of(this.kb,j)},this)};m.uj=function(a,b){this.jb&&gj(this);this.jf=b;this.Gg=a.id?a.id:a.toString();this.jb=G("div","token","@"+b.Hb());this.Yk.appendChild(this.jb);this.Sa(j);this.j.b().style.paddingLeft=Q(this.jb).width+5+"px"};
m.Xl=function(a){this.jb&&gj(this);this.zn=a.id;this.wa((this.D()?this.D()+" ":"")+"@"+a.handle+" ");this.Sa(j);this.kb.gb(j);this.Sa(j);a=this.D().length;this.setSelectionRange(a,a)};function gj(a){a.jf=k;a.Gg=k;dc(a.jb);a.jb=k;a.j.b().style.paddingLeft=""}
m.setSelectionRange=function(a,b){if(this.j.b().setSelectionRange)this.j.b().focus(),this.j.b().setSelectionRange(a,b);else if(this.j.b().createTextRange){var c=this.j.b().createTextRange();c.collapse(j);c.moveEnd("character",b);c.moveStart("character",a);c.select()}};m.D=function(){return this.j.D()};m.wa=function(a){return this.j.wa(a)};m.collapse=function(){return 25!=Pd(this.Ke).y?(Nd(this.Ke,0,25),j):l};m.Ud=function(){return A(this.b(),"focused")};
m.Sa=function(a){a&&(this.j.b().focus(),L(q(function(){Nd(this.Ke,0,0)},this)));return B(this.b(),"focused",a)};m.pd=function(){this.j.D()&&(this.dispatchEvent({type:"add",Gh:q(function(a){var b=mg(a.target),a=new hj(b.comment),c=b.tweet?new ij(b.tweet):k;if(b=Zf(Yf.a(),b.comment.media))b.c(Uf,a),c&&b.c("add-tweet",c)},this),Pd:Xe(this.ab),oh:Xe(this.kb),text:this.j.D(),da:this.Gg,wf:this.jf&&this.jf.id}),this.j.wa(""),gj(this))};
m.tl=function(){!this.Pe&&Xe(this.ab)&&(O(D("overlay"),j),FB.login(q(function(a){O(D("overlay"),l);this.sk=!!a.authResponse;of(this.ab,this.sk)},this),{scope:"publish_stream"}))};m.Kl=function(){if(!this.yf&&Xe(this.kb)){of(this.kb,l);var a=window.open(this.xm,"Twitter Login","height=300,width=550");a.moveTo(screen.width/2-225,screen.height/2-150);a.focus()}};function hj(a){this.id=a.id;this.i=Ng(X.a(),a.user);this.text=a.text;this.time=pd(a.time+"Z");this.Ul=ed(this.time.getTime());this.da=a.parent_id;this.tj=[];u(a.replies,function(a){a=new hj(a);this.tj.push(a)},this)};function ij(a){this.id=a.id;this.i=a.user&&Ng(X.a(),a.user);this.handle=a.handle;this.P=a.picture;this.text=a.text;this.time=pd(a.time+"Z")};function jj(a,b,c,d){R.call(this);this.f=a;this.Ya=b||[];this.jc={};this.we=!!c;this.mb=d||[];this.ve={};this.Ec=this.Zm=0}t(jj,R);m=jj.prototype;
m.F=function(a){jj.d.F.call(this,a);a.innerHTML="";a.scrollTop=0;y(this.b(),"ios-scroll");this.Q=G("div","loading",G("div","loading-spinner"));this.b().appendChild(this.Q);O(this.Q,l);this.Ac=G("div","no-comments","Start the conversation.");this.b().appendChild(this.Ac);this.z=G("div","comments tweets");this.b().appendChild(this.z);P(P(this.k(),window,"resize",za(L,q(this.resize,this))),this.z,"click",q(this.Qf,this));this.Ya.length?(u(this.Ya,function(a){this.fc(a)},this),this.md=Q(this.z).height):
this.we&&this.mb.length?(u(this.mb,function(a){this.Pc(a)},this),this.md=Q(this.z).height):O(this.Q,j);this.we?(Y("/_tweet/"+this.f.id+"?offset="+this.mb.length,q(function(a){O(this.Q,l);a=Kg(Lg(a.target));a=Oa(a,function(a){a=new ij(a);this.Pc(a);return a},this);this.md=Q(this.z).height;this.resize()},this)),this.f.subscribe("add-tweet",function(a){this.Pc(a,j)},this)):(Y("/_comment/"+this.f.id+"?offset="+this.Ya.length,q(function(a){O(this.Q,l);a=Kg(Lg(a.target));a=Oa(a,function(a){a=new hj(a);
this.fc(a);return a},this);this.md=Q(this.z).height;this.resize()},this)),this.f.subscribe(Uf,this.fc,this),this.f.subscribe(Vf,this.Rg,this));this.resize(41)};
m.Pc=function(a,b){this.ve[a.id]=a;O(this.Ac,l);var c=Oi(a.text),c=c.replace(/#(\S+)/g,function(a,b){return'<a target="_blank" href="http://twitter.com/search?q=%23'+b+'">'+a+"</a>"}),c=c.replace(/@(\S+)/g,function(a,b){return'<a target="_blank" href="http://twitter.com/'+b+'">'+a+"</a>"}),c=H(li,{Ab:a,text:c,timestamp:ed(a.time.getTime())});fd(dd.a(),a.time,E("timestamp",c));b?cc(this.z,c,0):this.z.appendChild(c);this.resize();O(hc(this.z),j)};
m.Qf=function(a){a=a.target;if(this.we){var b=qc(a,k,"tweet");b&&(b=this.ve[b.id.split("-")[1]],A(a,"reply")&&Z.a().c("reply-tweet",b))}else if(b=qc(a,k,"comment")){var b=b.id.split("-")[1],c=this.jc[b];A(a,"reply")?Z.a().c("reply-comment",c.da?this.jc[c.da]:c,c.i):A(a,"remove")&&this.f.c(Vf,b)}};m.Rg=function(a){var a=D("listcomment-"+a),b=a.nextSibling;for(dc(a);b&&A(b,"reply");)b=b.nextSibling,dc(b)};
m.fc=function(a){O(this.Ac,l);this.jc[a.id]=a;var b=H(mi,{prefix:"listcomment",qb:a,text:Oi(a.text),timestamp:ed(a.time.getTime()),nj:a.i.id==X.a().o.id});fd(dd.a(),a.time,E("timestamp",b));this.z.appendChild(b);this.resize()};m.resize=function(a){this.Ec=a||this.Ec;Wd(this.b(),F().height-42-this.Ec-(qc(this.b(),k,"tabbed")?30:0))};function kj(a,b,c,d){R.call(this);this.f=this.q=a;this.Ya=b||[];this.mb=c||[];this.we=!!d;this.Rf=new jj(a,this.Ya);this.mh=new jj(a,i,j,this.mb);this.j=new fj;this.hb=["comments","tweets"]}t(kj,R);m=kj.prototype;m.F=function(a){kj.d.F.call(this,a);y(a,"conversation");y(a,"ios-scroll");vc(a,Ci);y(a.firstChild,this.we?"tweets":"comments")};
m.w=function(){this.Ha=E("tabs",this.b());this.Rf.g(E("comments-content",this.b()));this.mh.g(E("tweets-content",this.b()));Le(this.j,this.b());P(P(P(P(P(P(P(this.k(),this.Ha,"click",q(function(a){a=qc(a.target,"li");this.Rb(a)},this)),this.j,"add",q(this.pd,this)),this.j,"resize",q(function(){A(this.b().firstChild,"comments")?this.Rf.resize(41):this.mh.resize(41)},this)),window,"click",q(function(a){!qc(a.target,k,"comment-input")&&!this.j.D()&&(this.j.Sa(l),this.j.collapse())},this)),E("no-comments",
this.b()),"click",q(this.jj,this)),Xb("no-comments",this.b())[1],"click",q(this.jj,this)),window,"click",q(function(a){!qc(a.target,k,"comment-input")&&!this.j.D()&&(this.j.Sa(l),this.j.collapse())},this));this.Rf.resize(41);this.mh.resize(41)};m.jj=function(a){a.preventDefault();a.stopPropagation();this.j.Sa(j)};
m.pd=function(a){Y("/_comment",a.Gh,"POST","media_id="+this.f.id+"&text="+a.text+"&tweet="+a.oh+"&facebook="+a.Pd+(a.da?"&parent_id="+a.da:"")+(a.wf?"&to_user_id="+a.wf:""));a.Pd&&!a.da&&(FB.api("/me/feed","POST",{message:a.text,name:this.f.name,link:this.f.link,picture:this.f.ib,caption:"on XYLO",description:this.f.description},aa()),of(this.j.ab,l))};m.Rb=function(a){u(this.hb,function(b){B(this.Ha.parentElement,b,A(a,b));this.I=A(a,b)?b:this.I},this)};function ed(a){var b=s(),c=Math.floor((b-a)/6E4),b=l;0>c&&(b=j,c*=-1);if(60>c)return lj(c,b,0);c=Math.floor(c/60);if(24>c)return lj(c,b,1);c=new Date(s());c.setHours(0);c.setMinutes(0);c.setSeconds(0);c.setMilliseconds(0);c=Math.ceil((c.getTime()-a)/864E5);b&&(c*=-1);return 14>c?lj(c,b,2):""}
function lj(a,b,c){return!b&&0==c?(b=Aa("{$num} minute ago",{num:a}),c=Aa("{$num} minutes ago",{num:a}),1==a?b:c):b&&0==c?(b=Aa("in {$num} minute",{num:a}),c=Aa("in {$num} minutes",{num:a}),1==a?b:c):!b&&1==c?(b=Aa("{$num} hour ago",{num:a}),c=Aa("{$num} hours ago",{num:a}),1==a?b:c):b&&1==c?(b=Aa("in {$num} hour",{num:a}),c=Aa("in {$num} hours",{num:a}),1==a?b:c):!b&&2==c?(b=Aa("{$num} day ago",{num:a}),c=Aa("{$num} days ago",{num:a}),1==a?b:c):b&&2==c?(b=Aa("in {$num} day",{num:a}),c=Aa("in {$num} days",
{num:a}),1==a?b:c):""};function mj(a,b,c,d){R.call(this);u(a.yg,function(a){var b=a.h();b&&b.media.id==this.id?(this.Pl=a,u(a.Nc,function(a){a.Mc||(this.wb[a.i.id]=a.i)})):this.wb={}},a);this.f=this.q=a;this.af=c||k;this.Ni=d||k;this.vi=l;this.ci=!b;this.Bd={};this.Ya=[];this.jc={};this.Li={};this.mb=[];this.ve={};this.j=new fj;this.Ic=new xf("Star");pf(this.Ic,16,j);this.ai=new xf("Facebook");this.Sj=new xf("Twitter");this.yb=new xf("Play");this.he=new xf("Plus");pf(this.he,16,j);this.Ec=0}t(mj,R);m=mj.prototype;
m.L=function(){this.e=H(ji,{media:this.f})};m.F=function(a){mj.d.F.call(this,a);var b=H(ji,{media:this.f,description:this.f.description?Oi(this.f.description):"",Vb:Xf(this.f),al:this.af?this.af.id:k});a.innerHTML=b.innerHTML};
m.w=function(){mj.d.w.call(this);this.Bb=E("viewers",this.b());var a=E("picture",this.b()),b=E("scrollable",this.b()),c=E("publisher",this.b()),d=E("title",this.b()),f=E("links",this.b());this.Q=E("loading",this.b());var g=a.firstChild;this.jk=E("info-contents",this.b());this.Jn=E("tweet-holder",this.b());this.lb=E("tweets",this.b());this.pc=E("dot-nav",this.b());this.z=E("comments",this.b());this.Ac=E("no-comments",this.b());Le(this.j,this.b());this.Ic.g(E("star",this.b()));of(this.Ic,eg(X.a().o,
this.f));this.ai.g(E("facebook",this.b()));this.Sj.g(E("twitter",this.b()));this.yb.g(E("play",this.b()));this.he.g(E("plus",this.b()));this.nh=new ad(5E3);this.Nn=E("watch-with",this.b());!this.ci||this.f.di?nj(this,l,this.f.description,this.f.qf,this.f.Rj,this.f.Fb):this.ci&&Y("/_info/"+this.f.id,q(function(a){a=Kg(Lg(a.target));nj(this,j,a.description,a.seen,a.tweets,a.comments)},this));P(P(P(P(P(P(P(P(P(P(P(P(P(P(P(P(P(P(P(P(P(P(P(this.k(),window,"resize",za(L,q(this.resize,this))),c,"click",
q(function(){Z.a().c("media-list",this.f.na.name,i,"/admin/_media/publisher/"+this.f.na.id,this.f.na.P,this.f.na.description,this.f.na.link,"/_publisher/"+this.f.na.id)},this)),this.Ic,"action",q(function(){Yf.a().c("star",this.f,Xe(this.Ic));Y("/_star",i,"POST","media_id="+this.f.id+(!Xe(this.Ic)?"&delete=1":""))},this)),this.ai,"action",q(this.sl,this)),this.Sj,"action",q(this.Jl,this)),this.yb,"action",q(this.xl,this)),this.he,"action",q(this.Al,this)),E("local",this.b()),"click",q(function(){O(E("link-select",
this.b()),j);E("link-input",this.b()).select()},this)),this.j,"add",q(this.pd,this)),this.Ac,"click",q(function(a){a.preventDefault();a.stopPropagation();this.j.Sa(j)},this)),E("conv-link",this.b()),"click",q(function(a){a.preventDefault();a.stopPropagation();Z.a().c("conversation",this.f,this.Ya,this.mb)},this)),E("tweets-link",this.b()),"click",q(function(a){a.preventDefault();a.stopPropagation();Z.a().c("conversation",this.f,this.Ya,this.mb,j)},this)),this.j,"focus",q(function(){this.resize(25,
j)},this)),this.j,"resize",q(function(a){this.resize(25+(a.target.Ba-41))},this)),this.pc,"click",q(function(a){A(a.target,"dot")&&(oj(this,a.target),this.nh.stop())},this)),this.nh,cd,q(function(){var a=this.Jd&&fc(this.Jd)||E("dot",this.b());L(q(function(){oj(this,a)},this))},this)),window,"click",q(function(a){!qc(a.target,k,"comment-input")&&!this.j.D()&&(this.j.Sa(l),this.j.collapse()&&this.resize(0))},this)),g,"load",function(){O(g,j);L(function(){Q(g).height<Q(a).height+50&&y(g,"fix-height");
Q(g).width>2*Q(a).width?y(g,"pan-left"):Q(g).height>2*Q(a).height&&y(g,"pan-top");g.style.marginTop=-Q(g).height/2+"px";g.style.marginLeft=-Q(g).width/2+"px";y(g,"show")})}),b,"scroll",q(function(){var h=(120-b.scrollTop)/100;$d(c,Math.min(1,Math.max(h,0)));$d(d,Math.min(1,Math.max(h,0)));$d(f,Math.min(1,Math.max(h,0)));$d(g,Math.min(0.5,Math.max(h,0.1)));B(a,"scrolled",10<b.scrollTop)},this)),this.z,"scroll",q(this.Ug,this)),this.z,"click",q(this.Qf,this)),this.lb,"click",q(this.wm,this)),E("desc-link",
this.b()),"click",q(function(){var c=Hb(a,"scrolled");(new De(b,[b.scrollLeft,b.scrollTop],[b.scrollLeft,c?170:0],300)).play()},this));this.af&&P(this.k(),E("prev-link",this.b()),"click",q(function(){Z.a().c(Fg,this.af,j,i,this.j.D())},this));this.Ni&&this.j.wa(this.Ni);this.f.subscribe(Uf,function(a){this.fc(a,j)},this);this.f.subscribe(Vf,this.Rg,this);this.f.subscribe("add-tweet",function(a){this.Pc(a,j)},this);this.f.subscribe(Wf,function(a,b,c){pj(this,a,c)},this);X.a().o.subscribe("set-starred",
function(){of(this.Ic,eg(X.a().o,this.f))},this);Jf().subscribe(jg,function(a,b){of(this.he,b)},this)};
function nj(a,b,c,d,f,g){c?(a.f.description=c,E("description",a.b()).innerHTML=Oi(c),O(E("scrollable",a.b()),j)):(O(E("desc-link",a.b()),l),O(E("scrollable",a.b()),l));c=Oa(d,function(a){var c=b?Ng(X.a(),a):a;if(c.id!=X.a().o.id){O(this.Bb,j);this.vi=j;var d=H(ki,{i:c,Hb:c.Hb});this.Bb.appendChild(d);this.Bd[a.id]=d;P(this.k(),d,"click",function(){Z.a().c(Gg,a)})}return c},a);Lb(a.f.wb,function(a){pj(this,a)},a);a.mb=Oa(f,function(a){a=b?new ij(a):a;this.Pc(a);this.Jd=this.pc.firstChild;y(this.Jd,
"selected");return a},a);f.length&&a.nh.start();a.z&&O(a.z.parentElement,j);O(a.Ac,!g.length);g=Oa(g,function(a,c){var d=b?new hj(a):a;d.da||this.fc(d,c==g.length-1);return d},a);O(a.Q,l);a.resize();b&&(a.f.Rj=a.mb,a.f.Fb=g,a.f.qf=c,a.f.di=j)}m.Kb=function(){return this.j.Ud()||!!this.j.jb||!!this.j.D()};
function oj(a,b){if(b){u(ec(a.pc),function(a){return z(a,"selected")});a.Jd=b;y(a.Jd,"selected");var c=Ra(ec(a.pc),function(a){return a==b});(new De(a.lb,[a.lb.scrollLeft,a.lb.scrollTop],[320*c,a.lb.scrollTop],200)).play();a.resize()}}
m.pd=function(a){Y("/_comment",a.Gh,"POST","media_id="+this.f.id+"&text="+a.text+"&tweet="+a.oh+"&facebook="+a.Pd+(a.da?"&parent_id="+a.da:"")+(a.wf?"&to_user_id="+a.wf:""));a.Pd&&!a.da&&(FB.api("/me/feed","POST",{message:a.text,name:this.f.name,link:this.f.link,picture:this.f.ib,caption:"on XYLO",description:this.f.description},aa()),of(this.j.ab,l));gg.a().qb(this.f.id,a.Pd,a.oh)};
m.Pc=function(a,b){this.ve[a.id]=a;var c=Oi(a.text),c=c.replace(/#(\S+)/g,function(a,b){return'<a target="_blank" href="http://twitter.com/search?q=%23'+b+'">'+a+"</a>"}),c=c.replace(/@(\S+)/g,function(a,b){return'<a target="_blank" href="http://twitter.com/'+b+'">'+a+"</a>"}),c=H(li,{Ab:a,text:c,timestamp:ed(a.time.getTime()),prefix:"infotweet"}),d=G("div","dot");fd(dd.a(),a.time,E("timestamp",c));b?(cc(this.lb,c,0),cc(this.pc,d,0),10<ec(this.lb).length&&(dc(this.lb.lastChild),dc(this.pc.lastChild),
oj(this,d))):(this.lb.appendChild(c),this.pc.appendChild(d));this.resize();O(hc(this.lb),j)};
m.fc=function(a,b){this.Ya.push(a);this.jc[a.id]=a;O(this.Ac,l);var c=H(mi,{prefix:"infocomment",qb:a,text:Oi(a.text),timestamp:ed(a.time.getTime()),nj:a.i.id==X.a().o.id});fd(dd.a(),a.time,E("timestamp",c));if(a.da){var d=this.Li[a.da];d.parentNode&&d.parentNode.insertBefore(c,d.nextSibling)}else this.z.appendChild(c);this.Li[a.da||a.id]=c;this.resize(this.j.Ud()?25:0,j);u(a.tj,function(a){this.fc(a,b)},this);b&&this.f.wb[a.i.id]&&this.j.uj(a.da||a.id,a.i)};
function pj(a,b,c){if(c&&a.Bd[b.id])z(a.Bd[b.id],"online");else if(b.id!=X.a().o.id){if(!a.Bd[b.id]){var d=H(ki,{i:b});a.Bd[b.id]=d;cc(a.Bb,d,1);P(P(P(a.k(),d,"click",function(){Z.a().c(Gg,b)}),d,"mouseover",function(){var a=Pd(d),c=Pd(this.Bb),h=D("hovercard");jc(h,b.Hb()+(A(d,"online")?" is watching":" saw this"));var n=Q(h);h.style.right=320-c.x-a.x-n.width/2-12+"px";h.style.top=c.y+a.y+210+"px";O(h,j)}),d,"mouseout",function(){O(D("hovercard"),l)})}O(a.Bb,j);jc(E("status",a.Bb),"WATCHING"+(a.vi?
" + SEEN":""));y(a.Bd[b.id],"online")}}m.wm=function(a){var a=a.target,b=qc(a,k,"tweet");b&&(b=this.ve[b.id.split("-")[1]],A(a,"reply")&&Z.a().c("reply-tweet",b))};m.Qf=function(a){var a=a.target,b=qc(a,k,"comment");if(b){var b=b.id.split("-")[1],c=this.jc[b];A(a,"reply")?Z.a().c("reply-comment",c.da?this.jc[c.da]:c,c.i):A(a,"remove")&&this.f.c(Vf,b)}};m.Rg=function(a){var b=D("infocomment-"+a),c=b.nextSibling;dc(b);for(Ua(this.Ya,function(b){return b.id==a});c&&A(c,"reply");)c=c.nextSibling,dc(c)};
m.Ug=function(){B(this.z.parentElement,"top-grad",!!this.z.scrollTop);var a=this.z.style.maxHeight,b=F().height,a=a.substring(0,a.length-2),c=Q(this.z).height;B(this.z.parentElement,"bottom-grad",this.z.scrollTop<this.z.scrollHeight-a-5&&c>=a&&640<b)};
m.resize=function(a,b){this.Ec=a!=i?a:this.Ec;var c=F().height;Wd(this.jk,c-283);640<c&&this.z&&this.z.parentElement?(Id(this.z,"max-height",c-Pd(this.z.parentElement).y-313-this.Ec+"px"),this.Ug()):640>c&&(Id(this.z,"max-height",""),this.Ug());b&&L(q(function(){(new De(this.z,[this.z.scrollLeft,this.z.scrollTop],[this.z.scrollLeft,this.z.scrollHeight],400)).play()},this),0)};
m.sl=function(){O(D("overlay"),j);FB.ui({method:"feed",name:this.f.name,link:this.f.link,P:this.f.ib,caption:"on XYLO",description:this.f.description},function(){O(D("overlay"),l)});qj(gg.a(),this.f.id,j,l)};m.Jl=function(){var a=window.open("https://twitter.com/share?url="+this.f.link+"&text=I'm watching "+this.f.name+" "+this.f.link,"Tweet","height=320,width=550");a.moveTo(screen.width/2-225,screen.height/2-150);a.focus();qj(gg.a(),this.f.id,l,j)};m.xl=function(){var a=ag(this.q);W.a().c(Gf,a)};
m.Al=function(){Jf().c(jg,this.q,Xe(this.he))};function rj(a,b,c,d,f,g){R.call(this);this.va=zf();this.Ui=a||k;this.Ad=b||k;this.Pb={};this.hh=c||k;this.Yc=d||k;this.Sh=g||k;this.el=f||k;this.Xf=this.va?new Mi:k;this.md=this.Ai=0}t(rj,R);
rj.prototype.F=function(a){rj.d.F.call(this,a);a.innerHTML="";a.scrollTop=0;y(this.b(),"ios-scroll");(this.Yc||this.hh)&&sj(this);!this.Yc&&this.Sh&&Y(this.Sh,q(function(a){a=mg(a.target);a.description&&this.ae?(E("description",this.ae).innerHTML=Oi(a.description),this.Ai=Q(this.ae).height,this.resize()):a.description&&sj(this)},this));this.Q=G("div","loading",G("div","loading-spinner"));this.b().appendChild(this.Q);O(this.Q,l);A(this.b(),"starred")&&(this.od=G("div","no-comments","Favorities will appear here."),
this.b().appendChild(this.od));this.zc=G("div","medias");this.b().appendChild(this.zc);P(this.k(),window,"resize",za(L,q(this.resize,this)));this.Ad?(O(this.Q,j),Y(this.Ad,q(function(a){O(this.Q,l);a=Kg(Lg(a.target));a=Oa(a,function(a){return new Tf(a)});u(a,this.Df,this);this.md=Q(this.zc).height;this.resize()},this))):this.Ui&&(u(this.Ui,this.Df,this),this.md=Q(this.zc).height,this.resize())};
rj.prototype.Df=function(a){this.od&&O(this.od,l);var b=H(Di,{media:a}),c=E("list-play",b),d=E("list-plus",b);this.zc.appendChild(b);if(this.va){var f=this.Xf,g=new Li(b,i);Ni(f,g)}P(P(P(this.k(),b,"click",q(function(){Z.a().c(Fg,a)},this)),c,"click",q(function(b){b.preventDefault();b.stopPropagation();b=ag(a);W.a().c(Gf,b)},this)),d,"click",function(b){b.preventDefault();b.stopPropagation();Jf().c(jg,a,j)});this.Pb[a.id]=b};
rj.prototype.resize=function(){Wd(this.b(),F().height-40-(qc(this.b(),k,"tabbed")?30:0))};function sj(a){a.ae=H(ri,{ib:a.hh,description:a.Yc?Oi(a.Yc):"",link:a.el});a.b().appendChild(a.ae);a.Ai=Q(a.ae).height;a.resize()}rj.prototype.wg=function(a,b){Y("/admin/_addprogram",q(function(b){b=Kg(Lg(b.target));b=new $f(b);a.c(ig,b)},this),"POST","channel="+a.id+"&media="+b.id)};function tj(a){R.call(this);this.th=this.q=a;this.hb=["activity","starred"]}t(tj,R);tj.prototype.F=function(a){tj.d.F.call(this,a);y(a,"profile");y(a,"ios-scroll");vc(a,Bi)};
tj.prototype.w=function(){this.Ha=E("tabs",this.b());Y("/_star/"+this.th.id,q(function(a){var a=mg(a.target),a=Oa(a,function(a){return new Tf(a)}),b=X.a().o;b.Hj=a;b.c("set-starred");this.pe=new rj(a);this.pe.g(E("starred-content",this.b()))},this));Y("/_activity/"+this.th.id,q(function(a){a=mg(a.target).activities;this.dh=new uj(a,this.th.id);this.dh.g(E("activity-content",this.b()))},this));P(this.k(),this.Ha,"click",q(function(a){a=qc(a.target,"li");this.Rb(a)},this));Yf.a().subscribe("star",function(a,
b){if(b)this.pe.Df(a);else{var c=this.pe,d=c.Pb[a.id];d&&(Cc(d),Pb(c.Pb,a.id))}},this)};tj.prototype.Rb=function(a){u(this.hb,function(b){B(this.Ha.parentElement,b,A(a,b));this.I=A(a,b)?b:this.I},this)};function uj(a,b){R.call(this);this.$j=a;this.xe=b||k;this.X=0;this.sc=l;this.ei={};this.Fe={};this.ld={};this.xc={};this.sh={};this.sj={};this.zh=[]}t(uj,R);
uj.prototype.F=function(a){uj.d.F.call(this,a);a.innerHTML="";a.scrollTop=0;y(a,"stream");y(a,"ios-scroll");this.Gd=G("div","activities");this.b().appendChild(this.Gd);this.Q=G("div","spinner");this.b().appendChild(this.Q);O(this.Q,l);this.od=G("div","no-comments",this.xe?"Your activity will appear here.":"Friends' activity will appear here.");this.b().appendChild(this.od);vj(this,this.$j);X.a().subscribe("new-activity",function(a){(this.xe==a.user.id||!this.xe&&a.user.id!=X.a().o.id)&&wj(this,a,
i,i,j)},this);P(P(this.k(),this.b(),"scroll",q(function(){!this.sc&&this.b().scrollTop+F().height>this.b().scrollHeight-60&&xj(this)},this)),window,"resize",za(L,q(this.resize,this)));this.resize()};function xj(a){O(a.Q,j);Y("/_activity"+(a.xe?"/"+a.xe:"")+"?offset="+a.X,q(function(a){this.ei[String(a.target.Zd)]||(this.ei[String(a.target.Zd)]=j,a=mg(a.target).activities,this.sc=!a.length,B(this.Q,"finished",this.sc),O(this.Q,this.sc),vj(this,a))},a))}
function vj(a,b){a.Fe=[];a.ld=[];a.xc=[];u(b,function(a){this.X++;switch(a.type){case "session":var a=a.session,b=Rb(this.Fe,a.channel_id,[]);b.push(a);this.Fe[a.channel_id]=b;break;case "liked":this.ld[a.media.id]||(b=Rb(this.xc,a.media.id,[]),b.push(a),this.xc[a.media.id]=b,b=Rb(this.sh,a.user.id,[]),b.push(a),this.sh[a.user.id]=b);break;case "comment":a=a.comment,b=Rb(this.ld,a.media.id,[]),b.push(a),this.ld[a.media.id]=b,this.xc[a.media.id]&&Pb(this.xc,a.media.id)}},a);Lb(a.Fe,function(a){wj(this,
i,a,"session")},a);Lb(a.ld,function(a){wj(this,i,a,"comment")},a);Lb(a.xc,function(a){1<a.length&&wj(this,i,a,"liked")},a);Lb(a.sh,function(a){wj(this,i,a,"liked")},a)}
function wj(a,b,c,d,f){O(a.od,l);var b=b||k,c=c||k,g=b?b.type:d,h=[],n=b?[Ng(X.a(),b.user)]:[],r=b?pd(b.time+"Z"):k;c&&u(c,function(a){Qa(n,function(b){return b.id==a.user.id})||n.push(Ng(X.a(),a.user));var b=pd((a.time||a.tune_in)+"Z");r=r&&r.getTime()>b.getTime()?r:b;"session"==g?u(a.media,function(a){!this.ld[a.id]&&(!this.xc[a.id]&&!Qa(h,function(b){return b.id==a.id}))&&h.push(a)},this):"liked"==g&&!this.sj[a.media.id]&&(h.push(a.media),this.sj[a.media.id]=j)},a);switch(g){case "session":if(2>
n.length)return;var d=b?b.session:c[0],v=T.a().get(d.channel_id),h=b?b.session.media:h;5<h.length&&(h=h.slice(0,5));b=H(oi,{J:n,V:v,time:ed(r.getTime()),Qj:!!d.tune_out});break;case "comment":var h=b?[b.comment.media]:[Zf(Yf.a(),c[0].media)],w=b?[new hj(b.comment)]:[];c&&u(c,function(a){w.push(new hj(a))});b=H(pi,{Fb:w.reverse().slice(0,3),J:n,media:h[0]});break;case "liked":h=b?[b.media]:h;b=H(qi,{J:n,Wi:h.length,time:ed(r.getTime())});break;default:return}if(h.length){fd(dd.a(),r,E("timestamp",
b));d=Ra(a.zh,function(a){return a.time<r.getTime()});Za(a.zh,d,0,{time:r,element:b});var C=E("medias",b);u(h,function(a){var b=Zf(Yf.a(),a),a=H(Di,{media:b}),c=E("list-play",a),d=E("list-plus",a);E("thumb",a);C.appendChild(a);P(P(P(this.k(),a,"click",function(){Z.a().c(Fg,b)}),c,"click",function(a){a.preventDefault();a.stopPropagation();a=ag(b);W.a().c(Gf,a)}),d,"click",function(a){a.preventDefault();a.stopPropagation();Jf().c(jg,b,j)})},a);f?cc(a.Gd,b,0):c?cc(a.Gd,b,d):a.Gd.appendChild(b);L(za(y,
b,"show"))}}uj.prototype.resize=function(){var a=F().height-40-(qc(this.b(),k,"tabbed")?40:10);Wd(this.b(),a);Q(this.Gd).height<a&&xj(this)};function yj(){R.call(this);this.va=zf();this.ck=new ej;this.hb={};this.Zb=[];this.sd=[];this.Fd=0}t(yj,R);m=yj.prototype;
m.w=function(){yj.d.w.call(this);this.Hd=E("arrow",this.Lc);this.Tf=D("sidebar-content");this.Ti=D("media-list");this.Lg=D("profile");this.Ph=D("conversation");this.Lc=D("toolbar");this.Ha=E("tabs",this.b());this.Cf=E("activities-count",this.b());var a=new $e(document);u(ec(this.Ha),function(a){var b=Gb(a)[0];this.hb[b]=a;this.Zb.push(b)},this);this.zg();Y("/_activity",q(function(a){a=mg(a.target);this.dh=new uj(a.activities);this.dh.g(D("stream"));Z.a().c("new-activites",parseInt(a.new_count,10))},
this));this.pe=new tj(X.a().o);this.pe.g(D("my-profile"));this.ca?(this.M=D("info"),this.I="info",zj(this,"info","info")):(this.M=D("stream"),this.I="stream",zj(this,"info","stream"));var b="left";u(this.Zb,function(a){var c=E(a,this.Tf);a==this.I?b="right":y(c,b)},this);this.sd=[this.M,""];y(this.M,"current");if(this.va){this.ck.g(D("admin"));var c=H(si,{name:"ADMIN",className:"admin"});this.Ha.appendChild(c);this.hb.admin=c;this.Zb.push("admin")}Aj(this);P(P(P(P(this.k(),E("back-button",this.Lc),
"click",q(function(a){var b=this.sd.shift();this.navigate(b[0],j,b[1]);Aj(this);a.stopPropagation()},this)),this.Ha,"click",q(function(a){var b=this.I,c=qc(a.target,"li"),h=Gb(c)[0];zj(this,this.I,h);y(c,"selected");Aj(this);b!=this.I&&a.stopPropagation();"stream"==h&&this.dj(0,j)},this)),this.Lc,"click",q(function(a){((a=qc(a.target,"li"))&&Gb(a)[0]==this.I||!a)&&(new De(this.M,[this.M.scrollLeft,this.M.scrollTop],[this.M.scrollLeft,0],300)).play()},this)),a,"key",q(function(a){a.ctrlKey&&"68"==
a.keyCode&&Hb(this.b(),"dark")},this));DESKTOP&&N.a().subscribe(hd,function(a){B(this.b(),"toggled",a);L(q(function(){B(this.b(),"collapsed",!a)},this),!a?500:0)},this);Z.a().subscribe("navigate",this.navigate,this);Z.a().subscribe("new-activites",this.dj,this);Z.a().subscribe("conversation",this.dm,this);Z.a().subscribe("media-list",this.gm,this);Z.a().subscribe(Fg,this.Gj,this);Z.a().subscribe(Gg,this.hm,this);T.a().subscribe(Ff,this.zg,this);W.a().subscribe(Gf,this.zg,this);T.a().subscribe(Cf,
this.pl,this);DESKTOP&&N.a().subscribe("toggle-admin",function(a){B(this.b(),"admin",a);a?(N.a().c(hd,j),zj(this,this.I,"admin")):"admin"==this.I&&zj(this,"admin","info")},this)};m.dj=function(a,b){b&&(this.Fd=0,O(this.Cf,l));this.Fd+=a;jc(this.Cf,this.Fd.toString());O(this.Cf,!!this.Fd)};m.zg=function(a){if(a=a||T.a().m.h())if(this.lc=a.media,!this.ca||this.lc.id!=this.ca.q.id){var a=this.ca&&this.ca.j.D()?this.ca.j.D():k,b=this.ca?this.ca.f:k;Cc(this.ca);this.ca=new mj(this.lc,l,b,a);this.ca.g(D("info"))}};
m.pl=function(a){a=a||T.a().m;if((this.lc=a.h()&&a.h().media)&&(!this.ca||this.lc.id!=this.ca.q.id))Cc(this.ca),this.ca=new mj(this.lc),this.ca.g(D("info")),this.Gj(this.lc)};
function zj(a,b,c){var d=E(c,a.Tf),f=Ma(a.Zb,b),b=Ma(a.Zb,c),g=(f=f<b)?0:a.Zb.length-1,h=f?g<a.Zb.length:0<=g;for(g;h;g+=f?1:-1){var n=E(a.Zb[g],a.Tf);if(f&&g>b||!f&&g<b)y(n,"right"),z(n,"left");else if(f&&g<b||!f&&g>b)B(n,"left",f),y(n,"right");else if(g==b){z(n,"right");z(n,"left");break}}a.I=c;Za(a.sd,0,0,[a.M,""]);z(a.M,"current");a.M=d;y(a.M,"current");Aj(a)}
m.navigate=function(a,b,c){if(a!=this.M){var d=A(this.M,"screen");b?(z(this.M,"on"),z(this.M,"current"),y(a,"current"),this.M=a):(B(this.M,"on",!d),b=[this.M,nc(E("back-title",this.Lc))],Za(this.sd,0,0,b),z(this.M,"current"),this.M=a,y(this.M,"current"));B(this.Lc,"back",A(this.M,"slide"))}c&&jc(E("back-title",this.Lc),c)};m.dm=function(a,b,c,d){(new kj(a,b,c,d)).g(this.Ph);Z.a().c("navigate",this.Ph,l,a.name)};
m.gm=function(a,b,c,d,f,g,h){(new rj(b,c,d,f,g,h)).g(this.Ti);Z.a().c("navigate",this.Ti,l,a,d,f)};m.Gj=function(a,b,c,d){if(this.ca&&a.id==this.ca.q.id){z(this.Lc,"back");for(a=this.sd[0][0];a&&A(a,"slide");)a=this.sd.shift();zj(this,this.I,"info")}else{var f=D("media-info");(new mj(a,b,c,d)).g(f);Z.a().c("navigate",f,l,a.name)}DESKTOP&&N.a().c(hd,j)};
m.hm=function(a){if(!this.Mg||!(this.Mg.q.id==a.id&&this.M==this.Lg))this.Mg=new tj(a),this.Mg.g(this.Lg),Z.a().c("navigate",this.Lg,l,a.name),DESKTOP&&N.a().c(hd,j)};function Aj(a){var b=Math.round(Q(a.hb[a.I]).width/2+Pd(a.hb[a.I]).x);a.Hd.style.transform="translate3d("+b+"px, 0,0)";a.Hd.style.msTransform="translate3d("+b+"px, 0,0)";a.Hd.style.WebkitTransform="translate3d("+b+"px, 0,0)";a.Hd.style.MozTransform="translate3d("+b+"px, 0,0)";a.Hd.style.Hm="translate3d("+b+"px, 0,0)"};function Bj(a){return'<div class="queue-media"><div class="pic"><img src="'+I(a.media.na.P)+'"></div><div class="title">'+I(a.media.name)+'</div><div class="play"></div><div class="remove"></div></div>'};function Cj(){R.call(this);this.Pb={};this.Qb=0;this.ka=new xf("Queue");pf(this.ka,16,j)}t(Cj,R);
Cj.prototype.F=function(a){Cj.d.F.call(this,a);this.ka.g(E("queue-toggle",this.b()));this.fl=E("queue-list",this.b());this.zc=E("medias",this.b());P(P(P(this.k(),this.ka.b(),"click",q(function(){B(this.b(),"show",Xe(this.ka))},this)),this.fl,"click",q(function(a){a.preventDefault();a.stopPropagation()},this)),window,"click",q(function(a){Xe(this.ka)&&(qc(a.target,k,"queue")||L(q(function(){z(this.b(),"show");of(this.ka,l)},this)))},this));Jf().subscribe(jg,this.nb,this);Jf();var b=q(function(a){u(a,
function(a){this.nb(a,j)},this)},this);Y("/_queue",function(a){a=mg(a.target);this.Qg=Oa(a,function(a){return Zf(Yf.a(),a)},this);b&&b(this.Qg)})};
Cj.prototype.nb=function(a,b){if(b){f=H(Bj,{media:a});this.Pb[a.id]=f;this.Qb+=1;var c=E("play",f),d=E("remove",f);this.zc.appendChild(f);P(P(P(this.k(),f,"click",q(function(b){b.preventDefault();b.stopPropagation();Z.a().c(Fg,a)},this)),c,"click",q(function(b){b.preventDefault();b.stopPropagation();z(this.b(),"show");of(this.ka,l);b=ag(a);W.a().c(Gf,b);Jf().c(jg,a,l)},this)),d,"click",q(function(b){b.preventDefault();b.stopPropagation();Jf().c(jg,a,l)},this))}else if(Rb(this.Pb,a.id)){var f=this.Pb[a.id];
dc(f);this.Qb-=1}B(this.zc,"no-medias",!this.Qb);jc(this.ka.b().firstChild,0<this.Qb?this.Qb.toString():"")};function Dj(a){return'<div class="main"><div id="stage" class="stage"><div id="ytplayer"></div><div id="stagecover"><div class="message"><span></span><div class="spinner" style="display:none"></div><div class="restart" style="display:none">TRY AGAIN</div></div><div class="fullscreen"></div><div class="expand"></div><div class="play" style="display: none"><div></div></div><div class="pause" style="display: none"><div></div></div></div><div id="vote" class="vote" style="display:none"><div class="like"></div><div class="dislike"></div></div><div id="logo"></div><div id="notify" class="notify"></div><div id="search" class="search"><div class="search-box"><div id="search-icon" class="search-icon"></div><input type="text" id="search-input" class="search-input" /><div id="clear-icon" class="clear-icon" style="display:none"></div></div><div class="search-results no-medias" id="search-results"><div class="label">SEARCH</div><div class="no-medias">NO RESULTS</div><div class="no-overflow"><div class="results"><div class="subtitle subtitle-channels">CHANNELS</div><div class="result-channels"></div><div class="subtitle subtitle-medias">VIDEOS</div><div class="result-medias"></div></div></div></div></div><div id="queue" class="queue"><div class="queue-toggle"><span></span></div><div class="queue-list"><div class="label">QUEUE</div><div class="medias-container"><div class="medias no-medias"><div class="no-medias">CLICK <span class="plus"></span> TO ADD VIDEOS</div></div></div></div></div></div><div id="guide" class="guide'+
(a.ii?" toggled":" collapsed")+(a.sidebar?" sidebar-toggled":"")+'"><div id="channels" class="channels"></div><div class="header" id="header"><div class="times"><div id="now-left" class="left browse">&#9664;<span> NOW</span></div><div id="now-right" class="right browse"><span>NOW </span>&#x25B6;</div></div></div><div id="my-ticker" class="my-ticker" style="display:none"><div class="me" style="background:'+I(a.i.color)+";border-color:"+I(a.i.color)+';"><img src="'+I(a.i.P)+'"/></div></div><div id="ticker" class="ticker"><div id="go-live" class="go-live">GO LIVE</div></div><div class="pan-handle" id="pan-handle"></div><div id="right-grad"></div></div><div id="controller" class="controller'+
(a.ii?" guide-toggled":" collapsed")+(a.sidebar?" sidebar-toggled":"")+'"><div class="background"></div><div class="left"><div id="guide-toggle" class="guide-toggle dark button">GUIDE</div><div class="controls"><div class="restart dark button"><div class="icon"></div></div><div class="play dark button"><div class="icon"></div></div><div class="volume dark button"><div class="icon"></div></div></div><div class="border"></div></div><div class="right"><div id="info-toggle" class="info-toggle dark button"><div class="icon"></div></div><div id="admin-toggle" class="admin-toggle dark button" style="display: none"><div class="icon"></div><div id="toggle-pending" class="pending" style="display:none"></div></div><div id="sidebar-toggle" class="sidebar-toggle dark button"><div class="icon"></div></div><div class="border"></div></div><div class="progress" style="display: none"><div class="elapsed animate"><div class="seek"></div></div><div class="title"></div><div class="current-time"></div><div class="duration"></div></div></div><div id="sidebar" class="'+
(a.sidebar?"toggled":"collapsed")+'"><div id="toolbar"><div class="back"><div class="back-button"><div>BACK</div></div><div class="back-title"></div></div><ul class="tabs"><li class="info tab selected"><div class="label">NOW</div></li><li class="stream tab"><div class="label">STREAM<div class="activities-count" style="display:none"></div></div></li><li class="profile tab"><div class="label">ME</div></li></ul><div class="radial-grad"></div><div class="arrow"></div></div><div id="sidebar-content"><div id="info" class="screen info"><div class="no-info">Pick a channel or play a story.</div></div><div id="stream" class="screen stream"><div class="loading loading-activity"><div class="loading-spinner"></div></div></div><div id="my-profile" class="screen profile"></div><div id="admin" class="screen admin"></div><div id="media-list" class="slide media-list"></div><div id="conversation" class="slide"></div>'+
(a.Ef?'<div id="admin-col-list" class="slide admin"></div><div id="admin-list" class="slide admin-list"></div>':"")+'<div id="media-info" class="slide info"></div><div id="profile" class="slide profile"></div></div></div><div id="hovercard" class="watch-with" style="display: none"></div><div id="welcome" class="welcome" style="display:none"><div class="thanks"></div><div class="guide"></div><div class="friends"></div><div class="sidebar"></div><div class="close"></div></div></div>'};function gg(){}la(gg);_gaq=[];gg.prototype.init=function(){_gaq.push(["_setAccount","UA-38058655-1"]);_gaq.push(["_trackPageview"]);var a=document.createElement("script");a.type="text/javascript";a.async=j;a.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)};gg.prototype.login=function(){_gaq.push(["_trackEvent","Users","Login",X.a().o.id])};
function ng(a,b){_gaq.push(["_trackEvent","Media","Play",b.id]);_gaq.push(["_trackEvent","Users","Play",X.a().o.id])}gg.prototype.hc=function(a,b){a.C||(_gaq.push(["_trackEvent","Channel","OptOut",b.id]),_gaq.push(["_trackEvent","Channel","OptIn",a.id]))};
gg.prototype.qb=function(a,b,c){_gaq.push(["_trackEvent","Media","Comment",a.id]);_gaq.push(["_trackEvent","Users","Comment",X.a().o.id]);b&&_gaq.push(["_trackEvent","Facebook","Comment",X.a().o.id]);c&&_gaq.push(["_trackEvent","Twitter","Comment",X.a().o.id])};
function qj(a,b,c,d){_gaq.push(["_trackEvent","Media","Share",b.id]);_gaq.push(["_trackEvent","Users","Share",X.a().o.id]);c&&_gaq.push(["_trackEvent","Facebook","Share",X.a().o.id]);d&&_gaq.push(["_trackEvent","Twitter","Share",X.a().o.id]);Y("/_share",te(),"POST","facebook="+c+"&twitter="+d)}ga("_gaq",_gaq);function Ej(){M.call(this);this.Qi=l}t(Ej,M);la(Ej);Ej.prototype.init=function(a){this.jb=a;a=(new appengine.Channel(unescape(a))).open();a.onmessage=q(this.wl,this);a.onclose=q(this.ej,this);window.onbeforeunload=q(this.ej,this);return this};
Ej.prototype.wl=function(a){var b=Kg(a.data);switch(b.type){case "viewer_change":var c=Ng(X.a(),b.user),d=b.time&&pd(b.time+"Z");c.Le&&d&&c.Le.end(d);if(a=b.last_channel_id&&T.a().get(b.last_channel_id))a.c("remove-viewer",c),c.Kd&&c.Kd.c(Wf,c,a,j);var f=b.channel_id&&T.a().get(b.channel_id),a=b.media&&Zf(Yf.a(),b.media);f&&(d=d||new qd,d=new fg(b.session_id,c,f,d),c.Le=d,f.c(kg,d),a=(d=f.h())?d.media:a);a&&a.c(Wf,c,f);break;case "new_comment":c=new hj(b.comment);if(c.i.id!=X.a().o.id&&(d=b.tweet?
new ij(b.tweet):k,a=Zf(Yf.a(),b.comment.media)))a.c(Uf,c),d&&a.c("add-tweet",d);break;case "new_activity":X.a().c("new-activity",b.activity);b.activity.user.id!=X.a().o.id&&Z.a().c("new-activites",1);break;case "update_programs":a=b.programs;f=T.a().get(b.channel_id);u(a,function(a){f.c(lg,a)},this);break;case "new_programs":b.channel&&(f=T.a().Ae(b.channel));u(b.programs,q(function(a){a=new $f(a);if(f=f||T.a().get(b.channel_id))if(f.c(ig,a),!T.a().m||!T.a().m.h())T.a().c(Cf,f),T.a().c(Ff,a)},this));
break;case "twitter_auth":X.a().o.c(cg)}};Ej.prototype.ej=function(){if(!this.Qi){var a=T.a().m.C&&T.a().m.Kd&&Math.floor(W.a().getCurrentTime());DESKTOP&&Y("/_settings",te(),"POST","show_guide="+N.a().vc+"&show_sidebar="+N.a().Hc+(a?"&current_seek="+a:""));this.Qi=j}};function Fj(){M.call(this);this.Bn=[]}t(Fj,M);la(Fj);Fj.prototype.rg=function(a){Lb(a,q(function(a,c){u(a,q(function(a){a=new $f(a);T.a().Sc[c]&&T.a().Sc[c].Db(a)},this))},this))};var Gj=l;function Hj(a){a.match(/[\d]+/g).length=3}
if(navigator.plugins&&navigator.plugins.length){var Ij=navigator.plugins["Shockwave Flash"];Ij&&(Gj=j,Ij.description&&Hj(Ij.description));navigator.plugins["Shockwave Flash 2.0"]&&(Gj=j)}else if(navigator.mimeTypes&&navigator.mimeTypes.length){var Jj=navigator.mimeTypes["application/x-shockwave-flash"];(Gj=Jj&&Jj.enabledPlugin)&&Hj(Jj.enabledPlugin.description)}else try{var Kj=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7"),Gj=j;Hj(Kj.GetVariable("$version"))}catch(Lj){try{Kj=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6"),
Gj=j}catch(Mj){try{Kj=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),Gj=j,Hj(Kj.GetVariable("$version"))}catch(Nj){}}};function Oj(a,b,c,d,f,g,h,n){this.Ad=a;this.fk=b;this.Yc=c;this.bc=d;this.wn=f;this.pn=g;this.Ia=h;this.Ba=n;this.qm=[];this.Lf=[];this.bn=[];this.Fn=[]}Oj.prototype.gi=ca("fk");Oj.prototype.Ej=function(a){this.bc=a;return this};Oj.prototype.Zg=function(a){this.v=a;return this};function Pj(a){this.Ad=a;this.km=k}function Qj(a){this.Ad=a;this.km=this.Kn=k};function Rj(a,b,c){Oj.call(this,"http://www.youtube.com/watch?v="+encodeURIComponent(String(a)),b,c,"application/x-shockwave-flash");this.vh=a;this.qm=[new Pj("http://i.ytimg.com/vi/"+a+"/default.jpg")];this.Zg(new Qj("http://www.youtube.com/v/"+encodeURIComponent(String(a))+"&hl=en&fs=1&autoplay=1"))}t(Rj,Oj);
var Sj=RegExp("http://(?:[a-zA-Z]{2,3}\\.)?(?:youtube\\.com/watch)(?:\\?(?:[\\w=-]+&(?:amp;)?)*v=([\\w-]+)(?:&(?:amp;)?[\\w=-]+)*)?(?:#[!]?(?:(?:(?:[\\w=-]+&(?:amp;)?)*(?:v=([\\w-]+))(?:&(?:amp;)?[\\w=-]+)*)|(?:[\\w=&-]+)))?[^\\w-]?","i");function Jg(a){var b=Sj.exec(a);if(b)return new Rj(b[1]||b[2],i,i);e(Error("failed to parse video id from youtube url: "+a))};function Tj(){R.call(this);this.kk=new Ch;this.Bk=new yf;this.jm=new yj;this.v=new Nh;this.nl=new Jh;this.Qg=new Cj;this.$l=new Fi}var Uj,Vj,Wj,Xj,Yj,Zj,$j,ak;t(Tj,R);Tj.prototype.F=function(a){Tj.d.F.call(this,a);var b=H(Dj,{i:X.a().o,Ef:zf(),ii:X.a().o.fm&&!T.a().m.C,sidebar:X.a().o.im});cc(a,b,0)};
Tj.prototype.w=function(){Tj.d.w.call(this);this.kk.g(D("controller"));this.Bk.g(D("guide"));this.jm.g(D("sidebar"));this.v.g(D("stage"));this.nl.g(D("notify"));this.Qg.g(D("queue"));this.$l.g(D("search"));this.An=new gi;if(!X.a().o.ym){X.a();var a=D("welcome");O(a,j);P(this.k(),a,"click",function(){O(a,l);Y("/_welcomed",te(),"POST")})}P(this.k(),document.body,"touchmove",function(a){qc(a.target,"div","ios-scroll")||a.preventDefault()});P(this.k(),window,"click",function(a){var c=qc(a.target,"a");
if(c=c?c.href:k)if((c=c.match("#(.*):(.*)"))&&c.length)switch(a.preventDefault(),a.stopPropagation(),c[1]){case "user":a=X.a().get(c[2]);Z.a().c(Gg,a);break;case "channel":a=T.a().get(c[2]);T.a().c(Cf,a);break;case "info":a=Yf.a().get(c[2]),Z.a().c(Fg,a)}});window.onbeforeunload=da("Leaving so soon?");Y("/_presence",q(function(a){a=mg(a.target);this.Ym=Ej.a().init(a.token);var c=T.a();u(a.viewer_sessions,q(function(a){var b=Ng(X.a(),a.user),c=X.a();Qa(c.Cg,function(a){return a.id==b.id})||c.Cg.push(b);
var c=this.Sc[a.channel_id],h=pd(a.tune_in+"Z"),n=a.tune_out?pd(a.tune_out+"Z"):k,a=new fg(a.id,b,c,h,n);b.Le=a;c&&(c.Nc.push(a),c.c(kg,a),(a=c.h())&&a.media.c(Wf,b,c))},c))},this));N.a().subscribe("toggle-info",function(){var a=D("login"),c=D("static-content"),d=D("pages");z(a,"hide");y(a,"show");c.style.height=Q(d).height+80+"px";bk(j)},this)};
function bk(a){var b=D("login"),c=D("static-content"),d=D("pages"),f=A(b,"app");B(b,"expanded",a);D("uvTab")&&B(D("uvTab"),"show",f&&a);a?(f?c.style.bottom=-Q(d).height-80+"px":c.style.top=Math.max(10,F().height-280)+"px",a=f?Math.min(F().height-100,c.scrollHeight+80):Math.min(F().height-435,c.scrollHeight+190),!f||f&&!b.scrollTop?(f=new De(b,[b.scrollLeft,b.scrollTop],[b.scrollLeft,a],300),y(b,"scrolling"),f.play(),K(f,"end",function(){z(b,"scrolling")})):b.scrollTop=a):(c.style.top="",c.style.height=
"",f?L(function(){z(b,"show")},200):c.className="")}
function ck(){var a=D("fb-login"),b=D("static-content"),c=D("login");y(a,"disabled");y(a,"spin");Y("/_session",function(a){if(200==Bh(a.target)){var f=mg(a.target);if(f.error)jc(D("error"),f.error),dk("error","Yikes...");else if(f.message)jc(D("message"),f.message);else{z(document.body,"login");L(function(){L(function(){y(c,"hide");L(function(){O(D("homepage"),l);y(c,"app");y(b,"faq")},600)},600)});var a=f.channels,g=f.programs,f=f.current_user;if(!Ob(f)){var h=X.a();h.o=Ng(h,f)}T.a().rg(a);Fj.a().rg(g);
a=T.a();a.m=a.Sc[f.current_channel]||a.Tc[0];a.m=Lf(a)||a.m;a.m&&a.ph(a.m.h());dd.a().init();(new Tj).g(document.body);gg.a().login();a=document.createElement("script");a.type="text/javascript";a.async=j;a.src=("https:"==document.location.protocol?"https://":"http://")+"widget.uservoice.com/WGHjF5nSR8jL1GxXyQNxWA.js";g=document.getElementsByTagName("script")[0];g.parentNode.insertBefore(a,g)}}else 500==Bh(a.target)?dk("error","Opps, check back later"):dk("wait"),L(function(){y(Yj,"strike");Uj.play()},
500),L(function(){z(Yj,"strike");y(Zj,"strike");Vj.play()},800),L(function(){z(Zj,"strike");y($j,"strike");Wj.play()},1100),L(function(){z($j,"strike");y(ak,"strike");Xj.play()},1400),L(function(){z(ak,"strike");y($j,"strike");Wj.load();Wj.play()},1700),L(function(){z($j,"strike");y(Zj,"strike");Vj.load();Vj.play()},2E3),L(function(){z(Zj,"strike");y(Yj,"strike");Uj.load();Uj.play()},2300),L(function(){z(Yj,"strike")},2600)},"POST")}
function dk(a,b){var c=D("fb-login");if(a){var d=E("power",c);y(d,a)}b&&(d=E("waitlist",c),jc(d,b));z(c,"spin");y(c,"disabled");O(c,j);y(c,"show");y(c,"waitlist")}function Dh(a){var b=parseInt(a,10),a=Math.floor(b/3600),c=Math.floor((b-3600*a)/60),b=b-3600*a-60*c;10>c&&(c=(a?"0":"")+c);10>b&&(b="0"+b);return(a?a+":":"")+(c?c+":":"")+b}
ga("brkn.Main.staticInit",function(){var a=D("fb-login"),b=D("homepage"),c=D("login"),d=D("static-content"),f=D("pages"),g=D("footer"),h=l;y(b,"hide");var n=G("img");n.src="/static/img/homepage.jpg";K(n,"load",function(){z(b,"hide");y(b,"show")});L(function(){O(a,j);L(za(y,a,"show"),400)},100);K(c,"click",function(a){"static-scrollable"==a.target.id&&(a=A(c,"app"),h=l,a?bk(h):(a=new De(c,[c.scrollLeft,c.scrollTop],[c.scrollLeft,0],300),a.play(),K(a,"end",za(bk,h))))});K(c,"scroll",function(){!A(c,
"scrolling")&&1>c.scrollTop&&(h=l,bk(h))});K(g,"click",function(a){var a=qc(a.target,k,"section"),b=A(c,"app");a&&(h=j,d.className=a.id,d.style.height=Q(f).height+(b?80:220)+"px",bk(h))});K(window,"resize",za(bk,h));gg.a().init();IPHONE&&(y(document.body,"iphone"),y(document.body,"login"),window.onload=function(){L(function(){window.scrollTo(0,1)},1E3)});Yj=D("chord-1");Zj=D("chord-2");$j=D("chord-3");ak=D("chord-4");Uj=D("mp3-1");Vj=D("mp3-2");Wj=D("mp3-3");Xj=D("mp3-4");Uj.volume=0.5;Vj.volume=
0.5;Wj.volume=0.5;Xj.volume=0.5;Uj.load();Vj.load();Wj.load();Xj.load();K(Yj,"click",function(){Uj.load();Uj.play()});K(Zj,"click",function(){Vj.load();Vj.play()});K($j,"click",function(){Wj.load();Wj.play()});K(ak,"click",function(){Xj.load();Xj.play()})});ga("brkn.Main.auth",function(){FB.getLoginStatus(function(a){if("connected"===a.status)ck();else{var b=D("fb-login");K(b,"click",function(){y(b,"disabled");FB.login(function(a){a.authResponse?ck():z(b,"disabled")},{scope:"email"})})}})});