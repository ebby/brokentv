function f(a){throw a;}var h=void 0,i=!0,k=null,l=!1;function aa(){return function(){}}function ba(a){return function(b){this[a]=b}}function ca(a){return function(){return this[a]}}function ea(a){return function(){return a}}var m,fa=fa||{},n=this;function ga(a){for(var a=a.split("."),b=n,c;c=a.shift();)if(b[c]!=k)b=b[c];else return k;return b}function ha(){}function ia(a){a.a=function(){return a.nk?a.nk:a.nk=new a}}
function ja(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function ka(a){return a!==h}function la(a){return"array"==ja(a)}function ma(a){var b=ja(a);return"array"==b||"object"==b&&"number"==typeof a.length}function na(a){return"string"==typeof a}function oa(a){return"number"==typeof a}function pa(a){return"function"==ja(a)}function ra(a){var b=typeof a;return"object"==b&&a!=k||"function"==b}function sa(a){return a[ta]||(a[ta]=++ua)}
var ta="closure_uid_"+Math.floor(2147483648*Math.random()).toString(36),ua=0;function wa(a,b,c){return a.call.apply(a.bind,arguments)}function xa(a,b,c){a||f(Error());if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}
function q(a,b,c){q=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?wa:xa;return q.apply(k,arguments)}function za(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=Array.prototype.slice.call(arguments);b.unshift.apply(b,c);return a.apply(this,b)}}var s=Date.now||function(){return+new Date};function Aa(a,b){var c=b||{},d;for(d in c)var e=(""+c[d]).replace(/\$/g,"$$$$"),a=a.replace(RegExp("\\{\\$"+d+"\\}","gi"),e);return a}
function Ba(a,b){var c=a.split("."),d=n;!(c[0]in d)&&d.execScript&&d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&ka(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}function t(a,b){function c(){}c.prototype=b.prototype;a.f=b.prototype;a.prototype=new c;a.prototype.constructor=a};function Ca(a){Error.captureStackTrace?Error.captureStackTrace(this,Ca):this.stack=Error().stack||"";a&&(this.message=String(a))}t(Ca,Error);Ca.prototype.name="CustomError";function Da(a,b){for(var c=1;c<arguments.length;c++)var d=String(arguments[c]).replace(/\$/g,"$$$$"),a=a.replace(/\%s/,d);return a}function Ea(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")}function Fa(a,b){var c=String(a).toLowerCase(),d=String(b).toLowerCase();return c<d?-1:c==d?0:1}
function Ga(a){if(!Ha.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(Ia,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(Ja,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(Ka,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(La,"&quot;"));return a}var Ia=/&/g,Ja=/</g,Ka=/>/g,La=/\"/g,Ha=/[&<>\"]/;function Ma(a){var a=ka(h)?a.toFixed(h):String(a),b=a.indexOf(".");-1==b&&(b=a.length);b=Math.max(0,2-b);return Array(b+1).join("0")+a}
function Na(a){return String(a).replace(/\-([a-z])/g,function(a,c){return c.toUpperCase()})};var Oa=Array.prototype,Pa=Oa.indexOf?function(a,b,c){return Oa.indexOf.call(a,b,c)}:function(a,b,c){c=c==k?0:0>c?Math.max(0,a.length+c):c;if(na(a))return!na(b)||1!=b.length?-1:a.indexOf(b,c);for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},u=Oa.forEach?function(a,b,c){Oa.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=na(a)?a.split(""):a,g=0;g<d;g++)g in e&&b.call(c,e[g],g,a)};function Qa(a,b,c){for(var d=na(a)?a.split(""):a,e=a.length-1;0<=e;--e)e in d&&b.call(c,d[e],e,a)}
var Ra=Oa.filter?function(a,b,c){return Oa.filter.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=[],g=0,j=na(a)?a.split(""):a,p=0;p<d;p++)if(p in j){var r=j[p];b.call(c,r,p,a)&&(e[g++]=r)}return e},Sa=Oa.map?function(a,b,c){return Oa.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),g=na(a)?a.split(""):a,j=0;j<d;j++)j in g&&(e[j]=b.call(c,g[j],j,a));return e},Ta=Oa.some?function(a,b,c){return Oa.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=na(a)?a.split(""):a,g=0;g<d;g++)if(g in
e&&b.call(c,e[g],g,a))return i;return l},Ua=Oa.every?function(a,b,c){return Oa.every.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=na(a)?a.split(""):a,g=0;g<d;g++)if(g in e&&!b.call(c,e[g],g,a))return l;return i};function Va(a,b,c){b=Wa(a,b,c);return 0>b?k:na(a)?a.charAt(b):a[b]}function Wa(a,b,c){for(var d=a.length,e=na(a)?a.split(""):a,g=0;g<d;g++)if(g in e&&b.call(c,e[g],g,a))return g;return-1}function Xa(a,b){return 0<=Pa(a,b)}
function Ya(a,b){var c=Pa(a,b),d;(d=0<=c)&&Oa.splice.call(a,c,1);return d}function Za(a,b,c){b=Wa(a,b,c);return 0<=b?(Oa.splice.call(a,b,1),i):l}function ab(a){return Oa.concat.apply(Oa,arguments)}function bb(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]}
function cb(a,b){for(var c=1;c<arguments.length;c++){var d=arguments[c],e;if(la(d)||(e=ma(d))&&d.hasOwnProperty("callee"))a.push.apply(a,d);else if(e)for(var g=a.length,j=d.length,p=0;p<j;p++)a[g+p]=d[p];else a.push(d)}}function db(a,b,c,d){Oa.splice.apply(a,eb(arguments,1))}function eb(a,b,c){return 2>=arguments.length?Oa.slice.call(a,b):Oa.slice.call(a,b,c)}function fb(a,b){return a>b?1:a<b?-1:0};var gb,hb,jb,kb,lb;function mb(){return n.navigator?n.navigator.userAgent:k}function nb(){return n.navigator}kb=jb=hb=gb=l;var ob;if(ob=mb()){var pb=nb();gb=0==ob.indexOf("Opera");hb=!gb&&-1!=ob.indexOf("MSIE");jb=!gb&&-1!=ob.indexOf("WebKit");kb=!gb&&!jb&&"Gecko"==pb.product}var qb=gb,v=hb,rb=kb,sb=jb,tb=nb();lb=-1!=(tb&&tb.platform||"").indexOf("Mac");var ub=!!nb()&&-1!=(nb().appVersion||"").indexOf("X11"),vb;
a:{var wb="",xb;if(qb&&n.opera)var yb=n.opera.version,wb="function"==typeof yb?yb():yb;else if(rb?xb=/rv\:([^\);]+)(\)|;)/:v?xb=/MSIE\s+([^\);]+)(\)|;)/:sb&&(xb=/WebKit\/(\S+)/),xb)var zb=xb.exec(mb()),wb=zb?zb[1]:"";if(v){var Ab,Bb=n.document;Ab=Bb?Bb.documentMode:h;if(Ab>parseFloat(wb)){vb=String(Ab);break a}}vb=wb}var Cb={};
function Db(a){var b;if(!(b=Cb[a])){b=0;for(var c=Ea(String(vb)).split("."),d=Ea(String(a)).split("."),e=Math.max(c.length,d.length),g=0;0==b&&g<e;g++){var j=c[g]||"",p=d[g]||"",r=RegExp("(\\d*)(\\D*)","g"),y=RegExp("(\\d*)(\\D*)","g");do{var F=r.exec(j)||["","",""],I=y.exec(p)||["","",""];if(0==F[0].length&&0==I[0].length)break;b=((0==F[1].length?0:parseInt(F[1],10))<(0==I[1].length?0:parseInt(I[1],10))?-1:(0==F[1].length?0:parseInt(F[1],10))>(0==I[1].length?0:parseInt(I[1],10))?1:0)||((0==F[2].length)<
(0==I[2].length)?-1:(0==F[2].length)>(0==I[2].length)?1:0)||(F[2]<I[2]?-1:F[2]>I[2]?1:0)}while(0==b)}b=Cb[a]=0<=b}return b}var Eb={};function Fb(a){return Eb[a]||(Eb[a]=v&&!!document.documentMode&&document.documentMode>=a)};var Gb,Hb=!v||Fb(9),Ib=!rb&&!v||v&&Fb(9)||rb&&Db("1.9.1"),Jb=v&&!Db("9"),Kb=v||qb||sb;function Mb(a){a=a.className;return na(a)&&a.match(/\S+/g)||[]}function w(a,b){for(var c=Mb(a),d=eb(arguments,1),e=c.length+d.length,g=c,j=0;j<d.length;j++)Xa(g,d[j])||g.push(d[j]);a.className=c.join(" ");return c.length==e}function x(a,b){var c=Mb(a),d=eb(arguments,1),e,g=d;e=Ra(c,function(a){return!Xa(g,a)});a.className=e.join(" ");return e.length==c.length-d.length}function z(a,b){return Xa(Mb(a),b)}function A(a,b,c){c?w(a,b):x(a,b)}function Nb(a,b){var c=!z(a,b);A(a,b,c);return c};function Ob(a,b){this.x=ka(a)?a:0;this.y=ka(b)?b:0}Ob.prototype.clone=function(){return new Ob(this.x,this.y)};function Pb(a,b){return new Ob(a.x-b.x,a.y-b.y)};function Qb(a,b){this.width=a;this.height=b}Qb.prototype.clone=function(){return new Qb(this.width,this.height)};Qb.prototype.ceil=function(){this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};Qb.prototype.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};Qb.prototype.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};function Rb(a,b,c){for(var d in a)b.call(c,a[d],d,a)}function Sb(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function Tb(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}function Ub(a){for(var b in a)return l;return i}function Vb(a,b){b in a&&delete a[b]}function Wb(a,b,c){b in a&&f(Error('The object already contains the key "'+b+'"'));a[b]=c}function Xb(a,b,c){return b in a?a[b]:c}var Yb="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");
function Zb(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var g=0;g<Yb.length;g++)c=Yb[g],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};function $b(a){return a?new ac(bc(a)):Gb||(Gb=new ac)}function B(a){return na(a)?document.getElementById(a):a}function cc(a,b){var c=b||document;return c.querySelectorAll&&c.querySelector?c.querySelectorAll("."+a):c.getElementsByClassName?c.getElementsByClassName(a):dc("*",a,b)}function C(a,b){var c=b||document,d=k;return(d=c.querySelectorAll&&c.querySelector?c.querySelector("."+a):cc(a,b)[0])||k}
function dc(a,b,c){var d=document,c=c||d,a=a&&"*"!=a?a.toUpperCase():"";if(c.querySelectorAll&&c.querySelector&&(a||b))return c.querySelectorAll(a+(b?"."+b:""));if(b&&c.getElementsByClassName){c=c.getElementsByClassName(b);if(a){for(var d={},e=0,g=0,j;j=c[g];g++)a==j.nodeName&&(d[e++]=j);d.length=e;return d}return c}c=c.getElementsByTagName(a||"*");if(b){d={};for(g=e=0;j=c[g];g++)a=j.className,"function"==typeof a.split&&Xa(a.split(/\s+/),b)&&(d[e++]=j);d.length=e;return d}return c}
function ec(a,b){Rb(b,function(b,d){"style"==d?a.style.cssText=b:"class"==d?a.className=b:"for"==d?a.htmlFor=b:d in fc?a.setAttribute(fc[d],b):0==d.lastIndexOf("aria-",0)||0==d.lastIndexOf("data-",0)?a.setAttribute(d,b):a[d]=b})}var fc={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};
function D(a){a=(a||window).document;a=gc(a)?a.documentElement:a.body;return new Qb(a.clientWidth,a.clientHeight)}function E(a,b,c){return hc(document,arguments)}
function hc(a,b){var c=b[0],d=b[1];if(!Hb&&d&&(d.name||d.type)){c=["<",c];d.name&&c.push(' name="',Ga(d.name),'"');if(d.type){c.push(' type="',Ga(d.type),'"');var e={};Zb(e,d);delete e.type;d=e}c.push(">");c=c.join("")}var g=a.createElement(c);d&&(na(d)?g.className=d:la(d)?w.apply(k,[g].concat(d)):ec(g,d));if(2<b.length){d=function(b){b&&g.appendChild(na(b)?a.createTextNode(b):b)};for(c=2;c<b.length;c++)if(e=b[c],ma(e)&&!(ra(e)&&0<e.nodeType)){var j=u,p;a:{if((p=e)&&"number"==typeof p.length){if(ra(p)){p=
"function"==typeof p.item||"string"==typeof p.item;break a}if(pa(p)){p="function"==typeof p.item;break a}}p=l}j(p?bb(e):e,d)}else d(e)}return g}function gc(a){return"CSS1Compat"==a.compatMode}function ic(a){for(var b;b=a.firstChild;)a.removeChild(b)}function jc(a,b,c){a.insertBefore(b,a.childNodes[c]||k)}function kc(a){a&&a.parentNode&&a.parentNode.removeChild(a)}function lc(a){return Ib&&a.children!=h?a.children:Ra(a.childNodes,function(a){return 1==a.nodeType})}
function mc(a){return a.nextElementSibling!=h?a.nextElementSibling:nc(a.nextSibling,i)}function nc(a,b){for(;a&&1!=a.nodeType;)a=b?a.nextSibling:a.previousSibling;return a}function oc(a){if(Kb)return a.parentElement;a=a.parentNode;return ra(a)&&1==a.nodeType?a:k}function pc(a,b){if(a.contains&&1==b.nodeType)return a==b||a.contains(b);if("undefined"!=typeof a.compareDocumentPosition)return a==b||Boolean(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a}
function bc(a){return 9==a.nodeType?a:a.ownerDocument||a.document}function G(a,b){if("textContent"in a)a.textContent=b;else if(a.firstChild&&3==a.firstChild.nodeType){for(;a.lastChild!=a.firstChild;)a.removeChild(a.lastChild);a.firstChild.data=b}else ic(a),a.appendChild(bc(a).createTextNode(b))}var qc={SCRIPT:1,STYLE:1,HEAD:1,IFRAME:1,OBJECT:1},rc={IMG:" ",BR:"\n"};function sc(a){var b=a.getAttributeNode("tabindex");return b&&b.specified?(a=a.tabIndex,oa(a)&&0<=a&&32768>a):l}
function tc(a){if(Jb&&"innerText"in a)a=a.innerText.replace(/(\r\n|\r|\n)/g,"\n");else{var b=[];uc(a,b,i);a=b.join("")}a=a.replace(/ \xAD /g," ").replace(/\xAD/g,"");a=a.replace(/\u200B/g,"");Jb||(a=a.replace(/ +/g," "));" "!=a&&(a=a.replace(/^\s*/,""));return a}function vc(a){var b=[];uc(a,b,l);return b.join("")}
function uc(a,b,c){if(!(a.nodeName in qc))if(3==a.nodeType)c?b.push(String(a.nodeValue).replace(/(\r\n|\r|\n)/g,"")):b.push(a.nodeValue);else if(a.nodeName in rc)b.push(rc[a.nodeName]);else for(a=a.firstChild;a;)uc(a,b,c),a=a.nextSibling}function wc(a,b,c){if(!b&&!c)return k;b=b?b.toUpperCase():k;a:{for(var d=0;a;){if((!b||a.nodeName==b)&&(!c||z(a,c))){c=a;break a}a=a.parentNode;d++}c=k}return c}function xc(a,b){return wc(a,k,b)}function ac(a){this.I=a||n.document||document}m=ac.prototype;m.mb=$b;
m.b=function(a){return na(a)?this.I.getElementById(a):a};m.W=function(a,b,c){return hc(this.I,arguments)};m.createElement=function(a){return this.I.createElement(a)};m.createTextNode=function(a){return this.I.createTextNode(a)};function yc(a){return gc(a.I)}function zc(a){var b=a.I,a=!sb&&gc(b)?b.documentElement:b.body,b=b.parentWindow||b.defaultView;return new Ob(b.pageXOffset||a.scrollLeft,b.pageYOffset||a.scrollTop)}m.appendChild=function(a,b){a.appendChild(b)};m.Vj=lc;
function Ac(a,b){return b.firstElementChild!=h?b.firstElementChild:nc(b.firstChild,i)}m.contains=pc;v&&Db(8);var Bc={};function Cc(a,b,c){a.innerHTML=b(c||Bc,h,h)}function H(a,b){var c;a:if(c=(new ac(h)||$b()).createElement("DIV"),c.innerHTML=a(b||Bc,h,h),1==c.childNodes.length){var d=c.firstChild;if(1==d.nodeType){c=d;break a}}return c}function J(a){return"object"===typeof a&&a&&0===a.lp?a.content:String(a).replace(Dc,Ec)}
var Fc={"\x00":"&#0;",'"':"&quot;","&":"&amp;","'":"&#39;","<":"&lt;",">":"&gt;","\t":"&#9;","\n":"&#10;","\x0B":"&#11;","\f":"&#12;","\r":"&#13;"," ":"&#32;","-":"&#45;","/":"&#47;","=":"&#61;","`":"&#96;","\u0085":"&#133;","\u00a0":"&#160;","\u2028":"&#8232;","\u2029":"&#8233;"};function Ec(a){return Fc[a]}var Dc=/[\x00\x22\x26\x27\x3c\x3e]/g;function Gc(){0!=Hc&&(this.mp=Error().stack,Ic[sa(this)]=this)}var Hc=0,Ic={};Gc.prototype.Rf=l;Gc.prototype.ja=function(){if(!this.Rf&&(this.Rf=i,this.q(),0!=Hc)){var a=sa(this);delete Ic[a]}};Gc.prototype.q=function(){this.cm&&Jc.apply(k,this.cm);if(this.Rk)for(;this.Rk.length;)this.Rk.shift()()};function Kc(a){a&&"function"==typeof a.ja&&a.ja()}function Jc(a){for(var b=0,c=arguments.length;b<c;++b){var d=arguments[b];ma(d)?Jc.apply(k,d):Kc(d)}};var Lc=!v||Fb(9),Mc=!v||Fb(9),Nc=v&&!Db("9");!sb||Db("528");rb&&Db("1.9b")||v&&Db("8")||qb&&Db("9.5")||sb&&Db("528");rb&&!Db("8")||v&&Db("9");function Oc(a,b){this.type=a;this.currentTarget=this.target=b}m=Oc.prototype;m.q=aa();m.ja=aa();m.jd=l;m.defaultPrevented=l;m.Gg=i;m.stopPropagation=function(){this.jd=i};m.preventDefault=function(){this.defaultPrevented=i;this.Gg=l};function Pc(a){a.preventDefault()};function Qc(a){Qc[" "](a);return a}Qc[" "]=ha;function Rc(a,b){a&&this.init(a,b)}t(Rc,Oc);var Sc=[1,4,2];m=Rc.prototype;m.target=k;m.relatedTarget=k;m.offsetX=0;m.offsetY=0;m.clientX=0;m.clientY=0;m.screenX=0;m.screenY=0;m.button=0;m.keyCode=0;m.charCode=0;m.ctrlKey=l;m.altKey=l;m.shiftKey=l;m.metaKey=l;m.ii=l;m.oa=k;
m.init=function(a,b){var c=this.type=a.type;Oc.call(this,c);this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;if(d){if(rb){var e;a:{try{Qc(d.nodeName);e=i;break a}catch(g){}e=l}e||(d=k)}}else"mouseover"==c?d=a.fromElement:"mouseout"==c&&(d=a.toElement);this.relatedTarget=d;this.offsetX=sb||a.offsetX!==h?a.offsetX:a.layerX;this.offsetY=sb||a.offsetY!==h?a.offsetY:a.layerY;this.clientX=a.clientX!==h?a.clientX:a.pageX;this.clientY=a.clientY!==h?a.clientY:a.pageY;this.screenX=
a.screenX||0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||("keypress"==c?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.ii=lb?a.metaKey:a.ctrlKey;this.state=a.state;this.oa=a;a.defaultPrevented&&this.preventDefault();delete this.jd};function Tc(a){return(Lc?0==a.oa.button:"click"==a.type?i:!!(a.oa.button&Sc[0]))&&!(sb&&lb&&a.ctrlKey)}
m.stopPropagation=function(){Rc.f.stopPropagation.call(this);this.oa.stopPropagation?this.oa.stopPropagation():this.oa.cancelBubble=i};m.preventDefault=function(){Rc.f.preventDefault.call(this);var a=this.oa;if(a.preventDefault)a.preventDefault();else if(a.returnValue=l,Nc)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};m.qm=ca("oa");m.q=aa();function Uc(){}var Vc=0;m=Uc.prototype;m.key=0;m.kd=l;m.fh=l;m.init=function(a,b,c,d,e,g){pa(a)?this.pk=i:a&&a.handleEvent&&pa(a.handleEvent)?this.pk=l:f(Error("Invalid listener argument"));this.Rd=a;this.proxy=b;this.src=c;this.type=d;this.capture=!!e;this.bg=g;this.fh=l;this.key=++Vc;this.kd=l};m.handleEvent=function(a){return this.pk?this.Rd.call(this.bg||this.src,a):this.Rd.handleEvent.call(this.Rd,a)};var Wc={},Xc={},Yc={},Zc={};
function K(a,b,c,d,e){if(b){if(la(b)){for(var g=0;g<b.length;g++)K(a,b[g],c,d,e);return k}var d=!!d,j=Xc;b in j||(j[b]={m:0,ab:0});j=j[b];d in j||(j[d]={m:0,ab:0},j.m++);var j=j[d],p=sa(a),r;j.ab++;if(j[p]){r=j[p];for(g=0;g<r.length;g++)if(j=r[g],j.Rd==c&&j.bg==e){if(j.kd)break;return r[g].key}}else r=j[p]=[],j.m++;var y=$c,F=Mc?function(a){return y.call(F.src,F.key,a)}:function(a){a=y.call(F.src,F.key,a);if(!a)return a},g=F;g.src=a;j=new Uc;j.init(c,g,a,b,d,e);c=j.key;g.key=c;r.push(j);Wc[c]=j;Yc[p]||
(Yc[p]=[]);Yc[p].push(j);a.addEventListener?(a==n||!a.Dj)&&a.addEventListener(b,g,d):a.attachEvent(b in Zc?Zc[b]:Zc[b]="on"+b,g);return c}f(Error("Invalid event type"))}function ad(a,b,c,d,e){if(la(b))for(var g=0;g<b.length;g++)ad(a,b[g],c,d,e);else a=K(a,b,c,d,e),Wc[a].fh=i}function bd(a,b,c,d,e){if(la(b))for(var g=0;g<b.length;g++)bd(a,b[g],c,d,e);else if(d=!!d,a=cd(a,b,d))for(g=0;g<a.length;g++)if(a[g].Rd==c&&a[g].capture==d&&a[g].bg==e){dd(a[g].key);break}}
function dd(a){if(!Wc[a])return l;var b=Wc[a];if(b.kd)return l;var c=b.src,d=b.type,e=b.proxy,g=b.capture;c.removeEventListener?(c==n||!c.Dj)&&c.removeEventListener(d,e,g):c.detachEvent&&c.detachEvent(d in Zc?Zc[d]:Zc[d]="on"+d,e);c=sa(c);Yc[c]&&(e=Yc[c],Ya(e,b),0==e.length&&delete Yc[c]);b.kd=i;if(b=Xc[d][g][c])b.Lk=i,ed(d,g,c,b);delete Wc[a];return i}
function ed(a,b,c,d){if(!d.kg&&d.Lk){for(var e=0,g=0;e<d.length;e++)d[e].kd?d[e].proxy.src=k:(e!=g&&(d[g]=d[e]),g++);d.length=g;d.Lk=l;0==g&&(delete Xc[a][b][c],Xc[a][b].m--,0==Xc[a][b].m&&(delete Xc[a][b],Xc[a].m--),0==Xc[a].m&&delete Xc[a])}}function cd(a,b,c){var d=Xc;return b in d&&(d=d[b],c in d&&(d=d[c],a=sa(a),d[a]))?d[a]:k}
function fd(a,b,c,d,e){var g=1,b=sa(b);if(a[b]){a.ab--;a=a[b];a.kg?a.kg++:a.kg=1;try{for(var j=a.length,p=0;p<j;p++){var r=a[p];r&&!r.kd&&(g&=gd(r,e)!==l)}}finally{a.kg--,ed(c,d,b,a)}}return Boolean(g)}function gd(a,b){a.fh&&dd(a.key);return a.handleEvent(b)}
function $c(a,b){if(!Wc[a])return i;var c=Wc[a],d=c.type,e=Xc;if(!(d in e))return i;var e=e[d],g,j;if(!Mc){g=b||ga("window.event");var p=i in e,r=l in e;if(p){if(0>g.keyCode||g.returnValue!=h)return i;a:{var y=l;if(0==g.keyCode)try{g.keyCode=-1;break a}catch(F){y=i}if(y||g.returnValue==h)g.returnValue=i}}y=new Rc;y.init(g,this);g=i;try{if(p){for(var I=[],da=y.currentTarget;da;da=da.parentNode)I.push(da);j=e[i];j.ab=j.m;for(var T=I.length-1;!y.jd&&0<=T&&j.ab;T--)y.currentTarget=I[T],g&=fd(j,I[T],d,
i,y);if(r){j=e[l];j.ab=j.m;for(T=0;!y.jd&&T<I.length&&j.ab;T++)y.currentTarget=I[T],g&=fd(j,I[T],d,l,y)}}else g=gd(c,y)}finally{I&&(I.length=0)}return g}d=new Rc(b,this);return g=gd(c,d)};function hd(){Gc.call(this)}t(hd,Gc);m=hd.prototype;m.Dj=i;m.wg=k;m.Ei=ba("wg");m.addEventListener=function(a,b,c,d){K(this,a,b,c,d)};m.removeEventListener=function(a,b,c,d){bd(this,a,b,c,d)};
m.dispatchEvent=function(a){var b=a.type||a,c=Xc;if(b in c){if(na(a))a=new Oc(a,this);else if(a instanceof Oc)a.target=a.target||this;else{var d=a,a=new Oc(b,this);Zb(a,d)}var d=1,e,c=c[b],b=i in c,g;if(b){e=[];for(g=this;g;g=g.wg)e.push(g);g=c[i];g.ab=g.m;for(var j=e.length-1;!a.jd&&0<=j&&g.ab;j--)a.currentTarget=e[j],d&=fd(g,e[j],a.type,i,a)&&a.Gg!=l}if(l in c)if(g=c[l],g.ab=g.m,b)for(j=0;!a.jd&&j<e.length&&g.ab;j++)a.currentTarget=e[j],d&=fd(g,e[j],a.type,l,a)&&a.Gg!=l;else for(e=this;!a.jd&&e&&
g.ab;e=e.wg)a.currentTarget=e,d&=fd(g,e,a.type,l,a)&&a.Gg!=l;a=Boolean(d)}else a=i;return a};m.q=function(){hd.f.q.call(this);var a,b=0,c=a==k;a=!!a;if(this==k)Rb(Yc,function(d){for(var e=d.length-1;0<=e;e--){var g=d[e];if(c||a==g.capture)dd(g.key),b++}});else{var d=sa(this);if(Yc[d])for(var d=Yc[d],e=d.length-1;0<=e;e--){var g=d[e];if(c||a==g.capture)dd(g.key),b++}}this.wg=k};function id(a,b){Gc.call(this);this.ga=a||1;this.vf=b||jd;this.dh=q(this.Ri,this);this.Rh=s()}t(id,hd);id.prototype.enabled=l;var jd=n.window;m=id.prototype;m.Da=k;m.Ri=function(){if(this.enabled){var a=s()-this.Rh;0<a&&a<0.8*this.ga?this.Da=this.vf.setTimeout(this.dh,this.ga-a):(this.dispatchEvent(kd),this.enabled&&(this.Da=this.vf.setTimeout(this.dh,this.ga),this.Rh=s()))}};m.start=function(){this.enabled=i;this.Da||(this.Da=this.vf.setTimeout(this.dh,this.ga),this.Rh=s())};
m.stop=function(){this.enabled=l;this.Da&&(this.vf.clearTimeout(this.Da),this.Da=k)};m.q=function(){id.f.q.call(this);this.stop();delete this.vf};var kd="tick";function L(a,b,c){pa(a)?c&&(a=q(a,c)):a&&"function"==typeof a.handleEvent?a=q(a.handleEvent,a):f(Error("Invalid listener argument"));return 2147483647<b?-1:jd.setTimeout(a,b||0)};function M(){Gc.call(this);this.tb=[];this.Jc={}}t(M,Gc);m=M.prototype;m.uk=1;m.Cg=0;m.subscribe=function(a,b,c){var d=this.Jc[a];d||(d=this.Jc[a]=[]);var e=this.uk;this.tb[e]=a;this.tb[e+1]=b;this.tb[e+2]=c;this.uk=e+3;d.push(e);return e};m.Il=function(a){if(0!=this.Cg)return this.af||(this.af=[]),this.af.push(a),l;var b=this.tb[a];if(b){var c=this.Jc[b];c&&Ya(c,a);delete this.tb[a];delete this.tb[a+1];delete this.tb[a+2]}return!!b};
m.c=function(a,b){var c=this.Jc[a];if(c){this.Cg++;for(var d=eb(arguments,1),e=0,g=c.length;e<g;e++){var j=c[e];this.tb[j+1].apply(this.tb[j+2],d)}this.Cg--;if(this.af&&0==this.Cg)for(;c=this.af.pop();)this.Il(c)}};m.clear=function(a){if(a){var b=this.Jc[a];b&&(u(b,this.Il,this),delete this.Jc[a])}else this.tb.length=0,this.Jc={}};m.q=function(){M.f.q.call(this);delete this.tb;delete this.Jc;delete this.af};function ld(){M.call(this);this.ue=new id(1E3);this.Cl=new id(3E4);this.Dl=[];this.wh=[]}t(ld,M);ia(ld);ld.prototype.init=function(){this.ue.start();this.Cl.start();K(this.ue,kd,q(function(){u(this.wh,function(a,b){a.time<s()&&(a.callback(),Oa.splice.call(this.wh,b,1))},this)},this));K(this.Cl,kd,q(function(){u(this.Dl,function(a){G(a.element,md(a.time.getTime()))},this)},this))};function nd(a,b,c){86400>(s()-b.getTime())/1E3&&a.Dl.push({time:b,element:c})}
function od(a,b,c){86400>(s()-b)/1E3&&a.wh.push({time:b,callback:c})};function N(){M.call(this);this.Mn=i;var a=B("controller");this.pf=!a||z(a,"sidebar-toggled");this.bd=a&&z(a,"guide-toggled");a=B("guide");this.ec=!!a&&z(a,"timeless");this.subscribe(pd,ba("pf"),this);this.subscribe(qd,ba("bd"),this);this.subscribe(rd,ba("Mn"),this)}t(N,M);ia(N);function sd(a,b){var c=B("toggle-pending");G(c,b);O(c,!!b)}function td(){var a=N.a();a.pf=z(B("controller"),"sidebar-toggled");return a.pf}var rd="play",qd="toggle-guide",pd="toggle-sidebar";var ud={Po:["BC","AD"],Oo:["Before Christ","Anno Domini"],Ro:"JFMAMJJASOND".split(""),Zo:"JFMAMJJASOND".split(""),Qo:"January February March April May June July August September October November December".split(" "),Yo:"January February March April May June July August September October November December".split(" "),Vo:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),ap:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),ep:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),
cp:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),Xo:"Sun Mon Tue Wed Thu Fri Sat".split(" "),bp:"Sun Mon Tue Wed Thu Fri Sat".split(" "),So:"SMTWTFS".split(""),$o:"SMTWTFS".split(""),Wo:["Q1","Q2","Q3","Q4"],Uo:["1st quarter","2nd quarter","3rd quarter","4th quarter"],Mo:["AM","PM"],No:["EEEE, MMMM d, y","MMMM d, y","MMM d, y","M/d/yy"],dp:["h:mm:ss a zzzz","h:mm:ss a z","h:mm:ss a","h:mm a"],Nl:6,fp:[5,6],Ol:5};var vd=/^(\d{4})(?:(?:-?(\d{2})(?:-?(\d{2}))?)|(?:-?(\d{3}))|(?:-?W(\d{2})(?:-?([1-7]))?))?$/,wd=/^(\d{2})(?::?(\d{2})(?::?(\d{2})(\.\d+)?)?)?$/,xd=/Z|(?:([-+])(\d{2})(?::?(\d{2}))?)$/;
function yd(a){var b=new zd(2E3),a=Ea(a),a=a.split(-1==a.indexOf("T")?" ":"T"),c;var d=a[0].match(vd);if(d){var e=Number(d[2]),g=Number(d[3]),j=Number(d[4]);c=Number(d[5]);var p=Number(d[6])||1;b.setFullYear(Number(d[1]));j?(b.setDate(1),b.setMonth(0),b.add(new Ad(Bd,j-1))):c?(b.setMonth(0),b.setDate(1),d=b.getDay()||7,b.add(new Ad(Bd,(4>=d?1-d:8-d)+(Number(p)+7*(Number(c)-1))-1))):(e&&(b.setDate(1),b.setMonth(e-1)),g&&b.setDate(g));c=i}else c=l;if(c&&!(c=2>a.length))a=a[1],c=a.match(xd),p=0,c&&("Z"!=
c[0]&&(p=60*c[2]+Number(c[3]),p*="-"==c[1]?1:-1),p-=b.getTimezoneOffset(),a=a.substr(0,a.length-c[0].length)),(c=a.match(wd))?(b.setHours(Number(c[1])),b.setMinutes(Number(c[2])||0),b.setSeconds(Number(c[3])||0),b.setMilliseconds(c[4]?1E3*c[4]:0),0!=p&&b.setTime(b.getTime()+6E4*p),c=i):c=l;return c?b:k}
function Ad(a,b,c,d,e,g){na(a)?(this.xb=a==Cd?b:0,this.ob=a==Dd?b:0,this.jb=a==Bd?b:0,this.Ua=a==Ed?b:0,this.Xa=a==Fd?b:0,this.cb=a==Gd?b:0):(this.xb=a||0,this.ob=b||0,this.jb=c||0,this.Ua=d||0,this.Xa=e||0,this.cb=g||0)}
Ad.prototype.wf=function(a){var b=Math.min(this.xb,this.ob,this.jb,this.Ua,this.Xa,this.cb),c=Math.max(this.xb,this.ob,this.jb,this.Ua,this.Xa,this.cb);if(0>b&&0<c)return k;if(!a&&0==b&&0==c)return"PT0S";c=[];0>b&&c.push("-");c.push("P");(this.xb||a)&&c.push(Math.abs(this.xb)+"Y");(this.ob||a)&&c.push(Math.abs(this.ob)+"M");(this.jb||a)&&c.push(Math.abs(this.jb)+"D");if(this.Ua||this.Xa||this.cb||a)c.push("T"),(this.Ua||a)&&c.push(Math.abs(this.Ua)+"H"),(this.Xa||a)&&c.push(Math.abs(this.Xa)+"M"),
(this.cb||a)&&c.push(Math.abs(this.cb)+"S");return c.join("")};Ad.prototype.clone=function(){return new Ad(this.xb,this.ob,this.jb,this.Ua,this.Xa,this.cb)};var Cd="y",Dd="m",Bd="d",Ed="h",Fd="n",Gd="s";Ad.prototype.add=function(a){this.xb+=a.xb;this.ob+=a.ob;this.jb+=a.jb;this.Ua+=a.Ua;this.Xa+=a.Xa;this.cb+=a.cb};
function Hd(a,b,c){oa(a)?(this.u=new Date(a,b||0,c||1),Id(this,c||1)):ra(a)?(this.u=new Date(a.getFullYear(),a.getMonth(),a.getDate()),Id(this,a.getDate())):(this.u=new Date(s()),this.u.setHours(0),this.u.setMinutes(0),this.u.setSeconds(0),this.u.setMilliseconds(0))}m=Hd.prototype;m.Wf=ud.Nl;m.Xf=ud.Ol;m.clone=function(){var a=new Hd(this.u);a.Wf=this.Wf;a.Xf=this.Xf;return a};m.getFullYear=function(){return this.u.getFullYear()};m.getYear=function(){return this.getFullYear()};m.getMonth=function(){return this.u.getMonth()};
m.getDate=function(){return this.u.getDate()};m.getTime=function(){return this.u.getTime()};m.getDay=function(){return this.u.getDay()};m.getUTCHours=function(){return this.u.getUTCHours()};m.getTimezoneOffset=function(){return this.u.getTimezoneOffset()};function Jd(a){a=a.getTimezoneOffset();if(0==a)a="Z";else var b=Math.abs(a)/60,c=Math.floor(b),b=60*(b-c),a=(0<a?"-":"+")+Ma(c)+":"+Ma(b);return a}m.set=function(a){this.u=new Date(a.getFullYear(),a.getMonth(),a.getDate())};m.setFullYear=function(a){this.u.setFullYear(a)};
m.setMonth=function(a){this.u.setMonth(a)};m.setDate=function(a){this.u.setDate(a)};m.setTime=function(a){this.u.setTime(a)};
m.add=function(a){if(a.xb||a.ob){var b=this.getMonth()+a.ob+12*a.xb,c=this.getYear()+Math.floor(b/12),b=b%12;0>b&&(b+=12);var d;a:{switch(b){case 1:d=0==c%4&&(0!=c%100||0==c%400)?29:28;break a;case 5:case 8:case 10:case 3:d=30;break a}d=31}d=Math.min(d,this.getDate());this.setDate(1);this.setFullYear(c);this.setMonth(b);this.setDate(d)}a.jb&&(a=new Date((new Date(this.getYear(),this.getMonth(),this.getDate(),12)).getTime()+864E5*a.jb),this.setDate(1),this.setFullYear(a.getFullYear()),this.setMonth(a.getMonth()),
this.setDate(a.getDate()),Id(this,a.getDate()))};m.wf=function(a,b){return[this.getFullYear(),Ma(this.getMonth()+1),Ma(this.getDate())].join(a?"-":"")+(b?Jd(this):"")};m.toString=function(){return this.wf()};function Id(a,b){a.getDate()!=b&&a.u.setUTCHours(a.u.getUTCHours()+(a.getDate()<b?1:-1))}m.valueOf=function(){return this.u.valueOf()};function zd(a,b,c,d,e,g,j){this.u=oa(a)?new Date(a,b||0,c||1,d||0,e||0,g||0,j||0):new Date(a?a.getTime():s())}t(zd,Hd);m=zd.prototype;m.getHours=function(){return this.u.getHours()};
m.getMinutes=function(){return this.u.getMinutes()};m.getSeconds=function(){return this.u.getSeconds()};m.getUTCHours=function(){return this.u.getUTCHours()};m.setHours=function(a){this.u.setHours(a)};m.setMinutes=function(a){this.u.setMinutes(a)};m.setSeconds=function(a){this.u.setSeconds(a)};m.setMilliseconds=function(a){this.u.setMilliseconds(a)};m.setUTCHours=function(a){this.u.setUTCHours(a)};
m.add=function(a){Hd.prototype.add.call(this,a);a.Ua&&this.setHours(this.u.getHours()+a.Ua);a.Xa&&this.setMinutes(this.u.getMinutes()+a.Xa);a.cb&&this.setSeconds(this.u.getSeconds()+a.cb)};m.wf=function(a,b){var c=Hd.prototype.wf.call(this,a);return a?c+" "+Ma(this.getHours())+":"+Ma(this.getMinutes())+":"+Ma(this.getSeconds())+(b?Jd(this):""):c+"T"+Ma(this.getHours())+Ma(this.getMinutes())+Ma(this.getSeconds())+(b?Jd(this):"")};m.toString=function(){return this.wf()};
m.clone=function(){var a=new zd(this.u);a.Wf=this.Wf;a.Xf=this.Xf;return a};function Kd(a){Gc.call(this);this.Y=a;this.ca=[]}t(Kd,Gc);var Ld=[];function P(a,b,c,d,e){la(c)||(Ld[0]=c,c=Ld);for(var g=0;g<c.length;g++){var j=K(b,c[g],d||a,e||l,a.Y||a);a.ca.push(j)}return a}function Md(a,b,c,d,e,g){if(la(c))for(var j=0;j<c.length;j++)Md(a,b,c[j],d,e,g);else{a:{d=d||a;g=g||a.Y||a;e=!!e;if(b=cd(b,c,e))for(c=0;c<b.length;c++)if(!b[c].kd&&b[c].Rd==d&&b[c].capture==e&&b[c].bg==g){b=b[c];break a}b=k}b&&(b=b.key,dd(b),Ya(a.ca,b))}return a}function Nd(a){u(a.ca,dd);a.ca.length=0}
Kd.prototype.q=function(){Kd.f.q.call(this);Nd(this)};Kd.prototype.handleEvent=function(){f(Error("EventHandler.handleEvent not implemented"))};function Od(a,b,c,d){this.top=a;this.right=b;this.bottom=c;this.left=d}Od.prototype.clone=function(){return new Od(this.top,this.right,this.bottom,this.left)};Od.prototype.contains=function(a){return!this||!a?l:a instanceof Od?a.left>=this.left&&a.right<=this.right&&a.top>=this.top&&a.bottom<=this.bottom:a.x>=this.left&&a.x<=this.right&&a.y>=this.top&&a.y<=this.bottom};function Pd(a,b,c,d){this.left=a;this.top=b;this.width=c;this.height=d}Pd.prototype.clone=function(){return new Pd(this.left,this.top,this.width,this.height)};Pd.prototype.contains=function(a){return a instanceof Pd?this.left<=a.left&&this.left+this.width>=a.left+a.width&&this.top<=a.top&&this.top+this.height>=a.top+a.height:a.x>=this.left&&a.x<=this.left+this.width&&a.y>=this.top&&a.y<=this.top+this.height};function Qd(a,b,c){na(b)?Rd(a,c,b):Rb(b,za(Rd,a))}function Rd(a,b,c){a.style[Na(c)]=b}function Sd(a,b){var c=bc(a);return c.defaultView&&c.defaultView.getComputedStyle&&(c=c.defaultView.getComputedStyle(a,k))?c[b]||c.getPropertyValue(b)||"":""}function Td(a,b){return a.currentStyle?a.currentStyle[b]:k}function Ud(a,b){return Sd(a,b)||Td(a,b)||a.style&&a.style[b]}function Vd(a,b,c){var d,e=rb&&(lb||ub)&&Db("1.9");b instanceof Ob?(d=b.x,b=b.y):(d=b,b=c);a.style.left=Wd(d,e);a.style.top=Wd(b,e)}
function Xd(a){return new Ob(a.offsetLeft,a.offsetTop)}function Yd(a){var b=a.getBoundingClientRect();v&&(a=a.ownerDocument,b.left-=a.documentElement.clientLeft+a.body.clientLeft,b.top-=a.documentElement.clientTop+a.body.clientTop);return b}
function Zd(a){if(v&&!Fb(8))return a.offsetParent;for(var b=bc(a),c=Ud(a,"position"),d="fixed"==c||"absolute"==c,a=a.parentNode;a&&a!=b;a=a.parentNode)if(c=Ud(a,"position"),d=d&&"static"==c&&a!=b.documentElement&&a!=b.body,!d&&(a.scrollWidth>a.clientWidth||a.scrollHeight>a.clientHeight||"fixed"==c||"absolute"==c||"relative"==c))return a;return k}
function $d(a){for(var b=new Od(0,Infinity,Infinity,0),c=$b(a),d=c.I.body,e=c.I.documentElement,g=!sb&&gc(c.I)?c.I.documentElement:c.I.body;a=Zd(a);)if((!v||0!=a.clientWidth)&&(!sb||0!=a.clientHeight||a!=d)&&a!=d&&a!=e&&"visible"!=Ud(a,"overflow")){var j=ae(a),p;p=a;if(rb&&!Db("1.9")){var r=parseFloat(Sd(p,"borderLeftWidth"));if(be(p))var y=p.offsetWidth-p.clientWidth-r-parseFloat(Sd(p,"borderRightWidth")),r=r+y;p=new Ob(r,parseFloat(Sd(p,"borderTopWidth")))}else p=new Ob(p.clientLeft,p.clientTop);
j.x+=p.x;j.y+=p.y;b.top=Math.max(b.top,j.y);b.right=Math.min(b.right,j.x+a.clientWidth);b.bottom=Math.min(b.bottom,j.y+a.clientHeight);b.left=Math.max(b.left,j.x)}d=g.scrollLeft;g=g.scrollTop;b.left=Math.max(b.left,d);b.top=Math.max(b.top,g);c=D(c.I.parentWindow||c.I.defaultView);b.right=Math.min(b.right,d+c.width);b.bottom=Math.min(b.bottom,g+c.height);return 0<=b.top&&0<=b.left&&b.bottom>b.top&&b.right>b.left?b:k}
function ae(a){var b,c=bc(a),d=Ud(a,"position"),e=rb&&c.getBoxObjectFor&&!a.getBoundingClientRect&&"absolute"==d&&(b=c.getBoxObjectFor(a))&&(0>b.screenX||0>b.screenY),g=new Ob(0,0),j;b=c?bc(c):document;j=v&&!Fb(9)&&!yc($b(b))?b.body:b.documentElement;if(a==j)return g;if(a.getBoundingClientRect)b=Yd(a),a=zc($b(c)),g.x=b.left+a.x,g.y=b.top+a.y;else if(c.getBoxObjectFor&&!e)b=c.getBoxObjectFor(a),a=c.getBoxObjectFor(j),g.x=b.screenX-a.screenX,g.y=b.screenY-a.screenY;else{b=a;do{g.x+=b.offsetLeft;g.y+=
b.offsetTop;b!=a&&(g.x+=b.clientLeft||0,g.y+=b.clientTop||0);if(sb&&"fixed"==Ud(b,"position")){g.x+=c.body.scrollLeft;g.y+=c.body.scrollTop;break}b=b.offsetParent}while(b&&b!=a);if(qb||sb&&"absolute"==d)g.y-=c.body.offsetTop;for(b=a;(b=Zd(b))&&b!=c.body&&b!=j;)if(g.x-=b.scrollLeft,!qb||"TR"!=b.tagName)g.y-=b.scrollTop}return g}function ce(a,b){var c,d=ae(a);b instanceof Ob&&(c=b.y,b=b.x);Vd(a,a.offsetLeft+(b-d.x),a.offsetTop+(c-d.y))}
function Wd(a,b){"number"==typeof a&&(a=(b?Math.round(a):a)+"px");return a}function de(a,b){a.style.height=Wd(b,i)}function ee(a,b){a.style.width=Wd(b,i)}function Q(a){if("none"!=Ud(a,"display"))return fe(a);var b=a.style,c=b.display,d=b.visibility,e=b.position;b.visibility="hidden";b.position="absolute";b.display="inline";a=fe(a);b.display=c;b.position=e;b.visibility=d;return a}
function fe(a){var b=a.offsetWidth,c=a.offsetHeight,d=sb&&!b&&!c;return(!ka(b)||d)&&a.getBoundingClientRect?(a=Yd(a),new Qb(a.right-a.left,a.bottom-a.top)):new Qb(b,c)}function ge(a){var b=ae(a),a=Q(a);return new Pd(b.x,b.y,a.width,a.height)}function he(a,b){var c=a.style;"opacity"in c?c.opacity=b:"MozOpacity"in c?c.MozOpacity=b:"filter"in c&&(c.filter=""===b?"":"alpha(opacity="+100*b+")")}function O(a,b){a.style.display=b?"":"none"}function be(a){return"rtl"==Ud(a,"direction")}
var ie=rb?"MozUserSelect":sb?"WebkitUserSelect":k;function je(a,b){if(/^\d+px?$/.test(b))return parseInt(b,10);var c=a.style.left,d=a.runtimeStyle.left;a.runtimeStyle.left=a.currentStyle.left;a.style.left=b;var e=a.style.pixelLeft;a.style.left=c;a.runtimeStyle.left=d;return e}
function ke(a,b){if(v){var c=je(a,Td(a,b+"Left")),d=je(a,Td(a,b+"Right")),e=je(a,Td(a,b+"Top")),g=je(a,Td(a,b+"Bottom"));return new Od(e,d,g,c)}c=Sd(a,b+"Left");d=Sd(a,b+"Right");e=Sd(a,b+"Top");g=Sd(a,b+"Bottom");return new Od(parseFloat(e),parseFloat(d),parseFloat(g),parseFloat(c))}var le={thin:2,medium:4,thick:6};function me(a,b){if("none"==Td(a,b+"Style"))return 0;var c=Td(a,b+"Width");return c in le?le[c]:je(a,c)}
function ne(a){if(v){var b=me(a,"borderLeft"),c=me(a,"borderRight"),d=me(a,"borderTop"),a=me(a,"borderBottom");return new Od(d,c,a,b)}b=Sd(a,"borderLeftWidth");c=Sd(a,"borderRightWidth");d=Sd(a,"borderTopWidth");a=Sd(a,"borderBottomWidth");return new Od(parseFloat(d),parseFloat(c),parseFloat(a),parseFloat(b))}var oe=/matrix\([0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, ([0-9\.\-]+)p?x?, ([0-9\.\-]+)p?x?\)/;function pe(a,b,c){Gc.call(this);this.target=a;this.handle=b||a;this.zk=c||new Pd(NaN,NaN,NaN,NaN);this.I=bc(a);this.C=new Kd(this);K(this.handle,["touchstart","mousedown"],this.pd,l,this)}t(pe,hd);var qe=v||rb&&Db("1.9.3");m=pe.prototype;m.clientX=0;m.clientY=0;m.screenX=0;m.screenY=0;m.xl=0;m.yl=0;m.Bd=0;m.Cd=0;m.uh=i;m.na=l;m.Gh=0;m.en=0;m.Qm=l;m.Bf=l;m.h=ca("C");m.Ci=function(a){this.Gh=Math.pow(a,2)};m.rl=ba("Hg");m.da=ba("uh");
m.q=function(){pe.f.q.call(this);bd(this.handle,["touchstart","mousedown"],this.pd,l,this);Nd(this.C);qe&&this.I.releaseCapture();this.C=this.handle=this.target=k};function re(a){ka(a.sb)||(a.sb=be(a.target));return a.sb}
m.pd=function(a){var b="mousedown"==a.type;if(this.uh&&!this.na&&(!b||Tc(a))){se(a);if(0==this.Gh)if(this.dispatchEvent(new te("start",this,a.clientX,a.clientY,a)))this.na=i,a.preventDefault();else return;else a.preventDefault();var b=this.I,c=b.documentElement,d=!qe;P(this.C,b,["touchmove","mousemove"],this.Jm,d);P(this.C,b,["touchend","mouseup"],this.Zc,d);qe?(c.setCapture(l),P(this.C,c,"losecapture",this.Zc)):P(this.C,b?b.parentWindow||b.defaultView:window,"blur",this.Zc);v&&this.Qm&&P(this.C,
b,"dragstart",Pc);this.Hg&&P(this.C,this.Hg,"scroll",this.Xk,d);this.clientX=this.xl=a.clientX;this.clientY=this.yl=a.clientY;this.screenX=a.screenX;this.screenY=a.screenY;this.Bf?(a=this.target,b=a.offsetLeft,c=a.offsetParent,!c&&"fixed"==Ud(a,"position")&&(c=bc(a).documentElement),c?(rb?(d=ne(c),b+=d.left):Fb(8)&&(d=ne(c),b-=d.left),a=be(c)?c.clientWidth-(b+a.offsetWidth):b):a=b):a=this.target.offsetLeft;this.Bd=a;this.Cd=this.target.offsetTop;this.gi=zc($b(this.I));this.en=s()}else this.dispatchEvent("earlycancel")};
m.Zc=function(a,b){Nd(this.C);qe&&this.I.releaseCapture();if(this.na){se(a);this.na=l;var c=ue(this,this.Bd),d=ve(this,this.Cd);this.dispatchEvent(new te("end",this,a.clientX,a.clientY,a,c,d,b||"touchcancel"==a.type))}else this.dispatchEvent("earlycancel");("touchend"==a.type||"touchcancel"==a.type)&&a.preventDefault()};
function se(a){var b=a.type;"touchstart"==b||"touchmove"==b?a.init(a.oa.targetTouches[0],a.currentTarget):("touchend"==b||"touchcancel"==b)&&a.init(a.oa.changedTouches[0],a.currentTarget)}
m.Jm=function(a){if(this.uh){se(a);var b=(this.Bf&&re(this)?-1:1)*(a.clientX-this.clientX),c=a.clientY-this.clientY;this.clientX=a.clientX;this.clientY=a.clientY;this.screenX=a.screenX;this.screenY=a.screenY;if(!this.na){var d=this.xl-this.clientX,e=this.yl-this.clientY;if(d*d+e*e>this.Gh)if(this.dispatchEvent(new te("start",this,a.clientX,a.clientY,a)))this.na=i;else{this.Rf||this.Zc(a);return}}c=we(this,b,c);b=c.x;c=c.y;this.na&&this.dispatchEvent(new te("beforedrag",this,a.clientX,a.clientY,a,
b,c))&&(xe(this,a,b,c),a.preventDefault())}};function we(a,b,c){var d=zc($b(a.I)),b=b+(d.x-a.gi.x),c=c+(d.y-a.gi.y);a.gi=d;a.Bd+=b;a.Cd+=c;b=ue(a,a.Bd);a=ve(a,a.Cd);return new Ob(b,a)}m.Xk=function(a){var b=we(this,0,0);a.clientX=this.clientX;a.clientY=this.clientY;xe(this,a,b.x,b.y)};function xe(a,b,c,d){a.Be(c,d);a.dispatchEvent(new te("drag",a,b.clientX,b.clientY,b,c,d))}
function ue(a,b){var c=a.zk,d=!isNaN(c.left)?c.left:k,c=!isNaN(c.width)?c.width:0;return Math.min(d!=k?d+c:Infinity,Math.max(d!=k?d:-Infinity,b))}function ve(a,b){var c=a.zk,d=!isNaN(c.top)?c.top:k,c=!isNaN(c.height)?c.height:0;return Math.min(d!=k?d+c:Infinity,Math.max(d!=k?d:-Infinity,b))}m.Be=function(a,b){this.Bf&&re(this)?this.target.style.right=a+"px":this.target.style.left=a+"px";this.target.style.top=b+"px"};
function te(a,b,c,d,e,g,j,p){Oc.call(this,a);this.clientX=c;this.clientY=d;this.Jf=e;this.left=ka(g)?g:b.Bd;this.top=ka(j)?j:b.Cd;this.fm=b;this.dm=!!p}t(te,Oc);function ye(){Gc.call(this);this.o=ze;this.Fe=this.startTime=k}t(ye,hd);var ze=0;ye.prototype.xc=function(){this.Ha("begin")};ye.prototype.yc=function(){this.Ha("end")};ye.prototype.Ha=function(a){this.dispatchEvent(a)};function Ae(a,b,c){Gc.call(this);this.rc=a;this.ga=b||0;this.Y=c;this.gh=q(this.Ce,this)}t(Ae,Gc);m=Ae.prototype;m.ya=0;m.q=function(){Ae.f.q.call(this);this.stop();delete this.rc;delete this.Y};m.start=function(a){this.stop();this.ya=L(this.gh,ka(a)?a:this.ga)};m.stop=function(){this.oc()&&jd.clearTimeout(this.ya);this.ya=0};m.Vf=function(){this.stop();this.Ce()};m.oc=function(){return 0!=this.ya};m.Ce=function(){this.ya=0;this.rc&&this.rc.call(this.Y)};var Be;Be=ea(k);var Ce={},De=k;function Ee(a){a=sa(a);delete Ce[a];Ub(Ce)&&De&&De.stop()}function Fe(){De||(De=new Ae(function(){var a=s();Rb(Ce,function(c){Ge(c,a)});Ub(Ce)||Fe()},20));var a=De;a.oc()||a.start()};function He(a,b,c,d){ye.call(this);(!la(a)||!la(b))&&f(Error("Start and end parameters must be arrays"));a.length!=b.length&&f(Error("Start and end points must be the same length"));this.qf=a;this.im=b;this.duration=c;this.ej=d;this.coords=[];this.Bf=l}t(He,ye);m=He.prototype;m.Rj=0;m.Za=0;m.Ph=k;
m.play=function(a){if(a||this.o==ze)this.Za=0,this.coords=this.qf;else if(1==this.o)return l;Ee(this);this.startTime=a=s();-1==this.o&&(this.startTime-=this.duration*this.Za);this.Fe=this.startTime+this.duration;this.Ph=this.startTime;this.Za||this.xc();this.Ha("play");-1==this.o&&this.Ha("resume");this.o=1;var b=sa(this);b in Ce||(Ce[b]=this);Fe();Ge(this,a);return i};m.stop=function(a){Ee(this);this.o=ze;a&&(this.Za=1);Ie(this,this.Za);this.Ha("stop");this.yc()};m.Zf=ca("Za");
m.q=function(){this.o==ze||this.stop(l);this.Ha("destroy");He.f.q.call(this)};function Ge(a,b){a.Za=(b-a.startTime)/(a.Fe-a.startTime);1<=a.Za&&(a.Za=1);a.Rj=1E3/(b-a.Ph);a.Ph=b;Ie(a,a.Za);1==a.Za?(a.o=ze,Ee(a),a.Ha("finish"),a.yc()):1==a.o&&a.$h()}function Ie(a,b){pa(a.ej)&&(b=a.ej(b));a.coords=Array(a.qf.length);for(var c=0;c<a.qf.length;c++)a.coords[c]=(a.im[c]-a.qf[c])*b+a.qf[c]}m.$h=function(){this.Ha("animate")};m.Ha=function(a){this.dispatchEvent(new Je(a,this))};
function Je(a,b){Oc.call(this,a);this.coords=b.coords;this.x=b.coords[0];this.y=b.coords[1];this.fq=b.coords[2];this.duration=b.duration;this.Za=b.Zf();this.Ap=b.Rj;this.state=b.o;this.hp=b}t(Je,Oc);function Ke(a,b,c,d,e){He.call(this,b,c,d,e);this.element=a}t(Ke,He);m=Ke.prototype;m.zf=ha;m.rk=function(){ka(this.sb)||(this.sb=be(this.element));return this.sb};m.$h=function(){this.zf();Ke.f.$h.call(this)};m.yc=function(){this.zf();Ke.f.yc.call(this)};m.xc=function(){this.zf();Ke.f.xc.call(this)};function Le(a,b,c,d,e){(2!=b.length||2!=c.length)&&f(Error("Start and end points must be 2D"));Ke.apply(this,arguments)}t(Le,Ke);
Le.prototype.zf=function(){if(this.Bf){var a=this.element,b=Math.round(this.coords[0]),b=Math.max(b,0);a.scrollLeft=be(a)?rb?-b:!v||!Db("8")?a.scrollWidth-b-a.clientWidth:b:b}else this.element.scrollLeft=Math.round(this.coords[0]);this.element.scrollTop=Math.round(this.coords[1])};function Me(a,b,c,d,e){oa(b)&&(b=[b]);oa(c)&&(c=[c]);Ke.call(this,a,b,c,d,e);(1!=b.length||1!=c.length)&&f(Error("Start and end points must be 1D"))}t(Me,Ke);Me.prototype.zf=function(){he(this.element,this.coords[0])};
Me.prototype.show=function(){this.element.style.display=""};Me.prototype.hide=function(){this.element.style.display="none"};function Ne(a,b,c){Me.call(this,a,1,0,b,c)}t(Ne,Me);Ne.prototype.xc=function(){this.show();Ne.f.xc.call(this)};Ne.prototype.yc=function(){this.hide();Ne.f.yc.call(this)};function Oe(a,b,c){Me.call(this,a,0,1,b,c)}t(Oe,Me);Oe.prototype.xc=function(){this.show();Oe.f.xc.call(this)};function Pe(){}ia(Pe);Pe.prototype.mn=0;Pe.a();function R(a){Gc.call(this);this.Xc=a||$b();this.sb=Qe}t(R,hd);R.prototype.Pm=Pe.a();var Qe=k;function Re(a,b){switch(a){case 1:return b?"disable":"enable";case 2:return b?"highlight":"unhighlight";case 4:return b?"activate":"deactivate";case 8:return b?"select":"unselect";case 16:return b?"check":"uncheck";case 32:return b?"focus":"blur";case 64:return b?"open":"close"}f(Error("Invalid component state"))}m=R.prototype;m.ya=k;m.ia=l;m.g=k;m.sb=k;m.p=k;m.P=k;m.ka=k;m.Fa=k;m.Ml=l;
function Se(a){return a.ya||(a.ya=":"+(a.Pm.mn++).toString(36))}m.b=ca("g");m.h=function(){return this.Md||(this.Md=new Kd(this))};m.Jg=function(a){this==a&&f(Error("Unable to set parent component"));a&&(this.P&&this.ya&&this.P.Fa&&this.ya&&Xb(this.P.Fa,this.ya)&&this.P!=a)&&f(Error("Unable to set parent component"));this.P=a;R.f.Ei.call(this,a)};m.getParent=ca("P");m.Ei=function(a){this.P&&this.P!=a&&f(Error("Method not supported"));R.f.Ei.call(this,a)};m.mb=ca("Xc");m.W=function(){this.g=this.Xc.createElement("div")};
function Te(a,b){a.ia&&f(Error("Component already rendered"));a.g||a.W();b?b.insertBefore(a.g,k):a.Xc.I.body.appendChild(a.g);(!a.P||a.P.ia)&&a.B()}m.i=function(a){this.ia&&f(Error("Component already rendered"));if(a&&this.Rc(a)){this.Ml=i;if(!this.Xc||this.Xc.I!=bc(a))this.Xc=$b(a);this.v(a);this.B()}else f(Error("Invalid element to decorate"))};m.Rc=ea(i);m.v=ba("g");m.B=function(){this.ia=i;Ue(this,function(a){!a.ia&&a.b()&&a.B()})};
m.$c=function(){Ue(this,function(a){a.ia&&a.$c()});this.Md&&Nd(this.Md);this.ia=l};m.q=function(){R.f.q.call(this);this.ia&&this.$c();this.Md&&(this.Md.ja(),delete this.Md);Ue(this,function(a){a.ja()});!this.Ml&&this.g&&kc(this.g);this.P=this.p=this.g=this.Fa=this.ka=k};
function Ve(a,b){var c=a.ka?a.ka.length:0;b.ia&&!a.ia&&f(Error("Component already rendered"));(0>c||c>(a.ka?a.ka.length:0))&&f(Error("Child component index out of bounds"));if(!a.Fa||!a.ka)a.Fa={},a.ka=[];if(b.getParent()==a){var d=Se(b);a.Fa[d]=b;Ya(a.ka,b)}else Wb(a.Fa,Se(b),b);b.Jg(a);db(a.ka,c,0,b);b.ia&&a.ia&&b.getParent()==a?(d=a.Ta(),d.insertBefore(b.b(),d.childNodes[c]||k)):a.ia&&(!b.ia&&b.g&&b.g.parentNode)&&b.B()}m.Ta=ca("g");
m.rk=function(){this.sb==k&&(this.sb=be(this.ia?this.g:this.Xc.I.body));return this.sb};m.nd=function(a){this.ia&&f(Error("Component already rendered"));this.sb=a};function Ue(a,b){a.ka&&u(a.ka,b,h)}m.removeChild=function(a,b){if(a){var c=na(a)?a:Se(a),a=this.Fa&&c?Xb(this.Fa,c)||k:k;c&&a&&(Vb(this.Fa,c),Ya(this.ka,a),b&&(a.$c(),a.g&&kc(a.g)),a.Jg(k))}a||f(Error("Child is not in parent component"));return a};function We(a,b,c,d,e){if(!v&&(!sb||!Db("525")))return i;if(lb&&e)return Xe(a);if(e&&!d||!c&&(17==b||18==b)||v&&d&&b==a)return l;switch(a){case 13:return!(v&&Fb(9));case 27:return!sb}return Xe(a)}function Xe(a){if(48<=a&&57>=a||96<=a&&106>=a||65<=a&&90>=a||sb&&0==a)return i;switch(a){case 32:case 63:case 107:case 109:case 110:case 111:case 186:case 59:case 189:case 187:case 61:case 188:case 190:case 191:case 192:case 222:case 219:case 220:case 221:return i;default:return l}}
function Ye(a){switch(a){case 61:return 187;case 59:return 186;case 224:return 91;case 0:return 224;default:return a}};function Ze(){}var $e;ia(Ze);m=Ze.prototype;m.Kd=aa();m.W=function(a){var b=a.mb().W("div",af(this,a).join(" "),a.Cb);bf(this,a,b);return b};m.Ta=function(a){return a};m.Ee=function(a,b,c){if(a=a.b?a.b():a)if(v&&!Db("7")){var d=cf(Mb(a),b);d.push(b);za(c?w:x,a).apply(k,d)}else A(a,b,c)};m.Rc=ea(i);
m.i=function(a,b){if(b.id){var c=b.id;a.P&&a.P.Fa&&(Vb(a.P.Fa,a.ya),Wb(a.P.Fa,c,a));a.ya=c}(c=this.Ta(b))&&c.firstChild?(c=c.firstChild.nextSibling?bb(c.childNodes):c.firstChild,a.Cb=c):a.Cb=k;var d=0,e=this.xa(),g=this.xa(),j=l,p=l,c=l,r=Mb(b);u(r,function(a){if(!j&&a==e)j=i,g==e&&(p=i);else if(!p&&a==g)p=i;else{var b=d;if(!this.zl){this.Nf||df(this);var c=this.Nf,r={},y;for(y in c)r[c[y]]=y;this.zl=r}a=parseInt(this.zl[a],10);d=b|(isNaN(a)?0:a)}},this);a.o=d;j||(r.push(e),g==e&&(p=i));p||r.push(g);
var y=a.kb;y&&r.push.apply(r,y);if(v&&!Db("7")){var F=cf(r);0<F.length&&(r.push.apply(r,F),c=i)}if(!j||!p||y||c)b.className=r.join(" ");bf(this,a,b);return b};m.lk=function(a){a.rk()&&this.nd(a.b(),i);a.isEnabled()&&this.fe(a,a.Fb())};function bf(a,b,c){b.isEnabled()||a.ub(c,1,i);b.o&8&&a.ub(c,8,i);b.ua&16&&a.ub(c,16,ef(b));b.ua&64&&a.ub(c,64,!!(b.o&64))}
m.de=function(a,b){var c=!b,d=v||qb?a.getElementsByTagName("*"):k;if(ie){if(c=c?"none":"",a.style[ie]=c,d)for(var e=0,g;g=d[e];e++)g.style[ie]=c}else if(v||qb)if(c=c?"on":"",a.setAttribute("unselectable",c),d)for(e=0;g=d[e];e++)g.setAttribute("unselectable",c)};m.nd=function(a,b){this.Ee(a,this.xa()+"-rtl",b)};m.Nh=function(a){var b;return a.ua&32&&(b=a.lc())?sc(b):l};
m.fe=function(a,b){var c;if(a.ua&32&&(c=a.lc())){if(!b&&a.fg()){try{c.blur()}catch(d){}a.fg()&&a.Xj()}sc(c)!=b&&(b?c.tabIndex=0:(c.tabIndex=-1,c.removeAttribute("tabIndex")))}};m.Ca=function(a,b){O(a,b)};m.Ba=function(a,b,c){var d=a.b();if(d){var e=ff(this,b);e&&this.Ee(a,e,c);this.ub(d,b,c)}};m.ub=function(a,b,c){$e||($e={1:"disabled",8:"selected",16:"checked",64:"expanded"});(b=$e[b])&&a.setAttribute("aria-"+b,c)};
m.md=function(a,b){var c=this.Ta(a);if(c&&(ic(c),b))if(na(b))G(c,b);else{var d=function(a){if(a){var b=bc(c);c.appendChild(na(a)?b.createTextNode(a):a)}};la(b)?u(b,d):ma(b)&&!("nodeType"in b)?u(bb(b),d):d(b)}};m.lc=function(a){return a.b()};m.xa=ea("goog-control");function af(a,b){var c=a.xa(),d=[c],e=a.xa();e!=c&&d.push(e);c=b.o;for(e=[];c;){var g=c&-c;e.push(ff(a,g));c&=~g}d.push.apply(d,e);(c=b.kb)&&d.push.apply(d,c);v&&!Db("7")&&d.push.apply(d,cf(d));return d}
function cf(a,b){var c=[];b&&(a=a.concat([b]));u([],function(d){Ua(d,za(Xa,a))&&(!b||Xa(d,b))&&c.push(d.join("_"))});return c}function ff(a,b){a.Nf||df(a);return a.Nf[b]}function df(a){var b=a.xa();a.Nf={1:b+"-disabled",2:b+"-hover",4:b+"-active",8:b+"-selected",16:b+"-checked",32:b+"-focused",64:b+"-open"}};function gf(){}t(gf,Ze);ia(gf);m=gf.prototype;m.Kd=ea("button");m.ub=function(a,b,c){16==b?a.setAttribute("aria-pressed",c):gf.f.ub.call(this,a,b,c)};m.W=function(a){var b=gf.f.W.call(this,a),c=a.Ie();c&&this.Gi(b,c);(c=a.z())&&this.Ma(b,c);a.ua&16&&this.ub(b,16,ef(a));return b};m.i=function(a,b){var b=gf.f.i.call(this,a,b),c=this.z(b);a.cj=c;a.Ui=this.Ie(b);a.ua&16&&this.ub(b,16,ef(a));return b};m.z=ha;m.Ma=ha;m.Ie=function(a){return a.title};m.Gi=function(a,b){a&&(a.title=b||"")};m.xa=ea("goog-button");function hf(a,b){Gc.call(this);a&&jf(this,a,b)}t(hf,hd);m=hf.prototype;m.g=k;m.gg=k;m.Oh=k;m.hg=k;m.qc=-1;m.pc=-1;m.bh=l;
var kf={3:13,12:144,63232:38,63233:40,63234:37,63235:39,63236:112,63237:113,63238:114,63239:115,63240:116,63241:117,63242:118,63243:119,63244:120,63245:121,63246:122,63247:123,63248:44,63272:46,63273:36,63275:35,63276:33,63277:34,63289:144,63302:45},lf={Up:38,Down:40,Left:37,Right:39,Enter:13,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"U+007F":46,Home:36,End:35,PageUp:33,PageDown:34,Insert:45},mf=v||sb&&Db("525"),nf=lb&&rb;m=hf.prototype;
m.Gm=function(a){if(sb&&(17==this.qc&&!a.ctrlKey||18==this.qc&&!a.altKey))this.pc=this.qc=-1;mf&&!We(a.keyCode,this.qc,a.shiftKey,a.ctrlKey,a.altKey)?this.handleEvent(a):(this.pc=rb?Ye(a.keyCode):a.keyCode,nf&&(this.bh=a.altKey))};m.Im=function(a){this.pc=this.qc=-1;this.bh=a.altKey};
m.handleEvent=function(a){var b=a.oa,c,d,e=b.altKey;v&&"keypress"==a.type?(c=this.pc,d=13!=c&&27!=c?b.keyCode:0):sb&&"keypress"==a.type?(c=this.pc,d=0<=b.charCode&&63232>b.charCode&&Xe(c)?b.charCode:0):qb?(c=this.pc,d=Xe(c)?b.keyCode:0):(c=b.keyCode||this.pc,d=b.charCode||0,nf&&(e=this.bh),lb&&(63==d&&224==c)&&(c=191));var g=c,j=b.keyIdentifier;c?63232<=c&&c in kf?g=kf[c]:25==c&&a.shiftKey&&(g=9):j&&j in lf&&(g=lf[j]);a=g==this.qc;this.qc=g;b=new of(g,d,a,b);b.altKey=e;this.dispatchEvent(b)};
m.b=ca("g");function jf(a,b,c){a.hg&&a.detach();a.g=b;a.gg=K(a.g,"keypress",a,c);a.Oh=K(a.g,"keydown",a.Gm,c,a);a.hg=K(a.g,"keyup",a.Im,c,a)}m.detach=function(){this.gg&&(dd(this.gg),dd(this.Oh),dd(this.hg),this.hg=this.Oh=this.gg=k);this.g=k;this.pc=this.qc=-1};m.q=function(){hf.f.q.call(this);this.detach()};function of(a,b,c,d){d&&this.init(d,h);this.type="key";this.keyCode=a;this.charCode=b;this.repeat=c}t(of,Rc);function pf(a,b){a||f(Error("Invalid class name "+a));pa(b)||f(Error("Invalid decorator function "+b))}var qf={};function rf(a,b,c){R.call(this,c);if(!b){for(var b=this.constructor,d;b;){d=sa(b);if(d=qf[d])break;b=b.f?b.f.constructor:k}b=d?pa(d.a)?d.a():new d:k}this.U=b;this.Cb=a}t(rf,R);m=rf.prototype;m.Cb=k;m.o=0;m.ua=39;m.Pb=255;m.uo=0;m.Ug=i;m.kb=k;m.Dh=i;m.Hf=l;m.fl=k;function sf(a){a.ia&&l!=a.Dh&&tf(a,l);a.Dh=l}m.lc=function(){return this.U.lc(this)};
m.Ee=function(a,b){b?a&&(this.kb?Xa(this.kb,a)||this.kb.push(a):this.kb=[a],this.U.Ee(this,a,i)):a&&this.kb&&(Ya(this.kb,a),0==this.kb.length&&(this.kb=k),this.U.Ee(this,a,l))};m.W=function(){var a=this.U.W(this);this.g=a;var b=this.fl||this.U.Kd();b&&a.setAttribute("role",b);this.Hf||this.U.de(a,l);this.Fb()||this.U.Ca(a,l)};m.Ta=function(){return this.U.Ta(this.b())};m.Rc=function(a){return this.U.Rc(a)};
m.v=function(a){this.g=a=this.U.i(this,a);var b=this.fl||this.U.Kd();b&&a.setAttribute("role",b);this.Hf||this.U.de(a,l);this.Ug="none"!=a.style.display};m.B=function(){rf.f.B.call(this);this.U.lk(this);if(this.ua&-2&&(this.Dh&&tf(this,i),this.ua&32)){var a=this.lc();if(a){var b=this.Qd||(this.Qd=new hf);jf(b,a);P(P(P(this.h(),b,"key",this.Hm),a,"focus",this.Em),a,"blur",this.Xj)}}};
function tf(a,b){var c=a.h(),d=a.b();b?(P(P(P(P(c,d,"mouseover",a.dk),d,"mousedown",a.bk),d,"mouseup",a.ek),d,"mouseout",a.ck),a.ag!=ha&&P(c,d,"contextmenu",a.ag),v&&P(c,d,"dblclick",a.Yj)):(Md(Md(Md(Md(c,d,"mouseover",a.dk),d,"mousedown",a.bk),d,"mouseup",a.ek),d,"mouseout",a.ck),a.ag!=ha&&Md(c,d,"contextmenu",a.ag),v&&Md(c,d,"dblclick",a.Yj))}m.$c=function(){rf.f.$c.call(this);this.Qd&&this.Qd.detach();this.Fb()&&this.isEnabled()&&this.U.fe(this,l)};
m.q=function(){rf.f.q.call(this);this.Qd&&(this.Qd.ja(),delete this.Qd);delete this.U;this.kb=this.Cb=k};m.md=function(a){this.U.md(this.b(),a);this.Cb=a};m.Uj=function(){var a=this.Cb;return!a?"":(na(a)?a:la(a)?Sa(a,vc).join(""):tc(a)).replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")};m.nd=function(a){rf.f.nd.call(this,a);var b=this.b();b&&this.U.nd(b,a)};m.de=function(a){this.Hf=a;var b=this.b();b&&this.U.de(b,a)};m.Fb=ca("Ug");
m.Ca=function(a,b){if(b||this.Ug!=a&&this.dispatchEvent(a?"show":"hide")){var c=this.b();c&&this.U.Ca(c,a);this.isEnabled()&&this.U.fe(this,a);this.Ug=a;return i}return l};m.isEnabled=function(){return!(this.o&1)};m.da=function(a){var b=this.getParent();if((!b||"function"!=typeof b.isEnabled||b.isEnabled())&&uf(this,1,!a))a||(this.setActive(l),vf(this,l)),this.Fb()&&this.U.fe(this,a),this.Ba(1,!a)};function vf(a,b){uf(a,2,b)&&a.Ba(2,b)}m.oc=function(){return!!(this.o&4)};
m.setActive=function(a){uf(this,4,a)&&this.Ba(4,a)};function ef(a){return!!(a.o&16)}function wf(a,b){uf(a,16,b)&&a.Ba(16,b)}m.fg=function(){return!!(this.o&32)};m.eb=function(a){uf(this,32,a)&&this.Ba(32,a)};m.Ba=function(a,b){this.ua&a&&b!=!!(this.o&a)&&(this.U.Ba(this,a,b),this.o=b?this.o|a:this.o&~a)};function xf(a,b,c){a.ia&&(a.o&b&&!c)&&f(Error("Component already rendered"));!c&&a.o&b&&a.Ba(b,l);a.ua=c?a.ua|b:a.ua&~b}function yf(a,b){return!!(a.Pb&b)&&!!(a.ua&b)}
function uf(a,b,c){return!!(a.ua&b)&&!!(a.o&b)!=c&&(!(a.uo&b)||a.dispatchEvent(Re(b,c)))&&!a.Rf}m.dk=function(a){(!a.relatedTarget||!pc(this.b(),a.relatedTarget))&&(this.dispatchEvent("enter")&&this.isEnabled()&&yf(this,2))&&vf(this,i)};m.ck=function(a){if((!a.relatedTarget||!pc(this.b(),a.relatedTarget))&&this.dispatchEvent("leave"))yf(this,4)&&this.setActive(l),yf(this,2)&&vf(this,l)};m.ag=ha;
m.bk=function(a){this.isEnabled()&&(yf(this,2)&&vf(this,i),Tc(a)&&(yf(this,4)&&this.setActive(i),this.U.Nh(this)&&this.lc().focus()));!this.Hf&&Tc(a)&&a.preventDefault()};m.ek=function(a){this.isEnabled()&&(yf(this,2)&&vf(this,i),this.oc()&&(this.bf(a)&&yf(this,4))&&this.setActive(l))};m.Yj=function(a){this.isEnabled()&&this.bf(a)};
m.bf=function(a){yf(this,16)&&wf(this,!ef(this));yf(this,8)&&uf(this,8,i)&&this.Ba(8,i);if(yf(this,64)){var b=!(this.o&64);uf(this,64,b)&&this.Ba(64,b)}b=new Oc("action",this);a&&(b.altKey=a.altKey,b.ctrlKey=a.ctrlKey,b.metaKey=a.metaKey,b.shiftKey=a.shiftKey,b.ii=a.ii);return this.dispatchEvent(b)};m.Em=function(){yf(this,32)&&this.eb(i)};m.Xj=function(){yf(this,4)&&this.setActive(l);yf(this,32)&&this.eb(l)};
m.Hm=function(a){return this.Fb()&&this.isEnabled()&&this.Ch(a)?(a.preventDefault(),a.stopPropagation(),i):l};m.Ch=function(a){return 13==a.keyCode&&this.bf(a)};pa(rf)||f(Error("Invalid component class "+rf));pa(Ze)||f(Error("Invalid renderer class "+Ze));var zf=sa(rf);qf[zf]=Ze;pf("goog-control",function(){return new rf(k)});function Af(){}t(Af,gf);ia(Af);m=Af.prototype;m.Kd=aa();m.W=function(a){sf(a);a.Pb&=-256;xf(a,32,l);return a.mb().W("button",{"class":af(this,a).join(" "),disabled:!a.isEnabled(),title:a.Ie()||"",value:a.z()||""},a.Uj()||"")};m.Rc=function(a){return"BUTTON"==a.tagName||"INPUT"==a.tagName&&("button"==a.type||"submit"==a.type||"reset"==a.type)};m.i=function(a,b){sf(a);a.Pb&=-256;xf(a,32,l);b.disabled&&w(b,ff(this,1));return Af.f.i.call(this,a,b)};m.lk=function(a){P(a.h(),a.b(),"click",a.bf)};m.de=ha;
m.nd=ha;m.Nh=function(a){return a.isEnabled()};m.fe=ha;m.Ba=function(a,b,c){Af.f.Ba.call(this,a,b,c);if((a=a.b())&&1==b)a.disabled=c};m.z=function(a){return a.value};m.Ma=function(a,b){a&&(a.value=b)};m.ub=ha;function Bf(a,b,c){rf.call(this,a,b||Af.a(),c)}t(Bf,rf);m=Bf.prototype;m.z=ca("cj");m.Ma=function(a){this.cj=a;this.U.Ma(this.b(),a)};m.Ie=ca("Ui");m.Gi=function(a){this.Ui=a;this.U.Gi(this.b(),a)};m.q=function(){Bf.f.q.call(this);delete this.cj;delete this.Ui};m.B=function(){Bf.f.B.call(this);if(this.ua&32){var a=this.lc();a&&P(this.h(),a,"keyup",this.Ch)}};m.Ch=function(a){return 13==a.keyCode&&"key"==a.type||32==a.keyCode&&"keyup"==a.type?this.bf(a):32==a.keyCode};pf("goog-button",function(){return new Bf(k)});function Cf(){}t(Cf,gf);ia(Cf);m=Cf.prototype;m.W=function(a){var b={"class":"goog-inline-block "+af(this,a).join(" "),title:a.Ie()||""},b=a.mb().W("div",b,Df(this,a.Cb,a.mb()));bf(this,a,b);return b};m.Kd=ea("button");m.Ta=function(a){return a&&a.firstChild.firstChild};function Df(a,b,c){return c.W("div","goog-inline-block "+(a.xa()+"-outer-box"),c.W("div","goog-inline-block "+(a.xa()+"-inner-box"),b))}m.Rc=function(a){return"DIV"==a.tagName};
m.i=function(a,b){Ef(b,i);Ef(b,l);var c;a:{c=Ac(a.mb(),b);var d=this.xa()+"-outer-box";if(c&&z(c,d)&&(c=Ac(a.mb(),c),d=this.xa()+"-inner-box",c&&z(c,d))){c=i;break a}c=l}c||b.appendChild(Df(this,b.childNodes,a.mb()));w(b,"goog-inline-block",this.xa());return Cf.f.i.call(this,a,b)};m.xa=ea("goog-custom-button");
function Ef(a,b){if(a)for(var c=b?a.firstChild:a.lastChild,d;c&&c.parentNode==a;){d=b?c.nextSibling:c.previousSibling;if(3==c.nodeType){var e=c.nodeValue;if(""==Ea(e))a.removeChild(c);else{c.nodeValue=b?e.replace(/^[\s\xa0]+/,""):e.replace(/[\s\xa0]+$/,"");break}}else break;c=d}};function Ff(a,b,c){Bf.call(this,a,b||Cf.a(),c)}t(Ff,Bf);pf("goog-custom-button",function(){return new Ff(k)});function Gf(){R.call(this);this.Si=2;this.ga=5;this.Bl=60*this.Si*this.ga;this.sj=[];this.te={};this.za=!!S.a().d&&Hf(S.a().d);this.X=0;this.ol=this.nl=l;this.yh=this.yb=i;this.na=l;this.ib=[U.a().l,U.a().l.e()];this.Ck=0;this.zg=251}t(Gf,R);m=Gf.prototype;
m.B=function(){Gf.f.B.call(this);this.Ng=B("ticker");this.Hp=B("my-ticker");var a=B("go-live");this.Le=B("header");this.Qa=B("channels");this.Xl=B("channel-names");this.bb=C("channel-scrollable",this.b());this.La=C("channel-h-scrollable",this.b());this.Nm=1;this.sd=Math.max(1280,D().width)*this.Nm;this.ye=Q(B("controller")).height;N.a().subscribe(qd,function(a){this.Pg(a)},this);N.a().subscribe(pd,function(a){A(this.b(),"sidebar-toggled",a);this.Pa(l,h,i);If(this)},this);this.Pg(z(this.b(),"toggled"));
O(this.Xl,!EMBED);this.rf=new zd;for(var b=60;b>=this.rf.getMinutes();)b-=this.ga;this.rf.setMinutes(b);this.sa=this.rf.clone();this.sa.add(new Ad(0,0,0,0,0*-this.ga));this.dn=this.sa.clone();this.dn.add(new Ad(0,0,0,0,this.ga*(this.Si+1)));ee(this.Qa,this.sd);ee(this.Le,this.sd);this.cf=(this.sd-(EMBED?0:200))/this.Bl;this.Wp=this.sd/this.Si;this.jh=document.createElement("style");this.jh.id="channel-name-offs";this.jh.type="text/css";document.getElementsByTagName("head")[0].appendChild(this.jh);
u(U.a().Qb,q(function(a){this.Pc(a)},this));this.r=new pe(this.La);var c=this.bb,d=this.Le,e,g,j=0;this.r.Be=function(a,b){this.target&&(this.target.scrollLeft-=a-j,j=a,z(this.target,"channel-h-scrollable")&&(d.style.left=-this.target.scrollLeft+"px"));e=e||b;c.scrollTop-=b-(g||e);g=b};var b=B("now-left"),p=B("now-right");P(P(P(P(P(P(P(P(P(P(P(this.h(),ld.a().ue,kd,q(this.Ri,this)),a,"click",q(function(){U.a().l.rg=l;U.a().c(Jf,U.a().l)},this)),window,"resize",q(this.Pa,this)),this.Ng,"click",q(this.Pa,
this,i,h,l)),b,"click",q(this.un,this)),p,"click",q(this.Bn,this)),this.r,"beforedrag",q(function(a){!this.na&&N.a().ec?(a=a.Jf,a=xc(a.target,"channel")||C("channel",a.target),this.r.target=a):this.na||(this.r.target=this.La);x(this.b(),"animate");w(this.b(),"drag");this.na=i},this)),this.r,"end",q(function(){L(q(function(){x(this.b(),"drag")},this));w(this.b(),"animate");this.yb=this.na=l;e=h;j=g=0;If(this)},this)),this.Qa,"mousewheel",q(function(a){a.preventDefault();a.stopPropagation();a=a.oa;
this.bb.scrollTop-=a.wheelDelta?a.wheelDelta:a.detail?-a.detail:0},this)),this.Le,"mousewheel",q(function(a){a.preventDefault();a.stopPropagation();a=a.oa;x(this.b(),"animate");w(this.b(),"drag");this.na=i;this.La.scrollLeft+=a.wheelDelta?a.wheelDelta:a.detail?-a.detail:0;x(this.b(),"drag");w(this.b(),"animate");this.yb=this.na=l;If(this)},this)),C("switcher",this.b()),"click",q(function(){x(this.b(),"animate");N.a().ec=!N.a().ec;N.a().ec?(w(this.b(),"timeless"),L(q(function(){w(this.b(),"position-hack");
w(this.b(),"animate")},this))):(x(this.b(),"timeless"),L(q(function(){x(this.b(),"position-hack");w(this.b(),"animate")},this)));this.Pa(i,h,l)},this));U.a().subscribe(Kf,this.Dc,this);U.a().subscribe(Lf,this.Pc,this);U.a().subscribe(Jf,this.Sc,this);U.a().subscribe(Mf,q(function(a,b){!this.na&&!b&&L(q(function(){this.Pa(i)},this))},this));N.a().subscribe("toggle-admin",function(a){A(this.b(),"admin",a)},this);V.a().subscribe(Nf,this.ji,this);this.Dc();this.za&&P(this.h(),this.r,"beforedrag",q(function(a){a.Jf.shiftKey&&
a.preventDefault()},this))};m.Pc=function(a){if(!this.te[a.id]){if(!a.J){var b=new Of(a,this.Bl,this.rf,0,this.sa);Te(b,this.Qa);this.sj.push(b);this.te[a.id]=b;a.subscribe(Pf,function(){L(q(function(){this.Dc()},this))},this);b.update();var c=cc("program",b.b());if(c=c[c.length-1])this.Ck=Math.max(this.Ck,Xd(c).x+Q(c).width)}a.id==U.a().l.id&&b&&(Qf(b,i),this.qa=b);this.ng=a.J?a:this.ng}};
m.Pg=function(a){x(this.b(),"animate");this.Pa(i,h,l);w(this.b(),"animate");var b=Math.min(this.Qa.scrollHeight,210);A(this.b(),"toggled",a);de(this.b(),a?b+this.ye:this.ye);this.qa&&(this.bb.scrollTop=Xd(this.qa.b()).y);L(q(function(){de(this.bb,a?b:40);de(this.La,Q(this.Qa).height+11);A(this.b(),"collapsed",!a);this.Dc();this.Pa();if(this.qa){var c=this.bb,d=Xd(this.qa.b()).y;c.scrollTop!=d&&(c.scrollTop=d)}},this),a?0:800);a&&this.Dc();this.r&&this.r.da(a)};
m.Sc=function(a){if(a){this.qa&&Qf(this.qa,l);if(this.qa=this.te[a.id]||k)Qf(this.qa,i),L(q(this.Pa,this,i,h,l));this.ib[0]=a}};m.ji=function(){this.ng=this.ng||Rf();U.a().c(Jf,this.ng)};
function If(a){var b=B("now-left"),c=B("now-right");s();var d=td()?320:0,d=D().width-d;Sf(a.ib[0],a.X+1)&&(a.ib[0].e(a.X+1),s(),a.ib[0].e(a.X+1));A(c,"sidebar",td());0<=a.ib[0].la+(a.X||0)-1&&a.ib[0].e(a.X-1)&&a.ib[0].e(a.X-1);var e=a.te[U.a().l.id],e=C("programs",e.b()),e=Q(e).width,d=Sf(a.ib[0],EMBED?d*(a.X+1)/e:a.X);A(c,"show",EMBED?i:d);A(b,"show",EMBED?0<a.X:0<=a.ib[0].la+(a.X||0)-1)}m.un=function(){z(B("now-left"),"show")&&(this.Pa(l,-1),If(this))};
m.Bn=function(){z(B("now-right"),"show")&&(this.Pa(l,1),If(this))};m.Ri=function(){if(N.a().bd&&!N.a().ec||this.yh){var a=U.a().l&&U.a().l.J||l,b=U.a().l&&U.a().l.e(),c=V.a().e(),d=1E3*V.a().Zf(),e=Math.round((s()-this.sa.getTime())/1E3*this.cf),d=c&&d?Math.round((c.time.getTime()+d-this.sa.getTime())/1E3*this.cf):e;If(this);Vd(this.Ng,e);A(this.Ng,"go-live",!a&&(!!b&&!!c&&b.id!=c.id&&45<Math.abs(d-e)||120<Math.abs(d-e)));this.yh?(this.yh=l,this.Pa(i,h,l),w(this.b(),"animate")):this.na||this.Pa()}};
m.Pa=function(a,b,c,d){this.yb=a!=h?!!a:this.yb;this.nl=a!=h?!!c:this.yb;this.X=this.yb?0:b?this.X+b:this.X;var c=Tf(U.a().l),e;e=U.a().l.J?(e=Uf(U.a(),i))&&e.e():d?c:this.yb?V.a().e():this.ib[0].e(this.X);this.ib[1]=e;this.yb||x(this.b(),"tick-along");if((this.yb||b)&&this.sa){var g=V.a().e(),j=V.a().getCurrentTime(),p=(s()-this.sa.getTime())/1E3*this.cf;g&&j&&Math.round((g.time.getTime()+j-this.sa.getTime())/1E3*this.cf);g=D().width-(td()?320:0);if(N.a().ec)u(U.a().Qb,function(c){var d=this.te[c.id];
if(d){var e=C("channel",d.b()),d=C("programs",d.b());c.e();var c=c.la||0,g=td()?320:0,g=D().width-g,d=Q(d).width;if(EMBED){if(a&&c*this.zg<e.scrollLeft)for(;c*this.zg<g*this.X;)this.X--;else if(a)for(;c*this.zg-251-g*(this.X+1)%251>g*this.X;)this.X++;d=Math.min(d-g,g*this.X-(b&&0<b?251+g*(this.X+1)%251:251+g*this.X%251))}else d=(c+this.X)*this.zg;(new Le(e,[e.scrollLeft,e.scrollTop],[d,e.scrollTop],EMBED?600:300)).play()}},this);else{j=0;e&&(j=(e.time.getTime()-this.sa.getTime())/1E3*this.cf+5);if(!e||
!b&&N.a().bd&&p>j+g-320)j=Xd(this.Ng).x-g+(EMBED?0:200),w(this.b(),"tick-along");j=Math.max(j,0);j=Math.min(j,this.La.scrollWidth-this.La.clientWidth);if(b||a){var r=new Le(this.La,[this.La.scrollLeft,this.La.scrollTop],[j-5,this.La.scrollTop],300);r.play()}else this.La.scrollLeft=j-5;this.Le.style.left=-j+"px"}if(!this.nl&&this.qa){var y=Xd(this.qa.b()).y-Q(this.Le).height,r=new Le(this.bb,[this.bb.scrollLeft,this.bb.scrollTop],[this.bb.scrollLeft,y],100*this.sj.length);P(this.h(),r,"end",q(function(){var a=
this.bb;a.scrollTop!=y&&(a.scrollTop=y);this.ol=l},this));L(q(function(){this.ol=i;r.play()},this),100)}}b&&If(this);if(!N.a().ec&&d&&(!c||!V.a().e()||c.id!=V.a().e().id))this.yb=l};m.Dc=function(){var a=Math.min(this.Qa.scrollHeight,210)+9;de(this.bb,z(this.b(),"toggled")?a:this.ye);de(this.La,Q(this.Qa).height+9);de(this.b(),z(this.b(),"collapsed")?this.ye:a+this.ye)};function Vf(){return'\t<div class="channel"><div class="programs-container"><div class="programs"></div></div><div class="graph"></div><div class="viewers"></div></div>'}function Wf(a){return'<div class="name"><div class="text">'+J(a.name)+"</div></div>"}
function Xf(a){return'<div class="info"><div class="thumb'+(a.repeat?" repeat":"")+'" style="background-image:url('+J(a.ni.media.Mb)+"); background-position: 50% "+J(a.ni.media.ie)+'%"></div><div class="progress"></div><div class="title">'+J(a.ni.media.name)+'</div><div class="stats"><div class="comment-count"><div class="icon"></div>'+J(a.media.yd)+'</div><div class="like-count"><div class="icon"></div>'+J(a.media.to)+'</div></div><div class="program-play"><div class="icon"></div></div><div class="program-plus" '+
(a.Sa?'style="display:none"':"")+'><div class="icon"></div></div><div class="viewers"></div>'+(a.$g?'<div class="remove"></div><div class="repos"></div>':"")+"</div>"}function Yf(a){return'<div class="line"><div class="pic"><img src="'+J(a.n.Q)+'"></div></div>'};function Zf(){M.call(this)}t(Zf,M);ia(Zf);function $f(a){this.id=a.id;this.Q=a.picture;this.name=a.name;this.description=a.description;this.link=a.link};function ag(a){M.call(this);this.id=a.id;this.name=a.name;this.host="youtube";this.Xb=a.host_id;this.Om="http://www.youtube.com/watch?v="+a.host_id;this.gf=a.reddit_id;this.duration=a.duration;this.live=!!a.live;this.ai=[];this.Nn=k;this.Pj=l;this.description=a.description;this.link=a.link||"xylocast.com/?m="+this.id;this.ta=a.publisher&&new $f(a.publisher);this.Bc=a.published&&yd(a.published+"Z");this.Mb="http://i.ytimg.com/vi/"+this.Xb+"/0.jpg";this.Pi="http://i.ytimg.com/vi/"+this.Xb+"/1.jpg";
this.Sp="http://i.ytimg.com/vi/"+this.Xb+"/2.jpg";this.Tp="http://i.ytimg.com/vi/"+this.Xb+"/3.jpg";this.Oi=new Qb(480,360);this.ie=37;this.Ab=[];this.Gl=[];this.yd=a.comment_count||0;this.to=a.star_count||0;this.Ym=a.like_count||0;this.sp=a.dislike_count||0;this.mf=[];this.$d={};this.Zl=a.collection_id;this.subscribe(bg,this.ic,this);this.subscribe(cg,this.Un,this);this.subscribe(dg,this.vd,this)}t(ag,M);function eg(a){return a.Bc.getMonth()+1+"/"+a.Bc.getDate()+"/"+a.Bc.getYear()}
var bg="add-comment",cg="remove-comment",dg="watching";ag.prototype.Ff=function(a){Va(this.ai,function(b){return a.id==b.id})||this.ai.push(a)};ag.prototype.ic=function(a){if(a.O){var b=Va(this.Ab,function(b){return b.id==a.O});b&&b.hf.push(a)}else this.Ab.push(a);this.yd+=1};
ag.prototype.Un=function(a){X("/_comment",Be(),"POST","delete=true&id="+a.id);if(a.O){var b=Va(this.Ab,function(b){return b.id==a.O});b&&Za(b.hf,function(b){return b.id==a.id})}else Za(this.Ab,function(b){return b.id==a.id});this.yd-=1};ag.prototype.vd=function(a,b,c){if(c)Vb(this.$d,a.id);else if(this.$d[a.id]=a,a.Tb=this,a.id!=S.a().d.id&&(!b||b&&U.a().l&&b.id!=U.a().l.id))Zf.a().c("flash","is watching "+(b?b.name:""),this.name,a,this.Pi,"#info:"+this.id)};function fg(){M.call(this);this.Td={}}t(fg,M);ia(fg);function gg(a,b){var c=a.get(b.id);c||(c=new ag(b),a.add(c));return c}fg.prototype.get=function(a){return Xb(this.Td,a)};fg.prototype.add=function(a){this.Td[a.id]=a};function hg(a,b){M.call(this);var c=b||k,d=a||k;this.id=d?d.id:c.id;this.media=d?gg(fg.a(),d.media):c;fg.a().add(this.media);this.time=d?yd(d.time+"Z"):new zd;this.async=d?d.async:i;this.seek=d?d.seek:b?0:k;this.ended=l}t(hg,M);function ig(a){return new hg(h,a)};function md(a){var b=s(),c=Math.floor((b-a)/6E4),b=l;0>c&&(b=i,c*=-1);if(60>c)return jg(c,b,0);c=Math.floor(c/60);if(24>c)return jg(c,b,1);c=new Date(s());c.setHours(0);c.setMinutes(0);c.setSeconds(0);c.setMilliseconds(0);c=Math.ceil((c.getTime()-a)/864E5);b&&(c*=-1);return 14>c?jg(c,b,2):""}
function jg(a,b,c){return!b&&0==c?(b=Aa("{$num} minute ago",{num:a}),c=Aa("{$num} minutes ago",{num:a}),1==a?b:c):b&&0==c?(b=Aa("in {$num} minute",{num:a}),c=Aa("in {$num} minutes",{num:a}),1==a?b:c):!b&&1==c?(b=Aa("{$num} hour ago",{num:a}),c=Aa("{$num} hours ago",{num:a}),1==a?b:c):b&&1==c?(b=Aa("in {$num} hour",{num:a}),c=Aa("in {$num} hours",{num:a}),1==a?b:c):!b&&2==c?(b=Aa("{$num} day ago",{num:a}),c=Aa("{$num} days ago",{num:a}),1==a?b:c):b&&2==c?(b=Aa("in {$num} day",{num:a}),c=Aa("in {$num} days",
{num:a}),1==a?b:c):""};function kg(a,b){M.call(this);var c=a||{};this.D=!b;this.id=c.id||"";this.name=c.name||"";this.url=c.profile_url||"";this.location=c.location||"";this.cq=!!c.welcomed;this.pb=!!c.online;this.rp=!!c.demo;this.Tb=c.last_seen?gg(fg.a(),c.last_seen):k;this.history=[];this.wl=[];this.Q=this.id?Da("https://graph.facebook.com/%s/picture",this.id):"";for(this.color=Raphael.getColor();"#00bf85"==this.color||"#00bf2f"==this.color;)this.color=Raphael.getColor();this.fj=c.access_level||0;this.gp=[];this.H=c.last_login?
yd(c.last_login+"Z"):k;this.Pp=c.session_count||0;this.ip=c.ave_session_time?c.ave_session_time.toFixed(2):k;this.lo=c.show_guide!=h?c.show_guide:i;this.po=c.show_sidebar!=h?c.show_sidebar:i;this.Qn=c.post_facebook!=h?c.post_facebook:i;this.el=c.post_twitter!=h?c.post_twitter:i;this.cg=!!c.has_twitter;this.Eh=l;this.yo=c.temp;this.subscribe(lg,function(){this.el=i},this)}t(kg,M);function Hf(a){return a.fj==mg}kg.prototype.He=function(){var a=this.name.split(" ");return a&&a.length?a[0]:this.name};
function ng(a,b){return Va(a.wl,function(a){return a.id==b.id})}var lg="twitter-auth",mg=2;function og(a,b,c,d,e){this.id=a;this.n=b;this.Z=c;this.Vi=d;this.ke=e||k;this.Gk=[]}og.prototype.mf=function(a){this.Gk.push(a);this.Z&&(this.Z.J&&this.Z.L)&&(this.Z.L.seek=k,this.Z.L=k);X("/_seen",Be(),"POST","media_id="+a.id+"&session_id="+this.id+"&async="+(this.Z?this.Z.J:l))};
og.prototype.end=function(a){this.ke=a;a=(this.ke.getTime()-this.Vi.getTime())/1E3;if(this.n.id==S.a().d.id&&this.Z){pg.a();var b=this.Z,c=this.Gk.length;S.a().tg.length?_gaq.push(["_trackEvent","Users","SessionTimeWithFriends",S.a().d.id,Math.round(a)]):_gaq.push(["_trackEvent","Users","SessionTimeNoFriends",S.a().d.id,Math.round(a)]);_gaq.push(["_trackEvent","Users","SessionMediaCount",S.a().d.id,c]);_gaq.push(["_trackEvent","Users","Active",S.a().d.id,c]);_gaq.push(["_trackEvent","Users",b.id+
"-time",S.a().d.id,a]);_gaq.push(["_trackEvent","Users",b.id+"-medias",S.a().d.id,c]);b.J||(_gaq.push(["_trackEvent","Channel","SessionTime",b.id,a]),_gaq.push(["_trackEvent","Channel","SessionMediaCount",b.id,c]))}};function qg(a){M.call(this);this.id=a.id;this.name=a.name;this.J=a.my_channel;this.Lo=a.youtube;this.rg=i;this.Tb=a.current_media?gg(fg.a(),a.current_media):k;this.op=a.current_seek;this.R=[];this.Ac={};this.L=a.current_program&&new hg(a.current_program);this.Df=[];this.queue=[];this.Nk=a.next_page_token;this.Hb=0;this.pb=a.online!=h?a.online:k;this.subscribe(rg,this.td,this);this.subscribe(sg,this.Pl,this);this.subscribe(tg,this.vd,this);this.subscribe(ug,this.Kl,this);this.L||(this.la=0,this.L=
this.R[0])}t(qg,M);m=qg.prototype;m.td=function(a){this.R.push(a);this.Ac[a.id]=a;a.async&&(this.la=this.R.length-1,this.L=a);!this.dq&&a.time.getTime()+1E3*a.media.duration>this.Hb&&(this.Hb=a.time.getTime()+1E3*a.media.duration-12E4,od(ld.a(),this.Hb,q(this.Th,this,this.Hb)),od(ld.a(),this.Hb+6E4,q(this.Th,this,this.Hb+6E4)))};m.Th=function(a){this.Hb<=a&&(!this.J&&!EMBED)&&vg(this)};
m.Pl=function(a,b){b?(this.queue.push(a),Zf.a().c("flash","Added to queue",a.name,h,a.Pi,"#info:"+a.id),S.a().d.D&&X("/_queue",Be(),"POST","media_id="+a.id)):(Za(this.queue,function(b){return b.id==a.id},this),S.a().d.D&&X("/_queue",Be(),"POST","media_id="+a.id+"&delete=1"))};function wg(a,b){var c=a.Ac[b.id];c||(c=new hg(b),a.td(c));return c}m.vd=function(a){this.Df.push(a)};m.Kl=function(a){var b=Xb(this.Ac,a.id);b&&(b.time=yd(a.time+"Z"))};
m.ee=function(a){this.L=a;var b=Wa(this.R,function(b){return b.id==a.id});this.la=-1!=b?b:0};
m.e=function(a){if(this.L&&this.L.async&&this.L.seek!=k&&!this.L.ended)return this.L;if(!this.R.length)return k;if(a)return this.R[this.la+a];if(this.rg&&this.L){if(this.L.ended){a=this.la;if(this.R[a+1])a=this.R[a+1];else if(this.J)if(this.queue.length){a=this.queue[0];this.c(sg,a,l);var b=ig(a);Rf().c(rg,b);S.a().d.D&&X("/_addprogram",Be(),"POST","channel_id="+U.a().J.id+"&media_id="+a.id+"&now=true");a=b}else a=k;else vg(this),a=k;this.L=a;this.L||(u(this.R,function(a){a.ended=l}),this.la=0,this.L=
this.R[0])}}else this.J||(this.la=0,this.L=this.R[0]);if(this.L&&(!this.R[this.la]||this.R[this.la].id!=this.L.id))a=Wa(this.R,q(function(a){return a.id==this.L.id},this)),this.la=Math.max(a,0);this.L||(this.la=0,this.L=this.R[0]);return this.L};
function Tf(a){var b=a.L,c=a.la;if(b&&s()>=b.time.getTime()&&s()<b.time.getTime()+1E3*b.media.duration)return a.L=b,a.L;if(!b||b.time.getTime()>=s())c=0,b=a.R[0];for(;c<a.R.length;c++){var d=a.R[c];if(s()>=d.time.getTime()&&s()<d.time.getTime()+1E3*d.media.duration)return d}return b}
function vg(a){a.Lo?X("/_ytchannel?channel_id="+a.id+"&pagetoken="+a.Nk,q(function(a){a=Y(a.target);this.Nk=a.channel.next_page_token;u(a.programs,function(a){this.Ac[a.id]||(a=wg(this,a),this.c(rg,a))},this)},a)):X("/_programming/"+a.id,q(function(a){a=Y(a.target);a.length||od(ld.a(),s()+1E3,q(this.Th,this,s()+1E3));u(a,function(a){this.Ac[a.id]||(a=wg(this,a),this.c(rg,a))},this)},a))}
function Sf(a,b){var c=a.la||0,d=b||0;if(a.J)return c+d+1<a.R.length||!!a.queue.length;c+d+1<a.R.length&&vg(a);return c+d+1<a.R.length}var rg="add-program",sg="add-queue",tg="add-viewer",ug="update-program",Pf="online";function xg(){M.call(this)}t(xg,M);ia(xg);function yg(){Gc.call(this);this.ma=[];this.Hd=[];this.Sf={};this.C=new Kd(this);this.Sm=this.qk=l;this.aj=i}t(yg,hd);m=yg.prototype;m.Hh=0;m.Ci=ba("Hh");
m.init=function(){if(!this.qk){for(var a=0,b=this.ma.length;a<b;a++)for(var c=lc(this.ma[a]),d=0,e=c.length;d<e;++d){var g=c[d],j=g,p=sa(j);this.Sf[p]=g;this.Ij&&(P(this.C,g,"mouseover",this.Am),P(this.C,g,"mouseout",this.zm));this.Hj&&(P(this.C,j,"mouseover",this.ym),P(this.C,j,"mouseout",this.xm));this.Hd.push(g);P(this.C,j,["mousedown","touchstart"],this.fk)}this.qk=i}};
m.q=function(){this.C.ja();for(var a=0,b=this.ma.length;a<b;a++){var c=this.ma[a];c.Fj=h;c.Wc=h}this.ma.length=0;this.Hd.length=0;this.Sf=k;Ag(this);yg.f.q.call(this)};function Bg(a,b){for(var c=0,d=a.ma.length;c<d;c++){var e=a.ma[c];e.Fd=ge(e)}c=0;for(d=a.Hd.length;c<d;c++)e=a.Hd[c],e!=b&&(e.Fd=ge(e))}
m.fk=function(a){var b=sa(a.currentTarget);this.s=this.Sf[b];this.G=this.Pf(this.s);this.Tf&&w(this.G,this.Tf);this.G.style.margin="0";this.G.style.position="absolute";this.G.style.visibility="hidden";bc(this.s).body.appendChild(this.G);b=ae(this.s);ce(this.G,b);this.r=new pe(this.G);this.r.Ci(this.Hh);K(this.r,"start",this.$j,l,this);K(this.r,"end",this.Zj,l,this);K(this.r,"earlycancel",this.Of,l,this);this.r.pd(a)};
m.$j=function(a){if(this.dispatchEvent(new Cg("beforedragstart",this,a.Jf,this.s,k,k))){this.vg=this.s.parentNode;this.Cj=this.ei=mc(this.s);this.rh=this.vg;this.qh?w.apply(k,ab(this.s,this.qh)):this.s.style.visibility="hidden";var b=Q(this.G);this.G.um=b.width/2;this.G.tm=b.height/2;this.G.style.visibility="";this.aj&&(this.s.style.display="none");Bg(this,this.s);this.s.style.display="";K(this.r,"drag",this.Bm,l,this);this.dispatchEvent(new Cg("dragstart",this,a.Jf,this.s,this.G,this.r))}else a.preventDefault(),
this.Of()};
m.Bm=function(a){var b=ae(this.G),b=new Ob(b.x+this.G.um,b.y+this.G.tm),c;a:{c=k;if("none"!=this.s.style.display){c=this.s.parentNode;var d=ge(c);if(Dg(b,d))break a}for(var d=0,e=this.ma.length;d<e;d++){var g=this.ma[d];if(g!=c&&Dg(b,g.Fd)){c=g;break a}}c=k}var j;if(c){c==k&&f(Error("getHoverNextItem_ called with null hoverList."));var p,r,d=l,e=h;switch(c.Fj){case 0:j=b.y;p=Eg;r=Fg;break;case 4:d=i;case 2:j=b.x;p=Gg;r=Fg;break;case 5:d=i;case 3:j=b.x,p=Hg,r=Ig}for(var g=k,y,F=lc(c),I=0,da=F.length;I<
da;I++){var T=F[I];if(T!=this.s){var ya=p(T.Fd);if(d){var ib=Jg(T,b);ka(e)||(e=ib);if(r(j,ya)&&(y==h||ib<e||ib==e&&(r(ya,y)||ya==y)))g=T,y=ya;ib<e&&(e=ib)}else if(r(j,ya)&&(y==h||r(ya,y)))g=T,y=ya}}j=g!==k&&Jg(g,b)>e?k:g}else j=k;if(!this.dispatchEvent(new Cg("beforedragmove",this,a,this.s,this.G,this.r,b,c,j)))return l;if(c)this.aj?(this.s.parentNode!=c||mc(this.s)!=j)&&c.insertBefore(this.s,j):j&&(this.Cj=j),this.s.style.display="",c.Wc&&w(c,c.Wc);else{this.Sm||(this.s.style.display="none");p=0;
for(r=this.ma.length;p<r;p++)y=this.ma[p],y.Wc&&x(y,y.Wc)}c!=this.rh&&(this.rh=c,Bg(this,this.s));this.dispatchEvent(new Cg("dragmove",this,a,this.s,this.G,this.r,b,c,j));return l};m.Of=function(){Ag(this);this.r=this.G=this.ei=this.vg=this.rh=this.s=k;for(var a=0,b=this.ma.length;a<b;a++)this.ma[a].Fd=k;a=0;for(b=this.Hd.length;a<b;a++)this.Hd[a].Fd=k};
m.Zj=function(a){if(!this.dispatchEvent(new Cg("beforedragend",this,a,this.s,this.G,this.r)))return l;this.aj||this.vg.insertBefore(this.s,this.Cj);Ag(this);this.dispatchEvent(new Cg("dragend",this,a,this.s,this.G,this.r));this.Of();return i};function Ag(a){Kc(a.r);a.G&&kc(a.G);a.s&&"none"==a.s.style.display&&(a.vg.insertBefore(a.s,a.ei),a.s.style.display="");a.qh&&a.s?x.apply(k,ab(a.s,a.qh)):a.s&&(a.s.style.visibility="visible");for(var b=0,c=a.ma.length;b<c;b++){var d=a.ma[b];d.Wc&&x(d,d.Wc)}}
m.Am=function(a){w.apply(k,ab(a.currentTarget,this.Ij))};m.zm=function(a){x.apply(k,ab(a.currentTarget,this.Ij))};m.ym=function(a){w.apply(k,ab(a.currentTarget,this.Hj))};m.xm=function(a){x.apply(k,ab(a.currentTarget,this.Hj))};function Dg(a,b){return a.x>b.left&&a.x<b.left+b.width&&a.y>b.top&&a.y<b.top+b.height}function Jg(a,b){var c=a.Fd;return Math.abs(b.y-(c.top+(c.height-1)/2))}function Eg(a){return a.top+a.height-1}function Gg(a){return a.left+a.width-1}function Hg(a){return a.left||0}
function Fg(a,b){return a<b}function Ig(a,b){return a>b}m.Pf=function(a){var b=a.cloneNode(i);switch(a.tagName.toLowerCase()){case "tr":return E("table",k,E("tbody",k,b));case "td":case "th":return E("table",k,E("tbody",k,E("tr",k,b)));default:return b}};function Cg(a,b,c,d,e,g,j,p,r){Oc.call(this,a);this.tp=b;this.event=c;this.gb=d;this.gm=e;this.fm=g;this.Jj=j;this.Bp=p;this.nc=r}t(Cg,Oc);function Of(a,b,c,d,e){R.call(this);this.p=a;this.za=Hf(S.a().d);this.Gf=l;this.Bo=b;this.rf=c;this.sa=e;this.Qp=d;this.wb={};this.df={};this.kc=this.za?new yg:k;this.ih=6;this.pb=i}t(Of,R);m=Of.prototype;m.W=function(){this.g=H(Vf);this.Wd=H(Wf,{name:this.p.name});B("channel-names").appendChild(this.Wd)};
m.B=function(){Of.f.B.call(this);this.pi=C("programs",this.b());this.Ef=C("viewers",this.b());var a=U.a(),b=(Q(this.b()).width-(EMBED?0:200))/this.Bo;a.zc=a.zc||b;Qd(this.Wd,"background",Raphael.getColor());a=this.p.R;for(b=0;b<a.length;b++)this.td(a[b]);if(this.za){a=this.kc;b=this.pi;b.Fj=2;b.Wc=h;a.ma.push(b);this.kc.Tf="drag";var c=this.b();this.kc.fk=function(a){var b=sa(a.currentTarget);this.s=this.Sf[b];this.G=this.Pf(this.s);this.Tf&&w(this.G,this.Tf);this.G.style.margin="0";this.G.style.position=
"absolute";this.G.style.visibility="hidden";c.appendChild(this.G);b=ae(this.s);ce(this.G,b);this.r=new pe(this.G);this.r.Ci(this.Hh);K(this.r,"start",this.$j,l,this);K(this.r,"end",this.Zj,l,this);K(this.r,"earlycancel",this.Of,l,this);this.r.pd(a)};this.kc.init();var d={},e,g,j,p,r,y=i;P(P(P(this.h(),this.kc,"beforedragstart",q(function(a){(!this.Gf||!a.event.shiftKey)&&a.preventDefault()},this)),this.kc,"dragmove",function(a){j=j||a.Jj.x;p=p||Xd(a.gb).x;r=r||(a.gb.previousElementSibling!=h?a.gb.previousElementSibling:
nc(a.gb.previousSibling,l));y=y&&!!r;var b=r?Q(r).width:h,c=r?Xd(r).x:h,T=a.Jj.x-j;10>Math.abs(T)||(a.nc&&!d[a.nc.id]&&0<T?(b=Q(a.gb).width,c=Xd(a.nc).x,e=c-b+Q(a.nc).width,T=this.p.Ac[a.nc.id],g=T.time.getTime()/1E3+T.media.duration-this.p.Ac[a.gb.id].media.duration,Vd(a.gb,e),Vd(a.nc,c-b-1),d[a.nc.id]=i,b=a.nc,b.parentNode&&b.parentNode.insertBefore(a.gb,b.nextSibling)):y&&(0>T&&p+T<c+b)&&(b=Q(a.gb).width,e=c=Xd(r).x,g=this.p.Ac[r.id].time.getTime()/1E3,Vd(a.gb,e),Vd(r,c+b+1),b=r.previousElementSibling!=
h?r.previousElementSibling:nc(r.previousSibling,l),r.parentNode&&r.parentNode.insertBefore(a.gb,r),r=b,y=!!b))}),this.kc,"dragend",function(a){g&&(X("/admin/_rescheduleprogram",h,"POST","program="+a.gm.id+"&time="+g),this.kc.init(),g=h);d={};e=r=p=j=h;y=i})}Qa(this.p.Df,this.vd,this);P(P(this.h(),this.Wd,"click",q(function(){this.p.id!=U.a().l.id&&Tf(this.p)&&(this.p.e()||(this.p.rg=i),U.a().c(Jf,this.p))},this)),ld.a().ue,kd,q(this.update,this));this.p.subscribe(rg,this.td,this);this.p.subscribe(tg,
this.vd,this);this.p.subscribe("remove-viewer",this.Vn,this);U.a().subscribe(Mf,this.Jl,this);U.a().subscribe(Jf,function(){this.ih=0;this.Jl()},this);N.a().subscribe("toggle-admin",ba("Gf"),this);this.update()};m.Jl=function(a){this.jc&&x(this.df[this.jc],"playing");this.jc=k;if(a=a||U.a().l.e()){var b=this.df[a.id];b&&(this.jc=a.id,w(b,"playing"))}};
m.td=function(a){var b=E("div",{"class":"program",id:a.id}),c=a.media.duration*U.a().zc,d=this.za&&a.time.getTime()+1E3*a.media.duration>s();Cc(b,Xf,{ni:a,media:a.media,repeat:600<c,$g:d,Sa:EMBED});this.df[a.id]=b;var e=U.a().l.e();e&&a.id==e.id&&(w(b,"playing"),this.jc=a.id);var g=C("thumb",b);L(function(){a.media.Oi.height<Q(b).height+50?(w(g,"fix-height"),w(g,"pan-left")):w(g,"pan-top");A(b,"stretched",360<a.media.Oi.height)});U.a();a.media.live&&(e=(s()-a.time.getTime())/1E3*U.a().zc-100,c-=e);
this.pi.appendChild(b);P(this.h(),b,"click",function(){z(B("guide"),"drag")||Z.a().c(Kg,a.media,h,h,h,a)});var j=z(b,"clipped")?250:Q(b).width,c=C("title",b),e=C("program-play",b),p=C("program-plus",b);Q(c);P(P(P(P(this.h(),b,"mouseover",function(){N.a().bd&&(this.Gf||Qd(g,"background-position-y",a.media.ie+10*Math.max(a.media.Oi.width/j,1)+"%"))}),b,"mouseout",function(){N.a().bd&&(this.Gf||Qd(g,"background-position-y",a.media.ie+"%"))}),e,"click",function(b){b.preventDefault();b.stopPropagation();
U.a().l.ee(a);U.a().c(Mf,a,i)}),p,"click",function(b){b.preventDefault();b.stopPropagation();Rf().c(sg,a.media,i)});d&&(d=new pe(C("repos",b)),d.Be=function(a,b){var c=b-24;-50<=c&&50>=c&&Qd(g,"background-position-y",50-c+"%")},P(P(this.h(),d,"end",function(){var b=(g.style[Na("background-position")]||"").split(" ")[1],b=b.substring(0,b.length-1);a.media.ie=b;X("/admin/_posthumb",Be(),"POST","media="+a.media.id+"&pos="+b)}),C("remove",b),"click",q(this.An,this,a,b)))};
m.Kl=function(a){var b=this.df[a.id],a=(yd(a.time+"Z").getTime()-this.sa.getTime())/1E3*U.a().zc;Vd(b,a)};m.An=function(a,b){kc(b);X("/admin/_removeprogram",h,"POST","program="+a.id+"&media_id="+a.media.id+"&channel_id="+this.p.id);X("admin/_media/collection",q(function(){alert("Disallowed on all channels.")},this),"POST","&media="+a.media.id+"&approve=false")};
m.vd=function(a){if(S.a().d.id!=a.n.id){var b=this.wb[a.n.id];b||(b=E("div","viewer"),this.Ef.appendChild(b),this.wb[a.n.id]=b);if(!a.ke||a.ke.getTime()>this.sa.getTime()){var c=H(Yf,{n:a.n});b.appendChild(c);var d=Math.max(a.Vi.getTime(),this.sa.getTime()),b=(d-this.sa.getTime())/1E3*U.a().zc+(EMBED?0:200),d=(s()-d)/1E3*U.a().zc;ee(c,d);Vd(c,b);Qd(c,"background",a.n.color);P(this.h(),c,"click",function(b){xc(b.target,"watch-with")||Z.a().c(Lg,a.n)});DESKTOP&&!IPAD&&Mg(Ng.a(),C("pic",c),"top",{text:"JOIN "+
a.n.He().toUpperCase(),link:"#channel:"+a.Z.id})}}};function Qf(a,b){A(a.b(),"current",b);A(a.Wd,"current",b)}m.Vn=function(a){this.wb[a.id]&&(kc(this.wb[a.id]),Vb(this.wb,a.id),U.a().c(Kf))};
m.update=function(){!this.pb&&this.p.R.length&&this.p.c(Pf,i);this.pb=!!this.p.R.length;A(this.b(),"offline",!this.pb);O(this.Wd,this.pb);if(this.p.R.length&&!N.a().ec){if(this.jc&&0<this.ih){var a=this.df[this.jc],b=Xd(a).x+Xd(B("guide")).x,a=C("title",a);Vd(a,200>b?-b+210:5)}else this.ih++;Rb(this.p.Df,function(a){if(this.p.e()&&!a.ke&&this.wb[a.n.id]){var b=Math.max(a.Vi.getTime(),this.sa.getTime());Q(this.pi);var e=Math.floor((s()-b)/1E3*U.a().zc),g=V.a().e();a.n.id==S.a().d.id&&g&&(e=Math.floor((g.time.getTime()+
1E3*V.a().Zf()-b)/1E3*U.a().zc));this.wb[a.n.id].lastChild&&ee(this.wb[a.n.id].lastChild,e)}},this);de(this.Wd,Q(this.b()).height-1)}};function S(){M.call(this);this.Mc={};this.Tj=l;this.Bh=[];this.jm={};this.tg=[];this.subscribe(Og,function(a,b){a.pb=b},this)}t(S,M);ia(S);function Pg(a,b){a.d=b?Qg(a,b):new kg(h,i);a.d.D&&(FB.api("/me/permissions",q(function(a){this.d.Eh=a.data[0].publish_stream},a)),FB.api("/me/friends",q(function(a){a&&a.data&&u(a.data,function(a){this.Mc[a.id]||(this.Mc[a.id]=new kg({id:a.id,name:a.name,temp:i}))},this)},a)))}S.prototype.add=function(a){this.Mc[a.id]=a};S.prototype.get=function(a){return this.Mc[a]};
function Qg(a,b){var c=a.get(b.id);if(!c||c.yo)c=new kg(b),a.add(c);b.online==l&&c.pb==i&&(c.H=new zd);c.pb=b.online||!!Va(a.tg,function(a){return a.id==c.id},a);c.Tb=b.last_seen?gg(fg.a(),b.last_seen):c.Tb;return c}S.prototype.search=function(a){var b=Ra(Sb(this.Mc),function(b){return b.name&&0==Fa(a,b.name.substr(0,a.length))},this);Ra(Sb(this.jm),function(b){return 0==Fa(a,b.substr(0,a.length))},this);return b};var Og="online";function Rg(a){if("function"==typeof a.Vb)return a.Vb();if(na(a))return a.split("");if(ma(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return Sb(a)}function Sg(a,b,c){if("function"==typeof a.forEach)a.forEach(b,c);else if(ma(a)||na(a))u(a,b,c);else{var d;if("function"==typeof a.Ld)d=a.Ld();else if("function"!=typeof a.Vb)if(ma(a)||na(a)){d=[];for(var e=a.length,g=0;g<e;g++)d.push(g)}else d=Tb(a);else d=h;for(var e=Rg(a),g=e.length,j=0;j<g;j++)b.call(c,e[j],d&&d[j],a)}};function Tg(a,b){this.Ib={};this.ca=[];var c=arguments.length;if(1<c){c%2&&f(Error("Uneven number of arguments"));for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else if(a){a instanceof Tg?(c=a.Ld(),d=a.Vb()):(c=Tb(a),d=Sb(a));for(var e=0;e<c.length;e++)this.set(c[e],d[e])}}m=Tg.prototype;m.m=0;m.dj=0;m.Vb=function(){Ug(this);for(var a=[],b=0;b<this.ca.length;b++)a.push(this.Ib[this.ca[b]]);return a};m.Ld=function(){Ug(this);return this.ca.concat()};m.zd=function(a){return Vg(this.Ib,a)};
m.clear=function(){this.Ib={};this.dj=this.m=this.ca.length=0};m.remove=function(a){return Vg(this.Ib,a)?(delete this.Ib[a],this.m--,this.dj++,this.ca.length>2*this.m&&Ug(this),i):l};function Ug(a){if(a.m!=a.ca.length){for(var b=0,c=0;b<a.ca.length;){var d=a.ca[b];Vg(a.Ib,d)&&(a.ca[c++]=d);b++}a.ca.length=c}if(a.m!=a.ca.length){for(var e={},c=b=0;b<a.ca.length;)d=a.ca[b],Vg(e,d)||(a.ca[c++]=d,e[d]=1),b++;a.ca.length=c}}m.get=function(a,b){return Vg(this.Ib,a)?this.Ib[a]:b};
m.set=function(a,b){Vg(this.Ib,a)||(this.m++,this.ca.push(a),this.dj++);this.Ib[a]=b};m.clone=function(){return new Tg(this)};function Vg(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function Wg(a){return Xg(a||arguments.callee.caller,[])}
function Xg(a,b){var c=[];if(Xa(b,a))c.push("[...circular reference...]");else if(a&&50>b.length){c.push(Yg(a)+"(");for(var d=a.arguments,e=0;e<d.length;e++){0<e&&c.push(", ");var g;g=d[e];switch(typeof g){case "object":g=g?"object":"null";break;case "string":break;case "number":g=String(g);break;case "boolean":g=g?"true":"false";break;case "function":g=(g=Yg(g))?g:"[fn]";break;default:g=typeof g}40<g.length&&(g=g.substr(0,40)+"...");c.push(g)}b.push(a);c.push(")\n");try{c.push(Xg(a.caller,b))}catch(j){c.push("[exception trying to get caller]\n")}}else a?
c.push("[...long stack...]"):c.push("[end]");return c.join("")}function Yg(a){if(Zg[a])return Zg[a];a=String(a);if(!Zg[a]){var b=/function ([^\(]+)/.exec(a);Zg[a]=b?b[1]:"[Anonymous]"}return Zg[a]}var Zg={};function $g(a,b,c,d,e){this.reset(a,b,c,d,e)}$g.prototype.co=0;$g.prototype.Mj=k;$g.prototype.Lj=k;var ah=0;$g.prototype.reset=function(a,b,c,d,e){this.co="number"==typeof e?e:ah++;this.Vp=d||s();this.Ue=a;this.hn=b;this.Ep=c;delete this.Mj;delete this.Lj};$g.prototype.ql=ba("Ue");function bh(a){this.kn=a}bh.prototype.P=k;bh.prototype.Ue=k;bh.prototype.ka=k;bh.prototype.gk=k;function ch(a,b){this.name=a;this.value=b}ch.prototype.toString=ca("name");var dh=new ch("SEVERE",1E3),eh=new ch("WARNING",900),fh=new ch("INFO",800),gh=new ch("CONFIG",700),hh=new ch("FINE",500);m=bh.prototype;m.getParent=ca("P");m.Vj=function(){this.ka||(this.ka={});return this.ka};m.ql=ba("Ue");function ih(a){return a.Ue?a.Ue:a.P?ih(a.P):k}
m.log=function(a,b,c){if(a.value>=ih(this).value){a=this.rm(a,b,c);b="log:"+a.hn;n.console&&(n.console.timeStamp?n.console.timeStamp(b):n.console.markTimeline&&n.console.markTimeline(b));n.msWriteProfilerMark&&n.msWriteProfilerMark(b);for(b=this;b;){var c=b,d=a;if(c.gk)for(var e=0,g=h;g=c.gk[e];e++)g(d);b=b.getParent()}}};
m.rm=function(a,b,c){var d=new $g(a,String(b),this.kn);if(c){d.Mj=c;var e;var g=arguments.callee.caller;try{var j;var p=ga("window.location.href");if(na(c))j={message:c,name:"Unknown error",lineNumber:"Not available",fileName:p,stack:"Not available"};else{var r,y,F=l;try{r=c.lineNumber||c.Dp||"Not available"}catch(I){r="Not available",F=i}try{y=c.fileName||c.filename||c.sourceURL||p}catch(da){y="Not available",F=i}j=F||!c.lineNumber||!c.fileName||!c.stack?{message:c.message,name:c.name,lineNumber:r,
fileName:y,stack:c.stack||"Not available"}:c}e="Message: "+Ga(j.message)+'\nUrl: <a href="view-source:'+j.fileName+'" target="_new">'+j.fileName+"</a>\nLine: "+j.lineNumber+"\n\nBrowser stack:\n"+Ga(j.stack+"-> ")+"[end]\n\nJS stack traversal:\n"+Ga(Wg(g)+"-> ")}catch(T){e="Exception trying to expose exception! You win, we lose. "+T}d.Lj=e}return d};function jh(a,b){a.log(dh,b,h)}m.info=function(a,b){this.log(fh,a,b)};function kh(a,b){a.log(hh,b,h)}var lh={},mh=k;
function nh(a){mh||(mh=new bh(""),lh[""]=mh,mh.ql(gh));var b;if(!(b=lh[a])){b=new bh(a);var c=a.lastIndexOf("."),d=a.substr(c+1),c=nh(a.substr(0,c));c.Vj()[d]=b;b.P=c;lh[a]=b}return b};function oh(a){a=String(a);if(/^\s*$/.test(a)?0:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x10-\x1f\x80-\x9f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,"")))try{return eval("("+a+")")}catch(b){}f(Error("Invalid JSON string: "+a))};function ph(){}ph.prototype.pj=k;function qh(a){var b;if(!(b=a.pj))b={},rh(a)&&(b[0]=i,b[1]=i),b=a.pj=b;return b};var sh;function th(){}t(th,ph);function uh(a){return(a=rh(a))?new ActiveXObject(a):new XMLHttpRequest}function rh(a){if(!a.jk&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var b=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],c=0;c<b.length;c++){var d=b[c];try{return new ActiveXObject(d),a.jk=d}catch(e){}}f(Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed"))}return a.jk}sh=new th;var vh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([\\w\\d\\-\\u0100-\\uffff.%]*)(?::([0-9]+))?)?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");function wh(a){Gc.call(this);this.headers=new Tg;this.Wg=a||k}t(wh,hd);wh.prototype.M=nh("goog.net.XhrIo");var xh=/^https?$/i,yh=[];function X(a,b,c,d){var e=new wh;yh.push(e);b&&K(e,"complete",b);K(e,"ready",za(zh,e));e.send(a,c,d,h)}function zh(a){a.ja();Ya(yh,a)}m=wh.prototype;m.hc=l;m.F=k;m.Vg=k;m.Te="";m.yk="";m.Qe=0;m.Re="";m.vh=l;m.eg=l;m.Jh=l;m.cd=l;m.Og=0;m.qd=k;m.Dg="";m.Ko=l;
m.send=function(a,b,c,d){this.F&&f(Error("[goog.net.XhrIo] Object is active with another request"));b=b?b.toUpperCase():"GET";this.Te=a;this.Re="";this.Qe=0;this.yk=b;this.vh=l;this.hc=i;this.F=this.Wg?uh(this.Wg):uh(sh);this.Vg=this.Wg?qh(this.Wg):qh(sh);this.F.onreadystatechange=q(this.Wk,this);try{kh(this.M,Ah(this,"Opening Xhr")),this.Jh=i,this.F.open(b,a,i),this.Jh=l}catch(e){kh(this.M,Ah(this,"Error opening Xhr: "+e.message));Bh(this,e);return}var a=c||"",g=this.headers.clone();d&&Sg(d,function(a,
b){g.set(b,a)});d=n.FormData&&a instanceof n.FormData;"POST"==b&&(!g.zd("Content-Type")&&!d)&&g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");Sg(g,function(a,b){this.F.setRequestHeader(b,a)},this);this.Dg&&(this.F.responseType=this.Dg);"withCredentials"in this.F&&(this.F.withCredentials=this.Ko);try{this.qd&&(jd.clearTimeout(this.qd),this.qd=k),0<this.Og&&(kh(this.M,Ah(this,"Will abort after "+this.Og+"ms if incomplete")),this.qd=jd.setTimeout(q(this.je,this),this.Og)),kh(this.M,
Ah(this,"Sending request")),this.eg=i,this.F.send(a),this.eg=l}catch(j){kh(this.M,Ah(this,"Send error: "+j.message)),Bh(this,j)}};m.je=function(){"undefined"!=typeof fa&&this.F&&(this.Re="Timed out after "+this.Og+"ms, aborting",this.Qe=8,kh(this.M,Ah(this,this.Re)),this.dispatchEvent("timeout"),this.abort(8))};function Bh(a,b){a.hc=l;a.F&&(a.cd=i,a.F.abort(),a.cd=l);a.Re=b;a.Qe=5;Ch(a);Dh(a)}function Ch(a){a.vh||(a.vh=i,a.dispatchEvent("complete"),a.dispatchEvent("error"))}
m.abort=function(a){this.F&&this.hc&&(kh(this.M,Ah(this,"Aborting")),this.hc=l,this.cd=i,this.F.abort(),this.cd=l,this.Qe=a||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Dh(this))};m.q=function(){this.F&&(this.hc&&(this.hc=l,this.cd=i,this.F.abort(),this.cd=l),Dh(this,i));wh.f.q.call(this)};m.Wk=function(){!this.Jh&&!this.eg&&!this.cd?this.zn():Eh(this)};m.zn=function(){Eh(this)};
function Eh(a){if(a.hc&&"undefined"!=typeof fa)if(a.Vg[1]&&4==Fh(a)&&2==Gh(a))kh(a.M,Ah(a,"Local request error detected and ignored"));else if(a.eg&&4==Fh(a))jd.setTimeout(q(a.Wk,a),0);else if(a.dispatchEvent("readystatechange"),4==Fh(a)){kh(a.M,Ah(a,"Request complete"));a.hc=l;try{var b=Gh(a),c,d;a:switch(b){case 200:case 201:case 202:case 204:case 304:case 1223:d=i;break a;default:d=l}if(!(c=d)){var e;if(e=0===b){var g=String(a.Te).match(vh)[1]||k;if(!g&&self.location)var j=self.location.protocol,
g=j.substr(0,j.length-1);e=!xh.test(g?g.toLowerCase():"")}c=e}if(c)a.dispatchEvent("complete"),a.dispatchEvent("success");else{a.Qe=6;var p;try{p=2<Fh(a)?a.F.statusText:""}catch(r){kh(a.M,"Can not get status: "+r.message),p=""}a.Re=p+" ["+Gh(a)+"]";Ch(a)}}finally{Dh(a)}}}
function Dh(a,b){if(a.F){var c=a.F,d=a.Vg[0]?ha:k;a.F=k;a.Vg=k;a.qd&&(jd.clearTimeout(a.qd),a.qd=k);b||a.dispatchEvent("ready");try{c.onreadystatechange=d}catch(e){jh(a.M,"Problem encountered resetting onreadystatechange: "+e.message)}}}m.oc=function(){return!!this.F};function Fh(a){return a.F?a.F.readyState:0}function Gh(a){try{return 2<Fh(a)?a.F.status:-1}catch(b){return a.M.log(eh,"Can not get status: "+b.message,h),-1}}function Y(a){if(a.F)return oh(a.F.responseText)}
function Hh(a){try{if(!a.F)return k;if("response"in a.F)return a.F.response;switch(a.Dg){case "":case "text":return a.F.responseText;case "arraybuffer":if("mozResponseArrayBuffer"in a.F)return a.F.mozResponseArrayBuffer}jh(a.M,"Response type "+a.Dg+" is not supported on this browser");return k}catch(b){return kh(a.M,"Can not get response: "+b.message),k}}function Ah(a,b){return b+" ["+a.yk+" "+a.Te+" "+Gh(a)+"]"};function U(){M.call(this);this.Qb=[];this.xd={};this.subscribe(Jf,this.Sc,this)}t(U,M);ia(U);U.prototype.get=function(a){return this.xd[a]};function Uf(a,b){if(a.l&&a.l.e()&&!a.l.e().ended&&(b&&!a.l.J||!b))return a.l;if(a.Pe&&a.Pe.e()&&(b&&!a.Pe.J||!b))return a.Pe;for(var c=k,d=k,e=0;!d&&e<a.Qb.length;)d=(c=!a.Qb[e].J?a.Qb[e]:k)&&c.e(),e++;!c&&a.Qb.length&&(c=a.Qb[0]);return c}U.prototype.Sh=function(a){Rb(a,q(function(a){this.Ff(a)},this))};
U.prototype.Ff=function(a){var b=new qg(a);this.Qb.push(b);this.xd[a.id]=b;b.J&&(this.J=b);this.c(Lf,b);return b};
function Ih(a,b){u(b,q(function(a){var b=Qg(S.a(),a.user),e=S.a();Va(e.tg,function(a){return a.id==b.id})||e.tg.push(b);var e=this.xd[a.channel_id],g=a.media[0]?gg(fg.a(),a.media[0]):k,j=yd(a.tune_in+"Z"),p=a.tune_out?yd(a.tune_out+"Z"):k,a=new og(a.id,b,e,j,p);b.Vc=a;if(e){e.Df.push(a);e.c(tg,a);var r=e.e()}else g&&(r=ig(g));b.id!=S.a().d.id&&(r&&r.media.c(dg,b,e),S.a().c(Og,b,i))},a))}
U.prototype.Sc=function(a,b){if(a&&!this.l||a&&this.l&&this.l.id!=a.id)if(this.Pe=this.l,this.l=a,S.a().d.D){var c=a.e(),d=c&&!Ub(c.media.$d);X("/_changechannel",Be(),"POST","channel="+a.id+"&friends="+d+"&media_id"+c.media.id+(b?"&forced=true":""));pg.a().Sc(a,this.Pe)}};function Rf(){var a=U.a();if(!a.J){var b=S.a().d;a.J=new qg({id:b.id||"temp",name:b.name?b.name.split(" ")[0]+"'s Channel":"My Channel",Ip:i})}return a.J}var Jf="change-channel",Mf="next-program",Lf="add-channel",Kf="resize";function Jh(){R.call(this);this.mc=new Ff("Guide");xf(this.mc,16,i);this.Fc=new Ff("Sidebar");xf(this.Fc,16,i);this.vc=new Ff("Next");this.Ya=new Ff("Play");xf(this.Ya,16,i);this.ne=new Ff("Volume");xf(this.ne,16,i);this.wd=new Ff("Admin");xf(this.wd,16,i);this.Ne=new Ff("Info")}t(Jh,R);m=Jh.prototype;
m.B=function(){Jh.f.B.call(this);this.Op=C("right",this.b());this.qb=C("progress",this.b());this.pl=C("seek",this.b());this.Ja=C("elapsed",this.b());this.Co=C("title",this.b());this.Kj=C("duration",this.b());this.pp=C("current-time",this.b());Ve(this,this.mc);this.mc.i(B("guide-toggle"));wf(this.mc,z(this.b(),"guide-toggled"));Ve(this,this.Fc);this.Fc.i(B("sidebar-toggle"));wf(this.Fc,z(this.b(),"sidebar-toggled"));Ve(this,this.vc);this.vc.i(C("next",this.b()));Ve(this,this.Ya);this.Ya.i(C("play",
this.b()));Ve(this,this.ne);this.ne.i(C("volume",this.b()));Ve(this,this.Ne);S.a();this.Ne.i(B("info-toggle"));EMBED||O(this.Ne.b(),i);Ve(this,this.wd);this.wd.i(B("admin-toggle"));S.a().subscribe("logged-in",function(){O(this.wd.b(),Hf(S.a().d));EMBED||O(this.Ne.b(),!Hf(S.a().d))},this);var a=new Kh(this.zo,1E3,this);this.resize();this.r=new pe(this.pl);this.r.da(l);var b=this.qb,c=this.Ja,d=this.Kj;this.r.Be=function(a){if(0<a&&a<Q(b).width){this.target.style.left=a+"px";c.style.width=a+"px";var a=
a/Q(b).width,g=V.a().e().media.duration;G(d,Lh(Math.round(a*g).toString())+" / "+Lh(g.toString()))}};P(P(P(P(P(P(P(P(P(P(P(P(this.h(),window,"resize",q(this.resize,this)),this.mc,"action",q(function(b){IPAD&&(b.preventDefault(),b.stopPropagation(),alert("The guide is not available yet on iPads."));a.Vf()},this)),this.Fc,"action",q(function(a){a.stopPropagation();N.a().c(pd,ef(this.Fc))},this)),this.vc,"action",q(function(a){a.stopPropagation();U.a().l.rg=i;if(a=V.a().e())a.ended=i;(a=U.a().l.e())?
U.a().c(Mf,a):U.a().c(Jf,Uf(U.a()),i);this.vc.da(Sf(U.a().l)||EMBED)},this)),this.Ya,"action",q(function(a){a.stopPropagation();N.a().c(rd,!ef(this.Ya));this.resize()},this)),this.Ne,"action",q(function(a){a.stopPropagation();N.a().c("toggle-info")},this)),this.ne,"action",q(function(a){a.stopPropagation();N.a().c("mute",ef(this.ne))},this)),this.wd,"action",q(function(a){a.stopPropagation();N.a().c("toggle-admin",ef(this.wd));this.resize()},this)),ld.a().ue,kd,q(function(){if(V.a().e()){var a=V.a().getCurrentTime()/
V.a().e().media.duration,b=V.a().e().media.duration-V.a().getCurrentTime();2>b&&V.a().c(Mh);10>b&&9<b&&V.a().c(Nh);z(this.qb,"drag")||(G(this.Kj,(V.a().getCurrentTime()?Lh(V.a().getCurrentTime().toString())+" / ":"")+Lh(V.a().e().media.duration.toString())),ee(this.Ja,this.qi?a*this.qi:0))}},this)),this.qb,"click",q(function(a){!z(this.qb,"drag")&&V.a().e()&&(a=a.offsetX/Q(this.qb).width*V.a().e().media.duration,x(this.Ja,"animate"),V.a().c(Oh,a),L(q(function(){w(this.Ja,"animate")},this),1E3))},
this)),this.r,"beforedrag",q(function(){w(this.qb,"drag")},this)),this.r,"end",q(function(a){this.pl.style.left="";a=a.left/Q(this.qb).width*V.a().e().media.duration;x(this.Ja,"animate");V.a().c(Oh,a);L(q(function(){x(this.qb,"drag");w(this.Ja,"animate")},this),1E3)},this));IPAD&&this.mc.da(l);V.a().subscribe(Nf,function(a){x(this.Ja,"animate");Ph(this,a,i)},this);U.a().subscribe(Jf,function(){x(this.Ja,"animate");x(this.b(),"window");L(q(this.resize,this),1E3);this.vc.da(Sf(U.a().l)||EMBED);U.a().l.e()&&
Ph(this,U.a().l.e(),i)},this);U.a().subscribe(Mf,function(a){this.resize();x(this.Ja,"animate");this.vc.da(Sf(U.a().l)||EMBED);Ph(this,a,i)},this);N.a().subscribe("mute",this.jn,this);N.a().subscribe(qd,this.Pg,this);N.a().subscribe(pd,function(a){wf(this.Fc,a);A(this.b(),"sidebar-toggled",a);this.resize()},this);N.a().subscribe(rd,function(a){wf(this.Ya,!a)},this);V.a().subscribe(Qh,function(){U.a().l.J&&V.a().e()&&this.vc.da(Sf(U.a().l)||EMBED);this.r.da(i);w(this.Ja,"animate");this.resize()},this);
Rf().subscribe(sg,function(){this.vc.da(Sf(U.a().l))},this)};function Ph(a,b,c){G(a.Co,b.media.name.toUpperCase());c&&(x(a.Ja,"animate"),ee(a.Ja,0),L(q(function(){w(this.Ja,"animate")},a),1E3))}m.jn=function(a){wf(this.ne,a)};m.zo=function(){var a=ef(this.mc);N.a().c(qd,a)};m.Pg=function(a){wf(this.mc,a);a&&(x(this.b(),"window"),x(this.b(),"collapsed"),L(q(this.resize,this)));L(q(function(){A(this.b(),"guide-toggled",a);a||(U.a().l&&U.a().l.e(),w(this.b(),"collapsed"),this.resize())},this),a?0:600)};
m.resize=function(){if(!U.a().l.J&&!N.a().ec){O(this.qb,l);var a=B("guide"),b=C("current",a),b=cc("program",b),a=(b=b[b.length-1])?Xd(a).x+Xd(b).x+Q(b).width+210:9999999,a=Math.min(D().width-200,Math.max(100,D().width-a)),c=z(this.b(),"collapsed")&&!!b&&a<D().width-203;L(q(function(){A(this.b(),"window",c&&z(this.b(),"collapsed"))},this),400)}V.a().e()&&(O(this.qb,i),Ph(this,V.a().e()),this.qi=D().width-(ef(this.Fc)?580:260)-(EMBED?5:50),ee(this.qb,this.qi))};function Rh(a){this.id=a.id;this.n=Qg(S.a(),a.user);this.type=a.type;this.$=a.comment?new Sh(a.comment):k;this.$a=a.read;this.rb=(this.time=a.time?yd(a.time+"Z"):k)?md(this.time.getTime()):k}Rh.prototype.Kg=function(){X("/_notification",Be(),"POST","id="+this.id+"&read=1");this.$a=i};function Th(a){return'<div class="notification"><a href="#user:'+J(a.T.id)+'"><div class="picture" style="background:'+J(a.T.color)+'"><img src="'+J(a.T.Q)+'"/></div></a><div class="body"><div class="type"><a class="user" href="#user:'+J(a.T.id)+'">'+J(a.T.name)+"</a> "+("reply"==a.Xh.type?"replied to your comment":"")+("mention"==a.Xh.type?"mentioned you in a comment":"")+'</div><div class="texts"><div class="text">'+J(a.text)+'<div class="timestamp">'+J(a.Xh.rb)+"</div></div></div></div></div>"}
;function Uh(){R.call(this);this.Yd=[];this.Ok={};this.Td={};this.pa=0;this.w=new Ff("Notifications");xf(this.w,16,i);this.m=0}t(Uh,R);
Uh.prototype.v=function(a){Uh.f.v.call(this,a);this.w.i(C("toggle",this.b()));this.$l=C("container",this.b());this.Xe=C("notes",this.b());this.t=E("div","spinner");this.Xe.appendChild(this.t);O(this.t,i);this.qg=E("div","no-comments","No Notifications");this.Xe.appendChild(this.qg);O(this.qg,l);S.a().subscribe("new-notification",function(a){Vh(this,a,i);G(this.w.b().firstChild,0<++this.m?this.m.toString():"")},this);P(P(P(this.h(),this.w.b(),"click",q(function(){A(this.b(),"show",ef(this.w))},this)),
this.Xe,"click",q(function(a){a.preventDefault();a.stopPropagation()},this)),window,"click",q(function(a){ef(this.w)&&(xc(a.target,"notifications")||L(q(function(){x(this.b(),"show");wf(this.w,l)},this)))},this));X("/_notification",q(function(a){O(this.t,l);a=Y(a.target);a=Ra(a,function(a){return!!a});this.m=0;this.Yd=Sa(a,function(a){a=new Rh(a);this.m+=!a.$a?1:0;Vh(this,a);return a},this);O(this.qg,!this.Yd.length);G(this.w.b().firstChild,0<this.m?this.m.toString():"")},this))};
function Vh(a,b,c){if(b.$){O(a.qg,l);var d,e=b.$.text.replace(/@\[(\d+):([a-zA-z\s]+)\]/g,function(a,b,c){return c}),e=H(Th,{Xh:b,text:e,T:b.$.n});c?jc(a.Xe,e,2):a.Xe.appendChild(e);a.Ok[b.id]=e;d=a.Td[b.$.media.id]||[];d.push(b);a.Td[b.$.media.id]=d;d=C("timestamp",e);A(e,"unread",!b.$a);P(a.h(),e,"click",q(function(){b.$a||u(this.Td[b.$.media.id]||[],function(a){a.Kg();G(this.w.b().firstChild,0<--this.m?this.m.toString():"");(a=this.Ok[a.id])&&x(a,"unread")},this);Z.a().c(Kg,b.$.media)},a));nd(ld.a(),
b.time,d);c&&(a=B("mp3-4"),a.load(),a.play())}};function Wh(a){return(a.link?'<a href="'+J(a.link)+'">':"")+'<div class="note'+(a.Ih?" pic":"")+'">'+(a.Ih?'<div class="picture"><img class="image" src='+J(a.Ih)+' style="display: none"/></div>':"")+'<div class="action">'+(a.n?J(a.n.name)+" ":"")+J(a.action)+'</div><div class="content">'+J(a.content)+'</div><div class="close"></div></div>'+(a.link?"</a>":"")};function Xh(){R.call(this)}t(Xh,R);Xh.prototype.W=function(){this.g=E("div",{id:"notify"})};Xh.prototype.v=function(a){Xh.f.v.call(this,a);Zf.a().subscribe("flash",function(a,c,d,e,g){this.Mg(i,a,c,d,e,g)},this);Zf.a().subscribe("show",function(a,c,d,e,g){this.Mg(l,a,c,d,e,g)},this)};
Xh.prototype.Mg=function(a,b,c,d,e,g){var j=H(Wh,{action:b,content:c,n:d,Ih:e,link:g}),p=C("image",j);C("close",j);P(P(this.h(),C("close",j),"click",function(a){a.preventDefault();a.stopPropagation();kc(j)}),p,"load",function(){O(p,i);L(function(){p.style.marginLeft=-1*p.clientWidth/2+"px";p.style.marginTop=-1*p.clientHeight/2+"px"})});this.b().appendChild(j);var r=C("note",j);L(function(){r&&(w(r,"show"),a?L(function(){x(r,"show");w(r,"fade-out");L(function(){kc(j)},5100)},3E3):L(function(){w(r,
"dim")},3E3))})};function V(){M.call(this);this.subscribe(Nf,function(a){Rf().c(rg,a);S.a().d.D&&(X("/_addprogram",Be(),"POST","channel_id="+U.a().J.id+"&media_id="+a.media.id+"&async=true"),pg.a(),_gaq.push(["_trackEvent","Media","Play",a.media.id]),_gaq.push(["_trackEvent","Users","Play",S.a().d.id]))},this);this.subscribe(Qh,function(a){S.a().d.D&&X("/_started",Be(),"POST","media_id="+a.id)},this)}t(V,M);ia(V);m=V.prototype;m.Fi=ba("A");m.ee=ba("jc");m.e=ca("jc");
m.getCurrentTime=function(){return this.A&&this.A.getCurrentTime?this.A.getCurrentTime():0};m.Zf=function(){return this.A&&this.A.getCurrentTime?this.A.getCurrentTime():0};var Mh="before-end",Nf="play-async",Qh="playing",Oh="seek",Nh="ten-seconds";function Yh(a){return'<div class="send-suggestion"><div class="picture"><img src="https://graph.facebook.com/'+J(a.id)+'/picture"></div><div class="name">'+J(a.name)+'</div><div class="sent-notice">Sent!</div></div>'};function Zh(){ye.call(this);this.queue=[]}t(Zh,ye);Zh.prototype.add=function(a){Xa(this.queue,a)||(this.queue.push(a),K(a,"finish",this.Pk,l,this))};Zh.prototype.remove=function(a){Ya(this.queue,a)&&bd(a,"finish",this.Pk,l,this)};Zh.prototype.q=function(){u(this.queue,function(a){a.ja()});this.queue.length=0;Zh.f.q.call(this)};function $h(){Zh.call(this);this.hb=0}t($h,Zh);
$h.prototype.play=function(a){if(0==this.queue.length)return l;if(a||this.o==ze)this.hb<this.queue.length&&this.queue[this.hb].o!=ze&&this.queue[this.hb].stop(l),this.hb=0,this.xc();else if(1==this.o)return l;this.Ha("play");-1==this.o&&this.Ha("resume");this.startTime=s();this.Fe=k;this.o=1;this.queue[this.hb].play(a);return i};
$h.prototype.stop=function(a){this.o=ze;this.Fe=s();if(a)for(a=this.hb;a<this.queue.length;++a){var b=this.queue[a];b.o==ze&&b.play();b.o==ze||b.stop(i)}else this.hb<this.queue.length&&this.queue[this.hb].stop(l);this.Ha("stop");this.yc()};$h.prototype.Pk=function(){1==this.o&&(this.hb++,this.hb<this.queue.length?this.queue[this.hb].play():(this.Fe=s(),this.o=ze,this.Ha("finish"),this.yc()))};function ai(a){return a*a*a}function bi(a){return 1-Math.pow(1-a,3)};function ci(a,b){var c;if(a instanceof ci)this.Va=ka(b)?b:a.Va,di(this,a.be),c=a.Sg,ei(this),this.Sg=c,c=a.De,ei(this),this.De=c,fi(this,a.Ag),c=a.xg,ei(this),this.xg=c,gi(this,a.Cc.clone()),c=a.Yf,ei(this),this.Yf=c;else if(a&&(c=String(a).match(vh))){this.Va=!!b;di(this,c[1]||"",i);var d=c[2]||"";ei(this);this.Sg=d?decodeURIComponent(d):"";d=c[3]||"";ei(this);this.De=d?decodeURIComponent(d):"";fi(this,c[4]);d=c[5]||"";ei(this);this.xg=d?decodeURIComponent(d):"";gi(this,c[6]||"",i);c=c[7]||"";ei(this);
this.Yf=c?decodeURIComponent(c):""}else this.Va=!!b,this.Cc=new hi(k,0,this.Va)}m=ci.prototype;m.be="";m.Sg="";m.De="";m.Ag=k;m.xg="";m.Yf="";m.Tm=l;m.Va=l;
m.toString=function(){var a=[],b=this.be;b&&a.push(ii(b,ji),":");if(b=this.De){a.push("//");var c=this.Sg;c&&a.push(ii(c,ji),"@");a.push(encodeURIComponent(String(b)));b=this.Ag;b!=k&&a.push(":",String(b))}if(b=this.xg)this.De&&"/"!=b.charAt(0)&&a.push("/"),a.push(ii(b,"/"==b.charAt(0)?ki:li));(b=this.Cc.toString())&&a.push("?",b);(b=this.Yf)&&a.push("#",ii(b,mi));return a.join("")};m.clone=function(){return new ci(this)};
function di(a,b,c){ei(a);a.be=c?b?decodeURIComponent(b):"":b;a.be&&(a.be=a.be.replace(/:$/,""))}function fi(a,b){ei(a);b?(b=Number(b),(isNaN(b)||0>b)&&f(Error("Bad port number "+b)),a.Ag=b):a.Ag=k}function gi(a,b,c){ei(a);b instanceof hi?(a.Cc=b,a.Cc.Di(a.Va)):(c||(b=ii(b,ni)),a.Cc=new hi(b,0,a.Va))}function oi(a,b,c){ei(a);la(c)||(c=[String(c)]);pi(a.Cc,b,c)}function ei(a){a.Tm&&f(Error("Tried to modify a read-only Uri"))}m.Di=function(a){this.Va=a;this.Cc&&this.Cc.Di(a);return this};
function ii(a,b){return na(a)?encodeURI(a).replace(b,qi):k}function qi(a){a=a.charCodeAt(0);return"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var ji=/[#\/\?@]/g,li=/[\#\?:]/g,ki=/[\#\?]/g,ni=/[\#\?@]/g,mi=/#/g;function hi(a,b,c){this.Ka=a||k;this.Va=!!c}
function ri(a){if(!a.aa&&(a.aa=new Tg,a.m=0,a.Ka))for(var b=a.Ka.split("&"),c=0;c<b.length;c++){var d=b[c].indexOf("="),e=k,g=k;0<=d?(e=b[c].substring(0,d),g=b[c].substring(d+1)):e=b[c];e=decodeURIComponent(e.replace(/\+/g," "));e=si(a,e);a.add(e,g?decodeURIComponent(g.replace(/\+/g," ")):"")}}m=hi.prototype;m.aa=k;m.m=k;m.add=function(a,b){ri(this);this.Ka=k;var a=si(this,a),c=this.aa.get(a);c||this.aa.set(a,c=[]);c.push(b);this.m++;return this};
m.remove=function(a){ri(this);a=si(this,a);return this.aa.zd(a)?(this.Ka=k,this.m-=this.aa.get(a).length,this.aa.remove(a)):l};m.clear=function(){this.aa=this.Ka=k;this.m=0};m.zd=function(a){ri(this);a=si(this,a);return this.aa.zd(a)};m.Ld=function(){ri(this);for(var a=this.aa.Vb(),b=this.aa.Ld(),c=[],d=0;d<b.length;d++)for(var e=a[d],g=0;g<e.length;g++)c.push(b[d]);return c};
m.Vb=function(a){ri(this);var b=[];if(a)this.zd(a)&&(b=ab(b,this.aa.get(si(this,a))));else for(var a=this.aa.Vb(),c=0;c<a.length;c++)b=ab(b,a[c]);return b};m.set=function(a,b){ri(this);this.Ka=k;a=si(this,a);this.zd(a)&&(this.m-=this.aa.get(a).length);this.aa.set(a,[b]);this.m++;return this};m.get=function(a,b){var c=a?this.Vb(a):[];return 0<c.length?String(c[0]):b};function pi(a,b,c){a.remove(b);0<c.length&&(a.Ka=k,a.aa.set(si(a,b),bb(c)),a.m+=c.length)}
m.toString=function(){if(this.Ka)return this.Ka;if(!this.aa)return"";for(var a=[],b=this.aa.Ld(),c=0;c<b.length;c++)for(var d=b[c],e=encodeURIComponent(String(d)),d=this.Vb(d),g=0;g<d.length;g++){var j=e;""!==d[g]&&(j+="="+encodeURIComponent(String(d[g])));a.push(j)}return this.Ka=a.join("&")};m.clone=function(){var a=new hi;a.Ka=this.Ka;this.aa&&(a.aa=this.aa.clone());return a};function si(a,b){var c=String(b);a.Va&&(c=c.toLowerCase());return c}
m.Di=function(a){a&&!this.Va&&(ri(this),this.Ka=k,Sg(this.aa,function(a,c){var d=c.toLowerCase();c!=d&&(this.remove(c),pi(this,d,a))},this));this.Va=a};/*
 Portions of this code are from MochiKit, received by
 The Closure Authors under the MIT license. All other code is Copyright
 2005-2009 The Closure Authors. All Rights Reserved.
*/
function ti(a,b){this.se=[];this.jp=a;this.bm=b||k}m=ti.prototype;m.Id=l;m.Je=l;m.$e=0;m.vl=l;m.Wl=l;m.Rl=0;m.bl=function(){this.$e++};m.Aj=function(a,b){ui(this,a,b);this.$e--;0==this.$e&&this.Id&&vi(this)};function ui(a,b,c){a.Id=i;a.xi=c;a.Je=!b;vi(a)}m.Rb=function(){this.Id&&(this.vl||f(new wi(this)),this.vl=l)};m.Kf=function(a){this.Rb();ui(this,i,a)};function xi(a){return Ta(a.se,function(a){return pa(a[1])})}
function vi(a){a.$i&&(a.Id&&xi(a))&&(n.clearTimeout(a.$i),delete a.$i);a.P&&(a.P.Rl--,delete a.P);for(var b=a.xi,c=l,d=l;a.se.length&&0==a.$e;){var e=a.se.shift(),g=e[0],j=e[1],e=e[2];if(g=a.Je?j:g)try{var p=g.call(e||a.bm,b);ka(p)&&(a.Je=a.Je&&(p==b||p instanceof Error),a.xi=b=p);b instanceof ti&&(d=i,a.bl())}catch(r){b=r,a.Je=i,xi(a)||(c=i)}}a.xi=b;d&&a.$e&&(d=b,p=q(a.Aj,a,i),g=q(a.Aj,a,l),d.se.push([p,g,h]),d.Id&&vi(d),b.Wl=i);c&&(a.$i=n.setTimeout(function(){f(b)},0))}
function wi(a){Ca.call(this);this.deferred=a}t(wi,Ca);wi.prototype.message="Deferred has already fired";wi.prototype.name="AlreadyCalledError";function yi(){if(this&&this.ml){var a=this.ml;a&&"SCRIPT"==a.tagName&&zi(a,i,this.je)}}function zi(a,b,c){c!=k&&n.clearTimeout(c);a.onload=ha;a.onerror=ha;a.onreadystatechange=ha;b&&window.setTimeout(function(){kc(a)},0)}function Ai(a,b){var c="Jsloader error (code #"+a+")";b&&(c+=": "+b);Ca.call(this,c);this.code=a}t(Ai,Ca);function Bi(a,b){this.Jo=new ci(a);this.Sl=b?b:"callback";this.je=5E3}var Ci=0;
Bi.prototype.send=function(a,b,c,d){var e=a||k,g=d||"_"+(Ci++).toString(36)+s().toString(36);n._callbacks_||(n._callbacks_={});a=this.Jo.clone();if(e)for(var j in e)(!e.hasOwnProperty||e.hasOwnProperty(j))&&oi(a,j,e[j]);b&&(n._callbacks_[g]=function(a){Di(g,i);b.apply(h,arguments)},oi(a,this.Sl,"_callbacks_."+g));var p=a.toString(),r={timeout:this.je,Yl:i};j=r.document||document;var y=document.createElement("SCRIPT"),a={ml:y,je:h},F=new ti(yi,a),I=k,d=r.timeout!=k?r.timeout:5E3;0<d&&(I=window.setTimeout(function(){zi(y,
i);var a=new Ai(1,"Timeout reached for loading script "+p);F.Rb();ui(F,l,a)},d),a.je=I);y.onload=y.onreadystatechange=function(){if(!y.readyState||"loaded"==y.readyState||"complete"==y.readyState)zi(y,r.Yl||l,I),F.Kf(k)};y.onerror=function(){zi(y,i,I);var a=new Ai(0,"Error while loading script "+p);F.Rb();ui(F,l,a)};ec(y,{type:"text/javascript",charset:"UTF-8",src:p});a=j.getElementsByTagName("HEAD");(!a||0==a.length?j.documentElement:a[0]).appendChild(y);F.se.push([k,function(){Di(g,l);c&&c(e)},
h]);F.Id&&vi(F);return{ya:g,qp:F}};function Di(a,b){n._callbacks_[a]&&(b?delete n._callbacks_[a]:n._callbacks_[a]=ha)};function Ei(){R.call(this);this.Hi=AUTOPLAY;this.Wh=l}t(Ei,R);m=Ei.prototype;
m.B=function(){Ei.f.B.call(this);this.qa=U.a().l;V.a().ee(this.qa&&this.qa.e());V.a().e()&&(s(),V.a().e());this.Jd=C("fullscreen",this.b());var a=C("expand",this.b());this.ge=B("stagecover");this.Hk=C("message",this.ge);this.t=C("spinner",this.ge);this.jf=C("restart",this.ge);this.Nc=C("vote",this.b());this.$b=C("like",this.b());this.Ub=C("dislike",this.b());this.Bi=C("send-suggestions",this.b());var b=new hf(document);Fi(this);V.a().e()?(DESKTOP||this.qa.J)&&Gi(this,V.a().e()):V.a().c("no-media");
P(P(P(P(P(P(P(P(P(this.h(),window,"resize",q(this.resize,this)),document,"webkitfullscreenchange",q(function(){Nb(this.Jd,"full")},this)),document,"mozfullscreenchange",q(function(){Nb(this.Jd,"full")},this)),document,"fullscreenchange",q(function(){Nb(this.Jd,"full")},this)),this.Jd,"click",q(function(a){if(z(this.Jd,"full"))document.Tl&&document.Tl(),document.webkitCancelFullScreen&&document.webkitCancelFullScreen(),document.mozCancelFullScreen&&document.mozCancelFullScreen();else{var b=C("main");
b.il&&b.il();b.webkitRequestFullScreen&&b.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT);b.mozRequestFullScreen&&b.mozRequestFullScreen()}a.stopPropagation();a.preventDefault()},this)),a,"click",q(this.Do,this)),this.b(),"mousemove",q(function(a){var b=a.offsetX/this.nb,a=a.offsetY/this.sd;if(0.6<b&&1>b&&0.7<a&&1>a&&(this.ae==YT.PlayerState.PLAYING||this.ae==YT.PlayerState.PAUSED))w(this.ge,"click-through"),L(q(function(){x(this.ge,"click-through")},this),500)},this)),b,"key",q(function(a){"32"==
a.keyCode&&("INPUT"!=a.target.tagName&&"TEXTAREA"!=a.target.tagName)&&Hi(this)},this)),this.ge,"click",q(function(a){!z(B("queue"),"show")&&(!z(B("search"),"show")&&!xc(a.target,"queue")&&!xc(a.target,"search"))&&Hi(this)},this));U.a().subscribe(Jf,this.Sc,this);U.a().subscribe(Mf,function(a){Gi(this,a);Fi(this);S.a().d.D&&X("/_play",Be(),"POST","media_id="+a.media.id+"&channel_id="+U.a().l.id)},this);V.a().subscribe(Nf,this.ji,this);V.a().subscribe(Oh,this.bo,this);V.a().subscribe(Nh,function(){if(S.a().d.D&&
"none"==this.Bi.style.display){var a=Tb(S.a().Mc),b=Math.floor(Math.random()*(a.length-1)),e=Math.floor(Math.random()*(a.length-1)),g=S.a().Mc[a[b]],j=S.a().Mc[a[e]],p=H(Yh,{id:g.id,name:g.name}),r=H(Yh,{id:j.id,name:j.name}),a=B("send-suggestions");a.innerHTML="";a.appendChild(p);a.appendChild(r);O(this.Bi,i);P(P(this.h(),p,"click",q(function(){w(p,"sent");var a=new Ii({from_user:S.a().d,to_user:g,text:"Sent you a video!",media:V.a().e().media});a.time=new zd;a.rb=md(a.time.getTime());S.a().c("new-message",
a);X("/_message",Be(),"POST","from_id="+S.a().d.id+"&to_id="+a.Ti.id+"&text="+a.text+"&media_id="+a.media.id)},this)),r,"click",q(function(){w(r,"sent");var a=new Ii({from_user:S.a().d,to_user:j,text:"Sent you a video!",media:V.a().e().media});a.time=new zd;a.rb=md(a.time.getTime());S.a().c("new-message",a);X("/_message",Be(),"POST","from_id="+S.a().d.id+"&to_id="+a.Ti.id+"&text="+a.text+"&media_id="+a.media.id)},this))}},this);V.a().subscribe(Mh,function(){Fi(this,i);S.a().d.D&&(S.a().d.Vc&&V.a().e())&&
S.a().d.Vc.mf(V.a().e().media);Ji(this);V.a().e().ended=i;Ki(this)},this);S.a().subscribe("logged-in",function(){Li(this,V.a().e().media)},this);DESKTOP&&(P(P(P(this.h(),this.jf,"click",q(function(a){a.preventDefault();a.stopPropagation();V.a().e()&&Gi(this,V.a().e())},this)),this.$b,"click",q(this.Uk,this,this.$b,i)),this.Ub,"click",q(this.Uk,this,this.Ub,l)),N.a().subscribe(pd,function(a){this.resize(a)},this),N.a().subscribe(qd,function(){L(q(this.resize,this))},this),N.a().subscribe(rd,function(a){a?
this.A.playVideo():this.A.pauseVideo();var a=C(a?"play":"pause",this.b()),b=new $h;b.add(new Oe(a,250,bi));b.add(new Ne(a,250,ai));b.play()},this),N.a().subscribe("mute",function(a){this.A&&(a?this.A.mute():this.A.unMute())},this),N.a().subscribe("restart",function(){this.A.seekTo(0)},this));this.resize()};function Hi(a){if(a.A&&a.A.getPlayerState&&DESKTOP)switch(a.A.getPlayerState()){case YT.PlayerState.PLAYING:N.a().c(rd,l);break;case YT.PlayerState.PAUSED:N.a().c(rd,i)}}
m.wo=function(){var a=C("main");return!(!a.il&&!a.webkitRequestFullScreen&&!a.mozRequestFullScreen)};m.Do=function(a){a.preventDefault();a.stopPropagation();Z.a();a=!z(B("sidebar"),"toggled");DESKTOP&&(N.a().c(pd,a),N.a().c(qd,a))};
function Gi(a,b){V.a().ee(b);a.Wm!=b.id&&(Zf.a().c("flash","Now playing",b.media.name,h,b.media.Pi,"#info:"+b.media.id),a.Wm=b.id);a.play(b.media);DESKTOP&&S.a().d.D?(Li(a,b.media),O(a.Bi,l)):(O(a.$b,l),O(a.Ub,l));"reddit"==U.a().l.id||b.media.gf?(O(C("reddit",a.Nc),l),(new Bi("http://www.reddit.com/api/info.json","jsonp")).send(b.media.gf?{id:b.media.gf}:{url:"www.youtube.com/watch?v="+b.media.Xb},q(function(a){if(a.data&&a.data.children.length){O(C("reddit",this.Nc),i);this.si=a.data.children[0].kind+
"_"+a.data.children[0].data.id;this.Mp=a.data.modhash;var b=a.data.children[0].data.score;G(C("score",this.Nc),b);C("reddit-link",this.Nc).href="http://www.reddit.com"+a.data.children[0].data.permalink}},a))):(a.si=k,O(C("reddit",a.Nc),l))}
m.play=function(a,b){V.a().e().async?V.a().e():(s(),V.a().e());!this.A||!this.A.loadVideoById?(this.A=new YT.Player("ytplayer",{height:D().height-40,width:D().width,videoId:a?a.Xb:k,playerVars:{controls:0,showinfo:0,iv_load_policy:3,modestbranding:1,wmode:"opaque",origin:HOST_URL,enablejsapi:1,rel:0,html5:HTML5?1:0},events:{onStateChange:q(this.Ln,this),onReady:q(this.yn,this),onError:q(this.xn,this)}}),V.a().Fi(this.A)):a?this.A.cueVideoById(a.Xb,h,"large"):b&&this.A.cuePlaylist(Sa(b.R,function(a){return a.media.Xb}),
b.la)};m.resize=function(){if(IPHONE)ee(this.b(),D().width-320);else{var a=B("stagecover"),b=C("message",a),c=B("guide").style.height,c=c.substring(0,c.length-2),c=N.a().bd?c:40,d=N.a().pf?320:0;this.sd=D().height-c;this.nb=D().width-d;de(this.b(),D().height-c);ee(this.b(),D().width-d);de(a,D().height-c);ee(a,D().width-d);a=Q(b);Qd(b,{"margin-left":-a.width/2+"px","margin-top":-a.height/2+"px"});A(this.Jd,"full",this.wo&&(document.fullScreen||document.webkitIsFullScreen||document.Gp))}};
m.Sc=function(a){if(a=a.e())Gi(this,a),S.a().d.D&&X("/_play",Be(),"POST","media_id="+a.media.id+"&channel_id="+U.a().l.id);Fi(this)};function Ji(a){A(a.$b,"checked",l);A(a.Ub,"checked",l)}function Li(a,b){O(a.$b,i);O(a.Ub,i);X("/_like/"+b.id,q(function(a){a=Y(a.target);A(this.$b,"checked",a.liked||z(this.$b,"checked"));A(this.Ub,"checked",a.disliked||z(this.Ub,"checked"))},a))}
m.Uk=function(a,b,c){c.preventDefault();c.stopPropagation();V.a().e()&&(a=Nb(a,"checked"),(c=b&&z(this.Ub,"checked")||!b&&z(this.$b,"checked"))&&x(b?this.Ub:this.$b,"checked"),X(b?"/_like":"/_dislike",h,"POST","media_id="+V.a().e().media.id+(!a?"&delete=1":"")+(c?"&flip=1":"")+(this.si?"&reddit_id="+this.si+"&modhash="+this.Np:"")))};m.ji=function(a){Gi(this,a);Fi(this);S.a().d.D&&(X("/_play",Be(),"POST","media_id="+a.media.id+"&channel_id="+U.a().l.id),X("/_optin",Be(),"POST","media_id="+a.media.id))};
m.bo=function(a){this.A.seekTo&&this.A.seekTo(a,i)};m.Ln=function(a){this.ae=a.data;Fi(this);switch(a.data){case YT.PlayerState.CUED:this.A.playVideo();N.a().c(rd,i);break;case YT.PlayerState.PLAYING:this.Hi?(this.Wh=l,this.A.unMute(),V.a().c(Qh,V.a().e().media)):(this.Hi=i,this.A.pauseVideo(),N.a().c(rd,l));break;case YT.PlayerState.ENDED:S.a().d.D&&(S.a().d.Vc&&V.a().e())&&S.a().d.Vc.mf(V.a().e().media),Ji(this),V.a().e().ended=i,Ki(this)}};
m.yn=function(){this.A.setPlaybackQuality("large");this.A.playVideo();this.Hi?N.a().c("mute",this.A.isMuted()):this.A.mute()};m.xn=function(a){100==a?Ki(this):(V.a().c("no-media"),Fi(this,h,i))};
function Fi(a,b,c){if(!IPHONE){var d=B("stagecover"),e=V.a().e()?V.a().getCurrentTime():0;c?(O(a.t,l),O(a.jf,i),w(d,"covered")):(!V.a().e()||V.a().e()&&e>V.a().e().media.duration?(V.a().c("no-media"),G(a.Hk.firstChild,Mi),O(a.t,l),O(a.jf,l),O(a.Nc,l),w(d,"covered")):(a.ae==YT.PlayerState.PLAYING&&0<a.A.getCurrentTime()||a.ae==YT.PlayerState.PAUSED&&0<a.A.getCurrentTime())&&!b?(O(a.t,l),O(a.jf,l),x(d,"covered"),O(a.Nc,S.a().d.D||"reddit"==U.a().l.id||V.a().e().media.gf)):(G(a.Hk.firstChild,Ni),O(a.t,
i),O(a.jf,l),O(a.Nc,S.a().d.D||"reddit"==U.a().l.id||V.a().e().media.gf),w(d,"covered"),a.ae==YT.PlayerState.PLAYING&&L(q(function(){Fi(this)},a),500)),he(d,a.ae==YT.PlayerState.BUFFERING?0.9:1),a.resize())}}function Ki(a){if(!a.Wh){var b=U.a().l.e();b?U.a().c(Mf,b):(V.a().ee(k),U.a().c(Jf,Uf(U.a()),i));a.Wh=i}}var Mi="THIS CHANNEL IS CURRENTLY OFFLINE",Ni="LOADING STORY";function Oi(a,b){R.call(this,b);this.Gb=a||""}t(Oi,R);Oi.prototype.Eb=k;var Pi="placeholder"in document.createElement("input");m=Oi.prototype;m.Ke=l;m.W=function(){this.g=this.mb().W("input",{type:"text"})};m.v=function(a){Oi.f.v.call(this,a);this.Gb||(this.Gb=a.getAttribute("label")||"");var b;a:{var c=bc(a);try{b=c&&c.activeElement;break a}catch(d){}b=k}b==a&&(this.Ke=i,x(this.b(),this.oe));Pi?this.b().placeholder=this.Gb:this.b().setAttribute("aria-label",this.Gb)};
m.B=function(){Oi.f.B.call(this);var a=new Kd(this);P(a,this.b(),"focus",this.ak);P(a,this.b(),"blur",this.wm);Pi?this.C=a:(rb&&P(a,this.b(),["keypress","keydown","keyup"],this.Cm),P(a,bc(this.b())?bc(this.b()).parentWindow||bc(this.b()).defaultView:window,"load",this.Km),this.C=a,Qi(this));this.Rb();this.b().Um=this};m.$c=function(){Oi.f.$c.call(this);this.C&&(this.C.ja(),this.C=k);this.b().Um=k};function Qi(a){!a.pm&&(a.C&&a.b().form)&&(P(a.C,a.b().form,"submit",a.Fm),a.pm=i)}
m.q=function(){Oi.f.q.call(this);this.C&&(this.C.ja(),this.C=k)};m.oe="label-input-label";m.ak=function(){this.Ke=i;x(this.b(),this.oe);if(!Pi&&!Ri(this)&&!this.Rm){var a=this,b=function(){a.b().value=""};v?L(b,10):b()}};m.wm=function(){Pi||(Md(this.C,this.b(),"click",this.ak),this.Eb=k);this.Ke=l;this.Rb()};m.Cm=function(a){27==a.keyCode&&("keydown"==a.type?this.Eb=this.b().value:"keypress"==a.type?this.b().value=this.Eb:"keyup"==a.type&&(this.Eb=k),a.preventDefault())};
m.Fm=function(){Ri(this)||(this.b().value="",L(this.vm,10,this))};m.vm=function(){Ri(this)||(this.b().value=this.Gb)};m.Km=function(){this.Rb()};function Ri(a){return!!a.b()&&""!=a.b().value&&a.b().value!=a.Gb}m.clear=function(){this.b().value="";this.Eb!=k&&(this.Eb="")};m.reset=function(){Ri(this)&&(this.clear(),this.Rb())};m.Ma=function(a){this.Eb!=k&&(this.Eb=a);this.b().value=a;this.Rb()};m.z=function(){return this.Eb!=k?this.Eb:Ri(this)?this.b().value:""};
m.Rb=function(){Pi?this.b().placeholder!=this.Gb&&(this.b().placeholder=this.Gb):(Qi(this),this.b().setAttribute("aria-label",this.Gb));Ri(this)?x(this.b(),this.oe):(!this.Rm&&!this.Ke&&w(this.b(),this.oe),Pi||L(this.Yn,10,this))};m.da=function(a){this.b().disabled=!a;A(this.b(),this.oe+"-disabled",!a)};m.isEnabled=function(){return!this.b().disabled};m.Yn=function(){this.b()&&(!Ri(this)&&!this.Ke)&&(this.b().value=this.Gb)};function Si(a,b,c,d,e,g,j,p,r){var y,F;if(y=c.offsetParent){var I="HTML"==y.tagName||"BODY"==y.tagName;if(!I||"static"!=Ud(y,"position"))F=ae(y),I||(I=(I=be(y))&&rb?-y.scrollLeft:I&&(!v||!Db("8"))?y.scrollWidth-y.clientWidth-y.scrollLeft:y.scrollLeft,F=Pb(F,new Ob(I,y.scrollTop)))}y=F||new Ob;F=ge(a);if(I=$d(a)){var da=new Pd(I.left,I.top,I.right-I.left,I.bottom-I.top),I=Math.max(F.left,da.left),T=Math.min(F.left+F.width,da.left+da.width);if(I<=T){var ya=Math.max(F.top,da.top),da=Math.min(F.top+F.height,
da.top+da.height);ya<=da&&(F.left=I,F.top=ya,F.width=T-I,F.height=da-ya)}}I=$b(a);ya=$b(c);if(I.I!=ya.I){var T=I.I.body,ya=ya.I.parentWindow||ya.I.defaultView,da=new Ob(0,0),ib=bc(T)?bc(T).parentWindow||bc(T).defaultView:window,zg=T;do{var qa;if(ib==ya)qa=ae(zg);else{qa=zg;var Lb=new Ob;if(1==qa.nodeType){if(qa.getBoundingClientRect){var va=Yd(qa);Lb.x=va.left;Lb.y=va.top}else{var va=zc($b(qa)),$a=ae(qa);Lb.x=$a.x-va.x;Lb.y=$a.y-va.y}rb&&!Db(12)&&(va=h,va=h,v?va="-ms-transform":sb?va="-webkit-transform":
qb?va="-o-transform":rb&&(va="-moz-transform"),$a=h,va&&($a=Ud(qa,va)),$a||($a=Ud(qa,"transform")),$a?(qa=$a.match(oe),va=!qa?new Ob(0,0):new Ob(parseFloat(qa[1]),parseFloat(qa[2]))):va=new Ob(0,0),Lb=new Ob(Lb.x+va.x,Lb.y+va.y))}else va=pa(qa.qm),$a=qa,qa.targetTouches?$a=qa.targetTouches[0]:va&&qa.oa.targetTouches&&($a=qa.oa.targetTouches[0]),Lb.x=$a.clientX,Lb.y=$a.clientY;qa=Lb}da.x+=qa.x;da.y+=qa.y}while(ib&&ib!=ya&&(zg=ib.frameElement)&&(ib=ib.parent));T=Pb(da,ae(T));v&&!yc(I)&&(T=Pb(T,zc(I)));
F.left+=T.x;F.top+=T.y}a=(b&4&&be(a)?b^2:b)&-5;b=new Ob(a&2?F.left+F.width:F.left,a&1?F.top+F.height:F.top);b=Pb(b,y);e&&(b.x+=(a&2?-1:1)*e.x,b.y+=(a&1?-1:1)*e.y);var W;if(j)if(r)W=r;else if(W=$d(c))W.top-=y.y,W.right-=y.x,W.bottom-=y.y,W.left-=y.x;a:{r=b.clone();e=0;a=(d&4&&be(c)?d^2:d)&-5;d=Q(c);p=p?p.clone():d.clone();if(g||0!=a)a&2?r.x-=p.width+(g?g.right:0):g&&(r.x+=g.left),a&1?r.y-=p.height+(g?g.bottom:0):g&&(r.y+=g.top);if(j){if(W){g=r;e=0;if(65==(j&65)&&(g.x<W.left||g.x>=W.right))j&=-2;if(132==
(j&132)&&(g.y<W.top||g.y>=W.bottom))j&=-5;g.x<W.left&&j&1&&(g.x=W.left,e|=1);g.x<W.left&&(g.x+p.width>W.right&&j&16)&&(p.width=Math.max(p.width-(g.x+p.width-W.right),0),e|=4);g.x+p.width>W.right&&j&1&&(g.x=Math.max(W.right-p.width,W.left),e|=1);j&2&&(e|=(g.x<W.left?16:0)|(g.x+p.width>W.right?32:0));g.y<W.top&&j&4&&(g.y=W.top,e|=2);g.y>=W.top&&(g.y+p.height>W.bottom&&j&32)&&(p.height=Math.max(p.height-(g.y+p.height-W.bottom),0),e|=8);g.y+p.height>W.bottom&&j&4&&(g.y=Math.max(W.bottom-p.height,W.top),
e|=2);j&8&&(e|=(g.y<W.top?64:0)|(g.y+p.height>W.bottom?128:0));j=e}else j=256;e=j;if(e&496){c=e;break a}}Vd(c,r);if(!(d==p||(!d||!p?0:d.width==p.width&&d.height==p.height)))g=yc($b(bc(c))),v&&(!g||!Db("8"))?(j=c.style,g?(g=ke(c,"padding"),c=ne(c),j.pixelWidth=p.width-c.left-g.left-g.right-c.right,j.pixelHeight=p.height-c.top-g.top-g.bottom-c.bottom):(j.pixelWidth=p.width,j.pixelHeight=p.height)):(c=c.style,rb?c.MozBoxSizing="border-box":sb?c.WebkitBoxSizing="border-box":c.boxSizing="border-box",c.width=
Math.max(p.width,0)+"px",c.height=Math.max(p.height,0)+"px");c=e}return c};function Ti(){}Ti.prototype.Kb=aa();function Ui(a,b,c){this.element=a;this.ph=b;this.In=c}t(Ui,Ti);Ui.prototype.Kb=function(a,b,c){Si(this.element,this.ph,a,b,h,c,this.In)};function Vi(a,b,c,d){Ui.call(this,a,b);this.Xm=c?5:0;this.fi=d||h}t(Vi,Ui);Vi.prototype.Kb=function(a,b,c,d){var e=Si(this.element,this.ph,a,b,k,c,10,d,this.fi);if(e&496){var g=Wi(e,this.ph),b=Wi(e,b),e=Si(this.element,g,a,b,k,c,10,d,this.fi);e&496&&(g=Wi(e,g),b=Wi(e,b),Si(this.element,g,a,b,k,c,this.Xm,d,this.fi))}};function Wi(a,b){a&48&&(b^=2);a&192&&(b^=1);return b};function Xi(a,b){Gc.call(this);this.Y=new Kd(this);var c=a||k;Yi(this);this.g=c;b&&this.sl(b)}t(Xi,hd);m=Xi.prototype;m.g=k;m.If=i;m.nj=k;m.Pd=l;m.fo=l;m.Qh=-1;m.vk=-1;m.Mm=l;m.hm=i;m.Lc="toggle_display";m.sl=ba("Lc");m.b=ca("g");function Yi(a){a.Pd&&f(Error("Can not change this state of the popup while showing."))}m.Fb=ca("Pd");m.Ca=function(a){this.of&&this.of.stop();this.Me&&this.Me.stop();a?this.Mg():this.Nd()};m.Kb=ha;
m.Mg=function(){if(!this.Pd&&this.dispatchEvent("beforeshow")){this.g||f(Error("Caller must call setElement before trying to show the popup"));this.Kb();var a=bc(this.g);this.Mm&&P(this.Y,a,"keydown",this.qn,i);if(this.If)if(P(this.Y,a,"mousedown",this.Tk,i),v){var b;try{b=a.activeElement}catch(c){}for(;b&&"IFRAME"==b.nodeName;){try{var d=b.contentDocument||b.contentWindow.document}catch(e){break}a=d;b=a.activeElement}P(this.Y,a,"mousedown",this.Tk,i);P(this.Y,a,"deactivate",this.Sk)}else P(this.Y,
a,"blur",this.Sk);"toggle_display"==this.Lc?(this.g.style.visibility="visible",O(this.g,i)):"move_offscreen"==this.Lc&&this.Kb();this.Pd=i;this.of?(ad(this.of,"end",this.Yk,l,this),this.of.play()):this.Yk()}};m.Nd=function(a){if(!this.Pd||!this.dispatchEvent({type:"beforehide",target:a}))return l;this.Y&&Nd(this.Y);this.Pd=l;this.vk=s();this.Me?(ad(this.Me,"end",za(this.zj,a),l,this),this.Me.play()):this.zj(a);return i};
m.zj=function(a){"toggle_display"==this.Lc?this.fo?L(this.ik,0,this):this.ik():"move_offscreen"==this.Lc&&(this.g.style.top="-10000px");this.dispatchEvent({type:"hide",target:a})};m.ik=function(){this.g.style.visibility="hidden";O(this.g,l)};m.Yk=function(){this.Qh=s();this.vk=-1;this.dispatchEvent("show")};m.Tk=function(a){a=a.target;!pc(this.g,a)&&((!this.nj||pc(this.nj,a))&&!(150>s()-this.Qh))&&this.Nd(a)};m.qn=function(a){27==a.keyCode&&this.Nd(a.target)&&(a.preventDefault(),a.stopPropagation())};
m.Sk=function(a){if(this.hm){var b=bc(this.g);if(v||qb){if(a=b.activeElement,!a||pc(this.g,a)||"BODY"==a.tagName)return}else if(a.target!=b)return;150>s()-this.Qh||this.Nd()}};m.q=function(){Xi.f.q.call(this);this.Y.ja();Kc(this.of);Kc(this.Me);delete this.g;delete this.Y};function Zi(a,b){this.dl=4;this.li=b||h;Xi.call(this,a)}t(Zi,Xi);function $i(a,b){a.dl=b;a.Fb()&&a.Kb()}function aj(a,b){a.li=b||h;a.Fb()&&a.Kb()}function bj(a,b,c,d,e){a.cn=b==k||b instanceof Od?b:new Od(b,c,d,e);a.Fb()&&a.Kb()}Zi.prototype.Kb=function(){if(this.li){var a=!this.Fb()&&"move_offscreen"!=this.Lc,b=this.b();a&&(b.style.visibility="hidden",O(b,i));this.li.Kb(b,this.dl,this.cn);a&&O(b,l)}};function cj(a,b,c){Gc.call(this);this.rc=a;this.ga=b;this.Y=c;this.gh=q(this.Fn,this)}t(cj,Gc);var Kh=cj;m=cj.prototype;m.Lg=l;m.al=0;m.Da=k;m.Vf=function(){!this.Da&&!this.al?this.Ce():this.Lg=i};m.stop=function(){this.Da&&(jd.clearTimeout(this.Da),this.Da=k,this.Lg=l)};m.q=function(){cj.f.q.call(this);this.stop()};m.Fn=function(){this.Da=k;this.Lg&&!this.al&&(this.Lg=l,this.Ce())};m.Ce=function(){this.Da=L(this.gh,this.ga);this.rc.call(this.Y)};function dj(a,b){Gc.call(this);this.rc=a;this.Y=b;this.Db=new Ae(q(this.En,this),0,this)}t(dj,Gc);m=dj.prototype;m.ga=0;m.yi=0;m.ok=l;m.q=function(){this.Db.ja();delete this.rc;delete this.Y;dj.f.q.call(this)};m.start=function(a,b){this.stop();this.ok=l;var c=b||0;this.ga=Math.max(a||0,0);this.yi=0>c?-1:s()+c;this.Db.start(0>c?this.ga:Math.min(this.ga,c))};m.stop=function(){this.Db.stop()};m.oc=function(){return this.Db.oc()};
m.En=function(){if(this.rc.call(this.Y))this.ok=i;else if(0>this.yi)this.Db.start(this.ga);else{var a=this.yi-s();0>=a||this.Db.start(Math.min(this.ga,a))}};function ej(a){Gc.call(this);this.g=a;this.Ye=this.g.value;this.C=new Kd(this);this.Hb=s();sb||v||rb&&Db("1.9")?P(this.C,a,"paste",this.Ed):P(this.C,a,["keydown","blur","focus","mouseover","input"],this.Dm);this.Db=new dj(q(this.tj,this))}t(ej,hd);m=ej.prototype;m.o="init";m.M=nh("goog.events.PasteHandler");m.q=function(){ej.f.q.call(this);this.C.ja();this.C=k;this.Db.ja();this.Db=k};
m.tj=function(){if(this.Ye==this.g.value)return l;this.M.info("detected textchange after paste");this.dispatchEvent("after_paste");return i};m.Ed=function(a){a=new Rc(a.oa);a.type="paste";this.dispatchEvent(a);L(function(){this.tj()||this.Db.start(50,200)},0,this)};
m.Dm=function(a){switch(this.o){case "init":switch(a.type){case "blur":this.o="init";break;case "focus":this.o="focused";break;case "mouseover":this.o="init";this.g.value!=this.Ye&&(this.M.info("paste by dragdrop while on init!"),this.Ed(a));break;default:jh(this.M,"unexpected event "+a.type+"during init")}break;case "focused":switch(a.type){case "input":var b=this.Hb+400;if(s()>b||"focus"==this.Rn)this.M.info("paste by textchange while focused!"),this.Ed(a);break;case "blur":this.o="init";break;
case "keydown":this.M.info("key down ... looking for ctrl+v");if(lb&&qb&&0==a.keyCode||lb&&qb&&17==a.keyCode)break;this.o="typing";break;case "mouseover":this.g.value!=this.Ye&&(this.M.info("paste by dragdrop while focused!"),this.Ed(a));break;default:jh(this.M,"unexpected event "+a.type+" during focused")}break;case "typing":switch(a.type){case "input":this.o="focused";break;case "blur":this.o="init";break;case "keydown":if(a.ctrlKey&&86==a.keyCode||a.shiftKey&&45==a.keyCode||a.metaKey&&86==a.keyCode)this.M.info("paste by ctrl+v while keypressed!"),
this.Ed(a);break;case "mouseover":this.g.value!=this.Ye&&(this.M.info("paste by dragdrop while keypressed!"),this.Ed(a));break;default:jh(this.M,"unexpected event "+a.type+" during keypressed")}break;default:jh(this.M,"invalid "+this.o+" state")}this.Hb=s();this.Ye=this.g.value;this.M.info(a.type+" -> "+this.o);this.Rn=a.type};function fj(){return'<div class="popup" id="popup" style="visibility: hidden; display: none;"><div class="content"></div><div id="tailarrow"></div></div>'}function gj(a){return(a.link?'<a href="'+J(a.link)+'">':"")+'<div class="tooltip">'+a.text+"</div>"+(a.link?"</a>":"")}
function hj(){return'<div class="comment-oob">Click <div class="fb-icon"></div> and <div class="twitter-icon"></div> for instant sharing<div class="on-off"><div class="off">OFF <div class="twitter-icon"></div></div> &#8594; <div class="on">ON <div class="twitter-icon on"></div></div></div></div>'}
function ij(){return'<div class="create-poll"><div class="label">CREATE A USER POLL</div><input type="text" placeholder="Title" class="poll-title"/><div class="label">OPTIONS</div><input type="text" placeholder="Option 1" class="option-input"/><input type="text" placeholder="Option 2" class="option-input"/><div class="add-option button">ADD OPTION</div><div class="submit-poll button">CREATE</div></div>'}
function jj(){return'<div class="select-program"><div class="select-header">Suggest a Program</div><div class="select-content"><div class="page"><input type="text" class="program-input" placeholder="paste a youtube link"/><div class="page2"></div></div></div></div>'}function kj(a){return'<div class="confirm-media"><img src="'+J(a.Ni)+'" /><div class="title">'+J(a.title)+'</div><div class="dark button">Yes</div></div>'};function Ng(){var a=B("popup");a||(a=H(fj),document.body.appendChild(a));Zi.call(this,a);K(window,"resize",q(this.Ca,this,l));K(this,"hide",this.tn);this.Gj=this.nf=this.dg=l;this.p=xg.a();this.p.subscribe("tooltip",this.qo,this);this.p.subscribe("oob",this.no,this);this.p.subscribe("create-poll",this.io,this);this.p.subscribe("select-program",this.jo,this);this.p.subscribe("hide",this.Nd,this);K(this.b(),"mouseover",q(function(){this.dg=i},this));K(this.b(),"mouseout",q(function(){this.dg=l;this.nf&&
this.p.c("hide")},this))}t(Ng,Zi);ia(Ng);function Mg(a,b,c,d){K(b,"mouseover",q(function(){this.ve&&jd.clearTimeout(this.ve);this.nf=l;this.p.c("tooltip",b,c,d)},a));K(b,"mouseout",q(function(){this.ve=L(q(function(){this.dg?this.nf=i:this.p.c("hide")},this),100)},a))}m=Ng.prototype;m.show=function(a,b,c,d){this.ve&&jd.clearTimeout(this.ve);this.nf=l;this.p.c(c,a,b,d);this.ve=L(q(function(){this.dg?this.nf=i:this.p.c("hide")},this),2E3)};
function lj(a,b,c){"top"==c?($i(a,1),c=-1*(Q(a.b()).width-Q(b).width)/2,bj(a,0,0,6,c),aj(a,new Vi(b,4)),a.b().className="popup",w(a.b(),"top")):"left"==c?($i(a,0),c=-1*(Q(a.b()).height-Q(b).height)/2,bj(a,c,6,0,0),aj(a,new Vi(b,6)),a.b().className="popup",w(a.b(),"left")):"right"==c&&($i(a,0),c=-1*(Q(a.b()).height-Q(b).height)/2,bj(a,c,0,0,6),aj(a,new Vi(b,6)),a.b().className="popup",w(a.b(),"right"))}m.tn=function(){this.Gj||(this.Nd(),this.p.c("on-hide"))};m.Ta=function(){return C("content",this.b())};
m.qo=function(a,b,c,d){this.Ca(l);lj(this,a,b);Cc(this.Ta(),gj,{text:"function"==typeof c.text?c.text():c.text,link:c.link});d&&(Yi(this),this.If=l);this.Ca(i)};m.no=function(a,b,c){this.Ca(l);lj(this,a,b);a=-1*(Q(this.b()).width-Q(a).width)/2;bj(this,0,0,36,a);Cc(this.Ta(),hj,{text:c.html,link:c.link});Yi(this);this.If=l;this.Ca(i);P(this.Y,this.b(),"click",q(function(){this.p.c("hide")},this))};
m.io=function(a){this.Ca(l);$i(this,2);aj(this,new Vi(a,7));this.b().className="popup";w(this.b(),"top");a=-1*(Q(this.b()).width-Q(a).width)/2;bj(this,0,0,36,a);Cc(this.Ta(),ij,{});Yi(this);this.If=l;this.Ca(i);this.Gj=i};
m.jo=function(a,b){this.Ca(l);$i(this,0);var c=-1*(Q(this.b()).height-Q(a).height)/2;bj(this,c,0,0,5);aj(this,new Vi(a,6));w(this.b(),"left");Cc(this.Ta(),jj);this.tf=new Oi("paste a YouTube link");this.tf.i(C("program-input",this.b()));var c=new hf(this.tf.b()),d=new ej(this.tf.b()),e=new Kh(q(this.ci,this,b),1E3);this.Ca(i);P(P(P(this.Y,d,"after_paste",q(this.ci,this,b)),c,"key",q(function(){e&&e.Vf()},this)),this.tf.b(),"focus",q(this.ci,this,b))};
m.ci=function(a){var b=C("select-content",this.b());try{var c;var d=this.tf.z(),e=mj.exec(d);e?c=new nj(e[1]||e[2],h,h):f(Error("failed to parse video id from youtube url: "+d));X(Da("https://gdata.youtube.com/feeds/api/videos/%s?v=2&alt=json",c.Ll),q(function(d){var e=oh(Hh(d.target)).entry,d=e.title.$t,g=e.media$group.media$thumbnail[0].url,e=C("page2",this.b());Cc(e,kj,{title:d,Ni:g});d=new Ff("Yes");d.i(C("button",e));(new Le(b,[0,0],[260,0],300,bi)).play();P(this.Y,d,"action",q(this.Zh,this,
a,c))},this))}catch(g){}};m.Zh=function(a,b){X("/_addprogram",q(function(b){b=oh(Hh(b.target));b=new hg(b);a.c(rg,b);this.Ca(l)},this),"POST","channel="+a.id+"&youtube_id="+b.Ll)};function oj(){M.call(this);this.qj=[];this.jl=[]}t(oj,M);ia(oj);
oj.prototype.search=function(a,b){X("https://gdata.youtube.com/feeds/api/videos?q="+a+"&max-results=10&v=2&alt=json",q(function(a){a=Y(a.target);this.jl=Sa(a.feed.entry,function(a){var b=new ag({id:"youtube"+a.media$group.yt$videoid.$t,name:a.title.$t,host_id:a.media$group.yt$videoid.$t,description:a.media$group.media$description.$t,duration:a.media$group.yt$duration.seconds,publisher:{name:a.author[0].name.$t,id:"youtube"+a.author[0].name.$t,picture:"https://i4.ytimg.com/i/"+a.author[0].yt$userId.$t+
"/1.jpg"}});b.Bc=yd(a.published.$t);return b},this);b&&b(this.jl)},this))};function pj(a){return'<div class="search-channel"><div class="pic"><img src="'+J(a.Ni)+'"></div><div class="title">'+J(a.name)+'</div><div class="loading loading-channel"><div class="loading-spinner"></div></div></div>'};function qj(a){return'<div class="info"><div class="scrollable ios-scroll"><div class="picture"><img src="'+J(a.media.Mb)+'" class="thumb"><div class="ytvideo"></div><div class="publisher" '+(!a.media.ta.name?'style="display:none"':"")+'><img src="'+J(a.media.ta.Q)+'"><div class="name">'+J(a.media.ta.name)+'</div></div><div class="links"><div class="local"></div><a target="_blank" href="'+a.media.Om+'"><div class="host"></div></a></div><div class="link-select" style="display:none"><input onClick="this.select();" class="link-input" type="text" value="'+
a.media.link+'" readonly="readonly"/></div><div class="title"><div class="text">'+J(a.media.name)+'</div></div><div class="reddit"><div class="upvote"></div><div class="reddit-logo"></div><div class="reddit-score"></div><div class="downvote"></div></div><div class="scrollable ios-scroll" '+(!a.description?'style="display:none"':"")+'><div class="desc-link"><a href="#">DESCRIPTION</a><div class="published">'+J(a.Bc)+'</div></div><div class="description">'+a.description+'</div></div><div class="button play"><div class="icon"></div><div class="loading-icon"></div></div><div class="options"><div class="button facebook"><div class="icon"></div></div><div class="button twitter"><div class="icon"></div></div><div class="button star"><div class="icon"></div></div><div class="button send"><div class="icon"></div></div></div></div><div class="viewers" style="display: none"><div class="label"><div class="eye-icon"></div></div></div><div class="info-contents"><div class="user-poll" style="display: none"><div class="label"><div class="poll-icon"></div><div class="status">VOTE</div></div><div class="poll-options"></div></div><div class="tweet-holder" style="display:none"><div class="label"><div class="globe-icon"></div><a class="tweets-link">LATEST TWEETS</a></div><div class="tweets"></div><div class="dot-nav"></div></div><div class="comments-holder ios-scroll" style="display:none"><div class="label"><div class="friends-icon"></div><a class="conv-link">CONVERSATION</a>'+
(a.Vm?'<a class="prev-link">&#10218; LAST PROGRAM</a>':"")+'</div><div class="no-comments" style="display:none">Start the conversation</div><div class="comments"></div><div class="top-grad"></div><div class="bottom-grad"></div></div><div class="create-poll-button" style="display:none">+ POLL</div><div class="create-poll popup" style="display:none"><div class="label">CREATE A USER POLL</div><input type="text" placeholder="Title" class="poll-title"/><div class="label" style="margin-top: 5px;">OPTIONS</div><div class="option-inputs"><input type="text" placeholder="Option 1" class="option-input option-input-1"/><input type="text" placeholder="Option 2" class="option-input option-input-2"/></div><div class="add-option button">ADD OPTION</div><div class="submit-poll button">CREATE</div><div class="close"></div></div></div><div class="send-media popup" style="display:none"><div class="label">SEND TO A FRIEND</div><div class="recipients"><textarea placeholder="To"></textarea></div><div class="label">ADD A MESSAGE:</div><div class="send-message"><textarea placeholder="Optional"></textarea><div class="add-comment button">SEND</div></div><div class="close"></div></div><div class="loading loading-activity"><div class="loading-spinner"></div></div><div class="overlay" style="display: none"><div class="leaving"><div>This program is over. Carry on?</div><div class="button dark no">Not yet</div><div class="button dark yes">Let\'s go</div></div></div>'+
(a.bn?'<div class="login-promo"><div class="title">login to xylo</div><div class="promo promo-1" style="margin-top: 10px;"><div class="promo-pic"><img src="/static/img/promo1.jpg"></div><div class="promo-text">Watch and chat live with friends.</div></div><div class="promo flip promo-2"><div class="promo-pic"><img src="/static/img/promo2.jpg"></div><div class="promo-text">See latest tweets and vote on stories.</div></div><div class="promo promo-3"><div class="promo-pic"><img src="/static/img/promo3.jpg"></div><div class="promo-text">Discuss, share, and save favorites.</div></div><div class="fb-login"><div class="power"><div class="bg"></div></div><div class="login-label">'+
(a.Sa?"Login to discuss":"Login")+'</div><div class="with-fb">with facebook</div><div class="waitlist">You\'re on the waitlist</div><div class="login-loading">Loading</div><div class="error"></div><div class="message">We can\'t post on your behalf!</div></div></div>':"")+"</div></div>"}function rj(a){return'<div class="viewer" name="'+J(a.He)+'"><img src="'+J(a.n.Q)+'"></div>'}
function sj(a){return'<div class="tweet" id="'+J(a.prefix)+"-"+J(a.gc.id)+'">'+(a.gc.n?'<a href="#user:'+J(a.gc.n.id)+'"><img src="'+J(a.gc.Q)+'"/></a>':'<img src="'+J(a.gc.Q)+'"/>')+'<div class="text"><a class="handle" target="_blank" href="http://www.twitter.com/'+J(a.gc.handle)+"/status/"+J(a.gc.id)+'">'+J(a.gc.handle)+"</a> "+a.text+'</div><div class="timestamp">'+J(a.timestamp)+'</div><div class="tweet-options"><div class="reply"></div></div></div>'}
function tj(a){return'<div class="comment'+(a.$.O?" reply":"")+'" '+(a.$.id?'id="'+J(a.prefix)+"-"+J(a.$.id)+'"':"")+">"+(!a.$.O?'<a href="#user:'+J(a.$.n.id)+'"><div class="user-picture" style="background:'+J(a.$.n.color)+'"><img src="'+J(a.$.n.Q)+'"/></div></a>':"")+'<div class="template"><a class="user" href="#user:'+J(a.$.n.id)+'">'+J(a.$.n.name)+'</a>  <div class="text">'+a.text+'<div class="comment-options">'+(a.Zk?'<div class="remove"></div> ':"")+'<div class="reply"></div></div></div><div class="timestamp">'+
J(a.$.rb)+'</div><div class="replies"></div>'+(!a.$.O?'<div class="reply-input"><textarea class="reply-textarea" rows="1" placeholder="reply..."></textarea></div>':"")+"</div></div>"}
function uj(){return'<div class="comment-input"><div class="textarea-holder"><div class="input-holder"><div class="highlighter"></div><textarea class="comment-textarea" rows="1" placeholder="Add to the conversation..."></textarea><div class="suggestions" style="display:none"></div></div></div><div class="comment-controls"><div class="comment-toggle tweet-toggle"><div class="icon"></div></div><div class="comment-toggle fb-toggle"><div class="icon"></div></div></div><div class="comment-button add-comment">ADD</div><div class="popup top" style="display:none"><div class="comment-oob">Click <div class="fb-icon"></div> and <div class="twitter-icon"></div> for instant sharing<div class="on-off"><div class="off">OFF <div class="twitter-icon"></div></div> &#8594; <div class="on">ON <div class="twitter-icon on"></div></div></div></div></div></div>'}
function vj(a){var b='<div class="activity'+(1<a.S.length?" digest":"")+'">';if(1<a.S.length){for(var b=b+('<div class="template"><span>'+J(a.S.length)+" friends </span>"+(a.Fl?"watched":"are watching")+(a.Z?' <a href="#channel:'+J(a.Z.id)+'">'+J(a.Z.name)+"</a>":"")+'<div class="timestamp">'+J(a.time)+'</div></div><div class="users">'),c=a.S,d=c.length,e=0;e<d;e++)var g=c[e],b=b+('<a href="#user:'+J(g.id)+'"><div class="picture" style="background:'+J(g.color)+'"><img src="'+J(g.Q)+'"/></div></a>');
b+="</div>"}return b+=(1==a.S.length?'<a href="#user:'+J(a.S[0].id)+'"><div class="picture" style="background:'+J(a.S[0].color)+'"><img src="'+J(a.S[0].Q)+'"/></div></a><div class="template"><a class="user" href="#user:'+J(a.S[0].id)+'">'+J(a.S[0].name)+"</a> "+(a.Fl?"watched":"is watching")+(a.Z?' <a href="#channel:'+J(a.Z.id)+'">'+J(a.Z.name)+"</a>":"")+'<div class="timestamp">'+J(a.time)+"</div></div>":"")+'<div class="medias"></div></div>'}
function wj(a){for(var b='<div class="comment activity'+(1<a.Ab.length?" digest":"")+'">'+(1<a.Ab.length?'<div class="template">'+(1==a.S.length?'<a class="user" href="#user:'+J(a.S[0].id)+'">'+J(a.S[0].name)+' </a> discussed <a class="title" href="#info:'+J(a.media.id)+'">'+J(a.media.name)+"</a>.":"<span>"+J(a.S.length)+' friends </span> discussed <a class="title" href="#info:'+J(a.media.id)+'"> '+J(a.media.name)+"</a>.")+"</div>":""),a=a.Ab,c=a.length,d=0;d<c;d++)var e=a[d],b=b+('<div class="comment"><a href="#user:'+
J(e.n.id)+'"><div class="picture" style="background:'+J(e.n.color)+'"><img src="'+J(e.n.Q)+'"/></div></a><div class="template"><a class="user" href="#user:'+J(e.n.id)+'">'+J(e.n.name)+'</a>  <div class="text">'+e.text+'</div><div class="timestamp">'+J(e.rb)+"</div></div></div>");return b+'<div class="medias"></div></div>'}
function xj(a){var b='<div class="like activity'+(1<a.S.length?" digest":"")+'">';if(1<a.S.length){for(var b=b+('<div class="template"><span>'+J(a.S.length)+' friends </span>liked<div class="timestamp">'+J(a.time)+'</div></div><div class="users">'),c=a.S,d=c.length,e=0;e<d;e++)var g=c[e],b=b+('<a href="#user:'+J(g.id)+'"><div class="picture" style="background:'+J(g.color)+'"><img src="'+J(g.Q)+'"/></div></a>');b+="</div>"}return b+=(1==a.S.length?'<a href="#user:'+J(a.S[0].id)+'"><div class="picture" style="background:'+
J(a.S[0].color)+'"><img src="'+J(a.S[0].Q)+'"/></div></a><div class="template" style="top:10px;margin-bottom:30px"><a class="user" href="#user:'+J(a.S[0].id)+'">'+J(a.S[0].name)+"</a> liked "+(1<a.Fk?J(a.Fk)+" stories":"")+'<div class="timestamp">'+J(a.time)+"</div></div>":"")+'<div class="medias"></div></div>'}
function yj(a){return'<div class="list-info"><div class="picture-cell" '+(a.Mb?'style="display:table-cell"':"")+">"+(a.link?'<a href="'+J(a.link)+'" target="_blank">':"")+'<div class="picture"><img class="thumb" src="'+J(a.Mb)+'"></div>'+(a.link?"</a>":"")+'</div><div class="description" style="display:table-cell">'+a.description+"</div></div>"}function zj(a){return'<li class="'+J(a.className)+' tab"><div class="label">'+J(a.name)+"</div></li>"}
function Aj(a){return'<div class="admin"><div class="scrollable ios-scroll"><div class="search"><input type="text" class="input" '+(a.mk?'placeholder="'+J(a.mk)+'"':"")+'/></div><div class="results"></div><div class="section" style="display:none"><div class="label">CHANNELS</div><div class="admin-channels"></div></div><div class="section" style="display:none"><div class="label">CURRENT TOPICS</div><div class="topics"></div></div><div class="section" style="display:none"><div class="label">COLLECTIONS</div><div class="collections"></div></div><div class="scroll-area"></div>'}
function Bj(){return'<div class="admin-list admin"><div class="search"><input class="input" type="text" placeholder="Paste video or playlist link" /></div><div class="tabbed pending"><ul class="tabs"><li class="tab pending"><div class="label">PENDING</div></li><li class="tab all"><div class="label">ALL</div></li><li class="tab playlists"><div class="label">PLAYLISTS</div></li><li class="tab publishers"><div class="label">PUBLISHERS</div></li><li class="tab categories"><div class="label">CATEGORIES</div></li></ul><div class="pending-content content pending"></div><div class="all-content content all"></div><div class="playlists-content content playlists"></div><div class="publishers-content content publishers"></div><div class="categories-content content categories"><div class="label">GUIDE CATEGORIES</div><div class="categories-list"></div><div class="label">FEED IDS</div><div class="feed-ids"></div><div class="label">FEED CATEGORIES</div><div class="feed-cats"></div></div><div class="spinner" style="display:none"></div></div>'}
function Cj(a){return'<div class="playlist"><div class="title">'+J(a.name)+'</div><div class="controls"><div class="remove dark button">x</div></div></div>'}function Dj(a){return'<div class="category button">'+J(a.name)+"</div>"}function Ej(a){return'<div class="publisher">'+(a.Q?'<img src="'+J(a.Q)+'"/>':"")+'<div class="title">'+J(a.name)+'</div><div class="controls"><div class="remove dark button">x</div></div></div>'}
function Fj(a){return'<div class="channel '+(a.Z.pb?"on":"off")+'"><div class="title">'+J(a.Z.name)+'</div><div class="controls"><div class="fetch dark button">FETCH</div><div class="program dark button">PROG.</div><div class="remove dark button">x</div><div class="on dark button">ON</div><div class="off dark button">OFF</div></div>'+(a.Z.hi?'<div class="pending">'+J(a.Z.hi)+"</div>":"")+"</div>"}
function Gj(a){return'<div class="collection"><div class="title">'+J(a.lh.name)+'</div><div class="controls">'+(a.lh.hi?'<div class="pending">'+J(a.lh.hi)+"</div>":"")+'<div class="fetch dark button">FETCH</div><div class="button dark remove">x</div></div></div>'}
function Hj(a){return(!a.Sa?'<div class="tabbed '+(a.We?"activity":"messages")+'"><ul class="tabs">'+(!a.We?'<li class="tab messages"><div class="label">MESSAGES</div></li>':"")+'<li class="tab activity"><div class="label">ACTIVITY</div></li>'+(a.We?'<li class="tab starred"><div class="label"><div class="heart"></div>\'d</div></li>':"")+"</ul>":"")+(!a.We&&!a.Sa?'<div class="messages-content content messages"><div class="loading loading-activity"><div class="loading-spinner"></div></div></div>':"")+
'<div class="activity-content content activity"><div class="loading loading-activity"><div class="loading-spinner"></div></div></div>'+(a.We&&!a.Sa?'<div class="starred-content content starred"><div class="loading loading-starred"><div class="loading-spinner"></div></div></div>':"")+'<div class="spinner" style="display:none"></div></div>'}
function Ij(){return'<div class="tabbed"><ul class="tabs"><li class="tab comments"><div class="label">CONVERSATION</div></li><li class="tab tweets"><div class="label">TWEETS</div></li></ul><div class="comments-content content comments-holder"><div class="loading loading-activity"><div class="loading-spinner"></div></div></div><div class="tweets-content content tweet-holder"><div class="loading loading-starred"><div class="loading-spinner"></div></div></div></div>'}
function Jj(a){return'<div class="list-media show"><div class="media"><div class="preview"><div class="thumb" style="background-image:url('+J(a.media.Mb)+"); background-position: 50% "+J(a.media.ie)+'%"></div><div class="title">'+J(a.media.name)+'</div><div class="stats"><div class="comment-count"><div class="icon"></div>'+J(a.media.yd)+'</div><div class="like-count"><div class="icon"></div>'+J(a.media.Ym)+'</div></div></div></div><div class="publisher">'+(a.media.ta?'<img src="'+J(a.media.ta.Q)+
'"><div class="name">'+J(a.media.ta.name)+"</div>":"")+'<div class="list-play"><div class="icon"></div></div><div class="list-plus"><div class="icon"></div></div></div></div>'}
function Kj(a){return'<div class="admin-media list-media"><div class="media"><div class="preview"><div class="thumb" style="background-image:url('+J(a.media.Mb)+"); background-position: 50% "+J(a.media.ie)+'%"></div><div class="title">'+J(a.media.name)+'</div><div class="published">'+J(a.Bc)+'</div><div class="play"></div><div class="approve"></div><div class="remove"></div><div class="repos"></div></div></div><div class="publisher"><img src="'+J(a.media.ta.Q)+'"><div class="name">'+J(a.media.ta.name)+
'</div><div class="duration">'+J(a.media.duration)+' seconds</div></div><div class="description">'+J(a.media.description)+"</div></div>"}function Lj(a){return'<div class="option"><div class="percent"></div><div class="name">'+J(a.name)+'</div><div class="percent-number">'+J(a.Jn)+"</div></div>"};function Mj(){R.call(this);this.sc={};this.tc=0;this.Wb=l;this.ba=new Oi("Search YouTube");this.w=new Ff("Search");xf(this.w,16,i)}t(Mj,R);m=Mj.prototype;
m.v=function(a){Mj.f.v.call(this,a);this.ba.i(B("search-input"));this.w.i(B("search-icon"));this.Ig=B("search-results");this.Fg=C("result-medias",this.b());this.Eg=C("result-channels",this.b());this.kh=B("clear-icon");var a=new hf(this.ba.b()),b=new Kh(function(){if(this.ba.z()){var a=oj.a(),b=this.ba.z(),e=q(this.pn,this);X("https://www.googleapis.com/youtube/v3/search?q="+b+"&type=channel,playlist&part=snippet&maxResults=3&key=AIzaSyAUF3ESL0wYUuSWmOezgZclQFpNGZNBePw",q(function(a){a=Y(a.target);
this.qj=Sa(a.items,function(a){return{playlist_id:a.id.playlistId,channel_id:a.id.channelId,name:a.snippet.title,thumbnail:a.snippet.thumbnails["default"].url}},this);e&&e(this.qj)},a));oj.a().search(this.ba.z(),q(this.Cn,this));O(this.kh,i);w(this.b(),"show")}else this.Fg.innerHTML="",this.Eg.innerHTML="",this.Wb=l,A(this.Ig,"no-medias",i)},1E3,this);P(P(P(P(this.h(),this.b(),"click",q(function(){wf(this.w,i);this.Wb&&w(this.b(),"show")},this)),a,"key",q(function(a){a.stopPropagation();b.Vf()},this)),
this.kh,"click",q(function(){this.ba.Ma("");x(this.b(),"show");wf(this.w,l);O(this.kh,l);this.Fg.innerHTML="";this.Eg.innerHTML="";this.Wb=l;A(this.Ig,"no-medias",i)},this)),window,"click",q(function(a){ef(this.w)&&(xc(a.target,"search")||L(q(function(){x(this.b(),"show");wf(this.w,l)},this)))},this))};m.pn=function(a){this.Eg.innerHTML="";this.Wb=!!a.length||this.Wb;A(this.Ig,"no-medias",!this.Wb);u(a,function(a){this.Pc(a)},this)};
m.Cn=function(a){this.Fg.innerHTML="";this.Wb=!!a.length||this.Wb;A(this.Ig,"no-medias",!this.Wb);u(a,function(a){this.Ob(a)},this)};
m.Ob=function(a){var b=H(Jj,{media:a}),c=C("list-play",b),d=C("list-plus",b);this.Fg.appendChild(b);P(P(P(this.h(),b,"click",q(function(b){b.preventDefault();b.stopPropagation();Z.a().c(Kg,a)},this)),c,"click",q(function(b){b.preventDefault();b.stopPropagation();x(this.b(),"show");b=ig(a);V.a().c(Nf,b)},this)),d,"click",function(b){b.preventDefault();b.stopPropagation();Rf().c(sg,a,i)})};
m.Pc=function(a){var b=H(pj,{name:a.name,Ni:a.thumbnail});this.Eg.appendChild(b);P(this.h(),b,"click",q(function(c){c.preventDefault();c.stopPropagation();w(b,"loading");X("/_ytchannel",q(function(c){c=Y(c.target);a=U.a().Ff(c.channel);u(c.programs,function(b){b=new hg(b);a.c(rg,b)},this);U.a().c(Jf,a);x(b,"loading")},this),"POST","&name="+a.name+(!S.a().d.D?"&token="+Nj.a().Eo:"")+(a.channel_id?"&channel_id="+a.channel_id:"")+(a.playlist_id?"&playlist_id="+a.playlist_id:""))},this))};function Z(){M.call(this)}t(Z,M);ia(Z);var Kg="media-info",Lg="profile";function Oj(){Gc.call(this);this.Oe=[];this.xo=[];this.lf=[]}t(Oj,hd);m=Oj.prototype;m.sk=l;m.tk=l;m.Lh=l;m.rl=ba("Hg");m.init=function(){if(!this.Lh){for(var a,b=0;a=this.Oe[b];b++)Pj(this,a);this.Lh=i}};function Pj(a,b){a.sk&&(K(b.element,"mousedown",b.Jk,l,b),a.Ji&&w(b.element,a.Ji));a.tk&&a.Mi&&w(b.element,a.Mi)}
m.pd=function(a,b){if(!this.Ra)if(this.Ra=b,this.dispatchEvent(new Qj("dragstart",this,this.Ra))==l)this.Ra=k;else{var c=b.Ad,d=this.Pf(c);this.em&&w(d,this.em);this.Gd=d;d=bc(c);d.body.appendChild(this.Gd);var e=this.Gd,g=ae(c),c=ke(c,"margin");g.x-=2*(c.left||0);g.y-=2*(c.top||0);e.style.position="absolute";e.style.left=g.x+"px";e.style.top=g.y+"px";this.r=new pe(e);this.r.rl(this.Hg);K(this.r,"drag",this.Kk,l,this);K(this.r,"end",this.Zc,l,this);K(d.body,"selectstart",this.Al);this.he=[];for(d=
0;c=this.xo[d];d++)for(var j,e=0;j=c.Oe[e];e++)for(var g=c,p=[j.element],r=this.he,y=0;y<p.length;y++){var F=p[y],I=ae(F),da=Q(F),I=new Od(I.y,I.x+da.width,I.y+da.height,I.x);r.push(new Rj(I,g,j,F));Sj(this,I)}this.dc||(this.dc=new Od(0,0,0,0));for(d=0;c=this.lf[d];d++)c.nh=[],c.kl=c.g.scrollLeft,c.ll=c.g.scrollTop,e=ae(c.g),g=Q(c.g),c.ea=new Od(e.y,e.x+g.width,e.y+g.height,e.x);for(d=0;g=this.he[d];d++)for(e=0;c=this.lf[e];e++)pc(c.g,g.g)&&(c.nh.push(g),g.kf=c);this.Oc=k;for(d=0;c=this.lf[d];d++)K(c.g,
"scroll",this.xj,l,this);this.r.pd(a);a.preventDefault()}};
m.Zc=function(a){var b=a.dm?k:this.Oc;if(b&&b.Oa){var c=a.clientX,a=a.clientY,d=zc($b(this.Gd)),e=c+d.x,d=a+d.y,g;this.sf&&(g=this.sf(b.Zb,b.ea,e,d));this.dispatchEvent(new Qj("drag",this,this.Ra,b.Oa,b.Zb,b.g,c,a,e,d));b.Oa.dispatchEvent(new Qj("drop",this,this.Ra,b.Oa,b.Zb,b.g,c,a,e,d,g))}this.dispatchEvent(new Qj("dragend",this,this.Ra));bd(this.r,"drag",this.Kk,l,this);bd(this.r,"end",this.Zc,l,this);bd(bc(this.Ra.Ad).body,"selectstart",this.Al);for(b=0;c=this.lf[b];b++)bd(c.g,"scroll",this.xj,
l,this),c.nh=[];this.r.ja();kc(this.Gd);delete this.Ra;delete this.Gd;delete this.r;delete this.he;delete this.Oc};
m.Kk=function(a){var b,c=zc($b(this.Gd));b=new Ob(a.clientX+c.x,a.clientY+c.y);var c=b.x,d=b.y,e=this.Oc,g;if(e){this.sf&&e.Oa&&(g=this.sf(e.Zb,e.ea,c,d));if(e.ea.contains(b)&&g==this.gj)return;e.Oa&&(this.dispatchEvent(new Qj("dragout",this,this.Ra,e.Oa,e.Zb,e.g)),e.Oa.dispatchEvent(new Qj("dragout",this,this.Ra,e.Oa,e.Zb,e.g,h,h,h,h,this.gj)));this.gj=g;this.Oc=k}if(this.dc.contains(b)){a:{for(var j=0;e=this.he[j];j++)if(e.ea.contains(b))if(e.kf){if(e.kf.ea.contains(b)){b=e;break a}}else{b=e;break a}b=
k}if((e=this.Oc=b)&&e.Oa)this.sf&&(g=this.sf(e.Zb,e.ea,c,d)),c=new Qj("dragover",this,this.Ra,e.Oa,e.Zb,e.g),c.vo=g,this.dispatchEvent(c),e.Oa.dispatchEvent(new Qj("dragover",this,this.Ra,e.Oa,e.Zb,e.g,a.clientX,a.clientY,h,h,g));else if(!e){this.Ia||(this.Ia=new Rj(this.dc.clone()));a=this.Ia.ea;a.top=this.dc.top;a.right=this.dc.right;a.bottom=this.dc.bottom;a.left=this.dc.left;for(g=0;e=this.he[g];g++)b=e.ea,e.kf&&(e=e.kf.ea,b=new Od(Math.max(b.top,e.top),Math.min(b.right,e.right),Math.min(b.bottom,
e.bottom),Math.max(b.left,e.left))),e=k,c>=b.right?e=b.right>a.left?b.right:a.left:c<b.left&&(e=b.left<a.right?b.left:a.right),j=k,d>=b.bottom?j=b.bottom>a.top?b.bottom:a.top:d<b.top&&(j=b.top<a.bottom?b.top:a.bottom),e!==k&&j!==k&&(Math.abs(e-c)>Math.abs(j-d)?j=k:e=k),e===k?j!==k&&(j<=d?a.top=j:a.bottom=j):e<=c?a.left=e:a.right=e;this.Oc=10<=(a.right-a.left)*(a.bottom-a.top)?this.Ia:k}}};m.Al=ea(l);
m.xj=function(a){for(var b=0,c;c=this.lf[b];b++)if(a.target==c.g){var d=c.ll-c.g.scrollTop,e=c.kl-c.g.scrollLeft;c.ll=c.g.scrollTop;c.kl=c.g.scrollLeft;this.Ia&&this.Oc==this.Ia&&(0<d?this.Ia.ea.top+=d:this.Ia.ea.bottom+=d,0<e?this.Ia.ea.left+=e:this.Ia.ea.right+=e);for(var g=0,j;j=c.nh[g];g++)j=j.ea,j.top+=d,j.left+=e,j.bottom+=d,j.right+=e,Sj(this,j)}this.r.Xk(a)};
m.Pf=function(a){var b=a.cloneNode(i);switch(a.tagName.toLowerCase()){case "tr":return E("table",k,E("tbody",k,b));case "td":case "th":return E("table",k,E("tbody",k,E("tr",k,b)));default:return b}};function Sj(a,b){if(1==a.he.length)a.dc=new Od(b.top,b.right,b.bottom,b.left);else{var c=a.dc;c.left=Math.min(b.left,c.left);c.right=Math.max(b.right,c.right);c.top=Math.min(b.top,c.top);c.bottom=Math.max(b.bottom,c.bottom)}}
m.q=function(){Oj.f.q.call(this);for(var a,b=0;a=this.Oe[b];b++)this.sk&&(bd(a.element,"mousedown",a.Jk,l,a),this.Ji&&x(a.element,this.Ji)),this.tk&&this.Mi&&x(a.element,this.Mi),a.ja();this.Oe.length=0};function Qj(a,b,c,d,e,g,j,p,r,y,F){Oc.call(this,a);this.up=b;this.vp=c;this.wp=d;this.yp=e;this.xp=g;this.clientX=j;this.clientY=p;this.$p=r;this.aq=y;this.vo=F}t(Qj,Oc);Qj.prototype.q=aa();
function Tj(a,b){Gc.call(this);this.element=B(a);this.data=b;this.P=k;this.element||f(Error("Invalid argument"))}t(Tj,hd);m=Tj.prototype;m.Ad=k;m.Jk=function(a){if(Tc(a)){var b=a.target;b&&(K(b,"mousemove",this.Vd,l,this),K(b,"mouseout",this.Vd,l,this),K(b,"mouseup",this.Vh,l,this),this.Ad=b,this.Ki=new Ob(a.clientX,a.clientY),a.preventDefault())}};m.Jg=ba("P");
m.Vd=function(a){var b=this.Ad,c="mouseout"==a.type&&a.target==b;if(5<Math.abs(a.clientX-this.Ki.x)+Math.abs(a.clientY-this.Ki.y)||c)bd(b,"mousemove",this.Vd,l,this),bd(b,"mouseout",this.Vd,l,this),bd(b,"mouseup",this.Vh,l,this),this.P.pd(a,this)};m.Vh=function(){var a=this.Ad;bd(a,"mousemove",this.Vd,l,this);bd(a,"mouseout",this.Vd,l,this);bd(a,"mouseup",this.Vh,l,this);delete this.Ki;this.Ad=k};function Rj(a,b,c,d){this.ea=a;this.Oa=b;this.Zb=c;this.g=d}Rj.prototype.kf=k;function Uj(){Oj.call(this)}t(Uj,Oj);function Vj(a,b){b.Jg(a);a.Oe.push(b);a.Lh&&Pj(a,b)};function Wj(a){var b={};"rel"in b||(b.rel="nofollow");"target"in b||(b.target="_blank");var c=[],d;for(d in b)b.hasOwnProperty(d)&&b[d]&&c.push(Ga(d),'="',Ga(b[d]),'" ');var e=c.join("");return a.replace(Xj,function(a,b,c,d,y){a=[Ga(b)];if(!c)return a[0];a.push("<a ",e,'href="');d?(a.push("mailto:"),c=d,d=""):(y||a.push("http://"),(d=c.match(Yj))?(c=d[1],d=d[2]):d="");c=Ga(c);d=Ga(d);a.push(c,'">',c,"</a>",d);return a.join("")})}
var Yj=/^(.*)([:;,\.?\[\]])$/,Xj=RegExp("([\\S\\s]*?)(\\b(?:mailto:)?([\\w.+-]+@[A-Za-z0-9.-]+\\.(?:com|org|net|edu|gov|aero|biz|cat|coop|info|int|jobs|mobi|museum|name|pro|travel|arpa|asia|xxx|[a-z][a-z])\\b)|\\b(?:(https?|ftp)://+|www\\.)\\w[:;,\\.?\\[\\]\\w/~%&=+#-@!]*|$)","g");function Zj(){}t(Zj,Ze);ia(Zj);m=Zj.prototype;m.Kd=aa();m.i=function(a,b){sf(a);a.Pb&=-256;xf(a,32,l);Zj.f.i.call(this,a,b);a.md(b.value);return b};m.W=function(a){sf(a);a.Pb&=-256;xf(a,32,l);return a.mb().W("textarea",{"class":af(this,a).join(" "),disabled:!a.isEnabled()},a.Cb||"")};m.Rc=function(a){return"TEXTAREA"==a.tagName};m.nd=ha;m.Nh=function(a){return a.isEnabled()};m.fe=ha;m.Ba=function(a,b,c){Zj.f.Ba.call(this,a,b,c);if((a=a.b())&&1==b)a.disabled=c};m.ub=ha;
m.md=function(a,b){a&&(a.value=b)};m.xa=ea("goog-textarea");function $j(a,b,c){rf.call(this,a,b||Zj.a(),c);sf(this);this.de(i);a||(this.Cb="")}t($j,rf);var ak=rb||sb;m=$j.prototype;m.Od=l;m.nb=0;m.Bk=0;m.Ik=0;m.hk=l;m.pg=l;m.Ai=l;m.zi=l;function bk(a){return a.Ze.top+a.Ze.bottom+a.oj.top+a.oj.bottom}function ck(a){var b=a.Ik,c=a.b();b&&(c&&a.pg)&&(b-=bk(a));return b}function dk(a){var b=a.Bk,c=a.b();b&&(c&&a.pg)&&(b-=bk(a));return b}m.Ma=function(a){this.md(String(a))};m.z=function(){return this.b().value};m.md=function(a){$j.f.md.call(this,a);this.resize()};
m.da=function(a){$j.f.da.call(this,a);this.b().disabled=!a};m.resize=function(){this.b()&&this.$f()};m.B=function(){$j.f.B.call(this);var a=this.b();Qd(a,{overflowY:"hidden",overflowX:"auto",boxSizing:"border-box",MsBoxSizing:"border-box",WebkitBoxSizing:"border-box",MozBoxSizing:"border-box"});this.Ze=ke(a,"padding");this.oj=ne(a);P(P(P(P(this.h(),a,"scroll",this.$f),a,"focus",this.$f),a,"keyup",this.$f),a,"mouseup",this.gn);this.resize()};
function ek(a){if(!a.hk){var b=a.b().cloneNode(l);Qd(b,{position:"absolute",height:"auto",top:"-9999px",margin:"0",padding:"1px",border:"1px solid #000",overflow:"hidden"});a.mb().I.body.appendChild(b);var c=b.scrollHeight;b.style.padding="10px";var d=b.scrollHeight;a.Ai=d>c;b.style.borderWidth="10px";a.zi=b.scrollHeight>d;b.style.height="100px";100!=b.offsetHeight&&(a.pg=i);kc(b);a.hk=i}var b=a.b(),c=a.b().scrollHeight,e=a.b(),d=e.offsetHeight-e.clientHeight;if(!a.Ai)var g=a.Ze,d=d-(g.top+g.bottom);
a.zi||(e=ne(e),d-=e.top+e.bottom);c+=0<d?d:0;a.pg?c-=bk(a):(a.Ai||(d=a.Ze,c+=d.top+d.bottom),a.zi||(a=ne(b),c+=a.top+a.bottom));return c}function fk(a,b){a.nb!=b&&(a.nb=b,a.b().style.height=b+"px")}function gk(a){a=a.b();a.style.height="auto";var b=a.value.match(/\n/g)||[];a.rows=b.length+1}
m.$f=function(){if(!this.Od){var a=l;this.Od=i;var b=this.b(),c=this.nb;if(b.scrollHeight){var d=l,e=l,g=ek(this),j=b.offsetHeight,p=ck(this),r=dk(this);p&&g<p?(fk(this,p),d=i):r&&g>r?(fk(this,r),b.style.overflowY="",e=i):j!=g?fk(this,g):this.nb||(this.nb=g);!d&&(!e&&ak)&&(a=i)}else gk(this);this.Od=l;a&&(a=this.b(),this.Od||(this.Od=i,b=l,a.value||(a.value=" ",b=i),(e=a.scrollHeight)?(g=ek(this),d=ck(this),j=dk(this),!(d&&g<=d)&&!(j&&g>=j)&&(j=this.Ze,a.style.paddingBottom=j.bottom+1+"px",ek(this)==
g&&(a.style.paddingBottom=j.bottom+e+"px",a.scrollTop=0,e=ek(this)-e,e>=d?fk(this,e):fk(this,d)),a.style.paddingBottom=j.bottom+"px")):gk(this),b&&(a.value=""),this.Od=l));c!=this.nb&&this.dispatchEvent("resize")}};m.gn=function(){var a=this.b(),b=a.offsetHeight;a.filters&&a.filters.length&&(a=a.filters.item("DXImageTransform.Microsoft.DropShadow"))&&(b-=a.offX);b!=this.nb&&(this.nb=this.Ik=b)};function hk(a,b,c,d,e,g,j){R.call(this);this.za=Hf(S.a().d);this.zb=a;this.yg=b;this.ki=c;this.ri=d;this.hh=e.categories;this.lm=e.feed_categories;this.nm=e.feed_id;this.Qi=g||k;this.Dd=j||k;this.th=this.za?new Uj:k;this.ad={pending:l,all:l};this.ha=["pending","all","playlists","publishers","categories"]}t(hk,R);var ik="top_rated top_favorites most_shared most_recent most_discussed most_responded recently_featured on_the_web most_viewed".split(" "),jk="All Film Autos Music Animals Sports Travel Games Videoblog People Comedy Entertainment News Howto Education Tech Nonprofit Movies Shows Shortmov".split(" ");
m=hk.prototype;
m.v=function(a){hk.f.v.call(this,a);a.innerHTML="";a.scrollTop=0;Cc(a,Bj);var b=C("pending-content",a);u(this.yg,function(a){this.Ob(b,a)},this);this.On=C("playlists-content",a);u(this.ki,this.jj,this);this.Sn=C("publishers-content",a);u(this.ri,this.kj,this);this.Vl=C("categories-list",a);this.Nj=C("feed-ids",a);this.mm=C("feed-cats",a);X("/admin/_categories",q(function(a){a=Y(a.target);u(a,function(a){kk(this,a,"category",Xa(this.hh,a.id)||!this.hh.length)},this)},this));u(jk,function(a){kk(this,a,
"feed_category",Xa(this.lm,a))},this);u(ik,function(a){kk(this,a,"feed_id",this.nm==a)},this);this.resize()};
m.B=function(){hk.f.B.call(this);this.ba=C("input",this.b());var a=new hf(this.ba),b=new ej(this.ba);this.fb=C("tabs",this.b());this.N="pending";var c=l;P(P(P(P(this.h(),window,"resize",za(L,q(this.resize,this))),a,"key",q(function(a){"13"==a.keyCode&&lk(this,this.ba.value)},this)),b,"after_paste",q(function(){lk(this,this.ba.value)},this)),this.fb,"click",q(function(a){a=wc(a.target,"li");this.uc(a)},this));P(this.h(),this.b(),"scroll",q(function(){if(this.zb&&!c&&!this.ad[this.N]&&("pending"==this.N||
"all"==this.N)&&this.b().scrollTop+D().height>this.b().scrollHeight-this.b().clientTop){c=i;var a=C("spinner",this.b());O(a,i);var b="pending"==this.N?this.yg:this.ah;X("/admin/_media/collection/"+this.zb+"?offset="+b.length+("pending"==this.N?"&pending=1":""),q(function(g){c=l;g=oh(Hh(g.target)).medias;g=Sa(g,function(a){return new ag(a)});cb(b,g);var j=C(this.N+"-content",this.b());u(g,function(a){this.Ob(j,a)},this);this.ad[this.N]=!g.length;A(a,"finished",!g.length)},this))}},this));this.resize()};
m.resize=function(){de(this.b(),D().height-40)};
function lk(a,b){var c;c=b.match("(?:(https?|ftp)://+|www\\.)\\w[:;,\\.?\\[\\]\\w/~%&=+#-@!]*");c=c!=k?c[0]:"";a.zb&&c&&(a.ba.disabled="disabled",X("admin/_add/collection/"+a.zb,q(function(a){this.ba.value="";this.ba.disabled="";a=Y(a.target);if("media"==a.type){var b=gg(fg.a(),a.data);Va(this.yg,function(a){return a.id==b.id})||(this.yg.push(b),a=C("pending-content",this.b()),this.Ob(a,b,i),this.uc(dc("li","pending",h)[0]))}else if("playlist"==a.type){var c=a.data;Va(this.ki,function(a){return a.id==
c.id})||(this.ki.push(c),this.jj(c),this.uc(dc("li","playlists",h)[0]))}else if("publisher"==a.type){var j=a.data;j&&!Va(this.ri,function(a){return a.id==j.id})&&(this.ri.push(j),this.kj(j),this.uc(dc("li","publishers",h)[0]))}},a),"POST","url="+c))}
m.uc=function(a){u(this.ha,function(b){A(this.fb.parentElement,b,z(a,b));this.N=z(a,b)?b:this.N},this);this.zb&&!this.ah&&X("/admin/_media/collection/"+this.zb,q(function(a){a=oh(Hh(a.target)).medias;this.ah=Sa(a,function(a){return new ag(a)});var c=C("all-content",this.b());u(this.ah,function(a){this.Ob(c,a)},this)},this))};
m.jj=function(a){var b=H(Cj,{name:a.name});this.On.appendChild(b);var c=C("remove",b);P(this.h(),c,"click",function(){X("admin/_remove/collection/"+this.zb,q(function(){kc(b)},this),"POST","pub_id="+a.id)})};m.kj=function(a){var b=H(Ej,{name:a.name||a.id,Q:a.picture});this.Sn.appendChild(b);var c=C("remove",b);P(this.h(),c,"click",function(){X("admin/_remove/collection/"+this.zb,q(function(){kc(b)},this),"POST","pub_id="+a.id)})};
function kk(a,b,c,d){if("category"==c){var e=H(Dj,{name:b.name,id:b.id});a.Vl.appendChild(e)}else e=H(Dj,{name:b,id:b}),("feed_id"==c?a.Nj:a.mm).appendChild(e);A(e,"enabled",!!d);var g="category"==c?"cat_id="+b.id:"feed_id"==c?"feed_id="+b:"feed_cat="+b;P(a.h(),e,"click",function(){"feed_id"==c&&u(lc(this.Nj),function(a){x(a,"enabled")});var a=Nb(e,"enabled");X("admin/_edit/collection/"+this.zb,Be(),"POST",g+"&enabled="+a)})}
m.Ob=function(a,b,c){var d=H(Kj,{media:b,Bc:eg(b)});c?jc(a,d,0):a.appendChild(d);this.za&&(a=this.th,c=new Tj(d,h),Vj(a,c));var a=new pe(C("repos",d)),e=C("thumb",d),c=C("play",d),g=C("approve",d),j=C("remove",d);a.Be=function(a,b){var c=b-24;-50<=c&&50>=c&&Qd(e,"background-position-y",50-c+"%")};P(P(P(P(this.h(),a,"end",function(){var a=(e.style[Na("background-position")]||"").split(" ")[1],a=a.substring(0,a.length-1);X("/admin/_posthumb",Be(),"POST","media="+b.id+"&pos="+a)}),c,"click",q(this.Kn,
this,b)),g,"click",q(this.mj,this,b,i,d)),j,"click",q(this.mj,this,b,l,d));L(za(w,d,"show"))};m.Zh=function(a,b){X("/admin/_addprogram",q(function(b){b=oh(Hh(b.target));b=new hg(b);a.c(rg,b)},this),"POST","channel="+a.id+"&media="+b.id)};m.mj=function(a,b,c){var d=a.Zl||this.zb;X("admin/_media/collection",q(function(){w(c,"remove");L(function(){kc(c)},300);N.a();var b;N.a();b=tc(B("toggle-pending"));sd(0,b-1);Z.a().c("approved",a,d)},this),"POST","col="+d+"&media="+a.id+"&approve="+b)};
m.Kn=function(a){a=ig(a);V.a().c(Nf,a)};function mk(a){R.call(this);this.Tc=a||k;this.Qg=this.rj=this.Go=this.vj=0}t(mk,R);m=mk.prototype;m.W=function(){this.g=H(Aj)};m.v=function(a){mk.f.v.call(this,a);var b=H(Aj,{mk:this.Tc?"Add a collection":"Add a Channel"});a.innerHTML=b.innerHTML};
m.B=function(){mk.f.B.call(this);this.ba=C("input",this.b());var a=new hf(this.ba);this.$n=C("scrollable",this.b());this.Qa=C("admin-channels",this.b());this.Xp=C("topics",this.b());this.Qf=C("collections",this.b());this.uj=B("admin-col-list");this.lj=B("admin-list");U.a();this.Tc?X("/admin/_collections/"+this.Tc,q(function(a){a=Y(a.target);O(this.Qf.parentElement,!!a.length);u(a,this.ij,this);this.Qg&&sd(N.a(),this.Qg);this.vj=Q(this.Qf.parentElement).height;this.resize()},this)):X("/admin/_channels",
q(function(a){a=Y(a.target);O(this.Qa.parentElement,!!a.length);u(a,this.Pc,this);this.rj=Q(this.Qa.parentElement).height;this.resize()},this));P(this.h(),a,"key",q(function(a){"13"==a.keyCode&&this.ba.value&&(a=this.ba.value,this.ba.disabled="disabled",X(this.Tc?"/admin/_collections":"/admin/_channels",q(function(a){a=Y(a.target);this.Tc?(O(this.Qf.parentElement,!!a),this.ij(a)):(O(this.Qa.parentElement,!!a),this.Pc(a));this.ba.disabled="";this.ba.value=""},this),"POST","name="+a+(this.Tc?"&cid="+
this.Tc:"")))},this))};
m.Pc=function(a){var b=new qg(a),c=H(Fj,{Z:b});this.Qa.appendChild(c);K(c,"click",q(function(a){z(a.target,"on")||z(a.target,"off")?(A(c,"on",z(a.target,"on")),A(c,"off",!z(a.target,"on")),X("/admin/_channel/online/"+b.id,q(function(a){a.target.disabled="";a=Y(a.target);A(c,"on",a.online);A(c,"off",!a.online)},this),"POST","online="+z(a.target,"on"))):z(a.target,"program")?X("/admin/_program",Be(),"POST","channel_id="+b.id):z(a.target,"fetch")?X("/admin/_fetch",function(){alert("Fetch began, but give it some time.")},"POST",
"channel_id="+b.id):z(a.target,"remove")&&confirm("Remove "+b.name+"?")?(O(c,l),X("/admin/_channels/"+b.id,function(a){Y(a.target).deleted?kc(c):O(c,i)},"DELETE")):((new mk(b.id)).i(this.uj),Z.a().c("navigate",this.uj,l,b.name))},this))};
m.ij=function(a){var b=H(Gj,{lh:a});this.Qg+=a.pending;this.Qf.appendChild(b);K(b,"click",q(function(c){z(c.target,"remove")&&confirm("Remove "+a.name+"?")?(O(b,l),X("/admin/_collections/"+a.id,function(a){Y(a.target).deleted?kc(b):O(b,i)},"DELETE")):z(c.target,"fetch")?X("/admin/_fetch",function(){alert("Fetch began, but give it some time.")},"POST","col_id="+a.id):X("/admin/_media/collection/"+a.id+"?pending=1",q(function(b){var b=oh(Hh(b.target)),c=b.medias,c=Sa(c,function(a){return new ag(a)});
(new hk(a.id,c,b.playlists,b.publishers,b.categories)).i(this.lj);Z.a().c("navigate",this.lj,l,a.name)},this))},this));Z.a().subscribe("approved",function(c,d){if(d==a.id){var e=C("pending",b),g=tc(e)-1;0>=g?(kc(b),Kc(b)):G(e,g)}},this)};m.resize=function(){de(this.$n,this.rj+this.Go+this.vj+110)};function nk(a,b,c,d,e,g){R.call(this);this.Ii=!!a;this.rd=!!d;this.Mh=!!e;this.Lf=!!b;this.bl=!!g;this.hl=!!c;this.value="";this.k=new $j(this.hl?"reply...":"Add to the conversation.");this.va=new Ff("tweet");xf(this.va,16,i);this.wa=new Ff("post");xf(this.wa,16,i);a=S.a().d;this.Uf=a.Qn;this.Rg=a.el;this.Qc=new Ff("add");this.wi=k;this.fc={};this.Na=[];this.Ga=-1;this.Se=0;this.$k=this.Fo=k}t(nk,R);var ok=/@(\w+\s?\w*)/,pk=/(\w+\s?\w*)/;m=nk.prototype;m.W=function(){this.g=H(uj)};
m.v=function(a){nk.f.v.call(this,a);w(a,"decorated");var b=E("div","suggestions");a.appendChild(b);b=E("div","highlighter");a.appendChild(b)};
m.B=function(){nk.f.B.call(this);this.k.i(dc("textarea",h,this.b())[0]);var a=this.k;a.Bk=70;a.resize();var a=new hf(this.k.lc()),b=C("popup",this.b());if(!this.hl&&!this.rd&&(Ve(this,this.Qc),this.Qc.i(C("add-comment",this.b())),this.Qc.da(this.Mh),P(this.h(),this.Qc,"action",q(this.Jb,this)),this.wj=C("comment-controls",this.b())))O(this.wj,this.Ii),A(this.b(),"show-controls",this.Ii),this.Cp=C("input-holder",this.b()),Ve(this,this.va),this.va.i(C("tweet-toggle",this.b())),S.a().d.D&&!S.a().d.cg&&
X("/_twitter",q(function(a){a=Y(a.target);this.Rg=this.Rg&&a.auth;this.Hl=a.auth_url;wf(this.va,this.Rg)},this)),Ve(this,this.wa),this.wa.i(C("fb-toggle",this.b())),S.a().d.D&&FB.api("/me/permissions",q(function(a){this.Uf=this.Uf&&!!a.data[0].publish_stream;wf(this.wa,this.Uf)},this)),P(P(this.h(),this.wa,"action",q(this.sn,this)),this.va,"action",q(this.Hn,this)),DESKTOP&&!IPAD&&(Mg(Ng.a(),this.va.b(),"top",{text:q(function(){return"Share on Twitter: "+(ef(this.va)?"ON":"OFF")},this)}),Mg(Ng.a(),
this.wa.b(),"top",{text:q(function(){return"Share on Facebook: "+(ef(this.wa)?"ON":"OFF")},this)})),S.a().d.subscribe(lg,function(){wf(this.va,i);S.a().d.cg=i},this);this.Lb=C("suggestions",this.b());this.Fh=C("highlighter",this.b());b&&S.a().d&&S.a().d.D&&O(b,!S.a().d.Eh&&!S.a().d.cg&&this.Ii);P(P(P(this.h(),this.k.b(),"focus",q(function(){b&&O(b,l);this.dispatchEvent("focus")},this)),a,"key",q(function(a){a.stopPropagation();xg.a().c("hide");if("13"==a.keyCode||("32"==a.keyCode||"9"==a.keyCode)&&
-1<this.Ga){if(this.Na.length&&this.Na.reverse()[this.Ga]){a.preventDefault();var b=this.k.z().slice(this.rd?this.Se:0,this.k.b().selectionStart),b=b.split(" "),b=1<b.length?b[b.length-2]+" "+b[b.length-1]:b.pop(),e=this.Na[this.Ga];this.fc[e.id]=e;this.rd?qk(this,b.match(pk)[0]):qk(this,b.match(ok)[0]);this.k.b().focus();O(this.Lb,l);this.Na=[];this.Ga=-1;b=this.k.z().length;this.setSelectionRange(b,b)}else"13"==a.keyCode&&(a.preventDefault(),this.Qc.setActive(this.k.z()),this.Jb(a));this.Lf&&qk(this)}else"27"==
a.keyCode&&this.Na.length?(O(this.Lb,l),this.Na=[],b=this.k.z().length,this.setSelectionRange(b,b),this.Ga=-1,this.fc={}):("38"==a.keyCode||"40"==a.keyCode)&&this.Na.length?(a.preventDefault(),b=Array.prototype.slice.call(lc(this.Lb)),b.reverse()[this.Ga]&&x(b[this.Ga],"selected"),this.Ga="38"==a.keyCode?Math.min(this.Ga+1,this.Na.length-1):Math.max(this.Ga-1,-1),-1!=this.Ga&&w(b[this.Ga],"selected")):L(q(function(){this.Qc.da(this.Mh||!!this.k.z());var b=this.k.z().slice(this.rd?this.Se:0,this.k.b().selectionStart),
b=b.split(" "),b=1<b.length?b[b.length-2]+" "+b[b.length-1]:b.pop(),d=this.rd&&pk.test(b)||this.Lf&&ok.test(b);O(this.Lb,d);if("8"==a.keyCode)this.Fh.innerHTML.match('<div class="token">.*</div>$');else if(d&&(b=this.rd?b.match(pk):b.match(ok),this.Na=S.a().search(b[1]),this.Na.length)){var d=this.Na,e=b[0];this.Lb.innerHTML="";O(this.Lb,i);u(d.slice(0,5),function(a){var b=E("div","suggestion",a.name);this.Lb.appendChild(b);P(this.h(),b,"click",q(function(){this.fc[a.id]=a;qk(this,e);this.k.b().focus();
var b=this.k.z().length;this.setSelectionRange(b,b);O(this.Lb,l);this.Na=[];this.Ga=-1},this))},this)}this.k.z()||this.clear();this.Lf&&qk(this)},this))},this)),this.k,"resize",q(function(a){this.dispatchEvent(a)},this));b&&P(this.h(),b,"click",q(function(){O(b,l)},this));Z.a().subscribe("reply-comment",this.vi,this);Z.a().subscribe("reply-tweet",this.Wn,this)};
function qk(a,b){var c=a.k.z(),d=c,e=c,g=Tb(a.fc);u(Sb(a.fc),function(a){var p=b&&0==Fa(b,((this.rd?"":"@")+a.name).substr(0,b.length))?b:a.name;d=d.replace(RegExp(p,"g"),'<div class="token">'+a.name+"</div> ");this.Fh.innerHTML=d;this.value=e=e.replace(RegExp(p,"g"),"@["+a.id+":"+a.name+"]");var r=RegExp(p,"g").exec(c);r&&(Ya(g,a.id),this.Se=Math.max(r.index+r[0].length,this.Se));c=c.replace(RegExp(p,"g"),a.name)+" ";b&&this.k.Ma(c)},a);u(g,function(a){Vb(this.fc,a)},a)}
m.vi=function(a,b){this.$k=a.id?a.id:a.toString();this.wi=b};m.Wn=function(a){this.Jp=a.id;this.Ma((this.z()?this.z()+" ":"")+"@"+a.handle+" ");this.eb(i);this.va.da(i);this.eb(i);a=this.k.z().length;this.setSelectionRange(a,a)};m.setSelectionRange=function(a,b){if(this.k.b().setSelectionRange)this.k.b().focus(),this.k.b().setSelectionRange(a,b);else if(this.k.b().createTextRange){var c=this.k.b().createTextRange();c.collapse(i);c.moveEnd("character",b);c.moveStart("character",a);c.select()}};
m.z=function(){this.Lf&&Sb(this.fc).length?qk(this):this.value=this.k.z();return this.value};m.Ma=function(a,b,c){wf(this.wa,!!b);wf(this.va,!!c);this.k.Ma(a);this.value=a;this.Qc.da(!!a)};m.clear=function(){this.k.Ma("");this.fc={};this.Na=[];this.Fh.innerHTML="";this.Lb.innerHTML="";O(this.Lb,l);this.k.resize();this.Se=0};m.fg=function(){return z(this.b(),"focused")};m.eb=function(a){a&&this.k.b().focus();return A(this.b(),"focused",a)};
m.Jb=function(){if(this.z()||this.Mh)this.dispatchEvent({type:"add",Kf:q(function(a){var b=Y(a.target);if(b.comment){var a=new Sh(b.comment),c=b.tweet?new rk(b.tweet):k;if(b=gg(fg.a(),b.comment.media))b.c(bg,a),c&&b.c("add-tweet",c)}},this),Ge:ef(this.wa),Yi:ef(this.va),text:this.z(),O:this.$k,El:this.wi&&this.wi.id}),this.clear()};
m.sn=function(){xg.a().c("tooltip",this.wa.b(),"top",{text:q(function(){return"Share on Facebook: "+(ef(this.wa)?"ON":"OFF")},this)});!S.a().d.Eh&&(!this.Uf&&ef(this.wa))&&(O(B("overlay"),i),FB.login(q(function(a){O(B("overlay"),l);this.km=!!a.authResponse;wf(this.wa,this.km)},this),{scope:"publish_stream"}))};
m.Hn=function(){xg.a().c("tooltip",this.va.b(),"top",{text:q(function(){return"Share on Twitter: "+(ef(this.va)?"ON":"OFF")},this)});if(!S.a().d.cg&&!this.Rg&&ef(this.va))if(wf(this.va,l),IPHONE||IPAD){var a=document.createElement("a");a.setAttribute("href",this.Hl);a.setAttribute("target","_blank");var b=document.createEvent("HTMLEvents");b.initEvent("click",i,i);a.dispatchEvent(b)}else a=window.open(this.Hl,"Twitter Login","height=300,width=550"),a.moveTo(screen.width/2-225,screen.height/2-150),
a.focus()};function Sh(a){this.id=a.id;this.n=a.user?Qg(S.a(),a.user):k;this.text=a.text;this.media=a.media?gg(fg.a(),a.media):k;this.time=a.time?yd(a.time+"Z"):new zd;this.rb=md(this.time.getTime());this.O=a.parent_id;this.hf=[];this.$a=l;a.replies&&u(a.replies,function(a){a=new Sh(a);this.hf.push(a)},this)}
function sk(a,b,c,d,e,g,j,p){var r=new Sh({text:c,parentId:g});r.n=a;r.O=g||k;fg.a().get(b).ic(r);X("/_comment",q(function(a){a=Y(a.target);r.id=a.comment.id;p&&p(r)},this),"POST","media_id="+b+"&text="+c+"&tweet="+e+"&facebook="+d+(g?"&parent_id="+g:"")+(j?"&to_user_id="+j:""));return r};function rk(a){this.id=a.id;this.n=a.user&&Qg(S.a(),a.user);this.handle=a.handle;this.Q=a.picture;this.text=a.text;this.time=yd(a.time+"Z")};function tk(a,b,c,d){R.call(this);this.j=a;this.Bb=b||[];this.xe={};this.yf=!!c;this.Kc=d||[];this.xf={};this.pa=this.kp=0;this.dd={}}t(tk,R);m=tk.prototype;
m.v=function(a){tk.f.v.call(this,a);a.innerHTML="";a.scrollTop=0;w(this.b(),"ios-scroll");this.t=E("div","loading",E("div","loading-spinner"));this.b().appendChild(this.t);O(this.t,l);this.gd=E("div","no-comments","Start the conversation.");this.b().appendChild(this.gd);this.K=E("div","comments tweets");this.b().appendChild(this.K);P(P(this.h(),window,"resize",za(L,q(this.resize,this))),this.K,"click",q(this.mh,this));this.Bb.length?(u(this.Bb,function(a){this.ic(a)},this),this.Ud=Q(this.K).height):
this.yf&&this.Kc.length?(u(this.Kc,function(a){this.ud(a)},this),this.Ud=Q(this.K).height):O(this.t,i);this.yf?(X("/_tweet/"+this.j.id+"?offset="+this.Kc.length,q(function(a){O(this.t,l);a=oh(Hh(a.target));a=Sa(a,function(a){a=new rk(a);this.ud(a);return a},this);this.Ud=Q(this.K).height;this.resize()},this)),this.j.subscribe("add-tweet",function(a){this.ud(a,i)},this)):(X("/_comment/"+this.j.id+"?offset="+this.Bb.length,q(function(a){O(this.t,l);a=oh(Hh(a.target));a=Sa(a,function(a){a=new Sh(a);
this.ic(a);return a},this);this.Ud=Q(this.K).height;this.resize()},this)),this.j.subscribe(bg,this.ic,this),this.j.subscribe(cg,this.ti,this));this.resize(41)};
m.ud=function(a,b){this.xf[a.id]=a;O(this.gd,l);var c=Wj(a.text),c=c.replace(/#(\S+)/g,function(a,b){return'<a target="_blank" href="http://twitter.com/search?q=%23'+b+'">'+a+"</a>"}),c=c.replace(/@(\S+)/g,function(a,b){return'<a target="_blank" href="http://twitter.com/'+b+'">'+a+"</a>"}),c=H(sj,{gc:a,text:c,timestamp:md(a.time.getTime())});nd(ld.a(),a.time,C("timestamp",c));b?jc(this.K,c,0):this.K.appendChild(c);this.resize();O(oc(this.K),i)};
m.mh=function(a){a=a.target;if(this.yf){var b=xc(a,"tweet");b&&(b=this.xf[b.id.split("-")[1]],z(a,"reply")&&Z.a().c("reply-tweet",b))}else if(b=xc(a,"comment"))b=this.xe[b.id.split("-")[1]],z(a,"reply")?C("reply-textarea",this.dd[b.O?b.O:b.id]).focus():z(a,"remove")&&this.j.c(cg,b)};m.ti=function(a){kc(B("listcomment-"+a.id));Za(this.Bb,function(b){return b.id==a.id})};
m.ic=function(a){this.Bb.push(a);O(this.gd,l);var b=Wj(a.text),b=b.replace(/@\[(\d+):([a-zA-z\s]+)\]/g,function(a,b,e){return'<a href="#user:'+b+'">'+e+"</a>"}),b=H(tj,{prefix:"listcomment",$:a,text:b,Zk:a.n.id==S.a().d.id});nd(ld.a(),a.time,C("timestamp",b));a.O?C("replies",this.dd[a.O]).appendChild(b):this.K.appendChild(b);a.id&&uk(this,a,b);u(a.hf,function(a){this.ic(a)},this);a.O||(this.K.scrollTop=this.K.scrollHeight);return b};
function uk(a,b,c){a.xe[b.id]=b;c.id="listcomment-"+b.id;if(!b.O){a.dd[b.id]=c;var d=C("reply-input",c),c=C("reply-textarea",c);P(a.h(),c,"click",q(function(){if(!z(d,"decorated")){var a=new nk(l,i,i);a.i(d);a.vi(b,b.n);P(this.h(),a,"add",q(function(a){this.Jb(a)},this))}},a))}}m.resize=function(a){this.pa=a||this.pa;de(this.b(),D().height-42-this.pa-(xc(this.b(),"tabbed")?30:0))};function vk(a,b,c,d){R.call(this);this.j=this.p=a;this.Bb=b||[];this.Kc=c||[];this.yf=!!d;this.we=new tk(a,this.Bb);this.Wi=new tk(a,h,i,this.Kc);this.k=new nk(i,i);this.ha=["comments","tweets"];this.uf={}}t(vk,R);m=vk.prototype;m.v=function(a){vk.f.v.call(this,a);w(a,"conversation");w(a,"ios-scroll");Cc(a,Ij);w(a.firstChild,this.yf?"tweets":"comments")};
m.B=function(){this.fb=C("tabs",this.b());this.we.i(C("comments-content",this.b()));this.Wi.i(C("tweets-content",this.b()));Te(this.k,this.b());P(P(P(P(P(P(P(this.h(),this.fb,"click",q(function(a){a=wc(a.target,"li");this.uc(a)},this)),this.k,"add",q(this.Jb,this)),this.k,"resize",q(function(){z(this.b().firstChild,"comments")?this.we.resize(41):this.Wi.resize(41)},this)),window,"click",q(function(a){!xc(a.target,"comment-input")&&!this.k.z()&&this.k.eb(l)},this)),C("no-comments",this.b()),"click",
q(this.Vk,this)),cc("no-comments",this.b())[1],"click",q(this.Vk,this)),window,"click",q(function(a){!xc(a.target,"comment-input")&&!this.k.z()&&this.k.eb(l)},this));this.we.resize(41);this.Wi.resize(41)};m.Vk=function(a){a.preventDefault();a.stopPropagation();this.k.eb(i)};
m.Jb=function(a){var b=sk(S.a().d,this.j.id,a.text,a.Ge,a.Yi,a.O,a.El,q(function(a){var b=this.uf[a.time.getTime()];b.id="infocomment-"+a.id;uk(this.we,a,b)},this)),c=this.we.ic(b);this.uf[b.time.getTime()]=c;a.Ge&&!a.O&&(FB.api("/me/feed","POST",{message:a.text,name:this.j.name,link:this.j.link,picture:this.j.Mb,caption:"on XYLO",description:this.j.description},aa()),wf(this.k.wa,l))};m.uc=function(a){u(this.ha,function(b){A(this.fb.parentElement,b,z(a,b));this.N=z(a,b)?b:this.N},this)};function wk(a,b,c,d,e,g){R.call(this);u(a.ai,function(a){var b=a.e();b&&b.media.id==this.id?(this.Nn=a,u(a.Df,function(a){a.ke||(this.$d[a.n.id]=a.n)})):this.$d={}},a);this.j=this.p=a;this.oi=g||k;this.ig=c||k;this.wk=d||k;this.Lm=l;this.Oj=!b;this.mg=EMBED||!!e;this.wb=[];this.Cf={};this.Bb=[];this.xe={};this.dd={};this.uf={};this.Kc=[];this.xf={};this.k=new nk(i,i,l,l,l,i);this.Gc=new Ff("Star");xf(this.Gc,16,i);this.xh=new Ff("Facebook");this.Zi=new Ff("Twitter");this.Ya=new Ff("Play");this.ld=
new Ff("Send");xf(this.ld,16,i);this.ze=new Ff("Create Poll");this.pa=0}t(wk,R);m=wk.prototype;m.W=function(){this.g=H(qj,{media:this.j,Sa:EMBED})};m.v=function(a){wk.f.v.call(this,a);var b=H(qj,{media:this.j,description:this.j.description?Wj(this.j.description):"",Bc:eg(this.j),Vm:this.ig?this.ig.id:k,bn:!S.a().d.D,Sa:EMBED});a.innerHTML=b.innerHTML};
m.B=function(){wk.f.B.call(this);this.Ef=C("viewers",this.b());var a=C("picture",this.b()),b=C("ytvideo",this.b()),c=C("scrollable",this.b()),d=C("scrollable",a),e=C("publisher",this.b()),g=C("title",this.b()),j=C("links",this.b());this.t=C("loading",this.b());var p=a.firstChild;this.yj=C("info-contents",this.b());this.vb=C("user-poll",this.b());this.Yp=C("tweet-holder",this.b());this.Nb=C("tweets",this.b());this.Yc=C("dot-nav",this.b());this.K=C("comments",this.b());this.gd=C("no-comments",this.b());
Te(this.k,this.b());this.Gc.i(C("star",this.b()));wf(this.Gc,ng(S.a().d,this.j));this.xh.i(C("facebook",this.b()));this.Zi.i(C("twitter",this.b()));this.Ya.i(C("play",this.b()));this.ld.i(C("send",this.b()));this.ze.i(C("create-poll-button",this.b()));this.Xi=new id(5E3);this.bq=C("watch-with",this.b());this.Sb=C("create-poll",this.b());this.Ec=C("send-media",this.b());this.lb=C("fb-login",this.b());this.lg=C("login-promo",this.b());A(this.b(),"mini",this.mg);O(this.t,S.a().d.D);O(this.ze.b(),S.a().d.fj==
mg);!this.Oj||this.j.Pj?xk(this,l,this.j.description,this.j.Gl,this.j.mf,this.j.Ab,this.j.cl):this.Oj&&this.load();if(!S.a().d.D&&(w(this.lb,"show"),w(this.lg,"show"),w(this.b(),"logged-out"),P(this.h(),this.lb,"click",q(this.login,this)),FB.XFBML.parse(),!CHECKED_LOGIN)){CHECKED_LOGIN=i;w(this.lb,"spin");var r=this.lb;FB.getLoginStatus(function(a){"connected"===a.status?X("/_login",q(function(a){200==Gh(a.target)&&(a=Y(a.target),Pg(S.a(),a.current_user),x(r,"show"),x(r,"spin"),S.a().c("logged-in"))},
this),"POST"):x(r,"spin")})}P(P(P(P(P(P(P(P(P(P(P(P(P(P(P(P(P(P(P(P(P(P(P(this.h(),window,"resize",za(L,q(this.resize,this))),e,"click",q(function(){Z.a().c("media-list",this.j.ta.name,h,"/admin/_media/publisher/"+this.j.ta.id,this.j.ta.Q,this.j.ta.description,this.j.ta.link,"/_publisher/"+this.j.ta.id)},this)),this.Gc,"action",q(function(){fg.a().c("star",this.j,ef(this.Gc));X("/_star",h,"POST","media_id="+this.j.id+(!ef(this.Gc)?"&delete=1":""))},this)),this.xh,"action",q(this.rn,this)),this.Zi,
"action",q(this.Gn,this)),this.Ya,"action",q(this.wn,this)),this.ld,"action",q(this.Dn,this)),C("local",this.b()),"click",q(function(){O(C("link-select",this.b()),i);C("link-input",this.b()).select()},this)),this.ze,"action",q(this.eo,this)),this.k,"add",q(this.Jb,this)),this.gd,"click",q(function(a){a.preventDefault();a.stopPropagation();this.k.eb(i)},this)),this.k,"focus",q(function(){this.resize(0,i)},this)),this.k,"resize",q(function(){this.resize()},this)),this.Yc,"click",q(function(a){z(a.target,
"dot")&&(yk(this,a.target),this.Xi.stop())},this)),this.Xi,kd,q(function(){var a=this.Ae&&mc(this.Ae)||C("dot",this.b());L(q(function(){yk(this,a)},this))},this)),window,"click",q(function(a){!xc(a.target,"comment-input")&&!this.k.z()&&(this.k.eb(l),this.resize(0))},this)),p,"load",function(){O(p,i);L(function(){Q(p).height<Q(a).height+50&&w(p,"fix-height");Q(p).width>2*Q(a).width?w(p,"pan-left"):Q(p).height>2*Q(a).height&&w(p,"pan-top");p.style.marginTop=-Q(p).height/2+"px";p.style.marginLeft=-Q(p).width/
2+"px";w(p,"show")})}),c,"scroll",q(function(){a.style.top=c.scrollTop/2+"px"},this)),d,"scroll",q(function(){var d=C("ytvideo",this.b()),r=IPHONE&&10<c.scrollTop?0:((this.mg?100:120)-c.scrollTop)/100;he(e,Math.min(1,Math.max(r,0)));he(g,Math.min(1,Math.max(r,0)));he(j,Math.min(1,Math.max(r,0)));he(p,Math.min(0.5,Math.max(r,0.1)));d&&he(d,Math.min(0.5,Math.max(r,0.1)));he(b,Math.min(0.5,Math.max(r,0.1)));A(a,"scrolled",10<c.scrollTop)},this)),this.K,"scroll",q(this.Zn,this)),this.K,"click",q(this.mh,
this)),this.Nb,"click",q(this.Ho,this)),C("desc-link",this.b()),"click",q(function(){var b=Nb(a,"scrolled");(new Le(c,[c.scrollLeft,c.scrollTop],[c.scrollLeft,b?this.mg?70:170:0],300)).play()},this));this.ig&&P(this.h(),C("prev-link",this.b()),"click",q(function(){Z.a().c(Kg,this.ig,i,h,this.k.z())},this));this.wk&&this.k.Ma(this.wk);DESKTOP&&!IPAD&&(Mg(Ng.a(),this.ld.b(),"left",{text:"Send"}),Mg(Ng.a(),this.xh.b(),"left",{text:"Post to Facebook"}),Mg(Ng.a(),this.Zi.b(),"left",{text:"Tweet"}),Mg(Ng.a(),
this.Gc.b(),"left",{text:"Save"}),Mg(Ng.a(),C("eye-icon",this.b()),"left",{text:"Seen by"}),Mg(Ng.a(),C("friends-icon",this.b()),"right",{text:"Visible by anybody"}));IPHONE&&new YT.Player(b,{height:"100%",width:"100%",videoId:this.j.Xb,playerVars:{controls:0,showinfo:0}});this.j.subscribe(bg,function(a){zk(this,a,i)},this);this.j.subscribe(cg,this.ti,this);this.j.subscribe("add-tweet",function(a){this.ud(a,i)},this);this.j.subscribe(dg,function(a,b,c){Ak(this,a,!c)},this);V.a().subscribe(Qh,function(){x(this.Ya.b(),
"play-loading")},this);V.a().subscribe("no-media",function(){x(this.Ya.b(),"play-loading")},this);S.a().d.subscribe("set-starred",function(){wf(this.Gc,ng(S.a().d,this.j))},this);S.a().subscribe("logged-in",function(){this.lg&&(x(this.lg,"show"),L(q(function(){O(this.lg,l)},this),600));this.k&&O(this.k.b(),i);this.b()&&x(this.b(),"logged-out");this.load(i)},this);this.resize()};
m.load=function(a){X("/_info/"+this.j.id,q(function(b){var c=oh(Hh(b.target)),b=c.description,d=c.seen,e=c.tweets,g=c.comments,c=c.poll;a?c&&(this.j.cl=c,C("poll-options",this.vb).innerHTML="",x(this.vb,"voted"),Bk(this,c)):xk(this,i,b,e,d,g,c)},this))};
function xk(a,b,c,d,e,g,j){O(a.t,l);c?(a.j.description=c,C("description",a.b()).innerHTML=Wj(c),O(C("scrollable",a.b()),i)):(O(C("desc-link",a.b()),l),O(C("scrollable",a.b()),l));e&&(a.wb=Sa(e,function(a){a=b?Qg(S.a(),a):a;a.id!=S.a().d.id&&(O(this.Ef,i),this.Lm=i,Ak(this,a,l));return a},a));Rb(a.j.$d,function(a){Ak(this,a,i)},a);d&&(a.Kc=Sa(d,function(a){a=b?new rk(a):a;this.ud(a);this.Ae=this.Yc.firstChild;w(this.Ae,"selected");return a},a),d.length&&a.Xi.start());c=[];g&&(a.K&&O(a.K.parentElement,
i),O(a.gd,!g.length),c=Sa(g,function(a){a=b?new Sh(a):a;a.O||zk(this,a);return a},a));j&&(Bk(a,j),a.j.cl=j);a.resize();b&&(a.j.Gl=a.Kc,a.j.Ab=c,a.j.mf=a.wb,a.j.Pj=i)}
m.eo=function(){O(this.Sb,i);if(!this.Pn){var a=new Ff("CREATE");a.i(C("submit-poll",this.b()));a.da(l);var b=C("poll-title",this.Sb),c=C("option-input-1",this.Sb),d=C("option-input-2",this.Sb),e=C("option-inputs",this.Sb);P(P(P(P(P(P(this.h(),a,"action",q(function(){O(this.Sb,l);var a;a=e.children;var c=function(a,b){var c=a+(b.value?b.value+"|":"");b.value="";return c},d=this;if(a.reduce)a=d?a.reduce(q(c,d),""):a.reduce(c,"");else{var r="";u(a,function(a){r=c.call(d,r,a)});a=r}b.value&&a&&(X("/_poll",
q(function(a){a=Y(a.target);Bk(this,a)},this),"POST","media_id="+this.j.id+"&title="+b.value+"&options="+a),b.value="",O(this.ze.b(),l))},this)),new hf(b),"key",q(function(){L(q(function(){a.da(b.value&&c.value&&d.value)},this))},this)),new hf(c),"key",q(function(){L(q(function(){a.da(b.value&&c.value&&d.value)},this))},this)),new hf(d),"key",q(function(){L(q(function(){a.da(b.value&&c.value&&d.value)},this))},this)),C("add-option",this.Sb),"click",q(function(){var a=E("input",{type:"text",placeholder:"Option "+
(e.children.length+1)});e.appendChild(a)},this)),C("close",this.Sb),"click",q(function(){O(this.Sb,l)},this));this.Pn=i}};
m.login=function(){w(this.lb,"disabled");if(IPAD)return window.location.href="https://m.facebook.com/dialog/oauth?client_id="+FB_APP_ID+"&response_type=code&redirect_uri="+HOST_URL+"&scope=email",l;var a=C("message",this.lb);FB.login(q(function(b){b.authResponse?(x(a,"show"),w(this.lb,"disabled"),w(this.lb,"spin"),X("/_login",q(function(a){200==Gh(a.target)&&(a=Y(a.target),Pg(S.a(),a.current_user),x(this.lb,"show"),x(this.lb,"spin"),S.a().c("logged-in"))},this),"POST")):x(this.lb,"disabled")},this),
{scope:"email"});var b=E("a",{href:"https://www.facebook.com/dialog/oauth?client_id="+FB_APP_ID+"&response_type=code&redirect_uri="+HOST_URL+"&scope=email"},"Click here if you have a popup blocker");a.innerHTML="";a.appendChild(b);w(a,"show");P(this.h(),a,"click",function(a){a.stopPropagation();window.onbeforeunload=Be()})};
function Bk(a,b){O(a.ze.b(),l);var c=C("status",a.vb),d=C("poll-options",a.vb);a.vb.id=b.id;G(c,b.title.toUpperCase()+" ("+b.vote_count+" VOTES)");u(b.options,function(a){var g=H(Lj,{name:a.name,Jn:Math.round(100*(a.vote_count/b.vote_count))+"%"});d.appendChild(g);a.voted?Ck(this,b,g):P(this.h(),g,"click",q(function(){S.a().d.D&&!z(this.vb,"voted")&&(a.vote_count+=1,b.vote_count+=1,Ck(this,b,g),G(c,b.title.toUpperCase()+" ("+b.vote_count+" VOTES)"),X("/_poll",h,"POST","id="+a.id))},this));P(this.h(),
g,"click",q(function(){S.a().d.D||Ng.a().show(g,"top","tooltip",{text:q(ea("You must login to vote"),this)})},this))},a);O(a.vb,i);S.a().d.D||(w(a.vb,"voted"),u(lc(d),function(a,c){var d=Math.round(parseInt(100*(b.options[c].vote_count/b.vote_count),10))+"%";G(C("percent-number",a),d);C("percent",a).style.width=d},a))}
function Ck(a,b,c){C("status",a.vb);var d=C("poll-options",a.vb);w(a.vb,"voted");tc(C("name",c));w(c,"selected");u(lc(d),function(a,c){var d=Math.round(parseInt(100*(b.options[c].vote_count/b.vote_count),10))+"%";G(C("percent-number",a),d);C("percent",a).style.width=d},a)}m.oc=function(){return this.k.fg()||!!this.k.Fo||!!this.k.z()};
function yk(a,b){if(b){u(lc(a.Yc),function(a){return x(a,"selected")});a.Ae=b;w(a.Ae,"selected");var c=Wa(lc(a.Yc),function(a){return a==b});(new Le(a.Nb,[a.Nb.scrollLeft,a.Nb.scrollTop],[320*c,a.Nb.scrollTop],200)).play();a.resize()}}
m.Jb=function(a){var b=sk(S.a().d,this.j.id,a.text,a.Ge,a.Yi,a.O,a.El,q(function(a){var b=this.uf[a.time.getTime()];b.id="infocomment-"+a.id;Dk(this,a,b)},this)),c=zk(this,b);this.uf[b.time.getTime()]=c;a.Ge&&!a.O&&FB.api("/me/feed","POST",{message:a.text,name:this.j.name,link:this.j.link,picture:this.j.Mb,caption:"on XYLO",description:this.j.description},aa());pg.a().$(this.j.id,a.Ge,a.Yi)};
m.ud=function(a,b){this.xf[a.id]=a;var c=Wj(a.text),c=c.replace(/#(\S+)/g,function(a,b){return'<a target="_blank" href="http://twitter.com/search?q=%23'+b+'">'+a+"</a>"}),c=c.replace(/@(\S+)/g,function(a,b){return'<a target="_blank" href="http://twitter.com/'+b+'">'+a+"</a>"}),c=H(sj,{gc:a,text:c,timestamp:md(a.time.getTime()),prefix:"infotweet"}),d=E("div","dot");nd(ld.a(),a.time,C("timestamp",c));b?(jc(this.Nb,c,0),jc(this.Yc,d,0),10<lc(this.Nb).length&&(kc(this.Nb.lastChild),kc(this.Yc.lastChild),
yk(this,d))):(this.Nb.appendChild(c),this.Yc.appendChild(d));this.resize();O(oc(this.Nb),i)};
function zk(a,b,c){a.Bb.push(b);O(a.gd,l);var d=Wj(b.text),d=d.replace(/@\[(\d+):([a-zA-z\s]+)\]/g,function(a,b,c){return'<a href="#user:'+b+'">'+c+"</a>"}),d=H(tj,{prefix:"infocomment",$:b,text:d,Zk:b.n.id==S.a().d.id});nd(ld.a(),b.time,C("timestamp",d));b.O?C("replies",a.dd[b.O]).appendChild(d):a.K.appendChild(d);b.id&&Dk(a,b,d);u(b.hf,function(a){zk(this,a,c)},a);!b.O&&c&&(a.K.scrollTop=a.K.scrollHeight,a.yj.firstChild.scrollTop=a.yj.firstChild.scrollHeight);return d}
function Dk(a,b,c){a.xe[b.id]=b;c.id="infocomment-"+b.id;if(!b.O){a.dd[b.id]=c;var d=C("reply-input",c),c=C("reply-textarea",c);P(a.h(),c,"click",q(function(){if(!z(d,"decorated")){var a=new nk(l,i,i,l,l,i);a.i(d);a.vi(b,b.n);P(this.h(),a,"add",q(function(a){S.a().d.D&&this.Jb(a)},this))}S.a().d.D||Ng.a().show(d,"top","tooltip",{text:q(ea("You must login to reply"),this)})},a))}}
function Ak(a,b,c){if(!c&&a.Cf[b.id])x(a.Cf[b.id],"online");else if(b.id!=S.a().d.id){if(!a.Cf[b.id]){var d=H(rj,{n:b});a.Cf[b.id]=d;jc(a.Ef,d,1);P(a.h(),d,"click",function(){Z.a().c(Lg,b)});DESKTOP&&!IPAD&&Mg(Ng.a(),d,"top",{text:q(function(){return b.He()+(z(d,"online")?" is watching":" saw this")},a)})}O(a.Ef,i);A(a.Cf[b.id],"online",c)}}m.Ho=function(a){var a=a.target,b=xc(a,"tweet");b&&(b=this.xf[b.id.split("-")[1]],z(a,"reply")&&Z.a().c("reply-tweet",b))};
m.mh=function(a){var a=a.target,b=xc(a,"comment");b&&(b=this.xe[b.id.split("-")[1]],z(a,"reply")?C("reply-textarea",this.dd[b.O?b.O:b.id]).focus():z(a,"remove")&&this.j.c(cg,b))};m.ti=function(a){kc(B("infocomment-"+a.id));Za(this.Bb,function(b){return b.id==a.id})};
m.Zn=function(){A(this.K.parentElement,"top-grad",!!this.K.scrollTop);var a=this.K.style.maxHeight,b=D().height,a=a.substring(0,a.length-2),c=Q(this.K).height;A(this.K.parentElement,"bottom-grad",this.K.scrollTop<this.K.scrollHeight-a-5&&c>=a&&640<b)};
m.resize=function(a,b){this.pa=a!=h?a:this.pa;if(this.b()){var c=D().height+(IPHONE&&SAFARI?61:0)-(EMBED?0:40)-this.pa-(xc(this.b(),"tabbed")?30:0)-(this.mg&&z(this.b(),"slide")?40:0);de(this.b().firstChild,c);b&&L(q(function(){(new Le(this.b().firstChild,[this.b().firstChild.scrollLeft,this.b().firstChild.scrollTop],[this.b().firstChild.scrollLeft,this.b().firstChild.scrollHeight],400)).play()},this),0)}};
m.rn=function(){O(B("overlay"),i);FB.ui({method:"feed",name:this.j.name,link:this.j.link,Q:this.j.Mb,caption:"on XYLO",description:this.j.description},function(){O(B("overlay"),l)});Ek(pg.a(),this.j.id,i,l)};
m.Gn=function(){var a="https://twitter.com/share?url="+this.j.link+"&text=I'm watching "+this.j.name+" "+this.j.link;if(IPHONE||IPAD){var b=document.createElement("a");b.setAttribute("href",a);b.setAttribute("target","_blank");a=document.createEvent("HTMLEvents");a.initEvent("click",i,i);b.dispatchEvent(a)}else b=window.open(a,"Tweet","height=320,width=550"),b.moveTo(screen.width/2-225,screen.height/2-150),b.focus(),Ek(pg.a(),this.j.id,l,i)};
m.wn=function(){w(this.Ya.b(),"play-loading");if(this.oi)U.a().l.ee(this.oi),U.a().c(Mf,this.oi,i);else{var a=ig(this.p);V.a().c(Nf,a)}Z.a().c("navigate",B("info"),i)};
m.Dn=function(){if(!z(this.Ec,"decorated")){var a=new nk(l,i,l,i,l,i);a.i(C("recipients",this.Ec));var b=new nk(l,l,l,l,i,i);b.i(C("send-message",this.Ec));P(P(this.h(),b,"add",q(function(c){var d=Sb(a.fc);d.length&&(u(d,function(a){var b=new Ii({from_user:S.a().d,to_user:a.id,text:c.text||"Sent you a video!",media:this.p});b.time=new zd;b.rb=md(b.time.getTime());S.a().c("new-message",b);X("/_message",c.Kf,"POST","from_id="+S.a().d.id+"&to_id="+a.id+"&text="+b.text+"&media_id="+this.p.id)},this),
a.clear(),b.clear(),wf(this.ld,l),O(this.Ec,l))},this)),C("close",this.Ec),"click",q(function(){O(this.Ec,l);wf(this.ld,l)},this));w(this.Ec,"decorated")}O(this.Ec,ef(this.ld))};function Fk(a,b,c,d,e,g){R.call(this);this.za=Hf(S.a().d);this.Ek=a||k;this.Af=b||k;this.sc={};this.Qi=c||k;this.Dd=d||k;this.Ej=g||k;this.Zm=e||k;this.th=this.za?new Uj:k;this.Ud=this.kk=0}t(Fk,R);
Fk.prototype.v=function(a){Fk.f.v.call(this,a);a.innerHTML="";a.scrollTop=0;w(this.b(),"ios-scroll");(this.Dd||this.Qi)&&Gk(this);!this.Dd&&this.Ej&&X(this.Ej,q(function(a){a=Y(a.target);a.description&&this.Ve?(C("description",this.Ve).innerHTML=Wj(a.description),this.kk=Q(this.Ve).height,this.resize()):a.description&&Gk(this)},this));this.t=E("div","loading",E("div","loading-spinner"));this.b().appendChild(this.t);O(this.t,l);z(this.b(),"starred")&&(this.Xd=E("div","no-comments","Favorities will appear here."),
this.b().appendChild(this.Xd));this.fd=E("div","medias");this.b().appendChild(this.fd);P(this.h(),window,"resize",za(L,q(this.resize,this)));this.Af?(O(this.t,i),X(this.Af,q(function(a){O(this.t,l);a=oh(Hh(a.target));a=Sa(a,function(a){return new ag(a)});u(a,this.Zg,this);this.Ud=Q(this.fd).height;this.resize()},this))):this.Ek&&(u(this.Ek,this.Zg,this),this.Ud=Q(this.fd).height,this.resize())};
Fk.prototype.Zg=function(a){this.Xd&&O(this.Xd,l);var b=H(Jj,{media:a}),c=C("list-play",b),d=C("list-plus",b);this.fd.appendChild(b);if(this.za){var e=this.th,g=new Tj(b,h);Vj(e,g)}P(P(P(this.h(),b,"click",q(function(){Z.a().c(Kg,a)},this)),c,"click",q(function(b){b.preventDefault();b.stopPropagation();b=ig(a);V.a().c(Nf,b)},this)),d,"click",function(b){b.preventDefault();b.stopPropagation();Rf().c(sg,a,i)});this.sc[a.id]=b};
Fk.prototype.resize=function(){de(this.b(),D().height+(IPHONE&&SAFARI?61:0)-(DESKTOP?40:0)-(xc(this.b(),"tabbed")?30:0))};function Gk(a){a.Ve=H(yj,{Mb:a.Qi,description:a.Dd?Wj(a.Dd):"",link:a.Zm});a.b().appendChild(a.Ve);a.kk=Q(a.Ve).height;a.resize()}Fk.prototype.Zh=function(a,b){X("/admin/_addprogram",q(function(b){b=oh(Hh(b.target));b=new hg(b);a.c(rg,b)},this),"POST","channel="+a.id+"&media="+b.id)};function Ii(a){this.id=a.id;this.T=Qg(S.a(),a.from_user);this.Ti=Qg(S.a(),a.to_user);this.text=a.text;this.media=a.media?"brkn.model.Media"==ja(a.media)?a.media:gg(fg.a(),a.media):k;this.$a=a.read;this.rb=(this.time=a.time?yd(a.time+"Z"):k)?md(this.time.getTime()):k}Ii.prototype.Kg=function(){X("/_message",Be(),"POST","id="+this.id+"&read=1");this.$a=i;S.a().d.c("read-message",this.T.id)};function Hk(a){return'<div class="message'+(a.om?" flip":"")+'"><a href="#user:'+J(a.message.T.id)+'"><div class="picture" style="background:'+J(a.message.T.color)+'"><img src="'+J(a.message.T.Q)+'"/></div></a><div class="body"><a class="user" href="#user:'+J(a.message.T.id)+'">'+J(a.message.T.name)+'</a>  <div class="texts"><div class="text">'+J(a.message.text)+'<div class="timestamp">'+J(a.message.rb)+"</div></div></div></div></div>"}
function Ik(a){return'<div class="text">'+J(a.message.text)+'<div class="timestamp">'+J(a.message.rb)+"</div></div>"};function Jk(a,b){R.call(this);this.Ea=a||k;this.Aa=b||[];this.Uh={};this.k=new nk(l);this.pa=0;this.ra=this.Ea.id==S.a().d.id;this.w=new Ff("Notifications");xf(this.w,16,i);this.m=0}t(Jk,R);
Jk.prototype.v=function(a){Jk.f.v.call(this,a);this.ra?(this.w.i(C("toggle",this.b())),this.$l=C("container",this.b()),this.Wa=C("messages",this.b()),A(this.Wa,"inbox",this.ra),this.t=E("div","spinner"),this.Wa.appendChild(this.t),O(this.t,l),this.wc=E("div","no-comments",this.ra?"No Messages":"Start a private conversation."),this.Wa.appendChild(this.wc),O(this.wc,l),P(P(P(this.h(),this.w.b(),"click",q(function(){A(this.b(),"show",ef(this.w))},this)),this.Wa,"click",q(function(a){a.preventDefault();
a.stopPropagation()},this)),window,"click",q(function(a){ef(this.w)&&(xc(a.target,"inbox")||L(q(function(){x(this.b(),"show");wf(this.w,l)},this)))},this)),O(this.t,i),X("/_message/"+this.Ea.id,q(function(a){O(this.t,l);a=Y(a.target);this.m=0;this.Aa=Sa(a,function(a){a=new Ii(a);this.m+=!a.$a?1:0;Kk(this,a);return a},this);O(this.wc,!this.Aa.length);G(this.w.b().firstChild,0<this.m?this.m.toString():"")},this))):(a.innerHTML="",a.scrollTop=0,this.Wa=E("div","messages"),this.b().appendChild(this.Wa),
this.t=E("div","spinner"),this.Wa.appendChild(this.t),O(this.t,l),this.wc=E("div","no-comments",this.ra?"No Messages":"Start a private conversation."),this.Wa.appendChild(this.wc));this.ac=E("div","no-comments","Load previous messages");this.Wa.appendChild(this.ac);O(this.ac,!this.ra&&10<=this.Aa.length);O(this.wc,i);this.ra?(this.Aa=this.Aa.reverse(),S.a().d.subscribe("read-message",function(a){if((a=this.Uh[a])&&z(a,"unread"))x(a,"unread"),G(this.w.b().firstChild,0<--this.m?this.m.toString():"")},
this)):(Te(this.k,this.b()),P(P(P(P(P(this.h(),window,"click",q(function(a){!xc(a.target,"comment-input")&&!this.k.z()&&(this.k.eb(l),this.resize(0))},this)),this.wc,"click",q(function(a){a.preventDefault();a.stopPropagation();this.k.eb(i)},this)),this.ac,"click",q(this.an,this)),this.k,"add",q(this.Jb,this)),window,"resize",za(L,q(this.resize,this))));Qa(this.Aa,function(a){Kk(this,a)},this);S.a().subscribe("new-message",function(a){if(a.T.id!=S.a().d.id&&(a.T.id==this.Ea.id||a.Ti.id==this.Ea.id)){if(this.ra){var c=
i,d=this.Uh[a.T.id];d&&(c=!z(d,"unread"),kc(d));c&&G(this.w.b().firstChild,0<++this.m?this.m.toString():"")}Kk(this,a,this.ra);this.resize()}},this);this.resize()};
Jk.prototype.an=function(){this.ac&&O(this.ac,l);O(this.t,i);X("/_message/"+this.Ea.id+"?offset="+this.Aa.length,q(function(a){a=Y(a.target);if(a.length){this.jg=k;var b=E("div","separator");jc(this.Wa,b,3)}O(this.t,l);this.ac&&O(this.ac,!!a.length);Qa(a,function(a){a=new Ii(a);this.Aa.push(a);Kk(this,a,i);return a},this);a.length&&(this.b().scrollTop=0,this.jg=k,this.b().scrollTop=b.offsetHeight)},this))};
function Kk(a,b,c){O(a.wc,l);a.ac&&O(a.ac,!a.ra&&10<=a.Aa.length);var d,e;if(!a.ra&&a.jg&&a.jg.T.id==b.T.id)d=H(Ik,{message:b}),C("texts",a.xk).appendChild(d),b.media&&(e=H(Jj,{media:b.media}),C("texts",a.xk).appendChild(e)),d=C("timestamp",d);else{var g=H(Hk,{message:b,om:b.T.id==S.a().d.id});a.jg=b;a.xk=g;c?jc(a.Wa,g,3):a.Wa.appendChild(g);d=C("timestamp",g);A(g,"unread",!b.$a);if(a.ra){if(a.Uh[b.T.id]=g,P(a.h(),g,"click",q(function(){b.$a||(b.Kg(),x(g,"unread"),G(this.w.b().firstChild,0<--this.m?
this.m.toString():""));Z.a().c(Lg,b.T)},a)),c){var j=B("mp3-1");j.load();j.play()}}else b.media&&(e=H(Jj,{media:b.media}),C("texts",g).appendChild(e))}nd(ld.a(),b.time,d);c||(a.b().scrollTop=a.b().scrollHeight);!a.ra&&(!b.$a&&b.id&&Z.a().sh==b.T.id)&&b.Kg();e&&(c=C("list-play",e),d=C("list-plus",e),P(P(P(a.h(),e,"click",q(function(){Z.a().c(Kg,b.media)},a)),c,"click",q(function(a){a.preventDefault();a.stopPropagation();a=ig(b.media);V.a().c(Nf,a)},a)),d,"click",function(a){a.preventDefault();a.stopPropagation();
Rf().c(sg,b.media,i)}))}Jk.prototype.Jb=function(a){var b=new Ii({from_user:S.a().d,to_user:Qg(S.a(),this.Ea),text:a.text});b.time=new zd;b.rb=md(b.time.getTime());Kk(this,b);X("/_message",a.Kf,"POST","from_id="+S.a().d.id+"&to_id="+this.Ea.id+"&text="+a.text)};Jk.prototype.resize=function(a){this.ra?this.dispatchEvent("resize"):(this.pa=a||this.pa,de(this.b(),D().height+(IPHONE&&SAFARI?61:0)-(DESKTOP?40:0)-41-this.pa-(xc(this.b(),"tabbed")?30:0)))};function Lk(a){return'<div class="user'+(a.media?" media":"")+'"><div class="name">'+J(a.n.name)+'</div><div class="picture" style="background:'+J(a.n.color)+'"><img src="'+J(a.n.Q)+'"/></div>'+(a.timestamp?'<div class="timestamp">'+J(a.timestamp)+"</div>":"")+(a.media?'<div class="media"><div class="watched">LAST WATCHED </div><div class="watching">NOW WATCHING </div><a class="media-link">'+J(a.media.name)+"</a></div>":"")+"</div>"};function Mk(a,b){R.call(this);this.me=a||k;this.Tg={};this.hd=[];this.Zd=[];this.bc=[];this.cc=!!b;this.pa=0}t(Mk,R);
Mk.prototype.v=function(a){Mk.f.v.call(this,a);a.innerHTML="";a.scrollTop=0;w(a,"friendlist");w(a,"ios-scroll");this.cc||(a=E("div","label show-all",E("a",{href:"#friendlist:1"},"ALL FRIENDS >")),this.b().appendChild(a));this.ug=E("div","label online-friends-label",this.cc?"ONLINE FRIENDS":E("a",{href:"#friendlist:1"},"ONLINE FRIENDS"));O(this.ug,l);this.b().appendChild(this.ug);this.di=E("div","online-friends");this.b().appendChild(this.di);this.ff=E("div","label",this.cc?"RECENTLY ONLINE":E("a",
{href:"#friendlist:1"},"RECENTLY ONLINE"));O(this.ff,l);this.b().appendChild(this.ff);this.ef=E("div","recent-friends");this.b().appendChild(this.ef);this.cc&&(this.sg=E("div","label","OFFLINE FRIENDS"),O(this.sg,l),this.b().appendChild(this.sg),this.Yh=E("div","offline-friends"),this.b().appendChild(this.Yh),this.cc&&this.resize(),P(this.h(),window,"resize",q(function(){this.cc&&L(q(function(){this.resize()},this))},this)));if(this.me)Oa.sort.call(this.me,function(a,b){return a.H&&!b.H?1:!a.H&&b.H?
-1:!a.H&&!b.H?0:a.H.getTime()<b.H.getTime()?1:-1}||fb),u(this.me,function(a){Nk(this,a)},this),O(this.b(),i);else{var a=S.a(),b=q(function(a){this.me=a;Oa.sort.call(this.me,function(a,b){return a.H&&!b.H?1:!a.H&&b.H?-1:!a.H&&!b.H?0:a.H.getTime()<b.H.getTime()?1:-1}||fb);u(this.me,function(a){Nk(this,a)},this);O(this.b(),i)},this);a.Tj?b&&b(a.Bh):X("/_friends",q(function(a){a=Y(a.target);this.Bh=Sa(a,function(a){return Qg(this,a)},this);this.Tj=i;b&&b(this.Bh)},a))}S.a().subscribe(Og,this.Io,this)};
function Nk(a,b){if(!a.Tg[b.id]){var c=l,d=b.H?md(b.H.getTime()):k,e=H(Lk,{n:b,timestamp:d,media:b.Tb});b.H&&432E5>s()-b.H.getTime()&&nd(ld.a(),b.H,C("timestamp",e));b.pb?(O(a.ug,i),w(e,"online"),u(a.hd,function(a,d){a.He()>b.He()&&(jc(this.di,e,d),db(this.hd,d,0,b),c=i)},a),c||(a.di.appendChild(e),a.hd.push(b))):d&&(3>a.bc.length||a.cc)?(u(a.bc,function(a,d){a.H&&(b.H&&a.H.getTime()<b.H.getTime())&&(jc(this.ef,e,d),db(this.bc,d,0,b),c=i)},a),c||(a.ef.appendChild(e),a.bc.push(b)),O(a.ff,i),O(a.ef,
i)):a.cc&&(!Va(a.bc,function(a){return b.id==a.id})&&!Va(a.Zd,function(a){return b.id==a.id}))&&(O(a.sg,i),u(a.Zd,function(a,d){a.H&&(b.H&&a.H.getTime()<b.H.getTime())&&(jc(this.Yh,e,d),db(this.Zd,d,0,b),c=i)},a),c||(a.Yh.appendChild(e),a.Zd.push(b)));a.cc||(O(a.ff,!a.hd.length&&a.bc.length),O(a.ef,!a.hd.length&&a.bc.length));a.Tg[b.id]=e;d=C("media-link",e);P(a.h(),e,"click",q(function(){Z.a().c(Lg,b)},a));d&&P(a.h(),d,"click",q(function(a){a.stopPropagation();a.preventDefault();Z.a().c(Kg,b.Tb)},
a))}}Mk.prototype.Io=function(a){var b=this.Tg[a.id];b&&(kc(b),Vb(this.Tg,a.id),Za(this.Zd,function(b){return b.id==a.id})&&O(this.sg,!!this.Zd.length),Za(this.hd,function(b){return b.id==a.id})&&O(this.ug,!!this.hd.length),Za(this.bc,function(b){return b.id==a.id})&&O(this.ff,!!this.bc.length));Nk(this,a)};Mk.prototype.resize=function(a){this.pa=a||this.pa;de(this.b(),D().height+(IPHONE&&SAFARI?61:0)-42-this.pa-(xc(this.b(),"tabbed")?30:0))};function Ok(a,b){R.call(this);this.Yg=a;this.le=b||k;this.m=0;this.tl=!b;this.ad=l;this.Qj={};this.Mf={};this.Sd={};this.ed={};this.bj={};this.gl={};this.hj=[]}t(Ok,R);
Ok.prototype.v=function(a){Ok.f.v.call(this,a);a.innerHTML="";a.scrollTop=0;w(a,"stream");w(a,"ios-scroll");this.tl&&(this.Ah=E("div","friendlist"),O(this.Ah,l),this.b().appendChild(this.Ah),a=E("div","label","ACTIVITY"),this.b().appendChild(a));this.qe=E("div","activities");this.b().appendChild(this.qe);this.t=E("div","spinner");this.b().appendChild(this.t);O(this.t,l);this.Xd=E("div","no-comments",this.le==S.a().d.id?"Your activity will appear here":"Friends' activity will appear here");this.b().appendChild(this.Xd);
this.Yg&&this.Yg.length&&Pk(this,this.Yg);this.tl&&(this.zh=new Mk(h,l),this.zh.i(this.Ah));S.a().subscribe("new-activity",function(a){(this.le==a.user.id||!this.le&&a.user.id!=S.a().d.id)&&Qk(this,a,h,h,i)},this);P(P(this.h(),this.b(),"scroll",q(function(){!this.ad&&this.b().scrollTop+D().height>this.b().scrollHeight-60&&Rk(this)},this)),window,"resize",za(L,q(this.resize,this)));this.resize()};
function Rk(a){O(a.t,i);X("/_activity"+(a.le?"/"+a.le:"")+"?offset="+a.m,q(function(a){this.Qj[String(a.target.Te)]||(this.Qj[String(a.target.Te)]=i,a=Y(a.target).activities,this.ad=!a.length,A(this.t,"finished",this.ad),O(this.t,this.ad),Pk(this,a))},a))}
function Pk(a,b){a.Mf=[];a.Sd=[];a.ed=[];u(b,function(a){this.m++;switch(a.type){case "session":var a=a.session,b=Xb(this.Mf,a.channel_id,[]);b.push(a);this.Mf[a.channel_id]=b;break;case "liked":this.Sd[a.media.id]||(b=Xb(this.ed,a.media.id,[]),b.push(a),this.ed[a.media.id]=b,b=Xb(this.bj,a.user.id,[]),b.push(a),this.bj[a.user.id]=b);break;case "comment":a=a.comment,b=Xb(this.Sd,a.media.id,[]),b.push(a),this.Sd[a.media.id]=b,this.ed[a.media.id]&&Vb(this.ed,a.media.id)}},a);Rb(a.Mf,function(a){Qk(this,
h,a,"session")},a);Rb(a.Sd,function(a){Qk(this,h,a,"comment")},a);Rb(a.ed,function(a){1<a.length&&Qk(this,h,a,"liked")},a);Rb(a.bj,function(a){Qk(this,h,a,"liked")},a)}
function Qk(a,b,c,d,e){O(a.Xd,l);var b=b||k,c=c||k,g=b?b.type:d,j=[],p=b?[Qg(S.a(),b.user)]:[],r=b?yd(b.time+"Z"):k;c&&u(c,function(a){Va(p,function(b){return b.id==a.user.id})||p.push(Qg(S.a(),a.user));var b=yd((a.time||a.tune_in)+"Z");r=r&&r.getTime()>b.getTime()?r:b;"session"==g?u(a.media,function(a){!this.Sd[a.id]&&(!this.ed[a.id]&&!Va(j,function(b){return b.id==a.id}))&&j.push(a)},this):"liked"==g&&!this.gl[a.media.id]&&(j.push(a.media),this.gl[a.media.id]=i)},a);switch(g){case "session":if(!a.le&&
2>p.length)return;var d=b?b.session:c[0],y=U.a().get(d.channel_id),j=b?b.session.media:j;3<j.length&&(j=j.slice(0,3));b=H(vj,{S:p,Z:y,time:md(r.getTime()),Fl:!!d.tune_out});break;case "comment":j=b?[b.comment.media]:[gg(fg.a(),c[0].media)];b=Sa(b?[b.comment]:c,function(a){a=new Sh(a);a.text=Wj(a.text);a.text=a.text.replace(/@\[(\d+):([a-zA-z\s]+)\]/g,function(a,b,c){return'<a href="#user:'+b+'">'+c+"</a>"});return a});b=H(wj,{Ab:b.reverse().slice(0,3),S:p,media:j[0]});break;case "liked":j=b?[b.media]:
j;b=H(xj,{S:p,Fk:j.length,time:md(r.getTime())});break;default:return}if(j.length){nd(ld.a(),r,C("timestamp",b));d=Wa(a.hj,function(a){return a.time<r.getTime()});db(a.hj,d,0,{time:r,element:b});var F=C("medias",b);u(j,function(a){var b=gg(fg.a(),a),a=H(Jj,{media:b}),c=C("list-play",a),d=C("list-plus",a);C("thumb",a);F.appendChild(a);P(P(P(this.h(),a,"click",function(){Z.a().c(Kg,b)}),c,"click",function(a){a.preventDefault();a.stopPropagation();a=ig(b);V.a().c(Nf,a)}),d,"click",function(a){a.preventDefault();
a.stopPropagation();Rf().c(sg,b,i)})},a);e?jc(a.qe,b,0):c?jc(a.qe,b,d):a.qe.appendChild(b);L(za(w,b,"show"))}}Ok.prototype.resize=function(){var a=D().height+(IPHONE&&SAFARI?61:0)-40-(xc(this.b(),"tabbed")?40:10);de(this.b(),a);Q(this.qe).height<a&&Rk(this)};function Sk(a){R.call(this);this.Ea=this.p=a;this.og=a.id==S.a().d.id;this.ha=EMBED?[]:[this.og?"inbox":"messages","activity","starred"]}t(Sk,R);m=Sk.prototype;m.v=function(a){Sk.f.v.call(this,a);w(a,"profile");w(a,"ios-scroll");Cc(a,Hj,{We:this.og,Sa:EMBED})};
m.B=function(){EMBED||(this.og?X("/_star/"+this.Ea.id,q(function(a){var a=Y(a.target),a=Sa(a,function(a){return new ag(a)}),b=S.a().d;b.wl=a;b.c("set-starred");this.od=new Fk(a);this.od.i(C("starred-content",this.b()))},this)):X("/_message/"+this.Ea.id,q(function(a){var a=Y(a.target),b=0,a=Sa(a,function(a){a=new Ii(a);b+=!a.$a?1:0;return a},this);this.og&&Z.a().c("new-messages",b);this.Aa=new Jk(this.Ea,a);P(this.h(),this.Aa,"resize",za(L,q(this.Xn,this)));this.Aa.i(C("messages-content",this.b()))},
this)));X("/_activity/"+this.Ea.id,q(function(a){a=Y(a.target).activities;window.console.log(this.Ea.id);this.Li=new Ok(a,this.Ea.id);this.Li.i(C("activity-content",this.b()))},this));EMBED||(this.fb=C("tabs",this.b()),P(this.h(),this.fb,"click",q(function(a){a=wc(a.target,"li");this.uc(a)},this)));fg.a().subscribe("star",function(a,b){if(b)this.od.Zg(a);else{var c=this.od,d=c.sc[a.id];d&&(Kc(d),Vb(c.sc,a.id))}},this);P(this.h(),window,"resize",za(L,q(this.Dc,this)));this.Dc()};
m.uc=function(a){u(this.ha,function(b){A(this.fb.parentElement,b,z(a,b));this.N=z(a,b)?b:this.N},this)};m.Dc=function(){var a=D().height+(IPHONE&&SAFARI?61:0)-41-(xc(this.b(),"tabbed")?30:0);de(this.b(),a)};m.Xn=function(){var a=Q(this.b()).height-80;this.Yd&&de(this.Yd.b(),Math.floor(a/2));this.Aa&&de(this.Aa.b(),Math.ceil(a/2))};function Tk(){R.call(this);this.za=Hf(S.a().d);this.Ql=new mk;this.ha={};this.Hc=[];this.ce=[];this.Yb=this.pe=0}t(Tk,R);m=Tk.prototype;
m.B=function(){Tk.f.B.call(this);this.re=C("arrow",this.Ic);this.oh=B("sidebar-content");this.Dk=B("media-list");this.Bg=B("profile");this.Sj=B("friendlist");this.Bj=B("conversation");this.Ic=B("toolbar");this.fb=C("tabs",this.b());this.Xg=C("activities-count",this.b());this.Kh=C("inbox-count",this.b());var a=new hf(document);u(lc(this.fb),function(a){var b=Mb(a)[0];this.ha[b]=a;this.Hc.push(b)},this);S.a().d.D?(Uk(this),this.od=new Sk(S.a().d),this.od.i(B("my-profile"))):(this.ha.stream&&O(this.ha.stream,
l),this.ha.profile&&O(this.ha.profile,l),this.ha.login&&O(this.ha.login,i));this.bi();this.fa&&(DESKTOP||!S.a().d.D||U.a().l.J&&U.a().l.e())?(this.V=B("info"),this.N="info",Vk(this,"info","info")):(this.V=B("stream"),this.N="stream",Vk(this,"info","stream"));var b="left";u(this.Hc,function(a){var d=C(a,this.oh);a==this.N?b="right":w(d,b)},this);this.ce=[this.V,""];w(this.V,"current");S.a().subscribe("logged-in",function(){if(this.za=Hf(S.a().d)){this.Ql.i(B("admin"));var a=H(zj,{name:"ADMIN",className:"admin"});
this.fb.appendChild(a);this.ha.admin=a;this.Hc.push("admin")}},this);Wk(this);P(P(P(P(this.h(),C("back-button",this.Ic),"click",q(function(a){var b=this.ce.shift();this.navigate(b[0],i,b[1]);Wk(this);a.stopPropagation()},this)),this.fb,"click",q(function(a){var b=this.N,e=wc(a.target,"li"),g=Mb(e)[0];"login"==g?this.fa&&this.fa.login():(Vk(this,this.N,g),w(e,"selected"),Wk(this),b!=this.N&&a.stopPropagation(),"stream"==g&&this.Mk(0,i))},this)),this.Ic,"click",q(function(a){((a=wc(a.target,"li"))&&
Mb(a)[0]==this.N||!a)&&(new Le(this.V,[this.V.scrollLeft,this.V.scrollTop],[this.V.scrollLeft,0],300)).play()},this)),a,"key",q(function(a){a.ctrlKey&&"68"==a.keyCode&&Nb(this.b(),"dark")},this));DESKTOP&&N.a().subscribe(pd,function(a){A(this.b(),"toggled",a);L(q(function(){A(this.b(),"collapsed",!a)},this),!a?500:0)},this);Z.a().subscribe("navigate",this.navigate,this);Z.a().subscribe("new-activites",this.Mk,this);Z.a().subscribe("new-messages",this.ln,this);Z.a().subscribe("conversation",this.ho,
this);Z.a().subscribe("media-list",this.mo,this);Z.a().subscribe(Kg,this.ul,this);Z.a().subscribe("friend-list",this.ko,this);Z.a().subscribe(Lg,this.oo,this);U.a().subscribe(Mf,this.bi,this);V.a().subscribe(Nf,this.bi,this);U.a().subscribe(Jf,this.on,this);S.a().subscribe("logged-in",function(){EMBED||(O(this.ha.stream,i),O(this.ha.profile,i),O(this.ha.login,l),Uk(this));this.od=new Sk(S.a().d);this.od.i(B("my-profile"));Wk(this)},this);DESKTOP&&N.a().subscribe("toggle-admin",function(a){A(this.b(),
"admin",a);a?(N.a().c(pd,i),Vk(this,this.N,"admin")):"admin"==this.N&&Vk(this,"admin","info")},this)};function Uk(a){X("/_activity",q(function(a){a=Y(a.target);this.Li=new Ok(a.activities);this.Li.i(B("stream"));Z.a().c("new-activites",parseInt(a.new_count,10))},a))}m.Mk=function(a,b){b&&(this.pe=0,O(this.Xg,l));this.pe+=a;G(this.Xg,this.pe.toString());O(this.Xg,!!this.pe)};
m.ln=function(a,b){b&&(this.Yb=0,O(this.Kh,l));this.Yb+=a;this.Yb=Math.max(this.Yb,0);G(this.Kh,this.Yb.toString());document.title=0<this.Yb?"("+this.Yb.toString()+") XYLO":"XYLO";O(this.Kh,!!this.Yb)};m.bi=function(a){if(a=a||U.a().l.e())if(this.Uc=a.media,!this.fa||this.Uc.id!=this.fa.p.id){var b=this.fa&&this.fa.k.z()?this.fa.k.z():k,c=this.fa?this.fa.j:k;Kc(this.fa);this.fa=new wk(this.Uc,l,c,b,h,a);this.fa.i(B("info"))}};
m.on=function(a){a=a||U.a().l;if((this.Uc=a.e()&&a.e().media)&&(!this.fa||this.Uc.id!=this.fa.p.id))Kc(this.fa),this.fa=new wk(this.Uc),this.fa.i(B("info")),this.ul(this.Uc)};
function Vk(a,b,c){var d=C(c,a.oh),e=Pa(a.Hc,b),b=Pa(a.Hc,c),g=(e=e<b)?0:a.Hc.length-1,j=e?g<a.Hc.length:0<=g;for(g;j;g+=e?1:-1){var p=C(a.Hc[g],a.oh);if(e&&g>b||!e&&g<b)w(p,"right"),x(p,"left");else if(e&&g<b||!e&&g>b)A(p,"left",e),w(p,"right");else if(g==b){x(p,"right");x(p,"left");break}}a.N=c;db(a.ce,0,0,[a.V,""]);x(a.V,"current");a.V=d;w(a.V,"current");Wk(a)}
m.navigate=function(a,b,c){if(a==this.V)c&&G(C("back-title",this.Ic),c);else{var d=z(this.V,"screen");b?(x(this.V,"on"),x(this.V,"current"),w(a,"current"),this.V=a):(A(this.V,"on",!d),b=[this.V,tc(C("back-title",this.Ic))],db(this.ce,0,0,b),x(this.V,"current"),this.V=a,w(this.V,"current"));A(this.Ic,"back",z(this.V,"slide"));c&&G(C("back-title",this.Ic),c);this.V!=this.Bg&&(Z.a().sh=k)}};m.ho=function(a,b,c,d){(new vk(a,b,c,d)).i(this.Bj);Z.a().c("navigate",this.Bj,l,a.name)};
m.mo=function(a,b,c,d,e,g,j){(new Fk(b,c,d,e,g,j)).i(this.Dk);Z.a().c("navigate",this.Dk,l,a,d,e)};m.ko=function(){this.zh=new Mk(h,i);this.zh.i(this.Sj);Z.a().c("navigate",this.Sj,l,"Friends")};m.ul=function(a,b,c,d,e){if(this.fa&&a.id==this.fa.p.id){x(this.Ic,"back");for(a=this.ce[0][0];a&&z(a,"slide");)a=this.ce.shift();Vk(this,this.N,"info")}else{var g=B("media-info");(new wk(a,b,c,d,h,e)).i(g);Z.a().c("navigate",g,l,a.name)}DESKTOP&&N.a().c(pd,i)};
m.oo=function(a){if(!this.mi||!(this.mi.p.id==a.id&&this.V==this.Bg))Z.a().sh=a.id,this.mi=new Sk(a),this.mi.i(this.Bg),Z.a().c("navigate",this.Bg,l,a.name),DESKTOP&&N.a().c(pd,i)};function Wk(a){var b=Math.round(Q(a.ha[a.N]).width/2+Xd(a.ha[a.N]).x);a.re.style.transform="translate3d("+b+"px, 0,0)";a.re.style.msTransform="translate3d("+b+"px, 0,0)";a.re.style.WebkitTransform="translate3d("+b+"px, 0,0)";a.re.style.MozTransform="translate3d("+b+"px, 0,0)";a.re.style.To="translate3d("+b+"px, 0,0)"};function Xk(a){return'<div class="queue-media"><div class="pic"><img src="'+J(a.media.ta.Q)+'"></div><div class="title">'+J(a.media.name)+'</div><div class="play"></div><div class="remove"></div></div>'};function Yk(){R.call(this);this.sc={};this.tc=0;this.w=new Ff("Queue");xf(this.w,16,i)}t(Yk,R);
Yk.prototype.v=function(a){Yk.f.v.call(this,a);this.w.i(C("toggle",this.b()));this.$m=C("list",this.b());this.fd=C("medias",this.b());P(P(P(this.h(),this.w.b(),"click",q(function(){A(this.b(),"show",ef(this.w))},this)),this.$m,"click",q(function(a){a.preventDefault();a.stopPropagation()},this)),window,"click",q(function(a){ef(this.w)&&(xc(a.target,"queue")||L(q(function(){x(this.b(),"show");wf(this.w,l)},this)))},this));Rf().subscribe(sg,this.Ob,this);if(S.a().d.D){var a=Rf(),b=q(function(a){u(a,
function(a){this.Ob(a,i)},this)},this);X("/_queue",q(function(a){a=Y(a.target);this.queue=Sa(a,function(a){return gg(fg.a(),a)},this);b&&b(this.queue)},a))}};
Yk.prototype.Ob=function(a,b){if(b){e=H(Xk,{media:a});this.sc[a.id]=e;this.tc+=1;var c=C("play",e),d=C("remove",e);this.fd.appendChild(e);P(P(P(this.h(),e,"click",q(function(b){b.preventDefault();b.stopPropagation();Z.a().c(Kg,a)},this)),c,"click",q(function(b){b.preventDefault();b.stopPropagation();x(this.b(),"show");wf(this.w,l);b=ig(a);V.a().c(Nf,b);Rf().c(sg,a,l)},this)),d,"click",q(function(b){b.preventDefault();b.stopPropagation();Rf().c(sg,a,l)},this))}else if(Xb(this.sc,a.id)){var e=this.sc[a.id];
kc(e);this.tc-=1}A(this.fd,"no-medias",!this.tc);G(this.w.b().firstChild,0<this.tc?this.tc.toString():"")};function Zk(a){return'<div class="main"><div id="stage" class="stage"><div id="ytplayer"></div><div id="stagecover"><div class="message"><span></span><div class="spinner" style="display:none"></div><div class="restart" style="display:none">TRY AGAIN</div></div><div class="fullscreen"></div><div class="expand" style="display:none"></div><div class="play" style="display: none"><div></div></div><div class="pause" style="display: none"><div></div></div></div><div id="vote" class="vote" style="display:none"><div class="like"></div><div class="reddit" style="display:none"><a class="reddit-link" target="_blank"><div class="reddit-logo"></div></a><div class="score"></div></div><div class="dislike"></div></div><div id="logo"></div><div class="send-suggestions" style="display:none"><div class="label"><div class="icon"></div>SEND VIDEO TO?</div><div id="send-suggestions"></div></div><div id="notify" class="notify"></div><div id="search" class="search" '+
(a.Sa?'style="display:none"':"")+'><div class="search-box"><div id="search-icon" class="search-icon"></div><input type="text" id="search-input" class="search-input" /><div id="clear-icon" class="clear-icon" style="display:none"></div></div><div class="search-results no-medias" id="search-results"><div class="label">SEARCH</div><div class="no-medias">NO RESULTS</div><div class="no-overflow"><div class="results"><div class="subtitle subtitle-channels">CHANNELS</div><div class="result-channels"></div><div class="subtitle subtitle-medias">VIDEOS</div><div class="result-medias"></div></div></div></div></div><div id="notifications" class="notifications" style="display:none"><div class="toggle"><span></span></div><div class="list"><div class="label">NOTIFICATIONS</div><div id="notes" class="notes"></div></div></div><div id="inbox" class="inbox" style="display:none"><div class="toggle"><span></span></div><div class="list"><div class="label">INBOX</div><div class="messages"></div></div></div><div id="queue" class="queue" '+
(a.Sa?'style="display:none"':"")+'><div class="toggle"><span></span></div><div class="list"><div class="label">QUEUE</div><div class="medias-container"><div class="medias no-medias"><div class="no-medias">CLICK <span class="plus"></span> TO ADD VIDEOS</div></div></div></div></div></div><div id="guide" class="guide timeless position-hack'+(a.Wj?" toggled":" collapsed")+(a.sidebar?" sidebar-toggled":"")+'"><div class="channel-scrollable"><div id="channel-names" class="channel-names"></div><div class="channel-h-scrollable"><div id="channels" class="channels"></div></div></div><div class="header" id="header"><div class="times"><div id="schedule-toggle" class="schedule-toggle"><div class="fader"><div class="timeless"></div><div class="switcher"><div class="switch"></div></div><div class="scheduled"></div></div></div></div><div id="ticker" class="ticker"><div id="go-live" class="go-live">GO LIVE</div></div><div id="my-ticker" class="my-ticker" style="display:none">'+
(a.n?'<div class="me" style="background:'+J(a.n.color)+";border-color:"+J(a.n.color)+';"><img src="'+J(a.n.Q)+'"/></div>':"")+'</div></div><div id="now-left" class="left browse"></div><div id="now-right" class="right browse"></div><div class="pan-handle" id="pan-handle"></div></div><div id="controller" class="controller'+(a.Wj?" guide-toggled":" collapsed")+(a.sidebar?" sidebar-toggled":"")+'"><div class="background"></div><div class="left"><div id="guide-toggle" class="guide-toggle dark button">GUIDE</div><div class="controls"><div class="play dark button"><div class="icon"></div></div><div class="next dark button"><div class="icon"></div></div><div class="volume dark button"><div class="icon"></div></div></div><div class="border"></div></div><div class="right"><div id="info-toggle" class="info-toggle dark button" '+
(a.Sa?'style="display:none"':"")+'><div class="icon"></div></div><div id="admin-toggle" class="admin-toggle dark button" style="display: none"><div class="icon"></div><div id="toggle-pending" class="pending" style="display:none"></div></div><div id="sidebar-toggle" class="sidebar-toggle dark button"><div class="icon"></div></div><div class="border"></div></div><div class="progress" style="display: none"><div class="elapsed animate"><div class="seek"></div></div><div class="title"></div><div class="current-time"></div><div class="duration"></div></div></div><div id="sidebar" class="'+
(a.sidebar?"toggled":"collapsed")+'"><div id="toolbar"><div class="back"><div class="back-button"><div>BACK</div></div><div class="back-title"></div></div><ul class="tabs"><li class="info tab selected"><div class="label">NOW</div></li><li class="stream tab"><div class="label">STREAM<div class="activities-count" style="display:none"></div></div></li><li class="profile tab"><div class="label">HOME<div class="inbox-count" style="display:none"></div></div></li><li class="login tab" style="display:none"><div class="label">LOGIN</div></li></ul><div class="radial-grad"></div><div class="arrow"></div></div><div id="sidebar-content"><div id="info" class="screen info"><div class="no-info">Pick a channel or play a story.</div></div><div id="stream" class="screen stream"><div class="loading loading-activity"><div class="loading-spinner"></div></div></div><div id="my-profile" class="screen profile"></div><div id="admin" class="screen admin"></div><div class="screen login"></div><div id="media-list" class="slide media-list"></div><div id="friendlist" class="slide friendlist"></div><div id="conversation" class="slide"></div>'+
(a.$g?'<div id="admin-col-list" class="slide admin"></div><div id="admin-list" class="slide admin-list"></div>':"")+'<div id="media-info" class="slide info"></div><div id="profile" class="slide profile"></div></div></div><div id="hovercard" class="watch-with" style="display: none"></div><div id="welcome" class="welcome" style="display:none"><div class="search"></div><div class="thanks"></div><div class="guide"></div><div class="sidebar"></div><div class="drag"></div><div class="close"></div></div></div>'}
;function pg(){}ia(pg);_gaq=[];pg.prototype.init=function(){_gaq.push(["_setAccount","UA-38058655-1"]);_gaq.push(["_trackPageview"]);var a=document.createElement("script");a.type="text/javascript";a.async=i;a.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)};pg.prototype.login=function(){_gaq.push(["_trackEvent","Users","Login",S.a().d.id])};
pg.prototype.Sc=function(a,b){a.J||(_gaq.push(["_trackEvent","Channel","OptOut",b.id]),_gaq.push(["_trackEvent","Channel","OptIn",a.id]))};pg.prototype.$=function(a,b,c){_gaq.push(["_trackEvent","Media","Comment",a.id]);_gaq.push(["_trackEvent","Users","Comment",S.a().d.id]);b&&_gaq.push(["_trackEvent","Facebook","Comment",S.a().d.id]);c&&_gaq.push(["_trackEvent","Twitter","Comment",S.a().d.id])};
function Ek(a,b,c,d){_gaq.push(["_trackEvent","Media","Share",b.id]);_gaq.push(["_trackEvent","Users","Share",S.a().d.id]);c&&_gaq.push(["_trackEvent","Facebook","Share",S.a().d.id]);d&&_gaq.push(["_trackEvent","Twitter","Share",S.a().d.id]);X("/_share",Be(),"POST","facebook="+c+"&twitter="+d)}Ba("_gaq",_gaq);function Nj(){M.call(this);this.Ak=l}t(Nj,M);ia(Nj);Nj.prototype.init=function(a){this.Eo=a;a=(new appengine.Channel(unescape(a))).open();a.onmessage=q(this.vn,this);a.onclose=q(this.Qk,this);K(window,"onbeforeunload",q(this.Qk,this));return this};
Nj.prototype.vn=function(a){var b=oh(a.data);switch(b.type){case "viewer_change":var c=Qg(S.a(),b.user),d=b.time&&yd(b.time+"Z");c.Vc&&d&&c.Vc.end(d);(a=b.last_channel_id&&U.a().get(b.last_channel_id))&&a.c("remove-viewer",c);c.Tb&&c.Tb.c(dg,c,a,i);var e=b.channel_id&&U.a().get(b.channel_id),a=b.media&&gg(fg.a(),b.media);e&&(d=d||new zd,d=new og(b.session_id,c,e,d),c.Vc=d,e.c(tg,d));a&&a.c(dg,c,e,b.online!=i);S.a().c(Og,c,b.online);break;case "notification":a=new Rh(b.notification);S.a().c("new-notification",
a);break;case "new_comment":c=new Sh(b.comment);if(c.n.id!=S.a().d.id&&(d=b.tweet?new rk(b.tweet):k,a=gg(fg.a(),b.comment.media)))a.c(bg,c),d&&a.c("add-tweet",d);break;case "new_message":a=new Ii(b.message);S.a().c("new-message",a);Z.a().sh!=a.T.id&&Zf.a().c("flash","messaged you",a.text,a.T,a.T.Q,"#user:"+a.T.id);break;case "new_activity":S.a().c("new-activity",b.activity);b.activity.user.id!=S.a().d.id&&"session"!=b.activity.type&&Z.a().c("new-activites",1);break;case "update_programs":a=b.programs;
e=U.a().get(b.channel_id);u(a,function(a){e.c(ug,a)},this);break;case "new_programs":b.channel&&(e=U.a().Ff(b.channel));u(b.programs,q(function(a){a=new hg(a);if(e=e||U.a().get(b.channel_id))e.c(rg,a),U.a().l&&U.a().l.e(),!V.a().e()&&DESKTOP&&(U.a().c(Jf,e),U.a().c(Mf,a))},this));break;case "twitter_auth":S.a().d.c(lg)}};
Nj.prototype.Qk=function(){if(!this.Ak){var a=U.a().l.J&&U.a().l.Tb&&Math.floor(V.a().getCurrentTime());DESKTOP&&X("/_settings",Be(),"POST","show_guide="+N.a().bd+"&show_sidebar="+N.a().pf+(a?"&current_seek="+a:""));this.Ak=i}};function $k(){M.call(this);this.Lp=[]}t($k,M);ia($k);$k.prototype.Sh=function(a){Rb(a,q(function(a,c){u(a,q(function(a){a=new hg(a);U.a().xd[c]&&U.a().xd[c].td(a)},this))},this))};var al=l;function bl(a){a.match(/[\d]+/g).length=3}
if(navigator.plugins&&navigator.plugins.length){var cl=navigator.plugins["Shockwave Flash"];cl&&(al=i,cl.description&&bl(cl.description));navigator.plugins["Shockwave Flash 2.0"]&&(al=i)}else if(navigator.mimeTypes&&navigator.mimeTypes.length){var dl=navigator.mimeTypes["application/x-shockwave-flash"];(al=dl&&dl.enabledPlugin)&&bl(dl.enabledPlugin.description)}else try{var el=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7"),al=i;bl(el.GetVariable("$version"))}catch(fl){try{el=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6"),
al=i}catch(gl){try{el=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),al=i,bl(el.GetVariable("$version"))}catch(hl){}}};function il(a,b,c,d,e,g,j,p){this.Af=a;this.Ul=b;this.Dd=c;this.Lc=d;this.Fp=e;this.zp=g;this.sd=j;this.nb=p;this.Ao=[];this.hh=[];this.np=[];this.Rp=[]}il.prototype.Uj=ca("Ul");il.prototype.sl=function(a){this.Lc=a;return this};il.prototype.Fi=function(a){this.A=a;return this};function jl(a){this.Af=a;this.so=k}function kl(a){this.Af=a;this.so=this.Zp=k};function nj(a,b,c){il.call(this,"http://www.youtube.com/watch?v="+encodeURIComponent(String(a)),b,c,"application/x-shockwave-flash");this.Ll=a;this.Ao=[new jl("http://i.ytimg.com/vi/"+a+"/default.jpg")];this.Fi(new kl("http://www.youtube.com/v/"+encodeURIComponent(String(a))+"&hl=en&fs=1&autoplay=1"))}t(nj,il);
var mj=RegExp("http://(?:[a-zA-Z]{2,3}\\.)?(?:youtube\\.com/watch)(?:\\?(?:[\\w=-]+&(?:amp;)?)*v=([\\w-]+)(?:&(?:amp;)?[\\w=-]+)*)?(?:#[!]?(?:(?:(?:[\\w=-]+&(?:amp;)?)*(?:v=([\\w-]+))(?:&(?:amp;)?[\\w=-]+)*)|(?:[\\w=&-]+)))?[^\\w-]?","i");function ll(){R.call(this);this.am=new Jh;this.sm=new Gf;this.ro=new Tk;this.A=new Ei;this.nn=new Xh;this.Tn=new Yk;this.ao=new Mj}t(ll,R);ll.prototype.v=function(a){ll.f.v.call(this,a);var b=S.a().d,b=H(Zk,{n:b,$g:b?Hf(b):l,Wj:!EMBED&&(b?b.lo&&!U.a().l.J&&!IPAD:i),sidebar:!EMBED&&(b?b.po:i),Sa:EMBED});jc(a,b,0)};
ll.prototype.B=function(){ll.f.B.call(this);this.am.i(B("controller"));IPAD||this.sm.i(B("guide"));this.ro.i(B("sidebar"));this.A.i(B("stage"));this.nn.i(B("notify"));this.Tn.i(B("queue"));this.ao.i(B("search"));this.Kp=new Ng;P(this.h(),document.body,"touchmove",function(a){wc(a.target,"div","ios-scroll")||a.preventDefault()});P(this.h(),window,"click",function(a){var b=wc(a.target,"a");if(b=b?b.href:k)if((b=b.match("#(.*):(.*)"))&&b.length)switch(a.preventDefault(),a.stopPropagation(),b[1]){case "user":a=
S.a().get(b[2]);Z.a().c(Lg,a);break;case "channel":a=U.a().get(b[2]);U.a().c(Jf,a);break;case "info":a=fg.a().get(b[2]);Z.a().c(Kg,a);break;case "friendlist":Z.a().c("friend-list")}});S.a().d.D?X("/_presence",q(function(a){a=Y(a.target);this.eh=Nj.a().init(a.token);Ih(U.a(),a.viewer_sessions)},this)):X("/_token",q(function(a){a=Y(a.target);this.eh=Nj.a().init(a.token)},this));S.a().subscribe("logged-in",function(){this.Yd=new Uh;this.Yd.i(B("notifications"));O(B("notifications"),i);EMBED||(this.ra=
new Jk(S.a().d),this.ra.i(B("inbox")),O(B("inbox"),i));X("/_presence",q(function(a){a=Y(a.target);Kc(this.eh);this.eh=Nj.a().init(a.token);Ih(U.a(),a.viewer_sessions)},this))},this);N.a().subscribe("toggle-info",function(){var a=B("login"),b=B("static-content"),c=B("pages");x(a,"hide");w(a,"show");b.style.height=Q(c).height+80+"px";ml(i)},this)};
function ml(a){var b=B("login"),c=B("static-content"),d=B("pages"),e=z(b,"app");A(b,"expanded",a);B("uvTab")&&A(B("uvTab"),"show",e&&a);a?(e?c.style.bottom=-Q(d).height-80+"px":c.style.top=Math.max(10,D().height-280)+"px",a=e?Math.min(D().height-100,c.scrollHeight+80):Math.min(D().height-435,c.scrollHeight+190),!e||e&&!b.scrollTop?(e=new Le(b,[b.scrollLeft,b.scrollTop],[b.scrollLeft,a],300),w(b,"scrolling"),e.play(),K(e,"end",function(){x(b,"scrolling")})):b.scrollTop=a):(c.style.top="",c.style.height=
"",e?L(function(){x(b,"show")},200):c.className="")}
function nl(){function a(){L(function(){O(B("embed-spinner"),l);w(d,"hide");L(function(){O(B("homepage"),l);w(d,"app");w(c,"faq")},600)},600)}var b=B("fb-login"),c=B("static-content"),d=B("login"),e=B("telepath-spinner"),g=B("telepath-embed-spinner");b&&w(b,"disabled");b&&w(b,"spin");e&&K(e,"click",function(){window.location=document.URL});g&&K(g,"click",function(){window.location=document.URL});X("/_session"+(YOUTUBE_CHANNEL?"?ytc="+YOUTUBE_CHANNEL:""),function(b){if(200==Gh(b.target))if(b=Y(b.target),
b.error)G(B("error"),b.error),ol("Yikes...");else if(b.message){var c=B("message");G(c,b.message);w(c,"show")}else{if(LOADED)Pg(S.a(),b.current_user),S.a().c("logged-in");else{var c=b.channels,d=b.programs,y=b.current_user,b=b.current_channel;Pg(S.a(),y||k);U.a().Sh(c);$k.a().Sh(d);c=U.a();b=b||Uf(U.a());c.l=c.xd[b]||c.Qb[0];c.l=Uf(c)||c.l;ld.a().init();(new ll).i(document.body);LOADED=i;pg.a().login()}if(!LOGIN_REQUIRED||S.a().d.D)x(document.body,"login"),L(a),window.dispatchEvent(new Event("telepath-ready")),
window.parent&&window.parent.dispatchEvent(new Event("telepath-ready"))}else EMBED?g&&w(g,"reload"):e?(w(e,"reload"),G(B("telepath-tagline"),"Oops, try reloading")):ol("Oops, try reloading")},"POST")}function ol(a){var b=B("fb-login"),c=C("power",b);w(c,"error");a&&(c=C("waitlist",b),G(c,a));b&&(x(b,"spin"),w(b,"disabled"),O(b,i),w(b,"show"),w(b,"waitlist"))}
function Lh(a){var b=parseInt(a,10),a=Math.floor(b/3600),c=Math.floor((b-3600*a)/60),b=b-3600*a-60*c;10>c&&(c=(a?"0":"")+c);10>b&&(b="0"+b);return(a?a+":":"")+(c?c+":":"")+b}
Ba("brkn.Main.staticInit",function(){var a=B("fb-login"),b=B("homepage"),c=B("telepath-video"),d=B("login"),e=B("static-content"),g=B("pages"),j=B("footer"),p=l;LOADED=l;LOGIN_REQUIRED&&a&&(G(C("with-fb",a),"with facebook"),G(C("label",a),"LOGIN"));!POWER_ON&&(!LOGIN_REQUIRED&&a)&&(w(a,"disabled"),w(a,"spin"));c||(w(b,"hide"),c=E("img"),c.src="/static/img/homepage.jpg",K(c,"load",function(){x(b,"hide");w(b,"show")}));L(function(){a&&(O(a,i),L(za(w,a,"show"),400))},100);K(d,"click",function(a){"static-scrollable"==
a.target.id&&(a=z(d,"app"),p=l,a?ml(p):(a=new Le(d,[d.scrollLeft,d.scrollTop],[d.scrollLeft,0],300),a.play(),K(a,"end",za(ml,p))))});K(d,"scroll",function(){!z(d,"scrolling")&&1>d.scrollTop&&(p=l,ml(p))});K(j,"click",function(a){var a=xc(a.target,"section"),b=z(d,"app");a&&(p=i,e.className=a.id,e.style.height=Q(g).height+(b?80:220)+"px",ml(p))});K(window,"resize",za(ml,p));pg.a().init();IPHONE&&(w(document.body,"iphone"),w(document.body,"login"),window.onload=function(){L(function(){window.scrollTo(0,
1)},1E3)})});Ba("brkn.Main.auth",function(){!LOGIN_REQUIRED||EMBED?nl():FB.getLoginStatus(function(a){if("connected"===a.status)nl();else if(LOGIN_REQUIRED){var b=B("fb-login");nl();b&&K(b,"click",function(){w(b,"disabled");if(IPAD)return window.location.href="https://m.facebook.com/dialog/oauth?client_id="+FB_APP_ID+"&response_type=code&redirect_uri="+HOST_URL+"&scope=email",l;FB.login(function(a){a.authResponse?nl():x(b,"disabled")},{scope:"email"})})}else nl()})});
Ba("window.play",function(){N.a().c(rd,i)});Ba("window.pause",function(){N.a().c(rd,l)});Ba("window.getCurrentProgram",function(){return V.a().e()});