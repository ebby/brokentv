function f(a){throw a;}var i=void 0,j=!0,k=null,l=!1;function ba(){return function(){}}function ca(a){return function(b){this[a]=b}}function da(a){return function(){return this[a]}}function ea(a){return function(){return a}}var m,fa=fa||{},ga=this;function ha(a,b){var c=a.split("."),d=ga;!(c[0]in d)&&d.execScript&&d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&ja(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}
function ka(a){for(var a=a.split("."),b=ga,c;c=a.shift();)if(b[c]!=k)b=b[c];else return k;return b}function la(){}function ma(a){a.a=function(){return a.zj?a.zj:a.zj=new a}}
function na(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function ja(a){return a!==i}function oa(a){return"array"==na(a)}function pa(a){var b=na(a);return"array"==b||"object"==b&&"number"==typeof a.length}function qa(a){return"string"==typeof a}function ra(a){return"number"==typeof a}function sa(a){return"function"==na(a)}function ta(a){var b=typeof a;return"object"==b&&a!=k||"function"==b}function ua(a){return a[wa]||(a[wa]=++ya)}
var wa="closure_uid_"+Math.floor(2147483648*Math.random()).toString(36),ya=0;function za(a,b,c){return a.call.apply(a.bind,arguments)}function Aa(a,b,c){a||f(Error());if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}
function p(a,b,c){p=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?za:Aa;return p.apply(k,arguments)}function Ba(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=Array.prototype.slice.call(arguments);b.unshift.apply(b,c);return a.apply(this,b)}}var q=Date.now||function(){return+new Date};function Ca(a,b){var c=b||{},d;for(d in c)var e=(""+c[d]).replace(/\$/g,"$$$$"),a=a.replace(RegExp("\\{\\$"+d+"\\}","gi"),e);return a}
function s(a,b){function c(){}c.prototype=b.prototype;a.d=b.prototype;a.prototype=new c;a.prototype.constructor=a};function Da(a,b){for(var c=1;c<arguments.length;c++)var d=String(arguments[c]).replace(/\$/g,"$$$$"),a=a.replace(/\%s/,d);return a}function Ea(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")}function Fa(a,b){var c=String(a).toLowerCase(),d=String(b).toLowerCase();return c<d?-1:c==d?0:1}
function Ga(a){if(!Ha.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(Ia,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(Ja,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(Ka,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(La,"&quot;"));return a}var Ia=/&/g,Ja=/</g,Ka=/>/g,La=/\"/g,Ha=/[&<>\"]/;function Ma(a){var a=ja(i)?a.toFixed(i):String(a),b=a.indexOf(".");-1==b&&(b=a.length);b=Math.max(0,2-b);return Array(b+1).join("0")+a}
function Na(a){return String(a).replace(/\-([a-z])/g,function(a,c){return c.toUpperCase()})};var Oa=Array.prototype,Pa=Oa.indexOf?function(a,b,c){return Oa.indexOf.call(a,b,c)}:function(a,b,c){c=c==k?0:0>c?Math.max(0,a.length+c):c;if(qa(a))return!qa(b)||1!=b.length?-1:a.indexOf(b,c);for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},t=Oa.forEach?function(a,b,c){Oa.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=qa(a)?a.split(""):a,g=0;g<d;g++)g in e&&b.call(c,e[g],g,a)};function Qa(a,b,c){for(var d=qa(a)?a.split(""):a,e=a.length-1;0<=e;--e)e in d&&b.call(c,d[e],e,a)}
var Ra=Oa.filter?function(a,b,c){return Oa.filter.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=[],g=0,h=qa(a)?a.split(""):a,n=0;n<d;n++)if(n in h){var r=h[n];b.call(c,r,n,a)&&(e[g++]=r)}return e},Sa=Oa.map?function(a,b,c){return Oa.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),g=qa(a)?a.split(""):a,h=0;h<d;h++)h in g&&(e[h]=b.call(c,g[h],h,a));return e},Ta=Oa.every?function(a,b,c){return Oa.every.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=qa(a)?a.split(""):a,g=0;g<d;g++)if(g in
e&&!b.call(c,e[g],g,a))return l;return j};function Ua(a,b){var c=Va(a,b,i);return 0>c?k:qa(a)?a.charAt(c):a[c]}function Va(a,b,c){for(var d=a.length,e=qa(a)?a.split(""):a,g=0;g<d;g++)if(g in e&&b.call(c,e[g],g,a))return g;return-1}function Wa(a,b){return 0<=Pa(a,b)}function Xa(a,b){var c=Pa(a,b);0<=c&&Oa.splice.call(a,c,1)}function Ya(a,b,c){b=Va(a,b,c);return 0<=b?(Oa.splice.call(a,b,1),j):l}function Za(a){return Oa.concat.apply(Oa,arguments)}
function ab(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]}function bb(a,b){for(var c=1;c<arguments.length;c++){var d=arguments[c],e;if(oa(d)||(e=pa(d))&&d.hasOwnProperty("callee"))a.push.apply(a,d);else if(e)for(var g=a.length,h=d.length,n=0;n<h;n++)a[g+n]=d[n];else a.push(d)}}function cb(a,b,c,d){Oa.splice.apply(a,db(arguments,1))}function db(a,b,c){return 2>=arguments.length?Oa.slice.call(a,b):Oa.slice.call(a,b,c)}function eb(a,b){return a>b?1:a<b?-1:0};var fb,hb,ib,jb,kb;function lb(){return ga.navigator?ga.navigator.userAgent:k}function mb(){return ga.navigator}jb=ib=hb=fb=l;var nb;if(nb=lb()){var ob=mb();fb=0==nb.indexOf("Opera");hb=!fb&&-1!=nb.indexOf("MSIE");ib=!fb&&-1!=nb.indexOf("WebKit");jb=!fb&&!ib&&"Gecko"==ob.product}var pb=fb,u=hb,qb=jb,rb=ib,sb=mb();kb=-1!=(sb&&sb.platform||"").indexOf("Mac");var tb=!!mb()&&-1!=(mb().appVersion||"").indexOf("X11"),ub;
a:{var vb="",wb;if(pb&&ga.opera)var xb=ga.opera.version,vb="function"==typeof xb?xb():xb;else if(qb?wb=/rv\:([^\);]+)(\)|;)/:u?wb=/MSIE\s+([^\);]+)(\)|;)/:rb&&(wb=/WebKit\/(\S+)/),wb)var yb=wb.exec(lb()),vb=yb?yb[1]:"";if(u){var zb,Ab=ga.document;zb=Ab?Ab.documentMode:i;if(zb>parseFloat(vb)){ub=String(zb);break a}}ub=vb}var Bb={};
function Cb(a){var b;if(!(b=Bb[a])){b=0;for(var c=Ea(String(ub)).split("."),d=Ea(String(a)).split("."),e=Math.max(c.length,d.length),g=0;0==b&&g<e;g++){var h=c[g]||"",n=d[g]||"",r=RegExp("(\\d*)(\\D*)","g"),w=RegExp("(\\d*)(\\D*)","g");do{var F=r.exec(h)||["","",""],K=w.exec(n)||["","",""];if(0==F[0].length&&0==K[0].length)break;b=((0==F[1].length?0:parseInt(F[1],10))<(0==K[1].length?0:parseInt(K[1],10))?-1:(0==F[1].length?0:parseInt(F[1],10))>(0==K[1].length?0:parseInt(K[1],10))?1:0)||((0==F[2].length)<
(0==K[2].length)?-1:(0==F[2].length)>(0==K[2].length)?1:0)||(F[2]<K[2]?-1:F[2]>K[2]?1:0)}while(0==b)}b=Bb[a]=0<=b}return b}var Db={};function Eb(a){return Db[a]||(Db[a]=u&&!!document.documentMode&&document.documentMode>=a)};var Fb,Gb=!u||Eb(9),Ib=!qb&&!u||u&&Eb(9)||qb&&Cb("1.9.1"),Jb=u&&!Cb("9"),Kb=u||pb||rb;function Lb(a){a=a.className;return qa(a)&&a.match(/\S+/g)||[]}function v(a,b){for(var c=Lb(a),d=db(arguments,1),e=c.length+d.length,g=c,h=0;h<d.length;h++)Wa(g,d[h])||g.push(d[h]);a.className=c.join(" ");return c.length==e}function x(a,b){var c=Lb(a),d=db(arguments,1),e,g=d;e=Ra(c,function(a){return!Wa(g,a)});a.className=e.join(" ");return e.length==c.length-d.length}function y(a,b){return Wa(Lb(a),b)}function z(a,b,c){c?v(a,b):x(a,b)}function Mb(a,b){var c=!y(a,b);z(a,b,c);return c};function Nb(a,b){this.x=ja(a)?a:0;this.y=ja(b)?b:0}Nb.prototype.clone=function(){return new Nb(this.x,this.y)};function Ob(a,b){return new Nb(a.x-b.x,a.y-b.y)};function Pb(a,b){this.width=a;this.height=b}Pb.prototype.clone=function(){return new Pb(this.width,this.height)};Pb.prototype.ceil=function(){this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};Pb.prototype.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};Pb.prototype.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};function Qb(a,b,c){for(var d in a)b.call(c,a[d],d,a)}function Rb(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function Sb(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}function Tb(a){for(var b in a)return l;return j}function Ub(a,b){b in a&&delete a[b]}function Vb(a,b,c){b in a&&f(Error('The object already contains the key "'+b+'"'));a[b]=c}function Wb(a,b,c){return b in a?a[b]:c}var Xb="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");
function Yb(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var g=0;g<Xb.length;g++)c=Xb[g],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};function Zb(a){return a?new $b(ac(a)):Fb||(Fb=new $b)}function A(a){return qa(a)?document.getElementById(a):a}function bc(a,b){var c=b||document;return c.querySelectorAll&&c.querySelector?c.querySelectorAll("."+a):c.getElementsByClassName?c.getElementsByClassName(a):cc("*",a,b)}function B(a,b){var c=b||document,d=k;return(d=c.querySelectorAll&&c.querySelector?c.querySelector("."+a):bc(a,b)[0])||k}
function cc(a,b,c){var d=document,c=c||d,a=a&&"*"!=a?a.toUpperCase():"";if(c.querySelectorAll&&c.querySelector&&(a||b))return c.querySelectorAll(a+(b?"."+b:""));if(b&&c.getElementsByClassName){c=c.getElementsByClassName(b);if(a){for(var d={},e=0,g=0,h;h=c[g];g++)a==h.nodeName&&(d[e++]=h);d.length=e;return d}return c}c=c.getElementsByTagName(a||"*");if(b){d={};for(g=e=0;h=c[g];g++)a=h.className,"function"==typeof a.split&&Wa(a.split(/\s+/),b)&&(d[e++]=h);d.length=e;return d}return c}
var dc={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function C(a){a=(a||window).document;a=ec(a)?a.documentElement:a.body;return new Pb(a.clientWidth,a.clientHeight)}function D(a,b,c){return fc(document,arguments)}
function fc(a,b){var c=b[0],d=b[1];if(!Gb&&d&&(d.name||d.type)){c=["<",c];d.name&&c.push(' name="',Ga(d.name),'"');if(d.type){c.push(' type="',Ga(d.type),'"');var e={};Yb(e,d);delete e.type;d=e}c.push(">");c=c.join("")}var g=a.createElement(c);d&&(qa(d)?g.className=d:oa(d)?v.apply(k,[g].concat(d)):Qb(d,function(a,b){"style"==b?g.style.cssText=a:"class"==b?g.className=a:"for"==b?g.htmlFor=a:b in dc?g.setAttribute(dc[b],a):0==b.lastIndexOf("aria-",0)||0==b.lastIndexOf("data-",0)?g.setAttribute(b,a):
g[b]=a}));if(2<b.length){d=function(b){b&&g.appendChild(qa(b)?a.createTextNode(b):b)};for(c=2;c<b.length;c++)if(e=b[c],pa(e)&&!(ta(e)&&0<e.nodeType)){var h=t,n;a:{if((n=e)&&"number"==typeof n.length){if(ta(n)){n="function"==typeof n.item||"string"==typeof n.item;break a}if(sa(n)){n="function"==typeof n.item;break a}}n=l}h(n?ab(e):e,d)}else d(e)}return g}function ec(a){return"CSS1Compat"==a.compatMode}function gc(a){for(var b;b=a.firstChild;)a.removeChild(b)}
function hc(a,b,c){a.insertBefore(b,a.childNodes[c]||k)}function E(a){a&&a.parentNode&&a.parentNode.removeChild(a)}function ic(a){return Ib&&a.children!=i?a.children:Ra(a.childNodes,function(a){return 1==a.nodeType})}function jc(a){return a.nextElementSibling!=i?a.nextElementSibling:kc(a.nextSibling,j)}function kc(a,b){for(;a&&1!=a.nodeType;)a=b?a.nextSibling:a.previousSibling;return a}function lc(a){if(Kb)return a.parentElement;a=a.parentNode;return ta(a)&&1==a.nodeType?a:k}
function mc(a,b){if(a.contains&&1==b.nodeType)return a==b||a.contains(b);if("undefined"!=typeof a.compareDocumentPosition)return a==b||Boolean(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a}function ac(a){return 9==a.nodeType?a:a.ownerDocument||a.document}
function nc(a,b){if("textContent"in a)a.textContent=b;else if(a.firstChild&&3==a.firstChild.nodeType){for(;a.lastChild!=a.firstChild;)a.removeChild(a.lastChild);a.firstChild.data=b}else gc(a),a.appendChild(ac(a).createTextNode(b))}var oc={SCRIPT:1,STYLE:1,HEAD:1,IFRAME:1,OBJECT:1},pc={IMG:" ",BR:"\n"};function qc(a){var b=a.getAttributeNode("tabindex");return b&&b.specified?(a=a.tabIndex,ra(a)&&0<=a&&32768>a):l}
function rc(a){if(Jb&&"innerText"in a)a=a.innerText.replace(/(\r\n|\r|\n)/g,"\n");else{var b=[];sc(a,b,j);a=b.join("")}a=a.replace(/ \xAD /g," ").replace(/\xAD/g,"");a=a.replace(/\u200B/g,"");Jb||(a=a.replace(/ +/g," "));" "!=a&&(a=a.replace(/^\s*/,""));return a}function tc(a){var b=[];sc(a,b,l);return b.join("")}
function sc(a,b,c){if(!(a.nodeName in oc))if(3==a.nodeType)c?b.push(String(a.nodeValue).replace(/(\r\n|\r|\n)/g,"")):b.push(a.nodeValue);else if(a.nodeName in pc)b.push(pc[a.nodeName]);else for(a=a.firstChild;a;)sc(a,b,c),a=a.nextSibling}function uc(a,b,c){if(!b&&!c)return k;b=b?b.toUpperCase():k;a:{for(var d=0;a;){if((!b||a.nodeName==b)&&(!c||y(a,c))){c=a;break a}a=a.parentNode;d++}c=k}return c}function vc(a,b){return uc(a,k,b)}function $b(a){this.H=a||ga.document||document}m=$b.prototype;m.$a=Zb;
m.b=function(a){return qa(a)?this.H.getElementById(a):a};m.R=function(a,b,c){return fc(this.H,arguments)};m.createElement=function(a){return this.H.createElement(a)};m.createTextNode=function(a){return this.H.createTextNode(a)};function wc(a){return ec(a.H)}function xc(a){var b=a.H,a=!rb&&ec(b)?b.documentElement:b.body,b=b.parentWindow||b.defaultView;return new Nb(b.pageXOffset||a.scrollLeft,b.pageYOffset||a.scrollTop)}m.appendChild=function(a,b){a.appendChild(b)};m.fj=ic;
function yc(a,b){return b.firstElementChild!=i?b.firstElementChild:kc(b.firstChild,j)}m.contains=mc;u&&Cb(8);var zc={};function Ac(a,b,c){a.innerHTML=b(c||zc,i,i)}function G(a,b){var c;a:if(c=(new $b(i)||Zb()).createElement("DIV"),c.innerHTML=a(b||zc,i,i),1==c.childNodes.length){var d=c.firstChild;if(1==d.nodeType){c=d;break a}}return c}function H(a){return"object"===typeof a&&a&&0===a.co?a.content:String(a).replace(Bc,Cc)}
var Dc={"\x00":"&#0;",'"':"&quot;","&":"&amp;","'":"&#39;","<":"&lt;",">":"&gt;","\t":"&#9;","\n":"&#10;","\x0B":"&#11;","\f":"&#12;","\r":"&#13;"," ":"&#32;","-":"&#45;","/":"&#47;","=":"&#61;","`":"&#96;","\u0085":"&#133;","\u00a0":"&#160;","\u2028":"&#8232;","\u2029":"&#8233;"};function Cc(a){return Dc[a]}var Bc=/[\x00\x22\x26\x27\x3c\x3e]/g;function I(){0!=Ec&&(this.eo=Error().stack,Fc[ua(this)]=this)}var Ec=0,Fc={};I.prototype.nf=l;I.prototype.ea=function(){if(!this.nf&&(this.nf=j,this.n(),0!=Ec)){var a=ua(this);delete Fc[a]}};I.prototype.n=function(){this.el&&Gc.apply(k,this.el);if(this.Zj)for(;this.Zj.length;)this.Zj.shift()()};function Hc(a){a&&"function"==typeof a.ea&&a.ea()}function Gc(a){for(var b=0,c=arguments.length;b<c;++b){var d=arguments[b];pa(d)?Gc.apply(k,d):Hc(d)}};var Ic=!u||Eb(9),Jc=!u||Eb(9),Kc=u&&!Cb("9");!rb||Cb("528");qb&&Cb("1.9b")||u&&Cb("8")||pb&&Cb("9.5")||rb&&Cb("528");qb&&!Cb("8")||u&&Cb("9");function Lc(a,b){this.type=a;this.currentTarget=this.target=b}m=Lc.prototype;m.n=ba();m.ea=ba();m.Xc=l;m.defaultPrevented=l;m.Yf=j;m.stopPropagation=function(){this.Xc=j};m.preventDefault=function(){this.defaultPrevented=j;this.Yf=l};function Mc(a){a.preventDefault()};function Nc(a){Nc[" "](a);return a}Nc[" "]=la;function Oc(a,b){a&&this.init(a,b)}s(Oc,Lc);var Pc=[1,4,2];m=Oc.prototype;m.target=k;m.relatedTarget=k;m.offsetX=0;m.offsetY=0;m.clientX=0;m.clientY=0;m.screenX=0;m.screenY=0;m.button=0;m.keyCode=0;m.charCode=0;m.ctrlKey=l;m.altKey=l;m.shiftKey=l;m.metaKey=l;m.Ah=l;m.la=k;
m.init=function(a,b){var c=this.type=a.type;Lc.call(this,c);this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;if(d){if(qb){var e;a:{try{Nc(d.nodeName);e=j;break a}catch(g){}e=l}e||(d=k)}}else"mouseover"==c?d=a.fromElement:"mouseout"==c&&(d=a.toElement);this.relatedTarget=d;this.offsetX=rb||a.offsetX!==i?a.offsetX:a.layerX;this.offsetY=rb||a.offsetY!==i?a.offsetY:a.layerY;this.clientX=a.clientX!==i?a.clientX:a.pageX;this.clientY=a.clientY!==i?a.clientY:a.pageY;this.screenX=
a.screenX||0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||("keypress"==c?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.Ah=kb?a.metaKey:a.ctrlKey;this.state=a.state;this.la=a;a.defaultPrevented&&this.preventDefault();delete this.Xc};function Qc(a){return(Ic?0==a.la.button:"click"==a.type?j:!!(a.la.button&Pc[0]))&&!(rb&&kb&&a.ctrlKey)}
m.stopPropagation=function(){Oc.d.stopPropagation.call(this);this.la.stopPropagation?this.la.stopPropagation():this.la.cancelBubble=j};m.preventDefault=function(){Oc.d.preventDefault.call(this);var a=this.la;if(a.preventDefault)a.preventDefault();else if(a.returnValue=l,Kc)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};m.rl=da("la");m.n=ba();function Rc(){}var Sc=0;m=Rc.prototype;m.key=0;m.Yc=l;m.rg=l;m.init=function(a,b,c,d,e,g){sa(a)?this.Bj=j:a&&a.handleEvent&&sa(a.handleEvent)?this.Bj=l:f(Error("Invalid listener argument"));this.Cd=a;this.proxy=b;this.src=c;this.type=d;this.capture=!!e;this.yf=g;this.rg=l;this.key=++Sc;this.Yc=l};m.handleEvent=function(a){return this.Bj?this.Cd.call(this.yf||this.src,a):this.Cd.handleEvent.call(this.Cd,a)};var Tc={},Uc={},Vc={},Wc={};
function J(a,b,c,d,e){if(b){if(oa(b)){for(var g=0;g<b.length;g++)J(a,b[g],c,d,e);return k}var d=!!d,h=Uc;b in h||(h[b]={Z:0,Oa:0});h=h[b];d in h||(h[d]={Z:0,Oa:0},h.Z++);var h=h[d],n=ua(a),r;h.Oa++;if(h[n]){r=h[n];for(g=0;g<r.length;g++)if(h=r[g],h.Cd==c&&h.yf==e){if(h.Yc)break;return r[g].key}}else r=h[n]=[],h.Z++;var w=Xc,F=Jc?function(a){return w.call(F.src,F.key,a)}:function(a){a=w.call(F.src,F.key,a);if(!a)return a},g=F;g.src=a;h=new Rc;h.init(c,g,a,b,d,e);c=h.key;g.key=c;r.push(h);Tc[c]=h;Vc[n]||
(Vc[n]=[]);Vc[n].push(h);a.addEventListener?(a==ga||!a.Oi)&&a.addEventListener(b,g,d):a.attachEvent(b in Wc?Wc[b]:Wc[b]="on"+b,g);return c}f(Error("Invalid event type"))}function Yc(a,b,c,d,e){if(oa(b))for(var g=0;g<b.length;g++)Yc(a,b[g],c,d,e);else a=J(a,b,c,d,e),Tc[a].rg=j}function Zc(a,b,c,d,e){if(oa(b))for(var g=0;g<b.length;g++)Zc(a,b[g],c,d,e);else if(d=!!d,a=$c(a,b,d))for(g=0;g<a.length;g++)if(a[g].Cd==c&&a[g].capture==d&&a[g].yf==e){ad(a[g].key);break}}
function ad(a){if(!Tc[a])return l;var b=Tc[a];if(b.Yc)return l;var c=b.src,d=b.type,e=b.proxy,g=b.capture;c.removeEventListener?(c==ga||!c.Oi)&&c.removeEventListener(d,e,g):c.detachEvent&&c.detachEvent(d in Wc?Wc[d]:Wc[d]="on"+d,e);c=ua(c);Vc[c]&&(e=Vc[c],Xa(e,b),0==e.length&&delete Vc[c]);b.Yc=j;if(b=Uc[d][g][c])b.Wj=j,bd(d,g,c,b);delete Tc[a];return j}
function bd(a,b,c,d){if(!d.Gf&&d.Wj){for(var e=0,g=0;e<d.length;e++)d[e].Yc?d[e].proxy.src=k:(e!=g&&(d[g]=d[e]),g++);d.length=g;d.Wj=l;0==g&&(delete Uc[a][b][c],Uc[a][b].Z--,0==Uc[a][b].Z&&(delete Uc[a][b],Uc[a].Z--),0==Uc[a].Z&&delete Uc[a])}}function $c(a,b,c){var d=Uc;return b in d&&(d=d[b],c in d&&(d=d[c],a=ua(a),d[a]))?d[a]:k}
function cd(a,b,c,d,e){var g=1,b=ua(b);if(a[b]){a.Oa--;a=a[b];a.Gf?a.Gf++:a.Gf=1;try{for(var h=a.length,n=0;n<h;n++){var r=a[n];r&&!r.Yc&&(g&=dd(r,e)!==l)}}finally{a.Gf--,bd(c,d,b,a)}}return Boolean(g)}function dd(a,b){a.rg&&ad(a.key);return a.handleEvent(b)}
function Xc(a,b){if(!Tc[a])return j;var c=Tc[a],d=c.type,e=Uc;if(!(d in e))return j;var e=e[d],g,h;if(!Jc){g=b||ka("window.event");var n=j in e,r=l in e;if(n){if(0>g.keyCode||g.returnValue!=i)return j;a:{var w=l;if(0==g.keyCode)try{g.keyCode=-1;break a}catch(F){w=j}if(w||g.returnValue==i)g.returnValue=j}}w=new Oc;w.init(g,this);g=j;try{if(n){for(var K=[],aa=w.currentTarget;aa;aa=aa.parentNode)K.push(aa);h=e[j];h.Oa=h.Z;for(var S=K.length-1;!w.Xc&&0<=S&&h.Oa;S--)w.currentTarget=K[S],g&=cd(h,K[S],d,
j,w);if(r){h=e[l];h.Oa=h.Z;for(S=0;!w.Xc&&S<K.length&&h.Oa;S++)w.currentTarget=K[S],g&=cd(h,K[S],d,l,w)}}else g=dd(c,w)}finally{K&&(K.length=0)}return g}d=new Oc(b,this);return g=dd(c,d)};function ed(){I.call(this)}s(ed,I);m=ed.prototype;m.Oi=j;m.Of=k;m.Sh=ca("Of");m.addEventListener=function(a,b,c,d){J(this,a,b,c,d)};m.removeEventListener=function(a,b,c,d){Zc(this,a,b,c,d)};
m.dispatchEvent=function(a){var b=a.type||a,c=Uc;if(b in c){if(qa(a))a=new Lc(a,this);else if(a instanceof Lc)a.target=a.target||this;else{var d=a,a=new Lc(b,this);Yb(a,d)}var d=1,e,c=c[b],b=j in c,g;if(b){e=[];for(g=this;g;g=g.Of)e.push(g);g=c[j];g.Oa=g.Z;for(var h=e.length-1;!a.Xc&&0<=h&&g.Oa;h--)a.currentTarget=e[h],d&=cd(g,e[h],a.type,j,a)&&a.Yf!=l}if(l in c)if(g=c[l],g.Oa=g.Z,b)for(h=0;!a.Xc&&h<e.length&&g.Oa;h++)a.currentTarget=e[h],d&=cd(g,e[h],a.type,l,a)&&a.Yf!=l;else for(e=this;!a.Xc&&e&&
g.Oa;e=e.Of)a.currentTarget=e,d&=cd(g,e,a.type,l,a)&&a.Yf!=l;a=Boolean(d)}else a=j;return a};m.n=function(){ed.d.n.call(this);var a,b=0,c=a==k;a=!!a;if(this==k)Qb(Vc,function(d){for(var e=d.length-1;0<=e;e--){var g=d[e];if(c||a==g.capture)ad(g.key),b++}});else{var d=ua(this);if(Vc[d])for(var d=Vc[d],e=d.length-1;0<=e;e--){var g=d[e];if(c||a==g.capture)ad(g.key),b++}}this.Of=k};function fd(a,b){I.call(this);this.V=a||1;this.Pe=b||gd;this.qg=p(this.di,this);this.dh=q()}s(fd,ed);fd.prototype.enabled=l;var gd=ga.window;m=fd.prototype;m.ya=k;m.di=function(){if(this.enabled){var a=q()-this.dh;0<a&&a<0.8*this.V?this.ya=this.Pe.setTimeout(this.qg,this.V-a):(this.dispatchEvent(hd),this.enabled&&(this.ya=this.Pe.setTimeout(this.qg,this.V),this.dh=q()))}};m.start=function(){this.enabled=j;this.ya||(this.ya=this.Pe.setTimeout(this.qg,this.V),this.dh=q())};
m.stop=function(){this.enabled=l;this.ya&&(this.Pe.clearTimeout(this.ya),this.ya=k)};m.n=function(){fd.d.n.call(this);this.stop();delete this.Pe};var hd="tick";function L(a,b,c){sa(a)?c&&(a=p(a,c)):a&&"function"==typeof a.handleEvent?a=p(a.handleEvent,a):f(Error("Invalid listener argument"));return 2147483647<b?-1:gd.setTimeout(a,b||0)};function M(){I.call(this);this.gb=[];this.uc={}}s(M,I);m=M.prototype;m.Gj=1;m.Rf=0;m.subscribe=function(a,b,c){var d=this.uc[a];d||(d=this.uc[a]=[]);var e=this.Gj;this.gb[e]=a;this.gb[e+1]=b;this.gb[e+2]=c;this.Gj=e+3;d.push(e);return e};m.Mk=function(a){if(0!=this.Rf)return this.Be||(this.Be=[]),this.Be.push(a),l;var b=this.gb[a];if(b){var c=this.uc[b];c&&Xa(c,a);delete this.gb[a];delete this.gb[a+1];delete this.gb[a+2]}return!!b};
m.c=function(a,b){var c=this.uc[a];if(c){this.Rf++;for(var d=db(arguments,1),e=0,g=c.length;e<g;e++){var h=c[e];this.gb[h+1].apply(this.gb[h+2],d)}this.Rf--;if(this.Be&&0==this.Rf)for(;c=this.Be.pop();)this.Mk(c)}};m.clear=function(a){if(a){var b=this.uc[a];b&&(t(b,this.Mk,this),delete this.uc[a])}else this.gb.length=0,this.uc={}};m.n=function(){M.d.n.call(this);delete this.gb;delete this.uc;delete this.Be};function id(){M.call(this);this.de=new fd(1E3);this.Gk=new fd(3E4);this.Hk=[];this.Jg=[]}s(id,M);ma(id);id.prototype.init=function(){this.de.start();this.Gk.start();J(this.de,hd,p(function(){t(this.Jg,function(a,b){a.time<q()&&(a.callback(),Oa.splice.call(this.Jg,b,1))},this)},this));J(this.Gk,hd,p(function(){t(this.Hk,function(a){nc(a.element,jd(a.time.getTime()))},this)},this))};function kd(a,b,c){86400>(q()-b.getTime())/1E3&&a.Hk.push({time:b,element:c})}
function ld(a,b,c){86400>(q()-b)/1E3&&a.Jg.push({time:b,callback:c})};function N(){M.call(this);this.Lm=j;var a=A("controller");this.ad=!a||y(a,"sidebar-toggled");this.Nc=a&&y(a,"guide-toggled");a=A("guide");this.rc=!!a&&y(a,"timeless");this.subscribe(md,ca("ad"),this);this.subscribe(nd,ca("Nc"),this);this.subscribe(od,ca("Lm"),this)}s(N,M);ma(N);function pd(a,b){var c=A("toggle-pending");nc(c,b);O(c,!!b)}var od="play",nd="toggle-guide",md="toggle-sidebar";var qd={Gn:["BC","AD"],Fn:["Before Christ","Anno Domini"],In:"JFMAMJJASOND".split(""),Qn:"JFMAMJJASOND".split(""),Hn:"January February March April May June July August September October November December".split(" "),Pn:"January February March April May June July August September October November December".split(" "),Mn:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),Sn:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),Wn:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),
Un:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),On:"Sun Mon Tue Wed Thu Fri Sat".split(" "),Tn:"Sun Mon Tue Wed Thu Fri Sat".split(" "),Jn:"SMTWTFS".split(""),Rn:"SMTWTFS".split(""),Nn:["Q1","Q2","Q3","Q4"],Ln:["1st quarter","2nd quarter","3rd quarter","4th quarter"],Dn:["AM","PM"],En:["EEEE, MMMM d, y","MMMM d, y","MMM d, y","M/d/yy"],Vn:["h:mm:ss a zzzz","h:mm:ss a z","h:mm:ss a","h:mm a"],Sk:6,Xn:[5,6],Tk:5};var rd=/^(\d{4})(?:(?:-?(\d{2})(?:-?(\d{2}))?)|(?:-?(\d{3}))|(?:-?W(\d{2})(?:-?([1-7]))?))?$/,sd=/^(\d{2})(?::?(\d{2})(?::?(\d{2})(\.\d+)?)?)?$/,td=/Z|(?:([-+])(\d{2})(?::?(\d{2}))?)$/;
function ud(a){var b=new vd(2E3),a=Ea(a),a=a.split(-1==a.indexOf("T")?" ":"T"),c;var d=a[0].match(rd);if(d){var e=Number(d[2]),g=Number(d[3]),h=Number(d[4]);c=Number(d[5]);var n=Number(d[6])||1;b.setFullYear(Number(d[1]));h?(b.setDate(1),b.setMonth(0),b.add(new wd(xd,h-1))):c?(b.setMonth(0),b.setDate(1),d=b.getDay()||7,b.add(new wd(xd,(4>=d?1-d:8-d)+(Number(n)+7*(Number(c)-1))-1))):(e&&(b.setDate(1),b.setMonth(e-1)),g&&b.setDate(g));c=j}else c=l;if(c&&!(c=2>a.length))a=a[1],c=a.match(td),n=0,c&&("Z"!=
c[0]&&(n=60*c[2]+Number(c[3]),n*="-"==c[1]?1:-1),n-=b.getTimezoneOffset(),a=a.substr(0,a.length-c[0].length)),(c=a.match(sd))?(b.setHours(Number(c[1])),b.setMinutes(Number(c[2])||0),b.setSeconds(Number(c[3])||0),b.setMilliseconds(c[4]?1E3*c[4]:0),0!=n&&b.setTime(b.getTime()+6E4*n),c=j):c=l;return c?b:k}
function wd(a,b,c,d,e,g){qa(a)?(this.ib=a==yd?b:0,this.ab=a==zd?b:0,this.Xa=a==xd?b:0,this.La=a==Ad?b:0,this.Ma=a==Bd?b:0,this.Qa=a==Cd?b:0):(this.ib=a||0,this.ab=b||0,this.Xa=c||0,this.La=d||0,this.Ma=e||0,this.Qa=g||0)}
wd.prototype.Qe=function(a){var b=Math.min(this.ib,this.ab,this.Xa,this.La,this.Ma,this.Qa),c=Math.max(this.ib,this.ab,this.Xa,this.La,this.Ma,this.Qa);if(0>b&&0<c)return k;if(!a&&0==b&&0==c)return"PT0S";c=[];0>b&&c.push("-");c.push("P");(this.ib||a)&&c.push(Math.abs(this.ib)+"Y");(this.ab||a)&&c.push(Math.abs(this.ab)+"M");(this.Xa||a)&&c.push(Math.abs(this.Xa)+"D");if(this.La||this.Ma||this.Qa||a)c.push("T"),(this.La||a)&&c.push(Math.abs(this.La)+"H"),(this.Ma||a)&&c.push(Math.abs(this.Ma)+"M"),
(this.Qa||a)&&c.push(Math.abs(this.Qa)+"S");return c.join("")};wd.prototype.clone=function(){return new wd(this.ib,this.ab,this.Xa,this.La,this.Ma,this.Qa)};var yd="y",zd="m",xd="d",Ad="h",Bd="n",Cd="s";wd.prototype.add=function(a){this.ib+=a.ib;this.ab+=a.ab;this.Xa+=a.Xa;this.La+=a.La;this.Ma+=a.Ma;this.Qa+=a.Qa};
function Dd(a,b,c){ra(a)?(this.u=new Date(a,b||0,c||1),Ed(this,c||1)):ta(a)?(this.u=new Date(a.getFullYear(),a.getMonth(),a.getDate()),Ed(this,a.getDate())):(this.u=new Date(q()),this.u.setHours(0),this.u.setMinutes(0),this.u.setSeconds(0),this.u.setMilliseconds(0))}m=Dd.prototype;m.sf=qd.Sk;m.tf=qd.Tk;m.clone=function(){var a=new Dd(this.u);a.sf=this.sf;a.tf=this.tf;return a};m.getFullYear=function(){return this.u.getFullYear()};m.getYear=function(){return this.getFullYear()};m.getMonth=function(){return this.u.getMonth()};
m.getDate=function(){return this.u.getDate()};m.getTime=function(){return this.u.getTime()};m.getDay=function(){return this.u.getDay()};m.getUTCHours=function(){return this.u.getUTCHours()};m.getTimezoneOffset=function(){return this.u.getTimezoneOffset()};function Fd(a){a=a.getTimezoneOffset();if(0==a)a="Z";else var b=Math.abs(a)/60,c=Math.floor(b),b=60*(b-c),a=(0<a?"-":"+")+Ma(c)+":"+Ma(b);return a}m.set=function(a){this.u=new Date(a.getFullYear(),a.getMonth(),a.getDate())};m.setFullYear=function(a){this.u.setFullYear(a)};
m.setMonth=function(a){this.u.setMonth(a)};m.setDate=function(a){this.u.setDate(a)};m.setTime=function(a){this.u.setTime(a)};
m.add=function(a){if(a.ib||a.ab){var b=this.getMonth()+a.ab+12*a.ib,c=this.getYear()+Math.floor(b/12),b=b%12;0>b&&(b+=12);var d;a:{switch(b){case 1:d=0==c%4&&(0!=c%100||0==c%400)?29:28;break a;case 5:case 8:case 10:case 3:d=30;break a}d=31}d=Math.min(d,this.getDate());this.setDate(1);this.setFullYear(c);this.setMonth(b);this.setDate(d)}a.Xa&&(a=new Date((new Date(this.getYear(),this.getMonth(),this.getDate(),12)).getTime()+864E5*a.Xa),this.setDate(1),this.setFullYear(a.getFullYear()),this.setMonth(a.getMonth()),
this.setDate(a.getDate()),Ed(this,a.getDate()))};m.Qe=function(a,b){return[this.getFullYear(),Ma(this.getMonth()+1),Ma(this.getDate())].join(a?"-":"")+(b?Fd(this):"")};m.toString=function(){return this.Qe()};function Ed(a,b){a.getDate()!=b&&a.u.setUTCHours(a.u.getUTCHours()+(a.getDate()<b?1:-1))}m.valueOf=function(){return this.u.valueOf()};function vd(a,b,c,d,e,g,h){this.u=ra(a)?new Date(a,b||0,c||1,d||0,e||0,g||0,h||0):new Date(a?a.getTime():q())}s(vd,Dd);m=vd.prototype;m.getHours=function(){return this.u.getHours()};
m.getMinutes=function(){return this.u.getMinutes()};m.getSeconds=function(){return this.u.getSeconds()};m.getUTCHours=function(){return this.u.getUTCHours()};m.setHours=function(a){this.u.setHours(a)};m.setMinutes=function(a){this.u.setMinutes(a)};m.setSeconds=function(a){this.u.setSeconds(a)};m.setMilliseconds=function(a){this.u.setMilliseconds(a)};m.setUTCHours=function(a){this.u.setUTCHours(a)};
m.add=function(a){Dd.prototype.add.call(this,a);a.La&&this.setHours(this.u.getHours()+a.La);a.Ma&&this.setMinutes(this.u.getMinutes()+a.Ma);a.Qa&&this.setSeconds(this.u.getSeconds()+a.Qa)};m.Qe=function(a,b){var c=Dd.prototype.Qe.call(this,a);return a?c+" "+Ma(this.getHours())+":"+Ma(this.getMinutes())+":"+Ma(this.getSeconds())+(b?Fd(this):""):c+"T"+Ma(this.getHours())+Ma(this.getMinutes())+Ma(this.getSeconds())+(b?Fd(this):"")};m.toString=function(){return this.Qe()};
m.clone=function(){var a=new vd(this.u);a.sf=this.sf;a.tf=this.tf;return a};function Gd(a){I.call(this);this.U=a;this.X=[]}s(Gd,I);var Hd=[];function P(a,b,c,d,e){oa(c)||(Hd[0]=c,c=Hd);for(var g=0;g<c.length;g++){var h=J(b,c[g],d||a,e||l,a.U||a);a.X.push(h)}return a}function Id(a,b,c,d,e,g){if(oa(c))for(var h=0;h<c.length;h++)Id(a,b,c[h],d,e,g);else{a:{d=d||a;g=g||a.U||a;e=!!e;if(b=$c(b,c,e))for(c=0;c<b.length;c++)if(!b[c].Yc&&b[c].Cd==d&&b[c].capture==e&&b[c].yf==g){b=b[c];break a}b=k}b&&(b=b.key,ad(b),Xa(a.X,b))}return a}function Jd(a){t(a.X,ad);a.X.length=0}
Gd.prototype.n=function(){Gd.d.n.call(this);Jd(this)};Gd.prototype.handleEvent=function(){f(Error("EventHandler.handleEvent not implemented"))};function Kd(a,b,c,d){this.top=a;this.right=b;this.bottom=c;this.left=d}Kd.prototype.clone=function(){return new Kd(this.top,this.right,this.bottom,this.left)};Kd.prototype.contains=function(a){return!this||!a?l:a instanceof Kd?a.left>=this.left&&a.right<=this.right&&a.top>=this.top&&a.bottom<=this.bottom:a.x>=this.left&&a.x<=this.right&&a.y>=this.top&&a.y<=this.bottom};function Ld(a,b,c,d){this.left=a;this.top=b;this.width=c;this.height=d}Ld.prototype.clone=function(){return new Ld(this.left,this.top,this.width,this.height)};Ld.prototype.contains=function(a){return a instanceof Ld?this.left<=a.left&&this.left+this.width>=a.left+a.width&&this.top<=a.top&&this.top+this.height>=a.top+a.height:a.x>=this.left&&a.x<=this.left+this.width&&a.y>=this.top&&a.y<=this.top+this.height};function Md(a,b,c){qa(b)?Nd(a,c,b):Qb(b,Ba(Nd,a))}function Nd(a,b,c){a.style[Na(c)]=b}function Od(a,b){var c=ac(a);return c.defaultView&&c.defaultView.getComputedStyle&&(c=c.defaultView.getComputedStyle(a,k))?c[b]||c.getPropertyValue(b)||"":""}function Pd(a,b){return a.currentStyle?a.currentStyle[b]:k}function Qd(a,b){return Od(a,b)||Pd(a,b)||a.style&&a.style[b]}function Rd(a,b,c){var d,e=qb&&(kb||tb)&&Cb("1.9");b instanceof Nb?(d=b.x,b=b.y):(d=b,b=c);a.style.left=Sd(d,e);a.style.top=Sd(b,e)}
function Td(a){return new Nb(a.offsetLeft,a.offsetTop)}function Ud(a){var b=a.getBoundingClientRect();u&&(a=a.ownerDocument,b.left-=a.documentElement.clientLeft+a.body.clientLeft,b.top-=a.documentElement.clientTop+a.body.clientTop);return b}
function Vd(a){if(u&&!Eb(8))return a.offsetParent;for(var b=ac(a),c=Qd(a,"position"),d="fixed"==c||"absolute"==c,a=a.parentNode;a&&a!=b;a=a.parentNode)if(c=Qd(a,"position"),d=d&&"static"==c&&a!=b.documentElement&&a!=b.body,!d&&(a.scrollWidth>a.clientWidth||a.scrollHeight>a.clientHeight||"fixed"==c||"absolute"==c||"relative"==c))return a;return k}
function Wd(a){for(var b=new Kd(0,Infinity,Infinity,0),c=Zb(a),d=c.H.body,e=c.H.documentElement,g=!rb&&ec(c.H)?c.H.documentElement:c.H.body;a=Vd(a);)if((!u||0!=a.clientWidth)&&(!rb||0!=a.clientHeight||a!=d)&&a!=d&&a!=e&&"visible"!=Qd(a,"overflow")){var h=Xd(a),n;n=a;if(qb&&!Cb("1.9")){var r=parseFloat(Od(n,"borderLeftWidth"));if(Yd(n))var w=n.offsetWidth-n.clientWidth-r-parseFloat(Od(n,"borderRightWidth")),r=r+w;n=new Nb(r,parseFloat(Od(n,"borderTopWidth")))}else n=new Nb(n.clientLeft,n.clientTop);
h.x+=n.x;h.y+=n.y;b.top=Math.max(b.top,h.y);b.right=Math.min(b.right,h.x+a.clientWidth);b.bottom=Math.min(b.bottom,h.y+a.clientHeight);b.left=Math.max(b.left,h.x)}d=g.scrollLeft;g=g.scrollTop;b.left=Math.max(b.left,d);b.top=Math.max(b.top,g);c=C(c.H.parentWindow||c.H.defaultView);b.right=Math.min(b.right,d+c.width);b.bottom=Math.min(b.bottom,g+c.height);return 0<=b.top&&0<=b.left&&b.bottom>b.top&&b.right>b.left?b:k}
function Xd(a){var b,c=ac(a),d=Qd(a,"position"),e=qb&&c.getBoxObjectFor&&!a.getBoundingClientRect&&"absolute"==d&&(b=c.getBoxObjectFor(a))&&(0>b.screenX||0>b.screenY),g=new Nb(0,0),h;b=c?ac(c):document;h=u&&!Eb(9)&&!wc(Zb(b))?b.body:b.documentElement;if(a==h)return g;if(a.getBoundingClientRect)b=Ud(a),a=xc(Zb(c)),g.x=b.left+a.x,g.y=b.top+a.y;else if(c.getBoxObjectFor&&!e)b=c.getBoxObjectFor(a),a=c.getBoxObjectFor(h),g.x=b.screenX-a.screenX,g.y=b.screenY-a.screenY;else{b=a;do{g.x+=b.offsetLeft;g.y+=
b.offsetTop;b!=a&&(g.x+=b.clientLeft||0,g.y+=b.clientTop||0);if(rb&&"fixed"==Qd(b,"position")){g.x+=c.body.scrollLeft;g.y+=c.body.scrollTop;break}b=b.offsetParent}while(b&&b!=a);if(pb||rb&&"absolute"==d)g.y-=c.body.offsetTop;for(b=a;(b=Vd(b))&&b!=c.body&&b!=h;)if(g.x-=b.scrollLeft,!pb||"TR"!=b.tagName)g.y-=b.scrollTop}return g}function Zd(a,b){var c,d=Xd(a);b instanceof Nb&&(c=b.y,b=b.x);Rd(a,a.offsetLeft+(b-d.x),a.offsetTop+(c-d.y))}
function Sd(a,b){"number"==typeof a&&(a=(b?Math.round(a):a)+"px");return a}function $d(a,b){a.style.height=Sd(b,j)}function ae(a,b){a.style.width=Sd(b,j)}function Q(a){if("none"!=Qd(a,"display"))return be(a);var b=a.style,c=b.display,d=b.visibility,e=b.position;b.visibility="hidden";b.position="absolute";b.display="inline";a=be(a);b.display=c;b.position=e;b.visibility=d;return a}
function be(a){var b=a.offsetWidth,c=a.offsetHeight,d=rb&&!b&&!c;return(!ja(b)||d)&&a.getBoundingClientRect?(a=Ud(a),new Pb(a.right-a.left,a.bottom-a.top)):new Pb(b,c)}function ce(a){var b=Xd(a),a=Q(a);return new Ld(b.x,b.y,a.width,a.height)}function de(a,b){var c=a.style;"opacity"in c?c.opacity=b:"MozOpacity"in c?c.MozOpacity=b:"filter"in c&&(c.filter=""===b?"":"alpha(opacity="+100*b+")")}function O(a,b){a.style.display=b?"":"none"}function Yd(a){return"rtl"==Qd(a,"direction")}
var ee=qb?"MozUserSelect":rb?"WebkitUserSelect":k;function fe(a,b){if(/^\d+px?$/.test(b))return parseInt(b,10);var c=a.style.left,d=a.runtimeStyle.left;a.runtimeStyle.left=a.currentStyle.left;a.style.left=b;var e=a.style.pixelLeft;a.style.left=c;a.runtimeStyle.left=d;return e}
function ge(a,b){if(u){var c=fe(a,Pd(a,b+"Left")),d=fe(a,Pd(a,b+"Right")),e=fe(a,Pd(a,b+"Top")),g=fe(a,Pd(a,b+"Bottom"));return new Kd(e,d,g,c)}c=Od(a,b+"Left");d=Od(a,b+"Right");e=Od(a,b+"Top");g=Od(a,b+"Bottom");return new Kd(parseFloat(e),parseFloat(d),parseFloat(g),parseFloat(c))}var he={thin:2,medium:4,thick:6};function ie(a,b){if("none"==Pd(a,b+"Style"))return 0;var c=Pd(a,b+"Width");return c in he?he[c]:fe(a,c)}
function je(a){if(u){var b=ie(a,"borderLeft"),c=ie(a,"borderRight"),d=ie(a,"borderTop"),a=ie(a,"borderBottom");return new Kd(d,c,a,b)}b=Od(a,"borderLeftWidth");c=Od(a,"borderRightWidth");d=Od(a,"borderTopWidth");a=Od(a,"borderBottomWidth");return new Kd(parseFloat(d),parseFloat(c),parseFloat(a),parseFloat(b))}var ke=/matrix\([0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, ([0-9\.\-]+)p?x?, ([0-9\.\-]+)p?x?\)/;function le(a,b,c){I.call(this);this.target=a;this.handle=b||a;this.Kj=c||new Ld(NaN,NaN,NaN,NaN);this.H=ac(a);this.B=new Gd(this);J(this.handle,["touchstart","mousedown"],this.bd,l,this)}s(le,ed);var me=u||qb&&Cb("1.9.3");m=le.prototype;m.clientX=0;m.clientY=0;m.screenX=0;m.screenY=0;m.Ak=0;m.Bk=0;m.md=0;m.nd=0;m.Hg=j;m.ka=l;m.Tg=0;m.em=0;m.Ql=l;m.Ve=l;m.i=da("B");m.Rh=function(a){this.Tg=Math.pow(a,2)};m.uk=ca("Zf");m.fb=ca("Hg");
m.n=function(){le.d.n.call(this);Zc(this.handle,["touchstart","mousedown"],this.bd,l,this);Jd(this.B);me&&this.H.releaseCapture();this.B=this.handle=this.target=k};function ne(a){ja(a.eb)||(a.eb=Yd(a.target));return a.eb}
m.bd=function(a){var b="mousedown"==a.type;if(this.Hg&&!this.ka&&(!b||Qc(a))){oe(a);if(0==this.Tg)if(this.dispatchEvent(new pe("start",this,a.clientX,a.clientY,a)))this.ka=j,a.preventDefault();else return;else a.preventDefault();var b=this.H,c=b.documentElement,d=!me;P(this.B,b,["touchmove","mousemove"],this.Kl,d);P(this.B,b,["touchend","mouseup"],this.Ic,d);me?(c.setCapture(l),P(this.B,c,"losecapture",this.Ic)):P(this.B,b?b.parentWindow||b.defaultView:window,"blur",this.Ic);u&&this.Ql&&P(this.B,
b,"dragstart",Mc);this.Zf&&P(this.B,this.Zf,"scroll",this.ek,d);this.clientX=this.Ak=a.clientX;this.clientY=this.Bk=a.clientY;this.screenX=a.screenX;this.screenY=a.screenY;this.Ve?(a=this.target,b=a.offsetLeft,c=a.offsetParent,!c&&"fixed"==Qd(a,"position")&&(c=ac(a).documentElement),c?(qb?(d=je(c),b+=d.left):Eb(8)&&(d=je(c),b-=d.left),a=Yd(c)?c.clientWidth-(b+a.offsetWidth):b):a=b):a=this.target.offsetLeft;this.md=a;this.nd=this.target.offsetTop;this.xh=xc(Zb(this.H));this.em=q()}else this.dispatchEvent("earlycancel")};
m.Ic=function(a,b){Jd(this.B);me&&this.H.releaseCapture();if(this.ka){oe(a);this.ka=l;var c=qe(this,this.md),d=re(this,this.nd);this.dispatchEvent(new pe("end",this,a.clientX,a.clientY,a,c,d,b||"touchcancel"==a.type))}else this.dispatchEvent("earlycancel");("touchend"==a.type||"touchcancel"==a.type)&&a.preventDefault()};
function oe(a){var b=a.type;"touchstart"==b||"touchmove"==b?a.init(a.la.targetTouches[0],a.currentTarget):("touchend"==b||"touchcancel"==b)&&a.init(a.la.changedTouches[0],a.currentTarget)}
m.Kl=function(a){if(this.Hg){oe(a);var b=(this.Ve&&ne(this)?-1:1)*(a.clientX-this.clientX),c=a.clientY-this.clientY;this.clientX=a.clientX;this.clientY=a.clientY;this.screenX=a.screenX;this.screenY=a.screenY;if(!this.ka){var d=this.Ak-this.clientX,e=this.Bk-this.clientY;if(d*d+e*e>this.Tg)if(this.dispatchEvent(new pe("start",this,a.clientX,a.clientY,a)))this.ka=j;else{this.nf||this.Ic(a);return}}c=se(this,b,c);b=c.x;c=c.y;this.ka&&this.dispatchEvent(new pe("beforedrag",this,a.clientX,a.clientY,a,
b,c))&&(te(this,a,b,c),a.preventDefault())}};function se(a,b,c){var d=xc(Zb(a.H)),b=b+(d.x-a.xh.x),c=c+(d.y-a.xh.y);a.xh=d;a.md+=b;a.nd+=c;b=qe(a,a.md);a=re(a,a.nd);return new Nb(b,a)}m.ek=function(a){var b=se(this,0,0);a.clientX=this.clientX;a.clientY=this.clientY;te(this,a,b.x,b.y)};function te(a,b,c,d){a.he(c,d);a.dispatchEvent(new pe("drag",a,b.clientX,b.clientY,b,c,d))}
function qe(a,b){var c=a.Kj,d=!isNaN(c.left)?c.left:k,c=!isNaN(c.width)?c.width:0;return Math.min(d!=k?d+c:Infinity,Math.max(d!=k?d:-Infinity,b))}function re(a,b){var c=a.Kj,d=!isNaN(c.top)?c.top:k,c=!isNaN(c.height)?c.height:0;return Math.min(d!=k?d+c:Infinity,Math.max(d!=k?d:-Infinity,b))}m.he=function(a,b){this.Ve&&ne(this)?this.target.style.right=a+"px":this.target.style.left=a+"px";this.target.style.top=b+"px"};
function pe(a,b,c,d,e,g,h,n){Lc.call(this,a);this.clientX=c;this.clientY=d;this.cf=e;this.left=ja(g)?g:b.md;this.top=ja(h)?h:b.nd;this.hl=b;this.fl=!!n}s(pe,Lc);function ue(){I.call(this);this.m=ve;this.ke=this.startTime=k}s(ue,ed);var ve=0;ue.prototype.gc=function(){this.Aa("begin")};ue.prototype.hc=function(){this.Aa("end")};ue.prototype.Aa=function(a){this.dispatchEvent(a)};function we(a,b,c){I.call(this);this.$b=a;this.V=b||0;this.U=c;this.sg=p(this.ie,this)}s(we,I);m=we.prototype;m.Da=0;m.n=function(){we.d.n.call(this);this.stop();delete this.$b;delete this.U};m.start=function(a){this.stop();this.Da=L(this.sg,ja(a)?a:this.V)};m.stop=function(){this.Xb()&&gd.clearTimeout(this.Da);this.Da=0};m.rf=function(){this.stop();this.ie()};m.Xb=function(){return 0!=this.Da};m.ie=function(){this.Da=0;this.$b&&this.$b.call(this.U)};var xe;xe=ea(k);var ye={},ze=k;function Ae(a){a=ua(a);delete ye[a];Tb(ye)&&ze&&ze.stop()}function Be(){ze||(ze=new we(function(){var a=q();Qb(ye,function(c){Ce(c,a)});Tb(ye)||Be()},20));var a=ze;a.Xb()||a.start()};function De(a,b,c,d){ue.call(this);(!oa(a)||!oa(b))&&f(Error("Start and end parameters must be arrays"));a.length!=b.length&&f(Error("Start and end points must be the same length"));this.Le=a;this.kl=b;this.duration=c;this.ti=d;this.coords=[];this.Ve=l}s(De,ue);m=De.prototype;m.aj=0;m.Na=0;m.ah=k;
m.play=function(a){if(a||this.m==ve)this.Na=0,this.coords=this.Le;else if(1==this.m)return l;Ae(this);this.startTime=a=q();-1==this.m&&(this.startTime-=this.duration*this.Na);this.ke=this.startTime+this.duration;this.ah=this.startTime;this.Na||this.gc();this.Aa("play");-1==this.m&&this.Aa("resume");this.m=1;var b=ua(this);b in ye||(ye[b]=this);Be();Ce(this,a);return j};m.stop=function(a){Ae(this);this.m=ve;a&&(this.Na=1);Ee(this,this.Na);this.Aa("stop");this.hc()};m.uf=da("Na");
m.n=function(){this.m==ve||this.stop(l);this.Aa("destroy");De.d.n.call(this)};function Ce(a,b){a.Na=(b-a.startTime)/(a.ke-a.startTime);1<=a.Na&&(a.Na=1);a.aj=1E3/(b-a.ah);a.ah=b;Ee(a,a.Na);1==a.Na?(a.m=ve,Ae(a),a.Aa("finish"),a.hc()):1==a.m&&a.ph()}function Ee(a,b){sa(a.ti)&&(b=a.ti(b));a.coords=Array(a.Le.length);for(var c=0;c<a.Le.length;c++)a.coords[c]=(a.kl[c]-a.Le[c])*b+a.Le[c]}m.ph=function(){this.Aa("animate")};m.Aa=function(a){this.dispatchEvent(new Fe(a,this))};
function Fe(a,b){Lc.call(this,a);this.coords=b.coords;this.x=b.coords[0];this.y=b.coords[1];this.Po=b.coords[2];this.duration=b.duration;this.Na=b.uf();this.so=b.aj;this.state=b.m;this.Zn=b}s(Fe,Lc);function Ge(a,b,c,d,e){De.call(this,b,c,d,e);this.element=a}s(Ge,De);m=Ge.prototype;m.Te=la;m.Dj=function(){ja(this.eb)||(this.eb=Yd(this.element));return this.eb};m.ph=function(){this.Te();Ge.d.ph.call(this)};m.hc=function(){this.Te();Ge.d.hc.call(this)};m.gc=function(){this.Te();Ge.d.gc.call(this)};function He(a,b,c,d,e){(2!=b.length||2!=c.length)&&f(Error("Start and end points must be 2D"));Ge.apply(this,arguments)}s(He,Ge);
He.prototype.Te=function(){if(this.Ve){var a=this.element,b=Math.round(this.coords[0]),b=Math.max(b,0);a.scrollLeft=Yd(a)?qb?-b:!u||!Cb("8")?a.scrollWidth-b-a.clientWidth:b:b}else this.element.scrollLeft=Math.round(this.coords[0]);this.element.scrollTop=Math.round(this.coords[1])};function Ie(a,b,c,d,e){ra(b)&&(b=[b]);ra(c)&&(c=[c]);Ge.call(this,a,b,c,d,e);(1!=b.length||1!=c.length)&&f(Error("Start and end points must be 1D"))}s(Ie,Ge);Ie.prototype.Te=function(){de(this.element,this.coords[0])};
Ie.prototype.show=function(){this.element.style.display=""};Ie.prototype.hide=function(){this.element.style.display="none"};function Je(a,b,c){Ie.call(this,a,1,0,b,c)}s(Je,Ie);Je.prototype.gc=function(){this.show();Je.d.gc.call(this)};Je.prototype.hc=function(){this.hide();Je.d.hc.call(this)};function Ke(a,b,c){Ie.call(this,a,0,1,b,c)}s(Ke,Ie);Ke.prototype.gc=function(){this.show();Ke.d.gc.call(this)};function Le(){}ma(Le);Le.prototype.km=0;Le.a();function R(a){I.call(this);this.Gc=a||Zb();this.eb=Me}s(R,ed);R.prototype.Pl=Le.a();var Me=k;function Ne(a,b){switch(a){case 1:return b?"disable":"enable";case 2:return b?"highlight":"unhighlight";case 4:return b?"activate":"deactivate";case 8:return b?"select":"unselect";case 16:return b?"check":"uncheck";case 32:return b?"focus":"blur";case 64:return b?"open":"close"}f(Error("Invalid component state"))}m=R.prototype;m.Da=k;m.ca=l;m.e=k;m.eb=k;m.q=k;m.S=k;m.ha=k;m.za=k;m.Rk=l;
function Oe(a){return a.Da||(a.Da=":"+(a.Pl.km++).toString(36))}m.b=da("e");m.i=function(){return this.vd||(this.vd=new Gd(this))};m.bg=function(a){this==a&&f(Error("Unable to set parent component"));a&&(this.S&&this.Da&&this.S.za&&this.Da&&Wb(this.S.za,this.Da)&&this.S!=a)&&f(Error("Unable to set parent component"));this.S=a;R.d.Sh.call(this,a)};m.getParent=da("S");m.Sh=function(a){this.S&&this.S!=a&&f(Error("Method not supported"));R.d.Sh.call(this,a)};m.$a=da("Gc");m.R=function(){this.e=this.Gc.createElement("div")};
function Pe(a,b){a.ca&&f(Error("Component already rendered"));a.e||a.R();b?b.insertBefore(a.e,k):a.Gc.H.body.appendChild(a.e);(!a.S||a.S.ca)&&a.z()}m.h=function(a){this.ca&&f(Error("Component already rendered"));if(a&&this.zc(a)){this.Rk=j;if(!this.Gc||this.Gc.H!=ac(a))this.Gc=Zb(a);this.w(a);this.z()}else f(Error("Invalid element to decorate"))};m.zc=ea(j);m.w=ca("e");m.z=function(){this.ca=j;Qe(this,function(a){!a.ca&&a.b()&&a.z()})};
m.Jc=function(){Qe(this,function(a){a.ca&&a.Jc()});this.vd&&Jd(this.vd);this.ca=l};m.n=function(){R.d.n.call(this);this.ca&&this.Jc();this.vd&&(this.vd.ea(),delete this.vd);Qe(this,function(a){a.ea()});!this.Rk&&this.e&&E(this.e);this.S=this.q=this.e=this.za=this.ha=k};
function Re(a,b){var c=a.ha?a.ha.length:0;b.ca&&!a.ca&&f(Error("Component already rendered"));(0>c||c>(a.ha?a.ha.length:0))&&f(Error("Child component index out of bounds"));if(!a.za||!a.ha)a.za={},a.ha=[];if(b.getParent()==a){var d=Oe(b);a.za[d]=b;Xa(a.ha,b)}else Vb(a.za,Oe(b),b);b.bg(a);cb(a.ha,c,0,b);b.ca&&a.ca&&b.getParent()==a?(d=a.pb(),d.insertBefore(b.b(),d.childNodes[c]||k)):a.ca&&(!b.ca&&b.e&&b.e.parentNode)&&b.z()}m.pb=da("e");
m.Dj=function(){this.eb==k&&(this.eb=Yd(this.ca?this.e:this.Gc.H.body));return this.eb};m.$c=function(a){this.ca&&f(Error("Component already rendered"));this.eb=a};function Qe(a,b){a.ha&&t(a.ha,b,i)}m.removeChild=function(a,b){if(a){var c=qa(a)?a:Oe(a),a=this.za&&c?Wb(this.za,c)||k:k;c&&a&&(Ub(this.za,c),Xa(this.ha,a),b&&(a.Jc(),a.e&&E(a.e)),a.bg(k))}a||f(Error("Child is not in parent component"));return a};function Se(a,b,c,d,e){if(!u&&(!rb||!Cb("525")))return j;if(kb&&e)return Te(a);if(e&&!d||!c&&(17==b||18==b)||u&&d&&b==a)return l;switch(a){case 13:return!(u&&Eb(9));case 27:return!rb}return Te(a)}function Te(a){if(48<=a&&57>=a||96<=a&&106>=a||65<=a&&90>=a||rb&&0==a)return j;switch(a){case 32:case 63:case 107:case 109:case 110:case 111:case 186:case 59:case 189:case 187:case 61:case 188:case 190:case 191:case 192:case 222:case 219:case 220:case 221:return j;default:return l}}
function Ue(a){switch(a){case 61:return 187;case 59:return 186;case 224:return 91;case 0:return 224;default:return a}};function Ve(){}var We;ma(Ve);m=Ve.prototype;m.ud=ba();m.R=function(a){var b=a.$a().R("div",Xe(this,a).join(" "),a.kb);Ye(this,a,b);return b};m.pb=function(a){return a};m.je=function(a,b,c){if(a=a.b?a.b():a)if(u&&!Cb("7")){var d=Ze(Lb(a),b);d.push(b);Ba(c?v:x,a).apply(k,d)}else z(a,b,c)};m.zc=ea(j);
m.h=function(a,b){if(b.id){var c=b.id;a.S&&a.S.za&&(Ub(a.S.za,a.Da),Vb(a.S.za,c,a));a.Da=c}(c=this.pb(b))&&c.firstChild?(c=c.firstChild.nextSibling?ab(c.childNodes):c.firstChild,a.kb=c):a.kb=k;var d=0,e=this.ta(),g=this.ta(),h=l,n=l,c=l,r=Lb(b);t(r,function(a){if(!h&&a==e)h=j,g==e&&(n=j);else if(!n&&a==g)n=j;else{var b=d;if(!this.Ck){this.hf||$e(this);var c=this.hf,r={},w;for(w in c)r[c[w]]=w;this.Ck=r}a=parseInt(this.Ck[a],10);d=b|(isNaN(a)?0:a)}},this);a.m=d;h||(r.push(e),g==e&&(n=j));n||r.push(g);
var w=a.Ya;w&&r.push.apply(r,w);if(u&&!Cb("7")){var F=Ze(r);0<F.length&&(r.push.apply(r,F),c=j)}if(!h||!n||w||c)b.className=r.join(" ");Ye(this,a,b);return b};m.xj=function(a){a.Dj()&&this.$c(a.b(),j);a.isEnabled()&&this.Pd(a,a.rb())};function Ye(a,b,c){b.isEnabled()||a.hb(c,1,j);b.m&8&&a.hb(c,8,j);b.qa&16&&a.hb(c,16,af(b));b.qa&64&&a.hb(c,64,!!(b.m&64))}
m.Od=function(a,b){var c=!b,d=u||pb?a.getElementsByTagName("*"):k;if(ee){if(c=c?"none":"",a.style[ee]=c,d)for(var e=0,g;g=d[e];e++)g.style[ee]=c}else if(u||pb)if(c=c?"on":"",a.setAttribute("unselectable",c),d)for(e=0;g=d[e];e++)g.setAttribute("unselectable",c)};m.$c=function(a,b){this.je(a,this.ta()+"-rtl",b)};m.Zg=function(a){var b;return a.qa&32&&(b=a.Vb())?qc(b):l};
m.Pd=function(a,b){var c;if(a.qa&32&&(c=a.Vb())){if(!b&&a.Bf()){try{c.blur()}catch(d){}a.Bf()&&a.hj()}qc(c)!=b&&(b?c.tabIndex=0:(c.tabIndex=-1,c.removeAttribute("tabIndex")))}};m.xb=function(a,b){O(a,b)};m.wa=function(a,b,c){var d=a.b();if(d){var e=bf(this,b);e&&this.je(a,e,c);this.hb(d,b,c)}};m.hb=function(a,b,c){We||(We={1:"disabled",8:"selected",16:"checked",64:"expanded"});(b=We[b])&&a.setAttribute("aria-"+b,c)};
m.Zc=function(a,b){var c=this.pb(a);if(c&&(gc(c),b))if(qa(b))nc(c,b);else{var d=function(a){if(a){var b=ac(c);c.appendChild(qa(a)?b.createTextNode(a):a)}};oa(b)?t(b,d):pa(b)&&!("nodeType"in b)?t(ab(b),d):d(b)}};m.Vb=function(a){return a.b()};m.ta=ea("goog-control");function Xe(a,b){var c=a.ta(),d=[c],e=a.ta();e!=c&&d.push(e);c=b.m;for(e=[];c;){var g=c&-c;e.push(bf(a,g));c&=~g}d.push.apply(d,e);(c=b.Ya)&&d.push.apply(d,c);u&&!Cb("7")&&d.push.apply(d,Ze(d));return d}
function Ze(a,b){var c=[];b&&(a=a.concat([b]));t([],function(d){Ta(d,Ba(Wa,a))&&(!b||Wa(d,b))&&c.push(d.join("_"))});return c}function bf(a,b){a.hf||$e(a);return a.hf[b]}function $e(a){var b=a.ta();a.hf={1:b+"-disabled",2:b+"-hover",4:b+"-active",8:b+"-selected",16:b+"-checked",32:b+"-focused",64:b+"-open"}};function cf(){}s(cf,Ve);ma(cf);m=cf.prototype;m.ud=ea("button");m.hb=function(a,b,c){16==b?a.setAttribute("aria-pressed",c):cf.d.hb.call(this,a,b,c)};m.R=function(a){var b=cf.d.R.call(this,a),c=a.me();c&&this.Uh(b,c);(c=a.A())&&this.xa(b,c);a.qa&16&&this.hb(b,16,af(a));return b};m.h=function(a,b){var b=cf.d.h.call(this,a,b),c=this.A(b);a.ri=c;a.fi=this.me(b);a.qa&16&&this.hb(b,16,af(a));return b};m.A=la;m.xa=la;m.me=function(a){return a.title};m.Uh=function(a,b){a&&(a.title=b||"")};m.ta=ea("goog-button");function df(a,b){I.call(this);a&&ef(this,a,b)}s(df,ed);m=df.prototype;m.e=k;m.Cf=k;m.$g=k;m.Df=k;m.Zb=-1;m.Yb=-1;m.pg=l;
var ff={3:13,12:144,63232:38,63233:40,63234:37,63235:39,63236:112,63237:113,63238:114,63239:115,63240:116,63241:117,63242:118,63243:119,63244:120,63245:121,63246:122,63247:123,63248:44,63272:46,63273:36,63275:35,63276:33,63277:34,63289:144,63302:45},gf={Up:38,Down:40,Left:37,Right:39,Enter:13,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"U+007F":46,Home:36,End:35,PageUp:33,PageDown:34,Insert:45},hf=u||rb&&Cb("525"),jf=kb&&qb;m=df.prototype;
m.Hl=function(a){if(rb&&(17==this.Zb&&!a.ctrlKey||18==this.Zb&&!a.altKey))this.Yb=this.Zb=-1;hf&&!Se(a.keyCode,this.Zb,a.shiftKey,a.ctrlKey,a.altKey)?this.handleEvent(a):(this.Yb=qb?Ue(a.keyCode):a.keyCode,jf&&(this.pg=a.altKey))};m.Jl=function(a){this.Yb=this.Zb=-1;this.pg=a.altKey};
m.handleEvent=function(a){var b=a.la,c,d,e=b.altKey;u&&"keypress"==a.type?(c=this.Yb,d=13!=c&&27!=c?b.keyCode:0):rb&&"keypress"==a.type?(c=this.Yb,d=0<=b.charCode&&63232>b.charCode&&Te(c)?b.charCode:0):pb?(c=this.Yb,d=Te(c)?b.keyCode:0):(c=b.keyCode||this.Yb,d=b.charCode||0,jf&&(e=this.pg),kb&&(63==d&&224==c)&&(c=191));var g=c,h=b.keyIdentifier;c?63232<=c&&c in ff?g=ff[c]:25==c&&a.shiftKey&&(g=9):h&&h in gf&&(g=gf[h]);a=g==this.Zb;this.Zb=g;b=new kf(g,d,a,b);b.altKey=e;this.dispatchEvent(b)};
m.b=da("e");function ef(a,b,c){a.Df&&a.detach();a.e=b;a.Cf=J(a.e,"keypress",a,c);a.$g=J(a.e,"keydown",a.Hl,c,a);a.Df=J(a.e,"keyup",a.Jl,c,a)}m.detach=function(){this.Cf&&(ad(this.Cf),ad(this.$g),ad(this.Df),this.Df=this.$g=this.Cf=k);this.e=k;this.Yb=this.Zb=-1};m.n=function(){df.d.n.call(this);this.detach()};function kf(a,b,c,d){d&&this.init(d,i);this.type="key";this.keyCode=a;this.charCode=b;this.repeat=c}s(kf,Oc);function lf(a,b){a||f(Error("Invalid class name "+a));sa(b)||f(Error("Invalid decorator function "+b))}var mf={};function nf(a,b,c){R.call(this,c);if(!b){for(var b=this.constructor,d;b;){d=ua(b);if(d=mf[d])break;b=b.d?b.d.constructor:k}b=d?sa(d.a)?d.a():new d:k}this.N=b;this.kb=a}s(nf,R);m=nf.prototype;m.kb=k;m.m=0;m.qa=39;m.Eb=255;m.nn=0;m.ig=j;m.Ya=k;m.Qg=j;m.bf=l;m.kk=k;function of(a){a.ca&&l!=a.Qg&&pf(a,l);a.Qg=l}m.Vb=function(){return this.N.Vb(this)};
m.je=function(a,b){b?a&&(this.Ya?Wa(this.Ya,a)||this.Ya.push(a):this.Ya=[a],this.N.je(this,a,j)):a&&this.Ya&&(Xa(this.Ya,a),0==this.Ya.length&&(this.Ya=k),this.N.je(this,a,l))};m.R=function(){var a=this.N.R(this);this.e=a;var b=this.kk||this.N.ud();b&&a.setAttribute("role",b);this.bf||this.N.Od(a,l);this.rb()||this.N.xb(a,l)};m.pb=function(){return this.N.pb(this.b())};m.zc=function(a){return this.N.zc(a)};
m.w=function(a){this.e=a=this.N.h(this,a);var b=this.kk||this.N.ud();b&&a.setAttribute("role",b);this.bf||this.N.Od(a,l);this.ig="none"!=a.style.display};m.z=function(){nf.d.z.call(this);this.N.xj(this);if(this.qa&-2&&(this.Qg&&pf(this,j),this.qa&32)){var a=this.Vb();if(a){var b=this.Bd||(this.Bd=new df);ef(b,a);P(P(P(this.i(),b,"key",this.Il),a,"focus",this.Fl),a,"blur",this.hj)}}};
function pf(a,b){var c=a.i(),d=a.b();b?(P(P(P(P(c,d,"mouseover",a.oj),d,"mousedown",a.mj),d,"mouseup",a.pj),d,"mouseout",a.nj),a.xf!=la&&P(c,d,"contextmenu",a.xf),u&&P(c,d,"dblclick",a.ij)):(Id(Id(Id(Id(c,d,"mouseover",a.oj),d,"mousedown",a.mj),d,"mouseup",a.pj),d,"mouseout",a.nj),a.xf!=la&&Id(c,d,"contextmenu",a.xf),u&&Id(c,d,"dblclick",a.ij))}m.Jc=function(){nf.d.Jc.call(this);this.Bd&&this.Bd.detach();this.rb()&&this.isEnabled()&&this.N.Pd(this,l)};
m.n=function(){nf.d.n.call(this);this.Bd&&(this.Bd.ea(),delete this.Bd);delete this.N;this.Ya=this.kb=k};m.Zc=function(a){this.N.Zc(this.b(),a);this.kb=a};m.ej=function(){var a=this.kb;return!a?"":(qa(a)?a:oa(a)?Sa(a,tc).join(""):rc(a)).replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")};m.$c=function(a){nf.d.$c.call(this,a);var b=this.b();b&&this.N.$c(b,a)};m.Od=function(a){this.bf=a;var b=this.b();b&&this.N.Od(b,a)};m.rb=da("ig");
m.xb=function(a,b){if(b||this.ig!=a&&this.dispatchEvent(a?"show":"hide")){var c=this.b();c&&this.N.xb(c,a);this.isEnabled()&&this.N.Pd(this,a);this.ig=a;return j}return l};m.isEnabled=function(){return!(this.m&1)};m.fb=function(a){var b=this.getParent();if((!b||"function"!=typeof b.isEnabled||b.isEnabled())&&qf(this,1,!a))a||(this.setActive(l),rf(this,l)),this.rb()&&this.N.Pd(this,a),this.wa(1,!a)};function rf(a,b){qf(a,2,b)&&a.wa(2,b)}m.Xb=function(){return!!(this.m&4)};
m.setActive=function(a){qf(this,4,a)&&this.wa(4,a)};function af(a){return!!(a.m&16)}function sf(a,b){qf(a,16,b)&&a.wa(16,b)}m.Bf=function(){return!!(this.m&32)};m.va=function(a){qf(this,32,a)&&this.wa(32,a)};m.wa=function(a,b){this.qa&a&&b!=!!(this.m&a)&&(this.N.wa(this,a,b),this.m=b?this.m|a:this.m&~a)};function tf(a,b,c){a.ca&&(a.m&b&&!c)&&f(Error("Component already rendered"));!c&&a.m&b&&a.wa(b,l);a.qa=c?a.qa|b:a.qa&~b}function uf(a,b){return!!(a.Eb&b)&&!!(a.qa&b)}
function qf(a,b,c){return!!(a.qa&b)&&!!(a.m&b)!=c&&(!(a.nn&b)||a.dispatchEvent(Ne(b,c)))&&!a.nf}m.oj=function(a){(!a.relatedTarget||!mc(this.b(),a.relatedTarget))&&(this.dispatchEvent("enter")&&this.isEnabled()&&uf(this,2))&&rf(this,j)};m.nj=function(a){if((!a.relatedTarget||!mc(this.b(),a.relatedTarget))&&this.dispatchEvent("leave"))uf(this,4)&&this.setActive(l),uf(this,2)&&rf(this,l)};m.xf=la;
m.mj=function(a){this.isEnabled()&&(uf(this,2)&&rf(this,j),Qc(a)&&(uf(this,4)&&this.setActive(j),this.N.Zg(this)&&this.Vb().focus()));!this.bf&&Qc(a)&&a.preventDefault()};m.pj=function(a){this.isEnabled()&&(uf(this,2)&&rf(this,j),this.Xb()&&(this.Ce(a)&&uf(this,4))&&this.setActive(l))};m.ij=function(a){this.isEnabled()&&this.Ce(a)};
m.Ce=function(a){uf(this,16)&&sf(this,!af(this));uf(this,8)&&qf(this,8,j)&&this.wa(8,j);if(uf(this,64)){var b=!(this.m&64);qf(this,64,b)&&this.wa(64,b)}b=new Lc("action",this);a&&(b.altKey=a.altKey,b.ctrlKey=a.ctrlKey,b.metaKey=a.metaKey,b.shiftKey=a.shiftKey,b.Ah=a.Ah);return this.dispatchEvent(b)};m.Fl=function(){uf(this,32)&&this.va(j)};m.hj=function(){uf(this,4)&&this.setActive(l);uf(this,32)&&this.va(l)};
m.Il=function(a){return this.rb()&&this.isEnabled()&&this.Pg(a)?(a.preventDefault(),a.stopPropagation(),j):l};m.Pg=function(a){return 13==a.keyCode&&this.Ce(a)};sa(nf)||f(Error("Invalid component class "+nf));sa(Ve)||f(Error("Invalid renderer class "+Ve));var vf=ua(nf);mf[vf]=Ve;lf("goog-control",function(){return new nf(k)});function wf(){}s(wf,cf);ma(wf);m=wf.prototype;m.ud=ba();m.R=function(a){of(a);a.Eb&=-256;tf(a,32,l);return a.$a().R("button",{"class":Xe(this,a).join(" "),disabled:!a.isEnabled(),title:a.me()||"",value:a.A()||""},a.ej()||"")};m.zc=function(a){return"BUTTON"==a.tagName||"INPUT"==a.tagName&&("button"==a.type||"submit"==a.type||"reset"==a.type)};m.h=function(a,b){of(a);a.Eb&=-256;tf(a,32,l);b.disabled&&v(b,bf(this,1));return wf.d.h.call(this,a,b)};m.xj=function(a){P(a.i(),a.b(),"click",a.Ce)};m.Od=la;
m.$c=la;m.Zg=function(a){return a.isEnabled()};m.Pd=la;m.wa=function(a,b,c){wf.d.wa.call(this,a,b,c);if((a=a.b())&&1==b)a.disabled=c};m.A=function(a){return a.value};m.xa=function(a,b){a&&(a.value=b)};m.hb=la;function xf(a,b,c){nf.call(this,a,b||wf.a(),c)}s(xf,nf);m=xf.prototype;m.A=da("ri");m.xa=function(a){this.ri=a;this.N.xa(this.b(),a)};m.me=da("fi");m.Uh=function(a){this.fi=a;this.N.Uh(this.b(),a)};m.n=function(){xf.d.n.call(this);delete this.ri;delete this.fi};m.z=function(){xf.d.z.call(this);if(this.qa&32){var a=this.Vb();a&&P(this.i(),a,"keyup",this.Pg)}};m.Pg=function(a){return 13==a.keyCode&&"key"==a.type||32==a.keyCode&&"keyup"==a.type?this.Ce(a):32==a.keyCode};lf("goog-button",function(){return new xf(k)});function yf(){}s(yf,cf);ma(yf);m=yf.prototype;m.R=function(a){var b={"class":"goog-inline-block "+Xe(this,a).join(" "),title:a.me()||""},b=a.$a().R("div",b,zf(this,a.kb,a.$a()));Ye(this,a,b);return b};m.ud=ea("button");m.pb=function(a){return a&&a.firstChild.firstChild};function zf(a,b,c){return c.R("div","goog-inline-block "+(a.ta()+"-outer-box"),c.R("div","goog-inline-block "+(a.ta()+"-inner-box"),b))}m.zc=function(a){return"DIV"==a.tagName};
m.h=function(a,b){Af(b,j);Af(b,l);var c;a:{c=yc(a.$a(),b);var d=this.ta()+"-outer-box";if(c&&y(c,d)&&(c=yc(a.$a(),c),d=this.ta()+"-inner-box",c&&y(c,d))){c=j;break a}c=l}c||b.appendChild(zf(this,b.childNodes,a.$a()));v(b,"goog-inline-block",this.ta());return yf.d.h.call(this,a,b)};m.ta=ea("goog-custom-button");
function Af(a,b){if(a)for(var c=b?a.firstChild:a.lastChild,d;c&&c.parentNode==a;){d=b?c.nextSibling:c.previousSibling;if(3==c.nodeType){var e=c.nodeValue;if(""==Ea(e))a.removeChild(c);else{c.nodeValue=b?e.replace(/^[\s\xa0]+/,""):e.replace(/[\s\xa0]+$/,"");break}}else break;c=d}};function Bf(a,b,c){xf.call(this,a,b||yf.a(),c)}s(Bf,xf);lf("goog-custom-button",function(){return new Bf(k)});function Cf(){R.call(this);this.sc=2;this.V=5;this.ei=60*this.sc*this.V;this.Fi=[];this.gf={};this.Ea=Df();this.pa=0;this.rk=this.qk=l;this.Lg=this.Db=j;this.ka=l;this.ia=[T.a().p,T.a().p.l()];this.fh=0;this.Im=201}s(Cf,R);m=Cf.prototype;
m.z=function(){Cf.d.z.call(this);this.Td=A("ticker");this.yo=A("my-ticker");var a=A("go-live");this.wd=A("header");this.oa=A("channels");this.Pa=B("channel-scrollable",this.b());this.Ca=B("channel-h-scrollable",this.b());this.uj=1;this.sa=Math.max(1280,C().width)*this.uj;this.Cc=Q(A("controller")).height;N.a().subscribe(nd,function(a){this.gg(a)},this);N.a().subscribe(md,function(a){z(this.b(),"sidebar-toggled",a);this.ga(l,i,j);Ef(this)},this);this.gg(y(this.b(),"toggled"));this.pc=new vd;for(var b=
60;b>=this.pc.getMinutes();)b-=this.V;this.pc.setMinutes(b);this.$=this.pc.clone();this.$.add(new wd(0,0,0,0,0*-this.V));this.gh=this.$.clone();this.gh.add(new wd(0,0,0,0,this.V*(this.sc+1)));Ff(this,this.sc,this.$);ae(this.oa,this.sa);ae(this.wd,this.sa);this.jc=(this.sa-200)/this.ei;this.tn=this.sa/this.sc;this.vg=document.createElement("style");this.vg.id="channel-name-offs";this.vg.type="text/css";document.getElementsByTagName("head")[0].appendChild(this.vg);t(T.a().Bc,p(function(a){this.xc(a)},
this));this.o=new le(this.Ca);var c=this.Pa,d=this.wd,e,g,h=0;this.o.he=function(a,b){this.target&&(this.target.scrollLeft-=a-h,h=a,y(this.target,"channel-h-scrollable")&&(d.style.left=-this.target.scrollLeft+"px"));e=e||b;c.scrollTop-=b-(g||e);g=b};var b=A("now-left"),n=A("now-right");P(P(P(P(P(P(P(P(P(P(P(this.i(),id.a().de,hd,p(this.di,this)),a,"click",p(function(){T.a().c(Gf,this.da.q);N.a().c(od,j)},this)),window,"resize",p(this.ga,this)),this.Td,"click",p(this.ga,this,j,i,l)),b,"click",p(this.tm,
this)),n,"click",p(this.Bm,this)),this.o,"beforedrag",p(function(a){!this.ka&&N.a().rc?(a=a.cf,a=vc(a.target,"channel")||B("channel",a.target),B("programs",a).style.paddingRight=C().width-400+"px",this.o.target=a):this.ka||(this.o.target=this.Ca);x(this.b(),"animate");v(this.b(),"drag");this.ka=j},this)),this.o,"end",p(function(){x(this.b(),"drag");v(this.b(),"animate");this.Db=this.ka=l;e=i;h=g=0;Ef(this)},this)),this.oa,"mousewheel",p(function(a){a.preventDefault();a.stopPropagation();a=a.la;this.Pa.scrollTop-=
a.wheelDelta?a.wheelDelta:a.detail?-a.detail:0},this)),this.wd,"mousewheel",p(function(a){a.preventDefault();a.stopPropagation();a=a.la;x(this.b(),"animate");v(this.b(),"drag");this.ka=j;this.oa.scrollLeft+=a.wheelDelta?a.wheelDelta:a.detail?-a.detail:0;x(this.b(),"drag");v(this.b(),"animate");this.Db=this.ka=l;Ef(this)},this)),B("switcher",this.b()),"click",p(function(){x(this.b(),"animate");N.a().rc=!N.a().rc;N.a().rc?(v(this.b(),"timeless"),L(p(function(){v(this.b(),"position-hack");v(this.b(),
"animate")},this))):(x(this.b(),"timeless"),L(p(function(){x(this.b(),"position-hack");v(this.b(),"animate")},this)));this.ga(j,i,l)},this));window.onbeforeunload=ea("Leaving so soon?");T.a().subscribe(Hf,this.Fe,this);T.a().subscribe(If,this.xc,this);T.a().subscribe(Gf,this.Ac,this);T.a().subscribe(Jf,p(function(){this.ka||L(p(function(){this.ga(j)},this))},this));N.a().subscribe("toggle-admin",function(a){z(this.b(),"admin",a)},this);for(U.a().subscribe(Kf,this.Bh,this);this.sa<this.fh;)Lf(this);
this.Fe();this.Ea&&P(this.i(),this.o,"beforedrag",p(function(a){a.cf.shiftKey&&a.preventDefault()},this))};m.xc=function(a){if(!this.gf[a.id]){if(!a.I){var b=new Mf(a,this.ei,this.pc,0,this.$);Pe(b,this.oa);this.Fi.push(b);this.gf[a.id]=b;a.subscribe(Nf,function(){this.Fe()},this);var c=bc("program",b.b());if(c=c[c.length-1])this.fh=Math.max(this.fh,Td(c).x+Q(c).width)}a.id==T.a().p.id&&b&&(Of(b,j),this.da=b,window.currentChannel=this.da);this.Hf=a.I?a:this.Hf}};
m.gg=function(a){x(this.b(),"animate");this.ga(j,i,l);v(this.b(),"animate");var b=Math.min(this.oa.scrollHeight,210);z(this.b(),"toggled",a);$d(this.b(),a?b+this.Cc:this.Cc);this.da&&(this.Pa.scrollTop=Td(this.da.b()).y);L(p(function(){$d(this.Pa,a?b:40);$d(this.Ca,Q(this.oa).height+22);z(this.b(),"collapsed",!a);this.Fe();this.ga();if(this.da){var c=this.Pa,d=Td(this.da.b()).y;c.scrollTop!=d&&(c.scrollTop=d)}},this),a?0:800);a&&this.Fe();this.o&&this.o.fb(a)};
function Ff(a,b,c){for(var d=B("times",a.b()),e=0;e<=b;e++){var g=c.clone();g.add(new wd(0,0,0,0,a.V*e));var h=D,n={"class":"time",style:"width:"+(a.sa-200)/a.sc+"px"},r=i,w=g.getHours();ja(r)||(r=j);var F=12==w;12<w&&(w-=12,F=j);0==w&&r&&(w=12);w=String(w);w+=":"+Ma(g.getMinutes());r&&(g=Ca("am"),r=Ca("pm"),w+=F?r:g);h=h("div",n,w);d.appendChild(h)}}
m.Ac=function(a){this.da&&Of(this.da,l);this.da=this.gf[a.id]||k;if(window.currentChannel=this.da)Of(this.da,j),L(p(this.ga,this,j,i,l));this.ia[0]=a};m.Bh=function(){this.Hf=this.Hf||Pf();T.a().c(Gf,this.Hf)};
function Ef(a){var b=A("now-left"),c=A("now-right"),d=(q()-a.$.getTime())/1E3*a.jc,e=N.a().ad?320:0,e=C().width-e;((a.ia[0].I?a.ia[0].queue.length:a.ia[0].mb+(a.pa+1||0)+1<a.ia[0].ua.length)?((a.ia[0].l(a.pa+1).time.getTime()-q())/1E3+a.ia[0].l(a.pa+1).media.duration)*a.jc+e:0)>a.sa-d&&Lf(a);c.style.right=N.a().ad?"320px":0;N.a().rc?(z(c,"now",0>a.pa),z(b,"now",0<a.pa)):(z(c,"now",!!(-Td(a.Td).x<-a.Ca.scrollLeft-e)),z(b,"now",!!(-Td(a.Td).x>-a.Ca.scrollLeft)));d=-1;0<=a.ia[0].mb+(a.pa||0)-1&&a.ia[0].l(a.pa-
1)&&(d=(a.ia[0].l(a.pa-1).time.getTime()-a.$.getTime())/1E3*a.jc);O(c,(a.ia[0].I?!!a.ia[0].queue.length:a.ia[0].mb+(a.pa||0)+1<a.ia[0].ua.length)||y(c,"now"));O(b,0<d||y(b,"now"))}m.tm=function(){y(A("now-left"),"now")?T.a().p.l()==U.a().l()?this.ga(j,i,i,j):this.ga(l,i,i,j):this.ga(l,-1);Ef(this)};m.Bm=function(){y(A("now-right"),"now")?T.a().p.l()==U.a().l()?this.ga(j,i,i,j):this.ga(l,i,i,l):this.ga(l,1);Ef(this)};
function Lf(a){var b=Math.ceil(a.sc/a.uj);Ff(a,1,a.gh);a.sa+=a.tn;ae(a.oa,a.sa);ae(a.wd,a.sa);a.sc++;a.gh.add(new wd(0,0,0,0,a.V*b));a.ei=60*a.sc*a.V}
m.di=function(){if(N.a().Nc&&!N.a().rc||this.Lg){var a=T.a().p&&T.a().p.I||l,b=T.a().p&&T.a().p.l(),c=U.a().l(),d=1E3*U.a().uf(),e=Math.round((q()-this.$.getTime())/1E3*this.jc),d=c&&d?Math.round((c.time.getTime()+d-this.$.getTime())/1E3*this.jc):e;Ef(this);Rd(this.Td,e);z(this.Td,"go-live",!a&&(!!b&&!!c&&b.id!=c.id&&45<Math.abs(d-e)||120<Math.abs(d-e)));this.Lg?(this.Lg=l,this.ga(j,i,l),v(this.b(),"animate")):this.ka||this.ga()}};
m.ga=function(a,b,c,d){this.Db=a!=i?!!a:this.Db;this.qk=a!=i?!!c:this.Db;this.pa=this.Db?0:b?this.pa+b:this.pa;c=T.a().p.l(this.pa);d=T.a().p.I?(d=Qf(T.a(),j))&&d.l():d?c:this.Db?U.a().l():this.ia[0].l(this.pa);this.ia[1]=d;this.Db||x(this.b(),"tick-along");if((this.Db||b)&&this.$){var e=U.a().l(),g=U.a().getCurrentTime(),c=(q()-this.$.getTime())/1E3*this.jc;e&&g&&Math.round((e.time.getTime()+g-this.$.getTime())/1E3*this.jc);e=C().width-(N.a().ad?320:0);if(N.a().rc)t(T.a().Bc,function(a){var b=this.gf[a.id];
if(b){a.l();var a=((a.mb||0)+this.pa)*this.Im-200,c=B("channel",b.b());B("programs",b.b()).style.paddingRight=C().width-200+"px";(new He(c,[c.scrollLeft,c.scrollTop],[a,c.scrollTop],300)).play()}},this);else{for(;c+C().width>this.sa-(N.a().ad?320:0);)Lf(this);g=0;d&&(g=(d.time.getTime()-this.$.getTime())/1E3*this.jc+5);if(!d||!b&&N.a().Nc&&c>g+e-320)g=Td(this.Td).x-e+200,v(this.b(),"tick-along");g=Math.max(g,0);g=Math.min(g,this.Ca.scrollWidth-this.Ca.clientWidth);if(b||a){var h=new He(this.Ca,[this.Ca.scrollLeft,
this.Ca.scrollTop],[g,this.Ca.scrollTop],300);h.play()}else this.Ca.scrollLeft=g;this.wd.style.left=-g+"px"}if(!this.qk&&this.da){var n=Td(this.da.b()).y-Q(this.wd).height,h=new He(this.Pa,[this.Pa.scrollLeft,this.Pa.scrollTop],[this.Pa.scrollLeft,n],100*this.Fi.length);P(this.i(),h,"end",p(function(){var a=this.Pa;a.scrollTop!=n&&(a.scrollTop=n);this.rk=l},this));L(p(function(){this.rk=j;h.play()},this),100)}}b&&Ef(this)};
m.Fe=function(){var a=Math.min(this.oa.scrollHeight,210)+22;$d(this.Pa,y(this.b(),"toggled")?a:this.Cc);$d(this.Ca,Q(this.oa).height+22);$d(this.b(),y(this.b(),"collapsed")?this.Cc:a+this.Cc);$d(A("right-grad"),!y(this.b(),"toggled")?this.Cc:a+this.Cc)};function Rf(){return'\t<div class="channel"><div class="programs-container"><div class="programs"></div></div><div class="graph"></div><div class="viewers"></div></div>'}function Sf(a){return'<div class="name"><div class="text">'+H(a.name)+"</div></div>"}
function Tf(a){return'<div class="info"><div class="thumb'+(a.repeat?" repeat":"")+'" style="background-image:url('+H(a.Fh.media.zb)+"); background-position: 50% "+H(a.Fh.media.Sd)+'%"></div><div class="progress"></div><div class="title">'+H(a.Fh.media.name)+'</div><div class="stats"><div class="comment-count"><div class="icon"></div>'+H(a.media.kd)+'</div><div class="like-count"><div class="icon"></div>'+H(a.media.mn)+'</div></div><div class="program-play"><div class="icon"></div></div><div class="program-plus"><div class="icon"></div></div><div class="viewers"></div>'+
(a.ng?'<div class="remove"></div><div class="repos"></div>':"")+"</div>"}function Uf(a){return'<div class="line"><div class="pic"><img src="'+H(a.j.L)+'"></div></div>'};function Vf(){M.call(this)}s(Vf,M);ma(Vf);function Wf(a){this.id=a.id;this.L=a.picture;this.name=a.name;this.description=a.description;this.link=a.link};function Xf(a){M.call(this);this.id=a.id;this.name=a.name;this.host="youtube";this.yd=a.host_id;this.Ol="http://www.youtube.com/watch?v="+a.host_id;this.duration=a.duration;this.live=!!a.live;this.qh=[];this.Mm=k;this.Zi=l;this.description=a.description;this.link=a.link||"xylocast.com/?m="+this.id;this.ma=a.publisher&&new Wf(a.publisher);this.kc=a.published&&ud(a.published+"Z");this.zb="http://i.ytimg.com/vi/"+this.yd+"/0.jpg";this.bi="http://i.ytimg.com/vi/"+this.yd+"/1.jpg";this.Ho="http://i.ytimg.com/vi/"+
this.yd+"/2.jpg";this.Io="http://i.ytimg.com/vi/"+this.yd+"/3.jpg";this.ai=new Pb(480,360);this.Sd=37;this.Fb=[];this.Lk=[];this.kd=a.comment_count||0;this.mn=a.star_count||0;this.$l=a.like_count||0;this.ko=a.dislike_count||0;this.ag=[];this.ic={};this.bl=a.collection_id;this.subscribe(Yf,this.Rb,this);this.subscribe(Zf,this.Rm,this);this.subscribe($f,this.gd,this)}s(Xf,M);function ag(a){return a.kc.getMonth()+1+"/"+a.kc.getDate()+"/"+a.kc.getYear()}var Yf="add-comment",Zf="remove-comment",$f="watching";
Xf.prototype.Ze=function(a){Ua(this.qh,function(b){return a.id==b.id})||this.qh.push(a)};Xf.prototype.Rb=function(a){if(a.Q){var b=Ua(this.Fb,function(b){return b.id==a.Q});b&&b.Tf.push(a)}else this.Fb.push(a);this.kd+=1};Xf.prototype.Rm=function(a){W("/_comment",xe(),"POST","delete=true&id="+a);Ya(this.Fb,function(b){return b.id==a});this.kd-=1};
Xf.prototype.gd=function(a,b,c){c?(Ub(this.ic,a.id),a.lb=k):(this.ic[a.id]=a,a.lb=this,a.id!=X.a().k.id&&Vf.a().c("flash","is watching "+(b?b.name:""),this.name,a,this.bi,"#info:"+this.id))};function bg(){M.call(this);this.Pj={}}s(bg,M);ma(bg);function cg(a,b){var c=a.get(b.id);c||(c=new Xf(b),a.add(c));return c}bg.prototype.get=function(a){return Wb(this.Pj,a)};bg.prototype.add=function(a){this.Pj[a.id]=a};function dg(a,b){M.call(this);var c=b||k,d=a||k;this.id=d?d.id:c.id;this.media=d?cg(bg.a(),d.media):c;bg.a().add(this.media);this.time=d?ud(d.time+"Z"):new vd;this.async=d?d.async:j;this.seek=d?d.seek:k}s(dg,M);function eg(a){return new dg(i,a)};function fg(a){M.call(this);this.id=a.id;this.name=a.name;this.url=a.profile_url;this.location=a.location||"";this.Bn=a.welcomed;this.bb=a.online;this.jo=a.demo;this.lb=a.last_seen?cg(Xf.a(),a.last_seen):k;this.history=[];this.zk=[];this.L=Da("https://graph.facebook.com/%s/picture",this.id);for(this.color=Raphael.getColor();"#00bf85"==this.color||"#00bf2f"==this.color;)this.color=Raphael.getColor();this.kg=a.access_level;this.Yn=[];this.G=a.last_login?ud(a.last_login+"Z"):k;this.Eo=a.session_count;
this.$n=a.ave_session?a.ave_session.toFixed(2):k;this.dn=a.show_guide!=i?a.show_guide:j;this.hn=a.show_sidebar!=i?a.show_sidebar:j;this.Om=a.post_facebook!=i?a.post_facebook:j;this.jk=a.post_twitter!=i?a.post_twitter:j;this.subscribe(gg,function(){this.jk=j},this)}s(fg,M);function Df(){return X.a().k.kg==hg}fg.prototype.td=function(){var a=this.name.split(" ");return a&&a.length?a[0]:this.name};function jg(a,b){return Ua(a.zk,function(a){return a.id==b.id})}var gg="twitter-auth",hg=2;function kg(a,b,c,d,e){this.id=a;this.j=b;this.T=c;this.hi=d;this.dd=e||k;this.Rj=[]}kg.prototype.ag=function(a){this.Rj.push(a);this.T&&(this.T.I&&this.T.ba)&&(this.T.ba.seek=k,this.T.ba=k);W("/_seen",xe(),"POST","media_id="+a.id+"&session_id="+this.id+"&async="+(this.T?this.T.I:l))};
kg.prototype.end=function(a){this.dd=a;a=(this.dd.getTime()-this.hi.getTime())/1E3;if(this.j.id==X.a().k.id&&this.T){lg.a();var b=this.T,c=this.Rj.length;X.a().uh.length?_gaq.push(["_trackEvent","Users","SessionTimeWithFriends",X.a().k.id,Math.round(a)]):_gaq.push(["_trackEvent","Users","SessionTimeNoFriends",X.a().k.id,Math.round(a)]);_gaq.push(["_trackEvent","Users","SessionMediaCount",X.a().k.id,c]);_gaq.push(["_trackEvent","Users","Active",X.a().k.id,c]);_gaq.push(["_trackEvent","Users",b.id+
"-time",X.a().k.id,a]);_gaq.push(["_trackEvent","Users",b.id+"-medias",X.a().k.id,c]);b.I||(_gaq.push(["_trackEvent","Channel","SessionTime",b.id,a]),_gaq.push(["_trackEvent","Channel","SessionMediaCount",b.id,c]))}};function mg(a){M.call(this);this.id=a.id;this.name=a.name;this.I=a.my_channel;this.lb=a.current_media?cg(bg.a(),a.current_media):k;this.ho=a.current_seek;this.ua=[];this.Wc={};this.ba=a.current_program&&new dg(a.current_program);this.ed=[];this.queue=[];this.tb=0;this.bb=a.online!=i?a.online:k;this.subscribe(ng,this.Sb,this);this.subscribe(og,this.Vk,this);this.subscribe(pg,this.gd,this);this.subscribe(qg,this.ni,this)}s(mg,M);m=mg.prototype;
m.Sb=function(a){this.ua.push(a);this.Wc[a.id]=a;a.time.getTime()+1E3*a.media.duration>this.tb&&(this.tb=a.time.getTime()+1E3*a.media.duration-12E4,ld(id.a(),this.tb,p(this.hh,this,this.tb)),ld(id.a(),this.tb+6E4,p(this.hh,this,this.tb+6E4)))};m.hh=function(a){this.tb<=a&&!this.I&&W("/_programming/"+this.id,p(function(a){a=Y(a.target);a.length||ld(id.a(),q()+1E3,p(this.hh,this,q()+1E3));t(a,function(a){if(!this.Wc[a.id]){var b=this.Wc[a.id];b||(b=new dg(a),this.Sb(b));this.c(ng,b)}},this)},this))};
m.Vk=function(a,b){b?(this.queue.push(a),Vf.a().c("flash","Added to queue",a.name,i,a.bi,"#info:"+a.id),rg(lg.a(),a),W("/_queue",xe(),"POST","media_id="+a.id)):(Ya(this.queue,function(b){return b.id==a.id},this),W("/_queue",xe(),"POST","media_id="+a.id+"&delete=1"))};m.gd=function(a){this.ed.push(a)};m.ni=function(a){var b=Wb(this.Wc,a.id);b&&(b.time=ud(a.time+"Z"))};
m.l=function(a){if(this.ba&&this.ba.async&&this.ba.seek)return this.ba;if(!this.ua.length)return k;var b=this.ba;b||(b=this.ua[0],this.mb=0);if(a)return this.ua[this.mb+a];if(!this.I&&q()>=b.time.getTime()&&q()<b.time.getTime()+1E3*b.media.duration)return this.ba=b;for(;q()>b.time.getTime()&&q()>=b.time.getTime()+1E3*b.media.duration;){this.ba||(this.ba=this.ua[0],this.mb=0);this.ua.length>=this.mb+1?(this.mb++,a=this.ua[this.mb],a=this.ba=this.I?a&&a.seek?a:k:this.ua[this.mb]):a=k;if(this.I){if(a&&
a.async&&a.seek)return this.ba=a;if(!a)if(this.queue.length){a=this.queue[0];this.c(og,a,l);var c=eg(a);Pf().c(ng,c);W("/_addprogram",xe(),"POST","channel_id="+T.a().I.id+"&media_id="+a.id+"&now=true");a=c}else a=k}if(!a)break;b=a}return q()>=b.time.getTime()&&q()<b.time.getTime()+1E3*b.media.duration?this.ba=b:k};var ng="add-program",og="add-queue",pg="add-viewer",qg="update-program",Nf="online";function sg(){M.call(this)}s(sg,M);ma(sg);function tg(){I.call(this);this.ja=[];this.sd=[];this.of={};this.B=new Gd(this);this.Ul=this.Cj=l;this.oi=j}s(tg,ed);m=tg.prototype;m.Ug=0;m.Rh=ca("Ug");
m.init=function(){if(!this.Cj){for(var a=0,b=this.ja.length;a<b;a++)for(var c=ic(this.ja[a]),d=0,e=c.length;d<e;++d){var g=c[d],h=g,n=ua(h);this.of[n]=g;this.Si&&(P(this.B,g,"mouseover",this.Bl),P(this.B,g,"mouseout",this.Al));this.Ri&&(P(this.B,h,"mouseover",this.zl),P(this.B,h,"mouseout",this.yl));this.sd.push(g);P(this.B,h,["mousedown","touchstart"],this.qj)}this.Cj=j}};
m.n=function(){this.B.ea();for(var a=0,b=this.ja.length;a<b;a++){var c=this.ja[a];c.Qi=i;c.Fc=i}this.ja.length=0;this.sd.length=0;this.of=k;ug(this);tg.d.n.call(this)};function vg(a,b){for(var c=0,d=a.ja.length;c<d;c++){var e=a.ja[c];e.qd=ce(e)}c=0;for(d=a.sd.length;c<d;c++)e=a.sd[c],e!=b&&(e.qd=ce(e))}
m.qj=function(a){var b=ua(a.currentTarget);this.r=this.of[b];this.F=this.kf(this.r);this.pf&&v(this.F,this.pf);this.F.style.margin="0";this.F.style.position="absolute";this.F.style.visibility="hidden";ac(this.r).body.appendChild(this.F);b=Xd(this.r);Zd(this.F,b);this.o=new le(this.F);this.o.Rh(this.Ug);J(this.o,"start",this.kj,l,this);J(this.o,"end",this.jj,l,this);J(this.o,"earlycancel",this.jf,l,this);this.o.bd(a)};
m.kj=function(a){if(this.dispatchEvent(new wg("beforedragstart",this,a.cf,this.r,k,k))){this.Nf=this.r.parentNode;this.Ni=this.vh=jc(this.r);this.Eg=this.Nf;this.Dg?v.apply(k,Za(this.r,this.Dg)):this.r.style.visibility="hidden";var b=Q(this.F);this.F.vl=b.width/2;this.F.ul=b.height/2;this.F.style.visibility="";this.oi&&(this.r.style.display="none");vg(this,this.r);this.r.style.display="";J(this.o,"drag",this.Cl,l,this);this.dispatchEvent(new wg("dragstart",this,a.cf,this.r,this.F,this.o))}else a.preventDefault(),
this.jf()};
m.Cl=function(a){var b=Xd(this.F),b=new Nb(b.x+this.F.vl,b.y+this.F.ul),c;a:{c=k;if("none"!=this.r.style.display){c=this.r.parentNode;var d=ce(c);if(xg(b,d))break a}for(var d=0,e=this.ja.length;d<e;d++){var g=this.ja[d];if(g!=c&&xg(b,g.qd)){c=g;break a}}c=k}var h;if(c){c==k&&f(Error("getHoverNextItem_ called with null hoverList."));var n,r,d=l,e=i;switch(c.Qi){case 0:h=b.y;n=yg;r=zg;break;case 4:d=j;case 2:h=b.x;n=Ag;r=zg;break;case 5:d=j;case 3:h=b.x,n=Bg,r=Cg}for(var g=k,w,F=ic(c),K=0,aa=F.length;K<
aa;K++){var S=F[K];if(S!=this.r){var xa=n(S.qd);if(d){var gb=Dg(S,b);ja(e)||(e=gb);if(r(h,xa)&&(w==i||gb<e||gb==e&&(r(xa,w)||xa==w)))g=S,w=xa;gb<e&&(e=gb)}else if(r(h,xa)&&(w==i||r(xa,w)))g=S,w=xa}}h=g!==k&&Dg(g,b)>e?k:g}else h=k;if(!this.dispatchEvent(new wg("beforedragmove",this,a,this.r,this.F,this.o,b,c,h)))return l;if(c)this.oi?(this.r.parentNode!=c||jc(this.r)!=h)&&c.insertBefore(this.r,h):h&&(this.Ni=h),this.r.style.display="",c.Fc&&v(c,c.Fc);else{this.Ul||(this.r.style.display="none");n=0;
for(r=this.ja.length;n<r;n++)w=this.ja[n],w.Fc&&x(w,w.Fc)}c!=this.Eg&&(this.Eg=c,vg(this,this.r));this.dispatchEvent(new wg("dragmove",this,a,this.r,this.F,this.o,b,c,h));return l};m.jf=function(){ug(this);this.o=this.F=this.vh=this.Nf=this.Eg=this.r=k;for(var a=0,b=this.ja.length;a<b;a++)this.ja[a].qd=k;a=0;for(b=this.sd.length;a<b;a++)this.sd[a].qd=k};
m.jj=function(a){if(!this.dispatchEvent(new wg("beforedragend",this,a,this.r,this.F,this.o)))return l;this.oi||this.Nf.insertBefore(this.r,this.Ni);ug(this);this.dispatchEvent(new wg("dragend",this,a,this.r,this.F,this.o));this.jf();return j};function ug(a){Hc(a.o);a.F&&E(a.F);a.r&&"none"==a.r.style.display&&(a.Nf.insertBefore(a.r,a.vh),a.r.style.display="");a.Dg&&a.r?x.apply(k,Za(a.r,a.Dg)):a.r&&(a.r.style.visibility="visible");for(var b=0,c=a.ja.length;b<c;b++){var d=a.ja[b];d.Fc&&x(d,d.Fc)}}
m.Bl=function(a){v.apply(k,Za(a.currentTarget,this.Si))};m.Al=function(a){x.apply(k,Za(a.currentTarget,this.Si))};m.zl=function(a){v.apply(k,Za(a.currentTarget,this.Ri))};m.yl=function(a){x.apply(k,Za(a.currentTarget,this.Ri))};function xg(a,b){return a.x>b.left&&a.x<b.left+b.width&&a.y>b.top&&a.y<b.top+b.height}function Dg(a,b){var c=a.qd;return Math.abs(b.y-(c.top+(c.height-1)/2))}function yg(a){return a.top+a.height-1}function Ag(a){return a.left+a.width-1}function Bg(a){return a.left||0}
function zg(a,b){return a<b}function Cg(a,b){return a>b}m.kf=function(a){var b=a.cloneNode(j);switch(a.tagName.toLowerCase()){case "tr":return D("table",k,D("tbody",k,b));case "td":case "th":return D("table",k,D("tbody",k,D("tr",k,b)));default:return b}};function wg(a,b,c,d,e,g,h,n,r){Lc.call(this,a);this.lo=b;this.event=c;this.Va=d;this.il=e;this.hl=g;this.Ti=h;this.to=n;this.Wb=r}s(wg,Lc);function Mf(a,b,c,d,e){R.call(this);this.q=a;this.Ea=Df();this.af=l;this.Fk=b;this.pc=c;this.$=e;this.Fo=d;this.Ha={};this.Ld={};this.Ub=this.Ea?new tg:k;this.ug=6;this.bb=j}s(Mf,R);m=Mf.prototype;m.R=function(){this.e=G(Rf);this.Gd=G(Sf,{name:this.q.name});A("channel-names").appendChild(this.Gd)};
m.z=function(){Mf.d.z.call(this);this.Gh=B("programs",this.b());this.Ye=B("viewers",this.b());var a=T.a(),b=(Q(this.b()).width-200)/this.Fk;a.Kb=a.Kb||b;Md(this.Gd,"background",Raphael.getColor());a=this.q.ua;for(b=0;b<a.length;b++)a[b].media.live?this.Sb(a[b]):a[b].time.getTime()<this.pc.getTime()&&a[b].time.getTime()+1E3*a[b].media.duration>this.pc.getTime()-1E3*this.Fk?this.Sb(a[b]):a[b].time.getTime()>this.pc.getTime()&&this.Sb(a[b]);if(this.Ea){a=this.Ub;b=this.Gh;b.Qi=2;b.Fc=i;a.ja.push(b);
this.Ub.pf="drag";var c=this.b();this.Ub.qj=function(a){var b=ua(a.currentTarget);this.r=this.of[b];this.F=this.kf(this.r);this.pf&&v(this.F,this.pf);this.F.style.margin="0";this.F.style.position="absolute";this.F.style.visibility="hidden";c.appendChild(this.F);b=Xd(this.r);Zd(this.F,b);this.o=new le(this.F);this.o.Rh(this.Ug);J(this.o,"start",this.kj,l,this);J(this.o,"end",this.jj,l,this);J(this.o,"earlycancel",this.jf,l,this);this.o.bd(a)};this.Ub.init();var d={},e,g,h,n,r,w=j;P(P(P(this.i(),this.Ub,
"beforedragstart",p(function(a){(!this.af||!a.event.shiftKey)&&a.preventDefault()},this)),this.Ub,"dragmove",function(a){h=h||a.Ti.x;n=n||Td(a.Va).x;r=r||(a.Va.previousElementSibling!=i?a.Va.previousElementSibling:kc(a.Va.previousSibling,l));w=w&&!!r;var b=r?Q(r).width:i,c=r?Td(r).x:i,S=a.Ti.x-h;10>Math.abs(S)||(a.Wb&&!d[a.Wb.id]&&0<S?(b=Q(a.Va).width,c=Td(a.Wb).x,e=c-b+Q(a.Wb).width,S=this.q.Wc[a.Wb.id],g=S.time.getTime()/1E3+S.media.duration-this.q.Wc[a.Va.id].media.duration,Rd(a.Va,e),Rd(a.Wb,
c-b-1),d[a.Wb.id]=j,b=a.Wb,b.parentNode&&b.parentNode.insertBefore(a.Va,b.nextSibling)):w&&(0>S&&n+S<c+b)&&(b=Q(a.Va).width,e=c=Td(r).x,g=this.q.Wc[r.id].time.getTime()/1E3,Rd(a.Va,e),Rd(r,c+b+1),b=r.previousElementSibling!=i?r.previousElementSibling:kc(r.previousSibling,l),r.parentNode&&r.parentNode.insertBefore(a.Va,r),r=b,w=!!b))}),this.Ub,"dragend",function(a){g&&(W("/admin/_rescheduleprogram",i,"POST","program="+a.il.id+"&time="+g),this.Ub.init(),g=i);d={};e=r=n=h=i;w=j})}Qa(this.q.ed,this.gd,
this);P(P(this.i(),this.Gd,"click",p(function(){this.q.id!=T.a().p.id&&this.q.l()&&T.a().c(Gf,this.q)},this)),id.a().de,hd,p(this.update,this));this.q.subscribe(ng,this.Sb,this);this.q.subscribe(pg,this.gd,this);this.q.subscribe("remove-viewer",this.Sm,this);this.q.subscribe(qg,this.ni,this);T.a().subscribe(Jf,this.Nk,this);T.a().subscribe(Gf,function(){this.ug=0;this.Nk()},this);N.a().subscribe("toggle-admin",ca("af"),this);this.update()};
m.Nk=function(){if(this.s){x(this.Ld[this.s],"playing");var a=B("title",this.Ld[this.s]);a&&(a.style.left="")}this.s=k;if(a=T.a().p.l()){var b=this.Ld[a.id];b&&(this.s=a.id,v(b,"playing"))}};
m.Sb=function(a){var b=D("div",{"class":"program",id:a.id}),c=a.media.duration*T.a().Kb,d=this.Ea&&a.time.getTime()+1E3*a.media.duration>q();Ac(b,Tf,{Fh:a,media:a.media,repeat:600<c,ng:d});this.Ld[a.id]=b;var e=T.a().p.l();e&&a.id==e.id&&(v(b,"playing"),this.s=a.id);var g=B("thumb",b);L(function(){a.media.ai.height<Q(b).height+50?(v(g,"fix-height"),v(g,"pan-left")):v(g,"pan-top");n&&ae(g,200);z(b,"stretched",360<a.media.ai.height)});e=(a.time.getTime()-this.$.getTime())/1E3*T.a().Kb;if(a.media.live)var h=
(q()-a.time.getTime())/1E3*T.a().Kb-100,c=c-h,e=e+h;ae(b,Math.ceil(c-1));Rd(b,Math.floor(e));this.Gh.appendChild(b);var n=120>c;z(b,"clipped",n);P(this.i(),b,"click",function(){Z.a().c(Eg,a.media)});var r=y(b,"clipped")?200:Q(b).width,c=B("title",b),e=B("program-play",b),h=B("program-plus",b);Q(c);P(P(P(P(this.i(),b,"mouseover",function(){N.a().Nc&&(this.af||Md(g,"background-position-y",a.media.Sd+10*Math.max(a.media.ai.width/r,1)+"%"))}),b,"mouseout",function(){N.a().Nc&&(this.af||Md(g,"background-position-y",
a.media.Sd+"%"))}),e,"click",function(b){b.preventDefault();b.stopPropagation();b=eg(a.media);U.a().c(Kf,b)}),h,"click",function(b){b.preventDefault();b.stopPropagation();Pf().c(og,a.media,j)});d&&(d=new le(B("repos",b)),d.he=function(a,b){var c=b-24;-50<=c&&50>=c&&Md(g,"background-position-y",50-c+"%")},P(P(this.i(),d,"end",function(){var b=(g.style[Na("background-position")]||"").split(" ")[1],b=b.substring(0,b.length-1);a.media.Sd=b;W("/admin/_posthumb",xe(),"POST","media="+a.media.id+"&pos="+
b)}),B("remove",b),"click",p(this.Am,this,a,b)))};m.ni=function(a){var b=this.Ld[a.id],a=(ud(a.time+"Z").getTime()-this.$.getTime())/1E3*T.a().Kb;Rd(b,a)};m.Am=function(a,b){E(b);W("/admin/_removeprogram",i,"POST","program="+a.id+"&media_id="+a.media.id+"&channel_id="+this.q.id);W("admin/_media/collection",p(function(){alert("Disallowed on all channels.")},this),"POST","&media="+a.media.id+"&approve=false")};
m.gd=function(a){if(X.a().k.id!=a.j.id){var b=this.Ha[a.j.id];b||(b=D("div","viewer"),this.Ye.appendChild(b),this.Ha[a.j.id]=b);if(!a.dd||a.dd.getTime()>this.$.getTime()){var c=G(Uf,{j:a.j});b.appendChild(c);var d=Math.max(a.hi.getTime(),this.$.getTime()),b=(d-this.$.getTime())/1E3*T.a().Kb+200,d=(q()-d)/1E3*T.a().Kb;ae(c,d);Rd(c,b);Md(c,"background",a.j.color);P(this.i(),c,"click",function(b){vc(b.target,"watch-with")||Z.a().c(Fg,a.j)});Gg(Hg.a(),B("pic",c),"top",{text:"JOIN "+a.j.td().toUpperCase(),
link:"#channel:"+a.T.id})}}};function Of(a,b){z(a.b(),"current",b);z(a.Gd,"current",b)}m.Sm=function(a){this.Ha[a.id]&&(E(this.Ha[a.id]),Ub(this.Ha,a.id),T.a().c(Hf))};
m.update=function(){!this.bb&&this.q.ua.length&&this.q.c(Nf,j);this.bb=!!this.q.ua.length;z(this.b(),"offline",!this.bb);O(this.Gd,this.bb);if(this.q.ua.length){if(this.s&&0<this.ug){var a=this.Ld[this.s],b=Td(a).x+Td(A("guide")).x,a=B("title",a);Rd(a,200>b?-b+210:5)}else this.ug++;Qb(this.q.ed,function(a){if(this.q.l()&&!a.dd&&this.Ha[a.j.id]){var b=Math.max(a.hi.getTime(),this.$.getTime());Q(this.Gh);var e=Math.floor((q()-b)/1E3*T.a().Kb),g=U.a().l();a.j.id==X.a().k.id&&g&&(e=Math.floor((g.time.getTime()+
1E3*U.a().uf()-b)/1E3*T.a().Kb));this.Ha[a.j.id].lastChild&&ae(this.Ha[a.j.id].lastChild,e)}},this);$d(this.Gd,Q(this.b()).height-1)}};function X(){M.call(this);this.qi={};this.dj=l;this.Ng=[];this.uh=[];this.subscribe(Ig,function(a,b){a.bb=b},this)}s(X,M);ma(X);X.prototype.add=function(a){this.qi[a.id]=a};X.prototype.get=function(a){return this.qi[a]};function Jg(a,b){var c=a.get(b.id);c||(c=new fg(b),a.add(c));c.bb=b.online;c.lb=b.last_seen?cg(bg.a(),b.last_seen):c.lb;return c}X.prototype.search=function(a){return Ra(Rb(this.qi),function(b){return 0==Fa(a,b.name.substr(0,a.length))},this)};var Ig="online";function Kg(a){if("function"==typeof a.vf)return a.vf();if(qa(a))return a.split("");if(pa(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return Rb(a)}function Lg(a,b,c){if("function"==typeof a.forEach)a.forEach(b,c);else if(pa(a)||qa(a))t(a,b,c);else{var d;if("function"==typeof a.Og)d=a.Og();else if("function"!=typeof a.vf)if(pa(a)||qa(a)){d=[];for(var e=a.length,g=0;g<e;g++)d.push(g)}else d=Sb(a);else d=i;for(var e=Kg(a),g=e.length,h=0;h<g;h++)b.call(c,e[h],d&&d[h],a)}};function Mg(a,b){this.ac={};this.X=[];var c=arguments.length;if(1<c){c%2&&f(Error("Uneven number of arguments"));for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else if(a){a instanceof Mg?(c=a.Og(),d=a.vf()):(c=Sb(a),d=Rb(a));for(var e=0;e<c.length;e++)this.set(c[e],d[e])}}m=Mg.prototype;m.Z=0;m.Pk=0;m.vf=function(){Ng(this);for(var a=[],b=0;b<this.X.length;b++)a.push(this.ac[this.X[b]]);return a};m.Og=function(){Ng(this);return this.X.concat()};
m.clear=function(){this.ac={};this.Pk=this.Z=this.X.length=0};function Ng(a){if(a.Z!=a.X.length){for(var b=0,c=0;b<a.X.length;){var d=a.X[b];Object.prototype.hasOwnProperty.call(a.ac,d)&&(a.X[c++]=d);b++}a.X.length=c}if(a.Z!=a.X.length){for(var e={},c=b=0;b<a.X.length;)d=a.X[b],Object.prototype.hasOwnProperty.call(e,d)||(a.X[c++]=d,e[d]=1),b++;a.X.length=c}}m.get=function(a,b){return Object.prototype.hasOwnProperty.call(this.ac,a)?this.ac[a]:b};
m.set=function(a,b){Object.prototype.hasOwnProperty.call(this.ac,a)||(this.Z++,this.X.push(a),this.Pk++);this.ac[a]=b};m.clone=function(){return new Mg(this)};function Og(a){return Pg(a||arguments.callee.caller,[])}
function Pg(a,b){var c=[];if(Wa(b,a))c.push("[...circular reference...]");else if(a&&50>b.length){c.push(Qg(a)+"(");for(var d=a.arguments,e=0;e<d.length;e++){0<e&&c.push(", ");var g;g=d[e];switch(typeof g){case "object":g=g?"object":"null";break;case "string":break;case "number":g=String(g);break;case "boolean":g=g?"true":"false";break;case "function":g=(g=Qg(g))?g:"[fn]";break;default:g=typeof g}40<g.length&&(g=g.substr(0,40)+"...");c.push(g)}b.push(a);c.push(")\n");try{c.push(Pg(a.caller,b))}catch(h){c.push("[exception trying to get caller]\n")}}else a?
c.push("[...long stack...]"):c.push("[end]");return c.join("")}function Qg(a){if(Rg[a])return Rg[a];a=String(a);if(!Rg[a]){var b=/function ([^\(]+)/.exec(a);Rg[a]=b?b[1]:"[Anonymous]"}return Rg[a]}var Rg={};function Sg(a,b,c,d,e){this.reset(a,b,c,d,e)}Sg.prototype.Zm=0;Sg.prototype.Wi=k;Sg.prototype.Vi=k;var Tg=0;Sg.prototype.reset=function(a,b,c,d,e){this.Zm="number"==typeof e?e:Tg++;this.Jo=d||q();this.ue=a;this.gm=b;this.vo=c;delete this.Wi;delete this.Vi};Sg.prototype.tk=ca("ue");function Ug(a){this.im=a}Ug.prototype.S=k;Ug.prototype.ue=k;Ug.prototype.ha=k;Ug.prototype.rj=k;function Vg(a,b){this.name=a;this.value=b}Vg.prototype.toString=da("name");var Wg=new Vg("SEVERE",1E3),Xg=new Vg("WARNING",900),Yg=new Vg("INFO",800),Zg=new Vg("CONFIG",700),$g=new Vg("FINE",500);m=Ug.prototype;m.getParent=da("S");m.fj=function(){this.ha||(this.ha={});return this.ha};m.tk=ca("ue");function ah(a){return a.ue?a.ue:a.S?ah(a.S):k}
m.log=function(a,b,c){if(a.value>=ah(this).value){a=this.sl(a,b,c);b="log:"+a.gm;ga.console&&(ga.console.timeStamp?ga.console.timeStamp(b):ga.console.markTimeline&&ga.console.markTimeline(b));ga.msWriteProfilerMark&&ga.msWriteProfilerMark(b);for(b=this;b;){var c=b,d=a;if(c.rj)for(var e=0,g=i;g=c.rj[e];e++)g(d);b=b.getParent()}}};
m.sl=function(a,b,c){var d=new Sg(a,String(b),this.im);if(c){d.Wi=c;var e;var g=arguments.callee.caller;try{var h;var n=ka("window.location.href");if(qa(c))h={message:c,name:"Unknown error",lineNumber:"Not available",fileName:n,stack:"Not available"};else{var r,w,F=l;try{r=c.lineNumber||c.uo||"Not available"}catch(K){r="Not available",F=j}try{w=c.fileName||c.filename||c.sourceURL||n}catch(aa){w="Not available",F=j}h=F||!c.lineNumber||!c.fileName||!c.stack?{message:c.message,name:c.name,lineNumber:r,
fileName:w,stack:c.stack||"Not available"}:c}e="Message: "+Ga(h.message)+'\nUrl: <a href="view-source:'+h.fileName+'" target="_new">'+h.fileName+"</a>\nLine: "+h.lineNumber+"\n\nBrowser stack:\n"+Ga(h.stack+"-> ")+"[end]\n\nJS stack traversal:\n"+Ga(Og(g)+"-> ")}catch(S){e="Exception trying to expose exception! You win, we lose. "+S}d.Vi=e}return d};function bh(a,b){a.log(Wg,b,i)}m.info=function(a,b){this.log(Yg,a,b)};function ch(a,b){a.log($g,b,i)}var dh={},eh=k;
function fh(a){eh||(eh=new Ug(""),dh[""]=eh,eh.tk(Zg));var b;if(!(b=dh[a])){b=new Ug(a);var c=a.lastIndexOf("."),d=a.substr(c+1),c=fh(a.substr(0,c));c.fj()[d]=b;b.S=c;dh[a]=b}return b};function gh(a){a=String(a);if(/^\s*$/.test(a)?0:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x10-\x1f\x80-\x9f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,"")))try{return eval("("+a+")")}catch(b){}f(Error("Invalid JSON string: "+a))};function hh(){}hh.prototype.df=k;var ih;function jh(){}s(jh,hh);function kh(a){return(a=lh(a))?new ActiveXObject(a):new XMLHttpRequest}function mh(a){var b={};lh(a)&&(b[0]=j,b[1]=j);return b}
function lh(a){if(!a.vj&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var b=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],c=0;c<b.length;c++){var d=b[c];try{return new ActiveXObject(d),a.vj=d}catch(e){}}f(Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed"))}return a.vj}ih=new jh;var nh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([\\w\\d\\-\\u0100-\\uffff.%]*)(?::([0-9]+))?)?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");function oh(a){I.call(this);this.headers=new Mg;this.Zd=a||k}s(oh,ed);oh.prototype.J=fh("goog.net.XhrIo");var ph=/^https?$/i,qh=[];function W(a,b,c,d){var e=new oh;qh.push(e);b&&J(e,"complete",b);J(e,"ready",Ba(rh,e));e.send(a,c,d,i)}function rh(a){a.ea();Xa(qh,a)}m=oh.prototype;m.Qb=l;m.C=k;m.jg=k;m.te="";m.Jj="";m.re=0;m.se="";m.Ig=l;m.zf=l;m.Wg=l;m.Oc=l;m.fg=0;m.cd=k;m.Vf="";m.Cn=l;
m.send=function(a,b,c,d){this.C&&f(Error("[goog.net.XhrIo] Object is active with another request"));b=b?b.toUpperCase():"GET";this.te=a;this.se="";this.re=0;this.Jj=b;this.Ig=l;this.Qb=j;this.C=this.Zd?kh(this.Zd):kh(ih);this.jg=this.Zd?this.Zd.df||(this.Zd.df=mh(this.Zd)):ih.df||(ih.df=mh(ih));this.C.onreadystatechange=p(this.dk,this);try{ch(this.J,sh(this,"Opening Xhr")),this.Wg=j,this.C.open(b,a,j),this.Wg=l}catch(e){ch(this.J,sh(this,"Error opening Xhr: "+e.message));th(this,e);return}var a=c||
"",g=this.headers.clone();d&&Lg(d,function(a,b){g.set(b,a)});d=ga.FormData&&a instanceof ga.FormData;if(b="POST"==b)b=!Object.prototype.hasOwnProperty.call(g.ac,"Content-Type")&&!d;b&&g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");Lg(g,function(a,b){this.C.setRequestHeader(b,a)},this);this.Vf&&(this.C.responseType=this.Vf);"withCredentials"in this.C&&(this.C.withCredentials=this.Cn);try{this.cd&&(gd.clearTimeout(this.cd),this.cd=k),0<this.fg&&(ch(this.J,sh(this,"Will abort after "+
this.fg+"ms if incomplete")),this.cd=gd.setTimeout(p(this.sn,this),this.fg)),ch(this.J,sh(this,"Sending request")),this.zf=j,this.C.send(a),this.zf=l}catch(h){ch(this.J,sh(this,"Send error: "+h.message)),th(this,h)}};m.sn=function(){"undefined"!=typeof fa&&this.C&&(this.se="Timed out after "+this.fg+"ms, aborting",this.re=8,ch(this.J,sh(this,this.se)),this.dispatchEvent("timeout"),this.abort(8))};function th(a,b){a.Qb=l;a.C&&(a.Oc=j,a.C.abort(),a.Oc=l);a.se=b;a.re=5;uh(a);vh(a)}
function uh(a){a.Ig||(a.Ig=j,a.dispatchEvent("complete"),a.dispatchEvent("error"))}m.abort=function(a){this.C&&this.Qb&&(ch(this.J,sh(this,"Aborting")),this.Qb=l,this.Oc=j,this.C.abort(),this.Oc=l,this.re=a||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),vh(this))};m.n=function(){this.C&&(this.Qb&&(this.Qb=l,this.Oc=j,this.C.abort(),this.Oc=l),vh(this,j));oh.d.n.call(this)};m.dk=function(){!this.Wg&&!this.zf&&!this.Oc?this.zm():wh(this)};m.zm=function(){wh(this)};
function wh(a){if(a.Qb&&"undefined"!=typeof fa)if(a.jg[1]&&4==xh(a)&&2==yh(a))ch(a.J,sh(a,"Local request error detected and ignored"));else if(a.zf&&4==xh(a))gd.setTimeout(p(a.dk,a),0);else if(a.dispatchEvent("readystatechange"),4==xh(a)){ch(a.J,sh(a,"Request complete"));a.Qb=l;try{var b=yh(a),c,d;a:switch(b){case 200:case 201:case 202:case 204:case 304:case 1223:d=j;break a;default:d=l}if(!(c=d)){var e;if(e=0===b){var g=String(a.te).match(nh)[1]||k;if(!g&&self.location)var h=self.location.protocol,
g=h.substr(0,h.length-1);e=!ph.test(g?g.toLowerCase():"")}c=e}if(c)a.dispatchEvent("complete"),a.dispatchEvent("success");else{a.re=6;var n;try{n=2<xh(a)?a.C.statusText:""}catch(r){ch(a.J,"Can not get status: "+r.message),n=""}a.se=n+" ["+yh(a)+"]";uh(a)}}finally{vh(a)}}}
function vh(a,b){if(a.C){var c=a.C,d=a.jg[0]?la:k;a.C=k;a.jg=k;a.cd&&(gd.clearTimeout(a.cd),a.cd=k);b||a.dispatchEvent("ready");try{c.onreadystatechange=d}catch(e){bh(a.J,"Problem encountered resetting onreadystatechange: "+e.message)}}}m.Xb=function(){return!!this.C};function xh(a){return a.C?a.C.readyState:0}function yh(a){try{return 2<xh(a)?a.C.status:-1}catch(b){return a.J.log(Xg,"Can not get status: "+b.message,i),-1}}function Y(a){if(a.C)return gh(a.C.responseText)}
function zh(a){try{if(!a.C)return k;if("response"in a.C)return a.C.response;switch(a.Vf){case "":case "text":return a.C.responseText;case "arraybuffer":if("mozResponseArrayBuffer"in a.C)return a.C.mozResponseArrayBuffer}bh(a.J,"Response type "+a.Vf+" is not supported on this browser");return k}catch(b){return ch(a.J,"Can not get response: "+b.message),k}}function sh(a,b){return b+" ["+a.Jj+" "+a.te+" "+yh(a)+"]"};function T(){M.call(this);this.Bc=[];this.jd={};this.subscribe(Gf,this.Ac,this);this.subscribe(Jf,this.mi,this)}s(T,M);ma(T);m=T.prototype;m.get=function(a){return this.jd[a]};function Qf(a,b){if(a.p&&a.p.l()&&(b&&!a.p.I||!b))return a.p;if(a.qe&&a.qe.l()&&(b&&!a.qe.I||!b))return a.qe;for(var c=k,d=k,e=0;!d&&e<a.Bc.length;)d=(c=!a.Bc[e].I?a.Bc[e]:k)&&c.l(),e++;return c}m.eh=function(a){Qb(a,p(function(a){this.Ze(a)},this))};
m.Ze=function(a){var b=new mg(a);this.Bc.push(b);this.jd[a.id]=b;b.I&&(this.I=b);this.c(If,b);return b};m.Ac=function(a,b){if(a&&!this.p||a&&this.p&&this.p.id!=a.id){this.qe=this.p;this.p=a;this.mi(a.l());var c=a.l(),c=c&&!Tb(c.media.ic);W("/_changechannel",xe(),"POST","channel="+a.id+"&friends="+c+(b?"&forced=true":""));lg.a().Ac(a,this.qe)}};
m.mi=function(a){this.p&&(this.s&&t(this.p.ed,function(a){Ub(this.s.media.ic,a.j.id)},this),a&&(this.s=a,t(this.p.ed,function(b){b.dd||(a.media.ic[b.j.id]=b.j)})))};function Pf(){var a=T.a();if(!a.I){var b=X.a().k;a.I=new mg({id:b.id,name:b.name.split(" ")[0]+"'s Channel"})}return a.I}var Gf="change-channel",Jf="next-program",If="add-channel",Hf="resize";function Ah(){R.call(this);this.Mc=new Bf("Guide");tf(this.Mc,16,j);this.nc=new Bf("Sidebar");tf(this.nc,16,j);this.Mh=new Bf("Restart");this.Lb=new Bf("Play");tf(this.Lb,16,j);this.Yd=new Bf("Volume");tf(this.Yd,16,j);this.hd=new Bf("Admin");tf(this.hd,16,j);this.Af=new Bf("Info")}s(Ah,R);m=Ah.prototype;
m.z=function(){Ah.d.z.call(this);this.Do=B("right",this.b());this.cb=B("progress",this.b());this.sk=B("seek",this.b());this.Gb=B("elapsed",this.b());this.un=B("title",this.b());this.Ui=B("duration",this.b());this.io=B("current-time",this.b());Re(this,this.Mc);this.Mc.h(A("guide-toggle"));sf(this.Mc,y(this.b(),"guide-toggled"));Re(this,this.nc);this.nc.h(A("sidebar-toggle"));sf(this.nc,y(this.b(),"sidebar-toggled"));Re(this,this.Mh);this.Mh.h(B("restart",this.b()));Re(this,this.Lb);this.Lb.h(B("play",
this.b()));Re(this,this.Yd);this.Yd.h(B("volume",this.b()));Re(this,this.Af);this.Af.h(A("info-toggle"));O(this.Af.b(),X.a().k.kg!=hg);Re(this,this.hd);this.hd.h(A("admin-toggle"));O(this.hd.b(),X.a().k.kg==hg);var a=new Bh(this.qn,1E3,this);this.resize();this.o=new le(this.sk);this.o.fb(l);var b=this.cb,c=this.Gb,d=this.Ui;this.o.he=function(a){if(0<a&&a<Q(b).width){this.target.style.left=a+"px";c.style.width=a+"px";var a=a/Q(b).width,g=U.a().l().media.duration;nc(d,Ch(Math.round(a*g).toString())+
" / "+Ch(g.toString()))}};P(P(P(P(P(P(P(P(P(P(P(P(this.i(),window,"resize",p(this.resize,this)),this.Mc,"action",p(function(){a.rf()},this)),this.nc,"action",p(function(a){a.stopPropagation();N.a().c(md,af(this.nc))},this)),this.Mh,"action",p(function(a){a.stopPropagation();U.a().l()&&(a=eg(U.a().l().media),U.a().c(Kf,a),this.resize())},this)),this.Lb,"action",p(function(a){a.stopPropagation();N.a().c(od,!af(this.Lb));this.resize()},this)),this.Af,"action",p(function(a){a.stopPropagation();N.a().c("toggle-info")},
this)),this.Yd,"action",p(function(a){a.stopPropagation();N.a().c("mute",af(this.Yd))},this)),this.hd,"action",p(function(a){a.stopPropagation();N.a().c("toggle-admin",af(this.hd));this.resize()},this)),id.a().de,hd,p(function(){if(U.a().l()){var a=U.a().getCurrentTime()/U.a().l().media.duration;3>U.a().l().media.duration-U.a().getCurrentTime()&&U.a().c(Dh);y(this.cb,"drag")||(nc(this.Ui,(U.a().getCurrentTime()?Ch(U.a().getCurrentTime().toString())+" / ":"")+Ch(U.a().l().media.duration.toString())),
ae(this.Gb,this.Hh?a*this.Hh:0))}},this)),this.cb,"click",p(function(a){!y(this.cb,"drag")&&U.a().l()&&(a=a.offsetX/Q(this.cb).width*U.a().l().media.duration,x(this.Gb,"animate"),U.a().c(Eh,a),L(p(function(){v(this.Gb,"animate")},this),1E3))},this)),this.o,"beforedrag",p(function(){v(this.cb,"drag")},this)),this.o,"end",p(function(a){this.sk.style.left="";a=a.left/Q(this.cb).width*U.a().l().media.duration;x(this.Gb,"animate");U.a().c(Eh,a);L(p(function(){x(this.cb,"drag");v(this.Gb,"animate")},this),
1E3)},this));U.a().subscribe(Kf,function(a){Fh(this,a,j)},this);U.a().subscribe(Gh,function(){this.o.fb(j);this.resize()},this);T.a().subscribe(Gf,function(){x(this.b(),"window");L(p(this.resize,this),1E3)},this);T.a().subscribe(Jf,function(){this.resize()},this);N.a().subscribe("mute",this.hm,this);N.a().subscribe(nd,this.gg,this);N.a().subscribe(md,function(a){sf(this.nc,a);z(this.b(),"sidebar-toggled",a);this.resize()},this);N.a().subscribe(od,function(a){sf(this.Lb,!a)},this);U.a().subscribe(Gh,
function(){T.a().p.I&&U.a().l()&&this.resize()},this)};function Fh(a,b,c){nc(a.un,b.media.name.toUpperCase());c&&(x(a.Gb,"animate"),ae(a.Gb,0),L(p(function(){v(this.Gb,"animate")},a),1E3))}m.hm=function(a){sf(this.Yd,a)};m.qn=function(){var a=af(this.Mc);N.a().c(nd,a)};m.gg=function(a){sf(this.Mc,a);a&&(x(this.b(),"window"),x(this.b(),"collapsed"),L(p(this.resize,this)));L(p(function(){z(this.b(),"guide-toggled",a);a||(T.a().p&&T.a().p.l(),v(this.b(),"collapsed"),this.resize())},this),a?0:600)};
m.resize=function(){if(!T.a().p.I&&!N.a().rc){O(this.cb,l);var a=A("guide"),b=B("current",a),b=bc("program",b),a=(b=b[b.length-1])?Td(a).x+Td(b).x+Q(b).width+210:9999999,a=Math.min(C().width-200,Math.max(100,C().width-a)),c=y(this.b(),"collapsed")&&!!b&&a<C().width-203;L(p(function(){z(this.b(),"window",c&&y(this.b(),"collapsed"))},this),400)}U.a().l()&&(O(this.cb,j),Fh(this,U.a().l()),this.Hh=C().width-(af(this.nc)?580:260)-50,ae(this.cb,this.Hh))};function Hh(a){return(a.link?'<a href="'+H(a.link)+'">':"")+'<div class="note'+(a.Vg?" pic":"")+'">'+(a.Vg?'<div class="picture"><img class="image" src='+H(a.Vg)+' style="display: none"/></div>':"")+'<div class="action">'+(a.j?H(a.j.name)+" ":"")+H(a.action)+'</div><div class="content">'+H(a.content)+'</div><div class="close"></div></div>'+(a.link?"</a>":"")};function Ih(){R.call(this)}s(Ih,R);Ih.prototype.R=function(){this.e=D("div",{id:"notify"})};Ih.prototype.w=function(a){Ih.d.w.call(this,a);Vf.a().subscribe("flash",function(a,c,d,e,g){this.eg(j,a,c,d,e,g)},this);Vf.a().subscribe("show",function(a,c,d,e,g){this.eg(l,a,c,d,e,g)},this)};
Ih.prototype.eg=function(a,b,c,d,e,g){var h=G(Hh,{action:b,content:c,j:d,Vg:e,link:g}),n=B("image",h);B("close",h);P(P(this.i(),B("close",h),"click",function(a){a.preventDefault();a.stopPropagation();E(h)}),n,"load",function(){O(n,j);L(function(){n.style.marginLeft=-1*n.clientWidth/2+"px";n.style.marginTop=-1*n.clientHeight/2+"px"})});this.b().appendChild(h);var r=B("note",h);L(function(){r&&(v(r,"show"),a?L(function(){x(r,"show");v(r,"fade-out");L(function(){E(h)},5100)},3E3):L(function(){v(r,"dim")},
3E3))})};function U(){M.call(this);this.subscribe(Kf,function(a){Pf().c(ng,a);W("/_addprogram",xe(),"POST","channel_id="+T.a().I.id+"&media_id="+a.media.id+"&async=true");rg(lg.a(),a.media)},this);this.subscribe(Gh,function(a){W("/_started",xe(),"POST","media_id="+a.id)},this)}s(U,M);ma(U);U.prototype.Th=ca("v");U.prototype.l=da("s");U.prototype.getCurrentTime=function(){return this.v&&this.v.getCurrentTime?this.v.getCurrentTime():0};
U.prototype.uf=function(){return this.v&&this.v.getCurrentTime?this.v.getCurrentTime():0};var Dh="before-end",Kf="play-async",Gh="playing",Eh="seek";function Jh(){ue.call(this);this.queue=[]}s(Jh,ue);Jh.prototype.add=function(a){Wa(this.queue,a)||(this.queue.push(a),J(a,"finish",this.mm,l,this))};Jh.prototype.n=function(){t(this.queue,function(a){a.ea()});this.queue.length=0;Jh.d.n.call(this)};function Kh(){Jh.call(this);this.Wa=0}s(Kh,Jh);
Kh.prototype.play=function(a){if(0==this.queue.length)return l;if(a||this.m==ve)this.Wa<this.queue.length&&this.queue[this.Wa].m!=ve&&this.queue[this.Wa].stop(l),this.Wa=0,this.gc();else if(1==this.m)return l;this.Aa("play");-1==this.m&&this.Aa("resume");this.startTime=q();this.ke=k;this.m=1;this.queue[this.Wa].play(a);return j};
Kh.prototype.stop=function(a){this.m=ve;this.ke=q();if(a)for(a=this.Wa;a<this.queue.length;++a){var b=this.queue[a];b.m==ve&&b.play();b.m==ve||b.stop(j)}else this.Wa<this.queue.length&&this.queue[this.Wa].stop(l);this.Aa("stop");this.hc()};Kh.prototype.mm=function(){1==this.m&&(this.Wa++,this.Wa<this.queue.length?this.queue[this.Wa].play():(this.ke=q(),this.m=ve,this.Aa("finish"),this.hc()))};function Lh(a){return a*a*a}function Mh(a){return 1-Math.pow(1-a,3)};function Nh(){R.call(this)}s(Nh,R);m=Nh.prototype;
m.z=function(){Nh.d.z.call(this);(this.s=(this.da=T.a().p)&&this.da.l())&&q();this.Lc=B("fullscreen",this.b());var a=B("expand",this.b());O(this.Lc,this.Dk());this.Qd=A("stagecover");this.Sj=B("message",this.Qd);this.D=B("spinner",this.Qd);this.Ge=B("restart",this.Qd);this.si=B("vote",this.b());this.Sc=B("like",this.b());this.Ec=B("dislike",this.b());var b=new df(document);Oh(this);this.s?Ph(this,this.s):U.a().c("no-media");P(P(P(P(P(P(P(P(P(this.i(),window,"resize",p(this.resize,this)),document,
"webkitfullscreenchange",p(function(){Mb(this.Lc,"full")},this)),document,"mozfullscreenchange",p(function(){Mb(this.Lc,"full")},this)),document,"fullscreenchange",p(function(){Mb(this.Lc,"full")},this)),this.Lc,"click",p(function(a){if(y(this.Lc,"full"))document.Zk&&document.Zk(),document.webkitCancelFullScreen&&document.webkitCancelFullScreen(),document.mozCancelFullScreen&&document.mozCancelFullScreen();else{var b=B("main");b.mk&&b.mk();b.webkitRequestFullScreen&&b.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT);
b.mozRequestFullScreen&&b.mozRequestFullScreen()}a.stopPropagation();a.preventDefault()},this)),a,"click",p(this.wn,this)),this.b(),"mousemove",p(function(a){var b=a.offsetX/this.Ka,a=a.offsetY/this.sa;if(0.7<b&&1>b&&0.7<a&&1>a&&(this.De==YT.PlayerState.PLAYING||this.De==YT.PlayerState.PAUSED))v(this.Qd,"click-through"),L(p(function(){x(this.Qd,"click-through")},this),500)},this)),b,"key",p(function(a){"32"==a.keyCode&&Qh(this)},this)),this.Qd,"click",p(function(a){!y(A("queue"),"show")&&(!y(A("search"),
"show")&&!vc(a.target,"queue")&&!vc(a.target,"search"))&&Qh(this)},this));T.a().subscribe(Gf,this.Ac,this);T.a().subscribe(Jf,function(a){this.s=a;Ph(this,a);Oh(this)},this);U.a().subscribe(Kf,this.Bh,this);U.a().subscribe(Eh,this.Ym,this);U.a().subscribe(Dh,function(){Oh(this,j)},this);DESKTOP&&(P(P(P(this.i(),this.Ge,"click",p(function(a){a.preventDefault();a.stopPropagation();this.s&&Ph(this,this.s)},this)),this.Sc,"click",p(this.bk,this,this.Sc,j)),this.Ec,"click",p(this.bk,this,this.Ec,l)),N.a().subscribe(md,
function(a){this.resize(a)},this),N.a().subscribe(nd,function(){L(p(this.resize,this))},this),N.a().subscribe(od,function(a){a?this.v.playVideo():this.v.pauseVideo();var a=B(a?"play":"pause",this.b()),b=new Kh;b.add(new Ke(a,250,Mh));b.add(new Je(a,250,Lh));b.play()},this),N.a().subscribe("mute",function(a){this.v&&(a?this.v.mute():this.v.unMute())},this),N.a().subscribe("restart",function(){this.v.seekTo(0)},this));this.resize()};
function Qh(a){if(a.v&&a.v.getPlayerState&&DESKTOP)switch(a.v.getPlayerState()){case YT.PlayerState.PLAYING:N.a().c(od,l);break;case YT.PlayerState.PAUSED:N.a().c(od,j)}}m.Dk=function(){var a=B("main");return!(!a.mk&&!a.webkitRequestFullScreen&&!a.mozRequestFullScreen)};m.wn=function(a){a.preventDefault();a.stopPropagation();Z.a();a=!y(A("sidebar"),"toggled");DESKTOP&&(N.a().c(md,a),N.a().c(nd,a))};
function Ph(a,b){U.a().s=b;a.Yl!=b.id&&(Vf.a().c("flash","Now playing",b.media.name,i,b.media.bi,"#info:"+b.media.id),a.Yl=b.id);a.play(b.media);DESKTOP&&W("/_like/"+b.media.id,p(function(a){a=Y(a.target);z(this.Sc,"checked",a.liked||y(this.Sc,"checked"));z(this.Ec,"checked",a.disliked||y(this.Ec,"checked"))},a))}
m.play=function(a,b){!this.v||!this.v.loadVideoById?(this.v=new YT.Player("ytplayer",{height:C().height-40,width:C().width,videoId:a.yd,playerVars:{controls:0,showinfo:0,iv_load_policy:3,modestbranding:1,wmode:"opaque",origin:HOST_URL,enablejsapi:1},events:{onStateChange:p(this.Km,this),onReady:p(this.xm,this),onError:p(this.wm,this)}}),U.a().Th(this.v)):(this.v.cueVideoById(a.yd),L(p(function(){var c=b||0;!this.v.getPlayerState()&&4>c?this.play(a,++c):4<=c&&Oh(this,i,j)},this),1E3))};
m.resize=function(){if(IPHONE)ae(this.b(),C().width-320);else{var a=A("stagecover"),b=B("message",a),c=A("guide").style.height,c=c.substring(0,c.length-2),c=N.a().Nc?c:40,d=N.a().ad?320:0;this.sa=C().height-c;this.Ka=C().width-d;$d(this.b(),C().height-c);ae(this.b(),C().width-d);$d(a,C().height-c);ae(a,C().width-d);a=Q(b);Md(b,{"margin-left":-a.width/2+"px","margin-top":-a.height/2+"px"});z(this.Lc,"full",this.Dk&&(document.fullScreen||document.webkitIsFullScreen||document.xo))}};
m.Ac=function(a){if(a=a.l())this.s=a,Ph(this,a);Oh(this)};m.bk=function(a,b,c){c.preventDefault();c.stopPropagation();this.s&&(a=Mb(a,"checked"),(c=b&&y(this.Ec,"checked")||!b&&y(this.Sc,"checked"))&&x(b?this.Ec:this.Sc,"checked"),W(b?"/_like":"/_dislike",i,"POST","media_id="+this.s.media.id+(!a?"&delete=1":"")+(c?"&flip=1":"")))};m.Bh=function(a){this.s=a;Ph(this,a);Oh(this);W("/_optin",xe(),"POST","media_id="+this.s.media.id)};m.Ym=function(a){this.v.seekTo&&this.v.seekTo(a,j)};
m.Km=function(a){this.De=a.data;Oh(this);switch(a.data){case YT.PlayerState.CUED:a=this.s.async?this.s.seek:(q()-this.s.time.getTime())/1E3;this.v.seekTo(a);this.v.playVideo();N.a().c(od,j);break;case YT.PlayerState.PLAYING:U.a().c(Gh,this.s.media);break;case YT.PlayerState.ENDED:X.a().k.mf.ag(this.s.media),z(this.Sc,"checked",l),z(this.Ec,"checked",l),(a=T.a().p.l())?T.a().c(Jf,a):(U.a().s=k,T.a().c(Gf,Qf(T.a()),j))}};
m.xm=function(){L(p(function(){if(this.v&&(!this.v.getPlayerState||!this.v.getPlayerState()))Ph(this,this.s);else if(this.v.getPlayerState()){this.v.setPlaybackQuality("large");var a=this.s.async?this.s.seek:(q()-this.s.time.getTime())/1E3;this.v.seekTo(a);this.v.playVideo();DESKTOP&&N.a().c("mute",this.v.isMuted())}},this),1E3)};m.wm=function(){U.a().c("no-media");Oh(this,i,j)};
function Oh(a,b,c){if(!IPHONE){var d=A("stagecover"),e=a.s?U.a().getCurrentTime():0;c?(O(a.D,l),O(a.Ge,j),v(d,"covered")):(!a.s||a.s&&e>a.s.media.duration?(U.a().c("no-media"),nc(a.Sj.firstChild,Rh),O(a.D,l),O(a.Ge,l),O(a.si,l),v(d,"covered")):a.De!=YT.PlayerState.PLAYING&&a.De!=YT.PlayerState.PAUSED||b?(nc(a.Sj.firstChild,Sh),O(a.D,j),O(a.Ge,l),O(a.si,l),v(d,"covered")):(O(a.D,l),O(a.Ge,l),x(d,"covered"),O(a.si,j)),de(d,a.De==YT.PlayerState.BUFFERING?0.9:1),a.resize())}}
var Rh="THIS CHANNEL IS CURRENTLY OFFLINE",Sh="LOADING STORY";function Th(a,b){R.call(this,b);this.sb=a||""}s(Th,R);Th.prototype.ob=k;var Uh="placeholder"in document.createElement("input");m=Th.prototype;m.ne=l;m.R=function(){this.e=this.$a().R("input",{type:"text"})};m.w=function(a){Th.d.w.call(this,a);this.sb||(this.sb=a.getAttribute("label")||"");var b;a:{var c=ac(a);try{b=c&&c.activeElement;break a}catch(d){}b=k}b==a&&(this.ne=j,x(this.b(),this.$d));Uh?this.b().placeholder=this.sb:this.b().setAttribute("aria-label",this.sb)};
m.z=function(){Th.d.z.call(this);var a=new Gd(this);P(a,this.b(),"focus",this.lj);P(a,this.b(),"blur",this.xl);Uh?this.B=a:(qb&&P(a,this.b(),["keypress","keydown","keyup"],this.Dl),P(a,ac(this.b())?ac(this.b()).parentWindow||ac(this.b()).defaultView:window,"load",this.Ll),this.B=a,Vh(this));Wh(this);this.b().Vl=this};m.Jc=function(){Th.d.Jc.call(this);this.B&&(this.B.ea(),this.B=k);this.b().Vl=k};function Vh(a){!a.ql&&(a.B&&a.b().form)&&(P(a.B,a.b().form,"submit",a.Gl),a.ql=j)}
m.n=function(){Th.d.n.call(this);this.B&&(this.B.ea(),this.B=k)};m.$d="label-input-label";m.lj=function(){this.ne=j;x(this.b(),this.$d);if(!Uh&&!Xh(this)&&!this.Rl){var a=this,b=function(){a.b().value=""};u?L(b,10):b()}};m.xl=function(){Uh||(Id(this.B,this.b(),"click",this.lj),this.ob=k);this.ne=l;Wh(this)};m.Dl=function(a){27==a.keyCode&&("keydown"==a.type?this.ob=this.b().value:"keypress"==a.type?this.b().value=this.ob:"keyup"==a.type&&(this.ob=k),a.preventDefault())};
m.Gl=function(){Xh(this)||(this.b().value="",L(this.wl,10,this))};m.wl=function(){Xh(this)||(this.b().value=this.sb)};m.Ll=function(){Wh(this)};function Xh(a){return!!a.b()&&""!=a.b().value&&a.b().value!=a.sb}m.clear=function(){this.b().value="";this.ob!=k&&(this.ob="")};m.reset=function(){Xh(this)&&(this.clear(),Wh(this))};m.xa=function(a){this.ob!=k&&(this.ob=a);this.b().value=a;Wh(this)};m.A=function(){return this.ob!=k?this.ob:Xh(this)?this.b().value:""};
function Wh(a){Uh?a.b().placeholder!=a.sb&&(a.b().placeholder=a.sb):(Vh(a),a.b().setAttribute("aria-label",a.sb));Xh(a)?x(a.b(),a.$d):(!a.Rl&&!a.ne&&v(a.b(),a.$d),Uh||L(a.Vm,10,a))}m.fb=function(a){this.b().disabled=!a;z(this.b(),this.$d+"-disabled",!a)};m.isEnabled=function(){return!this.b().disabled};m.Vm=function(){this.b()&&(!Xh(this)&&!this.ne)&&(this.b().value=this.sb)};function Yh(a,b,c,d,e,g,h,n,r){var w,F;if(w=c.offsetParent){var K="HTML"==w.tagName||"BODY"==w.tagName;if(!K||"static"!=Qd(w,"position"))F=Xd(w),K||(K=(K=Yd(w))&&qb?-w.scrollLeft:K&&(!u||!Cb("8"))?w.scrollWidth-w.clientWidth-w.scrollLeft:w.scrollLeft,F=Ob(F,new Nb(K,w.scrollTop)))}w=F||new Nb;F=ce(a);if(K=Wd(a)){var aa=new Ld(K.left,K.top,K.right-K.left,K.bottom-K.top),K=Math.max(F.left,aa.left),S=Math.min(F.left+F.width,aa.left+aa.width);if(K<=S){var xa=Math.max(F.top,aa.top),aa=Math.min(F.top+F.height,
aa.top+aa.height);xa<=aa&&(F.left=K,F.top=xa,F.width=S-K,F.height=aa-xa)}}K=Zb(a);xa=Zb(c);if(K.H!=xa.H){var S=K.H.body,xa=xa.H.parentWindow||xa.H.defaultView,aa=new Nb(0,0),gb=ac(S)?ac(S).parentWindow||ac(S).defaultView:window,ig=S;do{var ia;if(gb==xa)ia=Xd(ig);else{ia=ig;var Hb=new Nb;if(1==ia.nodeType){if(ia.getBoundingClientRect){var va=Ud(ia);Hb.x=va.left;Hb.y=va.top}else{var va=xc(Zb(ia)),$a=Xd(ia);Hb.x=$a.x-va.x;Hb.y=$a.y-va.y}qb&&!Cb(12)&&(va=i,va=i,u?va="-ms-transform":rb?va="-webkit-transform":
pb?va="-o-transform":qb&&(va="-moz-transform"),$a=i,va&&($a=Qd(ia,va)),$a||($a=Qd(ia,"transform")),$a?(ia=$a.match(ke),va=!ia?new Nb(0,0):new Nb(parseFloat(ia[1]),parseFloat(ia[2]))):va=new Nb(0,0),Hb=new Nb(Hb.x+va.x,Hb.y+va.y))}else va=sa(ia.rl),$a=ia,ia.targetTouches?$a=ia.targetTouches[0]:va&&ia.la.targetTouches&&($a=ia.la.targetTouches[0]),Hb.x=$a.clientX,Hb.y=$a.clientY;ia=Hb}aa.x+=ia.x;aa.y+=ia.y}while(gb&&gb!=xa&&(ig=gb.frameElement)&&(gb=gb.parent));S=Ob(aa,Xd(S));u&&!wc(K)&&(S=Ob(S,xc(K)));
F.left+=S.x;F.top+=S.y}a=(b&4&&Yd(a)?b^2:b)&-5;b=new Nb(a&2?F.left+F.width:F.left,a&1?F.top+F.height:F.top);b=Ob(b,w);e&&(b.x+=(a&2?-1:1)*e.x,b.y+=(a&1?-1:1)*e.y);var V;if(h)if(r)V=r;else if(V=Wd(c))V.top-=w.y,V.right-=w.x,V.bottom-=w.y,V.left-=w.x;a:{r=b.clone();e=0;a=(d&4&&Yd(c)?d^2:d)&-5;d=Q(c);n=n?n.clone():d.clone();if(g||0!=a)a&2?r.x-=n.width+(g?g.right:0):g&&(r.x+=g.left),a&1?r.y-=n.height+(g?g.bottom:0):g&&(r.y+=g.top);if(h){if(V){g=r;e=0;if(65==(h&65)&&(g.x<V.left||g.x>=V.right))h&=-2;if(132==
(h&132)&&(g.y<V.top||g.y>=V.bottom))h&=-5;g.x<V.left&&h&1&&(g.x=V.left,e|=1);g.x<V.left&&(g.x+n.width>V.right&&h&16)&&(n.width=Math.max(n.width-(g.x+n.width-V.right),0),e|=4);g.x+n.width>V.right&&h&1&&(g.x=Math.max(V.right-n.width,V.left),e|=1);h&2&&(e|=(g.x<V.left?16:0)|(g.x+n.width>V.right?32:0));g.y<V.top&&h&4&&(g.y=V.top,e|=2);g.y>=V.top&&(g.y+n.height>V.bottom&&h&32)&&(n.height=Math.max(n.height-(g.y+n.height-V.bottom),0),e|=8);g.y+n.height>V.bottom&&h&4&&(g.y=Math.max(V.bottom-n.height,V.top),
e|=2);h&8&&(e|=(g.y<V.top?64:0)|(g.y+n.height>V.bottom?128:0));h=e}else h=256;e=h;if(e&496){c=e;break a}}Rd(c,r);if(!(d==n||(!d||!n?0:d.width==n.width&&d.height==n.height)))g=wc(Zb(ac(c))),u&&(!g||!Cb("8"))?(h=c.style,g?(g=ge(c,"padding"),c=je(c),h.pixelWidth=n.width-c.left-g.left-g.right-c.right,h.pixelHeight=n.height-c.top-g.top-g.bottom-c.bottom):(h.pixelWidth=n.width,h.pixelHeight=n.height)):(c=c.style,qb?c.MozBoxSizing="border-box":rb?c.WebkitBoxSizing="border-box":c.boxSizing="border-box",c.width=
Math.max(n.width,0)+"px",c.height=Math.max(n.height,0)+"px");c=e}return c};function Zh(){}Zh.prototype.wb=ba();function $h(a,b,c){this.element=a;this.Cg=b;this.Hm=c}s($h,Zh);$h.prototype.wb=function(a,b,c){Yh(this.element,this.Cg,a,b,i,c,this.Hm)};function ai(a,b,c,d){$h.call(this,a,b);this.Zl=c?5:0;this.wh=d||i}s(ai,$h);ai.prototype.wb=function(a,b,c,d){var e=Yh(this.element,this.Cg,a,b,k,c,10,d,this.wh);if(e&496){var g=bi(e,this.Cg),b=bi(e,b),e=Yh(this.element,g,a,b,k,c,10,d,this.wh);e&496&&(g=bi(e,g),b=bi(e,b),Yh(this.element,g,a,b,k,c,this.Zl,d,this.wh))}};function bi(a,b){a&48&&(b^=2);a&192&&(b^=1);return b};function ci(a,b){I.call(this);this.U=new Gd(this);this.Ad&&f(Error("Can not change this state of the popup while showing."));this.e=a||k;b&&this.vk(b)}s(ci,ed);m=ci.prototype;m.e=k;m.Xk=j;m.Bi=k;m.Ad=l;m.$m=l;m.bh=-1;m.Hj=-1;m.Nl=l;m.jl=j;m.vc="toggle_display";m.vk=ca("vc");m.b=da("e");m.rb=da("Ad");m.xb=function(a){this.Je&&this.Je.stop();this.oe&&this.oe.stop();a?this.eg():this.xd()};m.wb=la;
m.eg=function(){if(!this.Ad&&this.dispatchEvent("beforeshow")){this.e||f(Error("Caller must call setElement before trying to show the popup"));this.wb();var a=ac(this.e);this.Nl&&P(this.U,a,"keydown",this.pm,j);if(this.Xk)if(P(this.U,a,"mousedown",this.ak,j),u){var b;try{b=a.activeElement}catch(c){}for(;b&&"IFRAME"==b.nodeName;){try{var d=b.contentDocument||b.contentWindow.document}catch(e){break}a=d;b=a.activeElement}P(this.U,a,"mousedown",this.ak,j);P(this.U,a,"deactivate",this.$j)}else P(this.U,
a,"blur",this.$j);"toggle_display"==this.vc?(this.e.style.visibility="visible",O(this.e,j)):"move_offscreen"==this.vc&&this.wb();this.Ad=j;this.Je?(Yc(this.Je,"end",this.fk,l,this),this.Je.play()):this.fk()}};m.xd=function(a){if(!this.Ad||!this.dispatchEvent({type:"beforehide",target:a}))return l;this.U&&Jd(this.U);this.Ad=l;this.Hj=q();this.oe?(Yc(this.oe,"end",Ba(this.Li,a),l,this),this.oe.play()):this.Li(a);return j};
m.Li=function(a){"toggle_display"==this.vc?this.$m?L(this.tj,0,this):this.tj():"move_offscreen"==this.vc&&(this.e.style.top="-10000px");this.dispatchEvent({type:"hide",target:a})};m.tj=function(){this.e.style.visibility="hidden";O(this.e,l)};m.fk=function(){this.bh=q();this.Hj=-1;this.dispatchEvent("show")};m.ak=function(a){a=a.target;!mc(this.e,a)&&((!this.Bi||mc(this.Bi,a))&&!(150>q()-this.bh))&&this.xd(a)};m.pm=function(a){27==a.keyCode&&this.xd(a.target)&&(a.preventDefault(),a.stopPropagation())};
m.$j=function(a){if(this.jl){var b=ac(this.e);if(u||pb){if(a=b.activeElement,!a||mc(this.e,a)||"BODY"==a.tagName)return}else if(a.target!=b)return;150>q()-this.bh||this.xd()}};m.n=function(){ci.d.n.call(this);this.U.ea();Hc(this.Je);Hc(this.oe);delete this.e;delete this.U};function di(a,b){this.ik=4;this.Dh=b||i;ci.call(this,a)}s(di,ci);function ei(a,b){a.ik=b;a.rb()&&a.wb()}function fi(a,b){a.Dh=b||i;a.rb()&&a.wb()}function gi(a,b,c,d,e){a.dm=b==k||b instanceof Kd?b:new Kd(b,c,d,e);a.rb()&&a.wb()}di.prototype.wb=function(){if(this.Dh){var a=!this.rb()&&"move_offscreen"!=this.vc,b=this.b();a&&(b.style.visibility="hidden",O(b,j));this.Dh.wb(b,this.ik,this.dm);a&&O(b,l)}};function hi(a,b,c){I.call(this);this.$b=a;this.V=b;this.U=c;this.sg=p(this.Em,this)}s(hi,I);var Bh=hi;m=hi.prototype;m.dg=l;m.hk=0;m.ya=k;m.rf=function(){!this.ya&&!this.hk?this.ie():this.dg=j};m.stop=function(){this.ya&&(gd.clearTimeout(this.ya),this.ya=k,this.dg=l)};m.n=function(){hi.d.n.call(this);this.stop()};m.Em=function(){this.ya=k;this.dg&&!this.hk&&(this.dg=l,this.ie())};m.ie=function(){this.ya=L(this.sg,this.V);this.$b.call(this.U)};function ii(a,b){I.call(this);this.$b=a;this.U=b;this.nb=new we(p(this.Dm,this),0,this)}s(ii,I);m=ii.prototype;m.V=0;m.Nh=0;m.Aj=l;m.n=function(){this.nb.ea();delete this.$b;delete this.U;ii.d.n.call(this)};m.start=function(a,b){this.stop();this.Aj=l;var c=b||0;this.V=Math.max(a||0,0);this.Nh=0>c?-1:q()+c;this.nb.start(0>c?this.V:Math.min(this.V,c))};m.stop=function(){this.nb.stop()};m.Xb=function(){return this.nb.Xb()};
m.Dm=function(){if(this.$b.call(this.U))this.Aj=j;else if(0>this.Nh)this.nb.start(this.V);else{var a=this.Nh-q();0>=a||this.nb.start(Math.min(this.V,a))}};function ji(a){I.call(this);this.e=a;this.ze=this.e.value;this.B=new Gd(this);this.tb=q();rb||u||qb&&Cb("1.9")?P(this.B,a,"paste",this.pd):P(this.B,a,["keydown","blur","focus","mouseover","input"],this.El);this.nb=new ii(p(this.Gi,this))}s(ji,ed);m=ji.prototype;m.m="init";m.J=fh("goog.events.PasteHandler");m.n=function(){ji.d.n.call(this);this.B.ea();this.B=k;this.nb.ea();this.nb=k};
m.Gi=function(){if(this.ze==this.e.value)return l;this.J.info("detected textchange after paste");this.dispatchEvent("after_paste");return j};m.pd=function(a){a=new Oc(a.la);a.type="paste";this.dispatchEvent(a);L(function(){this.Gi()||this.nb.start(50,200)},0,this)};
m.El=function(a){switch(this.m){case "init":switch(a.type){case "blur":this.m="init";break;case "focus":this.m="focused";break;case "mouseover":this.m="init";this.e.value!=this.ze&&(this.J.info("paste by dragdrop while on init!"),this.pd(a));break;default:bh(this.J,"unexpected event "+a.type+"during init")}break;case "focused":switch(a.type){case "input":var b=this.tb+400;if(q()>b||"focus"==this.Pm)this.J.info("paste by textchange while focused!"),this.pd(a);break;case "blur":this.m="init";break;
case "keydown":this.J.info("key down ... looking for ctrl+v");if(kb&&pb&&0==a.keyCode||kb&&pb&&17==a.keyCode)break;this.m="typing";break;case "mouseover":this.e.value!=this.ze&&(this.J.info("paste by dragdrop while focused!"),this.pd(a));break;default:bh(this.J,"unexpected event "+a.type+" during focused")}break;case "typing":switch(a.type){case "input":this.m="focused";break;case "blur":this.m="init";break;case "keydown":if(a.ctrlKey&&86==a.keyCode||a.shiftKey&&45==a.keyCode||a.metaKey&&86==a.keyCode)this.J.info("paste by ctrl+v while keypressed!"),
this.pd(a);break;case "mouseover":this.e.value!=this.ze&&(this.J.info("paste by dragdrop while keypressed!"),this.pd(a));break;default:bh(this.J,"unexpected event "+a.type+" during keypressed")}break;default:bh(this.J,"invalid "+this.m+" state")}this.tb=q();this.ze=this.e.value;this.J.info(a.type+" -> "+this.m);this.Pm=a.type};function ki(){return'<div class="popup" id="popup" style="visibility: hidden; display: none;"><div class="content"></div><div id="tailarrow"></div></div>'}function li(a){return(a.link?'<a href="'+H(a.link)+'">':"")+'<div class="tooltip">'+H(a.text)+"</div>"+(a.link?"</a>":"")}
function mi(){return'<div class="select-program"><div class="select-header">Suggest a Program</div><div class="select-content"><div class="page"><input type="text" class="program-input" placeholder="paste a youtube link"/><div class="page2"></div></div></div></div>'}function ni(a){return'<div class="confirm-media"><img src="'+H(a.$h)+'" /><div class="title">'+H(a.title)+'</div><div class="dark button">Yes</div></div>'};function Hg(){var a=A("popup");a||(a=G(ki),document.body.appendChild(a));di.call(this,a);J(window,"resize",p(this.xb,this,l));J(this,"hide",this.sm);this.Vh=this.Sg=l;this.q=sg.a();this.q.subscribe("tooltip",this.jn,this);this.q.subscribe("select-program",this.bn,this);this.q.subscribe("hide",this.xd,this);J(this.b(),"mouseover",p(function(){this.Sg=j},this));J(this.b(),"mouseout",p(function(){this.Sg=l;this.Vh&&this.q.c("hide")},this))}s(Hg,di);ma(Hg);
function Gg(a,b,c,d){J(b,"mouseover",p(function(){this.Hi&&gd.clearTimeout(this.Hi);this.Vh=l;this.q.c("tooltip",b,c,d)},a));J(b,"mouseout",p(function(){this.Hi=L(p(function(){this.Sg?this.Vh=j:this.q.c("hide")},this),100)},a))}m=Hg.prototype;m.sm=function(){this.xd();this.q.c("on-hide")};m.pb=function(){return B("content",this.b())};
m.jn=function(a,b,c){this.xb(l);"top"==b?(ei(this,1),b=-1*(Q(this.b()).width-Q(a).width)/2,gi(this,0,0,6,b),fi(this,new ai(a,4)),this.b().className="popup",v(this.b(),"top")):"left"==b&&(ei(this,0),b=-1*(Q(this.b()).height-Q(a).height)/2,gi(this,b,6,0,0),fi(this,new ai(a,6)),this.b().className="popup",v(this.b(),"left"));Ac(this.pb(),li,{text:c.text,link:c.link});this.xb(j)};
m.bn=function(a,b){this.xb(l);ei(this,0);var c=-1*(Q(this.b()).height-Q(a).height)/2;gi(this,c,0,0,5);fi(this,new ai(a,6));v(this.b(),"left");Ac(this.pb(),mi);this.Ne=new Th("paste a YouTube link");this.Ne.h(B("program-input",this.b()));var c=new df(this.Ne.b()),d=new ji(this.Ne.b()),e=new Bh(p(this.sh,this,b),1E3);this.xb(j);P(P(P(this.U,d,"after_paste",p(this.sh,this,b)),c,"key",p(function(){e&&e.rf()},this)),this.Ne.b(),"focus",p(this.sh,this,b))};
m.sh=function(a){var b=B("select-content",this.b());try{var c;var d=this.Ne.A(),e=oi.exec(d);e?c=new pi(e[1]||e[2],i,i):f(Error("failed to parse video id from youtube url: "+d));W(Da("https://gdata.youtube.com/feeds/api/videos/%s?v=2&alt=json",c.Qk),p(function(d){var e=gh(zh(d.target)).entry,d=e.title.$t,g=e.media$group.media$thumbnail[0].url,e=B("page2",this.b());Ac(e,ni,{title:d,$h:g});d=new Bf("Yes");d.h(B("button",e));(new He(b,[0,0],[260,0],300,Mh)).play();P(this.U,d,"action",p(this.oh,this,
a,c))},this))}catch(g){}};m.oh=function(a,b){W("/_addprogram",p(function(b){b=gh(zh(b.target));b=new dg(b);a.c(ng,b);this.xb(l)},this),"POST","channel="+a.id+"&youtube_id="+b.Qk)};function qi(){M.call(this);this.Di=[];this.nk=[]}s(qi,M);ma(qi);
qi.prototype.search=function(a,b){W("https://gdata.youtube.com/feeds/api/videos?q="+a+"&max-results=10&v=2&alt=json",p(function(a){a=Y(a.target);this.nk=Sa(a.feed.entry,function(a){var b=new Xf({id:"youtube"+a.media$group.yt$videoid.$t,name:a.title.$t,host_id:a.media$group.yt$videoid.$t,description:a.media$group.media$description.$t,duration:a.media$group.yt$duration.seconds,publisher:{name:a.author[0].name.$t,id:"youtube"+a.author[0].name.$t,picture:"https://i4.ytimg.com/i/"+a.author[0].yt$userId.$t+
"/1.jpg"}});b.kc=ud(a.published.$t);return b},this);b&&b(this.nk)},this))};function ri(a){return'<div class="search-channel"><div class="pic"><img src="'+H(a.$h)+'"></div><div class="title">'+H(a.name)+'</div><div class="loading loading-channel"><div class="loading-spinner"></div></div></div>'};function si(a){return'<div class="info"><div class="picture"><img src="'+H(a.media.zb)+'" class="thumb"><div class="publisher"><img src="'+H(a.media.ma.L)+'"><div class="name">'+H(a.media.ma.name)+'</div></div><div class="links"><div class="local"></div><a target="_blank" href="'+a.media.Ol+'"><div class="host"></div></a></div><div class="link-select" style="display:none"><input onClick="this.select();" class="link-input" type="text" value="'+a.media.link+'" readonly="readonly"/></div><div class="title"><div class="text">'+
H(a.media.name)+'</div></div><div class="scrollable ios-scroll" '+(!a.description?'style="display:none"':"")+'><div class="desc-link"><a href="#">DESCRIPTION</a><div class="published">'+H(a.kc)+'</div></div><div class="description">'+a.description+'</div></div><div class="button play"><div class="icon"></div></div><div class="options"><div class="button star"><div class="icon"></div></div><div class="button facebook"><div class="icon"></div></div><div class="button twitter"><div class="icon"></div></div><div class="button plus"><div class="icon"></div></div></div></div><div class="viewers" style="display: none"><div class="label"><div class="eye-icon"></div></div></div><div class="info-contents"><div class="scrollable ios-scroll"><div class="user-poll" style="display: none"><div class="label"><div class="status">VOTE</div></div><div class="poll-options"></div></div><div class="tweet-holder" style="display:none"><div class="label"><div class="globe-icon"></div><a class="tweets-link">LATEST TWEETS</a></div><div class="tweets"></div><div class="dot-nav"></div></div><div class="comments-holder ios-scroll" style="display:none"><div class="label"><div class="friends-icon"></div><a class="conv-link">CONVERSATION</a>'+
(a.Wl?'<a class="prev-link">&#10218; LAST PROGRAM</a>':"")+'</div><div class="no-comments" style="display:none">Start the conversation with friends.</div><div class="comments"></div><div class="top-grad"></div><div class="bottom-grad"></div></div></div></div><div class="loading loading-activity"><div class="loading-spinner"></div></div><div class="overlay" style="display: none"><div class="leaving"><div>This program is over. Carry on?</div><div class="button dark no">Not yet</div><div class="button dark yes">Let\'s go</div></div></div></div>'}
function ti(a){return'<div class="viewer" name="'+H(a.td)+'"><img src="'+H(a.j.L)+'"></div>'}
function ui(a){return'<div class="tweet" id="'+H(a.prefix)+"-"+H(a.Pb.id)+'">'+(a.Pb.j?'<a href="#user:'+H(a.Pb.j.id)+'"><img src="'+H(a.Pb.L)+'"/></a>':'<img src="'+H(a.Pb.L)+'"/>')+'<div class="text"><a class="handle" target="_blank" href="http://www.twitter.com/'+H(a.Pb.handle)+"/status/"+H(a.Pb.id)+'">'+H(a.Pb.handle)+"</a> "+a.text+'</div><div class="timestamp">'+H(a.timestamp)+'</div><div class="tweet-options"><div class="reply"></div></div></div>'}
function vi(a){return'<div class="comment'+(a.aa.Q?" reply":"")+'" '+(a.aa.id?'id="'+H(a.prefix)+"-"+H(a.aa.id)+'"':"")+">"+(!a.aa.Q?'<a href="#user:'+H(a.aa.j.id)+'"><div class="user-picture" style="background:'+H(a.aa.j.color)+'"><img src="'+H(a.aa.j.L)+'"/></div></a>':"")+'<div class="template"><a class="user" href="#user:'+H(a.aa.j.id)+'">'+H(a.aa.j.name)+'</a>  <div class="text">'+a.text+'<div class="comment-options">'+(a.gk?'<div class="remove"></div> ':"")+'<div class="reply"></div></div></div><div class="timestamp">'+
H(a.aa.lc)+'</div><div class="replies"></div>'+(!a.aa.Q?'<div class="reply-input"><textarea class="reply-textarea" rows="1" placeholder="reply..."></textarea></div>':"")+"</div></div>"}
function wi(){return'<div class="comment-input"><div class="textarea-holder"><div class="input-holder"><div class="highlighter"></div><textarea class="comment-textarea" rows="1" placeholder="Add to the conversation..."></textarea><div class="suggestions" style="display:none"></div></div></div><div class="comment-controls"><div class="comment-toggle tweet-toggle"><div class="icon"></div></div><div class="comment-toggle fb-toggle"><div class="icon"></div></div></div><div class="comment-button add-comment">POST</div></div>'}
function xi(a){var b='<div class="activity'+(1<a.M.length?" digest":"")+'">';if(1<a.M.length){for(var b=b+('<div class="template"><span>'+H(a.M.length)+" friends </span>"+(a.Kk?"watched":"are watching")+(a.T?' <a href="#channel:'+H(a.T.id)+'">'+H(a.T.name)+"</a>":"")+'<div class="timestamp">'+H(a.time)+'</div></div><div class="users">'),c=a.M,d=c.length,e=0;e<d;e++)var g=c[e],b=b+('<a href="#user:'+H(g.id)+'"><div class="picture" style="background:'+H(g.color)+'"><img src="'+H(g.L)+'"/></div></a>');
b+="</div>"}return b+=(1==a.M.length?'<a href="#user:'+H(a.M[0].id)+'"><div class="picture" style="background:'+H(a.M[0].color)+'"><img src="'+H(a.M[0].L)+'"/></div></a><div class="template"><a class="user" href="#user:'+H(a.M[0].id)+'">'+H(a.M[0].name)+"</a> "+(a.Kk?"watched":"is watching")+(a.T?' <a href="#channel:'+H(a.T.id)+'">'+H(a.T.name)+"</a>":"")+'<div class="timestamp">'+H(a.time)+"</div></div>":"")+'<div class="medias"></div></div>'}
function yi(a){for(var b='<div class="comment activity'+(1<a.Fb.length?" digest":"")+'">'+(1<a.Fb.length?'<div class="template">'+(1==a.M.length?'<a class="user" href="#user:'+H(a.M[0].id)+'">'+H(a.M[0].name)+' </a> discussed <a class="title" href="#info:'+H(a.media.id)+'">'+H(a.media.name)+"</a>.":"<span>"+H(a.M.length)+' friends </span> discussed <a class="title" href="#info:'+H(a.media.id)+'"> '+H(a.media.name)+"</a>.")+"</div>":""),a=a.Fb,c=a.length,d=0;d<c;d++)var e=a[d],b=b+('<div class="comment"><a href="#user:'+
H(e.j.id)+'"><div class="picture" style="background:'+H(e.j.color)+'"><img src="'+H(e.j.L)+'"/></div></a><div class="template"><a class="user" href="#user:'+H(e.j.id)+'">'+H(e.j.name)+'</a>  <div class="text">'+e.text+'</div><div class="timestamp">'+H(e.lc)+"</div></div></div>");return b+'<div class="medias"></div></div>'}
function zi(a){var b='<div class="like activity'+(1<a.M.length?" digest":"")+'">';if(1<a.M.length){for(var b=b+('<div class="template"><span>'+H(a.M.length)+' friends </span>liked<div class="timestamp">'+H(a.time)+'</div></div><div class="users">'),c=a.M,d=c.length,e=0;e<d;e++)var g=c[e],b=b+('<a href="#user:'+H(g.id)+'"><div class="picture" style="background:'+H(g.color)+'"><img src="'+H(g.L)+'"/></div></a>');b+="</div>"}return b+=(1==a.M.length?'<a href="#user:'+H(a.M[0].id)+'"><div class="picture" style="background:'+
H(a.M[0].color)+'"><img src="'+H(a.M[0].L)+'"/></div></a><div class="template" style="top:10px;margin-bottom:30px"><a class="user" href="#user:'+H(a.M[0].id)+'">'+H(a.M[0].name)+"</a> liked "+(1<a.Qj?H(a.Qj)+" stories":"")+'<div class="timestamp">'+H(a.time)+"</div></div>":"")+'<div class="medias"></div></div>'}
function Ai(a){return'<div class="list-info"><div class="picture-cell" '+(a.zb?'style="display:table-cell"':"")+">"+(a.link?'<a href="'+H(a.link)+'" target="_blank">':"")+'<div class="picture"><img class="thumb" src="'+H(a.zb)+'"></div>'+(a.link?"</a>":"")+'</div><div class="description" style="display:table-cell">'+a.description+"</div></div>"}function Bi(a){return'<li class="'+H(a.className)+' tab"><div class="label">'+H(a.name)+"</div></li>"}
function Ci(a){return'<div class="admin"><div class="scrollable ios-scroll"><div class="search"><input type="text" class="input" '+(a.yj?'placeholder="'+H(a.yj)+'"':"")+'/></div><div class="results"></div><div class="section" style="display:none"><div class="label">CHANNELS</div><div class="admin-channels"></div></div><div class="section" style="display:none"><div class="label">CURRENT TOPICS</div><div class="topics"></div></div><div class="section" style="display:none"><div class="label">COLLECTIONS</div><div class="collections"></div></div><div class="scroll-area"></div>'}
function Di(){return'<div class="admin-list admin"><div class="search"><input class="input" type="text" placeholder="Paste video or playlist link" /></div><div class="tabbed pending"><ul class="tabs"><li class="tab pending"><div class="label">PENDING</div></li><li class="tab all"><div class="label">ALL</div></li><li class="tab playlists"><div class="label">PLAYLISTS</div></li><li class="tab publishers"><div class="label">PUBLISHERS</div></li><li class="tab categories"><div class="label">CATEGORIES</div></li></ul><div class="pending-content content pending"></div><div class="all-content content all"></div><div class="playlists-content content playlists"></div><div class="publishers-content content publishers"></div><div class="categories-content content categories"><div class="label">GUIDE CATEGORIES</div><div class="categories-list"></div><div class="label">FEED IDS</div><div class="feed-ids"></div><div class="label">FEED CATEGORIES</div><div class="feed-cats"></div></div><div class="spinner" style="display:none"></div></div>'}
function Ei(a){return'<div class="playlist"><div class="title">'+H(a.name)+'</div><div class="controls"><div class="remove dark button">x</div></div></div>'}function Fi(a){return'<div class="category button">'+H(a.name)+"</div>"}function Gi(a){return'<div class="publisher">'+(a.L?'<img src="'+H(a.L)+'"/>':"")+'<div class="title">'+H(a.name)+'</div><div class="controls"><div class="remove dark button">x</div></div></div>'}
function Hi(a){return'<div class="channel '+(a.T.bb?"on":"off")+'"><div class="title">'+H(a.T.name)+'</div><div class="controls"><div class="fetch dark button">FETCH</div><div class="program dark button">PROG.</div><div class="remove dark button">x</div><div class="on dark button">ON</div><div class="off dark button">OFF</div></div>'+(a.T.Jd?'<div class="pending">'+H(a.T.Jd)+"</div>":"")+"</div>"}
function Ii(a){return'<div class="collection"><div class="title">'+H(a.xg.name)+'</div><div class="controls">'+(a.xg.Jd?'<div class="pending">'+H(a.xg.Jd)+"</div>":"")+'<div class="fetch dark button">FETCH</div><div class="button dark remove">x</div></div></div>'}function Ji(a){return'<div class="topic"><div class="title">'+H(a.xn)+'</div><div class="controls">'+(a.Jd?'<div class="pending">'+H(a.Jd)+"</div>":"")+"</div></div>"}
function Ki(a){return'<div class="tabbed '+(a.kh?"inbox":"messages")+'"><ul class="tabs">'+(a.kh?'<li class="tab inbox"><div class="label">INBOX</div></li>':'<li class="tab messages"><div class="label">MESSAGES</div></li>')+'<li class="tab activity"><div class="label">ACTIVITY</div></li><li class="tab starred"><div class="label"><div class="heart"></div>\'d</div></li></ul>'+(a.kh?'<div class="inbox-content content inbox"><div class="label">NOTIFICATIONS</div><div class="notifications-content content notifications"><div class="loading loading-activity"><div class="loading-spinner"></div></div></div><div class="label">MESSAGES</div><div class="messages-content content messages"><div class="loading loading-activity"><div class="loading-spinner"></div></div></div></div>':
'<div class="messages-content content messages"><div class="loading loading-activity"><div class="loading-spinner"></div></div></div>')+'<div class="activity-content content activity"><div class="loading loading-activity"><div class="loading-spinner"></div></div></div><div class="starred-content content starred"><div class="loading loading-starred"><div class="loading-spinner"></div></div></div><div class="spinner" style="display:none"></div></div>'}
function Li(){return'<div class="tabbed"><ul class="tabs"><li class="tab comments"><div class="label">CONVERSATION</div></li><li class="tab tweets"><div class="label">TWEETS</div></li></ul><div class="comments-content content comments-holder"><div class="loading loading-activity"><div class="loading-spinner"></div></div></div><div class="tweets-content content tweet-holder"><div class="loading loading-starred"><div class="loading-spinner"></div></div></div></div>'}
function Mi(a){return'<div class="list-media show"><div class="media"><div class="preview"><div class="thumb" style="background-image:url('+H(a.media.zb)+"); background-position: 50% "+H(a.media.Sd)+'%"></div><div class="title">'+H(a.media.name)+'</div><div class="stats"><div class="comment-count"><div class="icon"></div>'+H(a.media.kd)+'</div><div class="like-count"><div class="icon"></div>'+H(a.media.$l)+'</div></div></div></div><div class="publisher">'+(a.media.ma?'<img src="'+H(a.media.ma.L)+
'"><div class="name">'+H(a.media.ma.name)+"</div>":"")+'<div class="list-play"><div class="icon"></div></div><div class="list-plus"><div class="icon"></div></div></div></div>'}
function Ni(a){return'<div class="admin-media list-media"><div class="media"><div class="preview"><div class="thumb" style="background-image:url('+H(a.media.zb)+"); background-position: 50% "+H(a.media.Sd)+'%"></div><div class="title">'+H(a.media.name)+'</div><div class="published">'+H(a.kc)+'</div><div class="play"></div><div class="approve"></div><div class="remove"></div><div class="repos"></div></div></div><div class="publisher"><img src="'+H(a.media.ma.L)+'"><div class="name">'+H(a.media.ma.name)+
'</div><div class="duration">'+H(a.media.duration)+' seconds</div></div><div class="description">'+H(a.media.description)+"</div></div>"}function Oi(a){return'<div class="option"><div class="percent"></div><div class="name">'+H(a.name)+'</div><div class="percent-number">'+H(a.zh)+"</div></div>"};function Pi(){R.call(this);this.bc={};this.cc=0;this.Hb=l;this.W=new Th("Search");this.ra=new Bf("Search");tf(this.ra,16,j)}s(Pi,R);m=Pi.prototype;
m.w=function(a){Pi.d.w.call(this,a);this.W.h(A("search-input"));this.ra.h(A("search-icon"));this.$f=A("search-results");this.Xf=B("result-medias",this.b());this.Wf=B("result-channels",this.b());this.wg=A("clear-icon");var a=new df(this.W.b()),b=new Bh(function(){if(this.W.A()){var a=qi.a(),b=this.W.A(),e=p(this.om,this);W("https://www.googleapis.com/youtube/v3/search?q="+b+"&type=channel,playlist&part=snippet&maxResults=3&key=AIzaSyAUF3ESL0wYUuSWmOezgZclQFpNGZNBePw",p(function(a){a=Y(a.target);this.Di=
Sa(a.items,function(a){return{playlist_id:a.id.playlistId,channel_id:a.id.channelId,name:a.snippet.title,thumbnail:a.snippet.thumbnails["default"].url}},this);e&&e(this.Di)},a));qi.a().search(this.W.A(),p(this.Cm,this));O(this.wg,j);v(this.b(),"show")}else this.Xf.innerHTML="",this.Wf.innerHTML="",this.Hb=l,z(this.$f,"no-medias",j)},1E3,this);P(P(P(P(this.i(),this.b(),"click",p(function(){sf(this.ra,j);this.Hb&&v(this.b(),"show")},this)),a,"key",p(function(a){a.stopPropagation();b.rf()},this)),this.wg,
"click",p(function(){this.W.xa("");x(this.b(),"show");sf(this.ra,l);O(this.wg,l);this.Xf.innerHTML="";this.Wf.innerHTML="";this.Hb=l;z(this.$f,"no-medias",j)},this)),window,"click",p(function(a){af(this.ra)&&(vc(a.target,"search")||L(p(function(){x(this.b(),"show");sf(this.ra,l)},this)))},this))};m.om=function(a){this.Wf.innerHTML="";this.Hb=!!a.length||this.Hb;z(this.$f,"no-medias",!this.Hb);t(a,function(a){this.xc(a)},this)};
m.Cm=function(a){this.Xf.innerHTML="";this.Hb=!!a.length||this.Hb;z(this.$f,"no-medias",!this.Hb);t(a,function(a){this.Cb(a)},this)};
m.Cb=function(a){var b=G(Mi,{media:a}),c=B("list-play",b),d=B("list-plus",b);this.Xf.appendChild(b);P(P(P(this.i(),b,"click",p(function(b){b.preventDefault();b.stopPropagation();Z.a().c(Eg,a)},this)),c,"click",p(function(b){b.preventDefault();b.stopPropagation();x(this.b(),"show");b=eg(a);U.a().c(Kf,b)},this)),d,"click",function(b){b.preventDefault();b.stopPropagation();Pf().c(og,a,j)})};
m.xc=function(a){var b=G(ri,{name:a.name,$h:a.thumbnail});this.Wf.appendChild(b);P(this.i(),b,"click",p(function(c){c.preventDefault();c.stopPropagation();v(b,"loading");W("/_ytchannel",p(function(c){c=Y(c.target);a=T.a().Ze(c.channel);c=new dg(c.program);a.c(ng,c);T.a().c(Gf,a);x(b,"loading")},this),"POST","&name="+a.name+(a.channel_id?"&channel_id="+a.channel_id:"")+(a.playlist_id?"&playlist_id="+a.playlist_id:""))},this))};function Z(){M.call(this)}s(Z,M);ma(Z);var Eg="media-info",Fg="profile";function Qi(){I.call(this);this.pe=[];this.pn=[];this.Ie=[]}s(Qi,ed);m=Qi.prototype;m.Ej=l;m.Fj=l;m.Yg=l;m.uk=ca("Zf");m.init=function(){if(!this.Yg){for(var a,b=0;a=this.pe[b];b++)Ri(this,a);this.Yg=j}};function Ri(a,b){a.Ej&&(J(b.element,"mousedown",b.Uj,l,b),a.Wh&&v(b.element,a.Wh));a.Fj&&a.Zh&&v(b.element,a.Zh)}
m.bd=function(a,b){if(!this.Ja)if(this.Ja=b,this.dispatchEvent(new Si("dragstart",this,this.Ja))==l)this.Ja=k;else{var c=b.ld,d=this.kf(c);this.gl&&v(d,this.gl);this.rd=d;d=ac(c);d.body.appendChild(this.rd);var e=this.rd,g=Xd(c),c=ge(c,"margin");g.x-=2*(c.left||0);g.y-=2*(c.top||0);e.style.position="absolute";e.style.left=g.x+"px";e.style.top=g.y+"px";this.o=new le(e);this.o.uk(this.Zf);J(this.o,"drag",this.Vj,l,this);J(this.o,"end",this.Ic,l,this);J(d.body,"selectstart",this.Ek);this.Rd=[];for(d=
0;c=this.pn[d];d++)for(var h,e=0;h=c.pe[e];e++)for(var g=c,n=[h.element],r=this.Rd,w=0;w<n.length;w++){var F=n[w],K=Xd(F),aa=Q(F),K=new Kd(K.y,K.x+aa.width,K.y+aa.height,K.x);r.push(new Ti(K,g,h,F));Ui(this,K)}this.Nb||(this.Nb=new Kd(0,0,0,0));for(d=0;c=this.Ie[d];d++)c.zg=[],c.ok=c.e.scrollLeft,c.pk=c.e.scrollTop,e=Xd(c.e),g=Q(c.e),c.Y=new Kd(e.y,e.x+g.width,e.y+g.height,e.x);for(d=0;g=this.Rd[d];d++)for(e=0;c=this.Ie[e];e++)mc(c.e,g.e)&&(c.zg.push(g),g.He=c);this.wc=k;for(d=0;c=this.Ie[d];d++)J(c.e,
"scroll",this.Ki,l,this);this.o.bd(a);a.preventDefault()}};
m.Ic=function(a){var b=a.fl?k:this.wc;if(b&&b.Ga){var c=a.clientX,a=a.clientY,d=xc(Zb(this.rd)),e=c+d.x,d=a+d.y,g;this.Me&&(g=this.Me(b.Ib,b.Y,e,d));this.dispatchEvent(new Si("drag",this,this.Ja,b.Ga,b.Ib,b.e,c,a,e,d));b.Ga.dispatchEvent(new Si("drop",this,this.Ja,b.Ga,b.Ib,b.e,c,a,e,d,g))}this.dispatchEvent(new Si("dragend",this,this.Ja));Zc(this.o,"drag",this.Vj,l,this);Zc(this.o,"end",this.Ic,l,this);Zc(ac(this.Ja.ld).body,"selectstart",this.Ek);for(b=0;c=this.Ie[b];b++)Zc(c.e,"scroll",this.Ki,
l,this),c.zg=[];this.o.ea();E(this.rd);delete this.Ja;delete this.rd;delete this.o;delete this.Rd;delete this.wc};
m.Vj=function(a){var b,c=xc(Zb(this.rd));b=new Nb(a.clientX+c.x,a.clientY+c.y);var c=b.x,d=b.y,e=this.wc,g;if(e){this.Me&&e.Ga&&(g=this.Me(e.Ib,e.Y,c,d));if(e.Y.contains(b)&&g==this.vi)return;e.Ga&&(this.dispatchEvent(new Si("dragout",this,this.Ja,e.Ga,e.Ib,e.e)),e.Ga.dispatchEvent(new Si("dragout",this,this.Ja,e.Ga,e.Ib,e.e,i,i,i,i,this.vi)));this.vi=g;this.wc=k}if(this.Nb.contains(b)){a:{for(var h=0;e=this.Rd[h];h++)if(e.Y.contains(b))if(e.He){if(e.He.Y.contains(b)){b=e;break a}}else{b=e;break a}b=
k}if((e=this.wc=b)&&e.Ga)this.Me&&(g=this.Me(e.Ib,e.Y,c,d)),c=new Si("dragover",this,this.Ja,e.Ga,e.Ib,e.e),c.on=g,this.dispatchEvent(c),e.Ga.dispatchEvent(new Si("dragover",this,this.Ja,e.Ga,e.Ib,e.e,a.clientX,a.clientY,i,i,g));else if(!e){this.Ba||(this.Ba=new Ti(this.Nb.clone()));a=this.Ba.Y;a.top=this.Nb.top;a.right=this.Nb.right;a.bottom=this.Nb.bottom;a.left=this.Nb.left;for(g=0;e=this.Rd[g];g++)b=e.Y,e.He&&(e=e.He.Y,b=new Kd(Math.max(b.top,e.top),Math.min(b.right,e.right),Math.min(b.bottom,
e.bottom),Math.max(b.left,e.left))),e=k,c>=b.right?e=b.right>a.left?b.right:a.left:c<b.left&&(e=b.left<a.right?b.left:a.right),h=k,d>=b.bottom?h=b.bottom>a.top?b.bottom:a.top:d<b.top&&(h=b.top<a.bottom?b.top:a.bottom),e!==k&&h!==k&&(Math.abs(e-c)>Math.abs(h-d)?h=k:e=k),e===k?h!==k&&(h<=d?a.top=h:a.bottom=h):e<=c?a.left=e:a.right=e;this.wc=10<=(a.right-a.left)*(a.bottom-a.top)?this.Ba:k}}};m.Ek=ea(l);
m.Ki=function(a){for(var b=0,c;c=this.Ie[b];b++)if(a.target==c.e){var d=c.pk-c.e.scrollTop,e=c.ok-c.e.scrollLeft;c.pk=c.e.scrollTop;c.ok=c.e.scrollLeft;this.Ba&&this.wc==this.Ba&&(0<d?this.Ba.Y.top+=d:this.Ba.Y.bottom+=d,0<e?this.Ba.Y.left+=e:this.Ba.Y.right+=e);for(var g=0,h;h=c.zg[g];g++)h=h.Y,h.top+=d,h.left+=e,h.bottom+=d,h.right+=e,Ui(this,h)}this.o.ek(a)};
m.kf=function(a){var b=a.cloneNode(j);switch(a.tagName.toLowerCase()){case "tr":return D("table",k,D("tbody",k,b));case "td":case "th":return D("table",k,D("tbody",k,D("tr",k,b)));default:return b}};function Ui(a,b){if(1==a.Rd.length)a.Nb=new Kd(b.top,b.right,b.bottom,b.left);else{var c=a.Nb;c.left=Math.min(b.left,c.left);c.right=Math.max(b.right,c.right);c.top=Math.min(b.top,c.top);c.bottom=Math.max(b.bottom,c.bottom)}}
m.n=function(){Qi.d.n.call(this);for(var a,b=0;a=this.pe[b];b++)this.Ej&&(Zc(a.element,"mousedown",a.Uj,l,a),this.Wh&&x(a.element,this.Wh)),this.Fj&&this.Zh&&x(a.element,this.Zh),a.ea();this.pe.length=0};function Si(a,b,c,d,e,g,h,n,r,w,F){Lc.call(this,a);this.mo=b;this.no=c;this.oo=d;this.qo=e;this.po=g;this.clientX=h;this.clientY=n;this.Mo=r;this.No=w;this.on=F}s(Si,Lc);Si.prototype.n=ba();
function Vi(a,b){I.call(this);this.element=A(a);this.data=b;this.S=k;this.element||f(Error("Invalid argument"))}s(Vi,ed);m=Vi.prototype;m.ld=k;m.Uj=function(a){if(Qc(a)){var b=a.target;b&&(J(b,"mousemove",this.Fd,l,this),J(b,"mouseout",this.Fd,l,this),J(b,"mouseup",this.jh,l,this),this.ld=b,this.Xh=new Nb(a.clientX,a.clientY),a.preventDefault())}};m.bg=ca("S");
m.Fd=function(a){var b=this.ld,c="mouseout"==a.type&&a.target==b;if(5<Math.abs(a.clientX-this.Xh.x)+Math.abs(a.clientY-this.Xh.y)||c)Zc(b,"mousemove",this.Fd,l,this),Zc(b,"mouseout",this.Fd,l,this),Zc(b,"mouseup",this.jh,l,this),this.S.bd(a,this)};m.jh=function(){var a=this.ld;Zc(a,"mousemove",this.Fd,l,this);Zc(a,"mouseout",this.Fd,l,this);Zc(a,"mouseup",this.jh,l,this);delete this.Xh;this.ld=k};function Ti(a,b,c,d){this.Y=a;this.Ga=b;this.Ib=c;this.e=d}Ti.prototype.He=k;function Wi(){Qi.call(this)}s(Wi,Qi);function Xi(a,b){b.bg(a);a.pe.push(b);a.Yg&&Ri(a,b)};function Yi(a){var b={};"rel"in b||(b.rel="nofollow");"target"in b||(b.target="_blank");var c=[],d;for(d in b)b.hasOwnProperty(d)&&b[d]&&c.push(Ga(d),'="',Ga(b[d]),'" ');var e=c.join("");return a.replace(Zi,function(a,b,c,d,w){a=[Ga(b)];if(!c)return a[0];a.push("<a ",e,'href="');d?(a.push("mailto:"),c=d,d=""):(w||a.push("http://"),(d=c.match($i))?(c=d[1],d=d[2]):d="");c=Ga(c);d=Ga(d);a.push(c,'">',c,"</a>",d);return a.join("")})}
var $i=/^(.*)([:;,\.?\[\]])$/,Zi=RegExp("([\\S\\s]*?)(\\b(?:mailto:)?([\\w.+-]+@[A-Za-z0-9.-]+\\.(?:com|org|net|edu|gov|aero|biz|cat|coop|info|int|jobs|mobi|museum|name|pro|travel|arpa|asia|xxx|[a-z][a-z])\\b)|\\b(?:(https?|ftp)://+|www\\.)\\w[:;,\\.?\\[\\]\\w/~%&=+#-@!]*|$)","g");function aj(){}s(aj,Ve);ma(aj);m=aj.prototype;m.ud=ba();m.h=function(a,b){of(a);a.Eb&=-256;tf(a,32,l);aj.d.h.call(this,a,b);a.Zc(b.value);return b};m.R=function(a){of(a);a.Eb&=-256;tf(a,32,l);return a.$a().R("textarea",{"class":Xe(this,a).join(" "),disabled:!a.isEnabled()},a.kb||"")};m.zc=function(a){return"TEXTAREA"==a.tagName};m.$c=la;m.Zg=function(a){return a.isEnabled()};m.Pd=la;m.wa=function(a,b,c){aj.d.wa.call(this,a,b,c);if((a=a.b())&&1==b)a.disabled=c};m.hb=la;
m.Zc=function(a,b){a&&(a.value=b)};m.ta=ea("goog-textarea");function bj(a,b,c){nf.call(this,a,b||aj.a(),c);of(this);this.Od(j);a||(this.kb="")}s(bj,nf);var cj=qb||rb;m=bj.prototype;m.zd=l;m.Ka=0;m.Mj=0;m.Tj=0;m.sj=l;m.Jf=l;m.Qh=l;m.Ph=l;function dj(a){return a.Ae.top+a.Ae.bottom+a.Ci.top+a.Ci.bottom}function ej(a){var b=a.Tj,c=a.b();b&&(c&&a.Jf)&&(b-=dj(a));return b}function fj(a){var b=a.Mj,c=a.b();b&&(c&&a.Jf)&&(b-=dj(a));return b}m.xa=function(a){this.Zc(String(a))};m.A=function(){return this.b().value};m.Zc=function(a){bj.d.Zc.call(this,a);this.resize()};
m.fb=function(a){bj.d.fb.call(this,a);this.b().disabled=!a};m.resize=function(){this.b()&&this.wf()};m.z=function(){bj.d.z.call(this);var a=this.b();Md(a,{overflowY:"hidden",overflowX:"auto",boxSizing:"border-box",MsBoxSizing:"border-box",WebkitBoxSizing:"border-box",MozBoxSizing:"border-box"});this.Ae=ge(a,"padding");this.Ci=je(a);P(P(P(P(this.i(),a,"scroll",this.wf),a,"focus",this.wf),a,"keyup",this.wf),a,"mouseup",this.fm);this.resize()};
function gj(a){if(!a.sj){var b=a.b().cloneNode(l);Md(b,{position:"absolute",height:"auto",top:"-9999px",margin:"0",padding:"1px",border:"1px solid #000",overflow:"hidden"});a.$a().H.body.appendChild(b);var c=b.scrollHeight;b.style.padding="10px";var d=b.scrollHeight;a.Qh=d>c;b.style.borderWidth="10px";a.Ph=b.scrollHeight>d;b.style.height="100px";100!=b.offsetHeight&&(a.Jf=j);E(b);a.sj=j}var b=a.b(),c=a.b().scrollHeight,e=a.b(),d=e.offsetHeight-e.clientHeight;if(!a.Qh)var g=a.Ae,d=d-(g.top+g.bottom);
a.Ph||(e=je(e),d-=e.top+e.bottom);c+=0<d?d:0;a.Jf?c-=dj(a):(a.Qh||(d=a.Ae,c+=d.top+d.bottom),a.Ph||(a=je(b),c+=a.top+a.bottom));return c}function hj(a,b){a.Ka!=b&&(a.Ka=b,a.b().style.height=b+"px")}function ij(a){a=a.b();a.style.height="auto";var b=a.value.match(/\n/g)||[];a.rows=b.length+1}
m.wf=function(){if(!this.zd){var a=l;this.zd=j;var b=this.b(),c=this.Ka;if(b.scrollHeight){var d=l,e=l,g=gj(this),h=b.offsetHeight,n=ej(this),r=fj(this);n&&g<n?(hj(this,n),d=j):r&&g>r?(hj(this,r),b.style.overflowY="",e=j):h!=g?hj(this,g):this.Ka||(this.Ka=g);!d&&(!e&&cj)&&(a=j)}else ij(this);this.zd=l;a&&(a=this.b(),this.zd||(this.zd=j,b=l,a.value||(a.value=" ",b=j),(e=a.scrollHeight)?(g=gj(this),d=ej(this),h=fj(this),!(d&&g<=d)&&!(h&&g>=h)&&(h=this.Ae,a.style.paddingBottom=h.bottom+1+"px",gj(this)==
g&&(a.style.paddingBottom=h.bottom+e+"px",a.scrollTop=0,e=gj(this)-e,e>=d?hj(this,e):hj(this,d)),a.style.paddingBottom=h.bottom+"px")):ij(this),b&&(a.value=""),this.zd=l));c!=this.Ka&&this.dispatchEvent("resize")}};m.fm=function(){var a=this.b(),b=a.offsetHeight;a.filters&&a.filters.length&&(a=a.filters.item("DXImageTransform.Microsoft.DropShadow"))&&(b-=a.offX);b!=this.Ka&&(this.Ka=this.Tj=b)};function jj(a,b,c,d,e,g,h){R.call(this);this.Ea=Df();this.jb=a;this.Pf=b;this.Ch=c;this.Ih=d;this.tg=e.categories;this.ml=e.feed_categories;this.ol=e.feed_id;this.ci=g||k;this.od=h||k;this.Gg=this.Ea?new Wi:k;this.Kc={pending:l,all:l};this.yb=["pending","all","playlists","publishers","categories"]}s(jj,R);var kj="top_rated top_favorites most_shared most_recent most_discussed most_responded recently_featured on_the_web most_viewed".split(" "),lj="All Film Autos Music Animals Sports Travel Games Videoblog People Comedy Entertainment News Howto Education Tech Nonprofit Movies Shows Shortmov".split(" ");
m=jj.prototype;
m.w=function(a){jj.d.w.call(this,a);a.innerHTML="";a.scrollTop=0;Ac(a,Di);var b=B("pending-content",a);t(this.Pf,function(a){this.Cb(b,a)},this);this.Nm=B("playlists-content",a);t(this.Ch,this.yi,this);this.Qm=B("publishers-content",a);t(this.Ih,this.zi,this);this.al=B("categories-list",a);this.Xi=B("feed-ids",a);this.nl=B("feed-cats",a);W("/admin/_categories",p(function(a){a=Y(a.target);t(a,function(a){mj(this,a,"category",Wa(this.tg,a.id)||!this.tg.length)},this)},this));t(lj,function(a){mj(this,a,
"feed_category",Wa(this.ml,a))},this);t(kj,function(a){mj(this,a,"feed_id",this.ol==a)},this);this.resize()};
m.z=function(){jj.d.z.call(this);this.W=B("input",this.b());var a=new df(this.W),b=new ji(this.W);this.Ra=B("tabs",this.b());this.K="pending";var c=l;P(P(P(P(this.i(),window,"resize",Ba(L,p(this.resize,this))),a,"key",p(function(a){"13"==a.keyCode&&nj(this,this.W.value)},this)),b,"after_paste",p(function(){nj(this,this.W.value)},this)),this.Ra,"click",p(function(a){a=uc(a.target,"li");this.ec(a)},this));P(this.i(),this.b(),"scroll",p(function(){if(this.jb&&!c&&!this.Kc[this.K]&&("pending"==this.K||
"all"==this.K)&&this.b().scrollTop+C().height>this.b().scrollHeight-this.b().clientTop){c=j;var a=B("spinner",this.b());O(a,j);var b="pending"==this.K?this.Pf:this.og;W("/admin/_media/collection/"+this.jb+"?offset="+b.length+("pending"==this.K?"&pending=1":""),p(function(g){c=l;g=gh(zh(g.target)).medias;g=Sa(g,function(a){return new Xf(a)});bb(b,g);var h=B(this.K+"-content",this.b());t(g,function(a){this.Cb(h,a)},this);this.Kc[this.K]=!g.length;z(a,"finished",!g.length)},this))}},this));this.resize()};
m.resize=function(){$d(this.b(),C().height-40)};
function nj(a,b){var c;c=b.match("(?:(https?|ftp)://+|www\\.)\\w[:;,\\.?\\[\\]\\w/~%&=+#-@!]*");c=c!=k?c[0]:"";a.jb&&c&&(a.W.disabled="disabled",W("admin/_add/collection/"+a.jb,p(function(a){this.W.value="";this.W.disabled="";a=Y(a.target);if("media"==a.type){var b=cg(bg.a(),a.data);Ua(this.Pf,function(a){return a.id==b.id})||(this.Pf.push(b),a=B("pending-content",this.b()),this.Cb(a,b,j),this.ec(cc("li","pending",i)[0]))}else if("playlist"==a.type){var c=a.data;Ua(this.Ch,function(a){return a.id==
c.id})||(this.Ch.push(c),this.yi(c),this.ec(cc("li","playlists",i)[0]))}else if("publisher"==a.type){var h=a.data;h&&!Ua(this.Ih,function(a){return a.id==h.id})&&(this.Ih.push(h),this.zi(h),this.ec(cc("li","publishers",i)[0]))}},a),"POST","url="+c))}
m.ec=function(a){t(this.yb,function(b){z(this.Ra.parentElement,b,y(a,b));this.K=y(a,b)?b:this.K},this);this.jb&&!this.og&&W("/admin/_media/collection/"+this.jb,p(function(a){a=gh(zh(a.target)).medias;this.og=Sa(a,function(a){return new Xf(a)});var c=B("all-content",this.b());t(this.og,function(a){this.Cb(c,a)},this)},this))};
m.yi=function(a){var b=G(Ei,{name:a.name});this.Nm.appendChild(b);var c=B("remove",b);P(this.i(),c,"click",function(){W("admin/_remove/collection/"+this.jb,p(function(){E(b)},this),"POST","pub_id="+a.id)})};m.zi=function(a){var b=G(Gi,{name:a.name||a.id,L:a.picture});this.Qm.appendChild(b);var c=B("remove",b);P(this.i(),c,"click",function(){W("admin/_remove/collection/"+this.jb,p(function(){E(b)},this),"POST","pub_id="+a.id)})};
function mj(a,b,c,d){if("category"==c){var e=G(Fi,{name:b.name,id:b.id});a.al.appendChild(e)}else e=G(Fi,{name:b,id:b}),("feed_id"==c?a.Xi:a.nl).appendChild(e);z(e,"enabled",!!d);var g="category"==c?"cat_id="+b.id:"feed_id"==c?"feed_id="+b:"feed_cat="+b;P(a.i(),e,"click",function(){"feed_id"==c&&t(ic(this.Xi),function(a){x(a,"enabled")});var a=Mb(e,"enabled");W("admin/_edit/collection/"+this.jb,xe(),"POST",g+"&enabled="+a)})}
m.Cb=function(a,b,c){var d=G(Ni,{media:b,kc:ag(b)});c?hc(a,d,0):a.appendChild(d);this.Ea&&(a=this.Gg,c=new Vi(d,i),Xi(a,c));var a=new le(B("repos",d)),e=B("thumb",d),c=B("play",d),g=B("approve",d),h=B("remove",d);a.he=function(a,b){var c=b-24;-50<=c&&50>=c&&Md(e,"background-position-y",50-c+"%")};P(P(P(P(this.i(),a,"end",function(){var a=(e.style[Na("background-position")]||"").split(" ")[1],a=a.substring(0,a.length-1);W("/admin/_posthumb",xe(),"POST","media="+b.id+"&pos="+a)}),c,"click",p(this.Jm,
this,b)),g,"click",p(this.Ai,this,b,j,d)),h,"click",p(this.Ai,this,b,l,d));L(Ba(v,d,"show"))};m.oh=function(a,b){W("/admin/_addprogram",p(function(b){b=gh(zh(b.target));b=new dg(b);a.c(ng,b)},this),"POST","channel="+a.id+"&media="+b.id)};m.Ai=function(a,b,c){var d=a.bl||this.jb;W("admin/_media/collection",p(function(){v(c,"remove");L(function(){E(c)},300);N.a();var b;N.a();b=rc(A("toggle-pending"));pd(0,b-1);Z.a().c("approved",a,d)},this),"POST","col="+d+"&media="+a.id+"&approve="+b)};
m.Jm=function(a){a=eg(a);U.a().c(Kf,a)};function oj(a){R.call(this);this.Tb=a||k;this.Vd=this.Ei=this.Jk=this.Ji=0}s(oj,R);m=oj.prototype;m.R=function(){this.e=G(Ci)};m.w=function(a){oj.d.w.call(this,a);var b=G(Ci,{yj:this.Tb?"Add a collection":"Add a Channel"});a.innerHTML=b.innerHTML};
m.z=function(){oj.d.z.call(this);this.W=B("input",this.b());var a=new df(this.W);this.Wm=B("scrollable",this.b());this.oa=B("admin-channels",this.b());this.gi=B("topics",this.b());this.lf=B("collections",this.b());this.Ii=A("admin-col-list");this.$e=A("admin-list");T.a();this.Tb?(W("/admin/_topicmedias/"+this.Tb,p(function(a){a=Y(a.target);Qb(a,function(a,b){O(this.gi.parentElement,j);if(a&&a.length){var e=G(Ji,{xn:b,Jd:a.length});this.gi.appendChild(e);J(e,"click",p(function(){a=Sa(a,function(a){return new Xf(a)});
(new jj("",a,[],[],[])).h(this.$e);Z.a().c("navigate",this.$e,l,b)},this));Z.a().subscribe("approved",function(b){if(Ua(a,function(a){return a.id==b.id})){var d=B("pending",e),n=rc(d)-1;0>=n?(E(e),Hc(e)):nc(d,n)}},this)}},this);this.Vd&&pd(N.a(),this.Vd);this.Jk=Q(this.gi.parentElement).height;this.resize()},this)),W("/admin/_collections/"+this.Tb,p(function(a){a=Y(a.target);O(this.lf.parentElement,!!a.length);t(a,this.xi,this);this.Vd&&pd(N.a(),this.Vd);this.Ji=Q(this.lf.parentElement).height;this.resize()},
this))):W("/admin/_channels",p(function(a){a=Y(a.target);O(this.oa.parentElement,!!a.length);t(a,this.xc,this);this.Ei=Q(this.oa.parentElement).height;this.resize()},this));P(this.i(),a,"key",p(function(a){"13"==a.keyCode&&this.W.value&&(a=this.W.value,this.W.disabled="disabled",W(this.Tb?"/admin/_collections":"/admin/_channels",p(function(a){a=Y(a.target);this.Tb?(O(this.lf.parentElement,!!a),this.xi(a)):(O(this.oa.parentElement,!!a),this.xc(a));this.W.disabled="";this.W.value=""},this),"POST","name="+
a+(this.Tb?"&cid="+this.Tb:"")))},this))};
m.xc=function(a){var b=new mg(a),c=G(Hi,{T:b});this.oa.appendChild(c);J(c,"click",p(function(a){y(a.target,"on")||y(a.target,"off")?(z(c,"on",y(a.target,"on")),z(c,"off",!y(a.target,"on")),W("/admin/_channel/online/"+b.id,p(function(a){a.target.disabled="";a=Y(a.target);z(c,"on",a.online);z(c,"off",!a.online)},this),"POST","online="+y(a.target,"on"))):y(a.target,"program")?W("/admin/_program",xe(),"POST","channel_id="+b.id):y(a.target,"fetch")?W("/admin/_fetch",function(){alert("Fetch began, but give it some time.")},
"POST","channel_id="+b.id):y(a.target,"remove")&&confirm("Remove "+b.name+"?")?(O(c,l),W("/admin/_channels/"+b.id,function(a){Y(a.target).deleted?E(c):O(c,j)},"DELETE")):((new oj(b.id)).h(this.Ii),Z.a().c("navigate",this.Ii,l,b.name))},this))};
m.xi=function(a){var b=G(Ii,{xg:a});this.Vd+=a.pending;this.lf.appendChild(b);J(b,"click",p(function(c){y(c.target,"remove")&&confirm("Remove "+a.name+"?")?(O(b,l),W("/admin/_collections/"+a.id,function(a){Y(a.target).deleted?E(b):O(b,j)},"DELETE")):y(c.target,"fetch")?W("/admin/_fetch",function(){alert("Fetch began, but give it some time.")},"POST","col_id="+a.id):W("/admin/_media/collection/"+a.id+"?pending=1",p(function(b){var b=gh(zh(b.target)),c=b.medias,c=Sa(c,function(a){return new Xf(a)});
(new jj(a.id,c,b.playlists,b.publishers,b.categories)).h(this.$e);Z.a().c("navigate",this.$e,l,a.name)},this))},this));Z.a().subscribe("approved",function(c,d){if(d==a.id){var e=B("pending",b),g=rc(e)-1;0>=g?(E(b),Hc(b)):nc(e,g)}},this)};m.resize=function(){$d(this.Wm,this.Ei+this.Jk+this.Ji+110)};function pj(a,b){R.call(this);this.wk=!!a;this.ef=!!b;this.value="";this.g=new bj("Add to the conversation.");this.Sa=new Bf("tweet");tf(this.Sa,16,j);this.Za=new Bf("post");tf(this.Za,16,j);var c=X.a().k;this.qf=c.Om;this.hg=c.jk;this.yc=new Bf("add");this.Uf=k;this.Ud={};this.Fa=[];this.Ia=-1;this.yh=this.Ob=k}s(pj,R);var qj=/@(\w+)/;m=pj.prototype;m.R=function(){this.e=G(wi)};
m.z=function(){pj.d.z.call(this);this.g.h(B("comment-textarea",this.b()));var a=this.g;a.Mj=70;a.resize();a=new df(this.g.Vb());this.cl=B("comment-controls",this.b());O(this.cl,this.wk);z(this.b(),"show-controls",this.wk);this.Mb=B("suggestions",this.b());this.Rg=B("highlighter",this.b());this.Tl=B("input-holder",this.b());Re(this,this.Sa);this.Sa.h(B("tweet-toggle",this.b()));W("/_twitter",p(function(a){a=Y(a.target);this.hg=this.hg&&a.auth;this.zn=a.auth_url;sf(this.Sa,this.hg)},this));Re(this,
this.Za);this.Za.h(B("fb-toggle",this.b()));FB.api("/me/permissions",p(function(a){this.qf=this.qf&&!!a.data[0].publish_stream;sf(this.Za,this.qf)},this));Re(this,this.yc);this.yc.h(B("add-comment",this.b()));this.yc.fb(l);P(P(P(P(P(P(this.i(),this.g.b(),"focus",p(function(){this.dispatchEvent("focus")},this)),a,"key",p(function(a){a.stopPropagation();if("13"==a.keyCode){a.preventDefault();if(this.Fa.length&&this.Fa.reverse()[this.Ia]){var c=this.g.A().slice(0,this.g.b().selectionStart),c=c.split(" ").pop(),
d=this.Fa.reverse()[this.Ia];this.Ud[d.id]=d;rj(this,c.match(qj)[0]);this.g.b().focus();O(this.Mb,l);this.Fa=[];this.Ia=-1;c=this.A().length;this.setSelectionRange(c,c)}else this.yc.setActive(this.g.A()),this.fc(a);this.ef&&rj(this)}else"27"==a.keyCode&&this.Fa.length?(O(this.Mb,l),this.Fa=[],c=this.A().length,this.setSelectionRange(c,c),this.Ia=-1,this.Ud={}):("38"==a.keyCode||"40"==a.keyCode)&&this.Fa.length?(a.preventDefault(),c=Array.prototype.slice.call(ic(this.Mb)),c.reverse()[this.Ia]&&x(c[this.Ia],
"selected"),this.Ia="38"==a.keyCode?Math.min(this.Ia+1,this.Fa.length-1):Math.max(this.Ia-1,-1),-1!=this.Ia&&v(c[this.Ia],"selected")):L(p(function(){this.yc.fb(!!this.g.A());var c=this.g.A().slice(0,this.g.b().selectionStart),c=c.split(" ").pop(),d=this.ef&&qj.test(c);O(this.Mb,d);if("8"==a.keyCode)this.Rg.innerHTML.match('<div class="token">.*</div>$');else if(d&&(c=c.match(qj),this.Fa=X.a().search(c[1]),this.Fa.length)){var d=this.Fa,h=c[0];this.Mb.innerHTML="";O(this.Mb,j);t(d.slice(0,3),function(a){var b=
D("div","suggestion",a.name);this.Mb.appendChild(b);P(this.i(),b,"click",p(function(){this.Ud[a.id]=a;rj(this,h);this.g.b().focus();var b=this.A().length;this.setSelectionRange(b,b);O(this.Mb,l);this.Fa=[];this.Ia=-1},this))},this)}this.ef&&rj(this)},this))},this)),this.g,"resize",p(function(a){this.dispatchEvent(a)},this)),this.Za,"action",p(this.rm,this)),this.Sa,"action",p(this.Gm,this)),this.yc,"action",p(this.fc,this));Gg(Hg.a(),this.Sa.b(),"top",{text:"Share on Twitter"});Gg(Hg.a(),this.Za.b(),
"top",{text:"Share on Facebook"});Z.a().subscribe("reply-comment",this.Tm,this);Z.a().subscribe("reply-tweet",this.Um,this);X.a().k.subscribe(gg,function(){sf(this.Sa,j)},this)};function rj(a,b){var c=a.g.A(),d=c,e=c;t(Rb(a.Ud),function(a){var h=b&&0==Fa(b,("@"+a.name).substr(0,b.length))?b:a.name;d=d.replace(RegExp(h,"g"),'<div class="token">'+a.name+"</div> ");this.Rg.innerHTML=d;this.value=e=e.replace(RegExp(h,"g"),"@["+a.id+":"+a.name+"]");b&&this.g.xa(c.replace(h,a.name)+" ")},a)}
m.Tm=function(a,b){this.Ob&&sj(this);this.Uf=b;this.yh=a.id?a.id:a.toString();this.Ob=D("div","token","@"+b.td());this.Tl.appendChild(this.Ob);this.va(j);this.g.b().style.paddingLeft=Q(this.Ob).width+5+"px"};m.Um=function(a){this.Ob&&sj(this);this.Ao=a.id;this.xa((this.A()?this.A()+" ":"")+"@"+a.handle+" ");this.va(j);this.Sa.fb(j);this.va(j);a=this.A().length;this.setSelectionRange(a,a)};function sj(a){a.Uf=k;a.yh=k;E(a.Ob);a.Ob=k;a.g.b().style.paddingLeft=""}
m.setSelectionRange=function(a,b){if(this.g.b().setSelectionRange)this.g.b().focus(),this.g.b().setSelectionRange(a,b);else if(this.g.b().createTextRange){var c=this.g.b().createTextRange();c.collapse(j);c.moveEnd("character",b);c.moveStart("character",a);c.select()}};m.A=function(){this.ef&&Rb(this.Ud).length?rj(this):this.value=this.g.A();return this.value};m.xa=function(a,b,c){sf(this.Za,!!b);sf(this.Sa,!!c);this.g.xa(a);this.value=a;this.yc.fb(!!a)};m.collapse=ba();
m.clear=function(){this.g.xa("");sj(this);this.Ud={};this.Fa=[];this.Rg.innerHTML="";O(this.Mb,l)};m.Bf=function(){return y(this.b(),"focused")};m.va=function(a){a&&this.g.b().focus();return z(this.b(),"focused",a)};
m.fc=function(){this.A()&&(this.dispatchEvent({type:"add",Yk:p(function(a){var b=Y(a.target);if(b.comment){var a=new tj(b.comment),c=b.tweet?new uj(b.tweet):k;if(b=cg(bg.a(),b.comment.media))b.c(Yf,a),c&&b.c("add-tweet",c)}},this),le:af(this.Za),ki:af(this.Sa),text:this.A(),Q:this.yh,Ik:this.Uf&&this.Uf.id}),this.clear())};m.rm=function(){!this.qf&&af(this.Za)&&(O(A("overlay"),j),FB.login(p(function(a){O(A("overlay"),l);this.ll=!!a.authResponse;sf(this.Za,this.ll)},this),{scope:"publish_stream"}))};
m.Gm=function(){if(!this.hg&&af(this.Sa)){sf(this.Sa,l);var a=window.open(this.zn,"Twitter Login","height=300,width=550");a.moveTo(screen.width/2-225,screen.height/2-150);a.focus()}};function tj(a){this.id=a.id;this.j=a.user?Jg(X.a(),a.user):k;this.text=a.text;this.media=a.media?cg(bg.a(),a.media):k;this.time=a.time?ud(a.time+"Z"):new vd;this.lc=jd(this.time.getTime());this.Q=a.parent_id;this.Tf=[];a.replies&&t(a.replies,function(a){a=new tj(a);this.Tf.push(a)},this)}
function vj(a,b,c,d,e,g,h,n){var r=new tj({text:c,parentId:g});r.j=a;r.Q=g||k;W("/_comment",p(function(a){a=Y(a.target);r.id=a.comment.id;n&&n(r)},this),"POST","media_id="+b+"&text="+c+"&tweet="+e+"&facebook="+d+(g?"&parent_id="+g:"")+(h?"&to_user_id="+h:""));return r};function uj(a){this.id=a.id;this.j=a.user&&Jg(X.a(),a.user);this.handle=a.handle;this.L=a.picture;this.text=a.text;this.time=ud(a.time+"Z")};function wj(a,b,c,d){R.call(this);this.f=a;this.Ua=b||[];this.fe={};this.Se=!!c;this.Bb=d||[];this.Re={};this.na=this.bo=0;this.Qc={}}s(wj,R);m=wj.prototype;
m.w=function(a){wj.d.w.call(this,a);a.innerHTML="";a.scrollTop=0;v(this.b(),"ios-scroll");this.D=D("div","loading",D("div","loading-spinner"));this.b().appendChild(this.D);O(this.D,l);this.Uc=D("div","no-comments","Start the conversation.");this.b().appendChild(this.Uc);this.t=D("div","comments tweets");this.b().appendChild(this.t);P(P(this.i(),window,"resize",Ba(L,p(this.resize,this))),this.t,"click",p(this.yg,this));this.Ua.length?(t(this.Ua,function(a){this.Rb(a)},this),this.Ed=Q(this.t).height):
this.Se&&this.Bb.length?(t(this.Bb,function(a){this.fd(a)},this),this.Ed=Q(this.t).height):O(this.D,j);this.Se?(W("/_tweet/"+this.f.id+"?offset="+this.Bb.length,p(function(a){O(this.D,l);a=gh(zh(a.target));a=Sa(a,function(a){a=new uj(a);this.fd(a);return a},this);this.Ed=Q(this.t).height;this.resize()},this)),this.f.subscribe("add-tweet",function(a){this.fd(a,j)},this)):(W("/_comment/"+this.f.id+"?offset="+this.Ua.length,p(function(a){O(this.D,l);a=gh(zh(a.target));a=Sa(a,function(a){a=new tj(a);
this.Rb(a);return a},this);this.Ed=Q(this.t).height;this.resize()},this)),this.f.subscribe(Yf,this.Rb,this),this.f.subscribe(Zf,this.Kh,this));this.resize(41)};
m.fd=function(a,b){this.Re[a.id]=a;O(this.Uc,l);var c=Yi(a.text),c=c.replace(/#(\S+)/g,function(a,b){return'<a target="_blank" href="http://twitter.com/search?q=%23'+b+'">'+a+"</a>"}),c=c.replace(/@(\S+)/g,function(a,b){return'<a target="_blank" href="http://twitter.com/'+b+'">'+a+"</a>"}),c=G(ui,{Pb:a,text:c,timestamp:jd(a.time.getTime())});kd(id.a(),a.time,B("timestamp",c));b?hc(this.t,c,0):this.t.appendChild(c);this.resize();O(lc(this.t),j)};
m.yg=function(a){a=a.target;if(this.Se){var b=vc(a,"tweet");b&&(b=this.Re[b.id.split("-")[1]],y(a,"reply")&&Z.a().c("reply-tweet",b))}else if(b=vc(a,"comment")){var b=b.id.split("-")[1],c=this.fe[b];y(a,"reply")?B("reply-textarea",this.Qc[c.Q?c.Q:c.id]).focus():y(a,"remove")&&this.f.c(Zf,b)}};m.Kh=function(a){var a=A("listcomment-"+a),b=a.nextSibling;for(E(a);b&&y(b,"reply");)b=b.nextSibling,E(b)};
m.Rb=function(a){this.Ua.push(a);O(this.Uc,l);var b=Yi(a.text),b=b.replace(/@\[(\d+):([a-zA-z\s]+)\]/g,function(a,b,e){return'<a href="#user:'+b+'">'+e+"</a>"}),b=G(vi,{prefix:"listcomment",aa:a,text:b,gk:a.j.id==X.a().k.id});kd(id.a(),a.time,B("timestamp",b));a.Q?B("replies",this.Qc[a.Q]).appendChild(b):this.t.appendChild(b);t(a.Tf,function(a){this.Rb(a)},this);a.Q||(this.t.scrollTop=this.t.scrollHeight);a.id&&xj(this,a,b);return b};
function xj(a,b,c){a.fe[b.id]=b;if(!b.Q){a.Qc[b.id]=c;var d=B("reply-textarea",c),c=new df(d);P(a.i(),c,"key",p(function(a){a.stopPropagation();"13"==a.keyCode&&d.value&&(a.preventDefault(),a=vj(X.a().k,this.f.id,d.value,l,l,b.id,b.j.id),this.Rb(a),d.value="")},a))}}m.resize=function(a){this.na=a||this.na;$d(this.b(),C().height-42-this.na-(vc(this.b(),"tabbed")?30:0))};function yj(a,b,c,d){R.call(this);this.f=this.q=a;this.Ua=b||[];this.Bb=c||[];this.Se=!!d;this.ee=new wj(a,this.Ua);this.ii=new wj(a,i,j,this.Bb);this.g=new pj(j,j);this.yb=["comments","tweets"];this.Oe={}}s(yj,R);m=yj.prototype;m.w=function(a){yj.d.w.call(this,a);v(a,"conversation");v(a,"ios-scroll");Ac(a,Li);v(a.firstChild,this.Se?"tweets":"comments")};
m.z=function(){this.Ra=B("tabs",this.b());this.ee.h(B("comments-content",this.b()));this.ii.h(B("tweets-content",this.b()));Pe(this.g,this.b());P(P(P(P(P(P(P(this.i(),this.Ra,"click",p(function(a){a=uc(a.target,"li");this.ec(a)},this)),this.g,"add",p(this.fc,this)),this.g,"resize",p(function(){y(this.b().firstChild,"comments")?this.ee.resize(41):this.ii.resize(41)},this)),window,"click",p(function(a){!vc(a.target,"comment-input")&&!this.g.A()&&(this.g.va(l),this.g.collapse())},this)),B("no-comments",
this.b()),"click",p(this.ck,this)),bc("no-comments",this.b())[1],"click",p(this.ck,this)),window,"click",p(function(a){!vc(a.target,"comment-input")&&!this.g.A()&&(this.g.va(l),this.g.collapse())},this));this.ee.resize(41);this.ii.resize(41)};m.ck=function(a){a.preventDefault();a.stopPropagation();this.g.va(j)};
m.fc=function(a){var b=vj(X.a().k,this.f.id,a.text,a.le,a.ki,a.Q,a.Ik,p(function(a){var b=this.Oe[a.time.getTime()];b.id="infocomment-"+a.id;xj(this.ee,a,b)},this)),c=this.ee.Rb(b);this.Oe[b.time.getTime()]=c;a.le&&!a.Q&&(FB.api("/me/feed","POST",{message:a.text,name:this.f.name,link:this.f.link,picture:this.f.zb,caption:"on XYLO",description:this.f.description},ba()),sf(this.g.Za,l))};m.ec=function(a){t(this.yb,function(b){z(this.Ra.parentElement,b,y(a,b));this.K=y(a,b)?b:this.K},this)};function jd(a){var b=q(),c=Math.floor((b-a)/6E4),b=l;0>c&&(b=j,c*=-1);if(60>c)return zj(c,b,0);c=Math.floor(c/60);if(24>c)return zj(c,b,1);c=new Date(q());c.setHours(0);c.setMinutes(0);c.setSeconds(0);c.setMilliseconds(0);c=Math.ceil((c.getTime()-a)/864E5);b&&(c*=-1);return 14>c?zj(c,b,2):""}
function zj(a,b,c){return!b&&0==c?(b=Ca("{$num} minute ago",{num:a}),c=Ca("{$num} minutes ago",{num:a}),1==a?b:c):b&&0==c?(b=Ca("in {$num} minute",{num:a}),c=Ca("in {$num} minutes",{num:a}),1==a?b:c):!b&&1==c?(b=Ca("{$num} hour ago",{num:a}),c=Ca("{$num} hours ago",{num:a}),1==a?b:c):b&&1==c?(b=Ca("in {$num} hour",{num:a}),c=Ca("in {$num} hours",{num:a}),1==a?b:c):!b&&2==c?(b=Ca("{$num} day ago",{num:a}),c=Ca("{$num} days ago",{num:a}),1==a?b:c):b&&2==c?(b=Ca("in {$num} day",{num:a}),c=Ca("in {$num} days",
{num:a}),1==a?b:c):""};function Aj(a,b,c,d,e){R.call(this);t(a.qh,function(a){var b=a.l();b&&b.media.id==this.id?(this.Mm=a,t(a.ed,function(a){a.dd||(this.ic[a.j.id]=a.j)})):this.ic={}},a);this.f=this.q=a;this.Ef=c||k;this.Ij=d||k;this.Ml=l;this.Yi=!b;this.we=EMBED||!!e;this.Ha=[];this.Xe={};this.Ua=[];this.fe={};this.Qc={};this.Oe={};this.Bb=[];this.Re={};this.g=new pj(j,j);this.oc=new Bf("Star");tf(this.oc,16,j);this.Kg=new Bf("Facebook");this.li=new Bf("Twitter");this.Lb=new Bf("Play");this.Kd=new Bf("Plus");tf(this.Kd,
16,j);this.na=0}s(Aj,R);m=Aj.prototype;m.R=function(){this.e=G(si,{media:this.f})};m.w=function(a){Aj.d.w.call(this,a);var b=G(si,{media:this.f,description:this.f.description?Yi(this.f.description):"",kc:ag(this.f),Wl:this.Ef?this.Ef.id:k});a.innerHTML=b.innerHTML};
m.z=function(){Aj.d.z.call(this);this.Ye=B("viewers",this.b());var a=B("picture",this.b()),b=B("scrollable",this.b()),c=B("publisher",this.b()),d=B("title",this.b()),e=B("links",this.b());this.D=B("loading",this.b());var g=a.firstChild;this.Bg=B("info-contents",this.b());this.We=B("user-poll",this.b());this.Ko=B("tweet-holder",this.b());this.Ab=B("tweets",this.b());this.Hc=B("dot-nav",this.b());this.t=B("comments",this.b());this.Uc=B("no-comments",this.b());Pe(this.g,this.b());this.oc.h(B("star",
this.b()));sf(this.oc,jg(X.a().k,this.f));this.Kg.h(B("facebook",this.b()));this.li.h(B("twitter",this.b()));this.Lb.h(B("play",this.b()));this.Kd.h(B("plus",this.b()));this.ji=new fd(5E3);this.Oo=B("watch-with",this.b());z(this.b(),"mini",this.we);!this.Yi||this.f.Zi?Bj(this,l,this.f.description,this.f.ag,this.f.Lk,this.f.Fb):this.Yi&&W("/_info/"+this.f.id,p(function(a){a=gh(zh(a.target));Bj(this,j,a.description,a.seen,a.tweets,a.comments)},this));if("youtubeUCAMPco9PqjBbI_MLsDOO4Jw"==this.f.ma.id||
"youtubeAMPco9PqjBbI_MLsDOO4Jw"==this.f.ma.id){var h=B("status",this.We),n=B("poll-options",this.We);nc(h,"WHO'S YOUR FAVORITE FINALIST?");h=G(Oi,{name:"Kree Harrison",zh:"31%"});n.appendChild(h);h=G(Oi,{name:"Angie Miller",zh:"52%"});n.appendChild(h);h=G(Oi,{name:"Candice Glover",zh:"17%"});n.appendChild(h);O(this.We,j);P(this.i(),n,"click",p(function(a){if(!y(this.We,"voted")){v(this.We,"voted");var a=vc(a.target,"option"),b=rc(B("name",a));v(a,"selected");this.g.xa("@americanidol I just voted for "+
b,j,j);this.g.va(j);t(ic(n),function(a){var b=rc(B("percent-number",a));B("percent",a).style.width=b},this)}},this))}P(P(P(P(P(P(P(P(P(P(P(P(P(P(P(P(P(P(P(P(P(P(P(this.i(),window,"resize",Ba(L,p(this.resize,this))),c,"click",p(function(){Z.a().c("media-list",this.f.ma.name,i,"/admin/_media/publisher/"+this.f.ma.id,this.f.ma.L,this.f.ma.description,this.f.ma.link,"/_publisher/"+this.f.ma.id)},this)),this.oc,"action",p(function(){bg.a().c("star",this.f,af(this.oc));W("/_star",i,"POST","media_id="+this.f.id+
(!af(this.oc)?"&delete=1":""))},this)),this.Kg,"action",p(this.qm,this)),this.li,"action",p(this.Fm,this)),this.Lb,"action",p(this.vm,this)),this.Kd,"action",p(this.ym,this)),B("local",this.b()),"click",p(function(){O(B("link-select",this.b()),j);B("link-input",this.b()).select()},this)),this.g,"add",p(this.fc,this)),this.Uc,"click",p(function(a){a.preventDefault();a.stopPropagation();this.g.va(j)},this)),B("conv-link",this.b()),"click",p(function(a){a.preventDefault();a.stopPropagation();Z.a().c("conversation",
this.f,this.Ua,this.Bb)},this)),B("tweets-link",this.b()),"click",p(function(a){a.preventDefault();a.stopPropagation();Z.a().c("conversation",this.f,this.Ua,this.Bb,j)},this)),this.g,"focus",p(function(){this.resize(0,j)},this)),this.g,"resize",p(function(a){this.resize(a.target.Ka-41)},this)),this.Hc,"click",p(function(a){y(a.target,"dot")&&(Cj(this,a.target),this.ji.stop())},this)),this.ji,hd,p(function(){var a=this.ge&&jc(this.ge)||B("dot",this.b());L(p(function(){Cj(this,a)},this))},this)),window,
"click",p(function(a){!vc(a.target,"comment-input")&&!this.g.A()&&(this.g.va(l),this.g.collapse()&&this.resize(0))},this)),g,"load",function(){O(g,j);L(function(){Q(g).height<Q(a).height+50&&v(g,"fix-height");Q(g).width>2*Q(a).width?v(g,"pan-left"):Q(g).height>2*Q(a).height&&v(g,"pan-top");g.style.marginTop=-Q(g).height/2+"px";g.style.marginLeft=-Q(g).width/2+"px";v(g,"show")})}),b,"scroll",p(function(){var h=((this.we?100:120)-b.scrollTop)/100;de(c,Math.min(1,Math.max(h,0)));de(d,Math.min(1,Math.max(h,
0)));de(e,Math.min(1,Math.max(h,0)));de(g,Math.min(0.5,Math.max(h,0.1)));z(a,"scrolled",10<b.scrollTop)},this)),this.t,"scroll",p(this.Oh,this)),this.t,"click",p(this.yg,this)),this.Ab,"click",p(this.yn,this)),B("desc-link",this.b()),"click",p(function(){var c=Mb(a,"scrolled");(new He(b,[b.scrollLeft,b.scrollTop],[b.scrollLeft,c?this.we?70:170:0],300)).play()},this));this.Ef&&P(this.i(),B("prev-link",this.b()),"click",p(function(){Z.a().c(Eg,this.Ef,j,i,this.g.A())},this));this.Ij&&this.g.xa(this.Ij);
Gg(Hg.a(),this.Kd.b(),"left",{text:"Add to Queue"});Gg(Hg.a(),this.Kg.b(),"left",{text:"Post to Facebook"});Gg(Hg.a(),this.li.b(),"left",{text:"Tweet"});Gg(Hg.a(),this.oc.b(),"left",{text:"Save"});Gg(Hg.a(),B("eye-icon",this.b()),"left",{text:"Seen by"});Gg(Hg.a(),B("friends-icon",this.b()),"left",{text:"Visible by only your Facebook friends"});this.f.subscribe(Yf,function(a){Dj(this,a,j)},this);this.f.subscribe(Zf,this.Kh,this);this.f.subscribe("add-tweet",function(a){this.fd(a,j)},this);this.f.subscribe($f,
function(a,b,c){Ej(this,a,!c)},this);X.a().k.subscribe("set-starred",function(){sf(this.oc,jg(X.a().k,this.f))},this);Pf().subscribe(og,function(a,b){sf(this.Kd,b)},this)};
function Bj(a,b,c,d,e,g){c?(a.f.description=c,B("description",a.b()).innerHTML=Yi(c),O(B("scrollable",a.b()),j)):(O(B("desc-link",a.b()),l),O(B("scrollable",a.b()),l));a.Ha=Sa(d,function(a){a=b?Jg(X.a(),a):a;a.id!=X.a().k.id&&(O(this.Ye,j),this.Ml=j,Ej(this,a,l));return a},a);Qb(a.f.ic,function(a){Ej(this,a,j)},a);a.Bb=Sa(e,function(a){a=b?new uj(a):a;this.fd(a);this.ge=this.Hc.firstChild;v(this.ge,"selected");return a},a);e.length&&a.ji.start();a.t&&O(a.t.parentElement,j);O(a.Uc,!g.length);g=Sa(g,
function(a){a=b?new tj(a):a;a.Q||Dj(this,a);return a},a);O(a.D,l);a.resize();b&&(a.f.Lk=a.Bb,a.f.Fb=g,a.f.ag=a.Ha,a.f.Zi=j)}m.Xb=function(){return this.g.Bf()||!!this.g.Ob||!!this.g.A()};function Cj(a,b){if(b){t(ic(a.Hc),function(a){return x(a,"selected")});a.ge=b;v(a.ge,"selected");var c=Va(ic(a.Hc),function(a){return a==b});(new He(a.Ab,[a.Ab.scrollLeft,a.Ab.scrollTop],[320*c,a.Ab.scrollTop],200)).play();a.resize()}}
m.fc=function(a){var b=vj(X.a().k,this.f.id,a.text,a.le,a.ki,a.Q,a.Ik,p(function(a){var b=this.Oe[a.time.getTime()];b.id="infocomment-"+a.id;Fj(this,a,b)},this)),c=Dj(this,b);this.Oe[b.time.getTime()]=c;a.le&&!a.Q&&FB.api("/me/feed","POST",{message:a.text,name:this.f.name,link:this.f.link,picture:this.f.zb,caption:"on XYLO",description:this.f.description},ba());lg.a().aa(this.f.id,a.le,a.ki)};
m.fd=function(a,b){this.Re[a.id]=a;var c=Yi(a.text),c=c.replace(/#(\S+)/g,function(a,b){return'<a target="_blank" href="http://twitter.com/search?q=%23'+b+'">'+a+"</a>"}),c=c.replace(/@(\S+)/g,function(a,b){return'<a target="_blank" href="http://twitter.com/'+b+'">'+a+"</a>"}),c=G(ui,{Pb:a,text:c,timestamp:jd(a.time.getTime()),prefix:"infotweet"}),d=D("div","dot");kd(id.a(),a.time,B("timestamp",c));b?(hc(this.Ab,c,0),hc(this.Hc,d,0),10<ic(this.Ab).length&&(E(this.Ab.lastChild),E(this.Hc.lastChild),
Cj(this,d))):(this.Ab.appendChild(c),this.Hc.appendChild(d));this.resize();O(lc(this.Ab),j)};
function Dj(a,b,c){a.Ua.push(b);O(a.Uc,l);var d=Yi(b.text),d=d.replace(/@\[(\d+):([a-zA-z\s]+)\]/g,function(a,b,c){return'<a href="#user:'+b+'">'+c+"</a>"}),d=G(vi,{prefix:"infocomment",aa:b,text:d,gk:b.j.id==X.a().k.id});kd(id.a(),b.time,B("timestamp",d));b.Q?B("replies",a.Qc[b.Q]).appendChild(d):a.t.appendChild(d);t(b.Tf,function(a){Dj(this,a,c)},a);!b.Q&&c&&(a.t.scrollTop=a.t.scrollHeight,a.Bg.firstChild.scrollTop=a.Bg.firstChild.scrollHeight);b.id&&Fj(a,b,d);return d}
function Fj(a,b,c){a.fe[b.id]=b;if(!b.Q){a.Qc[b.id]=c;var d=B("reply-textarea",c),c=new df(d);P(a.i(),c,"key",p(function(a){a.stopPropagation();"13"==a.keyCode&&d.value&&(a.preventDefault(),a=vj(X.a().k,this.f.id,d.value,l,l,b.id,b.j.id),Dj(this,a),d.value="")},a))}}
function Ej(a,b,c){if(!c&&a.Xe[b.id])x(a.Xe[b.id],"online");else if(b.id!=X.a().k.id){if(!a.Xe[b.id]){var d=G(ti,{j:b});a.Xe[b.id]=d;hc(a.Ye,d,1);P(a.i(),d,"click",function(){Z.a().c(Fg,b)});Gg(Hg.a(),d,"top",{text:b.td()+(y(d,"online")?" is watching":" saw this")})}O(a.Ye,j);z(a.Xe[b.id],"online",c)}}m.yn=function(a){var a=a.target,b=vc(a,"tweet");b&&(b=this.Re[b.id.split("-")[1]],y(a,"reply")&&Z.a().c("reply-tweet",b))};
m.yg=function(a){var a=a.target,b=vc(a,"comment");if(b){var b=b.id.split("-")[1],c=this.fe[b];y(a,"reply")?B("reply-textarea",this.Qc[c.Q?c.Q:c.id]).focus():y(a,"remove")&&this.f.c(Zf,b)}};m.Kh=function(a){var b=A("infocomment-"+a),c=b.nextSibling;E(b);for(Ya(this.Ua,function(b){return b.id==a});c&&y(c,"reply");)c=c.nextSibling,E(c)};
m.Oh=function(){z(this.t.parentElement,"top-grad",!!this.t.scrollTop);var a=this.t.style.maxHeight,b=C().height,a=a.substring(0,a.length-2),c=Q(this.t).height;z(this.t.parentElement,"bottom-grad",this.t.scrollTop<this.t.scrollHeight-a-5&&c>=a&&640<b)};
m.resize=function(a,b){this.na=a!=i?a:this.na;var c=C().height;$d(this.Bg,c-(this.we?183:283)-(this.Ha.length?38:0));640<c&&this.t&&this.t.parentElement?(Md(this.t,"max-height",c-Td(this.t.parentElement).y-(this.we?213:313)-(this.Ha.length?38:0)-this.na+"px"),this.Oh()):640>c&&(Md(this.t,"max-height",""),this.Oh());b&&L(p(function(){(new He(this.t,[this.t.scrollLeft,this.t.scrollTop],[this.t.scrollLeft,this.t.scrollHeight],400)).play()},this),0)};
m.qm=function(){O(A("overlay"),j);FB.ui({method:"feed",name:this.f.name,link:this.f.link,L:this.f.zb,caption:"on XYLO",description:this.f.description},function(){O(A("overlay"),l)});Gj(lg.a(),this.f.id,j,l)};m.Fm=function(){var a=window.open("https://twitter.com/share?url="+this.f.link+"&text=I'm watching "+this.f.name+" "+this.f.link,"Tweet","height=320,width=550");a.moveTo(screen.width/2-225,screen.height/2-150);a.focus();Gj(lg.a(),this.f.id,l,j)};m.vm=function(){var a=eg(this.q);U.a().c(Kf,a)};
m.ym=function(){Pf().c(og,this.q,af(this.Kd))};function Hj(a,b,c,d,e,g){R.call(this);this.Ea=Df();this.Oj=a||k;this.Ue=b||k;this.bc={};this.ci=c||k;this.od=d||k;this.Pi=g||k;this.am=e||k;this.Gg=this.Ea?new Wi:k;this.Ed=this.wj=0}s(Hj,R);
Hj.prototype.w=function(a){Hj.d.w.call(this,a);a.innerHTML="";a.scrollTop=0;v(this.b(),"ios-scroll");(this.od||this.ci)&&Ij(this);!this.od&&this.Pi&&W(this.Pi,p(function(a){a=Y(a.target);a.description&&this.ve?(B("description",this.ve).innerHTML=Yi(a.description),this.wj=Q(this.ve).height,this.resize()):a.description&&Ij(this)},this));this.D=D("div","loading",D("div","loading-spinner"));this.b().appendChild(this.D);O(this.D,l);y(this.b(),"starred")&&(this.Hd=D("div","no-comments","Favorities will appear here."),
this.b().appendChild(this.Hd));this.Tc=D("div","medias");this.b().appendChild(this.Tc);P(this.i(),window,"resize",Ba(L,p(this.resize,this)));this.Ue?(O(this.D,j),W(this.Ue,p(function(a){O(this.D,l);a=gh(zh(a.target));a=Sa(a,function(a){return new Xf(a)});t(a,this.mg,this);this.Ed=Q(this.Tc).height;this.resize()},this))):this.Oj&&(t(this.Oj,this.mg,this),this.Ed=Q(this.Tc).height,this.resize())};
Hj.prototype.mg=function(a){this.Hd&&O(this.Hd,l);var b=G(Mi,{media:a}),c=B("list-play",b),d=B("list-plus",b);this.Tc.appendChild(b);if(this.Ea){var e=this.Gg,g=new Vi(b,i);Xi(e,g)}P(P(P(this.i(),b,"click",p(function(){Z.a().c(Eg,a)},this)),c,"click",p(function(b){b.preventDefault();b.stopPropagation();b=eg(a);U.a().c(Kf,b)},this)),d,"click",function(b){b.preventDefault();b.stopPropagation();Pf().c(og,a,j)});this.bc[a.id]=b};
Hj.prototype.resize=function(){$d(this.b(),C().height-40-(vc(this.b(),"tabbed")?30:0))};function Ij(a){a.ve=G(Ai,{zb:a.ci,description:a.od?Yi(a.od):"",link:a.am});a.b().appendChild(a.ve);a.wj=Q(a.ve).height;a.resize()}Hj.prototype.oh=function(a,b){W("/admin/_addprogram",p(function(b){b=gh(zh(b.target));b=new dg(b);a.c(ng,b)},this),"POST","channel="+a.id+"&media="+b.id)};function Jj(a){this.id=a.id;this.P=Jg(X.a(),a.from_user);this.vn=Jg(X.a(),a.to_user);this.text=a.text;this.vb=a.read;this.lc=(this.time=a.time?ud(a.time+"Z"):k)?jd(this.time.getTime()):k}Jj.prototype.cg=function(){W("/_message",xe(),"POST","id="+this.id+"&read=1");this.vb=j;X.a().k.c("read-message",this.P.id)};function Kj(a){return'<div class="message'+(a.pl?" flip":"")+'"><a href="#user:'+H(a.message.P.id)+'"><div class="picture" style="background:'+H(a.message.P.color)+'"><img src="'+H(a.message.P.L)+'"/></div></a><div class="body"><a class="user" href="#user:'+H(a.message.P.id)+'">'+H(a.message.P.name)+'</a>  <div class="texts"><div class="text">'+H(a.message.text)+'<div class="timestamp">'+H(a.message.lc)+"</div></div></div></div></div>"}
function Lj(a){return'<div class="text">'+H(a.message.text)+'<div class="timestamp">'+H(a.message.lc)+"</div></div>"};function Mj(a,b){R.call(this);this.Ta=a||k;this.ub=b||k;this.ih={};this.g=new pj(l);this.na=0;this.qb=this.Ta.id==X.a().k.id}s(Mj,R);
Mj.prototype.w=function(a){Mj.d.w.call(this,a);a.innerHTML="";a.scrollTop=0;this.dc=D("div","messages");this.b().appendChild(this.dc);z(this.dc,"inbox",this.qb);this.D=D("div","spinner");this.dc.appendChild(this.D);O(this.D,l);this.Kf=D("div","no-comments","Start a private conversation.");this.dc.appendChild(this.Kf);this.Jb=D("div","no-comments","Load previous messages");this.dc.appendChild(this.Jb);O(this.Jb,!this.qb&&10<=this.ub.length);O(this.Kf,l);this.qb?(this.ub=this.ub.reverse(),X.a().k.subscribe("read-message",
function(a){if((a=this.ih[a])&&y(a,"unread"))x(a,"unread"),Z.a().c("new-messages",-1)},this)):(Pe(this.g,this.b()),P(P(P(P(P(this.i(),window,"click",p(function(a){!vc(a.target,"comment-input")&&!this.g.A()&&(this.g.va(l),this.g.collapse()&&this.resize(0))},this)),this.Kf,"click",p(function(a){a.preventDefault();a.stopPropagation();this.g.va(j)},this)),this.Jb,"click",p(this.cm,this)),this.g,"add",p(this.fc,this)),window,"resize",Ba(L,p(this.resize,this))));Qa(this.ub,function(a){Nj(this,a)},this);
X.a().subscribe("new-message",function(a){if(a.P.id==this.Ta.id||a.vn.id==this.Ta.id){if(this.qb){var c=j,d=this.ih[a.P.id];d&&(c=!y(d,"unread"),E(d));c&&Z.a().c("new-messages",1)}Nj(this,a,this.qb);this.resize()}},this);this.resize()};
Mj.prototype.cm=function(){this.Jb&&O(this.Jb,l);O(this.D,j);W("/_message/"+this.Ta.id+"?offset="+this.ub.length,p(function(a){a=Y(a.target);if(a.length){this.Ff=k;var b=D("div","separator");hc(this.dc,b,3)}O(this.D,l);this.Jb&&O(this.Jb,!!a.length);Qa(a,function(a){a=new Jj(a);this.ub.push(a);Nj(this,a,j);return a},this);a.length&&(this.b().scrollTop=0,this.Ff=k,this.b().scrollTop=b.offsetHeight)},this))};
function Nj(a,b,c){O(a.Kf,l);a.Jb&&O(a.Jb,!a.qb&&10<=a.ub.length);var d;if(!a.qb&&a.Ff&&a.Ff.P.id==b.P.id)d=G(Lj,{message:b}),B("texts",a.Xl).appendChild(d),d=B("timestamp",d);else{var e=G(Kj,{message:b,pl:b.P.id==X.a().k.id});a.Ff=b;a.Xl=e;c?hc(a.dc,e,3):a.dc.appendChild(e);d=B("timestamp",e);z(e,"unread",!b.vb);a.qb&&(a.ih[b.P.id]=e,P(a.i(),e,"click",p(function(){b.vb||(b.cg(),x(e,"unread"),Z.a().c("new-messages",-1));Z.a().c(Fg,b.P)},a)))}kd(id.a(),b.time,d);c||(a.b().scrollTop=a.b().scrollHeight);
!a.qb&&(!b.vb&&Z.a().Fg==b.P.id)&&b.cg()}Mj.prototype.fc=function(a){var b=new Jj({from_user:X.a().k,to_user:Jg(X.a(),this.Ta),text:a.text});b.time=new vd;b.lc=jd(b.time.getTime());Nj(this,b);W("/_message",a.Yk,"POST","from_id="+X.a().k.id+"&to_id="+this.Ta.id+"&text="+a.text)};Mj.prototype.resize=function(a){this.qb?this.dispatchEvent("resize"):(this.na=a||this.na,$d(this.b(),C().height-82-this.na-(vc(this.b(),"tabbed")?30:0)))};function Oj(a){this.id=a.id;this.j=Jg(X.a(),a.user);this.type=a.type;this.aa=new tj(a.comment);this.vb=a.read;this.lc=(this.time=a.time?ud(a.time+"Z"):k)?jd(this.time.getTime()):k}Oj.prototype.cg=function(){W("/_notification",xe(),"POST","id="+this.id+"&read=1");this.vb=j};function Pj(a){return'<div class="notification"><a href="#user:'+H(a.P.id)+'"><div class="picture" style="background:'+H(a.P.color)+'"><img src="'+H(a.P.L)+'"/></div></a><div class="body"><div class="type"><a class="user" href="#user:'+H(a.P.id)+'">'+H(a.P.name)+"</a> "+("reply"==a.mh.type?"replied to your comment":"")+("mention"==a.mh.type?"mentioned you in a comment":"")+'</div><div class="texts"><div class="text">'+H(a.text)+'<div class="timestamp">'+H(a.mh.lc)+"</div></div></div></div></div>"}
;function Qj(a){R.call(this);this.ye=a;this.zo={};this.na=0}s(Qj,R);
Qj.prototype.w=function(a){Qj.d.w.call(this,a);a.innerHTML="";a.scrollTop=0;this.xe=D("div","notifications");this.b().appendChild(this.xe);this.D=D("div","spinner");this.xe.appendChild(this.D);O(this.D,l);this.lh=D("div","no-comments","No Notifications");this.xe.appendChild(this.lh);O(this.lh,!this.ye.length);t(this.ye,function(a){Rj(this,a)},this);this.dispatchEvent("resize");X.a().subscribe("new-notification",function(a){Rj(this,a,j);Z.a().c("new-messages",1);this.dispatchEvent("resize")},this)};
function Rj(a,b,c){O(a.lh,l);var d;d=b.aa.text.replace(/@\[(\d+):([a-zA-z\s]+)\]/g,function(a,b,c){return c});var e=G(Pj,{mh:b,text:d,P:b.aa.j});c?hc(a.xe,e,2):a.xe.appendChild(e);d=B("timestamp",e);z(e,"unread",!b.vb);P(a.i(),e,"click",p(function(){b.vb||(b.cg(),x(e,"unread"),Z.a().c("new-messages",-1));Z.a().c(Eg,b.aa.media)},a));kd(id.a(),b.time,d);c||(a.b().scrollTop=a.b().scrollHeight)};function Sj(a){return'<div class="user'+(a.media?" media":"")+'"><div class="name">'+H(a.j.name)+'</div><div class="picture" style="background:'+H(a.j.color)+'"><img src="'+H(a.j.L)+'"/></div>'+(a.timestamp?'<div class="timestamp">'+H(a.timestamp)+"</div>":"")+(a.media?'<div class="media"><div class="watched">LAST WATCHED </div><div class="watching">NOW WATCHING </div><a class="media-link">'+H(a.media.name)+"</a></div>":"")+"</div>"};function Tj(a,b){R.call(this);this.Xd=a||k;this.Ok={};this.Vc=[];this.Id=[];this.Md=[];this.mc=!!b;this.na=0}s(Tj,R);
Tj.prototype.w=function(a){Tj.d.w.call(this,a);a.innerHTML="";a.scrollTop=0;v(a,"friendlist");v(a,"ios-scroll");this.mc||(a=D("div","label show-all",D("a",{href:"#friendlist:1"},"ALL FRIENDS >")),this.b().appendChild(a));this.Mf=D("div","label online-friends-label",this.mc?"ONLINE FRIENDS":D("a",{href:"#friendlist:1"},"ONLINE FRIENDS"));O(this.Mf,l);this.b().appendChild(this.Mf);this.th=D("div","online-friends");this.b().appendChild(this.th);this.Ee=D("div","label",this.mc?"RECENTLY ONLINE":D("a",
{href:"#friendlist:1"},"RECENTLY ONLINE"));O(this.Ee,l);this.b().appendChild(this.Ee);this.Sf=D("div","recent-friends");this.b().appendChild(this.Sf);this.mc&&(this.Lf=D("div","label","OFFLINE FRIENDS"),O(this.Lf,l),this.b().appendChild(this.Lf),this.nh=D("div","offline-friends"),this.b().appendChild(this.nh),W("/_friends?offline=1",p(function(a){a=Y(a.target);this.Id=Sa(a,function(a){a=Jg(X.a(),a);Uj(this,a,j);return a})},this)),this.mc&&this.resize(),P(this.i(),window,"resize",p(function(){this.mc&&
L(p(function(){this.resize()},this))},this)));if(this.Xd)Oa.sort.call(this.Xd,function(a,b){return a.G&&!b.G?1:!a.G&&b.G?-1:!a.G&&!b.G?0:a.G.getTime()<b.G.getTime()?1:-1}||eb),t(this.Xd,function(a){Uj(this,a)},this);else{var a=X.a(),b=p(function(a){this.Xd=a;Oa.sort.call(this.Xd,function(a,b){return a.G&&!b.G?1:!a.G&&b.G?-1:!a.G&&!b.G?0:a.G.getTime()<b.G.getTime()?1:-1}||eb);t(this.Xd,function(a){Uj(this,a)},this)},this);a.dj?b&&b(a.Ng):W("/_friends",p(function(a){a=Y(a.target);this.Ng=Sa(a,function(a){return Jg(this,
a)},this);this.dj=j;b&&b(this.Ng)},a))}X.a().subscribe(Ig,this.An,this)};
function Uj(a,b,c){var d=l,e=G(Sj,{j:b,timestamp:b.G?jd(b.G.getTime()):k,media:b.lb});b.G&&kd(id.a(),b.G,B("timestamp",e));b.bb&&!c?(O(a.Mf,j),v(e,"online"),t(a.Vc,function(a,c){a.td()>b.td()&&(hc(this.th,e,c),cb(this.Vc,c,0,b),d=j)},a),d||(a.th.appendChild(e),a.Vc.push(b))):b.G&&!c&&5>a.Md.length?(O(a.Ee,j),t(a.Md,function(a,c){a.G&&(b.G&&a.G.getTime()<b.G.getTime())&&(hc(this.Sf,e,c),cb(this.Md,c,0,b),d=j)},a),d||(a.Sf.appendChild(e),a.Md.push(b))):a.mc&&(O(a.Lf,j),t(a.Id,function(a,c){a.G&&(b.G&&
a.G.getTime()<b.G.getTime())&&(hc(this.nh,e,c),cb(this.Id,c,0,b),d=j)},a),d||(a.nh.appendChild(e),a.Id.push(b)));a.mc||(O(a.Ee,!a.Vc.length),O(a.Sf,!a.Vc.length));a.Ok[b.id]=e;c=B("media-link",e);P(a.i(),e,"click",p(function(){Z.a().c(Fg,b)},a));c&&P(a.i(),c,"click",p(function(a){a.stopPropagation();a.preventDefault();Z.a().c(Eg,b.lb)},a))}
Tj.prototype.An=function(a){var b=this.Ok[a.id];b&&(E(b),Ya(this.Id,function(b){return b.id==a.id})&&O(this.Lf,!!this.Id.length),Ya(this.Vc,function(b){return b.id==a.id})&&O(this.Mf,!!this.Vc.length),Ya(this.Md,function(b){return b.id==a.id})&&O(this.Ee,!!this.Md.length));Uj(this,a)};Tj.prototype.resize=function(a){this.na=a||this.na;$d(this.b(),C().height-42-this.na-(vc(this.b(),"tabbed")?30:0))};function Vj(a,b){R.call(this);this.Uk=a;this.Wd=b||k;this.Z=0;this.xk=!b;this.Kc=l;this.$i={};this.ff={};this.Dd={};this.Rc={};this.pi={};this.lk={};this.wi=[]}s(Vj,R);
Vj.prototype.w=function(a){Vj.d.w.call(this,a);a.innerHTML="";a.scrollTop=0;v(a,"stream");v(a,"ios-scroll");this.xk&&(this.cj=D("div","friendlist"),this.b().appendChild(this.cj),a=D("div","label","ACTIVITY"),this.b().appendChild(a));this.be=D("div","activities");this.b().appendChild(this.be);this.D=D("div","spinner");this.b().appendChild(this.D);O(this.D,l);this.Hd=D("div","no-comments",this.Wd?"Your activity will appear here.":"Friends' activity will appear here.");this.b().appendChild(this.Hd);
Wj(this,this.Uk);this.xk&&(this.Mg=new Tj(i,l),this.Mg.h(this.cj));X.a().subscribe("new-activity",function(a){(this.Wd==a.user.id||!this.Wd&&a.user.id!=X.a().k.id)&&Xj(this,a,i,i,j)},this);P(P(this.i(),this.b(),"scroll",p(function(){!this.Kc&&this.b().scrollTop+C().height>this.b().scrollHeight-60&&Yj(this)},this)),window,"resize",Ba(L,p(this.resize,this)));this.resize()};
function Yj(a){O(a.D,j);W("/_activity"+(a.Wd?"/"+a.Wd:"")+"?offset="+a.Z,p(function(a){this.$i[String(a.target.te)]||(this.$i[String(a.target.te)]=j,a=Y(a.target).activities,this.Kc=!a.length,z(this.D,"finished",this.Kc),O(this.D,this.Kc),Wj(this,a))},a))}
function Wj(a,b){a.ff=[];a.Dd=[];a.Rc=[];t(b,function(a){this.Z++;switch(a.type){case "session":var a=a.session,b=Wb(this.ff,a.channel_id,[]);b.push(a);this.ff[a.channel_id]=b;break;case "liked":this.Dd[a.media.id]||(b=Wb(this.Rc,a.media.id,[]),b.push(a),this.Rc[a.media.id]=b,b=Wb(this.pi,a.user.id,[]),b.push(a),this.pi[a.user.id]=b);break;case "comment":a=a.comment,b=Wb(this.Dd,a.media.id,[]),b.push(a),this.Dd[a.media.id]=b,this.Rc[a.media.id]&&Ub(this.Rc,a.media.id)}},a);Qb(a.ff,function(a){Xj(this,
i,a,"session")},a);Qb(a.Dd,function(a){Xj(this,i,a,"comment")},a);Qb(a.Rc,function(a){1<a.length&&Xj(this,i,a,"liked")},a);Qb(a.pi,function(a){Xj(this,i,a,"liked")},a)}
function Xj(a,b,c,d,e){O(a.Hd,l);var b=b||k,c=c||k,g=b?b.type:d,h=[],n=b?[Jg(X.a(),b.user)]:[],r=b?ud(b.time+"Z"):k;c&&t(c,function(a){Ua(n,function(b){return b.id==a.user.id})||n.push(Jg(X.a(),a.user));var b=ud((a.time||a.tune_in)+"Z");r=r&&r.getTime()>b.getTime()?r:b;"session"==g?t(a.media,function(a){!this.Dd[a.id]&&(!this.Rc[a.id]&&!Ua(h,function(b){return b.id==a.id}))&&h.push(a)},this):"liked"==g&&!this.lk[a.media.id]&&(h.push(a.media),this.lk[a.media.id]=j)},a);switch(g){case "session":if(!a.Wd&&
2>n.length)return;var d=b?b.session:c[0],w=T.a().get(d.channel_id),h=b?b.session.media:h;3<h.length&&(h=h.slice(0,3));b=G(xi,{M:n,T:w,time:jd(r.getTime()),Kk:!!d.tune_out});break;case "comment":var h=b?[b.comment.media]:[cg(bg.a(),c[0].media)],F=b?[new tj(b.comment)]:[];c&&t(c,function(a){a=new tj(a);a.text=Yi(a.text);a.text=a.text.replace(/@\[(\d+):([a-zA-z\s]+)\]/g,function(a,b,c){return'<a href="#user:'+b+'">'+c+"</a>"});F.push(a)});b=G(yi,{Fb:F.reverse().slice(0,3),M:n,media:h[0]});break;case "liked":h=
b?[b.media]:h;b=G(zi,{M:n,Qj:h.length,time:jd(r.getTime())});break;default:return}if(h.length){kd(id.a(),r,B("timestamp",b));d=Va(a.wi,function(a){return a.time<r.getTime()});cb(a.wi,d,0,{time:r,element:b});var K=B("medias",b);t(h,function(a){var b=cg(bg.a(),a),a=G(Mi,{media:b}),c=B("list-play",a),d=B("list-plus",a);B("thumb",a);K.appendChild(a);P(P(P(this.i(),a,"click",function(){Z.a().c(Eg,b)}),c,"click",function(a){a.preventDefault();a.stopPropagation();a=eg(b);U.a().c(Kf,a)}),d,"click",function(a){a.preventDefault();
a.stopPropagation();Pf().c(og,b,j)})},a);e?hc(a.be,b,0):c?hc(a.be,b,d):a.be.appendChild(b);L(Ba(v,b,"show"))}}Vj.prototype.resize=function(){var a=C().height-40-(vc(this.b(),"tabbed")?40:10);$d(this.b(),a);Q(this.be).height<a&&Yj(this)};function Zj(a){R.call(this);this.Ta=this.q=a;this.If=a.id==X.a().k.id;this.yb=[this.If?"inbox":"messages","activity","starred"]}s(Zj,R);Zj.prototype.w=function(a){Zj.d.w.call(this,a);v(a,"profile");v(a,"ios-scroll");Ac(a,Ki,{kh:this.If})};
Zj.prototype.z=function(){this.Ra=B("tabs",this.b());this.If&&(W("/_notification",p(function(a){var a=Y(a.target),b=0,a=Sa(a,function(a){a=new Oj(a);b+=!a.vb?1:0;return a},this);Z.a().c("new-messages",b);this.ye=new Qj(a);P(this.i(),this.ye,"resize",Ba(L,p(this.Lh,this)));this.ye.h(B("notifications-content",this.b()))},this)),this.Sl=B("inbox-content",this.b()),P(this.i(),window,"resize",Ba(L,p(this.Lh,this))));W("/_message/"+this.Ta.id,p(function(a){var a=Y(a.target),b=0,a=Sa(a,function(a){a=new Jj(a);
b+=!a.vb?1:0;return a},this);this.If&&Z.a().c("new-messages",b);this.ub=new Mj(this.Ta,a);P(this.i(),this.ub,"resize",Ba(L,p(this.Lh,this)));this.ub.h(B("messages-content",this.b()))},this));W("/_star/"+this.Ta.id,p(function(a){var a=Y(a.target),a=Sa(a,function(a){return new Xf(a)}),b=X.a().k;b.zk=a;b.c("set-starred");this.Ke=new Hj(a);this.Ke.h(B("starred-content",this.b()))},this));W("/_activity/"+this.Ta.id,p(function(a){a=Y(a.target).activities;this.Yh=new Vj(a,this.Ta.id);this.Yh.h(B("activity-content",
this.b()))},this));P(this.i(),this.Ra,"click",p(function(a){a=uc(a.target,"li");this.ec(a)},this));bg.a().subscribe("star",function(a,b){if(b)this.Ke.mg(a);else{var c=this.Ke,d=c.bc[a.id];d&&(Hc(d),Ub(c.bc,a.id))}},this)};Zj.prototype.ec=function(a){t(this.yb,function(b){z(this.Ra.parentElement,b,y(a,b));this.K=y(a,b)?b:this.K},this)};Zj.prototype.Lh=function(){$d(this.Sl,C().height-73)};function $j(){R.call(this);this.Ea=Df();this.Wk=new oj;this.yb={};this.qc=[];this.Nd=[];this.Pc=this.ae=0}s($j,R);m=$j.prototype;
m.z=function(){$j.d.z.call(this);this.ce=B("arrow",this.tc);this.Ag=A("sidebar-content");this.Nj=A("media-list");this.Qf=A("profile");this.bj=A("friendlist");this.Mi=A("conversation");this.tc=A("toolbar");this.Ra=B("tabs",this.b());this.lg=B("activities-count",this.b());this.Xg=B("inbox-count",this.b());var a=new df(document);t(ic(this.Ra),function(a){var b=Lb(a)[0];this.yb[b]=a;this.qc.push(b)},this);this.rh();W("/_activity",p(function(a){a=Y(a.target);this.Yh=new Vj(a.activities);this.Yh.h(A("stream"));
Z.a().c("new-activites",parseInt(a.new_count,10))},this));this.Ke=new Zj(X.a().k);this.Ke.h(A("my-profile"));this.fa&&DESKTOP?(this.O=A("info"),this.K="info",ak(this,"info","info")):(this.O=A("stream"),this.K="stream",ak(this,"info","stream"));var b="left";t(this.qc,function(a){var c=B(a,this.Ag);a==this.K?b="right":v(c,b)},this);this.Nd=[this.O,""];v(this.O,"current");if(this.Ea){this.Wk.h(A("admin"));var c=G(Bi,{name:"ADMIN",className:"admin"});this.Ra.appendChild(c);this.yb.admin=c;this.qc.push("admin")}bk(this);
P(P(P(P(this.i(),B("back-button",this.tc),"click",p(function(a){var b=this.Nd.shift();this.navigate(b[0],j,b[1]);bk(this);a.stopPropagation()},this)),this.Ra,"click",p(function(a){var b=this.K,c=uc(a.target,"li"),h=Lb(c)[0];ak(this,this.K,h);v(c,"selected");bk(this);b!=this.K&&a.stopPropagation();"stream"==h&&this.Xj(0,j)},this)),this.tc,"click",p(function(a){((a=uc(a.target,"li"))&&Lb(a)[0]==this.K||!a)&&(new He(this.O,[this.O.scrollLeft,this.O.scrollTop],[this.O.scrollLeft,0],300)).play()},this)),
a,"key",p(function(a){a.ctrlKey&&"68"==a.keyCode&&Mb(this.b(),"dark")},this));DESKTOP&&N.a().subscribe(md,function(a){z(this.b(),"toggled",a);L(p(function(){z(this.b(),"collapsed",!a)},this),!a?500:0)},this);Z.a().subscribe("navigate",this.navigate,this);Z.a().subscribe("new-activites",this.Xj,this);Z.a().subscribe("new-messages",this.jm,this);Z.a().subscribe("conversation",this.an,this);Z.a().subscribe("media-list",this.en,this);Z.a().subscribe(Eg,this.yk,this);Z.a().subscribe("friend-list",this.cn,
this);Z.a().subscribe(Fg,this.gn,this);T.a().subscribe(Jf,this.rh,this);U.a().subscribe(Kf,this.rh,this);T.a().subscribe(Gf,this.nm,this);DESKTOP&&N.a().subscribe("toggle-admin",function(a){z(this.b(),"admin",a);a?(N.a().c(md,j),ak(this,this.K,"admin")):"admin"==this.K&&ak(this,"admin","info")},this)};m.Xj=function(a,b){b&&(this.ae=0,O(this.lg,l));this.ae+=a;nc(this.lg,this.ae.toString());O(this.lg,!!this.ae)};
m.jm=function(a,b){b&&(this.Pc=0,O(this.Xg,l));this.Pc+=a;this.Pc=Math.max(this.Pc,0);nc(this.Xg,this.Pc.toString());O(this.Xg,!!this.Pc)};m.rh=function(a){if(a=a||T.a().p.l())if(this.Dc=a.media,!this.fa||this.Dc.id!=this.fa.q.id){var a=this.fa&&this.fa.g.A()?this.fa.g.A():k,b=this.fa?this.fa.f:k;Hc(this.fa);this.fa=new Aj(this.Dc,l,b,a);this.fa.h(A("info"))}};
m.nm=function(a){a=a||T.a().p;if((this.Dc=a.l()&&a.l().media)&&(!this.fa||this.Dc.id!=this.fa.q.id))Hc(this.fa),this.fa=new Aj(this.Dc),this.fa.h(A("info")),this.yk(this.Dc)};
function ak(a,b,c){var d=B(c,a.Ag),e=Pa(a.qc,b),b=Pa(a.qc,c),g=(e=e<b)?0:a.qc.length-1,h=e?g<a.qc.length:0<=g;for(g;h;g+=e?1:-1){var n=B(a.qc[g],a.Ag);if(e&&g>b||!e&&g<b)v(n,"right"),x(n,"left");else if(e&&g<b||!e&&g>b)z(n,"left",e),v(n,"right");else if(g==b){x(n,"right");x(n,"left");break}}a.K=c;cb(a.Nd,0,0,[a.O,""]);x(a.O,"current");a.O=d;v(a.O,"current");bk(a)}
m.navigate=function(a,b,c){if(a==this.O)c&&nc(B("back-title",this.tc),c);else{var d=y(this.O,"screen");b?(x(this.O,"on"),x(this.O,"current"),v(a,"current"),this.O=a):(z(this.O,"on",!d),b=[this.O,rc(B("back-title",this.tc))],cb(this.Nd,0,0,b),x(this.O,"current"),this.O=a,v(this.O,"current"));z(this.tc,"back",y(this.O,"slide"));c&&nc(B("back-title",this.tc),c);this.O!=this.Qf&&(Z.a().Fg=k)}};m.an=function(a,b,c,d){(new yj(a,b,c,d)).h(this.Mi);Z.a().c("navigate",this.Mi,l,a.name)};
m.en=function(a,b,c,d,e,g,h){(new Hj(b,c,d,e,g,h)).h(this.Nj);Z.a().c("navigate",this.Nj,l,a,d,e)};m.cn=function(){this.Mg=new Tj(i,j);this.Mg.h(this.bj);Z.a().c("navigate",this.bj,l,"Friends")};m.yk=function(a,b,c,d){if(this.fa&&a.id==this.fa.q.id){x(this.tc,"back");for(a=this.Nd[0][0];a&&y(a,"slide");)a=this.Nd.shift();ak(this,this.K,"info")}else{var e=A("media-info");(new Aj(a,b,c,d)).h(e);Z.a().c("navigate",e,l,a.name)}DESKTOP&&N.a().c(md,j)};
m.gn=function(a){if(!this.Eh||!(this.Eh.q.id==a.id&&this.O==this.Qf))Z.a().Fg=a.id,this.Eh=new Zj(a),this.Eh.h(this.Qf),Z.a().c("navigate",this.Qf,l,a.name),DESKTOP&&N.a().c(md,j)};function bk(a){var b=Math.round(Q(a.yb[a.K]).width/2+Td(a.yb[a.K]).x);a.ce.style.transform="translate3d("+b+"px, 0,0)";a.ce.style.msTransform="translate3d("+b+"px, 0,0)";a.ce.style.WebkitTransform="translate3d("+b+"px, 0,0)";a.ce.style.MozTransform="translate3d("+b+"px, 0,0)";a.ce.style.Kn="translate3d("+b+"px, 0,0)"};function ck(a){return'<div class="queue-media"><div class="pic"><img src="'+H(a.media.ma.L)+'"></div><div class="title">'+H(a.media.name)+'</div><div class="play"></div><div class="remove"></div></div>'};function dk(){R.call(this);this.bc={};this.cc=0;this.ra=new Bf("Queue");tf(this.ra,16,j)}s(dk,R);
dk.prototype.w=function(a){dk.d.w.call(this,a);this.ra.h(B("queue-toggle",this.b()));this.bm=B("queue-list",this.b());this.Tc=B("medias",this.b());P(P(P(this.i(),this.ra.b(),"click",p(function(){z(this.b(),"show",af(this.ra))},this)),this.bm,"click",p(function(a){a.preventDefault();a.stopPropagation()},this)),window,"click",p(function(a){af(this.ra)&&(vc(a.target,"queue")||L(p(function(){x(this.b(),"show");sf(this.ra,l)},this)))},this));Pf().subscribe(og,this.Cb,this);Pf();var b=p(function(a){t(a,
function(a){this.Cb(a,j)},this)},this);W("/_queue",function(a){a=Y(a.target);this.Jh=Sa(a,function(a){return cg(bg.a(),a)},this);b&&b(this.Jh)})};
dk.prototype.Cb=function(a,b){if(b){e=G(ck,{media:a});this.bc[a.id]=e;this.cc+=1;var c=B("play",e),d=B("remove",e);this.Tc.appendChild(e);P(P(P(this.i(),e,"click",p(function(b){b.preventDefault();b.stopPropagation();Z.a().c(Eg,a)},this)),c,"click",p(function(b){b.preventDefault();b.stopPropagation();x(this.b(),"show");sf(this.ra,l);b=eg(a);U.a().c(Kf,b);Pf().c(og,a,l)},this)),d,"click",p(function(b){b.preventDefault();b.stopPropagation();Pf().c(og,a,l)},this))}else if(Wb(this.bc,a.id)){var e=this.bc[a.id];
E(e);this.cc-=1}z(this.Tc,"no-medias",!this.cc);nc(this.ra.b().firstChild,0<this.cc?this.cc.toString():"")};function ek(a){return'<div class="main"><div id="stage" class="stage"><div id="ytplayer"></div><div id="stagecover"><div class="message"><span></span><div class="spinner" style="display:none"></div><div class="restart" style="display:none">TRY AGAIN</div></div><div class="fullscreen"></div><div class="expand"></div><div class="play" style="display: none"><div></div></div><div class="pause" style="display: none"><div></div></div></div><div id="vote" class="vote" style="display:none"><div class="like"></div><div class="dislike"></div></div><div id="logo"></div><div id="notify" class="notify"></div><div id="search" class="search"><div class="search-box"><div id="search-icon" class="search-icon"></div><input type="text" id="search-input" class="search-input" /><div id="clear-icon" class="clear-icon" style="display:none"></div></div><div class="search-results no-medias" id="search-results"><div class="label">SEARCH</div><div class="no-medias">NO RESULTS</div><div class="no-overflow"><div class="results"><div class="subtitle subtitle-channels">CHANNELS</div><div class="result-channels"></div><div class="subtitle subtitle-medias">VIDEOS</div><div class="result-medias"></div></div></div></div></div><div id="queue" class="queue"><div class="queue-toggle"><span></span></div><div class="queue-list"><div class="label">QUEUE</div><div class="medias-container"><div class="medias no-medias"><div class="no-medias">CLICK <span class="plus"></span> TO ADD VIDEOS</div></div></div></div></div></div><div id="guide" class="guide timeless position-hack'+
(a.gj?" toggled":" collapsed")+(a.sidebar?" sidebar-toggled":"")+'"><div class="channel-scrollable"><div id="channel-names" class="channel-names"></div><div class="channel-h-scrollable"><div id="channels" class="channels"></div></div></div><div class="header" id="header"><div class="times"><div id="schedule-toggle" class="schedule-toggle"><div class="fader"><div class="timeless"></div><div class="switcher"><div class="switch"></div></div><div class="scheduled"></div></div></div><div id="now-left" class="left browse">&#9664;<span> NOW</span></div><div id="now-right" class="right browse"><span>NOW </span>&#x25B6;</div></div><div id="ticker" class="ticker"><div id="go-live" class="go-live">GO LIVE</div></div><div id="my-ticker" class="my-ticker" style="display:none"><div class="me" style="background:'+
H(a.j.color)+";border-color:"+H(a.j.color)+';"><img src="'+H(a.j.L)+'"/></div></div></div><div class="pan-handle" id="pan-handle"></div><div id="right-grad"></div></div><div id="controller" class="controller'+(a.gj?" guide-toggled":" collapsed")+(a.sidebar?" sidebar-toggled":"")+'"><div class="background"></div><div class="left"><div id="guide-toggle" class="guide-toggle dark button">GUIDE</div><div class="controls"><div class="restart dark button"><div class="icon"></div></div><div class="play dark button"><div class="icon"></div></div><div class="volume dark button"><div class="icon"></div></div></div><div class="border"></div></div><div class="right"><div id="info-toggle" class="info-toggle dark button"><div class="icon"></div></div><div id="admin-toggle" class="admin-toggle dark button" style="display: none"><div class="icon"></div><div id="toggle-pending" class="pending" style="display:none"></div></div><div id="sidebar-toggle" class="sidebar-toggle dark button"><div class="icon"></div></div><div class="border"></div></div><div class="progress" style="display: none"><div class="elapsed animate"><div class="seek"></div></div><div class="title"></div><div class="current-time"></div><div class="duration"></div></div></div><div id="sidebar" class="'+
(a.sidebar?"toggled":"collapsed")+'"><div id="toolbar"><div class="back"><div class="back-button"><div>BACK</div></div><div class="back-title"></div></div><ul class="tabs"><li class="info tab selected"><div class="label">NOW</div></li><li class="stream tab"><div class="label">STREAM<div class="activities-count" style="display:none"></div></div></li><li class="profile tab"><div class="label">ME<div class="inbox-count" style="display:none"></div></div></li></ul><div class="radial-grad"></div><div class="arrow"></div></div><div id="sidebar-content"><div id="info" class="screen info"><div class="no-info">Pick a channel or play a story.</div></div><div id="stream" class="screen stream"><div class="loading loading-activity"><div class="loading-spinner"></div></div></div><div id="my-profile" class="screen profile"></div><div id="admin" class="screen admin"></div><div id="media-list" class="slide media-list"></div><div id="friendlist" class="slide friendlist"></div><div id="conversation" class="slide"></div>'+
(a.ng?'<div id="admin-col-list" class="slide admin"></div><div id="admin-list" class="slide admin-list"></div>':"")+'<div id="media-info" class="slide info"></div><div id="profile" class="slide profile"></div></div></div><div id="hovercard" class="watch-with" style="display: none"></div><div id="welcome" class="welcome" style="display:none"><div class="thanks"></div><div class="guide"></div><div class="friends"></div><div class="sidebar"></div><div class="close"></div></div></div>'};function lg(){}ma(lg);_gaq=[];lg.prototype.init=function(){_gaq.push(["_setAccount","UA-38058655-1"]);_gaq.push(["_trackPageview"]);var a=document.createElement("script");a.type="text/javascript";a.async=j;a.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)};lg.prototype.login=function(){_gaq.push(["_trackEvent","Users","Login",X.a().k.id])};
function rg(a,b){_gaq.push(["_trackEvent","Media","Play",b.id]);_gaq.push(["_trackEvent","Users","Play",X.a().k.id])}lg.prototype.Ac=function(a,b){a.I||(_gaq.push(["_trackEvent","Channel","OptOut",b.id]),_gaq.push(["_trackEvent","Channel","OptIn",a.id]))};
lg.prototype.aa=function(a,b,c){_gaq.push(["_trackEvent","Media","Comment",a.id]);_gaq.push(["_trackEvent","Users","Comment",X.a().k.id]);b&&_gaq.push(["_trackEvent","Facebook","Comment",X.a().k.id]);c&&_gaq.push(["_trackEvent","Twitter","Comment",X.a().k.id])};
function Gj(a,b,c,d){_gaq.push(["_trackEvent","Media","Share",b.id]);_gaq.push(["_trackEvent","Users","Share",X.a().k.id]);c&&_gaq.push(["_trackEvent","Facebook","Share",X.a().k.id]);d&&_gaq.push(["_trackEvent","Twitter","Share",X.a().k.id]);W("/_share",xe(),"POST","facebook="+c+"&twitter="+d)}ha("_gaq",_gaq);function fk(){M.call(this);this.Lj=l}s(fk,M);ma(fk);fk.prototype.init=function(a){this.Ob=a;a=(new appengine.Channel(unescape(a))).open();a.onmessage=p(this.um,this);a.onclose=p(this.Yj,this);J(window,"onbeforeunload",p(this.Yj,this));return this};
fk.prototype.um=function(a){var b=gh(a.data);switch(b.type){case "viewer_change":var c=Jg(X.a(),b.user);c.bb!=b.online&&X.a().c(Ig,c,b.online);var d=b.time&&ud(b.time+"Z");c.mf&&d&&c.mf.end(d);if(a=b.last_channel_id&&T.a().get(b.last_channel_id))a.c("remove-viewer",c),c.lb&&c.lb.c($f,c,a,j);var e=b.channel_id&&T.a().get(b.channel_id),a=b.media&&cg(bg.a(),b.media);e&&(d=d||new vd,d=new kg(b.session_id,c,e,d),c.mf=d,e.c(pg,d),a=(d=e.l())?d.media:a);a&&a.c($f,c,e);break;case "notification":a=new Oj(b.notification);
X.a().c("new-notification",a);break;case "new_comment":c=new tj(b.comment);if(c.j.id!=X.a().k.id&&(d=b.tweet?new uj(b.tweet):k,a=cg(bg.a(),b.comment.media)))a.c(Yf,c),d&&a.c("add-tweet",d);break;case "new_message":a=new Jj(b.message);X.a().c("new-message",a);Z.a().Fg!=a.P.id&&Vf.a().c("flash","messaged you",a.text,a.P,a.P.L,"#user:"+a.P.id);break;case "new_activity":X.a().c("new-activity",b.activity);b.activity.user.id!=X.a().k.id&&Z.a().c("new-activites",1);break;case "update_programs":a=b.programs;
e=T.a().get(b.channel_id);t(a,function(a){e.c(qg,a)},this);break;case "new_programs":b.channel&&(e=T.a().Ze(b.channel));t(b.programs,p(function(a){a=new dg(a);if(e=e||T.a().get(b.channel_id))if(e.c(ng,a),!T.a().p||!T.a().p.l())T.a().c(Gf,e),T.a().c(Jf,a)},this));break;case "twitter_auth":X.a().k.c(gg)}};
fk.prototype.Yj=function(){if(!this.Lj){var a=T.a().p.I&&T.a().p.lb&&Math.floor(U.a().getCurrentTime());DESKTOP&&W("/_settings",xe(),"POST","show_guide="+N.a().Nc+"&show_sidebar="+N.a().ad+(a?"&current_seek="+a:""));this.Lj=j}};function gk(){M.call(this);this.Co=[]}s(gk,M);ma(gk);gk.prototype.eh=function(a){Qb(a,p(function(a,c){t(a,p(function(a){a=new dg(a);T.a().jd[c]&&T.a().jd[c].Sb(a)},this))},this))};var hk=l;function ik(a){a.match(/[\d]+/g).length=3}
if(navigator.plugins&&navigator.plugins.length){var jk=navigator.plugins["Shockwave Flash"];jk&&(hk=j,jk.description&&ik(jk.description));navigator.plugins["Shockwave Flash 2.0"]&&(hk=j)}else if(navigator.mimeTypes&&navigator.mimeTypes.length){var kk=navigator.mimeTypes["application/x-shockwave-flash"];(hk=kk&&kk.enabledPlugin)&&ik(kk.enabledPlugin.description)}else try{var lk=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7"),hk=j;ik(lk.GetVariable("$version"))}catch(mk){try{lk=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6"),
hk=j}catch(nk){try{lk=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),hk=j,ik(lk.GetVariable("$version"))}catch(ok){}}};function pk(a,b,c,d,e,g,h,n){this.Ue=a;this.$k=b;this.od=c;this.vc=d;this.wo=e;this.ro=g;this.sa=h;this.Ka=n;this.rn=[];this.tg=[];this.fo=[];this.Go=[]}pk.prototype.ej=da("$k");pk.prototype.vk=function(a){this.vc=a;return this};pk.prototype.Th=function(a){this.v=a;return this};function qk(a){this.Ue=a;this.ln=k}function rk(a){this.Ue=a;this.ln=this.Lo=k};function pi(a,b,c){pk.call(this,"http://www.youtube.com/watch?v="+encodeURIComponent(String(a)),b,c,"application/x-shockwave-flash");this.Qk=a;this.rn=[new qk("http://i.ytimg.com/vi/"+a+"/default.jpg")];this.Th(new rk("http://www.youtube.com/v/"+encodeURIComponent(String(a))+"&hl=en&fs=1&autoplay=1"))}s(pi,pk);
var oi=RegExp("http://(?:[a-zA-Z]{2,3}\\.)?(?:youtube\\.com/watch)(?:\\?(?:[\\w=-]+&(?:amp;)?)*v=([\\w-]+)(?:&(?:amp;)?[\\w=-]+)*)?(?:#[!]?(?:(?:(?:[\\w=-]+&(?:amp;)?)*(?:v=([\\w-]+))(?:&(?:amp;)?[\\w=-]+)*)|(?:[\\w=&-]+)))?[^\\w-]?","i");function sk(){R.call(this);this.dl=new Ah;this.tl=new Cf;this.kn=new $j;this.v=new Nh;this.lm=new Ih;this.Jh=new dk;this.Xm=new Pi}var tk,uk,vk,wk,xk,yk,zk,Ak;s(sk,R);sk.prototype.w=function(a){sk.d.w.call(this,a);var b=G(ek,{j:X.a().k,ng:Df(),gj:X.a().k.dn&&!T.a().p.I,sidebar:X.a().k.hn});hc(a,b,0)};
sk.prototype.z=function(){sk.d.z.call(this);this.dl.h(A("controller"));this.tl.h(A("guide"));this.kn.h(A("sidebar"));this.v.h(A("stage"));this.lm.h(A("notify"));this.Jh.h(A("queue"));this.Xm.h(A("search"));this.Bo=new Hg;if(!X.a().k.Bn){X.a();var a=A("welcome");O(a,j);P(this.i(),a,"click",function(){O(a,l);W("/_welcomed",xe(),"POST")})}P(this.i(),document.body,"touchmove",function(a){uc(a.target,"div","ios-scroll")||a.preventDefault()});P(this.i(),window,"click",function(a){var c=uc(a.target,"a");
if(c=c?c.href:k)if((c=c.match("#(.*):(.*)"))&&c.length)switch(a.preventDefault(),a.stopPropagation(),c[1]){case "user":a=X.a().get(c[2]);Z.a().c(Fg,a);break;case "channel":a=T.a().get(c[2]);T.a().c(Gf,a);break;case "info":a=bg.a().get(c[2]);Z.a().c(Eg,a);break;case "friendlist":Z.a().c("friend-list")}});window.onload=function(){window.onbeforeunload=ea("Leaving so soon?")};W("/_presence",p(function(a){a=Y(a.target);this.ao=fk.a().init(a.token);var c=T.a();t(a.viewer_sessions,p(function(a){var b=Jg(X.a(),
a.user),c=X.a();Ua(c.uh,function(a){return a.id==b.id})||c.uh.push(b);var c=this.jd[a.channel_id],h=ud(a.tune_in+"Z"),n=a.tune_out?ud(a.tune_out+"Z"):k,a=new kg(a.id,b,c,h,n);b.mf=a;c&&(c.ed.push(a),c.c(pg,a),(a=c.l())&&a.media.c($f,b,c))},c))},this));N.a().subscribe("toggle-info",function(){var a=A("login"),c=A("static-content"),d=A("pages");x(a,"hide");v(a,"show");c.style.height=Q(d).height+80+"px";Bk(j)},this)};
function Bk(a){var b=A("login"),c=A("static-content"),d=A("pages"),e=y(b,"app");z(b,"expanded",a);A("uvTab")&&z(A("uvTab"),"show",e&&a);a?(e?c.style.bottom=-Q(d).height-80+"px":c.style.top=Math.max(10,C().height-280)+"px",a=e?Math.min(C().height-100,c.scrollHeight+80):Math.min(C().height-435,c.scrollHeight+190),!e||e&&!b.scrollTop?(e=new He(b,[b.scrollLeft,b.scrollTop],[b.scrollLeft,a],300),v(b,"scrolling"),e.play(),J(e,"end",function(){x(b,"scrolling")})):b.scrollTop=a):(c.style.top="",c.style.height=
"",e?L(function(){x(b,"show")},200):c.className="")}
function Ck(){var a=A("fb-login"),b=A("static-content"),c=A("login");v(a,"disabled");v(a,"spin");W("/_session",function(a){if(200==yh(a.target)){var e=Y(a.target);if(e.error)nc(A("error"),e.error),Dk("error","Yikes...");else if(e.message)nc(A("message"),e.message);else{x(document.body,"login");L(function(){L(function(){v(c,"hide");L(function(){O(A("homepage"),l);v(c,"app");v(b,"faq")},600)},600)});var a=e.channels,g=e.programs,e=e.current_user;if(!Tb(e)){var h=X.a();h.k=Jg(h,e)}T.a().eh(a);gk.a().eh(g);
a=T.a();a.p=a.jd[e.current_channel]||a.Bc[0];a.p=Qf(a)||a.p;a.p&&a.mi(a.p.l());id.a().init();(new sk).h(document.body);lg.a().login()}}else 500==yh(a.target)?Dk("error","Opps, check back later"):Dk("wait"),L(function(){v(xk,"strike");tk.play()},500),L(function(){x(xk,"strike");v(yk,"strike");uk.play()},800),L(function(){x(yk,"strike");v(zk,"strike");vk.play()},1100),L(function(){x(zk,"strike");v(Ak,"strike");wk.play()},1400),L(function(){x(Ak,"strike");v(zk,"strike");vk.load();vk.play()},1700),L(function(){x(zk,
"strike");v(yk,"strike");uk.load();uk.play()},2E3),L(function(){x(yk,"strike");v(xk,"strike");tk.load();tk.play()},2300),L(function(){x(xk,"strike")},2600)},"POST")}function Dk(a,b){var c=A("fb-login");if(a){var d=B("power",c);v(d,a)}b&&(d=B("waitlist",c),nc(d,b));x(c,"spin");v(c,"disabled");O(c,j);v(c,"show");v(c,"waitlist")}
function Ch(a){var b=parseInt(a,10),a=Math.floor(b/3600),c=Math.floor((b-3600*a)/60),b=b-3600*a-60*c;10>c&&(c=(a?"0":"")+c);10>b&&(b="0"+b);return(a?a+":":"")+(c?c+":":"")+b}
ha("brkn.Main.staticInit",function(){var a=A("fb-login"),b=A("homepage"),c=A("login"),d=A("static-content"),e=A("pages"),g=A("footer"),h=l;v(b,"hide");var n=D("img");n.src="/static/img/homepage.jpg";J(n,"load",function(){x(b,"hide");v(b,"show")});L(function(){O(a,j);L(Ba(v,a,"show"),400)},100);J(c,"click",function(a){"static-scrollable"==a.target.id&&(a=y(c,"app"),h=l,a?Bk(h):(a=new He(c,[c.scrollLeft,c.scrollTop],[c.scrollLeft,0],300),a.play(),J(a,"end",Ba(Bk,h))))});J(c,"scroll",function(){!y(c,
"scrolling")&&1>c.scrollTop&&(h=l,Bk(h))});J(g,"click",function(a){var a=vc(a.target,"section"),b=y(c,"app");a&&(h=j,d.className=a.id,d.style.height=Q(e).height+(b?80:220)+"px",Bk(h))});J(window,"resize",Ba(Bk,h));lg.a().init();IPHONE&&(v(document.body,"iphone"),v(document.body,"login"),window.onload=function(){L(function(){window.scrollTo(0,1)},1E3)});xk=A("chord-1");yk=A("chord-2");zk=A("chord-3");Ak=A("chord-4");tk=A("mp3-1");uk=A("mp3-2");vk=A("mp3-3");wk=A("mp3-4");tk.volume=0.5;uk.volume=0.5;
vk.volume=0.5;wk.volume=0.5;tk.load();uk.load();vk.load();wk.load();J(xk,"click",function(){tk.load();tk.play()});J(yk,"click",function(){uk.load();uk.play()});J(zk,"click",function(){vk.load();vk.play()});J(Ak,"click",function(){wk.load();wk.play()})});ha("brkn.Main.auth",function(){FB.getLoginStatus(function(a){if("connected"===a.status)Ck();else{var b=A("fb-login");J(b,"click",function(){v(b,"disabled");FB.login(function(a){a.authResponse?Ck():x(b,"disabled")},{scope:"email"})})}})});